(()=>{var e,t={5122:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});const n={warningEmitted:!1},s=e=>{e&&!n.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(n.warningEmitted=!0,process.emitWarning("NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will\nno longer support Node.js 16.x on January 6, 2025.\n\nTo continue receiving updates to AWS services, bug fixes, and security\nupdates please upgrade to a supported Node.js LTS version.\n\nMore information can be found at: https://a.co/74kJMmI"))}},244:(e,t,r)=>{"use strict";function n(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}r.d(t,{g:()=>n})},6228:(e,t,r)=>{"use strict";r.d(t,{f2:()=>c});var n=r(5479);const s=e=>new Date(Date.now()+e),i=e=>n.cS.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,o=(e,t)=>{const r=Date.parse(e);return((e,t)=>Math.abs(s(t).getTime()-e)>=3e5)(r,t)?r-Date.now():t},a=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t};class c{async sign(e,t,r){if(!n.Kd.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const i=await(async e=>{const t=a("context",e.context),r=a("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=a("signer",r.signer),i=await s(n),o=e?.signingRegion,c=e?.signingRegionSet,u=e?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:c,signingName:u}})(r),{config:o,signer:c}=i;let{signingRegion:u,signingName:l}=i;const d=r.context;if(d?.authSchemes?.length){const[e,t]=d.authSchemes;"sigv4a"===e?.name&&"sigv4"===t?.name&&(u=t?.signingRegion??u,l=t?.signingName??l)}return await c.sign(e,{signingDate:s(o.systemClockOffset),signingRegion:u,signingService:l})}errorHandler(e){return t=>{const r=t.ServerTime??i(t.$response);if(r){const n=a("config",e.config),s=n.systemClockOffset;n.systemClockOffset=o(r,n.systemClockOffset),n.systemClockOffset!==s&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){const r=i(e);if(r){const e=a("config",t.config);e.systemClockOffset=o(r,e.systemClockOffset)}}}},3448:(e,t,r)=>{"use strict";r.d(t,{h:()=>q});var n=r(244),s=r(6864),i=r(8004),o=r(7135),a=r(2531),c=r(3197);const u="X-Amz-Date",l="X-Amz-Signature",d="X-Amz-Security-Token",p="authorization",f=u.toLowerCase(),h=[p,f,"date"],g=l.toLowerCase(),m="x-amz-content-sha256",y=d.toLowerCase(),b={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},v=/^proxy-/,w=/^sec-/,S="AWS4-HMAC-SHA256",I="AWS4-HMAC-SHA256-PAYLOAD",E="aws4_request",_={},k=[],A=(e,t,r)=>`${e}/${t}/${r}/${E}`,x=(e,t,r)=>{const n=new e(t);return n.update((0,c.Fo)(r)),n.digest()},P=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(null==e[s])continue;const i=s.toLowerCase();(i in b||t?.has(i)||v.test(i)||w.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n};var O=r(3695);const C=async({headers:e,body:t},r)=>{for(const t of Object.keys(e))if(t.toLowerCase()===m)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(0,O.m)(t)){const e=new r;return e.update((0,c.Fo)(t)),(0,i.n)(await e.digest())}return"UNSIGNED-PAYLOAD"};class T{format(e){const t=[];for(const r of Object.keys(e)){const n=(0,c.ar)(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}const r=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let n=0;for(const e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(s.buffer);return o.set(e.value,3),o;case"string":const a=(0,c.ar)(e.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const l=new Uint8Array(u.buffer);return l.set(a,3),l;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(j.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!R.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const p=new Uint8Array(17);return p[0]=9,p.set((0,i.a)(e.value.replace(/\-/g,"")),1),p}}}var N;!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(N||(N={}));const R=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class j{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&$(t),new j(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&$(e),parseInt((0,i.n)(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function $(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}var D=r(5479);const M=e=>{e=D.Kd.clone(e);for(const t of Object.keys(e.headers))h.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};class F{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:s,uriEscapePath:i=!0}){this.headerFormatter=new T,this.service=n,this.sha256=s,this.uriEscapePath=i,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=(0,o.t)(r),this.credentialProvider=(0,o.t)(t)}async presign(e,t={}){const{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:o,hoistableHeaders:a,signingRegion:c,signingService:p}=t,f=await this.credentialProvider();this.validateResolvedCredentials(f);const h=c??await this.regionProvider(),{longDate:g,shortDate:m}=V(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=A(m,h,p??this.service),b=((e,t={})=>{const{headers:r,query:n={}}=D.Kd.clone(e);for(const e of Object.keys(r)){const s=e.toLowerCase();("x-amz-"===s.slice(0,6)&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}})(M(e),{unhoistableHeaders:i,hoistableHeaders:a});f.sessionToken&&(b.query[d]=f.sessionToken),b.query["X-Amz-Algorithm"]=S,b.query["X-Amz-Credential"]=`${f.accessKeyId}/${y}`,b.query[u]=g,b.query["X-Amz-Expires"]=n.toString(10);const v=P(b,s,o);return b.query["X-Amz-SignedHeaders"]=U(v),b.query[l]=await this.getSignature(g,y,this.getSigningKey(f,h,m,p),this.createCanonicalRequest(b,v,await C(e,this.sha256))),b}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:s,signingService:o}){const a=s??await this.regionProvider(),{shortDate:c,longDate:u}=V(r),l=A(c,a,o??this.service),d=await C({headers:{},body:t},this.sha256),p=new this.sha256;p.update(e);const f=(0,i.n)(await p.digest()),h=[I,u,l,n,f,d].join("\n");return this.signString(h,{signingDate:r,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then((t=>({message:e.message,signature:t})))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const o=r??await this.regionProvider(),{shortDate:a}=V(t),u=new this.sha256(await this.getSigningKey(s,o,a,n));return u.update((0,c.Fo)(e)),(0,i.n)(await u.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:s,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=s??await this.regionProvider(),c=M(e),{longDate:u,shortDate:l}=V(t),d=A(l,a,i??this.service);c.headers[f]=u,o.sessionToken&&(c.headers[y]=o.sessionToken);const h=await C(c,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1})(m,c.headers)&&this.applyChecksum&&(c.headers[m]=h);const g=P(c,n,r),b=await this.getSignature(u,d,this.getSigningKey(o,a,l,i),this.createCanonicalRequest(c,g,h));return c.headers[p]=`${S} Credential=${o.accessKeyId}/${d}, SignedHeaders=${U(g)}, Signature=${b}`,c}createCanonicalRequest(e,t,r){const n=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e)){if(n.toLowerCase()===g)continue;const s=(0,a.o)(n);t.push(s);const i=e[n];"string"==typeof i?r[s]=`${s}=${(0,a.o)(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce(((e,t)=>e.concat([`${s}=${(0,a.o)(t)}`])),[]).sort().join("&"))}return t.sort().map((e=>r[e])).filter((e=>e)).join("&")})(e)}\n${n.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${n.join(";")}\n${r}`}async createStringToSign(e,t,r){const n=new this.sha256;n.update((0,c.Fo)(r));const s=await n.digest();return`${S}\n${e}\n${t}\n${(0,i.n)(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const r of e.split("/"))0!==r?.length&&"."!==r&&(".."===r?t.pop():t.push(r));const r=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return(0,a.o)(r).replace(/%2F/g,"/")}return e}async getSignature(e,t,r,n){const s=await this.createStringToSign(e,t,n),o=new this.sha256(await r);return o.update((0,c.Fo)(s)),(0,i.n)(await o.digest())}getSigningKey(e,t,r,n){return(async(e,t,r,n,s)=>{const o=await x(e,t.secretAccessKey,t.accessKeyId),a=`${r}:${n}:${s}:${(0,i.n)(o)}:${t.sessionToken}`;if(a in _)return _[a];for(k.push(a);k.length>50;)delete _[k.shift()];let c=`AWS4${t.secretAccessKey}`;for(const t of[r,n,s,E])c=await x(e,c,t);return _[a]=c})(this.sha256,e,r,t,n||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const V=e=>{const t=(r=e,(e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e)(r).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var r;return{longDate:t,shortDate:t.slice(0,8)}},U=e=>Object.keys(e).sort().join(";"),q=e=>{let t,r=!1;e.credentials&&(r=!0,t=(0,s.K4)(e.credentials,s.OC,s.e)),t||(t=e.credentialDefaultProvider?(0,s.te)(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw new Error("`credentials` is missing")});const i=async()=>t({callerClientConfig:e}),{signingEscapePath:o=!0,systemClockOffset:a=e.systemClockOffset||0,sha256:c}=e;let u;return u=e.signer?(0,s.te)(e.signer):e.regionInfoProvider?()=>(0,s.te)(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([t,r])=>{const{signingRegion:n,signingService:s}=t;e.signingRegion=e.signingRegion||n||r,e.signingName=e.signingName||s||e.serviceId;const a={...e,credentials:i,region:e.signingRegion,service:e.signingName,sha256:c,uriEscapePath:o};return new(e.signerConstructor||F)(a)})):async t=>{const r=(t=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,s.te)(e.region)(),properties:{}},t)).signingRegion,n=t.signingName;e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||n||e.serviceId;const a={...e,credentials:i,region:e.signingRegion,service:e.signingName,sha256:c,uriEscapePath:o};return new(e.signerConstructor||F)(a)},{...e,systemClockOffset:a,signingEscapePath:o,credentials:r?async()=>i().then((e=>(0,n.g)(e,"CREDENTIALS_CODE","e"))):i,signer:u}}},8218:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var n=r(1248);const s=(e,t)=>(0,n.Px)(e,t).then((e=>t.utf8Encoder(e)))},5469:(e,t,r)=>{"use strict";r.d(t,{FI:()=>a,t_:()=>o});var n=r(1248),s=r(6454),i=r(8218);const o=(e,t)=>(0,i.w)(e,t).then((e=>{if(e.length){const t=new s.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});let r;t.addEntity("#xD","\r"),t.addEntity("#10","\n");try{r=t.parse(e,!0)}catch(t){throw t&&"object"==typeof t&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}const i="#text",o=Object.keys(r)[0],a=r[o];return a[i]&&(a[o]=a[i],delete a[i]),(0,n.rm)(a)}return{}})),a=async(e,t)=>{const r=await o(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r}},904:(e,t,r)=>{"use strict";r.d(t,{yG:()=>i,pi:()=>o,fromEnv:()=>a});var n=r(244),s=r(8112);const i="AWS_ACCESS_KEY_ID",o="AWS_SECRET_ACCESS_KEY",a=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");const t=process.env[i],r=process.env[o],a=process.env.AWS_SESSION_TOKEN,c=process.env.AWS_CREDENTIAL_EXPIRATION,u=process.env.AWS_CREDENTIAL_SCOPE,l=process.env.AWS_ACCOUNT_ID;if(t&&r){const e={accessKeyId:t,secretAccessKey:r,...a&&{sessionToken:a},...c&&{expiration:new Date(c)},...u&&{credentialScope:u},...l&&{accountId:l}};return(0,n.g)(e,"CREDENTIALS_ENV_VARS","g"),e}throw new s.C1("Unable to find environment variable credentials.",{logger:e?.logger})}},1095:(e,t,r)=>{"use strict";r.d(t,{OV:()=>s,TC:()=>o});var n=r(5479);function s(e){return e}const i={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},o=e=>({applyToStack:t=>{t.add((e=>t=>async r=>{if(!n.Kd.isInstance(r.request))return t(r);const{request:s}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let e=s.hostname;null!=s.port&&(e+=`:${s.port}`),s.headers.host=e}return t(r)})(e),i)}})},9359:(e,t,r)=>{"use strict";r.d(t,{Y7:()=>s});const n={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},s=e=>({applyToStack:e=>{e.add(((e,t)=>async r=>{try{const n=await e(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??t.inputFilterSensitiveLog,d=u??t.outputFilterSensitiveLog,{$metadata:p,...f}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:d(f),metadata:p}),n}catch(e){const{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:a}=o,c=a??t.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:s,input:c(r.input),error:e,metadata:e.$metadata}),e}}),n)}})},8377:(e,t,r)=>{"use strict";r.d(t,{n4:()=>o});var n=r(5479);const s="X-Amzn-Trace-Id",i={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},o=e=>({applyToStack:t=>{t.add((e=>t=>async r=>{const{request:i}=r;if(!n.Kd.isInstance(i)||"node"!==e.runtime||i.headers.hasOwnProperty(s))return t(r);const o=process.env.AWS_LAMBDA_FUNCTION_NAME,a=process.env._X_AMZN_TRACE_ID,c=e=>"string"==typeof e&&e.length>0;return c(o)&&c(a)&&(i.headers[s]=a),t({...r,request:i})})(e),i)}})},6961:(e,t,r)=>{"use strict";r.d(t,{bM:()=>s,sM:()=>m,Dc:()=>i});var n=r(6864);const s=void 0;function i(e){const t=(0,n.te)(e.userAgentAppId??s);return{...e,customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{const r=await t();if(!function(e){return void 0===e||"string"==typeof e&&e.length<=50}(r)){const t="NoOpLogger"!==e.logger?.constructor?.name&&e.logger?e.logger:console;"string"!=typeof r?t?.warn("userAgentAppId must be a string or undefined."):r.length>50&&t?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}}}var o=r(6652),a=r(5479);function c(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}const u=/\d{12}\.ddb/,l="user-agent",d="x-amz-user-agent",p=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,f=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,h=e=>{const t=e[0].split("/").map((e=>e.replace(p,"-"))).join("/"),r=e[1]?.replace(f,"-"),n=t.indexOf("/"),s=t.substring(0,n);let i=t.substring(n+1);return"api"===s&&(i=i.toLowerCase()),[s,i,r].filter((e=>e&&e.length>0)).reduce(((e,t,r)=>{switch(r){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}}),"")},g={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},m=e=>({applyToStack:t=>{var r;t.add((r=e,(e,t)=>async n=>{const{request:s}=n;if(!a.Kd.isInstance(s))return e(n);const{headers:i}=s,p=t?.userAgent?.map(h)||[],f=(await r.defaultUserAgentProvider()).map(h);await async function(e,t,r){const n=r.request;if("rpc-v2-cbor"===n?.headers?.["smithy-protocol"]&&c(e,"PROTOCOL_RPC_V2_CBOR","M"),"function"==typeof t.retryStrategy){const r=await t.retryStrategy();"function"==typeof r.acquireInitialRetryToken?r.constructor?.name?.includes("Adaptive")?c(e,"RETRY_MODE_ADAPTIVE","F"):c(e,"RETRY_MODE_STANDARD","E"):c(e,"RETRY_MODE_LEGACY","D")}if("function"==typeof t.accountIdEndpointMode){const r=e.endpointV2;switch(String(r?.url?.hostname).match(u)&&c(e,"ACCOUNT_ID_ENDPOINT","O"),await(t.accountIdEndpointMode?.())){case"disabled":c(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":c(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":c(e,"ACCOUNT_ID_MODE_REQUIRED","R")}}const s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const t=s;t.accountId&&c(e,"RESOLVED_ACCOUNT_ID","T");for(const[r,n]of Object.entries(t.$source??{}))c(e,r,n)}}(t,r,n);const g=t;f.push(`m/${function(e){let t="";for(const r in e){const n=e[r];if(!(t.length+n.length+1<=1024))break;t.length?t+=","+n:t+=n}return t}(Object.assign({},t.__smithy_context?.features,g.__aws_sdk_context?.features))}`);const m=r?.customUserAgent?.map(h)||[],y=await r.userAgentAppId();y&&f.push(h([`app/${y}`]));const b=(0,o.vL)(),v=(b?[b]:[]).concat([...f,...p,...m]).join(" "),w=[...f.filter((e=>e.startsWith("aws-sdk-"))),...m].join(" ");return"browser"!==r.runtime?(w&&(i[d]=i[d]?`${i[l]} ${w}`:w),i[l]=v):i[d]=v,e({...n,request:s})}),g)}})},4547:(e,t,r)=>{"use strict";r.d(t,{Rq:()=>n,$3:()=>s});const n=e=>{let t=async()=>{if(void 0===e.region)throw new Error("Region is missing from runtimeConfig");const t=e.region;return"string"==typeof t?t:t()};return{setRegion(e){t=e},region:()=>t}},s=e=>({region:e.region()})},6652:(e,t,r)=>{"use strict";r.d(t,{UF:()=>a,vL:()=>o});var n=r(8545);const s=(e,t=!1)=>{if(t){for(const t of e.split("."))if(!s(t))return!1;return!0}return!(!(0,n.X8)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,n.oX)(e))};let i=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}');const o=()=>"",a={isVirtualHostableS3Bucket:s,parseArn:e=>{const t=e.split(":");if(t.length<6)return null;const[r,n,s,i,o,...a]=t;return"arn"!==r||""===n||""===s||""===a.join(":")?null:{partition:n,service:s,region:i,accountId:o,resourceId:a.map((e=>e.split("/"))).flat()}},partition:e=>{const{partitions:t}=i;for(const r of t){const{regions:t,outputs:n}=r;for(const[r,s]of Object.entries(t))if(r===e)return{...n,...s}}for(const r of t){const{regionRegex:t,outputs:n}=r;if(new RegExp(t).test(e))return{...n}}const r=t.find((e=>"aws"===e.id));if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}}};n.mw.aws=a},3410:(e,t,r)=>{"use strict";r.d(t,{hV:()=>o,pf:()=>i});var n=r(857);const s=require("process"),i=({serviceId:e,clientVersion:t})=>async r=>{const i=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,n.platform)()}`,(0,n.release)()],["lang/js"],["md/nodejs",`${s.versions.node}`]];e&&i.push([`api/${e}`,t]),s.env.AWS_EXECUTION_ENV&&i.push([`exec-env/${s.env.AWS_EXECUTION_ENV}`]);const o=await(r?.userAgentAppId?.());return o?[...i,[`app/${o}`]]:[...i]};const o={environmentVariableSelector:e=>e.AWS_SDK_UA_APP_ID,configFileSelector:e=>e.sdk_ua_app_id??e["sdk-ua-app-id"],default:r(6961).bM}},1487:(e,t,r)=>{"use strict";r.d(t,{zH:()=>c,GG:()=>a,e$:()=>i,Ko:()=>o,TD:()=>d});const n=(e,t,r)=>{if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var s;!function(e){e.ENV="env",e.CONFIG="shared config entry"}(s||(s={}));const i={environmentVariableSelector:e=>n(e,"AWS_USE_DUALSTACK_ENDPOINT",s.ENV),configFileSelector:e=>n(e,"use_dualstack_endpoint",s.CONFIG),default:!1},o={environmentVariableSelector:e=>n(e,"AWS_USE_FIPS_ENDPOINT",s.ENV),configFileSelector:e=>n(e,"use_fips_endpoint",s.CONFIG),default:!1};r(7135);const a={environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw new Error("Region is missing")}},c={preferredFile:"credentials"},u=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),l=e=>u(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,d=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"==typeof t)return l(t);const e=await t();return l(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!u(e)||("function"!=typeof r?Promise.resolve(!!r):r())}}}},6864:(e,t,r)=>{"use strict";r.d(t,{h$:()=>h,mR:()=>g,e:()=>y,wB:()=>i,lW:()=>l,OC:()=>m,K4:()=>b,te:()=>d,lI:()=>p.lI,J7:()=>f}),r(7523);var n=r(7135);const s={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},i=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:i=>{i.addRelativeTo(((e,t)=>(r,s)=>async i=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,s,i.input)),a=function(e){const t=new Map;for(const r of e)t.set(r.schemeId,r);return t}(e.httpAuthSchemes),c=(0,n.u)(s),u=[];for(const r of o){const n=a.get(r.schemeId);if(!n){u.push(`HttpAuthScheme \`${r.schemeId}\` was not enabled for this service.`);continue}const i=n.identityProvider(await t.identityProviderConfigProvider(e));if(!i){u.push(`HttpAuthScheme \`${r.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:o={},signingProperties:l={}}=r.propertiesExtractor?.(e,s)||{};r.identityProperties=Object.assign(r.identityProperties||{},o),r.signingProperties=Object.assign(r.signingProperties||{},l),c.selectedHttpAuthScheme={httpAuthOption:r,identity:await i(r.identityProperties),signer:n.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(u.join("\n"));return r(i)})(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),s)}});r(1208).Ou.name;var o=r(5479);const a=e=>e=>{throw e},c=(e,t)=>{},u={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},l=e=>({applyToStack:e=>{e.addRelativeTo(((e,t)=>async r=>{if(!o.Kd.isInstance(r.request))return e(r);const s=(0,n.u)(t).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:u,signer:l}=s,d=await e({...r,request:await l.sign(r.request,u,i)}).catch((l.errorHandler||a)(i));return(l.successHandler||c)(d.response,i),d}),u)}}),d=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t};var p=r(7115);function f(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}class h{constructor(e){this.authSchemes=new Map;for(const[t,r]of Object.entries(e))void 0!==r&&this.authSchemes.set(t,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}class g{async sign(e,t,r){return e}}const m=e=>y(e)&&e.expiration.getTime()-Date.now()<3e5;const y=e=>void 0!==e.expiration,b=(e,t,r)=>{if(void 0===e)return;const n="function"!=typeof e?async()=>Promise.resolve(e):e;let s,i,o,a=!1;const c=async e=>{i||(i=n(e));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return void 0===t?async e=>(o&&!e?.forceRefresh||(s=await c(e)),s):async e=>(o&&!e?.forceRefresh||(s=await c(e)),a?s:r(s)?t(s)?(await c(e),s):s:(a=!0,s))}},7115:(e,t,r)=>{"use strict";r.d(t,{Px:()=>s,$6:()=>i,lI:()=>a});var n=r(8101);const s=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return n.Mu.mutate(e);if(!e)return n.Mu.mutate(new Uint8Array);const r=t.streamCollector(e);return n.Mu.mutate(await r)};function i(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}var o=r(5479);function a(e,t){return new c(e,t)}class c{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:t="https",port:r,path:n}=await this.context.endpoint();this.path=n;for(const e of this.resolvePathStack)e(this.path);return new o.Kd({protocol:t,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push((t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e})),this}p(e,t,r,n){return this.resolvePathStack.push((s=>{this.path=((e,t,r,n,s,o)=>{if(null==t||void 0===t[r])throw new Error("No value provided for input HTTP label: "+r+".");{const t=n();if(t.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,o?t.split("/").map((e=>i(e))).join("/"):i(t))}return e})(s,this.input,e,t,r,n)})),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}},1701:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var n=r(9290),s=r(3197),i=r(181),o=r(6982);class a{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update((0,s.Fo)(c(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,o.createHmac)(this.algorithmIdentifier,c(this.secret)):(0,o.createHash)(this.algorithmIdentifier)}}function c(e,t){return i.Buffer.isBuffer(e)?e:"string"==typeof e?(0,n.s)(e,t):ArrayBuffer.isView(e)?(0,n.Q)(e.buffer,e.byteOffset,e.byteLength):(0,n.Q)(e)}},3695:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});const n=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},649:(e,t,r)=>{"use strict";r.d(t,{vK:()=>o});var n=r(5479);const s="content-length",i={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},o=e=>({applyToStack:t=>{var r;t.add((r=e.bodyLengthChecker,e=>async t=>{const i=t.request;if(n.Kd.isInstance(i)){const{body:e,headers:t}=i;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(s))try{const t=r(e);i.headers={...i.headers,[s]:String(t)}}catch(e){}}return e({...t,request:i})}),i)}})},9389:(e,t,r)=>{"use strict";r.d(t,{rD:()=>b,Co:()=>v});const n=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,s=/(\d+\.){3}\d+/,i=/\.\./,o=(e,t,r)=>{const n=async()=>{const n=r[e]??r[t];return"function"==typeof n?n():n};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{const e=await n();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:r,port:n,path:s}=e;return`${t}//${r}${n?":"+n:""}${s}`}}return e}:n};var a=r(9987),c=r(3054);const u="AWS_ENDPOINT_URL",l="endpoint_url",d=async e=>(0,a.Z)((e=>({environmentVariableSelector:t=>{const r=e.split(" ").map((e=>e.toUpperCase())),n=t[[u,...r].join("_")];return n||(t[u]||void 0)},configFileSelector:(t,r)=>{if(r&&t.services){const n=r[["services",t.services].join(c.QD)];if(n){const t=n[[e.split(" ").map((e=>e.toLowerCase())).join("_"),l].join(c.QD)];if(t)return t}}const n=t[l];if(n)return n},default:void 0}))(e??""))();var p=r(2641);const f=e=>"object"==typeof e?"url"in e?(0,p.D)(e.url):e:(0,p.D)(e),h=async(e,t,r)=>{const a={},c=t?.getEndpointParameterInstructions?.()||{};for(const[t,n]of Object.entries(c))switch(n.type){case"staticContextParams":a[t]=n.value;break;case"contextParams":a[t]=e[n.name];break;case"clientContextParams":case"builtInParams":a[t]=await o(n.name,t,r)();break;case"operationContextParams":a[t]=n.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(n))}return 0===Object.keys(c).length&&Object.assign(a,r),"s3"===String(r.serviceId).toLowerCase()&&await(async e=>{const t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(e=>{const[t,r,n,,,s]=e.split(":"),i="arn"===t&&e.split(":").length>=6,o=Boolean(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o})(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else r=t,(!n.test(r)||s.test(r)||i.test(r)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);var r;return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(a),a};var g=r(6864),m=r(7135);const y={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:r(1208).Ou.name},b=(e,t)=>({applyToStack:r=>{r.addRelativeTo((({config:e,instructions:t})=>(r,n)=>async s=>{e.endpoint&&(0,g.J7)(n,"ENDPOINT_OVERRIDE","N");const i=await(async(e,t,r,n)=>{if(!r.endpoint){let e;e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await d(r.serviceId),e&&(r.endpoint=()=>Promise.resolve(f(e)))}const s=await h(e,t,r);if("function"!=typeof r.endpointProvider)throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)})(s.input,{getEndpointParameterInstructions:()=>t},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;const o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const e=(0,m.u)(n),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})})({config:e,instructions:t}),y)}}),v=e=>{const t=e.tls??!0,{endpoint:r}=e,n=null!=r?async()=>f(await(0,m.t)(r)()):void 0,s=!!r,i={...e,endpoint:n,tls:t,isCustomEndpoint:s,useDualstackEndpoint:(0,m.t)(e.useDualstackEndpoint??!1),useFipsEndpoint:(0,m.t)(e.useFipsEndpoint??!1)};let o;return i.serviceConfiguredEndpoint=async()=>(e.serviceId&&!o&&(o=d(e.serviceId)),o),i}},4171:(e,t,r)=>{"use strict";r.d(t,{qs:()=>y,kN:()=>v,ey:()=>A,$z:()=>b});var n=r(3323),s=r(5479),i=r(4542),o=r(6982),a=r.n(o);const c={randomUUID:a().randomUUID},u=new Uint8Array(256);let l=u.length;function d(){return l>u.length-16&&(a().randomFillSync(u),l=0),u.slice(l,l+=16)}const p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));const f=function(e,t,r){if(c.randomUUID&&!t&&!e)return c.randomUUID();const n=(e=e||{}).random||(e.rng||d)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]}(n)};var h=r(7135);const g="AWS_MAX_ATTEMPTS",m="max_attempts",y={environmentVariableSelector:e=>{const t=e[g];if(!t)return;const r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${g} mast be a number, got "${t}"`);return r},configFileSelector:e=>{const t=e[m];if(!t)return;const r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${m} mast be a number, got "${t}"`);return r},default:n.Gz},b=e=>{const{retryStrategy:t}=e,r=(0,h.t)(e.maxAttempts??n.Gz);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await(0,h.t)(e.retryMode)()===n.cm.ADAPTIVE?new n.Y(r):new n.ru(r))}},v={environmentVariableSelector:e=>e.AWS_RETRY_MODE,configFileSelector:e=>e.retry_mode,default:n.L0};var w=r(1248),S=r(2203);const I=e=>e?.body instanceof S.Readable||"undefined"!=typeof ReadableStream&&e?.body instanceof ReadableStream,E=e=>{const t={error:e,errorType:_(e)},r=x(e.$response);return r&&(t.retryAfterHint=r),t},_=e=>(0,i.Qb)(e)?"THROTTLING":(0,i.bV)(e)?"TRANSIENT":(0,i.GQ)(e)?"SERVER_ERROR":"CLIENT_ERROR",k={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},A=e=>({applyToStack:t=>{t.add((e=>(t,r)=>async i=>{let o=await e.retryStrategy();const a=await e.maxAttempts();if(!(e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess)(o))return o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,i);{let e=await o.acquireInitialRetryToken(r.partition_id),u=new Error,l=0,d=0;const{request:p}=i,h=s.Kd.isInstance(p);for(h&&(p.headers[n.l5]=f());;)try{h&&(p.headers[n.ok]=`attempt=${l+1}; max=${a}`);const{response:r,output:s}=await t(i);return o.recordSuccess(e),s.$metadata.attempts=l+1,s.$metadata.totalRetryDelay=d,{response:r,output:s}}catch(t){const n=E(t);if(u=(c=t)instanceof Error?c:c instanceof Object?Object.assign(new Error,c):"string"==typeof c?new Error(c):new Error(`AWS SDK error wrapper for ${c}`),h&&I(p))throw(r.logger instanceof w.N4?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),u;try{e=await o.refreshRetryTokenForRetry(e,n)}catch(e){throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=l+1,u.$metadata.totalRetryDelay=d,u}l=e.getRetryCount();const s=e.getRetryDelay();d+=s,await new Promise((e=>setTimeout(e,s)))}}var c})(e),k)}}),x=e=>{if(!s.cS.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(1e3*n)}},1208:(e,t,r)=>{"use strict";r.d(t,{TM:()=>a,Ou:()=>o});const n=(e,t)=>r=>async n=>{const{response:s}=await r(n);try{return{response:s,output:await t(s,e)}}catch(e){if(Object.defineProperty(e,"$response",{value:s}),!("$metadata"in e)){const t="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";e.message+="\n  "+t,void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)}throw e}},s=(e,t)=>(r,n)=>async s=>{const i=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(s.input,{...e,endpoint:i});return r({...s,request:o})},i={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},o={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function a(e,t,r){return{applyToStack:a=>{a.add(n(e,r),i),a.add(s(e,t),o)}}}},9987:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(8112);function s(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch(t){return e}}var i=r(3054);const o=({environmentVariableSelector:e,configFileSelector:t,default:r},o={})=>{return(0,n.Bj)((0,n.cy)((a=e,async()=>{try{const e=a(process.env);if(void 0===e)throw new Error;return e}catch(e){throw new n.C1(e.message||`Not found in ENV: ${s(a.toString())}`,{logger:undefined})}}),((e,{preferredFile:t="config",...r}={})=>async()=>{const o=(0,i.Bz)(r),{configFile:a,credentialsFile:c}=await(0,i.p6)(r),u=c[o]||{},l=a[o]||{},d="config"===t?{...u,...l}:{...l,...u};try{const r=e(d,"config"===t?a:c);if(void 0===r)throw new Error;return r}catch(t){throw new n.C1(t.message||`Not found in config files w/ profile [${o}]: ${s(e.toString())}`,{logger:r.logger})}})(t,o),(e=>"function"==typeof e?async()=>await e():(0,n.VR)(e))(r)));var a}},3621:(e,t,r)=>{"use strict";r.d(t,{$c:()=>p,kv:()=>h});var n=r(5479),s=r(2531),i=r(8611);const o=require("https"),a=["ECONNRESET","EPIPE","ETIMEDOUT"],c=e=>{const t={};for(const r of Object.keys(e)){const n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},u=(e,t)=>setTimeout(e,t),l=e=>clearTimeout(e);var d=r(2203);class p{static create(e){return"function"==typeof e?.handle?e:new p(e)}static checkSocketUsage(e,t,r=console){const{sockets:n,requests:s,maxSockets:i}=e;if("number"!=typeof i||i===1/0)return t;if(Date.now()-15e3<t)return t;if(n&&s)for(const e in n){const t=n[e]?.length??0,o=s[e]?.length??0;if(t>=i&&o>=2*i)return r?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${o} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise(((t,r)=>{"function"==typeof e?e().then((e=>{t(this.resolveDefaultConfig(e))})).catch(r):t(this.resolveDefaultConfig(e))}))}resolveDefaultConfig(e){const{requestTimeout:t,connectionTimeout:r,socketTimeout:n,httpAgent:s,httpsAgent:a}=e||{},c=!0;return{connectionTimeout:r,requestTimeout:t??n,httpAgent:s instanceof i.Agent||"function"==typeof s?.destroy?s:new i.Agent({keepAlive:c,maxSockets:50,...s}),httpsAgent:a instanceof o.Agent||"function"==typeof a?.destroy?a:new o.Agent({keepAlive:c,maxSockets:50,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){return this.config||(this.config=await this.configProvider),new Promise(((r,f)=>{let h;const g=[],m=async e=>{await h,g.forEach(l),f(e)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",void m(e)}const y="https:"===e.protocol,b=y?this.config.httpsAgent:this.config.httpAgent;g.push(u((()=>{this.socketWarningTimestamp=p.checkSocketUsage(b,this.socketWarningTimestamp,this.config.logger)}),this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));const v=function(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=(0,s.o)(r),Array.isArray(n))for(let e=0,i=n.length;e<i;e++)t.push(`${r}=${(0,s.o)(n[e])}`);else{let e=r;(n||"string"==typeof n)&&(e+=`=${(0,s.o)(n)}`),t.push(e)}}return t.join("&")}(e.query||{});let w;null==e.username&&null==e.password||(w=`${e.username??""}:${e.password??""}`);let S=e.path;v&&(S+=`?${v}`),e.fragment&&(S+=`#${e.fragment}`);let I=e.hostname??"";I="["===I[0]&&I.endsWith("]")?e.hostname.slice(1,-1):e.hostname;const E={headers:e.headers,host:I,method:e.method,path:S,port:e.port,agent:b,auth:w},_=(y?o.request:i.request)(E,(e=>{(async e=>{await h,g.forEach(l),r(e)})({response:new n.cS({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:c(e.headers),body:e})})}));if(_.on("error",(e=>{a.includes(e.code)?m(Object.assign(e,{name:"TimeoutError"})):m(e)})),t){const e=()=>{_.destroy();const e=new Error("Request aborted");e.name="AbortError",m(e)};if("function"==typeof t.addEventListener){const r=t;r.addEventListener("abort",e,{once:!0}),_.once("close",(()=>r.removeEventListener("abort",e)))}else t.onabort=e}g.push(((e,t,r=0)=>{if(!r)return-1;const n=n=>{const s=u((()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))}),r-n),i=e=>{e?.connecting?e.on("connect",(()=>{l(s)})):l(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):u(n.bind(null,1e3),1e3)})(_,m,this.config.connectionTimeout)),g.push(((e,t,r=0)=>{const n=n=>{const s=r-n,i=()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))};e.socket?e.socket.setTimeout(s,i):e.setTimeout(s,i)};return 0<r&&r<6e3?(n(0),0):u(n.bind(null,0===r?0:3e3),3e3)})(_,m,this.config.requestTimeout));const k=E.agent;"object"==typeof k&&"keepAlive"in k&&g.push(((e,{keepAlive:t,keepAliveMsecs:r},n=3e3)=>{if(!0!==t)return-1;const s=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",(e=>{e.setKeepAlive(t,r||0)}))};return 0===n?(s(),0):u(s,n)})(_,{keepAlive:k.keepAlive,keepAliveMsecs:k.keepAliveMsecs})),h=async function(e,t,r=6e3){const n=t.headers??{},s=n.Expect||n.expect;let i=-1,o=!0;"100-continue"===s&&(o=await Promise.race([new Promise((e=>{i=Number(u((()=>e(!0)),Math.max(6e3,r)))})),new Promise((t=>{e.on("continue",(()=>{l(i),t(!0)})),e.on("response",(()=>{l(i),t(!1)})),e.on("error",(()=>{l(i),t(!1)}))}))])),o&&function(e,t){if(t instanceof d.Readable)t.pipe(e);else{if(t){if(Buffer.isBuffer(t)||"string"==typeof t)return void e.end(t);const r=t;return"object"==typeof r&&r.buffer&&"number"==typeof r.byteOffset&&"number"==typeof r.byteLength?void e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength)):void e.end(Buffer.from(t))}e.end()}}(e,t.body)}(_,e,this.config.requestTimeout).catch((e=>(g.forEach(l),f(e))))}))}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((r=>({...r,[e]:t})))}httpHandlerConfigs(){return this.config??{}}}require("http2"),Symbol.iterator;class f extends d.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,t,r){this.bufferedBytes.push(e),r()}}const h=e=>g(e)?async function(e){const t=[],r=e.getReader();let n=!1,s=0;for(;!n;){const{done:e,value:i}=await r.read();i&&(t.push(i),s+=i.length),n=e}const i=new Uint8Array(s);let o=0;for(const e of t)i.set(e,o),o+=e.length;return i}(e):new Promise(((t,r)=>{const n=new f;e.pipe(n),e.on("error",(e=>{n.end(),r(e)})),n.on("error",r),n.on("finish",(function(){const e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))})),g=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream},8112:(e,t,r)=>{"use strict";r.d(t,{C1:()=>s,mZ:()=>n,Jh:()=>i,cy:()=>o,VR:()=>a,Bj:()=>c});class n extends Error{constructor(e,t=!0){let r,s=!0;"boolean"==typeof t?(r=void 0,s=t):null!=t&&"object"==typeof t&&(r=t.logger,s=t.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,n.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class s extends n{constructor(e,t=!0){super(e,t),this.name="CredentialsProviderError",Object.setPrototypeOf(this,s.prototype)}}class i extends n{constructor(e,t=!0){super(e,t),this.name="TokenProviderError",Object.setPrototypeOf(this,i.prototype)}}const o=(...e)=>async()=>{if(0===e.length)throw new n("No providers in chain");let t;for(const r of e)try{return await r()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t},a=e=>()=>Promise.resolve(e),c=(e,t,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return void 0===t?async e=>(i&&!e?.forceRefresh||(n=await a()),n):async e=>(i&&!e?.forceRefresh||(n=await a()),o?n:r&&!r(n)?(o=!0,n):t(n)?(await a(),n):n)}},5479:(e,t,r)=>{"use strict";r.d(t,{Kd:()=>i,cS:()=>o,eS:()=>n,jt:()=>s});const n=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,r){t.updateHttpClientConfig(e,r)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}},s=e=>({httpHandler:e.httpHandler()});r(7523);class i{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new i({...e,headers:{...e.headers}});var r;return t.query&&(t.query=(r=t.query,Object.keys(r).reduce(((e,t)=>{const n=r[t];return{...e,[t]:Array.isArray(n)?[...n]:n}}),{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return i.clone(this)}}class o{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}},4542:(e,t,r)=>{"use strict";r.d(t,{h5:()=>u,S0:()=>c,GQ:()=>p,Qb:()=>l,bV:()=>d});const n=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],s=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],i=["TimeoutError","RequestTimeout","RequestTimeoutException"],o=[500,502,503,504],a=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],c=e=>void 0!==e.$retryable,u=e=>n.includes(e.name),l=e=>429===e.$metadata?.httpStatusCode||s.includes(e.name)||1==e.$retryable?.throttling,d=(e,t=0)=>(e=>e.$metadata?.clockSkewCorrected)(e)||i.includes(e.name)||a.includes(e?.code||"")||o.includes(e.$metadata?.httpStatusCode||0)||void 0!==e.cause&&t<=10&&d(e.cause,t+1),p=e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!d(e)}return!1}},3054:(e,t,r)=>{"use strict";r.d(t,{QD:()=>k,Ch:()=>a,Bz:()=>c,C9:()=>l,vf:()=>f,p6:()=>A,qw:()=>O,YU:()=>C});var n=r(857),s=r(6928);const i={},o=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:o=`C:${s.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${o}${r}`;const a=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return i[a]||(i[a]=(0,n.homedir)()),i[a]},a="AWS_PROFILE",c=e=>e.profile||process.env[a]||"default";var u=r(6982);const l=e=>{const t=(0,u.createHash)("sha1").update(e).digest("hex");return(0,s.join)(o(),".aws","sso","cache",`${t}.json`)};var d=r(9896);const{readFile:p}=d.promises,f=async e=>{const t=l(e),r=await p(t,"utf8");return JSON.parse(r)};var h=r(7523);const g=e=>Object.entries(e).filter((([e])=>{const t=e.indexOf(k);return-1!==t&&Object.values(h.Ip).includes(e.substring(0,t))})).reduce(((e,[t,r])=>{const n=t.indexOf(k);return e[t.substring(0,n)===h.Ip.PROFILE?t.substring(n+1):t]=r,e}),{...e.default&&{default:e.default}}),m=()=>process.env.AWS_CONFIG_FILE||(0,s.join)(o(),".aws","config"),y=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,s.join)(o(),".aws","credentials"),b=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,v=["__proto__","profile __proto__"],w=e=>{const t={};let r,n;for(const s of e.split(/\r?\n/)){const e=s.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){r=void 0,n=void 0;const t=e.substring(1,e.length-1),s=b.exec(t);if(s){const[,e,,t]=s;Object.values(h.Ip).includes(e)&&(r=[e,t].join(k))}else r=t;if(v.includes(t))throw new Error(`Found invalid profile name "${t}"`)}else if(r){const i=e.indexOf("=");if(![0,-1].includes(i)){const[o,a]=[e.substring(0,i).trim(),e.substring(i+1).trim()];if(""===a)n=o;else{n&&s.trimStart()===s&&(n=void 0),t[r]=t[r]||{};const e=n?[n,o].join(k):o;t[r][e]=a}}}}return t},{readFile:S}=d.promises,I={},E=(e,t)=>(I[e]&&!t?.ignoreCache||(I[e]=S(e,"utf8")),I[e]),_=()=>({}),k=".",A=async(e={})=>{const{filepath:t=y(),configFilepath:r=m()}=e,n=o();let i=t;t.startsWith("~/")&&(i=(0,s.join)(n,t.slice(2)));let a=r;r.startsWith("~/")&&(a=(0,s.join)(n,r.slice(2)));const c=await Promise.all([E(a,{ignoreCache:e.ignoreCache}).then(w).then(g).catch(_),E(i,{ignoreCache:e.ignoreCache}).then(w).catch(_)]);return{configFile:c[0],credentialsFile:c[1]}},x=e=>Object.entries(e).filter((([e])=>e.startsWith(h.Ip.SSO_SESSION+k))).reduce(((e,[t,r])=>({...e,[t.substring(t.indexOf(k)+1)]:r})),{}),P=()=>({}),O=async(e={})=>E(e.configFilepath??m()).then(w).then(x).catch(P),C=async e=>{const t=await A(e);return((...e)=>{const t={};for(const r of e)for(const[e,n]of Object.entries(r))void 0!==t[e]?Object.assign(t[e],n):t[e]=n;return t})(t.configFile,t.credentialsFile)}},1248:(e,t,r)=>{"use strict";r.d(t,{Kj:()=>c,uB:()=>d,N4:()=>oe,$H:()=>f,TJ:()=>B,Ss:()=>fe,Px:()=>u.Px,J1:()=>h,Mw:()=>H,I9:()=>J,ET:()=>b,Y0:()=>S,Xk:()=>I,lK:()=>E,$6:()=>u.$6,Yd:()=>re,xA:()=>ee,rm:()=>ne,eU:()=>se,lT:()=>z,Tj:()=>ae,yG:()=>g,EI:()=>N,t_:()=>j,uv:()=>te,xW:()=>A,s:()=>ce,jr:()=>W});const n=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const e of t)r.push(e);return r},s=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,i=()=>{let e=[],t=[],r=!1;const c=new Set,u=r=>(e.forEach((e=>{r.add(e.middleware,{...e})})),t.forEach((e=>{r.addRelativeTo(e.middleware,{...e})})),r.identifyOnResolve?.(p.identifyOnResolve()),r),l=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...l(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...l(e))})),t},d=(r=!1)=>{const i=[],c=[],u={};var d;return e.forEach((e=>{const t={...e,before:[],after:[]};for(const e of n(t.name,t.aliases))u[e]=t;i.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};for(const e of n(t.name,t.aliases))u[e]=t;c.push(t)})),c.forEach((e=>{if(e.toMiddleware){const t=u[e.toMiddleware];if(void 0===t){if(r)return;throw new Error(`${e.toMiddleware} is not found when adding ${s(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(d=i,d.sort(((e,t)=>o[t.step]-o[e.step]||a[t.priority||"normal"]-a[e.priority||"normal"]))).map(l).reduce(((e,t)=>(e.push(...t),e)),[])},p={add:(t,r={})=>{const{name:i,override:o,aliases:a}=r,u={step:"initialize",priority:"normal",middleware:t,...r},l=n(i,a);if(l.length>0){if(l.some((e=>c.has(e)))){if(!o)throw new Error(`Duplicate middleware name '${s(i,a)}'`);for(const t of l){const r=e.findIndex((e=>e.name===t||e.aliases?.some((e=>e===t))));if(-1===r)continue;const n=e[r];if(n.step!==u.step||u.priority!==n.priority)throw new Error(`"${s(n.name,n.aliases)}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by "${s(i,a)}" middleware with ${u.priority} priority in ${u.step} step.`);e.splice(r,1)}}for(const e of l)c.add(e)}e.push(u)},addRelativeTo:(e,r)=>{const{name:i,override:o,aliases:a}=r,u={middleware:e,...r},l=n(i,a);if(l.length>0){if(l.some((e=>c.has(e)))){if(!o)throw new Error(`Duplicate middleware name '${s(i,a)}'`);for(const e of l){const r=t.findIndex((t=>t.name===e||t.aliases?.some((t=>t===e))));if(-1===r)continue;const n=t[r];if(n.toMiddleware!==u.toMiddleware||n.relation!==u.relation)throw new Error(`"${s(n.name,n.aliases)}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by "${s(i,a)}" middleware ${u.relation} "${u.toMiddleware}" middleware.`);t.splice(r,1)}}for(const e of l)c.add(e)}t.push(u)},clone:()=>u(i()),use:e=>{e.applyToStack(p)},remove:r=>"string"==typeof r?(r=>{let s=!1;const i=e=>{const t=n(e.name,e.aliases);if(t.includes(r)){s=!0;for(const e of t)c.delete(e);return!1}return!0};return e=e.filter(i),t=t.filter(i),s})(r):(r=>{let s=!1;const i=e=>{if(e.middleware===r){s=!0;for(const t of n(e.name,e.aliases))c.delete(t);return!1}return!0};return e=e.filter(i),t=t.filter(i),s})(r),removeByTag:r=>{let s=!1;const i=e=>{const{tags:t,name:i,aliases:o}=e;if(t&&t.includes(r)){const e=n(i,o);for(const t of e)c.delete(t);return s=!0,!1}return!0};return e=e.filter(i),t=t.filter(i),s},concat:e=>{const t=u(i());return t.use(e),t.identifyOnResolve(r||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:u,identify:()=>d(!0).map((e=>{const t=e.step??e.relation+" "+e.toMiddleware;return s(e.name,e.aliases)+" - "+t})),identifyOnResolve:e=>("boolean"==typeof e&&(r=e),r),resolve:(e,t)=>{for(const r of d().map((e=>e.middleware)).reverse())e=r(e,t);return r&&console.log(p.identify()),e}};return p},o={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},a={high:3,normal:2,low:1};class c{constructor(e){this.config=e,this.middlewareStack=i()}send(e,t,r){const n="function"!=typeof t?t:void 0,s="function"==typeof t?t:r;let i;if(void 0===n&&!0===this.config.cacheMiddleware){this.handlers||(this.handlers=new WeakMap);const t=this.handlers;t.has(e.constructor)?i=t.get(e.constructor):(i=e.resolveMiddleware(this.middlewareStack,this.config,n),t.set(e.constructor,i))}else delete this.handlers,i=e.resolveMiddleware(this.middlewareStack,this.config,n);if(!s)return i(e).then((e=>e.output));i(e).then((e=>s(null,e.output)),(e=>s(e))).catch((()=>{}))}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var u=r(7115),l=r(7523);class d{constructor(){this.middlewareStack=i()}static classBuilder(){return new p}resolveMiddlewareWithContext(e,t,r,{middlewareFn:n,clientName:s,commandName:i,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,smithyContext:c,additionalContext:u,CommandCtor:d}){for(const s of n.bind(this)(d,e,t,r))this.middlewareStack.use(s);const p=e.concat(this.middlewareStack),{logger:f}=t,h={logger:f,clientName:s,commandName:i,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,[l.Vf]:{commandInstance:this,...c},...u},{requestHandler:g}=t;return p.resolve((e=>g.handle(e.request,r||{})),h)}}class p{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let t;return t=class extends d{static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=t??{},e._init(this)}resolveMiddleware(r,n,s){return this.resolveMiddlewareWithContext(r,n,s,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const f="***SensitiveInformation***",h=(e,t)=>{for(const r of Object.keys(e)){const n=e[r],s=async function(e,t,r){const s=new n(e);if("function"==typeof t)this.send(s,t);else{if("function"!=typeof r)return this.send(s,t);if("object"!=typeof t)throw new Error("Expected http options but got "+typeof t);this.send(s,t||{},r)}},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[i]=s}},g=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},m=Math.ceil(2**127*(2-2**-23)),y=e=>{const t=(e=>{if(null!=e){if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&O.warn(P(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}})(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>m)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},b=e=>v(e,32),v=(e,t)=>{const r=(e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}})(e);if(void 0!==r&&w(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},w=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},S=(e,t)=>{if(null==e){if(t)throw new TypeError(`Expected a non-null value for ${t}`);throw new TypeError("Expected a non-null value")}return e},I=e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},E=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return O.warn(P(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},_=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,k=e=>{const t=e.match(_);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},A=e=>b("string"==typeof e?k(e):e),x=e=>(e=>v(e,16))("string"==typeof e?k(e):e),P=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),O={warn:console.warn},C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),N=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=T.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,c,u]=t,l=x(L(n)),d=V(s,"month",1,12),p=V(i,"day",1,31);return $(l,d,p,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},R=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),j=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=R.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,c,u,l]=t,d=x(L(n)),p=V(s,"month",1,12),f=V(i,"day",1,31),h=$(d,p,f,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return"Z"!=l.toUpperCase()&&h.setTime(h.getTime()-q(l)),h},$=(e,t,r,n)=>{const s=t-1;return M(e,s,r),new Date(Date.UTC(e,s,r,V(n.hours,"hour",0,23),V(n.minutes,"minute",0,59),V(n.seconds,"seconds",0,60),U(n.fractionalMilliseconds)))},D=[31,28,31,30,31,30,31,31,30,31,30,31],M=(e,t,r)=>{let n=D[t];if(1===t&&F(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${C[t]} in ${e}: ${r}`)},F=e=>e%4==0&&(e%100!=0||e%400==0),V=(e,t,r,n)=>{const s=(e=>(e=>v(e,8))("string"==typeof e?k(e):e))(L(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},U=e=>null==e?0:1e3*(e=>y("string"==typeof e?k(e):e))("0."+e),q=e=>{const t=e[0];let r=1;if("+"==t)r=1;else{if("-"!=t)throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);r=-1}return r*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*60*1e3},L=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class B extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const t=e;return B.prototype.isPrototypeOf(t)||Boolean(t.$fault)&&Boolean(t.$metadata)&&("client"===t.$fault||"server"===t.$fault)}static[Symbol.hasInstance](e){if(!e)return!1;const t=e;return this===B?B.isInstance(e):!!B.isInstance(e)&&(t.name&&this.name?this.prototype.isPrototypeOf(e)||t.name===this.name:this.prototype.isPrototypeOf(e))}}const H=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,r])=>{null!=e[t]&&""!==e[t]||(e[t]=r)}));const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},W=e=>({output:t,parsedBody:r,errorCode:n})=>{(({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const s=K(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:t?.code||t?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw H(o,t)})({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},K=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),z=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let G=!1;const J=e=>{e&&!G&&parseInt(e.substring(1,e.indexOf(".")))<16&&(G=!0)},Q=e=>{const t=[];for(const r in l.dB){const n=l.dB[r];void 0!==e[n]&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},Y=e=>{const t={};return e.checksumAlgorithms().forEach((e=>{t[e.algorithmId()]=e.checksumConstructor()})),t},Z=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},X=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},ee=e=>({...Q(e),...Z(e)}),te=e=>({...Y(e),...X(e)}),re=e=>Array.isArray(e)?e:[e],ne=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&void 0!==e[r][t]?e[r]=e[r][t]:"object"==typeof e[r]&&null!==e[r]&&(e[r]=ne(e[r]));return e},se=e=>null!=e,ie=function(e){return Object.assign(new String(e),{deserializeJSON:()=>JSON.parse(String(e)),toString:()=>String(e),toJSON:()=>String(e)})};ie.from=e=>e&&"object"==typeof e&&(e instanceof ie||"deserializeJSON"in e)?e:"string"==typeof e||Object.getPrototypeOf(e)===String.prototype?ie(String(e)):ie(JSON.stringify(e)),ie.fromObject=ie.from;class oe{trace(){}debug(){}info(){}warn(){}error(){}}function ae(e,t,r){let n,s,i;if(void 0===t&&void 0===r)n={},i=e;else{if(n=e,"function"==typeof t)return s=t,i=r,ue(n,s,i);i=t}for(const e of Object.keys(i))Array.isArray(i[e])?le(n,null,i,e):n[e]=i[e];return n}const ce=(e,t)=>{const r={};for(const n in t)le(r,e,t,n);return r},ue=(e,t,r)=>ae(e,Object.entries(r).reduce(((e,[r,n])=>(Array.isArray(n)?e[r]=n:e[r]="function"==typeof n?[t,n()]:[t,n],e)),{})),le=(e,t,r,n)=>{if(null!==t){let s=r[n];"function"==typeof s&&(s=[,s]);const[i=de,o=pe,a=n]=s;return void(("function"==typeof i&&i(t[a])||"function"!=typeof i&&i)&&(e[n]=o(t[a])))}let[s,i]=r[n];if("function"==typeof i){let t;const r=void 0===s&&null!=(t=i()),o="function"==typeof s&&!!s(void 0)||"function"!=typeof s&&!!s;r?e[n]=t:o&&(e[n]=i())}else{const t=void 0===s&&null!=i,r="function"==typeof s&&!!s(i)||"function"!=typeof s&&!!s;(t||r)&&(e[n]=i)}},de=e=>null!=e,pe=e=>e,fe=e=>{if(null==e)return{};if(Array.isArray(e))return e.filter((e=>null!=e)).map(fe);if("object"==typeof e){const t={};for(const r of Object.keys(e))null!=e[r]&&(t[r]=fe(e[r]));return t}return e}},7523:(e,t,r)=>{"use strict";var n,s,i,o,a;r.d(t,{dB:()=>o,Ue:()=>i,Ip:()=>u,Vf:()=>c}),function(e){e.HEADER="header",e.QUERY="query"}(n||(n={})),function(e){e.HEADER="header",e.QUERY="query"}(s||(s={})),function(e){e.HTTP="http",e.HTTPS="https"}(i||(i={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(o||(o={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(a||(a={}));const c="__smithy_context";var u,l;!function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"}(u||(u={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(l||(l={}))},2641:(e,t,r)=>{"use strict";r.d(t,{D:()=>n});const n=e=>{if("string"==typeof e)return n(new URL(e));const{hostname:t,pathname:r,port:s,protocol:i,search:o}=e;let a;return o&&(a=function(e){const t={};if(e=e.replace(/^\?/,""))for(const r of e.split("&")){let[e,n=null]=r.split("=");e=decodeURIComponent(e),n&&(n=decodeURIComponent(n)),e in t?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n}return t}(o)),{hostname:t,port:s?parseInt(s):void 0,protocol:i,path:r,query:a}}},4572:(e,t,r)=>{"use strict";r.d(t,{E:()=>i,n:()=>a});var n=r(9290);const s=/^[A-Za-z0-9+/]*={0,2}$/,i=e=>{if(3*e.length%4!=0)throw new TypeError("Incorrect padding on base64 string.");if(!s.exec(e))throw new TypeError("Invalid base64 string.");const t=(0,n.s)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var o=r(3197);const a=e=>{let t;if(t="string"==typeof e?(0,o.ar)(e):e,"object"!=typeof t||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,n.Q)(t.buffer,t.byteOffset,t.byteLength).toString("base64")}},7809:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var n=r(9896);const s=e=>{if(!e)return 0;if("string"==typeof e)return Buffer.byteLength(e);if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;if("number"==typeof e.start&&"number"==typeof e.end)return e.end+1-e.start;if("string"==typeof e.path||Buffer.isBuffer(e.path))return(0,n.lstatSync)(e.path).size;if("number"==typeof e.fd)return(0,n.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)}},9290:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i,s:()=>o});var n=r(3695),s=r(181);const i=(e,t=0,r=e.byteLength-t)=>{if(!(0,n.m)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return s.Buffer.from(e,t,r)},o=(e,t)=>{if("string"!=typeof e)throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?s.Buffer.from(e,t):s.Buffer.from(e)}},4321:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var n=r(1487),s=r(9987),i=r(8112);const o="AWS_REGION",a="AWS_DEFAULT_REGION",c=["in-region","cross-region","mobile","standard","legacy"],u={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:"legacy"},l=({region:e=(0,s.Z)(n.GG),defaultsMode:t=(0,s.Z)(u)}={})=>(0,i.Bj)((async()=>{const r="function"==typeof t?await t():t;switch(r?.toLowerCase()){case"auto":return d(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${c.join(", ")}, got ${r}`)}})),d=async e=>{if(e){const t="function"==typeof e?await e():e,r=await p();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},p=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[o]||process.env[a]))return process.env[o]??process.env[a];if(!process.env.AWS_EC2_METADATA_DISABLED)try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await r.e(897).then(r.bind(r,7897)),n=await e();return(await t({...n,path:"/latest/meta-data/placement/region"})).toString()}catch(e){}}},8545:(e,t,r)=>{"use strict";r.d(t,{kS:()=>n,mw:()=>c,oX:()=>i,X8:()=>a,sO:()=>O});class n{constructor({size:e,params:t}){this.data=new Map,this.parameters=[],this.capacity=e??50,t&&(this.parameters=t)}get(e,t){const r=this.hash(e);if(!1===r)return t();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const e=this.data.keys();let t=0;for(;;){const{value:r,done:n}=e.next();if(this.data.delete(r),n||++t>10)break}}this.data.set(r,t())}return this.data.get(r)}size(){return this.data.size}hash(e){let t="";const{parameters:r}=this;if(0===r.length)return!1;for(const n of r){const r=String(e[n]??"");if(r.includes("|;"))return!1;t+=r+"|;"}return t}}const s=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),i=e=>s.test(e)||e.startsWith("[")&&e.endsWith("]"),o=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),a=(e,t=!1)=>{if(!t)return o.test(e);const r=e.split(".");for(const e of r)if(!a(e))return!1;return!0},c={},u="endpoints";function l(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${l(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(l).join(", ")})`:JSON.stringify(e,null,2)}class d extends Error{constructor(e){super(e),this.name="EndpointError"}}const p=(e,t)=>(e=>{const t=e.split("."),r=[];for(const n of t){const t=n.indexOf("[");if(-1!==t){if(n.indexOf("]")!==n.length-1)throw new d(`Path: '${e}' does not end with ']'`);const s=n.slice(t+1,-1);if(Number.isNaN(parseInt(s)))throw new d(`Invalid array index: '${s}' in path: '${e}'`);0!==t&&r.push(n.slice(0,t)),r.push(s)}else r.push(n)}return r})(t).reduce(((r,n)=>{if("object"!=typeof r)throw new d(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]}),e);var f=r(7523);const h={[f.Ue.HTTP]:80,[f.Ue.HTTPS]:443},g={booleanEquals:(e,t)=>e===t,getAttr:p,isSet:e=>null!=e,isValidHostLabel:a,not:e=>!e,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:r,protocol:n="",path:s="",query:i={}}=e,o=new URL(`${n}//${t}${r?`:${r}`:""}${s}`);return o.search=Object.entries(i).map((([e,t])=>`${e}=${t}`)).join("&"),o}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const r=t.href,{host:n,hostname:s,pathname:o,protocol:a,search:c}=t;if(c)return null;const u=a.slice(0,-1);if(!Object.values(f.Ue).includes(u))return null;const l=i(s);return{scheme:u,authority:`${n}${r.includes(`${n}:${h[u]}`)||"string"==typeof e&&e.includes(`${n}:${h[u]}`)?`:${h[u]}`:""}`,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},stringEquals:(e,t)=>e===t,substring:(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},m=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const t=e.indexOf("{",s);if(-1===t){r.push(e.slice(s));break}r.push(e.slice(s,t));const i=e.indexOf("}",t);if(-1===i){r.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[i+1]&&(r.push(e.slice(t+1,i)),s=i+2);const o=e.substring(t+1,i);if(o.includes("#")){const[e,t]=o.split("#");r.push(p(n[e],t))}else r.push(n[o]);s=i+1}return r.join("")},y=(e,t,r)=>{if("string"==typeof e)return m(e,r);if(e.fn)return b(e,r);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,r);throw new d(`'${t}': ${String(e)} is not a string, function or reference.`)},b=({fn:e,argv:t},r)=>{const n=t.map((e=>["boolean","number"].includes(typeof e)?e:y(e,"arg",r))),s=e.split(".");return s[0]in c&&null!=s[1]?c[s[0]][s[1]](...n):g[e](...n)},v=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new d(`'${e}' is already defined in Reference Record.`);const n=b(t,r);return r.logger?.debug?.(`${u} evaluateCondition: ${l(t)} = ${l(n)}`),{result:""===n||!!n,...null!=e&&{toAssign:{name:e,value:n}}}},w=(e=[],t)=>{const r={};for(const n of e){const{result:e,toAssign:s}=v(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!e)return{result:e};s&&(r[s.name]=s.value,t.logger?.debug?.(`${u} assign: ${s.name} := ${l(s.value)}`))}return{result:!0,referenceRecord:r}},S=(e,t)=>Object.entries(e).reduce(((e,[r,n])=>({...e,[r]:n.map((e=>{const n=y(e,"Header value entry",t);if("string"!=typeof n)throw new d(`Header '${r}' value '${n}' is not a string`);return n}))})),{}),I=(e,t)=>{if(Array.isArray(e))return e.map((e=>I(e,t)));switch(typeof e){case"string":return m(e,t);case"object":if(null===e)throw new d(`Unexpected endpoint property: ${e}`);return E(e,t);case"boolean":return e;default:throw new d("Unexpected endpoint property type: "+typeof e)}},E=(e,t)=>Object.entries(e).reduce(((e,[r,n])=>({...e,[r]:I(n,t)})),{}),_=(e,t)=>{const r=y(e,"Endpoint URL",t);if("string"==typeof r)try{return new URL(r)}catch(e){throw console.error(`Failed to construct URL with ${r}`,e),e}throw new d("Endpoint URL must be a string, got "+typeof r)},k=(e,t)=>{const{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=w(r,t);if(!s)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:d}=n;return t.logger?.debug?.(`${u} Resolving endpoint from template: ${l(n)}`),{...null!=d&&{headers:S(d,o)},...null!=c&&{properties:E(c,o)},url:_(a,o)}},A=(e,t)=>{const{conditions:r,error:n}=e,{result:s,referenceRecord:i}=w(r,t);if(s)throw new d(y(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},x=(e,t)=>{const{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=w(r,t);if(s)return P(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},P=(e,t)=>{for(const r of e)if("endpoint"===r.type){const e=k(r,t);if(e)return e}else if("error"===r.type)A(r,t);else{if("tree"!==r.type)throw new d(`Unknown endpoint rule: ${r}`);{const e=x(r,t);if(e)return e}}throw new d("Rules evaluation failed")},O=(e,t)=>{const{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;t.logger?.debug?.(`${u} Initial EndpointParams: ${l(r)}`);const o=Object.entries(s).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(o.length>0)for(const[e,t]of o)r[e]=r[e]??t;const a=Object.entries(s).filter((([,e])=>e.required)).map((([e])=>e));for(const e of a)if(null==r[e])throw new d(`Missing required parameter: '${e}'`);const c=P(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${u} Resolved endpoint: ${l(c)}`),c}},8004:(e,t,r)=>{"use strict";r.d(t,{a:()=>i,n:()=>o});const n={},s={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),n[e]=t,s[t]=e}function i(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(!(n in s))throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`);t[r/2]=s[n]}return t}function o(e){let t="";for(let r=0;r<e.byteLength;r++)t+=n[e[r]];return t}},7135:(e,t,r)=>{"use strict";r.d(t,{u:()=>s,t:()=>i});var n=r(7523);const s=e=>e[n.Vf]||(e[n.Vf]={}),i=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t}},3323:(e,t,r)=>{"use strict";var n;r.d(t,{Y:()=>v,Gz:()=>s,bp:()=>c,L0:()=>i,QJ:()=>a,Df:()=>d,l5:()=>g,G8:()=>u,XP:()=>h,ok:()=>m,XS:()=>p,cm:()=>n,ru:()=>b,jh:()=>l,Rn:()=>f}),function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(n||(n={}));const s=3,i=n.STANDARD;var o=r(4542);class a{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>a.setTimeoutFn(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),(0,o.Qb)(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}a.setTimeoutFn=setTimeout;const c=100,u=2e4,l=500,d=500,p=5,f=10,h=1,g="amz-sdk-invocation-id",m="amz-sdk-request",y=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(u,e),getRetryCost:()=>r});class b{constructor(e){this.maxAttempts=e,this.mode=n.STANDARD,this.capacity=d,this.retryBackoffStrategy=(()=>{let e=c;return{computeNextBackoffDelay:t=>Math.floor(Math.min(u,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return y({retryDelay:c,retryCount:0})}async refreshRetryTokenForRetry(e,t){const r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){const r=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===r?l:c);const n=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,n):n,i=this.getCapacityCost(r);return this.capacity-=i,y({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:i})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(d,this.capacity+(e.getRetryCost()??h))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${s}`),s}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?f:p}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class v{constructor(e,t){this.maxAttemptsProvider=e,this.mode=n.ADAPTIVE;const{rateLimiter:r}=t??{};this.rateLimiter=r??new a,this.standardRetryStrategy=new b(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}},8101:(e,t,r)=>{"use strict";r.d(t,{Mu:()=>i,c9:()=>g});var n=r(4572),s=r(3197);class i extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return function(e,t){return"base64"===t?i.mutate((0,n.E)(e)):i.mutate((0,s.ar)(e))}(e,t);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,i.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?(0,n.n)(e):(0,s.Pq)(e)}(this,e)}}var o=r(2203),a=r(3621),c=r(9290);r(5479);var u=r(8004);const l=e=>"function"==typeof ReadableStream&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),d="The stream has already been transformed.",p=e=>{if(!f(e)&&!l(e))throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${e?.__proto__?.constructor?.name||e}`);let t=!1;const r=async()=>{if(t)throw new Error(d);return t=!0,await(async e=>"function"==typeof Blob&&e instanceof Blob||"Blob"===e.constructor?.name?void 0!==Blob.prototype.arrayBuffer?new Uint8Array(await e.arrayBuffer()):async function(e){const t=await function(e){return new Promise(((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(2!==n.readyState)return r(new Error("Reader aborted too early"));const e=n.result??"",s=e.indexOf(","),i=s>-1?s+1:e.length;t(e.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)}))}(e),r=(0,n.E)(t);return new Uint8Array(r)}(e):async function(e){const t=[],r=e.getReader();let n=!1,s=0;for(;!n;){const{done:e,value:i}=await r.read();i&&(t.push(i),s+=i.length),n=e}const i=new Uint8Array(s);let o=0;for(const e of t)i.set(e,o),o+=e.length;return i}(e))(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async e=>{const t=await r();if("base64"===e)return(0,n.n)(t);if("hex"===e)return(0,u.n)(t);if(void 0===e||"utf8"===e||"utf-8"===e)return(0,s.Pq)(t);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(t);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(d);if(t=!0,f(e))return(e=>{if("function"!=typeof e.stream)throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()})(e);if(l(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},f=e=>"function"==typeof Blob&&e instanceof Blob,h="The stream has already been transformed.",g=e=>{if(!(e instanceof o.Readable))try{return p(e)}catch(t){throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${e?.__proto__?.constructor?.name||e}`)}let t=!1;const r=async()=>{if(t)throw new Error(h);return t=!0,await(0,a.kv)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async e=>{const t=await r();return void 0===e||Buffer.isEncoding(e)?(0,c.Q)(t.buffer,t.byteOffset,t.byteLength).toString(e):new TextDecoder(e).decode(t)},transformToWebStream:()=>{if(t)throw new Error(h);if(null!==e.readableFlowing)throw new Error("The stream has been consumed by other callbacks.");if("function"!=typeof o.Readable.toWeb)throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,o.Readable.toWeb(e)}})};o.Writable,o.Duplex,"function"==typeof ReadableStream&&ReadableStream},2531:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});const n=e=>encodeURIComponent(e).replace(/[!'()*]/g,s),s=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`},3197:(e,t,r)=>{"use strict";r.d(t,{ar:()=>s,Fo:()=>i,Pq:()=>o});var n=r(9290);const s=e=>{const t=(0,n.s)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},i=e=>"string"==typeof e?s(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),o=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,n.Q)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6250:(e,t,r)=>{"use strict";const n=r(2017);n.code='require("ajv/dist/runtime/equal").default',t.A=n},6284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r={grad:.9,turn:360,rad:360/(2*Math.PI)},n=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},s=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},i=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t},o=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:i(e.r,0,255),g:i(e.g,0,255),b:i(e.b,0,255),a:i(e.a)}},c=function(e){return{r:s(e.r),g:s(e.g),b:s(e.b),a:s(e.a,3)}},u=/^#([0-9a-f]{3,8})$/i,l=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,r=e.g,n=e.b,s=e.a,i=Math.max(t,r,n),o=i-Math.min(t,r,n),a=o?i===t?(r-n)/o:i===r?2+(n-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:s}},p=function(e){var t=e.h,r=e.s,n=e.v,s=e.a;t=t/360*6,r/=100,n/=100;var i=Math.floor(t),o=n*(1-r),a=n*(1-(t-i)*r),c=n*(1-(1-t+i)*r),u=i%6;return{r:255*[n,a,o,o,c,n][u],g:255*[c,n,n,a,o,o][u],b:255*[o,o,c,n,n,a][u],a:s}},f=function(e){return{h:o(e.h),s:i(e.s,0,100),l:i(e.l,0,100),a:i(e.a)}},h=function(e){return{h:s(e.h),s:s(e.s),l:s(e.l),a:s(e.a,3)}},g=function(e){return p((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},m=function(e){return{h:(t=d(e)).h,s:(s=(200-(r=t.s))*(n=t.v)/100)>0&&s<200?r*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,r,n,s},y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S={string:[[function(e){var t=u.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?s(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?s(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v.exec(e)||w.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=y.exec(e)||b.exec(e);if(!t)return null;var n,s,i=f({h:(n=t[1],s=t[2],void 0===s&&(s="deg"),Number(n)*(r[s]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return g(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,s=e.b,i=e.a,o=void 0===i?1:i;return n(t)&&n(r)&&n(s)?a({r:Number(t),g:Number(r),b:Number(s),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,r=e.s,s=e.l,i=e.a,o=void 0===i?1:i;if(!n(t)||!n(r)||!n(s))return null;var a=f({h:Number(t),s:Number(r),l:Number(s),a:Number(o)});return g(a)},"hsl"],[function(e){var t=e.h,r=e.s,s=e.v,a=e.a,c=void 0===a?1:a;if(!n(t)||!n(r)||!n(s))return null;var u=function(e){return{h:o(e.h),s:i(e.s,0,100),v:i(e.v,0,100),a:i(e.a)}}({h:Number(t),s:Number(r),v:Number(s),a:Number(c)});return p(u)},"hsv"]]},I=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},E=function(e){return"string"==typeof e?I(e.trim(),S.string):"object"==typeof e&&null!==e?I(e,S.object):[null,void 0]},_=function(e,t){var r=m(e);return{h:r.h,s:i(r.s+100*t,0,100),l:r.l,a:r.a}},k=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},A=function(e,t){var r=m(e);return{h:r.h,s:r.s,l:i(r.l+100*t,0,100),a:r.a}},x=function(){function e(e){this.parsed=E(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return s(k(this.rgba),2)},e.prototype.isDark=function(){return k(this.rgba)<.5},e.prototype.isLight=function(){return k(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,r=e.g,n=e.b,o=(i=e.a)<1?l(s(255*i)):"","#"+l(t)+l(r)+l(n)+o;var e,t,r,n,i,o},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,r=e.g,n=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+n+", "+s+")":"rgb("+t+", "+r+", "+n+")";var e,t,r,n,s},e.prototype.toHsl=function(){return h(m(this.rgba))},e.prototype.toHslString=function(){return t=(e=h(m(this.rgba))).h,r=e.s,n=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+s+")":"hsl("+t+", "+r+"%, "+n+"%)";var e,t,r,n,s},e.prototype.toHsv=function(){return e=d(this.rgba),{h:s(e.h),s:s(e.s),v:s(e.v),a:s(e.a,3)};var e},e.prototype.invert=function(){return P({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),P(_(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),P(_(this.rgba,-e))},e.prototype.grayscale=function(){return P(_(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),P(A(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),P(A(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?P({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):s(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=m(this.rgba);return"number"==typeof e?P({h:e,s:t.s,l:t.l,a:t.a}):s(t.h)},e.prototype.isEqual=function(e){return this.toHex()===P(e).toHex()},e}(),P=function(e){return e instanceof x?e:new x(e)},O=[];t.Colord=x,t.colord=P,t.extend=function(e){e.forEach((function(e){O.indexOf(e)<0&&(e(x,S),O.push(e))}))},t.getFormat=function(e){return E(e)[1]},t.random=function(){return new x({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},6022:e=>{!function(){"use strict";var t=[,function(e,t){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===n(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var s=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=s,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var n,s,i=(s=2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,i=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==r.return||r.return()}finally{if(a)throw s}}return i}}(n,s)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(n,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return e[o]=a,e}),{})},t.isArguments=function(e){return null!=e&&s(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var i={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=i,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(i.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var r=Object.create(null),n=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},s=0;s<64;s++)r[n(s)]=s;var i=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],r=0;r<e;r++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},o={encode:function(e){if("string"==typeof e){var t=e;e=i(t.length);for(var r=0;r<t.length;r++){var s=t.charCodeAt(r);if(s>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[r]=s}}for(var o=[],a=null,c=null,u=null,l=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,u=(15&e[d])<<2;break;case 2:u|=e[d]>>6&3,l=63&e[d],o.push(n(a)),o.push(n(c)),o.push(n(u)),o.push(n(l)),a=null,c=null,u=null,l=null}return null!=a&&(o.push(n(a)),o.push(n(c)),null==u?o.push("="):o.push(n(u)),null==l&&o.push("=")),o.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var n,s=i(t),o=null,a=null,c=null,u=0,l=0;l<e.length;l++){var d="="===(n=e.charAt(l))?-1:r[n];switch(l%4){case 0:if(d<0)throw new Error("invalid base64 string");o=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");o|=d>>4,s[u++]=o,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,s[u++]=a,c=(3&d)<<6);break;case 3:d>=0&&(s[u++]=c|d)}}return s},newBinary:i};t.Base64=o},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function e(t,s,i,o,a){var c=s[t];switch(r(c)){case"string":return n(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var u,l=o+i,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,f=0;f<p;f+=1)d[f]=e(f,c,i,l,a)||"null";return u=0===d.length?"[]":l?"[\n"+l+d.join(",\n"+l)+"\n"+o+"]":"["+d.join(",")+"]"}var h=Object.keys(c);return a&&(h=h.sort()),h.forEach((function(t){(u=e(t,c,i,l,a))&&d.push(n(t)+(l?": ":":")+u)})),u=0===d.length?"{}":l?"{\n"+l+d.join(",\n"+l)+"\n"+o+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var r=Object.assign({indent:"",canonical:!1},t);if(!0===r.indent)r.indent="  ";else if("number"==typeof r.indent){for(var n="",i=0;i<r.indent;i++)n+=" ";r.indent=n}return s("",{"":e},r.indent,"",r.canonical)},e.exports=t.default}],r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}var s={};!function(){var e=s,t=n(2).Base64,r=n(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var i=n(1),o={};e.EJSON=o;var a=new Map;o.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$date")&&1===(0,i.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$regexp")&&(0,i.hasOwn)(e,"$flags")&&2===(0,i.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$InfNaN")&&1===(0,i.lengthOf)(e)},matchObject:i.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$binary")&&1===(0,i.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,i.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$escape")&&1===(0,i.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var r=(0,i.lengthOf)(e);1!==r&&2!==r||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,i.keysOf)(e).forEach((function(r){t[r]=o.toJSONValue(e[r])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,i.keysOf)(e.$escape).forEach((function(r){t[r]=o.fromJSONValue(e.$escape[r])})),t}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$type")&&(0,i.hasOwn)(e,"$value")&&2===(0,i.lengthOf)(e)},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(e){var t=r._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var n=a.get(t);return r._noYieldsAllowed((function(){return n(e.$value)}))}}];o._isCustomType=function(e){return e&&(0,i.isFunction)(e.toJSONValue)&&(0,i.isFunction)(e.typeName)&&a.has(e.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,i.convertMapToObject)(a)},o._getConverters=function(){return c};var u=function(e){for(var t=0;t<c.length;t++){var r=c[t];if(r.matchObject(e))return r.toJSONValue(e)}},l=function e(t){if(null===t)return null;var r=u(t);return void 0!==r?r:(0,i.isObject)(t)?((0,i.keysOf)(t).forEach((function(r){var n=t[r];if((0,i.isObject)(n)||void 0===n||(0,i.isInfOrNaN)(n)){var s=u(n);s?t[r]=s:e(n)}})),t):t};o._adjustTypesToJSONValue=l,o.toJSONValue=function(e){var t=u(e);if(void 0!==t)return t;var r=e;return(0,i.isObject)(e)&&(r=o.clone(e),l(r)),r};var d=function(e){if((0,i.isObject)(e)&&null!==e){var t=(0,i.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var r=0;r<c.length;r++){var n=c[r];if(n.matchJSONValue(e))return n.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var r=d(t);return r!==t?r:(0,i.isObject)(t)?((0,i.keysOf)(t).forEach((function(r){var n=t[r];if((0,i.isObject)(n)){var s=d(n);if(n!==s)return void(t[r]=s);e(n)}})),t):t};o._adjustTypesFromJSONValue=p,o.fromJSONValue=function(e){var t=d(e);return t===e&&(0,i.isObject)(e)&&(t=o.clone(e),p(t)),t},o.stringify=(0,i.handleError)((function(e,t){var r=o.toJSONValue(e);return t&&(t.canonical||t.indent)?n(4)(r,t):JSON.stringify(r)})),o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,t,r){var n,s=!(!r||!r.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,i.isObject)(e)||!(0,i.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(o.isBinary(e)&&o.isBinary(t)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if((0,i.isFunction)(e.equals))return e.equals(t,r);if((0,i.isFunction)(t.equals))return t.equals(e,r);var a,c=Array.isArray(e),u=Array.isArray(t);if(c!==u)return!1;if(c&&u){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!o.equals(e[n],t[n],r))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(t)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(t))}var l=(0,i.keysOf)(e),d=(0,i.keysOf)(t);return s?(n=0,a=l.every((function(s){return!(n>=d.length||s!==d[n]||!o.equals(e[s],t[d[n]],r)||(n++,0))}))):(n=0,a=l.every((function(s){return!!(0,i.hasOwn)(t,s)&&!!o.equals(e[s],t[s],r)&&(n++,!0)}))),a&&n===d.length},o.clone=function(e){var t;if(!(0,i.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){t=o.newBinary(e.length);for(var r=0;r<e.length;r++)t[r]=e[r];return t}return Array.isArray(e)?e.map(o.clone):(0,i.isArguments)(e)?Array.from(e).map(o.clone):(0,i.isFunction)(e.clone)?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(t={},(0,i.keysOf)(e).forEach((function(r){t[r]=o.clone(e[r])})),t)},o.newBinary=t.newBinary}(),e.exports=s.EJSON}()},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,s,i,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,s),!0;case 5:return l.fn.call(l.context,t,n,s,i),!0;case 6:return l.fn.call(l.context,t,n,s,i,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,s);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,s){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||n&&a.context!==n||o(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||s&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},2017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;0!=s--;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},6454:(e,t,r)=>{"use strict";const n=r(3918),s=r(2923),i=r(8904);e.exports={XMLParser:s,XMLValidator:n,XMLBuilder:i}},5334:(e,t)=>{"use strict";const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",s=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t){const n=Object.keys(t),s=n.length;for(let i=0;i<s;i++)e[n[i]]="strict"===r?[t[n[i]]]:t[n[i]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(e){return!(null==s.exec(e))},t.getAllMatches=function(e,t){const r=[];let n=t.exec(e);for(;n;){const s=[];s.startIndex=t.lastIndex-n[0].length;const i=n.length;for(let e=0;e<i;e++)s.push(n[e]);r.push(s),n=t.exec(e)}return r},t.nameRegexp=n},3918:(e,t,r)=>{"use strict";const n=r(5334),s={allowBooleanAttributes:!1,unpairedTags:[]};function i(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function o(e,t){const r=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const n=e.substr(r,t-r);if(t>5&&"xml"===n)return h("InvalidXml","XML declaration allowed only at the start of the document.",m(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=Object.assign({},s,t);const r=[];let c=!1,u=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let s=0;s<e.length;s++)if("<"===e[s]&&"?"===e[s+1]){if(s+=2,s=o(e,s),s.err)return s}else{if("<"!==e[s]){if(i(e[s]))continue;return h("InvalidChar","char '"+e[s]+"' is not expected.",m(e,s))}{let g=s;if(s++,"!"===e[s]){s=a(e,s);continue}{let y=!1;"/"===e[s]&&(y=!0,s++);let b="";for(;s<e.length&&">"!==e[s]&&" "!==e[s]&&"\t"!==e[s]&&"\n"!==e[s]&&"\r"!==e[s];s++)b+=e[s];if(b=b.trim(),"/"===b[b.length-1]&&(b=b.substring(0,b.length-1),s--),d=b,!n.isName(d)){let t;return t=0===b.trim().length?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",h("InvalidTag",t,m(e,s))}const v=l(e,s);if(!1===v)return h("InvalidAttr","Attributes for '"+b+"' have open quote.",m(e,s));let w=v.value;if(s=v.index,"/"===w[w.length-1]){const r=s-w.length;w=w.substring(0,w.length-1);const n=p(w,t);if(!0!==n)return h(n.err.code,n.err.msg,m(e,r+n.err.line));c=!0}else if(y){if(!v.tagClosed)return h("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",m(e,s));if(w.trim().length>0)return h("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",m(e,g));if(0===r.length)return h("InvalidTag","Closing tag '"+b+"' has not been opened.",m(e,g));{const t=r.pop();if(b!==t.tagName){let r=m(e,t.tagStartPos);return h("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+b+"'.",m(e,g))}0==r.length&&(u=!0)}}else{const n=p(w,t);if(!0!==n)return h(n.err.code,n.err.msg,m(e,s-w.length+n.err.line));if(!0===u)return h("InvalidXml","Multiple possible root nodes found.",m(e,s));-1!==t.unpairedTags.indexOf(b)||r.push({tagName:b,tagStartPos:g}),c=!0}for(s++;s<e.length;s++)if("<"===e[s]){if("!"===e[s+1]){s++,s=a(e,s);continue}if("?"!==e[s+1])break;if(s=o(e,++s),s.err)return s}else if("&"===e[s]){const t=f(e,s);if(-1==t)return h("InvalidChar","char '&' is not expected.",m(e,s));s=t}else if(!0===u&&!i(e[s]))return h("InvalidXml","Extra text at the end",m(e,s));"<"===e[s]&&s--}}}var d;return c?1==r.length?h("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",m(e,r[0].tagStartPos)):!(r.length>0)||h("InvalidXml","Invalid '"+JSON.stringify(r.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):h("InvalidXml","Start tag expected.",1)};const c='"',u="'";function l(e,t){let r="",n="",s=!1;for(;t<e.length;t++){if(e[t]===c||e[t]===u)""===n?n=e[t]:n!==e[t]||(n="");else if(">"===e[t]&&""===n){s=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:s}}const d=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function p(e,t){const r=n.getAllMatches(e,d),s={};for(let e=0;e<r.length;e++){if(0===r[e][1].length)return h("InvalidAttr","Attribute '"+r[e][2]+"' has no space in starting.",y(r[e]));if(void 0!==r[e][3]&&void 0===r[e][4])return h("InvalidAttr","Attribute '"+r[e][2]+"' is without value.",y(r[e]));if(void 0===r[e][3]&&!t.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '"+r[e][2]+"' is not allowed.",y(r[e]));const n=r[e][2];if(!g(n))return h("InvalidAttr","Attribute '"+n+"' is an invalid name.",y(r[e]));if(s.hasOwnProperty(n))return h("InvalidAttr","Attribute '"+n+"' is repeated.",y(r[e]));s[n]=1}return!0}function f(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function h(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function g(e){return n.isName(e)}function m(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function y(e){return e.startIndex+e[1].length}},8904:(e,t,r)=>{"use strict";const n=r(2788),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function i(e){this.options=Object.assign({},s,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=o,this.options.format?(this.indentate=a,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function o(e,t,r){const n=this.j2x(e,r+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}function a(e){return this.options.indentBy.repeat(e)}function c(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}i.prototype.build=function(e){return this.options.preserveOrder?n(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},i.prototype.j2x=function(e,t){let r="",n="";for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s))if(void 0===e[s])this.isAttribute(s)&&(n+="");else if(null===e[s])this.isAttribute(s)?n+="":"?"===s[0]?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)n+=this.buildTextValNode(e[s],s,"",t);else if("object"!=typeof e[s]){const i=this.isAttribute(s);if(i)r+=this.buildAttrPairStr(i,""+e[s]);else if(s===this.options.textNodeName){let t=this.options.tagValueProcessor(s,""+e[s]);n+=this.replaceEntitiesValue(t)}else n+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const r=e[s].length;let i="",o="";for(let a=0;a<r;a++){const r=e[s][a];if(void 0===r);else if(null===r)"?"===s[0]?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if("object"==typeof r)if(this.options.oneListGroup){const e=this.j2x(r,t+1);i+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(o+=e.attrStr)}else i+=this.processTextOrObjNode(r,s,t);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(s,r);e=this.replaceEntitiesValue(e),i+=e}else i+=this.buildTextValNode(r,s,"",t)}this.options.oneListGroup&&(i=this.buildObjectNode(i,s,o,t)),n+=i}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const t=Object.keys(e[s]),n=t.length;for(let i=0;i<n;i++)r+=this.buildAttrPairStr(t[i],""+e[s][t[i]])}else n+=this.processTextOrObjNode(e[s],s,t);return{attrStr:r,val:n}},i.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},i.prototype.buildObjectNode=function(e,t,r,n){if(""===e)return"?"===t[0]?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let s="</"+t+this.tagEndChar,i="";return"?"===t[0]&&(i="?",s=""),!r&&""!==r||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===i.length?this.indentate(n)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+s:this.indentate(n)+"<"+t+r+i+">"+e+s}},i.prototype.closeTag=function(e){let t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":`></${e}`,t},i.prototype.buildTextValNode=function(e,t,r,n){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(n)+`\x3c!--${e}--\x3e`+this.newLine;if("?"===t[0])return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(t,e);return s=this.replaceEntitiesValue(s),""===s?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+s+"</"+t+this.tagEndChar}},i.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e},e.exports=i},2788:e=>{function t(e,o,a,c){let u="",l=!1;for(let d=0;d<e.length;d++){const p=e[d],f=r(p);if(void 0===f)continue;let h="";if(h=0===a.length?f:`${a}.${f}`,f===o.textNodeName){let e=p[f];s(h,o)||(e=o.tagValueProcessor(f,e),e=i(e,o)),l&&(u+=c),u+=e,l=!1;continue}if(f===o.cdataPropName){l&&(u+=c),u+=`<![CDATA[${p[f][0][o.textNodeName]}]]>`,l=!1;continue}if(f===o.commentPropName){u+=c+`\x3c!--${p[f][0][o.textNodeName]}--\x3e`,l=!0;continue}if("?"===f[0]){const e=n(p[":@"],o),t="?xml"===f?"":c;let r=p[f][0][o.textNodeName];r=0!==r.length?" "+r:"",u+=t+`<${f}${r}${e}?>`,l=!0;continue}let g=c;""!==g&&(g+=o.indentBy);const m=c+`<${f}${n(p[":@"],o)}`,y=t(p[f],o,h,g);-1!==o.unpairedTags.indexOf(f)?o.suppressUnpairedNode?u+=m+">":u+=m+"/>":y&&0!==y.length||!o.suppressEmptyNode?y&&y.endsWith(">")?u+=m+`>${y}${c}</${f}>`:(u+=m+">",y&&""!==c&&(y.includes("/>")||y.includes("</"))?u+=c+o.indentBy+y+c:u+=y,u+=`</${f}>`):u+=m+"/>",l=!0}return u}function r(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(e.hasOwnProperty(n)&&":@"!==n)return n}}function n(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let s=t.attributeValueProcessor(n,e[n]);s=i(s,t),!0===s&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${s}"`}return r}function s(e,t){let r=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function i(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const n=t.entities[r];e=e.replace(n.regex,n.val)}return e}e.exports=function(e,r){let n="";return r.format&&r.indentBy.length>0&&(n="\n"),t(e,r,"",n)}},9400:(e,t,r)=>{const n=r(5334);function s(e,t){let r="";for(;t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)r+=e[t];if(r=r.trim(),-1!==r.indexOf(" "))throw new Error("External entites are not supported");const n=e[t++];let s="";for(;t<e.length&&e[t]!==n;t++)s+=e[t];return[r,s,t]}function i(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}function o(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7]}function a(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8]}function c(e,t){return"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8]}function u(e,t){return"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9]}function l(e){if(n.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}e.exports=function(e,t){const r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let n=1,d=!1,p=!1,f="";for(;t<e.length;t++)if("<"!==e[t]||p)if(">"===e[t]){if(p?"-"===e[t-1]&&"-"===e[t-2]&&(p=!1,n--):n--,0===n)break}else"["===e[t]?d=!0:f+=e[t];else{if(d&&o(e,t))t+=7,[entityName,val,t]=s(e,t+1),-1===val.indexOf("&")&&(r[l(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(d&&a(e,t))t+=8;else if(d&&c(e,t))t+=8;else if(d&&u(e,t))t+=9;else{if(!i)throw new Error("Invalid DOCTYPE");p=!0}n++,f=""}if(0!==n)throw new Error("Unclosed DOCTYPE")}return{entities:r,i:t}}},460:(e,t)=>{const r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}};t.buildOptions=function(e){return Object.assign({},r,e)},t.defaultOptions=r},7680:(e,t,r)=>{"use strict";const n=r(5334),s=r(3832),i=r(9400),o=r(7983);function a(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function c(e,t,r,n,s,i,o){if(void 0!==e&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const n=this.options.tagValueProcessor(t,e,r,s,i);return null==n?e:typeof n!=typeof e||n!==e?n:this.options.trimValues||e.trim()===e?w(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function u(e){if(this.options.removeNSPrefix){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}const l=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function d(e,t,r){if(!this.options.ignoreAttributes&&"string"==typeof e){const r=n.getAllMatches(e,l),s=r.length,i={};for(let e=0;e<s;e++){const n=this.resolveNameSpace(r[e][1]);let s=r[e][4],o=this.options.attributeNamePrefix+n;if(n.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),"__proto__"===o&&(o="#__proto__"),void 0!==s){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);const e=this.options.attributeValueProcessor(n,s,t);i[o]=null==e?s:typeof e!=typeof s||e!==s?e:w(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[o]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=i,e}return i}}const p=function(e){e=e.replace(/\r\n?/g,"\n");const t=new s("!xml");let r=t,n="",o="";for(let a=0;a<e.length;a++)if("<"===e[a])if("/"===e[a+1]){const t=y(e,">",a,"Closing Tag is not closed.");let s=e.substring(a+2,t).trim();if(this.options.removeNSPrefix){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1))}this.options.transformTagName&&(s=this.options.transformTagName(s)),r&&(n=this.saveTextToParentTag(n,r,o));const i=o.substring(o.lastIndexOf(".")+1);if(s&&-1!==this.options.unpairedTags.indexOf(s))throw new Error(`Unpaired tag can not be used as closing tag: </${s}>`);let c=0;i&&-1!==this.options.unpairedTags.indexOf(i)?(c=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=o.lastIndexOf("."),o=o.substring(0,c),r=this.tagsNodeStack.pop(),n="",a=t}else if("?"===e[a+1]){let t=b(e,a,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new s(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,o,t.tagName)),this.addChild(r,e,o)}a=t.closeIndex+1}else if("!--"===e.substr(a+1,3)){const t=y(e,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){const s=e.substring(a+4,t-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:s}])}a=t}else if("!D"===e.substr(a+1,2)){const t=i(e,a);this.docTypeEntities=t.entities,a=t.i}else if("!["===e.substr(a+1,2)){const t=y(e,"]]>",a,"CDATA is not closed.")-2,s=e.substring(a+9,t);n=this.saveTextToParentTag(n,r,o);let i=this.parseTextData(s,r.tagname,o,!0,!1,!0,!0);null==i&&(i=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:s}]):r.add(this.options.textNodeName,i),a=t+2}else{let i=b(e,a,this.options.removeNSPrefix),c=i.tagName;const u=i.rawTagName;let l=i.tagExp,d=i.attrExpPresent,p=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&"!xml"!==r.tagname&&(n=this.saveTextToParentTag(n,r,o,!1));const f=r;if(f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let t="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)"/"===c[c.length-1]?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),l=c):l=l.substr(0,l.length-1),a=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(c))a=i.closeIndex;else{const r=this.readStopNodeData(e,u,p+1);if(!r)throw new Error(`Unexpected end of ${u}`);a=r.i,t=r.tagContent}const n=new s(c);c!==l&&d&&(n[":@"]=this.buildAttributesMap(l,o,c)),t&&(t=this.parseTextData(t,c,o,!0,d,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),n.add(this.options.textNodeName,t),this.addChild(r,n,o)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),l=c):l=l.substr(0,l.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const e=new s(c);c!==l&&d&&(e[":@"]=this.buildAttributesMap(l,o,c)),this.addChild(r,e,o),o=o.substr(0,o.lastIndexOf("."))}else{const e=new s(c);this.tagsNodeStack.push(r),c!==l&&d&&(e[":@"]=this.buildAttributesMap(l,o,c)),this.addChild(r,e,o),r=e}n="",a=p}}else n+=e[a];return t.child};function f(e,t,r){const n=this.options.updateTag(t.tagname,r,t[":@"]);!1===n||("string"==typeof n?(t.tagname=n,e.addChild(t)):e.addChild(t))}const h=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function g(e,t,r,n){return e&&(void 0===n&&(n=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,n))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function m(e,t,r){const n="*."+r;for(const r in e){const s=e[r];if(n===s||t===s)return!0}return!1}function y(e,t,r,n){const s=e.indexOf(t,r);if(-1===s)throw new Error(n);return s+t.length-1}function b(e,t,r,n=">"){const s=function(e,t,r=">"){let n,s="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else if(t===r[0]){if(!r[1])return{data:s,index:i};if(e[i+1]===r[1])return{data:s,index:i}}else"\t"===t&&(t=" ");s+=t}}(e,t+1,n);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let c=i,u=!0;-1!==a&&(c=i.substring(0,a),i=i.substring(a+1).trimStart());const l=c;if(r){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),u=c!==s.data.substr(e+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u,rawTagName:l}}function v(e,t,r){const n=r;let s=1;for(;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){const i=y(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(s--,0===s))return{tagContent:e.substring(n,r),i};r=i}else if("?"===e[r+1])r=y(e,"?>",r+1,"StopNode is not closed.");else if("!--"===e.substr(r+1,3))r=y(e,"--\x3e",r+3,"StopNode is not closed.");else if("!["===e.substr(r+1,2))r=y(e,"]]>",r,"StopNode is not closed.")-2;else{const n=b(e,r,">");n&&((n&&n.tagName)===t&&"/"!==n.tagExp[n.tagExp.length-1]&&s++,r=n.closeIndex)}}function w(e,t,r){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&o(e,r)}return n.isExist(e)?e:""}e.exports=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=a,this.parseXml=p,this.parseTextData=c,this.resolveNameSpace=u,this.buildAttributesMap=d,this.isItStopNode=m,this.replaceEntitiesValue=h,this.readStopNodeData=v,this.saveTextToParentTag=g,this.addChild=f}}},2923:(e,t,r)=>{const{buildOptions:n}=r(460),s=r(7680),{prettify:i}=r(5629),o=r(3918);e.exports=class{constructor(e){this.externalEntities={},this.options=n(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const r=o.validate(e,t);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const r=new s(this.options);r.addExternalEntities(this.externalEntities);const n=r.parseXml(e);return this.options.preserveOrder||void 0===n?n:i(n,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}}},5629:(e,t)=>{"use strict";function r(e,t,o){let a;const c={};for(let u=0;u<e.length;u++){const l=e[u],d=n(l);let p="";if(p=void 0===o?d:o+"."+d,d===t.textNodeName)void 0===a?a=l[d]:a+=""+l[d];else{if(void 0===d)continue;if(l[d]){let e=r(l[d],t,p);const n=i(e,t);l[":@"]?s(e,l[":@"],p,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==c[d]&&c.hasOwnProperty(d)?(Array.isArray(c[d])||(c[d]=[c[d]]),c[d].push(e)):t.isArray(d,p,n)?c[d]=[e]:c[d]=e}}}return"string"==typeof a?a.length>0&&(c[t.textNodeName]=a):void 0!==a&&(c[t.textNodeName]=a),c}function n(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const r=t[e];if(":@"!==r)return r}}function s(e,t,r,n){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const i=s[o];n.isArray(i,r+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function i(e,t){const{textNodeName:r}=t,n=Object.keys(e).length;return 0===n||!(1!==n||!e[r]&&"boolean"!=typeof e[r]&&0!==e[r])}t.prettify=function(e,t){return r(e,t)}},3832:e=>{"use strict";e.exports=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}},4865:e=>{"use strict";const t=(e,t,n,s)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const i=Object.getOwnPropertyDescriptor(e,n),o=Object.getOwnPropertyDescriptor(t,n);!r(i,o)&&s||Object.defineProperty(e,n,o)},r=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},n=(e,t)=>`/* Wrapped ${e}*/\n${t}`,s=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),i=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,r,{ignoreNonConfigurable:o=!1}={})=>{const{name:a}=e;for(const n of Reflect.ownKeys(r))t(e,r,n,o);return((e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)})(e,r),((e,t,r)=>{const o=""===r?"":`with ${r.trim()}() `,a=n.bind(null,o,t.toString());Object.defineProperty(a,"name",i),Object.defineProperty(e,"toString",{...s,value:a})})(e,r,a),e}},4617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},3290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6368),s=r(7685),i=r(4774),o=()=>{},a=new s.TimeoutError;t.default=class extends n{constructor(e){var t,r,n,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(s=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==s?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((r,n)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():s.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(a)}));r(await i)}catch(e){n(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},9998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,s=e.length;for(;s>0;){const i=s/2|0;let o=n+i;r(e[o],t)<=0?(n=++o,s-=i+1):s=i}return n}},4774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const s=n.default(this._queue,r,((e,t)=>t.priority-e.priority));this._queue.splice(s,0,r)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6368:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,s,i,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,s),!0;case 5:return l.fn.call(l.context,t,n,s,i),!0;case 6:return l.fn.call(l.context,t,n,s,i,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,s);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,s){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||n&&a.context!==n||o(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||s&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},7685:(e,t,r)=>{"use strict";const n=r(4617);class s extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,r)=>new Promise(((i,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const a=setTimeout((()=>{if("function"==typeof r){try{i(r())}catch(e){o(e)}return}const n=r instanceof Error?r:new s("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(n)}),t);n(e.then(i,o),(()=>{clearTimeout(a)}))}));e.exports=i,e.exports.default=i,e.exports.TimeoutError=s},7983:e=>{const t=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e,s={}){if(s=Object.assign({},n,s),!e||"string"!=typeof e)return e;let i=e.trim();if(void 0!==s.skipLike&&s.skipLike.test(i))return e;if(s.hex&&t.test(i))return Number.parseInt(i,16);{const t=r.exec(i);if(t){const r=t[1],n=t[2];let a=(o=t[3])&&-1!==o.indexOf(".")?("."===(o=o.replace(/0+$/,""))?o="0":"."===o[0]?o="0"+o:"."===o[o.length-1]&&(o=o.substr(0,o.length-1)),o):o;const c=t[4]||t[6];if(!s.leadingZeros&&n.length>0&&r&&"."!==i[2])return e;if(!s.leadingZeros&&n.length>0&&!r&&"."!==i[1])return e;{const t=Number(i),o=""+t;return-1!==o.search(/[eE]/)||c?s.eNotation?t:e:-1!==i.indexOf(".")?"0"===o&&""===a||o===a||r&&o==="-"+a?t:e:n?a===o||r+a===o?t:e:i===o||i===r+o?t:e}}return e}var o}},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},6982:e=>{"use strict";e.exports=require("crypto")},7194:e=>{"use strict";e.exports=require("dgram")},9896:e=>{"use strict";e.exports=require("fs")},1943:e=>{"use strict";e.exports=require("fs/promises")},8611:e=>{"use strict";e.exports=require("http")},9278:e=>{"use strict";e.exports=require("net")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},4581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(l)throw new Error("runEntrypoint can only be called once");if(l=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const r=process.env.MODULE_MANIFEST;if(!r)throw new Error("Module initialise is missing MODULE_MANIFEST");const n=await i.default.readFile(r),d=JSON.parse(n.toString());if(d.runtime?.api!==s.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let p=d.runtime.apiVersion;if("0.0.0"===p)try{const e=await i.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(p=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const f=process.env.CONNECTION_ID;if("string"!=typeof f||!f)throw new Error("Module initialise is missing CONNECTION_ID");const h=process.env.VERIFICATION_TOKEN;if("string"!=typeof h||!h)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const g=new a.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{g.receivedMessage(e)})),u=new e((0,o.literal)({id:f,upgradeScripts:t,_isInstanceBaseProps:!0})),g.sendWithCb("register",{apiVersion:p,connectionId:f,verificationToken:h}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))};const n=r(1635),s=r(9967),i=n.__importDefault(r(1943)),o=r(360),a=r(4044),c=n.__importDefault(r(6928));let u,l=!1},6160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var n=r(8895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return n.TCPHelper}});var s=r(1118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return s.TelnetHelper}});var i=r(6259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return i.UDPHelper}})},8895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const n=r(1635).__importDefault(r(9278)),s=r(228),i=r(1400);class o extends s.EventEmitter{#e;#t;_socket;#r;#n=!1;#s=!1;#i=!1;#o;#a;#c;get isConnected(){return this.#n}get isConnecting(){return this.#s}get isDestroyed(){return this.#i}constructor(e,t,r){super(),this.#e=e,this.#t=t,this.#r={reconnect_interval:2e3,reconnect:!0,...r},this._socket=new n.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#s=!1,this.#n=!1,this.#r.reconnect&&this.#u(),this.#l(i.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#n=!0,this.#s=!1,this.#l(i.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#n=!1,this.#l(i.InstanceStatus.Disconnected),!this.#s&&this.#r.reconnect&&this.#u(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>{this.#i||this.connect()})),this.#c=setTimeout((()=>{this.#c=void 0,this.#i||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#i)throw new Error("Cannot connect destroyed socket");return!this.#s&&(this.#s=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#i||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#n)return!1;try{return new Promise(((t,r)=>{this._socket.write(e,(e=>{e?r(e):t(!0)}))}))}catch(e){this.#n=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#l(i.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#i=!0,void 0!==this.#a&&(clearTimeout(this.#a),this.#a=void 0),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#u(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#l(i.InstanceStatus.Connecting),this.connect()}),this.#r.reconnect_interval)}#l(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.TCPHelper=o},1118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const n=r(1635).__importDefault(r(228)),s=r(2203),i=r(8895);class o extends n.default{#d;#p;#c;get isConnected(){return this.#d.isConnected}get isConnecting(){return this.#d.isConnecting}get isDestroyed(){return this.#d.isDestroyed}constructor(e,t,r){super(),this.#d=new i.TCPHelper(e,t,r),this.#p=new a,this.#d._socket.pipe(this.#p),this.#d.on("connect",(()=>this.emit("connect"))),this.#d.on("end",(()=>this.emit("end"))),this.#d.on("error",(e=>this.emit("error",e))),this.#d.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#p.on("iac",((e,t)=>this.emit("iac",e,t))),this.#p.on("sb",(e=>this.emit("sb",e))),this.#p.on("data",(e=>this.emit("data",e))),this.#p.on("drain",(()=>this.emit("drain"))),this.#c=setTimeout((()=>{this.#c=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#d.connect()}async send(e){return this.#d.send(e)}destroy(){this.#d.destroy(),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#p.removeAllListeners(),this.#p.destroy()}}t.TelnetHelper=o;class a extends s.Transform{#f;#h;#g;constructor(e){super(e),this.#f=Buffer.alloc(0),this.#h=Buffer.alloc(0),this.#g=0}_transform(e,t,r){for(let t=0;t<e.length;++t)this.#m(e[t]);const n=this.#y();n.length&&this.push(n),r()}#m(e){if(0===this.#g){if(255===e)return void(this.#g=255);this.#f=Buffer.concat([this.#f,Buffer.from([e])])}else if(255===this.#g)switch(e){case 250:case 251:case 252:case 253:case 254:this.#g=e;break;default:this.#g=0}else{if(this.#g>=251&&this.#g<=254){let t;switch(this.#g){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#g=0)}if(250===this.#g){if(240===e)return this.emit("sb",this.#h),this.#g=0,void(this.#h=Buffer.alloc(0));this.#h=Buffer.concat([this.#h,Buffer.from([e])])}}}#y(){const e=this.#f;return this.#f=Buffer.alloc(0),e}}},6259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const n=r(1635).__importDefault(r(7194)),s=r(228),i=r(1400);class o extends s.EventEmitter{#e;#t;#b;#r;#i=!1;#o;#c;get isDestroyed(){return this.#i}constructor(e,t,r){super(),this.#e=e,this.#t=t,this.#r={...r},this.#b=n.default.createSocket("udp4");try{this.#b.bind(this.#r.bind_port||0,this.#r.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#r.bind_ip||"0.0.0.0"}:${this.#r.bind_port||0}`)}void 0!==this.#r.ttl&&this.#b.setTTL(this.#r.ttl),void 0!==this.#r.multicast_ttl&&this.#b.setMulticastTTL(this.#r.multicast_ttl),this.#b.on("error",(e=>{this.#l(i.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#b.on("listening",(()=>{this.#r.broadcast&&this.#b.setBroadcast(!0),this.#r.multicast_interface&&this.#b.setMulticastInterface(this.#r.multicast_interface),this.#l(i.InstanceStatus.Ok),this.emit("listening")})),this.#b.on("message",((e,t)=>this.emit("data",e,t))),this.#c=setTimeout((()=>{this.#i||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#i)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,r)=>{this.#b.send(e,this.#t,this.#e,(e=>{e?r(e):t()}))}))}destroy(){this.#i=!0,void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#b.removeAllListeners(),this.#b.close(),this.removeAllListeners()}#l(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.UDPHelper=o},4044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const n=r(1635),s=r(360),i=n.__importDefault(r(6022));t.IpcWrapper=class{#v;#w;#S;#I=1;#E=new Map;constructor(e,t,r){this.#v=e,this.#w=t,this.#S=r}async sendWithCb(e,t,r,n=0){n<=0&&(n=this.#S);const s={timeout:void 0,resolve:()=>null,reject:()=>null},o=new Promise(((e,t)=>{s.resolve=e,s.reject=t}));this.#I>268435456&&(this.#I=1);const a=this.#I++;this.#E.set(a,s),this.#w({direction:"call",name:String(e),payload:i.default.stringify(t),callbackId:a});const c=new Error("Call timed out");return s.timeout=setTimeout((()=>{s.reject(r?r():c),this.#E.delete(a)}),n),o}sendWithNoCb(e,t){this.#w({direction:"call",name:String(e),payload:i.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#v[e.name];if(!t)return void(e.callbackId&&this.#w({direction:"response",callbackId:e.callbackId,success:!1,payload:i.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?i.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#w({direction:"response",callbackId:e.callbackId,success:!0,payload:i.default.stringify(t)})}),(t=>{e.callbackId&&this.#w({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):i.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#E.get(e.callbackId);if(this.#E.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const r=e.payload?i.default.parse(e.payload):void 0;if(e.success)t.resolve(r);else{let e=r;r&&"object"==typeof r&&"message"in r&&(e=new Error(r.message),r.stack&&(e.stack=r.stack)),t.reject(e)}break}default:(0,s.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},9967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},6278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const n=r(1635);n.__exportStar(r(9077),t),n.__exportStar(r(2018),t),n.__exportStar(r(4581),t);var s=r(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return s.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return s.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return s.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return s.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return s.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return s.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return s.assertNever}}),n.__exportStar(r(6160),t);var i=r(4326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return i.runEntrypoint}})},4289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const n=r(2593);function s(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#_;#k;#A;#x=new Map;#P=new Map;constructor(e,t,r){this.#_=e,this.#k=t,this.#A=r}async handleExecuteAction(e){const t=this.#x.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},r)}handleUpdateActions(e){for(const[t,r]of Object.entries(e)){const e=this.#P.get(t);if(e){const t=this.#x.get(e.actionId);if(t?.unsubscribe){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(s(e),r)).catch((t=>{this.#A("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!r||r.disabled)this.#P.delete(t);else{this.#P.set(t,r);const e=this.#x.get(r.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#_({text:e,controlId:r.controlId,actionInstanceId:r.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(s(r),t)).catch((e=>{this.#A("error",`Action subscribe failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#x.get(e.action.actionId);if(t&&t.learn){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},r)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#x.clear();for(const[r,s]of Object.entries(e))s&&(t.push({id:r,name:s.name,description:s.description,options:(0,n.serializeIsVisibleFn)(s.options),hasLearn:!!s.learn,learnTimeout:s.learnTimeout}),this.#x.set(r,s));this.#k({actions:t})}_getAllActions(){return Array.from(this.#P.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#P.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.actionId))));for(const e of t){const t=this.#x.get(e.actionId);if(t?.subscribe){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(s(e),r)).catch((t=>{this.#A("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#P.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.actionId))));for(const e of t){const t=this.#x.get(e.actionId);if(t&&t.unsubscribe){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(s(e),r)).catch((t=>{this.#A("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},2593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},8039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const n=r(1635),s=r(2593),i=n.__importDefault(r(7e3));function o(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#_;#O;#C;#A;#T=new Map;#N=new Map;#R=new Map;#j=new Map;#$;get parseVariablesContext(){return this.#$}constructor(e,t,r,n){this.#_=e,this.#O=t,this.#C=r,this.#A=n}getDefinitionIds(){return Array.from(this.#T.keys())}getInstanceIds(){return Array.from(this.#N.keys())}handleUpdateFeedbacks(e){for(const[t,r]of Object.entries(e)){const e=this.#N.get(t);if(e){const t=this.#T.get(e.feedbackId);if(t?.unsubscribe){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),r)).catch((t=>{this.#A("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!r||r.disabled)this.#N.delete(t);else{this.#N.set(t,{...r,referencedVariables:null});const e=this.#T.get(r.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#_({text:e,controlId:r.controlId,actionInstanceId:void 0,feedbackInstanceId:r.id})).text};Promise.resolve(e.subscribe(o(e.type,r),t)).catch((e=>{this.#A("error",`Feedback subscribe failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)}))}this.#D(t)}}}async handleLearnFeedback(e){const t=this.#T.get(e.feedback.feedbackId);if(t&&t.learn){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},r)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#j.values())for(const r of e.variablesIds)t.changedVariables.add(r);const r=new Set;for(const e of this.#N.values())if(!this.#j.has(e.id)&&e.referencedVariables)for(const n of e.referencedVariables)if(t.has(n)){r.add(e.id);break}for(const e of r)setImmediate((()=>{this.#D(e)}))}#D(e){const t=this.#j.get(e);if(t)return void(t.needsRecheck=!0);const r=this.#N.get(e);if(!r)return;const n=r,s={needsRecheck:!1,changedVariables:new Set};this.#j.set(e,s),Promise.resolve().then((async()=>{const t=this.#T.get(n.feedbackId);let r;const s=new Set;if(t){this.#$=`Feedback ${n.feedbackId} (${e})`;const i={parseVariablesInString:async t=>{const r=await this.#_({text:t,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(r.variableIds&&r.variableIds.length)for(const e of r.variableIds)s.add(e);return r.text}};r="boolean"===t.type?t.callback({...o("boolean",n),type:"boolean"},i):t.callback({...o("advanced",n),type:"advanced",image:n.image},i),this.#$=void 0}const i=await r;this.#R.set(e,{id:e,controlId:n.controlId,value:i}),this.#M(),n.referencedVariables=s.size>0?Array.from(s):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#$=void 0,this.#j.delete(e);let t=!1;if(n.referencedVariables)for(const e of n.referencedVariables)if(s.changedVariables.has(e)){t=!0;break}(t||s.needsRecheck)&&setImmediate((()=>{this.#D(e)}))}))}#M=(0,i.default)((()=>{const e=this.#R;this.#R=new Map,e.size>0&&this.#O({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#T.clear();for(const[r,n]of Object.entries(e))n&&(t.push({id:r,name:n.name,description:n.description,options:(0,s.serializeIsVisibleFn)(n.options),type:n.type,defaultStyle:"boolean"===n.type?n.defaultStyle:void 0,hasLearn:!!n.learn,learnTimeout:n.learnTimeout,showInvert:"boolean"===n.type&&n.showInvert}),this.#T.set(r,n));this.#C({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,r]of this.#N.entries())this.#T.get(r.feedbackId)&&(0===t.size||t.has(r.feedbackId))&&this.#D(e)}checkFeedbacksById(e){for(const t of e)this.#D(t)}_getAllFeedbacks(){return Array.from(this.#N.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#N.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.feedbackId))));for(const e of t){const t=this.#T.get(e.feedbackId);if(t?.subscribe){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(o(t.type,e),r)).catch((t=>{this.#A("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#N.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.feedbackId))));for(const e of t){const t=this.#T.get(e.feedbackId);if(t&&t.unsubscribe){const r={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),r)).catch((t=>{this.#A("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},1706:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,r,i,o,a){const c=new Map,u=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??r;t&&"number"==typeof e&&u(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??r;e&&"number"==typeof t&&u(t).feedbacks.push(e.id)}if(!a)for(let e=r??-1;e<i.length;e++)u(e).config=!0;const l={},d={};let p;if(c.size>0){const a=Array.from(c.keys()).sort(),u=Math.min(...a,r??-1)+1,f=[],h=[],g=i.length;for(let r=u;r<g;r++){const a=c.get(r-1);a&&(f.push(...a.actions),h.push(...a.feedbacks));const u=!!a?.config;if(!u&&0===f.length&&0===h.length)continue;const g=p??o,m=(0,i[r])({currentConfig:s(g)},{config:u?g:null,actions:f.map((t=>{const r=e[t];if(r)return(0,n.literal)({id:r.id,controlId:r.controlId,actionId:r.actionId,options:void 0!==r.options?s(r.options):{}})})).filter((e=>!!e)),feedbacks:h.map((e=>{const r=t[e];if(r)return(0,n.literal)({id:r.id,controlId:r.controlId,feedbackId:r.feedbackId,options:void 0!==r.options?s(r.options):{},isInverted:r.isInverted})})).filter((e=>!!e))});u&&m.updatedConfig&&(p=m.updatedConfig);for(const t of m.updatedActions)if(t){const r=e[t.id];r&&(r.actionId=t.actionId,r.options=t.options,d[t.id]=r)}for(const e of m.updatedFeedbacks)if(e){const r=t[e.id];r&&(r.feedbackId=e.feedbackId,r.options=e.options,l[e.id]={...r,style:l[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,r]of Object.entries(e))d[t]||"number"!=typeof r?.upgradeIndex||(d[t]=r);for(const[e,r]of Object.entries(t))l[e]||"number"!=typeof r?.upgradeIndex||(l[e]=r)}return{updatedActions:d,updatedFeedbacks:l,updatedConfig:p}};const n=r(360);function s(e){return JSON.parse(JSON.stringify(e))}},9077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,n.default)(e)){const e=n.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const n=r(1635).__importDefault(r(7281))},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const n=r(1635),s=r(360),i=n.__importDefault(r(3290)),o=r(2593),a=r(1706),c=r(8039),u=r(4044),l=r(4289),d=r(2365);t.InstanceBase=class{#F;#V;id;#U=new i.default({concurrency:1});#q=!1;#L=!1;#B={};#H;#W;#K=new Map;#z=new Map;#G=new Map;#r;#J;get instanceOptions(){return this.#r}get label(){return this.#J}constructor(e){if(!(0,o.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#r={disableVariableValidation:!1},this.#F=new u.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#F.receivedMessage(e)})),this.#H=new l.ActionManager((async e=>this.#F.sendWithCb("parseVariablesInString",e)),(e=>this.#F.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#W=new c.FeedbackManager((async e=>this.#F.sendWithCb("parseVariablesInString",e)),(e=>this.#F.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#F.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#V=e.upgradeScripts,this.id=e.id,this.#J=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#U.add((async()=>{if(this.#q)throw new Error("Already initialized");const t=e.actions,r=e.feedbacks;if(this.#B=e.config,this.#J=e.label,e.isFirstInit){const t={},r=this.getConfigFields();for(const e of r)"default"in e&&(t[e.id]=e.default);this.#B=t,this.saveConfig(this.#B),e.lastUpgradeIndex=this.#V.length-1}const{updatedActions:n,updatedFeedbacks:s,updatedConfig:i}=(0,a.runThroughUpgradeScripts)(t,r,e.lastUpgradeIndex,this.#V,this.#B,!1);this.#B=i??this.#B;const o=this.#F.sendWithCb("upgradedItems",{updatedActions:n,updatedFeedbacks:s});try{await this.init(this.#B,!!e.isFirstInit),this.#q=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await o}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:r},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#V.length-1,updatedConfig:this.#B}}))}async _handleDestroy(){await this.#U.add((async()=>{if(!this.#q)throw new Error("Not initialized");await this.destroy(),this.#q=!1}))}async _handleConfigUpdateAndLabel(e){await this.#U.add((async()=>{if(!this.#q)throw new Error("Not initialized");this.#J=e.label,this.#B=e.config,await this.configUpdated(this.#B)}))}async _handleExecuteAction(e){return this.#H.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#V,this.#B,!0);this.#F.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#W.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#V,this.#B,!0);this.#F.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#H.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#H.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#W.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#L)return}else if(!this.#L)return;if(!this.handleStartStopRecordActions)throw this.#L=!1,new Error("Recording actions is not supported by this module!");this.#L=e.recording,this.handleStartStopRecordActions(this.#L)}async _handleVariablesChanged(e){this.#W.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#K.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#K.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#B=e,this.#F.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#H.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#W.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[r,n]of Object.entries(e))n&&t.push({...n,id:r});this.#F.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],r=[];this.#z.clear();for(const n of e)t.push({id:n.variableId,name:n.name}),this.#z.set(n.variableId,n),this.#G.has(n.variableId)||(this.#G.set(n.variableId,""),r.push({id:n.variableId,value:""}));if(!this.#r.disableVariableValidation){const e=new Set(this.#z.keys());for(const t of this.#G.keys())e.has(t)||(this.#G.delete(t),r.push({id:t,value:void 0}))}this.#F.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:r})}setVariableValues(e){const t=[];for(const[r,n]of Object.entries(e))this.#r.disableVariableValidation?(void 0===n?this.#G.delete(r):this.#G.set(r,n),t.push({id:r,value:n})):this.#z.has(r)?(this.#G.set(r,n??""),t.push({id:r,value:n??""})):t.push({id:r,value:void 0});this.#F.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#G.get(e)}async parseVariablesInString(e){const t=this.#W.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#F.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#W.checkFeedbacks(e)}checkFeedbacksById(...e){this.#W.checkFeedbacksById(e)}_getAllActions(){return this.#H._getAllActions()}subscribeActions(...e){this.#H.subscribeActions(e)}unsubscribeActions(...e){this.#H.unsubscribeActions(e)}_getAllFeedbacks(){return this.#W._getAllFeedbacks()}subscribeFeedbacks(...e){this.#W.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#W.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#L)throw new Error("Not currently recording actions");this.#F.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}setCustomVariableValue(e,t){this.#F.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,r,n){this.#F.sendWithNoCb("send-osc",(0,s.literal)({host:e,port:t,path:r,args:n}))}updateStatus(e,t){this.#F.sendWithNoCb("set-status",(0,s.literal)({status:e,message:t??null}))}log(e,t){this.#F.sendWithNoCb("log-message",(0,s.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const r="string"==typeof e?{type:e}:e,n=new d.SharedUdpSocketImpl(this.#F,this.#K,r);return t&&n.on("message",t),n}}},7386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1400:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(r||(t.InstanceStatus=r={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(n||(t.Regex=n={}))},8983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1635);n.__exportStar(r(3730),t),n.__exportStar(r(1649),t),n.__exportStar(r(7386),t),n.__exportStar(r(1400),t),n.__exportStar(r(8983),t),n.__exportStar(r(8104),t),n.__exportStar(r(3258),t),n.__exportStar(r(131),t),n.__exportStar(r(3371),t),n.__exportStar(r(9786),t),n.__exportStar(r(6132),t)},3258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const n=r(1635).__importDefault(r(228)),s=r(360);class i extends n.default{#F;#Q;#r;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#g&&"object"==typeof this.#g?this.#g:void 0}#g="pending";constructor(e,t,r){super(),this.#F=e,this.#Q=t,this.#r={...r}}bind(e,t,r){if(this.#g&&"object"==typeof this.#g)throw new Error("Socket is already bound");switch(this.#g){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,s.assertNever)(this.#g),new Error("Invalid socket state")}this.#g="binding",r&&this.on("listening",r),this.#F.sendWithCb("sharedUdpSocketJoin",{family:this.#r.type,portNumber:e}).then((t=>{this.#g={portNumber:e,handleId:t},this.#Q.set(t,this),this.emit("listening")}),(e=>{this.#g="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#g&&"object"==typeof this.#g);else switch(this.#g){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,s.assertNever)(this.#g),new Error("Invalid socket state")}const t=this.#g.handleId;this.#g="closed",e&&this.on("close",e),this.#F.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#Q.delete(t),this.emit("close")}),(e=>{this.#Q.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,r,n,s,i){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof r){if("number"!=typeof n||"string"!=typeof s)throw new Error("Invalid arguments");if(void 0!==i&&"number"!=typeof i)throw new Error("Invalid arguments");const o=this.#Y(e,t,r);this.#Z(o,n,s,i)}else{if("string"!=typeof r)throw new Error("Invalid arguments");{if(void 0!==n&&"function"!=typeof n)throw new Error("Invalid arguments");const s=this.#Y(e,0,void 0);this.#Z(s,t,r,n)}}}#Y(e,t,r){let n;if("string"==typeof e)n=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))n=e;else{if(Array.isArray(e))return Buffer.from(e);n=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return n.subarray(t,void 0!==r?r+t:void 0)}#Z(e,t,r,n){if(!this.#g||"object"!=typeof this.#g)throw new Error("Socket is not open");this.#F.sendWithCb("sharedUdpSocketSend",{handleId:this.#g.handleId,message:e,address:r,port:t}).then((()=>{n?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#g="fatalError";const t=this.boundState;t&&this.#Q.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=i},3371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,r)=>{const n=[];for(const t of r.feedbacks){let r=e[t.feedbackId];if(!0===r&&(r={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),r){t.style||(t.style={});for(const[e,s]of Object.entries(r))void 0!==t.options[e]&&(t.style[s]=t.options[e],delete t.options[e],n.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:n}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,r)=>{const n=[];for(const t of r.feedbacks){const r=e[t.feedbackId];if("string"!=typeof r)continue;const s=t.options[r];void 0!==s&&(delete t.options[r],t.isInverted="true"===s||!0===s||Number(s)>0,n.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:n}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]})},6132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,r,n){let s=(255&e)<<16|(255&t)<<8|255&r;return n&&n>=0&&n<1&&(s+=16777216*Math.round(255*(1-n))),s},t.splitRgb=s,t.splitHsl=function(e){const t=s(e);return(0,n.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=s(e);return(0,n.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=s(e);return(0,n.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()};const n=r(6284);function s(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,n.colord)(e).isValid()){const t=(0,n.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},7281:(e,t,r)=>{"use strict";e.exports=c,e.exports.default=c;const n={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}}},s={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1},i=Object.prototype.hasOwnProperty,o=r(6250).A,a=new RegExp("","u");function c(e,{instancePath:t="",parentData:r,parentDataProperty:u,rootData:l=e}={}){let d=null,p=0;if(0===p){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.id&&(r="id")||void 0===e.name&&(r="name")||void 0===e.shortname&&(r="shortname")||void 0===e.description&&(r="description")||void 0===e.version&&(r="version")||void 0===e.license&&(r="license")||void 0===e.repository&&(r="repository")||void 0===e.bugs&&(r="bugs")||void 0===e.maintainers&&(r="maintainers")||void 0===e.legacyIds&&(r="legacyIds")||void 0===e.runtime&&(r="runtime")||void 0===e.manufacturer&&(r="manufacturer")||void 0===e.products&&(r="products")||void 0===e.keywords&&(r="keywords"))return c.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;{const r=p;for(const r in e)if(!i.call(n.properties,r))return c.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===p){if(void 0!==e.$schema){const r=p;if("string"!=typeof e.$schema)return c.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===p}else f=!0;if(f){if(void 0!==e.id){const r=p;if("string"!=typeof e.id)return c.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.name){const r=p;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.shortname){const r=p;if("string"!=typeof e.shortname)return c.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.description){const r=p;if("string"!=typeof e.description)return c.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.version){const r=p;if("string"!=typeof e.version)return c.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.license){const r=p;if("string"!=typeof e.license)return c.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.repository){const r=p;if("string"!=typeof e.repository)return c.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.bugs){const r=p;if("string"!=typeof e.bugs)return c.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.maintainers){let r=e.maintainers;const n=p;if(p===n){if(!Array.isArray(r))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=r.length;for(let n=0;n<e;n++){let e=r[n];const s=p;if(p===s){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t+"/maintainers/"+n,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.name&&(r="name"))return c.errors=[{instancePath:t+"/maintainers/"+n,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;if(void 0!==e.name){const r=p;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/maintainers/"+n+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=r===p}else g=!0;if(g){if(void 0!==e.email){const r=p;if("string"!=typeof e.email)return c.errors=[{instancePath:t+"/maintainers/"+n+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=r===p}else g=!0;if(g)if(void 0!==e.github){const r=p;if("string"!=typeof e.github)return c.errors=[{instancePath:t+"/maintainers/"+n+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=r===p}else g=!0}}}if(!(h=s===p))break}if(h){let e,n=r.length;if(n>1)for(;n--;)for(e=n;e--;)if(o(r[n],r[e]))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1}}}f=n===p}else f=!0;if(f){if(void 0!==e.legacyIds){let r=e.legacyIds;const n=p;if(p===n){if(!Array.isArray(r))return c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var m=!0;const e=r.length;for(let n=0;n<e;n++){const e=p;if("string"!=typeof r[n])return c.errors=[{instancePath:t+"/legacyIds/"+n,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m=e===p))break}if(m){let e,n=r.length;if(n>1){const s={};for(;n--;){let i=r[n];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1;s[i]=n}}}}}}f=n===p}else f=!0;if(f){if(void 0!==e.runtime){let r=e.runtime;const s=p;if(p===s){if(!r||"object"!=typeof r||Array.isArray(r))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===r.type&&(e="type")||void 0===r.api&&(e="api")||void 0===r.apiVersion&&(e="apiVersion")||void 0===r.entrypoint&&(e="entrypoint"))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==r.type){let e=r.type;const s=p;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:n.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var y=s===p}else y=!0;if(y){if(void 0!==r.api){let e=r.api;const s=p;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:n.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;y=s===p}else y=!0;if(y){if(void 0!==r.apiVersion){const e=p;if("string"!=typeof r.apiVersion)return c.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=e===p}else y=!0;if(y)if(void 0!==r.entrypoint){const e=p;if("string"!=typeof r.entrypoint)return c.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=e===p}else y=!0}}}}f=s===p}else f=!0;if(f){if(void 0!==e.manufacturer){const r=p;if("string"!=typeof e.manufacturer)return c.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=r===p}else f=!0;if(f){if(void 0!==e.products){let r=e.products;const n=p;if(p===n){if(!Array.isArray(r))return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length<1)return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var b=!0;const e=r.length;for(let n=0;n<e;n++){const e=p;if("string"!=typeof r[n])return c.errors=[{instancePath:t+"/products/"+n,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b=e===p))break}if(b){let e,n=r.length;if(n>1){const s={};for(;n--;){let i=r[n];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1;s[i]=n}}}}}}f=n===p}else f=!0;if(f){if(void 0!==e.keywords){let r=e.keywords;const n=p;if(p===n){if(!Array.isArray(r))return c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var v=!0;const e=r.length;for(let n=0;n<e;n++){const e=p;if("string"!=typeof r[n])return c.errors=[{instancePath:t+"/keywords/"+n,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v=e===p))break}if(v){let e,n=r.length;if(n>1){const s={};for(;n--;){let i=r[n];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1;s[i]=n}}}}}}f=n===p}else f=!0;if(f)if(void 0!==e.bonjourQueries){let r=e.bonjourQueries;const n=p;if(p===n){if(!r||"object"!=typeof r||Array.isArray(r))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=p;for(const e in r)if(!a.test(e))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===p)for(const e in r)if(a.test(e)){let n=r[e];const i=p,o=p;let u=!1,l=null;const f=p;if(p==p)if(n&&"object"==typeof n&&!Array.isArray(n)){let r;if(void 0===n.type&&(r="type")||void 0===n.protocol&&(r="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===d?d=[n]:d.push(n),p++}else{const r=p;for(const r in n)if("type"!==r&&"protocol"!==r&&"txt"!==r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===d?d=[n]:d.push(n),p++;break}if(r===p){if(void 0!==n.type){const r=p;if("string"!=typeof n.type){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}var w=r===p}else w=!0;if(w){if(void 0!==n.protocol){let r=n.protocol;const i=p;if("string"!=typeof r){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}if("tcp"!==r&&"udp"!==r){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:s.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[r]:d.push(r),p++}w=i===p}else w=!0;if(w)if(void 0!==n.txt){let r=n.txt;const s=p;if(p===s)if(r&&"object"==typeof r&&!Array.isArray(r)){const n=p;for(const n in r)if(!a.test(n)){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===d?d=[r]:d.push(r),p++;break}if(n===p)for(const n in r)if(a.test(n)){const s=p;if("string"!=typeof r[n]){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}if(s!==p)break}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[r]:d.push(r),p++}w=s===p}else w=!0}}}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[r]:d.push(r),p++}f===p&&(u=!0,l=0);const h=p;if(p===h)if(Array.isArray(n)){const r=n.length;for(let i=0;i<r;i++){let r=n[i];const o=p;if(p==p)if(r&&"object"==typeof r&&!Array.isArray(r)){let n;if(void 0===r.type&&(n="type")||void 0===r.protocol&&(n="protocol")){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===d?d=[r]:d.push(r),p++}else{const n=p;for(const n in r)if("type"!==n&&"protocol"!==n&&"txt"!==n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===d?d=[r]:d.push(r),p++;break}if(n===p){if(void 0!==r.type){const n=p;if("string"!=typeof r.type){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}var S=n===p}else S=!0;if(S){if(void 0!==r.protocol){let n=r.protocol;const o=p;if("string"!=typeof n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}if("tcp"!==n&&"udp"!==n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:s.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[r]:d.push(r),p++}S=o===p}else S=!0;if(S)if(void 0!==r.txt){let n=r.txt;const s=p;if(p===s)if(n&&"object"==typeof n&&!Array.isArray(n)){const r=p;for(const r in n)if(!a.test(r)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===d?d=[n]:d.push(n),p++;break}if(r===p)for(const r in n)if(a.test(r)){const s=p;if("string"!=typeof n[r]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/txt/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if(s!==p)break}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[r]:d.push(r),p++}S=s===p}else S=!0}}}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[r]:d.push(r),p++}if(o!==p)break}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===d?d=[r]:d.push(r),p++}var I;if((I=h===p)&&u?(u=!1,l=[l,1]):I&&(u=!0,l=1),!u){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return null===d?d=[r]:d.push(r),p++,c.errors=d,!1}if(p=o,null!==d&&(o?d.length=o:d=null),i!==p)break}}}f=n===p}else f=!0}}}}}}}}}}}}}}}}}}return c.errors=d,0===p}},7e3:(e,t,r)=>{"use strict";const n=r(4865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:r=0,maxWait:s=0,before:i=!1,after:o=!0}=t;if(!i&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,u;const l=function(...t){const n=this,l=i&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),o&&(u=e.apply(n,t))}),r),s>0&&!c&&o&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),u=e.apply(n,t)}),s)),l&&(u=e.apply(n,t)),u};return n(l,e),l.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},l}},1635:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>$,__assign:()=>i,__asyncDelegator:()=>k,__asyncGenerator:()=>_,__asyncValues:()=>A,__await:()=>E,__awaiter:()=>h,__classPrivateFieldGet:()=>N,__classPrivateFieldIn:()=>j,__classPrivateFieldSet:()=>R,__createBinding:()=>m,__decorate:()=>a,__disposeResources:()=>M,__esDecorate:()=>u,__exportStar:()=>y,__extends:()=>s,__generator:()=>g,__importDefault:()=>T,__importStar:()=>C,__makeTemplateObject:()=>x,__metadata:()=>f,__param:()=>c,__propKey:()=>d,__read:()=>v,__rest:()=>o,__rewriteRelativeImportExtension:()=>F,__runInitializers:()=>l,__setFunctionName:()=>p,__spread:()=>w,__spreadArray:()=>I,__spreadArrays:()=>S,__values:()=>b,default:()=>V});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function a(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,s,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var m=(0,r[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(d.get=a),(a=o(m.set))&&(d.set=a),(a=o(m.init))&&s.unshift(a)}else(a=o(m))&&("field"===c?s.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0}function l(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function g(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var m=Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function y(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||m(t,e,r)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function S(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function I(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{(r=s[e](t)).value instanceof E?Promise.resolve(r.value.v).then(c,u):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function k(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:E(e[n](t)),done:!1}:s?s(t):t}:s}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=b(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,s){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,s,(t=e[r](t)).done,t.value)}))}}}function x(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},O=function(e){return O=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},O(e)};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=O(e),n=0;n<r.length;n++)"default"!==r[n]&&m(t,e,r[n]);return P(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function N(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function R(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r}function j(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function $(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var D="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function M(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function s(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,(function(e){return t(e),s()}))}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function F(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,r,n,s,i){return r?t?".jsx":".js":!n||s&&i?n+s+"."+i.toLowerCase()+"js":e})):e}const V={__extends:s,__assign:i,__rest:o,__decorate:a,__param:c,__esDecorate:u,__runInitializers:l,__propKey:d,__setFunctionName:p,__metadata:f,__awaiter:h,__generator:g,__createBinding:m,__exportStar:y,__values:b,__read:v,__spread:w,__spreadArrays:S,__spreadArray:I,__await:E,__asyncGenerator:_,__asyncDelegator:k,__asyncValues:A,__makeTemplateObject:x,__importStar:C,__importDefault:T,__classPrivateFieldGet:N,__classPrivateFieldSet:R,__classPrivateFieldIn:j,__addDisposableResource:$,__disposeResources:M,__rewriteRelativeImportExtension:F}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".js",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={792:1},n.f.require=(t,r)=>{e[t]||(t=>{var r=t.modules,s=t.ids,i=t.runtime;for(var o in r)n.o(r,o)&&(n.m[o]=r[o]);i&&i(n);for(var a=0;a<s.length;a++)e[s[a]]=1})(require("./"+n.u(t)))},(()=>{"use strict";var e=n(6278),t=n(9389),r=n(1208),s=n(1248);const i={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var o=n(5469),a=n(5479);class c extends s.TJ{constructor(e){super(e),Object.setPrototypeOf(this,c.prototype)}}const u=async(e,t)=>{const r=ee;let n;return n=to({...b(e,t),[re]:je,[tn]:te}),X(t,r,"/",void 0,n)},l=async(e,t)=>{const r=ee;let n;return n=to({...I(e,t),[re]:xr,[tn]:te}),X(t,r,"/",void 0,n)},d=async(e,t)=>{const r=ee;let n;return n=to({...E(e,t),[re]:$r,[tn]:te}),X(t,r,"/",void 0,n)},p=async(e,t)=>{const r=ee;let n;return n=to({..._(e,t),[re]:Mr,[tn]:te}),X(t,r,"/",void 0,n)},f=async(e,t)=>{if(e.statusCode>=300)return y(e,t);const r=await(0,o.t_)(e.body,t);let n={};return n=A(r,t),{$metadata:Y(e),...n}},h=async(e,t)=>e.statusCode>=300?y(e,t):(await(0,s.Px)(e.body,t),{$metadata:Y(e)}),g=async(e,t)=>{if(e.statusCode>=300)return y(e,t);const r=await(0,o.t_)(e.body,t);let n={};return n=z(r,t),{$metadata:Y(e),...n}},m=async(e,t)=>{if(e.statusCode>=300)return y(e,t);const r=await(0,o.t_)(e.body,t);let n={};return n=J(r,t),{$metadata:Y(e),...n}},y=async(e,t)=>{const r={...e,body:await(0,o.FI)(e.body,t)},n=ro(e,r.body),s=r.body;return Z({output:e,parsedBody:s.Errors.Error,errorCode:n})},b=(e,t)=>{const r={};if(null!=e[xt]){const n=S(e[xt],t);Object.entries(n).forEach((([e,t])=>{const n=`InstanceId.${e.substring(e.indexOf(".")+1)}`;r[n]=t}))}if(null!=e[Fe]&&(r[Fe]=e[Fe]),null!=e[ct]){const n=w(e[ct],t);Object.entries(n).forEach((([e,t])=>{const n=`Filter.${e.substring(e.indexOf(".")+1)}`;r[n]=t}))}return null!=e[sr]&&(r[sr]=e[sr]),null!=e[Jt]&&(r[Jt]=e[Jt]),r},v=(e,t)=>{const r={};if(null!=e[Xt]&&(r[Xt]=e[Xt]),null!=e[cn]){const n=k(e[cn],t);Object.entries(n).forEach((([e,t])=>{const n=`Value.${e.substring(e.indexOf(".")+1)}`;r[n]=t}))}return r},w=(e,t)=>{const r={};let n=1;for(const s of e){if(null===s)continue;const e=v(s,t);Object.entries(e).forEach((([e,t])=>{r[`Filter.${n}.${e}`]=t})),n++}return r},S=(e,t)=>{const r={};let n=1;for(const t of e)null!==t&&(r[`InstanceId.${n}`]=t,n++);return r},I=(e,t)=>{const r={};if(null!=e[xt]){const n=S(e[xt],t);Object.entries(n).forEach((([e,t])=>{const n=`InstanceId.${e.substring(e.indexOf(".")+1)}`;r[n]=t}))}return null!=e[Fe]&&(r[Fe]=e[Fe]),r},E=(e,t)=>{const r={};if(null!=e[xt]){const n=S(e[xt],t);Object.entries(n).forEach((([e,t])=>{const n=`InstanceId.${e.substring(e.indexOf(".")+1)}`;r[n]=t}))}return null!=e[ne]&&(r[ne]=e[ne]),null!=e[Fe]&&(r[Fe]=e[Fe]),r},_=(e,t)=>{const r={};if(null!=e[xt]){const n=S(e[xt],t);Object.entries(n).forEach((([e,t])=>{const n=`InstanceId.${e.substring(e.indexOf(".")+1)}`;r[n]=t}))}return null!=e[St]&&(r[St]=e[St]),null!=e[Fe]&&(r[Fe]=e[Fe]),null!=e[at]&&(r[at]=e[at]),r},k=(e,t)=>{const r={};let n=1;for(const t of e)null!==t&&(r[`Item.${n}`]=t,n++);return r},A=(e,t)=>{const r={};return null!=e[oi]&&(r[sr]=(0,s.lK)(e[oi])),""===e.reservationSet?r[Tr]=[]:null!=e[Ci]&&null!=e[Ci][Es]&&(r[Tr]=K((0,s.Yd)(e[Ci][Es]),t)),r},x=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[ds]&&(t[lt]=(0,s.lK)(e[ds])),null!=e[ps]&&(t[dt]=(0,s.lK)(e[ps])),t})(e))),P=(e,t)=>{const r={};return null!=e[bn]&&(r[fe]=(0,s.lK)(e[bn])),""===e.blockDeviceMapping?r[me]=[]:null!=e[Sn]&&null!=e[Sn][Es]&&(r[me]=O((0,s.Yd)(e[Sn][Es]),t)),null!=e[$n]&&(r[Te]=(0,s.lK)(e[$n])),null!=e[es]&&(r[Ye]=(0,s.yG)(e[es])),null!=e[cs]&&(r[it]=(0,s.yG)(e[cs])),null!=e[hs]&&(r[pt]=(0,s.lK)(e[hs])),null!=e[Ps]&&(r[_t]=(e=>{const t={};return null!=e[yn]&&(t[pe]=(0,s.lK)(e[yn])),null!=e[Ls]&&(t[Ft]=(0,s.lK)(e[Ls])),t})(e[Ps])),null!=e[Cs]&&(r[Pt]=(0,s.lK)(e[Cs])),""===e.elasticGpuAssociationSet?r[qe]=[]:null!=e[Kn]&&null!=e[Kn][Es]&&(r[qe]=(e=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[Gn]&&(t[We]=(0,s.lK)(e[Gn])),null!=e[Hn]&&(t[Le]=(0,s.lK)(e[Hn])),null!=e[Wn]&&(t[Be]=(0,s.lK)(e[Wn])),null!=e[zn]&&(t[He]=(0,s.lK)(e[zn])),t})(e))))((0,s.Yd)(e[Kn][Es]))),""===e.elasticInferenceAcceleratorAssociationSet?r[Qe]=[]:null!=e[Zn]&&null!=e[Zn][Es]&&(r[Qe]=(e=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[Jn]&&(t[Ke]=(0,s.lK)(e[Jn])),null!=e[Qn]&&(t[ze]=(0,s.lK)(e[Qn])),null!=e[Yn]&&(t[Ge]=(0,s.lK)(e[Yn])),null!=e[Xn]&&(t[Je]=(0,s.Y0)((0,s.t_)(e[Xn]))),t})(e))))((0,s.Yd)(e[Zn][Es]))),""===e.networkInterfaceSet?r[tr]=[]:null!=e[si]&&null!=e[si][Es]&&(r[tr]=$((0,s.Yd)(e[si][Es]),t)),null!=e[ai]&&(r[or]=(0,s.lK)(e[ai])),null!=e[ki]&&(r[kr]=(0,s.lK)(e[ki])),null!=e[Ai]&&(r[Ar]=(0,s.lK)(e[Ai])),""===e.groupSet?r[jr]=[]:null!=e[fs]&&null!=e[fs][Es]&&(r[jr]=x((0,s.Yd)(e[fs][Es]))),null!=e[Ni]&&(r[Nr]=(0,s.yG)(e[Ni])),null!=e[ji]&&(r[Dr]=(0,s.lK)(e[ji])),null!=e[Di]&&(r[qr]=(0,s.lK)(e[Di])),null!=e[Mi]&&(r[Lr]=G(e[Mi],t)),""===e.tagSet?r[Jr]=[]:null!=e[Bi]&&null!=e[Bi][Es]&&(r[Jr]=Q((0,s.Yd)(e[Bi][Es]),t)),null!=e[eo]&&(r[on]=(0,s.lK)(e[eo])),null!=e[xn]&&(r[Ee]=(e=>{const t={};return null!=e[_n]&&(t[ve]=(0,s.xW)(e[_n])),null!=e[Li]&&(t[zr]=(0,s.xW)(e[Li])),null!=e[fn]&&(t[ce]=(0,s.lK)(e[fn])),t})(e[xn])),null!=e[On]&&(r[_e]=(0,s.lK)(e[On])),null!=e[Nn]&&(r[xe]=(e=>{const t={};return null!=e[Cn]&&(t[ke]=(0,s.lK)(e[Cn])),null!=e[Rn]&&(t[Pe]=(e=>{const t={};return null!=e[On]&&(t[_e]=(0,s.lK)(e[On])),null!=e[Tn]&&(t[Ae]=(0,s.lK)(e[Tn])),t})(e[Rn])),t})(e[Nn])),null!=e[ys]&&(r[gt]=(e=>{const t={};return null!=e[Fn]&&(t[Re]=(0,s.yG)(e[Fn])),t})(e[ys])),""===e.licenseSet?r[Wt]=[]:null!=e[zs]&&null!=e[zs][Es]&&(r[Wt]=U((0,s.Yd)(e[zs][Es]),t)),null!=e[Qs]&&(r[zt]=T(e[Qs],t)),null!=e[ts]&&(r[Ze]=(e=>{const t={};return null!=e[ls]&&(t[ot]=(0,s.yG)(e[ls])),t})(e[ts])),null!=e[In]&&(r[ye]=(0,s.lK)(e[In])),null!=e[mi]&&(r[hr]=(0,s.lK)(e[mi])),null!=e[Ki]&&(r[Yr]=(0,s.lK)(e[Ki])),null!=e[zi]&&(r[Zr]=(0,s.Y0)((0,s.t_)(e[zi]))),null!=e[hi]&&(r[pr]=H(e[hi],t)),null!=e[As]&&(r[Et]=(0,s.lK)(e[As])),null!=e[Hi]&&(r[Gr]=(0,s.lK)(e[Hi])),null!=e[Ys]&&(r[Gt]=C(e[Ys],t)),null!=e[An]&&(r[we]=(0,s.lK)(e[An])),null!=e[ii]&&(r[nr]=D(e[ii],t)),null!=e[ui]&&(r[ir]=L(e[ui],t)),null!=e[xs]&&(r[At]=(0,s.lK)(e[xs])),null!=e[Os]&&(r[kt]=(0,s.lK)(e[Os])),null!=e[Vs]&&(r[Hr]=F(e[Vs],t)),null!=e[fi]&&(r[dr]=(0,s.lK)(e[fi])),null!=e[qn]&&(r[fr]=(0,s.lK)(e[qn])),null!=e[Ti]&&(r[Br]=(0,s.lK)(e[Ti])),null!=e[Ws]&&(r[qt]=(0,s.lK)(e[Ws])),null!=e[ln]&&(r[ie]=(0,s.xW)(e[ln])),""===e.productCodes?r[lr]=[]:null!=e[di]&&null!=e[di][Es]&&(r[lr]=W((0,s.Yd)(e[di][Es]),t)),null!=e[Us]&&(r[Dt]=(0,s.lK)(e[Us])),null!=e[Gs]&&(r[Ht]=(0,s.Y0)((0,s.t_)(e[Gs]))),null!=e[Ei]&&(r[Sr]=B(e[Ei],t)),null!=e[Hs]&&(r[Ut]=(0,s.lK)(e[Hs])),null!=e[xi]&&(r[Pr]=(0,s.lK)(e[xi])),null!=e[Ii]&&(r[Ir]=(0,s.lK)(e[Ii])),null!=e[ei]&&(r[Zt]=q(e[ei],t)),null!=e[$i]&&(r[Ur]=(0,s.lK)(e[$i])),null!=e[Yi]&&(r[rn]=(0,s.lK)(e[Yi])),null!=e[bi]&&(r[yr]=(0,s.lK)(e[bi])),null!=e[ks]&&(r[br]=(0,s.lK)(e[ks])),r},O=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const r={};return null!=e[Un]&&(r[De]=(0,s.lK)(e[Un])),null!=e[us]&&(r[Ue]=((e,t)=>{const r={};return null!=e[hn]&&(r[ue]=(0,s.Y0)((0,s.t_)(e[hn]))),null!=e[Ln]&&(r[Me]=(0,s.yG)(e[Ln])),null!=e[Vi]&&(r[Wr]=(0,s.lK)(e[Vi])),null!=e[Zi]&&(r[nn]=(0,s.lK)(e[Zi])),null!=e[dn]&&(r[oe]=(0,s.lK)(e[dn])),null!=e[Xi]&&(r[sn]=(0,s.lK)(e[Xi])),null!=e[ui]&&(r[ir]=L(e[ui],t)),r})(e[us],t)),r})(e,t))),C=(e,t)=>{const r={};return null!=e[pn]&&(r[ae]=(0,s.lK)(e[pn])),r},T=(e,t)=>{const r={};return null!=e[Fi]&&(r[Hr]=(0,s.lK)(e[Fi])),null!=e[Ss]&&(r[vt]=(0,s.lK)(e[Ss])),null!=e[vs]&&(r[yt]=(0,s.xW)(e[vs])),null!=e[gs]&&(r[ft]=(0,s.lK)(e[gs])),null!=e[bs]&&(r[mt]=(0,s.lK)(e[bs])),null!=e[Ts]&&(r[Ot]=(0,s.lK)(e[Ts])),r},N=(e,t)=>{const r={};return null!=e[vn]&&(r[he]=R(e[vn],t)),null!=e[wn]&&(r[ge]=j(e[wn],t)),null!=e[Bn]&&(r[Ve]=(0,s.lK)(e[Bn])),""===e.groupSet?r[ut]=[]:null!=e[fs]&&null!=e[fs][Es]&&(r[ut]=x((0,s.Yd)(e[fs][Es]))),""===e.ipv6AddressesSet?r[It]=[]:null!=e[_s]&&null!=e[_s][Es]&&(r[It]=(e=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[As]&&(t[Et]=(0,s.lK)(e[As])),null!=e[Rs]&&(t[Nt]=(0,s.yG)(e[Rs])),t})(e))))((0,s.Yd)(e[_s][Es]))),null!=e[Js]&&(r[Kt]=(0,s.lK)(e[Js])),null!=e[ni]&&(r[rr]=(0,s.lK)(e[ni])),null!=e[ci]&&(r[ar]=(0,s.lK)(e[ci])),null!=e[fi]&&(r[dr]=(0,s.lK)(e[fi])),null!=e[bi]&&(r[yr]=(0,s.lK)(e[bi])),""===e.privateIpAddressesSet?r[mr]=[]:null!=e[vi]&&null!=e[vi][Es]&&(r[mr]=M((0,s.Yd)(e[vi][Es]),t)),null!=e[Ni]&&(r[Nr]=(0,s.yG)(e[Ni])),null!=e[Vi]&&(r[Wr]=(0,s.lK)(e[Vi])),null!=e[$i]&&(r[Ur]=(0,s.lK)(e[$i])),null!=e[Yi]&&(r[rn]=(0,s.lK)(e[Yi])),null!=e[qs]&&(r[Mt]=(0,s.lK)(e[qs])),""===e.ipv4PrefixSet?r[Rt]=[]:null!=e[js]&&null!=e[js][Es]&&(r[Rt]=(e=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[Ds]&&(t[jt]=(0,s.lK)(e[Ds])),t})(e))))((0,s.Yd)(e[js][Es]))),""===e.ipv6PrefixSet?r[Tt]=[]:null!=e[$s]&&null!=e[$s][Es]&&(r[Tt]=(e=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[Ms]&&(t[$t]=(0,s.lK)(e[Ms])),t})(e))))((0,s.Yd)(e[$s][Es]))),null!=e[Dn]&&(r[Ce]=(e=>{const t={};return null!=e[qi]&&(t[Kr]=(0,s.xW)(e[qi])),null!=e[Gi]&&(t[Xr]=(0,s.xW)(e[Gi])),null!=e[Ji]&&(t[en]=(0,s.xW)(e[Ji])),t})(e[Dn])),null!=e[ui]&&(r[ir]=L(e[ui],t)),r},R=(e,t)=>{const r={};return null!=e[kn]&&(r[Se]=(0,s.lK)(e[kn])),null!=e[Pn]&&(r[Ie]=(0,s.lK)(e[Pn])),null!=e[Ns]&&(r[Ct]=(0,s.lK)(e[Ns])),null!=e[gi]&&(r[fr]=(0,s.lK)(e[gi])),null!=e[yi]&&(r[gr]=(0,s.lK)(e[yi])),r},j=(e,t)=>{const r={};return null!=e[hn]&&(r[ue]=(0,s.Y0)((0,s.t_)(e[hn]))),null!=e[un]&&(r[se]=(0,s.lK)(e[un])),null!=e[Ln]&&(r[Me]=(0,s.yG)(e[Ln])),null!=e[Vn]&&(r[$e]=(0,s.xW)(e[Vn])),null!=e[Vi]&&(r[Wr]=(0,s.lK)(e[Vi])),null!=e[ri]&&(r[er]=(0,s.xW)(e[ri])),null!=e[is]&&(r[rt]=(e=>{const t={};return null!=e[ss]&&(t[tt]=(0,s.yG)(e[ss])),null!=e[as]&&(t[st]=(e=>{const t={};return null!=e[os]&&(t[nt]=(0,s.yG)(e[os])),t})(e[as])),t})(e[is])),r},$=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>N(e,t))),D=(e,t)=>{const r={};return null!=e[En]&&(r[be]=(0,s.lK)(e[En])),r},M=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const r={};return null!=e[vn]&&(r[he]=R(e[vn],t)),null!=e[_i]&&(r[Er]=(0,s.yG)(e[_i])),null!=e[fi]&&(r[dr]=(0,s.lK)(e[fi])),null!=e[bi]&&(r[yr]=(0,s.lK)(e[bi])),r})(e,t))),F=(e,t)=>{const r={};return null!=e[Mn]&&(r[Ne]=(0,s.xW)(e[Mn])),null!=e[ti]&&(r[Xt]=(0,s.lK)(e[ti])),r},V=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const r={};return null!=e[xs]&&(r[At]=(0,s.lK)(e[xs])),null!=e[jn]&&(r[Oe]=F(e[jn],t)),null!=e[Si]&&(r[wr]=F(e[Si],t)),r})(e,t))),U=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[Ks]&&(t[Bt]=(0,s.lK)(e[Ks])),t})(e))),q=(e,t)=>{const r={};return null!=e[Fi]&&(r[Hr]=(0,s.lK)(e[Fi])),r},L=(e,t)=>{const r={};return null!=e[Zs]&&(r[Qt]=(0,s.yG)(e[Zs])),null!=e[li]&&(r[_r]=(0,s.lK)(e[li])),r},B=(e,t)=>{const r={};return null!=e[mn]&&(r[de]=(0,s.lK)(e[mn])),null!=e[ps]&&(r[dt]=(0,s.lK)(e[ps])),null!=e[wi]&&(r[vr]=(0,s.xW)(e[wi])),null!=e[ms]&&(r[ht]=(0,s.lK)(e[ms])),null!=e[Ui]&&(r[Qr]=(0,s.lK)(e[Ui])),null!=e[Ri]&&(r[Rr]=(0,s.lK)(e[Ri])),null!=e[ws]&&(r[bt]=(0,s.lK)(e[ws])),null!=e[ds]&&(r[lt]=(0,s.lK)(e[ds])),null!=e[gn]&&(r[le]=(0,s.lK)(e[gn])),r},H=(e,t)=>{const r={};return null!=e[Is]&&(r[wt]=(0,s.lK)(e[Is])),null!=e[ns]&&(r[et]=(0,s.yG)(e[ns])),null!=e[rs]&&(r[Xe]=(0,s.yG)(e[rs])),r},W=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[pi]&&(t[cr]=(0,s.lK)(e[pi])),null!=e[Wi]&&(t[ur]=(0,s.lK)(e[Wi])),t})(e))),K=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>{const r={};return null!=e[Oi]&&(r[Cr]=(0,s.lK)(e[Oi])),null!=e[ci]&&(r[ar]=(0,s.lK)(e[ci])),null!=e[Pi]&&(r[Or]=(0,s.lK)(e[Pi])),""===e.groupSet?r[ut]=[]:null!=e[fs]&&null!=e[fs][Es]&&(r[ut]=x((0,s.Yd)(e[fs][Es]))),""===e.instancesSet?r[Vt]=[]:null!=e[Fs]&&null!=e[Fs][Es]&&(r[Vt]=((e,t)=>(e||[]).filter((e=>null!=e)).map((e=>P(e,t))))((0,s.Yd)(e[Fs][Es]),t)),r})(e,t))),z=(e,t)=>{const r={};return""===e.instancesSet?r[Fr]=[]:null!=e[Fs]&&null!=e[Fs][Es]&&(r[Fr]=V((0,s.Yd)(e[Fs][Es]),t)),r},G=(e,t)=>{const r={};return null!=e[Mn]&&(r[Ne]=(0,s.lK)(e[Mn])),null!=e[Xs]&&(r[Yt]=(0,s.lK)(e[Xs])),r},J=(e,t)=>{const r={};return""===e.instancesSet?r[Vr]=[]:null!=e[Fs]&&null!=e[Fs][Es]&&(r[Vr]=V((0,s.Yd)(e[Fs][Es]),t)),r},Q=(e,t)=>(e||[]).filter((e=>null!=e)).map((e=>(e=>{const t={};return null!=e[Bs]&&(t[Lt]=(0,s.lK)(e[Bs])),null!=e[Qi]&&(t[an]=(0,s.lK)(e[Qi])),t})(e))),Y=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Z=(0,s.jr)(c),X=async(e,t,r,n,s)=>{const{hostname:i,protocol:o="https",port:c,path:u}=await e.endpoint(),l={protocol:o,hostname:i,port:c,method:"POST",path:u.endsWith("/")?u.slice(0,-1)+r:u+r,headers:t};return void 0!==n&&(l.hostname=n),void 0!==s&&(l.body=s),new a.Kd(l)},ee={"content-type":"application/x-www-form-urlencoded"},te="2016-11-15",re="Action",ne="AdditionalInfo",se="AttachmentId",ie="AmiLaunchIndex",oe="AssociatedResource",ae="AutoRecovery",ce="AmdSevSnp",ue="AttachTime",le="AvailabilityZone",de="Affinity",pe="Arn",fe="Architecture",he="Association",ge="Attachment",me="BlockDeviceMappings",ye="BootMode",be="BandwidthWeighting",ve="CoreCount",we="CurrentInstanceBootMode",Se="CarrierIp",Ie="CustomerOwnedIp",Ee="CpuOptions",_e="CapacityReservationId",ke="CapacityReservationPreference",Ae="CapacityReservationResourceGroupArn",xe="CapacityReservationSpecification",Pe="CapacityReservationTarget",Oe="CurrentState",Ce="ConnectionTrackingConfiguration",Te="ClientToken",Ne="Code",Re="Configured",je="DescribeInstances",$e="DeviceIndex",De="DeviceName",Me="DeleteOnTermination",Fe="DryRun",Ve="Description",Ue="Ebs",qe="ElasticGpuAssociations",Le="ElasticGpuAssociationId",Be="ElasticGpuAssociationState",He="ElasticGpuAssociationTime",We="ElasticGpuId",Ke="ElasticInferenceAcceleratorArn",ze="ElasticInferenceAcceleratorAssociationId",Ge="ElasticInferenceAcceleratorAssociationState",Je="ElasticInferenceAcceleratorAssociationTime",Qe="ElasticInferenceAcceleratorAssociations",Ye="EbsOptimized",Ze="EnclaveOptions",Xe="EnableResourceNameDnsAAAARecord",et="EnableResourceNameDnsARecord",tt="EnaSrdEnabled",rt="EnaSrdSpecification",nt="EnaSrdUdpEnabled",st="EnaSrdUdpSpecification",it="EnaSupport",ot="Enabled",at="Force",ct="Filters",ut="Groups",lt="GroupId",dt="GroupName",pt="Hypervisor",ft="HttpEndpoint",ht="HostId",gt="HibernationOptions",mt="HttpProtocolIpv6",yt="HttpPutResponseHopLimit",bt="HostResourceGroupArn",vt="HttpTokens",wt="HostnameType",St="Hibernate",It="Ipv6Addresses",Et="Ipv6Address",_t="IamInstanceProfile",kt="ImageId",At="InstanceId",xt="InstanceIds",Pt="InstanceLifecycle",Ot="InstanceMetadataTags",Ct="IpOwnerId",Tt="Ipv6Prefixes",Nt="IsPrimaryIpv6",Rt="Ipv4Prefixes",jt="Ipv4Prefix",$t="Ipv6Prefix",Dt="InstanceType",Mt="InterfaceType",Ft="Id",Vt="Instances",Ut="KernelId",qt="KeyName",Lt="Key",Bt="LicenseConfigurationArn",Ht="LaunchTime",Wt="Licenses",Kt="MacAddress",zt="MetadataOptions",Gt="MaintenanceOptions",Jt="MaxResults",Qt="Managed",Yt="Message",Zt="Monitoring",Xt="Name",er="NetworkCardIndex",tr="NetworkInterfaces",rr="NetworkInterfaceId",nr="NetworkPerformanceOptions",sr="NextToken",ir="Operator",or="OutpostArn",ar="OwnerId",cr="ProductCodeId",ur="ProductCodeType",lr="ProductCodes",dr="PrivateDnsName",pr="PrivateDnsNameOptions",fr="PublicDnsName",hr="PlatformDetails",gr="PublicIp",mr="PrivateIpAddresses",yr="PrivateIpAddress",br="PublicIpAddress",vr="PartitionNumber",wr="PreviousState",Sr="Placement",Ir="Platform",Er="Primary",_r="Principal",kr="RootDeviceName",Ar="RootDeviceType",xr="RebootInstances",Pr="RamdiskId",Or="RequesterId",Cr="ReservationId",Tr="Reservations",Nr="SourceDestCheck",Rr="SpreadDomain",jr="SecurityGroups",$r="StartInstances",Dr="SpotInstanceRequestId",Mr="StopInstances",Fr="StartingInstances",Vr="StoppingInstances",Ur="SubnetId",qr="SriovNetSupport",Lr="StateReason",Br="StateTransitionReason",Hr="State",Wr="Status",Kr="TcpEstablishedTimeout",zr="ThreadsPerCore",Gr="TpmSupport",Jr="Tags",Qr="Tenancy",Yr="UsageOperation",Zr="UsageOperationUpdateTime",Xr="UdpStreamTimeout",en="UdpTimeout",tn="Version",rn="VpcId",nn="VolumeId",sn="VolumeOwnerId",on="VirtualizationType",an="Value",cn="Values",un="attachmentId",ln="amiLaunchIndex",dn="associatedResource",pn="autoRecovery",fn="amdSevSnp",hn="attachTime",gn="availabilityZone",mn="affinity",yn="arn",bn="architecture",vn="association",wn="attachment",Sn="blockDeviceMapping",In="bootMode",En="bandwidthWeighting",_n="coreCount",kn="carrierIp",An="currentInstanceBootMode",xn="cpuOptions",Pn="customerOwnedIp",On="capacityReservationId",Cn="capacityReservationPreference",Tn="capacityReservationResourceGroupArn",Nn="capacityReservationSpecification",Rn="capacityReservationTarget",jn="currentState",$n="clientToken",Dn="connectionTrackingConfiguration",Mn="code",Fn="configured",Vn="deviceIndex",Un="deviceName",qn="dnsName",Ln="deleteOnTermination",Bn="description",Hn="elasticGpuAssociationId",Wn="elasticGpuAssociationState",Kn="elasticGpuAssociationSet",zn="elasticGpuAssociationTime",Gn="elasticGpuId",Jn="elasticInferenceAcceleratorArn",Qn="elasticInferenceAcceleratorAssociationId",Yn="elasticInferenceAcceleratorAssociationState",Zn="elasticInferenceAcceleratorAssociationSet",Xn="elasticInferenceAcceleratorAssociationTime",es="ebsOptimized",ts="enclaveOptions",rs="enableResourceNameDnsAAAARecord",ns="enableResourceNameDnsARecord",ss="enaSrdEnabled",is="enaSrdSpecification",os="enaSrdUdpEnabled",as="enaSrdUdpSpecification",cs="enaSupport",us="ebs",ls="enabled",ds="groupId",ps="groupName",fs="groupSet",hs="hypervisor",gs="httpEndpoint",ms="hostId",ys="hibernationOptions",bs="httpProtocolIpv6",vs="httpPutResponseHopLimit",ws="hostResourceGroupArn",Ss="httpTokens",Is="hostnameType",Es="item",_s="ipv6AddressesSet",ks="ipAddress",As="ipv6Address",xs="instanceId",Ps="iamInstanceProfile",Os="imageId",Cs="instanceLifecycle",Ts="instanceMetadataTags",Ns="ipOwnerId",Rs="isPrimaryIpv6",js="ipv4PrefixSet",$s="ipv6PrefixSet",Ds="ipv4Prefix",Ms="ipv6Prefix",Fs="instancesSet",Vs="instanceState",Us="instanceType",qs="interfaceType",Ls="id",Bs="key",Hs="kernelId",Ws="keyName",Ks="licenseConfigurationArn",zs="licenseSet",Gs="launchTime",Js="macAddress",Qs="metadataOptions",Ys="maintenanceOptions",Zs="managed",Xs="message",ei="monitoring",ti="name",ri="networkCardIndex",ni="networkInterfaceId",si="networkInterfaceSet",ii="networkPerformanceOptions",oi="nextToken",ai="outpostArn",ci="ownerId",ui="operator",li="principal",di="productCodes",pi="productCode",fi="privateDnsName",hi="privateDnsNameOptions",gi="publicDnsName",mi="platformDetails",yi="publicIp",bi="privateIpAddress",vi="privateIpAddressesSet",wi="partitionNumber",Si="previousState",Ii="platform",Ei="placement",_i="primary",ki="rootDeviceName",Ai="rootDeviceType",xi="ramdiskId",Pi="requesterId",Oi="reservationId",Ci="reservationSet",Ti="reason",Ni="sourceDestCheck",Ri="spreadDomain",ji="spotInstanceRequestId",$i="subnetId",Di="sriovNetSupport",Mi="stateReason",Fi="state",Vi="status",Ui="tenancy",qi="tcpEstablishedTimeout",Li="threadsPerCore",Bi="tagSet",Hi="tpmSupport",Wi="type",Ki="usageOperation",zi="usageOperationUpdateTime",Gi="udpStreamTimeout",Ji="udpTimeout",Qi="value",Yi="vpcId",Zi="volumeId",Xi="volumeOwnerId",eo="virtualizationType",to=e=>Object.entries(e).map((([e,t])=>(0,s.$6)(e)+"="+(0,s.$6)(t))).join("&"),ro=(e,t)=>void 0!==t.Errors.Error?.Code?t.Errors.Error.Code:404==e.statusCode?"NotFound":void 0;class no extends(s.uB.classBuilder().ep(i).m((function(e,n,s,i){return[(0,r.TM)(s,this.serialize,this.deserialize),(0,t.rD)(s,e.getEndpointParameterInstructions())]})).s("AmazonEC2","StartInstances",{}).n("EC2Client","StartInstancesCommand").f(void 0,void 0).ser(d).de(g).build()){}class so extends(s.uB.classBuilder().ep(i).m((function(e,n,s,i){return[(0,r.TM)(s,this.serialize,this.deserialize),(0,t.rD)(s,e.getEndpointParameterInstructions())]})).s("AmazonEC2","StopInstances",{}).n("EC2Client","StopInstancesCommand").f(void 0,void 0).ser(p).de(m).build()){}class io extends(s.uB.classBuilder().ep(i).m((function(e,n,s,i){return[(0,r.TM)(s,this.serialize,this.deserialize),(0,t.rD)(s,e.getEndpointParameterInstructions())]})).s("AmazonEC2","RebootInstances",{}).n("EC2Client","RebootInstancesCommand").f(void 0,void 0).ser(l).de(h).build()){}function oo(e){return{start_stop_instance:{name:"Start/Stop/Reboot EC2 Instance",description:"Start, stop or reboot an existing EC2 Instance",options:[{type:"dropdown",id:"instanceId",label:"Select EC2 Instance",choices:function(){const t=[];for(const r in e.instances){const n=e.instances[r];t.push({id:r,label:`${n.name} (${r})`})}return t}()},{type:"dropdown",id:"operation",label:"Operation",default:"start",choices:[{id:"start",label:"Start Instance"},{id:"stop",label:"Stop Instance"},{id:"reboot",label:"Reboot Instance"},{id:"forcestop",label:"Force Stop Instance"}]}],callback:async t=>{const r=t.options.operation,n=t.options.instanceId;"start"===r?await e.ec2Client.send(new no({InstanceIds:[n]})):"stop"===r?await e.ec2Client.send(new so({InstanceIds:[n]})):"reboot"===r?await e.ec2Client.send(new io({InstanceIds:[n]})):"forcestop"===r&&await e.ec2Client.send(new so({InstanceIds:[n]},{Force:!0}))}}}}const ao=[{type:"static-text",id:"info",width:12,label:"Warning",value:"Please be aware, that the AWS credentials will be stored in plain text and are available to everyone accessing this computer. Make sure to use a dedicated IAM user with the least amount of privileges."},{type:"textinput",id:"accessKeyId",label:"Access Key ID",tooltip:"Enter the Access Key ID you've created for the Companion user in the IAM.",width:12},{type:"textinput",id:"secretAccessKey",label:"Secret Access Key",tooltip:"Enter the Secret Access Key you've created for the Companion user in the IAM.",width:12},{type:"dropdown",id:"region",label:"AWS Region",tooltip:"Select the AWS Region in which your EC2 instances are deployed",width:8,choices:[{id:"us-east-1",label:"US East (N. Virginia)"},{id:"us-east-2",label:"US East (Ohio)"},{id:"us-west-1",label:"US West (N. California)"},{id:"us-west-2",label:"US West (Oregon)"},{id:"af-south-1",label:"Africa (Cape Town)"},{id:"ap-east-1",label:"Asia Pacific (Hong Kong)"},{id:"ap-south-2",label:"Asia Pacific (Hyderabad)"},{id:"ap-southeast-3",label:"Asia Pacific (Jakarta)"},{id:"ap-southeast-5",label:"Asia Pacific (Malaysia)"},{id:"ap-southeast-4",label:"Asia Pacific (Melbourne)"},{id:"ap-south-1",label:"Asia Pacific (Mumbai)"},{id:"ap-northeast-3",label:"Asia Pacific (Osaka)"},{id:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{id:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{id:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{id:"ap-southeast-7",label:"Asia Pacific (Thailand)"},{id:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{id:"ca-central-1",label:"Canada (Central)"},{id:"ca-west-1",label:"Canada (Calgary)"},{id:"cn-north-1",label:"China (Beijing)"},{id:"cn-northwest-1",label:"China (Ningxia)"},{id:"eu-central-1",label:"Europe (Frankfurt)"},{id:"eu-west-1",label:"Europe (Ireland)"},{id:"eu-west-2",label:"Europe (London)"},{id:"eu-south-1",label:"Europe (Milan)"},{id:"eu-west-3",label:"Europe (Paris)"},{id:"eu-south-2",label:"Europe (Spain)"},{id:"eu-north-1",label:"Europe (Stockholm)"},{id:"eu-central-2",label:"Europe (Zurich)"},{id:"il-central-1",label:"Isreal (Tel Aviv)"},{id:"mx-central-1",label:"Mexico (Central)"},{id:"me-south-1",label:"Middle East (Bahrain)"},{id:"me-central-1",label:"Middle East (UAE)"},{id:"sa-east-1",label:"South America (São Paulo)"}],default:"eu-central-1"},{type:"number",id:"pollingInterval",label:"Polling Interval",tooltip:"Configure how often (in seconds) the EC2 states should get fetched from AWS (5 seconds to 1 hour)",default:10,min:5,max:3600,width:4}];function co(e){return{instance_state:{type:"boolean",name:"EC2 Instance State",description:"Check if an EC2 instance is in a specific state",options:[{type:"dropdown",id:"instanceId",label:"Select EC2 Instance",choices:function(){const t=[];for(const r in e.instances){const n=e.instances[r];t.push({id:r,label:`${n.name} (${r})`})}return t}()},{type:"dropdown",id:"state",label:"Desired State",tooltip:"Select the desired state of the instance",default:"running",choices:[{id:"pending",label:"Pending"},{id:"running",label:"Running"},{id:"stopping",label:"Stopping"},{id:"stopped",label:"Stopped"},{id:"shutting-down",label:"Shutting Down"},{id:"terminated",label:"Terminated"}]}],callback:async t=>{const r=t.options.instanceId,n=t.options.state;if(!r)return!1;const s=e.instances[r];return s?s.state===n:(console.log(`Instance with ID ${r} does not exist in cache.`),!1)}}}}var uo=n(1095),lo=n(9359),po=n(8377),fo=n(6961),ho=n(1487),go=n(6864),mo=n(649),yo=n(4171),bo=n(3448),vo=n(7135);const wo=async(e,t,r)=>({operation:(0,vo.u)(t).operation,region:await(0,vo.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),So=e=>{const t=[];return e.operation,t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"ec2",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e)),t};var Io=n(5122),Eo=n(904),_o=n(8112),ko=n(3054);let Ao=!1;const xo=(e={})=>(0,_o.Bj)((0,_o.cy)((async()=>{if(e.profile??process.env[ko.Ch])throw process.env[Eo.yG]&&process.env[Eo.pi]&&!Ao&&((e.logger?.warn&&"NoOpLogger"!==e.logger?.constructor?.name?e.logger.warn:console.warn)("@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:\n    Multiple credential sources detected: \n    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.\n    This SDK will proceed with the AWS_PROFILE value.\n    \n    However, a future version may change this behavior to prefer the ENV static credentials.\n    Please ensure that your environment only sets either the AWS_PROFILE or the\n    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.\n"),Ao=!0),new _o.C1("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,Eo.fromEnv)(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");const{ssoStartUrl:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:i,ssoSession:o}=e;if(!(t||r||s||i||o))throw new _o.C1("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});const{fromSSO:a}=await n.e(791).then(n.bind(n,9791));return a(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");const{fromIni:t}=await n.e(789).then(n.bind(n,2789));return t(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");const{fromProcess:t}=await n.e(109).then(n.bind(n,5109));return t(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");const{fromTokenFile:t}=await n.e(819).then(n.bind(n,7819));return t(e)()}),(async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await(async e=>{const{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:i}=await n.e(897).then(n.bind(n,7897));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");const{fromHttp:t}=await n.e(610).then(n.bind(n,3610));return(0,_o.cy)(t(e),s(e))}return process.env.AWS_EC2_METADATA_DISABLED?async()=>{throw new _o.C1("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),i(e))})(e))())),(async()=>{throw new _o.C1("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})})),Oo,Po),Po=e=>void 0!==e?.expiration,Oo=e=>void 0!==e?.expiration&&e.expiration.getTime()-Date.now()<3e5;var Co=n(3410),To=n(1701),No=n(9987),Ro=n(3621),jo=n(7809),$o=n(3323),Do=n(6228),Mo=n(2641),Fo=n(4572),Vo=n(3197),Uo=n(6652),qo=n(8545);const Lo="required",Bo="fn",Ho="argv",Wo="ref",Ko=!0,zo="isSet",Go="booleanEquals",Jo="error",Qo="endpoint",Yo="tree",Zo="PartitionResult",Xo="getAttr",ea={[Lo]:!1,type:"String"},ta={[Lo]:!0,default:!1,type:"Boolean"},ra={[Wo]:"Endpoint"},na={[Bo]:Go,[Ho]:[{[Wo]:"UseFIPS"},!0]},sa={[Bo]:Go,[Ho]:[{[Wo]:"UseDualStack"},!0]},ia={},oa={[Bo]:Xo,[Ho]:[{[Wo]:Zo},"supportsFIPS"]},aa={[Wo]:Zo},ca={[Bo]:Go,[Ho]:[!0,{[Bo]:Xo,[Ho]:[aa,"supportsDualStack"]}]},ua=[na],la=[sa],da=[{[Wo]:"Region"}],pa={version:"1.0",parameters:{Region:ea,UseDualStack:ta,UseFIPS:ta,Endpoint:ea},rules:[{conditions:[{[Bo]:zo,[Ho]:[ra]}],rules:[{conditions:ua,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Jo},{conditions:la,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Jo},{endpoint:{url:ra,properties:ia,headers:ia},type:Qo}],type:Yo},{conditions:[{[Bo]:zo,[Ho]:da}],rules:[{conditions:[{[Bo]:"aws.partition",[Ho]:da,assign:Zo}],rules:[{conditions:[na,sa],rules:[{conditions:[{[Bo]:Go,[Ho]:[Ko,oa]},ca],rules:[{endpoint:{url:"https://ec2-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ia,headers:ia},type:Qo}],type:Yo},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Jo}],type:Yo},{conditions:ua,rules:[{conditions:[{[Bo]:Go,[Ho]:[oa,Ko]}],rules:[{conditions:[{[Bo]:"stringEquals",[Ho]:[{[Bo]:Xo,[Ho]:[aa,"name"]},"aws-us-gov"]}],endpoint:{url:"https://ec2.{Region}.amazonaws.com",properties:ia,headers:ia},type:Qo},{endpoint:{url:"https://ec2-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ia,headers:ia},type:Qo}],type:Yo},{error:"FIPS is enabled but this partition does not support FIPS",type:Jo}],type:Yo},{conditions:la,rules:[{conditions:[ca],rules:[{endpoint:{url:"https://ec2.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ia,headers:ia},type:Qo}],type:Yo},{error:"DualStack is enabled but this partition does not support DualStack",type:Jo}],type:Yo},{endpoint:{url:"https://ec2.{Region}.{PartitionResult#dnsSuffix}",properties:ia,headers:ia},type:Qo}],type:Yo}],type:Yo},{error:"Invalid Configuration: Missing Region",type:Jo}]},fa=new qo.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),ha=(e,t={})=>fa.get(e,(()=>(0,qo.sO)(pa,{endpointParams:e,logger:t.logger})));qo.mw.aws=Uo.UF;var ga=n(4321);var ma=n(4547);const ya=e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(e){const r=t.findIndex((t=>t.schemeId===e.schemeId));-1===r?t.push(e):t.splice(r,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){r=e},httpAuthSchemeProvider:()=>r,setCredentials(e){n=e},credentials:()=>n}};class ba extends s.Kj{config;constructor(...[e]){const r=(e=>{(0,s.I9)(process.version);const t=(0,ga.I)(e),r=()=>t().then(s.lT),n=(e=>({apiVersion:"2016-11-15",base64Decoder:e?.base64Decoder??Fo.E,base64Encoder:e?.base64Encoder??Fo.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ha,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??So,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Do.f2}],logger:e?.logger??new s.N4,serviceId:e?.serviceId??"EC2",urlParser:e?.urlParser??Mo.D,utf8Decoder:e?.utf8Decoder??Vo.ar,utf8Encoder:e?.utf8Encoder??Vo.Pq}))(e);(0,Io.I)(process.version);const i={profile:e?.profile};return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??jo.n,credentialDefaultProvider:e?.credentialDefaultProvider??xo,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Co.pf)({serviceId:n.serviceId,clientVersion:"3.731.1"}),maxAttempts:e?.maxAttempts??(0,No.Z)(yo.qs,e),region:e?.region??(0,No.Z)(ho.GG,{...ho.zH,...i}),requestHandler:Ro.$c.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,No.Z)({...yo.kN,default:async()=>(await r()).retryMode||$o.L0},e),sha256:e?.sha256??To.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Ro.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,No.Z)(ho.e$,i),useFipsEndpoint:e?.useFipsEndpoint??(0,No.Z)(ho.Ko,i),userAgentAppId:e?.userAgentAppId??(0,No.Z)(Co.hV,i)}})(e||{}),n=(i=r,{...i,useDualstackEndpoint:i.useDualstackEndpoint??!1,useFipsEndpoint:i.useFipsEndpoint??!1,defaultSigningName:"ec2"});var i;const o=(0,fo.Dc)(n),c=(0,yo.$z)(o),u=(0,ho.TD)(c),l=(0,uo.OV)(u);var d;const p=((e,t)=>{const r={...(0,ma.Rq)(e),...(0,s.xA)(e),...(0,a.eS)(e),...ya(e)};return t.forEach((e=>e.configure(r))),{...e,...(0,ma.$3)(r),...(0,s.uv)(r),...(0,a.jt)(r),...(n=r,{httpAuthSchemes:n.httpAuthSchemes(),httpAuthSchemeProvider:n.httpAuthSchemeProvider(),credentials:n.credentials()})};var n})((d=(0,t.Co)(l),{...(0,bo.h)(d)}),e?.extensions||[]);super(p),this.config=p,this.middlewareStack.use((0,fo.sM)(this.config)),this.middlewareStack.use((0,yo.ey)(this.config)),this.middlewareStack.use((0,mo.vK)(this.config)),this.middlewareStack.use((0,uo.TC)(this.config)),this.middlewareStack.use((0,lo.Y7)(this.config)),this.middlewareStack.use((0,po.n4)(this.config)),this.middlewareStack.use((0,go.wB)(this.config,{httpAuthSchemeParametersProvider:wo,identityProviderConfigProvider:async e=>new go.h$({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,go.lW)(this.config))}destroy(){super.destroy()}}class va extends(s.uB.classBuilder().ep(i).m((function(e,n,s,i){return[(0,r.TM)(s,this.serialize,this.deserialize),(0,t.rD)(s,e.getEndpointParameterInstructions())]})).s("AmazonEC2","DescribeInstances",{}).n("EC2Client","DescribeInstancesCommand").f(void 0,void 0).ser(u).de(f).build()){}class wa extends e.InstanceBase{async init(e){this.config=e,this.instances={},this.connectToAWS(),this.setActionDefinitions(oo(this)),this.setFeedbackDefinitions(co(this))}async connectToAWS(){try{this.ec2Client=new ba({region:this.config.region,credentials:{accessKeyId:this.config.accessKeyId,secretAccessKey:this.config.secretAccessKey}}),await this.ec2Client.send(new va({})),console.log("AWS connection successful!"),this.updateStatus(e.InstanceStatus.Ok,"Connected to AWS"),this.getAllInstances(),this.feedbackInterval=setInterval((()=>{this.getAllInstances()}),1e3*this.config.pollingInterval)}catch(t){return console.log("Failed to connect to AWS EC2:",t),void this.updateStatus(e.InstanceStatus.ConnectionFailure,"Please validate your AWS credentials and ensure you are connected to the internet.")}}async configUpdated(e){this.config=e,this.instances={},this.connectToAWS()}async destroy(){this.ec2Client=null}getConfigFields(){return ao}async getAllInstances(){try{const e=await this.ec2Client.send(new va({}));for(const t of e.Reservations||[])for(const e of t.Instances||[])this.instances[e.InstanceId]={id:e.InstanceId,name:e.Tags?.find((e=>"Name"===e.Key))?.Value||"Unnamed",state:e.State?.Name||"Unknown",type:e.InstanceType||"Unknown"}}catch(e){console.error("Error fetching instance details: ",e)}this.checkFeedbacks(),this.setActionDefinitions(oo(this)),this.setFeedbackDefinitions(co(this))}}(0,e.runEntrypoint)(wa,[])})()})();