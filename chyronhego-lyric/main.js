/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={169:(e,t,n)=>{"use strict";const r=n(17);r.code='require("ajv/dist/runtime/equal").default',t.A=r},965:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(443),s=n(854),a=n(167),i=()=>{},o=new s.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(s=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==s?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const a=void 0===this._timeout&&void 0===t.timeout?e():s.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(o)}));n(await a)}catch(e){r(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,s=e.length;for(;s>0;){const a=s/2|0;let i=r+a;n(e[i],t)<=0?(r=++i,s-=a+1):s=a}return r}},167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(509);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const s=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(s,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},443:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,a||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,a=r.length,i=new Array(a);s<a;s++)i[s]=r[s].fn;return i},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,s,a,i){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,s),!0;case 5:return u.fn.call(u.context,t,r,s,a),!0;case 6:return u.fn.call(u.context,t,r,s,a,i),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,s);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,s){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return i(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||s&&!o.once||r&&o.context!==r||i(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||s&&!o[c].once||r&&o[c].context!==r)&&l.push(o[c]);l.length?this._events[a]=1===l.length?l[0]:l:i(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},854:(e,t,n)=>{"use strict";const r=n(617);class s extends Error{constructor(e){super(e),this.name="TimeoutError"}}const a=(e,t,n)=>new Promise(((a,i)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);const o=setTimeout((()=>{if("function"==typeof n){try{a(n())}catch(e){i(e)}return}const r=n instanceof Error?n:new s("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(r)}),t);r(e.then(a,i),(()=>{clearTimeout(o)}))}));e.exports=a,e.exports.default=a,e.exports.TimeoutError=s},284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},r=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},s=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},a=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},i=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},o=function(e){return{r:a(e.r,0,255),g:a(e.g,0,255),b:a(e.b,0,255),a:a(e.a)}},c=function(e){return{r:s(e.r),g:s(e.g),b:s(e.b),a:s(e.a,3)}},l=/^#([0-9a-f]{3,8})$/i,u=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,n=e.g,r=e.b,s=e.a,a=Math.max(t,n,r),i=a-Math.min(t,n,r),o=i?a===t?(n-r)/i:a===n?2+(r-t)/i:4+(t-n)/i:0;return{h:60*(o<0?o+6:o),s:a?i/a*100:0,v:a/255*100,a:s}},p=function(e){var t=e.h,n=e.s,r=e.v,s=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),i=r*(1-n),o=r*(1-(t-a)*n),c=r*(1-(1-t+a)*n),l=a%6;return{r:255*[r,o,i,i,c,r][l],g:255*[c,r,r,o,i,i][l],b:255*[i,i,c,r,r,o][l],a:s}},f=function(e){return{h:i(e.h),s:a(e.s,0,100),l:a(e.l,0,100),a:a(e.a)}},h=function(e){return{h:s(e.h),s:s(e.s),l:s(e.l),a:s(e.a,3)}},g=function(e){return p((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},b=function(e){return{h:(t=d(e)).h,s:(s=(200-(n=t.s))*(r=t.v)/100)>0&&s<200?n*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,n,r,s},m=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,I={string:[[function(e){var t=l.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?s(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?s(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v.exec(e)||w.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:o({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=m.exec(e)||y.exec(e);if(!t)return null;var r,s,a=f({h:(r=t[1],s=t[2],void 0===s&&(s="deg"),Number(r)*(n[s]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return g(a)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,s=e.b,a=e.a,i=void 0===a?1:a;return r(t)&&r(n)&&r(s)?o({r:Number(t),g:Number(n),b:Number(s),a:Number(i)}):null},"rgb"],[function(e){var t=e.h,n=e.s,s=e.l,a=e.a,i=void 0===a?1:a;if(!r(t)||!r(n)||!r(s))return null;var o=f({h:Number(t),s:Number(n),l:Number(s),a:Number(i)});return g(o)},"hsl"],[function(e){var t=e.h,n=e.s,s=e.v,o=e.a,c=void 0===o?1:o;if(!r(t)||!r(n)||!r(s))return null;var l=function(e){return{h:i(e.h),s:a(e.s,0,100),v:a(e.v,0,100),a:a(e.a)}}({h:Number(t),s:Number(n),v:Number(s),a:Number(c)});return p(l)},"hsv"]]},k=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},S=function(e){return"string"==typeof e?k(e.trim(),I.string):"object"==typeof e&&null!==e?k(e,I.object):[null,void 0]},_=function(e,t){var n=b(e);return{h:n.h,s:a(n.s+100*t,0,100),l:n.l,a:n.a}},P=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},O=function(e,t){var n=b(e);return{h:n.h,s:n.s,l:a(n.l+100*t,0,100),a:n.a}},C=function(){function e(e){this.parsed=S(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return s(P(this.rgba),2)},e.prototype.isDark=function(){return P(this.rgba)<.5},e.prototype.isLight=function(){return P(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,i=(a=e.a)<1?u(s(255*a)):"","#"+u(t)+u(n)+u(r)+i;var e,t,n,r,a,i},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+r+", "+s+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,s},e.prototype.toHsl=function(){return h(b(this.rgba))},e.prototype.toHslString=function(){return t=(e=h(b(this.rgba))).h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+s+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,s},e.prototype.toHsv=function(){return e=d(this.rgba),{h:s(e.h),s:s(e.s),v:s(e.v),a:s(e.a,3)};var e},e.prototype.invert=function(){return E({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),E(_(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),E(_(this.rgba,-e))},e.prototype.grayscale=function(){return E(_(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),E(O(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),E(O(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?E({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):s(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=b(this.rgba);return"number"==typeof e?E({h:e,s:t.s,l:t.l,a:t.a}):s(t.h)},e.prototype.isEqual=function(e){return this.toHex()===E(e).toHex()},e}(),E=function(e){return e instanceof C?e:new C(e)},T=[];t.Colord=C,t.colord=E,t.extend=function(e){e.forEach((function(e){T.indexOf(e)<0&&(e(C,I),T.push(e))}))},t.getFormat=function(e){return S(e)[1]},t.random=function(){return new C({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},22:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===r(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var s=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=s,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var r,s,a=(s=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}}(r,s)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],o=a[1];return e[i]=o,e}),{})},t.isArguments=function(e){return null!=e&&s(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var a={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=a,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(a.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),r=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},s=0;s<64;s++)n[r(s)]=s;var a=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},i={encode:function(e){if("string"==typeof e){var t=e;e=a(t.length);for(var n=0;n<t.length;n++){var s=t.charCodeAt(n);if(s>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=s}}for(var i=[],o=null,c=null,l=null,u=null,d=0;d<e.length;d++)switch(d%3){case 0:o=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,l=(15&e[d])<<2;break;case 2:l|=e[d]>>6&3,u=63&e[d],i.push(r(o)),i.push(r(c)),i.push(r(l)),i.push(r(u)),o=null,c=null,l=null,u=null}return null!=o&&(i.push(r(o)),i.push(r(c)),null==l?i.push("="):i.push(r(l)),null==u&&i.push("=")),i.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var r,s=a(t),i=null,o=null,c=null,l=0,u=0;u<e.length;u++){var d="="===(r=e.charAt(u))?-1:n[r];switch(u%4){case 0:if(d<0)throw new Error("invalid base64 string");i=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");i|=d>>4,s[l++]=i,o=(15&d)<<4;break;case 2:d>=0&&(o|=d>>2,s[l++]=o,c=(3&d)<<6);break;case 3:d>=0&&(s[l++]=c|d)}}return s},newBinary:a};t.Base64=i},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function e(t,s,a,i,o){var c=s[t];switch(n(c)){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var l,u=i+a,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,f=0;f<p;f+=1)d[f]=e(f,c,a,u,o)||"null";return l=0===d.length?"[]":u?"[\n"+u+d.join(",\n"+u)+"\n"+i+"]":"["+d.join(",")+"]"}var h=Object.keys(c);return o&&(h=h.sort()),h.forEach((function(t){(l=e(t,c,a,u,o))&&d.push(r(t)+(u?": ":":")+l)})),l=0===d.length?"{}":u?"{\n"+u+d.join(",\n"+u)+"\n"+i+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var r="",a=0;a<n.indent;a++)r+=" ";n.indent=r}return s("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}var s={};!function(){var e=s,t=r(2).Base64,n=r(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var a=r(1),i={};e.EJSON=i;var o=new Map;i.addType=function(e,t){if(o.has(e))throw new Error("Type ".concat(e," already present"));o.set(e,t)};var c=[{matchJSONValue:function(e){return(0,a.hasOwn)(e,"$date")&&1===(0,a.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,a.hasOwn)(e,"$regexp")&&(0,a.hasOwn)(e,"$flags")&&2===(0,a.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,a.hasOwn)(e,"$InfNaN")&&1===(0,a.lengthOf)(e)},matchObject:a.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,a.hasOwn)(e,"$binary")&&1===(0,a.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,a.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,a.hasOwn)(e,"$escape")&&1===(0,a.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,a.lengthOf)(e);1!==n&&2!==n||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,a.keysOf)(e).forEach((function(n){t[n]=i.toJSONValue(e[n])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,a.keysOf)(e.$escape).forEach((function(n){t[n]=i.fromJSONValue(e.$escape[n])})),t}},{matchJSONValue:function(e){return(0,a.hasOwn)(e,"$type")&&(0,a.hasOwn)(e,"$value")&&2===(0,a.lengthOf)(e)},matchObject:function(e){return i._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!o.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var r=o.get(t);return n._noYieldsAllowed((function(){return r(e.$value)}))}}];i._isCustomType=function(e){return e&&(0,a.isFunction)(e.toJSONValue)&&(0,a.isFunction)(e.typeName)&&o.has(e.typeName())},i._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?o:(0,a.convertMapToObject)(o)},i._getConverters=function(){return c};var l=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}},u=function e(t){if(null===t)return null;var n=l(t);return void 0!==n?n:(0,a.isObject)(t)?((0,a.keysOf)(t).forEach((function(n){var r=t[n];if((0,a.isObject)(r)||void 0===r||(0,a.isInfOrNaN)(r)){var s=l(r);s?t[n]=s:e(r)}})),t):t};i._adjustTypesToJSONValue=u,i.toJSONValue=function(e){var t=l(e);if(void 0!==t)return t;var n=e;return(0,a.isObject)(e)&&(n=i.clone(e),u(n)),n};var d=function(e){if((0,a.isObject)(e)&&null!==e){var t=(0,a.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var n=0;n<c.length;n++){var r=c[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var n=d(t);return n!==t?n:(0,a.isObject)(t)?((0,a.keysOf)(t).forEach((function(n){var r=t[n];if((0,a.isObject)(r)){var s=d(r);if(r!==s)return void(t[n]=s);e(r)}})),t):t};i._adjustTypesFromJSONValue=p,i.fromJSONValue=function(e){var t=d(e);return t===e&&(0,a.isObject)(e)&&(t=i.clone(e),p(t)),t},i.stringify=(0,a.handleError)((function(e,t){var n=i.toJSONValue(e);return t&&(t.canonical||t.indent)?r(4)(n,t):JSON.stringify(n)})),i.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return i.fromJSONValue(JSON.parse(e))},i.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},i.equals=function(e,t,n){var r,s=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,a.isObject)(e)||!(0,a.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(i.isBinary(e)&&i.isBinary(t)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if((0,a.isFunction)(e.equals))return e.equals(t,n);if((0,a.isFunction)(t.equals))return t.equals(e,n);var o,c=Array.isArray(e),l=Array.isArray(t);if(c!==l)return!1;if(c&&l){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!i.equals(e[r],t[r],n))return!1;return!0}switch(i._isCustomType(e)+i._isCustomType(t)){case 1:return!1;case 2:return i.equals(i.toJSONValue(e),i.toJSONValue(t))}var u=(0,a.keysOf)(e),d=(0,a.keysOf)(t);return s?(r=0,o=u.every((function(s){return!(r>=d.length||s!==d[r]||!i.equals(e[s],t[d[r]],n)||(r++,0))}))):(r=0,o=u.every((function(s){return!!(0,a.hasOwn)(t,s)&&!!i.equals(e[s],t[s],n)&&(r++,!0)}))),o&&r===d.length},i.clone=function(e){var t;if(!(0,a.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(i.isBinary(e)){t=i.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(i.clone):(0,a.isArguments)(e)?Array.from(e).map(i.clone):(0,a.isFunction)(e.clone)?e.clone():i._isCustomType(e)?i.fromJSONValue(i.clone(i.toJSONValue(e)),!0):(t={},(0,a.keysOf)(e).forEach((function(n){t[n]=i.clone(e[n])})),t)},i.newBinary=t.newBinary}(),e.exports=s.EJSON}()},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,a||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,a=r.length,i=new Array(a);s<a;s++)i[s]=r[s].fn;return i},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,s,a,i){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,s),!0;case 5:return u.fn.call(u.context,t,r,s,a),!0;case 6:return u.fn.call(u.context,t,r,s,a,i),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,s);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,s){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return i(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||s&&!o.once||r&&o.context!==r||i(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||s&&!o[c].once||r&&o[c].context!==r)&&l.push(o[c]);l.length?this._events[a]=1===l.length?l[0]:l:i(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},17:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!=s--;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;0!=s--;){var i=a[s];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n}},865:e=>{"use strict";const t=(e,t,r,s)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const a=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!n(a,i)&&s||Object.defineProperty(e,r,i)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},r=(e,t)=>`/* Wrapped ${e}*/\n${t}`,s=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),a=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:i=!1}={})=>{const{name:o}=e;for(const r of Reflect.ownKeys(n))t(e,n,r,i);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const i=""===n?"":`with ${n.trim()}() `,o=r.bind(null,i,t.toString());Object.defineProperty(o,"name",a),Object.defineProperty(e,"toString",{...s,value:o})})(e,n,o),e}},617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},194:e=>{"use strict";e.exports=require("dgram")},943:e=>{"use strict";e.exports=require("fs/promises")},897:e=>{"use strict";e.exports=require("net")},928:e=>{"use strict";e.exports=require("path")},203:e=>{"use strict";e.exports=require("stream")},581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(u)throw new Error("runEntrypoint can only be called once");if(u=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const r=await a.default.readFile(n),d=JSON.parse(r.toString());if(d.runtime?.api!==s.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let p=d.runtime.apiVersion;if("0.0.0"===p)try{const e=await a.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(p=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const f=process.env.CONNECTION_ID;if("string"!=typeof f||!f)throw new Error("Module initialise is missing CONNECTION_ID");const h=process.env.VERIFICATION_TOKEN;if("string"!=typeof h||!h)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const g=new o.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{g.receivedMessage(e)})),l=new e((0,i.literal)({id:f,upgradeScripts:t,_isInstanceBaseProps:!0})),g.sendWithCb("register",{apiVersion:p,connectionId:f,verificationToken:h}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))};const r=n(635),s=n(967),a=r.__importDefault(n(943)),i=n(360),o=n(44),c=r.__importDefault(n(928));let l,u=!1},160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var r=n(895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return r.TCPHelper}});var s=n(118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return s.TelnetHelper}});var a=n(259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return a.UDPHelper}})},895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const r=n(635).__importDefault(n(897)),s=n(228),a=n(400);class i extends s.EventEmitter{#e;#t;_socket;#n;#r=!1;#s=!1;#a=!1;#i;#o;#c;get isConnected(){return this.#r}get isConnecting(){return this.#s}get isDestroyed(){return this.#a}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new r.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#s=!1,this.#r=!1,this.#n.reconnect&&this.#l(),this.#u(a.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#r=!0,this.#s=!1,this.#u(a.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#r=!1,this.#u(a.InstanceStatus.Disconnected),!this.#s&&this.#n.reconnect&&this.#l(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>{this.#a||this.connect()})),this.#c=setTimeout((()=>{this.#c=void 0,this.#a||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#a)throw new Error("Cannot connect destroyed socket");return!this.#s&&(this.#s=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#a||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#r)return!1;try{return new Promise(((t,n)=>{this._socket.write(e,(e=>{e?n(e):t(!0)}))}))}catch(e){this.#r=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#u(a.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#a=!0,void 0!==this.#o&&(clearTimeout(this.#o),this.#o=void 0),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#l(){void 0!==this.#o&&clearTimeout(this.#o),this.#o=setTimeout((()=>{this.#o=void 0,this.#u(a.InstanceStatus.Connecting),this.connect()}),this.#n.reconnect_interval)}#u(e,t){this.#i!=e&&(this.#i=e,this.emit("status_change",e,t))}}t.TCPHelper=i},118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const r=n(635).__importDefault(n(228)),s=n(203),a=n(895);class i extends r.default{#d;#p;#c;get isConnected(){return this.#d.isConnected}get isConnecting(){return this.#d.isConnecting}get isDestroyed(){return this.#d.isDestroyed}constructor(e,t,n){super(),this.#d=new a.TCPHelper(e,t,n),this.#p=new o,this.#d._socket.pipe(this.#p),this.#d.on("connect",(()=>this.emit("connect"))),this.#d.on("end",(()=>this.emit("end"))),this.#d.on("error",(e=>this.emit("error",e))),this.#d.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#p.on("iac",((e,t)=>this.emit("iac",e,t))),this.#p.on("sb",(e=>this.emit("sb",e))),this.#p.on("data",(e=>this.emit("data",e))),this.#p.on("drain",(()=>this.emit("drain"))),this.#c=setTimeout((()=>{this.#c=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#d.connect()}async send(e){return this.#d.send(e)}destroy(){this.#d.destroy(),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#p.removeAllListeners(),this.#p.destroy()}}t.TelnetHelper=i;class o extends s.Transform{#f;#h;#g;constructor(e){super(e),this.#f=Buffer.alloc(0),this.#h=Buffer.alloc(0),this.#g=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#b(e[t]);const r=this.#m();r.length&&this.push(r),n()}#b(e){if(0===this.#g){if(255===e)return void(this.#g=255);this.#f=Buffer.concat([this.#f,Buffer.from([e])])}else if(255===this.#g)switch(e){case 250:case 251:case 252:case 253:case 254:this.#g=e;break;default:this.#g=0}else{if(this.#g>=251&&this.#g<=254){let t;switch(this.#g){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#g=0)}if(250===this.#g){if(240===e)return this.emit("sb",this.#h),this.#g=0,void(this.#h=Buffer.alloc(0));this.#h=Buffer.concat([this.#h,Buffer.from([e])])}}}#m(){const e=this.#f;return this.#f=Buffer.alloc(0),e}}},259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const r=n(635).__importDefault(n(194)),s=n(228),a=n(400);class i extends s.EventEmitter{#e;#t;#y;#n;#a=!1;#i;#c;get isDestroyed(){return this.#a}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={...n},this.#y=r.default.createSocket("udp4");try{this.#y.bind(this.#n.bind_port||0,this.#n.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#n.bind_ip||"0.0.0.0"}:${this.#n.bind_port||0}`)}void 0!==this.#n.ttl&&this.#y.setTTL(this.#n.ttl),void 0!==this.#n.multicast_ttl&&this.#y.setMulticastTTL(this.#n.multicast_ttl),this.#y.on("error",(e=>{this.#u(a.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#y.on("listening",(()=>{this.#n.broadcast&&this.#y.setBroadcast(!0),this.#n.multicast_interface&&this.#y.setMulticastInterface(this.#n.multicast_interface),this.#u(a.InstanceStatus.Ok),this.emit("listening")})),this.#y.on("message",((e,t)=>this.emit("data",e,t))),this.#c=setTimeout((()=>{this.#a||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#a)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,n)=>{this.#y.send(e,this.#t,this.#e,(e=>{e?n(e):t()}))}))}destroy(){this.#a=!0,void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#y.removeAllListeners(),this.#y.close(),this.removeAllListeners()}#u(e,t){this.#i!=e&&(this.#i=e,this.emit("status_change",e,t))}}t.UDPHelper=i},44:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const r=n(635),s=n(360),a=r.__importDefault(n(22));t.IpcWrapper=class{#v;#w;#I;#k=1;#S=new Map;constructor(e,t,n){this.#v=e,this.#w=t,this.#I=n}async sendWithCb(e,t,n,r=0){r<=0&&(r=this.#I);const s={timeout:void 0,resolve:()=>null,reject:()=>null},i=new Promise(((e,t)=>{s.resolve=e,s.reject=t}));this.#k>268435456&&(this.#k=1);const o=this.#k++;this.#S.set(o,s),this.#w({direction:"call",name:String(e),payload:a.default.stringify(t),callbackId:o});const c=new Error("Call timed out");return s.timeout=setTimeout((()=>{s.reject(n?n():c),this.#S.delete(o)}),r),i}sendWithNoCb(e,t){this.#w({direction:"call",name:String(e),payload:a.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#v[e.name];if(!t)return void(e.callbackId&&this.#w({direction:"response",callbackId:e.callbackId,success:!1,payload:a.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?a.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#w({direction:"response",callbackId:e.callbackId,success:!0,payload:a.default.stringify(t)})}),(t=>{e.callbackId&&this.#w({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):a.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#S.get(e.callbackId);if(this.#S.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const n=e.payload?a.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"object"==typeof n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,s.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const r=n(635);r.__exportStar(n(77),t),r.__exportStar(n(18),t),r.__exportStar(n(581),t);var s=n(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return s.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return s.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return s.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return s.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return s.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return s.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return s.assertNever}}),r.__exportStar(n(160),t);var a=n(326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return a.runEntrypoint}})},289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const r=n(593);function s(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#_;#P;#O;#C=new Map;#E=new Map;constructor(e,t,n){this.#_=e,this.#P=t,this.#O=n}async handleExecuteAction(e){const t=this.#C.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#E.get(t);if(e){const t=this.#C.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(s(e),n)).catch((t=>{this.#O("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#E.delete(t);else{this.#E.set(t,n);const e=this.#C.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#_({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(s(n),t)).catch((e=>{this.#O("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#C.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#C.clear();for(const[n,s]of Object.entries(e))s&&(t.push({id:n,name:s.name,description:s.description,options:(0,r.serializeIsVisibleFn)(s.options),hasLearn:!!s.learn,learnTimeout:s.learnTimeout}),this.#C.set(n,s));this.#P({actions:t})}_getAllActions(){return Array.from(this.#E.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#E.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#C.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(s(e),n)).catch((t=>{this.#O("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#E.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#C.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(s(e),n)).catch((t=>{this.#O("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const r=n(635),s=n(593),a=r.__importDefault(n(0));function i(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#_;#T;#A;#O;#U=new Map;#x=new Map;#j=new Map;#N=new Map;#M;get parseVariablesContext(){return this.#M}constructor(e,t,n,r){this.#_=e,this.#T=t,this.#A=n,this.#O=r}getDefinitionIds(){return Array.from(this.#U.keys())}getInstanceIds(){return Array.from(this.#x.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#x.get(t);if(e){const t=this.#U.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(i(t.type,e),n)).catch((t=>{this.#O("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#x.delete(t);else{this.#x.set(t,{...n,referencedVariables:null});const e=this.#U.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#_({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(i(e.type,n),t)).catch((e=>{this.#O("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}this.#W(t)}}}async handleLearnFeedback(e){const t=this.#U.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#N.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#x.values())if(!this.#N.has(e.id)&&e.referencedVariables)for(const r of e.referencedVariables)if(t.has(r)){n.add(e.id);break}for(const e of n)setImmediate((()=>{this.#W(e)}))}#W(e){const t=this.#N.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#x.get(e);if(!n)return;const r=n,s={needsRecheck:!1,changedVariables:new Set};this.#N.set(e,s),Promise.resolve().then((async()=>{const t=this.#U.get(r.feedbackId);let n;const s=new Set;if(t){this.#M=`Feedback ${r.feedbackId} (${e})`;const a={parseVariablesInString:async t=>{const n=await this.#_({text:t,controlId:r.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)s.add(e);return n.text}};n="boolean"===t.type?t.callback({...i("boolean",r),type:"boolean"},a):t.callback({...i("advanced",r),type:"advanced",image:r.image},a),this.#M=void 0}const a=await n;this.#j.set(e,{id:e,controlId:r.controlId,value:a}),this.#D(),r.referencedVariables=s.size>0?Array.from(s):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#M=void 0,this.#N.delete(e);let t=!1;if(r.referencedVariables)for(const e of r.referencedVariables)if(s.changedVariables.has(e)){t=!0;break}(t||s.needsRecheck)&&setImmediate((()=>{this.#W(e)}))}))}#D=(0,a.default)((()=>{const e=this.#j;this.#j=new Map,e.size>0&&this.#T({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#U.clear();for(const[n,r]of Object.entries(e))r&&(t.push({id:n,name:r.name,description:r.description,options:(0,s.serializeIsVisibleFn)(r.options),type:r.type,defaultStyle:"boolean"===r.type?r.defaultStyle:void 0,hasLearn:!!r.learn,learnTimeout:r.learnTimeout,showInvert:"boolean"===r.type&&r.showInvert}),this.#U.set(n,r));this.#A({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#x.entries())this.#U.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#W(e)}checkFeedbacksById(e){for(const t of e)this.#W(t)}_getAllFeedbacks(){return Array.from(this.#x.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#x.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#U.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(i(t.type,e),n)).catch((t=>{this.#O("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#x.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#U.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#_({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(i(t.type,e),n)).catch((t=>{this.#O("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,n,a,i,o){const c=new Map,l=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&l(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&l(t).feedbacks.push(e.id)}if(!o)for(let e=n??-1;e<a.length;e++)l(e).config=!0;const u={},d={};let p;if(c.size>0){const o=Array.from(c.keys()).sort(),l=Math.min(...o,n??-1)+1,f=[],h=[],g=a.length;for(let n=l;n<g;n++){const o=c.get(n-1);o&&(f.push(...o.actions),h.push(...o.feedbacks));const l=!!o?.config;if(!l&&0===f.length&&0===h.length)continue;const g=p??i,b=(0,a[n])({currentConfig:s(g)},{config:l?g:null,actions:f.map((t=>{const n=e[t];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?s(n.options):{}})})).filter((e=>!!e)),feedbacks:h.map((e=>{const n=t[e];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?s(n.options):{},isInverted:n.isInverted})})).filter((e=>!!e))});l&&b.updatedConfig&&(p=b.updatedConfig);for(const t of b.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,d[t.id]=n)}for(const e of b.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,u[e.id]={...n,style:u[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,n]of Object.entries(e))d[t]||"number"!=typeof n?.upgradeIndex||(d[t]=n);for(const[e,n]of Object.entries(t))u[e]||"number"!=typeof n?.upgradeIndex||(u[e]=n)}return{updatedActions:d,updatedFeedbacks:u,updatedConfig:p}};const r=n(360);function s(e){return JSON.parse(JSON.stringify(e))}},77:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,r.default)(e)){const e=r.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const r=n(635).__importDefault(n(281))},730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const r=n(635),s=n(360),a=r.__importDefault(n(965)),i=n(593),o=n(706),c=n(39),l=n(44),u=n(289),d=n(365);t.InstanceBase=class{#V;#F;id;#$=new a.default({concurrency:1});#q=!1;#B=!1;#R={};#H;#L;#J=new Map;#Q=new Map;#z=new Map;#n;#G;get instanceOptions(){return this.#n}get label(){return this.#G}constructor(e){if(!(0,i.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#n={disableVariableValidation:!1},this.#V=new l.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#V.receivedMessage(e)})),this.#H=new u.ActionManager((async e=>this.#V.sendWithCb("parseVariablesInString",e)),(e=>this.#V.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#L=new c.FeedbackManager((async e=>this.#V.sendWithCb("parseVariablesInString",e)),(e=>this.#V.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#V.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#F=e.upgradeScripts,this.id=e.id,this.#G=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#$.add((async()=>{if(this.#q)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#R=e.config,this.#G=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#R=t,this.saveConfig(this.#R),e.lastUpgradeIndex=this.#F.length-1}const{updatedActions:r,updatedFeedbacks:s,updatedConfig:a}=(0,o.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#F,this.#R,!1);this.#R=a??this.#R;const i=this.#V.sendWithCb("upgradedItems",{updatedActions:r,updatedFeedbacks:s});try{await this.init(this.#R,!!e.isFirstInit),this.#q=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await i}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:n},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#F.length-1,updatedConfig:this.#R}}))}async _handleDestroy(){await this.#$.add((async()=>{if(!this.#q)throw new Error("Not initialized");await this.destroy(),this.#q=!1}))}async _handleConfigUpdateAndLabel(e){await this.#$.add((async()=>{if(!this.#q)throw new Error("Not initialized");this.#G=e.label,this.#R=e.config,await this.configUpdated(this.#R)}))}async _handleExecuteAction(e){return this.#H.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,o.runThroughUpgradeScripts)({},e.feedbacks,null,this.#F,this.#R,!0);this.#V.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#L.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,o.runThroughUpgradeScripts)(e.actions,{},null,this.#F,this.#R,!0);this.#V.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#H.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,i.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#H.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#L.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#B)return}else if(!this.#B)return;if(!this.handleStartStopRecordActions)throw this.#B=!1,new Error("Recording actions is not supported by this module!");this.#B=e.recording,this.handleStartStopRecordActions(this.#B)}async _handleVariablesChanged(e){this.#L.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#J.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#J.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#R=e,this.#V.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#H.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#L.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,r]of Object.entries(e))r&&t.push({...r,id:n});this.#V.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],n=[];this.#Q.clear();for(const r of e)t.push({id:r.variableId,name:r.name}),this.#Q.set(r.variableId,r),this.#z.has(r.variableId)||(this.#z.set(r.variableId,""),n.push({id:r.variableId,value:""}));if(!this.#n.disableVariableValidation){const e=new Set(this.#Q.keys());for(const t of this.#z.keys())e.has(t)||(this.#z.delete(t),n.push({id:t,value:void 0}))}this.#V.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:n})}setVariableValues(e){const t=[];for(const[n,r]of Object.entries(e))this.#n.disableVariableValidation?(void 0===r?this.#z.delete(n):this.#z.set(n,r),t.push({id:n,value:r})):this.#Q.has(n)?(this.#z.set(n,r??""),t.push({id:n,value:r??""})):t.push({id:n,value:void 0});this.#V.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#z.get(e)}async parseVariablesInString(e){const t=this.#L.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#V.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#L.checkFeedbacks(e)}checkFeedbacksById(...e){this.#L.checkFeedbacksById(e)}_getAllActions(){return this.#H._getAllActions()}subscribeActions(...e){this.#H.subscribeActions(e)}unsubscribeActions(...e){this.#H.unsubscribeActions(e)}_getAllFeedbacks(){return this.#L._getAllFeedbacks()}subscribeFeedbacks(...e){this.#L.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#L.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#B)throw new Error("Not currently recording actions");this.#V.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}setCustomVariableValue(e,t){this.#V.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,n,r){this.#V.sendWithNoCb("send-osc",(0,s.literal)({host:e,port:t,path:n,args:r}))}updateStatus(e,t){this.#V.sendWithNoCb("set-status",(0,s.literal)({status:e,message:t??null}))}log(e,t){this.#V.sendWithNoCb("log-message",(0,s.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const n="string"==typeof e?{type:e}:e,r=new d.SharedUdpSocketImpl(this.#V,this.#J,n);return t&&r.on("message",t),r}}},386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},400:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(n||(t.InstanceStatus=n={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(r||(t.Regex=r={}))},983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(635);r.__exportStar(n(730),t),r.__exportStar(n(649),t),r.__exportStar(n(386),t),r.__exportStar(n(400),t),r.__exportStar(n(983),t),r.__exportStar(n(104),t),r.__exportStar(n(258),t),r.__exportStar(n(131),t),r.__exportStar(n(371),t),r.__exportStar(n(786),t),r.__exportStar(n(132),t)},258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const r=n(635).__importDefault(n(228)),s=n(360);class a extends r.default{#V;#K;#n;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#g&&"object"==typeof this.#g?this.#g:void 0}#g="pending";constructor(e,t,n){super(),this.#V=e,this.#K=t,this.#n={...n}}bind(e,t,n){if(this.#g&&"object"==typeof this.#g)throw new Error("Socket is already bound");switch(this.#g){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,s.assertNever)(this.#g),new Error("Invalid socket state")}this.#g="binding",n&&this.on("listening",n),this.#V.sendWithCb("sharedUdpSocketJoin",{family:this.#n.type,portNumber:e}).then((t=>{this.#g={portNumber:e,handleId:t},this.#K.set(t,this),this.emit("listening")}),(e=>{this.#g="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#g&&"object"==typeof this.#g);else switch(this.#g){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,s.assertNever)(this.#g),new Error("Invalid socket state")}const t=this.#g.handleId;this.#g="closed",e&&this.on("close",e),this.#V.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#K.delete(t),this.emit("close")}),(e=>{this.#K.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,n,r,s,a){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof n){if("number"!=typeof r||"string"!=typeof s)throw new Error("Invalid arguments");if(void 0!==a&&"number"!=typeof a)throw new Error("Invalid arguments");const i=this.#Y(e,t,n);this.#Z(i,r,s,a)}else{if("string"!=typeof n)throw new Error("Invalid arguments");{if(void 0!==r&&"function"!=typeof r)throw new Error("Invalid arguments");const s=this.#Y(e,0,void 0);this.#Z(s,t,n,r)}}}#Y(e,t,n){let r;if("string"==typeof e)r=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))r=e;else{if(Array.isArray(e))return Buffer.from(e);r=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return r.subarray(t,void 0!==n?n+t:void 0)}#Z(e,t,n,r){if(!this.#g||"object"!=typeof this.#g)throw new Error("Socket is not open");this.#V.sendWithCb("sharedUdpSocketSend",{handleId:this.#g.handleId,message:e,address:n,port:t}).then((()=>{r?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#g="fatalError";const t=this.boundState;t&&this.#K.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=a},371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,s]of Object.entries(n))void 0!==t.options[e]&&(t.style[s]=t.options[e],delete t.options[e],r.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){const n=e[t.feedbackId];if("string"!=typeof n)continue;const s=t.options[n];void 0!==s&&(delete t.options[n],t.isInverted="true"===s||!0===s||Number(s)>0,r.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]})},132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n,r){let s=(255&e)<<16|(255&t)<<8|255&n;return r&&r>=0&&r<1&&(s+=16777216*Math.round(255*(1-r))),s},t.splitRgb=s,t.splitHsl=function(e){const t=s(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=s(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=s(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()};const r=n(284);function s(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,r.colord)(e).isValid()){const t=(0,r.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},281:(e,t,n)=>{"use strict";e.exports=c,e.exports.default=c;const r={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}}},s={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1},a=Object.prototype.hasOwnProperty,i=n(169).A,o=new RegExp("","u");function c(e,{instancePath:t="",parentData:n,parentDataProperty:l,rootData:u=e}={}){let d=null,p=0;if(0===p){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return c.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=p;for(const n in e)if(!a.call(r.properties,n))return c.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===p){if(void 0!==e.$schema){const n=p;if("string"!=typeof e.$schema)return c.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=n===p}else f=!0;if(f){if(void 0!==e.id){const n=p;if("string"!=typeof e.id)return c.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.name){const n=p;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.shortname){const n=p;if("string"!=typeof e.shortname)return c.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.description){const n=p;if("string"!=typeof e.description)return c.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.version){const n=p;if("string"!=typeof e.version)return c.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.license){const n=p;if("string"!=typeof e.license)return c.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.repository){const n=p;if("string"!=typeof e.repository)return c.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.bugs){const n=p;if("string"!=typeof e.bugs)return c.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.maintainers){let n=e.maintainers;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=n.length;for(let r=0;r<e;r++){let e=n[r];const s=p;if(p===s){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return c.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.name){const n=p;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/maintainers/"+r+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=n===p}else g=!0;if(g){if(void 0!==e.email){const n=p;if("string"!=typeof e.email)return c.errors=[{instancePath:t+"/maintainers/"+r+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=n===p}else g=!0;if(g)if(void 0!==e.github){const n=p;if("string"!=typeof e.github)return c.errors=[{instancePath:t+"/maintainers/"+r+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=n===p}else g=!0}}}if(!(h=s===p))break}if(h){let e,r=n.length;if(r>1)for(;r--;)for(e=r;e--;)if(i(n[r],n[e]))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1}}}f=r===p}else f=!0;if(f){if(void 0!==e.legacyIds){let n=e.legacyIds;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var b=!0;const e=n.length;for(let r=0;r<e;r++){const e=p;if("string"!=typeof n[r])return c.errors=[{instancePath:t+"/legacyIds/"+r,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b=e===p))break}if(b){let e,r=n.length;if(r>1){const s={};for(;r--;){let a=n[r];if("string"==typeof a){if("number"==typeof s[a])return e=s[a],c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[a]=r}}}}}}f=r===p}else f=!0;if(f){if(void 0!==e.runtime){let n=e.runtime;const s=p;if(p===s){if(!n||"object"!=typeof n||Array.isArray(n))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){let e=n.type;const s=p;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var m=s===p}else m=!0;if(m){if(void 0!==n.api){let e=n.api;const s=p;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;m=s===p}else m=!0;if(m){if(void 0!==n.apiVersion){const e=p;if("string"!=typeof n.apiVersion)return c.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=e===p}else m=!0;if(m)if(void 0!==n.entrypoint){const e=p;if("string"!=typeof n.entrypoint)return c.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=e===p}else m=!0}}}}f=s===p}else f=!0;if(f){if(void 0!==e.manufacturer){const n=p;if("string"!=typeof e.manufacturer)return c.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===p}else f=!0;if(f){if(void 0!==e.products){let n=e.products;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(n.length<1)return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var y=!0;const e=n.length;for(let r=0;r<e;r++){const e=p;if("string"!=typeof n[r])return c.errors=[{instancePath:t+"/products/"+r,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(y=e===p))break}if(y){let e,r=n.length;if(r>1){const s={};for(;r--;){let a=n[r];if("string"==typeof a){if("number"==typeof s[a])return e=s[a],c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[a]=r}}}}}}f=r===p}else f=!0;if(f){if(void 0!==e.keywords){let n=e.keywords;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var v=!0;const e=n.length;for(let r=0;r<e;r++){const e=p;if("string"!=typeof n[r])return c.errors=[{instancePath:t+"/keywords/"+r,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v=e===p))break}if(v){let e,r=n.length;if(r>1){const s={};for(;r--;){let a=n[r];if("string"==typeof a){if("number"==typeof s[a])return e=s[a],c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[a]=r}}}}}}f=r===p}else f=!0;if(f)if(void 0!==e.bonjourQueries){let n=e.bonjourQueries;const r=p;if(p===r){if(!n||"object"!=typeof n||Array.isArray(n))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=p;for(const e in n)if(!o.test(e))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===p)for(const e in n)if(o.test(e)){let r=n[e];const a=p,i=p;let l=!1,u=null;const f=p;if(p==p)if(r&&"object"==typeof r&&!Array.isArray(r)){let n;if(void 0===r.type&&(n="type")||void 0===r.protocol&&(n="protocol")){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===d?d=[r]:d.push(r),p++}else{const n=p;for(const n in r)if("type"!==n&&"protocol"!==n&&"txt"!==n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===d?d=[r]:d.push(r),p++;break}if(n===p){if(void 0!==r.type){const n=p;if("string"!=typeof r.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}var w=n===p}else w=!0;if(w){if(void 0!==r.protocol){let n=r.protocol;const a=p;if("string"!=typeof n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if("tcp"!==n&&"udp"!==n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:s.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[n]:d.push(n),p++}w=a===p}else w=!0;if(w)if(void 0!==r.txt){let n=r.txt;const s=p;if(p===s)if(n&&"object"==typeof n&&!Array.isArray(n)){const r=p;for(const r in n)if(!o.test(r)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===d?d=[n]:d.push(n),p++;break}if(r===p)for(const r in n)if(o.test(r)){const s=p;if("string"!=typeof n[r]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if(s!==p)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}w=s===p}else w=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}f===p&&(l=!0,u=0);const h=p;if(p===h)if(Array.isArray(r)){const n=r.length;for(let a=0;a<n;a++){let n=r[a];const i=p;if(p==p)if(n&&"object"==typeof n&&!Array.isArray(n)){let r;if(void 0===n.type&&(r="type")||void 0===n.protocol&&(r="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===d?d=[n]:d.push(n),p++}else{const r=p;for(const r in n)if("type"!==r&&"protocol"!==r&&"txt"!==r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a,schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===d?d=[n]:d.push(n),p++;break}if(r===p){if(void 0!==n.type){const r=p;if("string"!=typeof n.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}var I=r===p}else I=!0;if(I){if(void 0!==n.protocol){let r=n.protocol;const i=p;if("string"!=typeof r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if("tcp"!==r&&"udp"!==r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:s.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[n]:d.push(n),p++}I=i===p}else I=!0;if(I)if(void 0!==n.txt){let r=n.txt;const s=p;if(p===s)if(r&&"object"==typeof r&&!Array.isArray(r)){const n=p;for(const n in r)if(!o.test(n)){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===d?d=[r]:d.push(r),p++;break}if(n===p)for(const n in r)if(o.test(n)){const s=p;if("string"!=typeof r[n]){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}if(s!==p)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}I=s===p}else I=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}if(i!==p)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===d?d=[n]:d.push(n),p++}var k;if((k=h===p)&&l?(l=!1,u=[u,1]):k&&(l=!0,u=1),!l){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return null===d?d=[n]:d.push(n),p++,c.errors=d,!1}if(p=i,null!==d&&(i?d.length=i:d=null),a!==p)break}}}f=r===p}else f=!0}}}}}}}}}}}}}}}}}}return c.errors=d,0===p}},0:(e,t,n)=>{"use strict";const r=n(865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:s=0,before:a=!1,after:i=!0}=t;if(!a&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,c,l;const u=function(...t){const r=this,u=a&&!o;return clearTimeout(o),o=setTimeout((()=>{o=void 0,c&&(clearTimeout(c),c=void 0),i&&(l=e.apply(r,t))}),n),s>0&&!c&&i&&(c=setTimeout((()=>{c=void 0,o&&(clearTimeout(o),o=void 0),l=e.apply(r,t)}),s)),u&&(l=e.apply(r,t)),l};return r(u,e),u.cancel=()=>{o&&(clearTimeout(o),o=void 0),c&&(clearTimeout(c),c=void 0)},u}},635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>M,__assign:()=>a,__asyncDelegator:()=>P,__asyncGenerator:()=>_,__asyncValues:()=>O,__await:()=>S,__awaiter:()=>h,__classPrivateFieldGet:()=>x,__classPrivateFieldIn:()=>N,__classPrivateFieldSet:()=>j,__createBinding:()=>b,__decorate:()=>o,__disposeResources:()=>D,__esDecorate:()=>l,__exportStar:()=>m,__extends:()=>s,__generator:()=>g,__importDefault:()=>U,__importStar:()=>A,__makeTemplateObject:()=>C,__metadata:()=>f,__param:()=>c,__propKey:()=>d,__read:()=>v,__rest:()=>i,__rewriteRelativeImportExtension:()=>V,__runInitializers:()=>u,__setFunctionName:()=>p,__spread:()=>w,__spreadArray:()=>k,__spreadArrays:()=>I,__values:()=>y,default:()=>F});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function o(e,t,n,r){var s,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,n,i):s(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t,n,r,s,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),p=!1,f=n.length-1;f>=0;f--){var h={};for(var g in r)h[g]="access"===g?{}:r[g];for(var g in r.access)h.access[g]=r.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var b=(0,n[f])("accessor"===c?{get:d.get,set:d.set}:d[l],h);if("accessor"===c){if(void 0===b)continue;if(null===b||"object"!=typeof b)throw new TypeError("Object expected");(o=i(b.get))&&(d.get=o),(o=i(b.set))&&(d.set=o),(o=i(b.init))&&s.unshift(o)}else(o=i(b))&&("field"===c?s.unshift(o):d[l]=o)}u&&Object.defineProperty(u,r.name,d),p=!0}function u(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,n,r){return new(n||(n=Promise))((function(s,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}var b=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function m(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||b(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return i}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function I(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)r[s]=a[i];return r}function k(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){s[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||o(e,t)}))},t&&(r[e]=t(r[e])))}function o(e,t){try{(n=s[e](t)).value instanceof S?Promise.resolve(n.value.v).then(c,l):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function u(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function P(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:S(e[r](t)),done:!1}:s?s(t):t}:s}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,s){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,s,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},T=function(e){return T=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},T(e)};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=T(e),r=0;r<n.length;r++)"default"!==n[r]&&b(t,e,n[r]);return E(t,e),t}function U(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function j(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}function N(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function M(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var W="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function D(e){function t(t){e.error=e.hasError?new W(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function s(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,(function(e){return t(e),s()}))}else r|=1}catch(e){t(e)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function V(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,n,r,s,a){return n?t?".jsx":".js":!r||s&&a?r+s+"."+a.toLowerCase()+"js":e})):e}const F={__extends:s,__assign:a,__rest:i,__decorate:o,__param:c,__esDecorate:l,__runInitializers:u,__propKey:d,__setFunctionName:p,__metadata:f,__awaiter:h,__generator:g,__createBinding:b,__exportStar:m,__values:y,__read:v,__spread:w,__spreadArrays:I,__spreadArray:k,__await:S,__asyncGenerator:_,__asyncDelegator:P,__asyncValues:O,__makeTemplateObject:C,__importStar:A,__importDefault:U,__classPrivateFieldGet:x,__classPrivateFieldSet:j,__classPrivateFieldIn:N,__addDisposableResource:M,__disposeResources:D,__rewriteRelativeImportExtension:V}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{getConfigFields:()=>b});var t={};n.r(t),n.d(t,{keepAlive:()=>v,startKeepAlive:()=>m,stopKeepAlive:()=>y});var r={};n.r(r),n.d(r,{parseResponse:()=>w});var s={};n.r(s),n.d(s,{initTCP:()=>_,queryOnConnect:()=>k,sendCommand:()=>S});var a=n(278);const i="\r\n",o=3e4,c=23,l={ping:"W\\1002\\6001\\Pinging\\Chyron",changeColor:"C",macro:"E",changeFont:"F",setDriveAndMessageDirectory:"M",resendPrevious:"Q",updateTabDataField:"U",updateCurrentTemplate:"U\\*",control:"V",read:"V\\5\\3\\1\\",readUpdateIntelligentInterface:"V\\5\\13\\1\\",readUpdateExternalControl:"V\\5\\14\\1\\",writeTabData:"W",requestExternalUpdate:"X",assorted:"Y",eom:"\\\\",sep:"\\",pad:"0"},u={welcome:"Welcome to the ChyronHego Intelligent Interface Telnet Server on",inUse:"already in use"},d="*",p=[{code:"00000001",label:"Task timed out",status:a.InstanceStatus.UnknownError,loglevel:"error"},{code:"00000002",label:"Unimplemented system service",status:a.InstanceStatus.UnknownError,loglevel:"error"},{code:"00000003",label:"Illegal service",status:a.InstanceStatus.UnknownError,loglevel:"error"},{code:"00000004",label:"Illegal node",status:a.InstanceStatus.UnknownError,loglevel:"error"},{code:"00000005",label:"Object has been deleted",status:a.InstanceStatus.UnknownError,loglevel:"error"},{code:"00000006",label:"Invalid object ID",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000007",label:"Incorrect object ID",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000008",label:"Incorrect object type",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000009",label:"Object not found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000014",label:"Cannot create message - No task control blocks",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000015",label:"Cannot create message - No stack space available",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000016",label:"Cannot create the message -The stack space is too small",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000017",label:"Cannot create the message -Priority out of range",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000018",label:"Cannot start the process - Already active",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000019",label:"Cannot restart the process - The process was never started",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000020",label:"Cannot suspend process - Process is already suspended",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000021",label:"Cannot resume process - It was never suspended",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000022",label:"Cannot change priority - Out of range",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000023",label:"Illegal task register number",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000024",label:"Cannot delete - File is open",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000051",label:"Cannot create - No more queue control blocks",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000052",label:"Cannot create or send - No message buffers",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000053",label:"Cannot send - The message queue is full",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000054",label:"Cannot receive - The queue has been deleted",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000055",label:"Cannot receive - There are no pending messages",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000056",label:"Informative - There were tasks waiting when the queue was deleted",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000057",label:"Informative - There were messages waiting when the queue was deleted",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000066",label:"Cannot acquire - Semaphore not available",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000067",label:"Cannot acquire - Semaphore deleted while waiting",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00000068",label:"Informative - There were tasks waiting when the Semaphore was deleted",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002001",label:"An invalid function number was called",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002002",label:"pHILE failure was encountered",status:a.InstanceStatus.UnknownError,loglevel:"error"},{code:"00002003",label:"An inconsistent structure was found on the volume",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002005",label:"Init volume parameter error",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002006",label:"No more volume table entries",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002007",label:"Alien volume",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002008",label:"Volume already mounted",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002009",label:"Cannot unmount - there are files open",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000200A",label:"Device not mounted",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000200B",label:"File not found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000200C",label:"Illegal filename",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000200D",label:"No Default Directory found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000200E",label:"Directory file expected",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000200F",label:"Illegal annex size to create",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002010",label:"Null filename",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002011",label:"File already exists",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002012",label:"F list full",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002013",label:"File open",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002014",label:"Directory is not empty",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002015",label:"System or directory file",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002016",label:"Different devices (MOVE_F)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002017",label:"MOVE_F would result in non tree structure",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002018",label:"No more open file entries",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002019",label:"No more FCBs",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000201A",label:"Invalid FID, too large",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000201B",label:"Invalid FID, file closed",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000201C",label:"Indirect block full",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000201D",label:"Volume full",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000201E",label:"Bad position to lseek",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000201F",label:"Seek past end of file",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002021",label:"Illegal device (exceeded maximum)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002022",label:"Data is locked",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002023",label:"Bad fn in OPEN_VOL",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002024",label:"Illegal flush mode to MOUNT_VOL",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002025",label:"Illegal device name",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002026",label:"Bad MS/DOS call",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002027",label:"Illegal MS disk type",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002028",label:"More than one type of MS disk type",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002040",label:"Used Tab page",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002F01",label:"Insufficient data area",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00002F0E",label:"Check sum in pHILE",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000400B",label:"Check sum in pVERIFY+",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000040B2",label:"Checksum does not match computed checksum",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000040B3",label:"Requested message directory does not exist",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000412C",label:"Requested message file does not exist",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000412D",label:"Requested description file is not a Tab Description file",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000412E",label:"Requested field is not a valid field",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000412F",label:"Requested attribute (Color or Font) is not valid",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004130",label:"Field contains too much data (limit 64 characters)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004131",label:"Incorrect number of fields, R command does not match X command",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000415E",label:"Description message was created with old Tabs (Templates)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000415F",label:"Number of Tabs (Templates) exceeds limit (99)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004190",label:'Desired operation is not terminated with "\\\\"',status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004191",label:"The command format is incorrect",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004192",label:"An invalid operation has been requested",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004193",label:"An invalid Machine ID has been used",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00004194",label:"An invalid Effects ID has been used",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C2",label:"An invalid User ID has been used (either 1 or 2)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C3",label:"An invalid Keyboard ID has been used (either 1 or 2)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C4",label:"The command to set the active message compose frame buffer failed",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C5",label:"An invalid Frame Buffer ID was used (1, 2, or 3)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C6",label:"Error building into a non-displaying buffer; a bad message type was used or no Read Next command was issued",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C7",label:"Command to set Palette failed",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C8",label:"Color Key out of range; must be 1 - 8",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041C9",label:"Palette Index out of range; must be 1 - 31",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041CA",label:"Color Index out of range; must be 0 - 255",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041CB",label:"Key out of range; must be 0 - 1",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041CC",label:"Attempted to perform a Dual-User operation in Single-User mode",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041CD",label:"Timed out waiting for response",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041CE",label:"Error building Message Compose Palette",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041CF",label:"Error erasing displayed Frame Buffer",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D0",label:"Display/Non-Display flag out of range, i.e., 0 - 1",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D1",label:"No Intelligent Interface option",status:a.InstanceStatus.UnknownError,loglevel:"warn"},{code:"000041D2",label:"Bitmap not created",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D3",label:"Bitmap file not found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D4",label:"Invalid Field Number",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D5",label:"Missing Macro",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D6",label:"Macro Error",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D7",label:"Duplicate Macro",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D8",label:"Another Macro currently executing",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041D9",label:"Another Macro currently recording",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041DA",label:"Item referenced in Macro was not found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"000041DB",label:"File referenced in Macro was not found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005000",label:"New Playlist created",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005001",label:"Invalid Playlist Number",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005002",label:"No Playlist loaded",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005003",label:"File not Playlist",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005004",label:"Old version of Playlist",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005005",label:"Playlist already exists",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005006",label:"Playlist finished executing",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005010",label:"Invalid Playlist Entry Number",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005011",label:"Error allocating Playlist Entry",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005012",label:"Error adding Playlist Entry",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005020",label:"Invalid Channel allocated",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005021",label:"No Channel allocated",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005022",label:"No Frame Buffer allocated",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005030",label:"Invalid Still Message Number",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005031",label:"Still File not found",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005050",label:"Invalid IMAGESTOR! command",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005051",label:"Invalid Effect",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005052",label:"Invalid Pattern",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005053",label:"Invalid Speed",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005054",label:"Invalid Ease parameter",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005055",label:"Invalid Reverse parameter",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00005056",label:"Invalid Keyboard Lock Status",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007000",label:"No memory to create outline",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007004",label:"No Frame Buffer available for graph",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007008",label:"No memory for the Fill Line Buffer",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007100",label:"Line segment not between 0 and MAX_LINE_SEG",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007108",label:"Invalid Pulse parameter specified, i.e., not _PULSE(0) or _NON_PULSE(1)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000710C",label:"Invalid display buffer specified, i.e., not _DBUF(0) or _NBUF(1)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007110",label:"Invalid Trigger type specified, i.e., not _REGULAR_LINE(0), _PULSE_LINE(1) or _BOTH(2)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007114",label:"Invalid Mode specified, i.e., not _ENTIRE_LINE(0) or _LAST_SEGMENT(1)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007118",label:"Specified Pacing value outside of range, i.e., not between -30 and 30",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007200",label:"Brush not successfully created",status:a.InstanceStatus.UnknownWarning},{code:"00007204",label:"Invalid Edge specified, i.e., not _HARD(0), _SOFT(1), _SOFT_EDGE(2) or _CLEAR(3)",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007208",label:"Invalid Transparency, i.e., not between 0 and 100",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000720C",label:"Brush diameter out of range",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007210",label:"Invalid RGBA file name, i.e., RGBA value has more than 8 digits",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007300",label:"Point not added to outline",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00007304",label:"No outline exists for this line segment",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008001",label:"Wrong Read Effect task",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008002",label:"Bad Read Effect command",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008003",label:"Wrong Read Effect command",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008004",label:"Bad Read Effect Mode",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008005",label:"Bad Read Effect Ease",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008006",label:"Bad Read Effect Speed",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008007",label:"Bad Read Effect Type",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008008",label:"Bad Read Effect Reverse",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008009",label:"Bad Read Effect Row Direction",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000800A",label:"Bad Mix Effect Percent",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000800B",label:"Bad Mix Effect Soft Edge",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000800C",label:"Rows cannot be wiped left and right on old frame buffer",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000800D",label:"Must specify one row Up or Down",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000800E",label:"Invalid Effect type",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"0000800F",label:"No memory available for row type",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008010",label:"Frame buffer error occurred",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00008011",label:"Frame buffer in use by another task, e.g., Clock, Flash",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805001",label:"Bad Transform syntax",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805002",label:"Bad Transform script",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805003",label:"Bad Transform directory",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805004",label:"Bad Transform message",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805005",label:"Bad Transform value",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805006",label:"Ignored",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805007",label:"Bad Transform command",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"},{code:"00805008",label:"Transform not available",status:a.InstanceStatus.UnknownWarning,loglevel:"warn"}],f={type:"textinput",useVariables:!0,default:"",regex:a.Regex.SOMETHING},h={buffer:[{id:"0",label:"VGA"},{id:"1",label:"Frame Buffer 1"},{id:"2",label:"Frame Buffer 2"}],displayMode:[{id:"0",label:"Read Next (Prebuild)"},{id:"1",label:"Read & Display"}],readUpdate:[{id:l.readUpdateIntelligentInterface,label:"Read & Update All Intelligent Interface Fields"},{id:l.readUpdateExternalControl,label:"Read & Update External Update Fields"}]},g={macro:{...f,label:"Macro",id:"macro",tooltip:'Any VB Script command that can be executed via Lyric Macros may be contained in an E command.  Each command is separated by a "tilde" (~) character.'},macroInfo:{type:"static-text",id:"info",label:"Note the following about building macro subroutines using Intelligent Interface:",value:'The name of the macro subroutine that is built via Intelligent Interface cannot duplicate the name of any of the macros currently loaded in the Macros dialog box.  If there is a duplication, Intelligent Interface returns a 000041d7 (Duplicate Macro) error code. See below for A macro subroutine that is built via Intelligent Interface is not loaded into the Macros dialog box, and therefore does not appear in the dialog box. A macro subroutine that is successfully sent to Lyric can be overwritten, i.e., subsequent macros that are sent can have the same name.  The name restriction applies only to macros that are listed in the Macro dialog box. Additionally, if the macro engine is reset, the script must be resent. The E command can also trigger a loaded macro by executing its Hot Key.  Suppose that a macro script in Lyric is assigned the hot key trigger Alt + 3, meaning that it executes when Alt + 3 is pressed.  The following example uses a VB Script command to set up a shell object that passes commands to the Windows command interpreter.  A second VB Script command then sends the key combination Alt + 3, specified in VB Script as %3, triggering the macro script.E\\set WshShell = CreateObject ("WScript.Shell")~WshShell.SendKeys("%3")\\\\<CR><LF>'},readBuffer:{id:"buffer",label:"Buffer",type:"dropdown",choices:h.buffer,default:h.buffer[1].id,tooltip:"Specifies destination of the message",allowCustom:!1},readMessage:{...f,label:"Lyric Message Number",id:"message"},readDisplayMode:{id:"mode",label:"Display Mode",type:"dropdown",choices:h.displayMode,default:h.displayMode[1].id},readUpdate:{id:"update",label:"Update Mode",type:"dropdown",choices:h.readUpdate,default:h.readUpdate[0].id},customMessage:{...f,label:"Custom Message",id:"message",tooltip:"Send custom message. Module will appead \\\\\\r\\n to the end."},templateDataMessage:{...f,label:"Template Data Message",id:"templateDataMessage",tooltip:"Variable should return an integer",default:"5501"},lyricMessage:{...f,label:"Lyric Message Number",id:"lyricMessageNumber",tooltip:"Variable should return an integer",default:"5500"},templateData:{...f,label:"Template Data",id:"templates",tooltip:"Can include multiple template fields seperated by \\",default:""},templateDataSingle:{...f,label:"Template Data",id:"templatesData",tooltip:"Data that is to be fed to specified Template",default:""},templateNumber:{...f,label:"Template Number",id:"templateNumber",tooltip:'The number that should be cited here is the field\'s specific identifying number as set in the Number control, and NOT a value representing the order in which the field was created. In other words, a command for Field 7 should be cite "7" and not the value "2", which specifies the order in which the fields were created.r',default:"1"},templateInfo:{type:"static-text",id:"info",label:"The following should be noted regarding W commands:",value:"A single-space update within a W command skips a 2D Text Template if and only if Auto-Erase is not enabled in the 2D Text Template dialog box.  The 2D Text Template dialog box is accessed by right-clicking on a 2D Text Template, then selecting Template Properties from the context-sensitive menu. A null update (\\\\) within a W command skips a 2D Text Template, regardless of Auto-Erase setting. If a W command attempts to overwrite a read-only file, an error is returned. When a Template Data Message created using the W command is read, Lyric displays the Message Number of the Template Description Message on the Canvas Title Bar. A Template Data Message can also be created by selectively recording (Ctrl + Record + D) the message from Lyric."},updateTemplateInfo:{type:"static-text",id:"info",label:"Note:",value:"The U command is used to update Template data of a single Template in a preexisting Template Data Message."},updateCurrentTemplateInfo:{type:"static-text",id:"info",label:"Note:",value:"Although the Lyric interface allows the operator to assign the same value to multiple templates using the Number control, this should be avoided. Assigning the same numerical designation to multiple templates will cause the U/* command not to work correctly. This condition may occur due to manual alteration of field numbers or Lyric numbering new fields following manual deletion and subsequent addition of template fields."},messagePath:{...f,label:"Message Directory",id:"msgPath",tooltip:"If a colon ( : ) is to be used in the file path information, you may use back slashes ( \\ ), but if using forward slashes ( / ), do not include a colon with the drive letter. ",default:"C:\\Data\\Messages"}};function b(){return[{type:"textinput",id:"host",label:"Host",width:8,regex:a.Regex.HOST},{type:"textinput",id:"port",label:"Port",width:4,regex:a.Regex.PORT,default:c},{type:"textinput",id:"keepAlive",label:"Keep Alive Message",width:6,regex:a.Regex.SOMETHING,default:l.ping,tooltip:`Sent after ${o/1e3} seconds of inactivity to maintain TCP Connection`},{type:"checkbox",id:"verbose",label:"Verbose Logging",width:4,default:!1}]}function m(){this.keepAliveTimer&&clearTimeout(this.keepAliveTimer),this.keepAliveTimer=setTimeout((()=>{this.keepAlive()}),o)}function y(){this.keepAliveTimer&&(clearTimeout(this.keepAliveTimer),delete this.keepAliveTimer)}function v(){this.sendCommand(this.config.keepAlive).catch((()=>{}))}function w(e){if(e.startsWith(d))return this.checkStatus(a.InstanceStatus.Ok),void(this.config.verbose&&this.log("debug",`Message Success: ${e}`));if(e.startsWith(u.welcome))return this.checkStatus(a.InstanceStatus.Ok,"Connected"),void this.log("info",`Logged In: ${e}`);if(e.search(u.inUse)>=0)return this.checkStatus(a.InstanceStatus.ConnectionFailure,"Port In Use"),void this.log("warn",`Port Already In Use: ${e}`);if(!e.startsWith(l.control)){if(""===e||" "===e)return;{const t=e.toUpperCase().padStart(8,l.pad);for(const e of p)if(t===e.code)return this.log(e.loglevel,`Error returned: ${e.code}: ${e.label}`),void this.checkStatus(e.status,e.label);return this.checkStatus(a.InstanceStatus.UnknownWarning,"Unexpected Response"),void this.log("warn",`Unexpected Response: ${e}`)}}{let t=e.split(l.sep);try{const n=t[2].toUpperCase().padStart(8,l.pad);for(const t of p)if(n===t.code)return this.log("warn",`Error returned: ${e}: ${t.label}`),void this.checkStatus(t.status,t.label)}catch{if(this.config.verbose)return void this.log("debug",`Control error message - unexpected array length: ${t.length} from ${e}`)}}}const I=require("node:buffer");function k(){this.config.verbose&&this.log("debug","queryOnConnect"),this.subscribeActions(),this.subscribeFeedbacks(),this.startKeepAlive()}async function S(e=this.config.keepAlive){return await this.queue.add((async()=>{if(void 0!==this.socket&&this.socket.isConnected){this.config.verbose&&this.log("debug",`Sending message: ${e}`);const t=await this.socket.send(e+l.eom+i);return t&&this.startKeepAlive(),t}this.log("warn",`sendCommand: Socket not connected, tried to send: ${e}`)}))}function _(e,t){this.config.verbose&&this.log("debug","initTCP"),void 0!==this.socket&&(this.stopKeepAlive(),this.socket.destroy(),delete this.socket),void 0===e||isNaN(t)?this.checkStatus(a.InstanceStatus.BadConfig,`Invalid host (${e}) or port (${t})`):(this.config.verbose&&this.log("debug",`Creating New Socket to ${e}:${t}`),this.checkStatus(a.InstanceStatus.Connecting,`Connecting to Lyric: ${e}:${t}`),this.socket=new a.TCPHelper(e,t),this.socket.on("status_change",((e,t)=>{this.checkStatus(e,t)})),this.socket.on("error",(e=>{this.log("error",`Network error: ${e.message}`)})),this.socket.on("connect",(()=>{this.log("info",`Connected to ${e}:${t}`),this.receiveBuffer=I.Buffer.from(""),this.queryOnConnect()})),this.socket.on("data",(e=>{let t=0,n="",r=0;for(this.receiveBuffer+=e;-1!==(t=this.receiveBuffer.indexOf(i,r));)n=this.receiveBuffer.substring(r,t),r=t+2,this.parseResponse(n.toString());this.receiveBuffer=this.receiveBuffer.substring(r)})))}var P=n(228);class O extends Error{constructor(e){super(e),this.name="TimeoutError"}}class C extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const E=e=>void 0===globalThis.DOMException?new C(e):new DOMException(e),T=e=>{const t=void 0===e.reason?E("This operation was aborted."):e.reason;return t instanceof Error?t:E(t)};class A{#X=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#X[this.size-1].priority>=t.priority)return void this.#X.push(n);const r=function(e,t){let n=0,r=e.length;for(;r>0;){const a=Math.trunc(r/2);let i=n+a;s=e[i],t.priority-s.priority<=0?(n=++i,r-=a+1):r=a}var s;return n}(this.#X,n);this.#X.splice(r,0,n)}dequeue(){const e=this.#X.shift();return e?.run}filter(e){return this.#X.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#X.length}}class U extends P{#ee;#te;#ne=0;#re;#se;#ae=0;#ie;#oe;#X;#ce;#le=0;#ue;#de;#pe;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:A,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#ee=e.carryoverConcurrencyCount,this.#te=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#re=e.intervalCap,this.#se=e.interval,this.#X=new e.queueClass,this.#ce=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#pe=!0===e.throwOnTimeout,this.#de=!1===e.autoStart}get#fe(){return this.#te||this.#ne<this.#re}get#he(){return this.#le<this.#ue}#ge(){this.#le--,this.#be(),this.emit("next")}#me(){this.#ye(),this.#ve(),this.#oe=void 0}get#we(){const e=Date.now();if(void 0===this.#ie){const t=this.#ae-e;if(!(t<0))return void 0===this.#oe&&(this.#oe=setTimeout((()=>{this.#me()}),t)),!0;this.#ne=this.#ee?this.#le:0}return!1}#be(){if(0===this.#X.size)return this.#ie&&clearInterval(this.#ie),this.#ie=void 0,this.emit("empty"),0===this.#le&&this.emit("idle"),!1;if(!this.#de){const e=!this.#we;if(this.#fe&&this.#he){const t=this.#X.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#ve(),!0)}}return!1}#ve(){this.#te||void 0!==this.#ie||(this.#ie=setInterval((()=>{this.#ye()}),this.#se),this.#ae=Date.now()+this.#se)}#ye(){0===this.#ne&&0===this.#le&&this.#ie&&(clearInterval(this.#ie),this.#ie=void 0),this.#ne=this.#ee?this.#le:0,this.#Ie()}#Ie(){for(;this.#be(););}get concurrency(){return this.#ue}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#ue=e,this.#Ie()}async#ke(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#pe,...t},new Promise(((n,r)=>{this.#X.enqueue((async()=>{this.#le++,this.#ne++;try{t.signal?.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=function(e,t){const{milliseconds:n,fallback:r,message:s,customTimers:a={setTimeout,clearTimeout}}=t;let i;const o=new Promise(((o,c)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:n}=t;n.aborted&&c(T(n));const r=()=>{c(T(n))};n.addEventListener("abort",r,{once:!0}),e.finally((()=>{n.removeEventListener("abort",r)}))}if(n===Number.POSITIVE_INFINITY)return void e.then(o,c);const l=new O;i=a.setTimeout.call(void 0,(()=>{if(r)try{o(r())}catch(e){c(e)}else"function"==typeof e.cancel&&e.cancel(),!1===s?o():s instanceof Error?c(s):(l.message=s??`Promise timed out after ${n} milliseconds`,c(l))}),n),(async()=>{try{o(await e)}catch(e){c(e)}})()})).finally((()=>{o.clear()}));return o.clear=()=>{a.clearTimeout.call(void 0,i),i=void 0},o}(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#ke(t.signal)]));const s=await r;n(s),this.emit("completed",s)}catch(e){if(e instanceof O&&!t.throwOnTimeout)return void n();r(e),this.emit("error",e)}finally{this.#ge()}}),t),this.emit("add"),this.#be()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#de?(this.#de=!1,this.#Ie(),this):this}pause(){this.#de=!0}clear(){this.#X=new this.#ce}async onEmpty(){0!==this.#X.size&&await this.#Se("empty")}async onSizeLessThan(e){this.#X.size<e||await this.#Se("next",(()=>this.#X.size<e))}async onIdle(){0===this.#le&&0===this.#X.size||await this.#Se("idle")}async#Se(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))}get size(){return this.#X.size}sizeBy(e){return this.#X.filter(e).length}get pending(){return this.#le}get isPaused(){return this.#de}}class x extends a.InstanceBase{constructor(n){super(n),Object.assign(this,{...e,...t,...r,...s}),this.clearToTx=!0,this.queue=new U({concurrency:1,interval:20,intervalCap:1}),this.currentStatus={status:a.InstanceStatus.Disconnected,message:""}}async init(e){this.configUpdated(e)}async destroy(){this.log("debug",`destroy ${this.id}`),this.stopKeepAlive(),this.queue.clear(),void 0!==this.socket&&(this.socket.destroy(),delete this.socket)}async configUpdated(e){this.queue.clear(),this.config=e,this.checkStatus(a.InstanceStatus.Connecting),this.updateActions(),this.updateFeedbacks(),this.updateVariableDefinitions(),this.initTCP(this.config.host,this.config.port)}checkStatus(e=a.InstanceStatus.Disconnected,t=""){return(e!==this.currentStatus.status||t!==this.currentStatus.message)&&(this.updateStatus(e,t.toString()),this.currentStatus.status=e,this.currentStatus.message=t,!0)}updateActions(){!async function(e){let t=[];t.sendMacro={name:"Send and Execute Macro",options:[g.macro,g.macroInfo],callback:async({options:t})=>{const n=await e.parseVariablesInString(t.macro);return await e.sendCommand(l.macro+l.sep+n)}},t.readMessage={name:"Read Message",options:[g.readBuffer,g.readMessage,g.readDisplayMode],callback:async({options:t})=>{const n=parseInt(await e.parseVariablesInString(t.message));if(!(isNaN(n)||n<0))return await e.sendCommand(l.read+t.buffer+l.sep+n+l.sep+t.mode);e.log("warn",`Invalid Message Number ${n} From: ${t.message}`)}},t.readUpdateMessage={name:"Read & Update Message",options:[g.readUpdate,g.readBuffer,g.readMessage,g.readDisplayMode,g.templateData],callback:async({options:t})=>{const n=parseInt(await e.parseVariablesInString(t.message)),r=await e.parseVariablesInString(t.templates);if(!(isNaN(n)||n<0))return await e.sendCommand(t.update+t.buffer+l.sep+n+l.sep+t.mode+l.sep+r);e.log("warn",`Invalid Message Number ${n} From: ${t.message}`)}},t.customMessage={name:"Custom Message",options:[g.customMessage],callback:async({options:t})=>{const n=await e.parseVariablesInString(t.message);return await e.sendCommand(n)}},t.templateDataMessage={name:"Template Data Message",options:[g.templateDataMessage,g.lyricMessage,g.templateData,g.templateInfo],callback:async({options:t})=>{const n=parseInt(await e.parseVariablesInString(t.templateDataMessage)),r=parseInt(await e.parseVariablesInString(t.lyricMessageNumber)),s=await e.parseVariablesInString(t.templates);if(!(isNaN(n)||n<0||isNaN(r)||r<0))return await e.sendCommand(l.writeTabData+l.sep+n+l.sep+r+l.sep+s);e.log("warn",`Invalid Template Number: ${n} or Lyric Message Number: ${r}`)}},t.updateTemplateData={name:"Update Template Data Message",options:[g.templateDataMessage,g.templateNumber,g.templateDataSingle,g.updateTemplateInfo],callback:async({options:t})=>{const n=parseInt(await e.parseVariablesInString(t.templateDataMessage)),r=parseInt(await e.parseVariablesInString(t.templateNumber)),s=await e.parseVariablesInString(t.templatesData);if(!(isNaN(r)||r<0||isNaN(n)||n<0))return await e.sendCommand(l.updateTabDataField+l.sep+n+l.sep+r+l.sep+s);e.log("warn",`Invalid Template Number: ${r} or Templdate Data Message Number: ${n}`)}},t.updateCurrentTemplateData={name:"Update Current Template Data Message",options:[g.templateDataMessage,g.templateNumber,g.templateDataSingle,g.updateCurrentTemplateInfo],callback:async({options:t})=>{const n=parseInt(await e.parseVariablesInString(t.templateDataMessage)),r=parseInt(await e.parseVariablesInString(t.templateNumber)),s=await e.parseVariablesInString(t.templatesData);if(!(isNaN(r)||r<0||isNaN(n)||n<0))return await e.sendCommand(l.updateCurrentTemplate+l.sep+n+l.sep+r+l.sep+s);e.log("warn",`Invalid Template Number: ${r} or Template Data Message Number: ${n}`)}},t.updateMessagePath={name:"Update Message Path",options:[g.messagePath],callback:async({options:t})=>await e.sendCommand(l.setDriveAndMessageDirectory+l.sep+await e.parseVariablesInString(t.msgPath))},e.setActionDefinitions(t)}(this)}updateFeedbacks(){!async function(e){e.setFeedbackDefinitions([])}(this)}updateVariableDefinitions(){!async function(e){e.setVariableDefinitions([])}(this)}}(0,a.runEntrypoint)(x,[])})()})();