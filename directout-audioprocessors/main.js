/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={0:(e,t,n)=>{"use strict";const s=n(865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:i=0,before:o=!1,after:r=!0}=t;if(!o&&!r)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,l,c;const d=function(...t){const s=this,d=o&&!a;return clearTimeout(a),a=setTimeout(()=>{a=void 0,l&&(clearTimeout(l),l=void 0),r&&(c=e.apply(s,t))},n),i>0&&!l&&r&&(l=setTimeout(()=>{l=void 0,a&&(clearTimeout(a),a=void 0),c=e.apply(s,t)},i)),d&&(c=e.apply(s,t)),c};return s(d,e),d.cancel=()=>{a&&(clearTimeout(a),a=void 0),l&&(clearTimeout(l),l=void 0)},d}},17:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var s,i,o;if(Array.isArray(t)){if((s=t.length)!=n.length)return!1;for(i=s;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((s=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=s;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=s;0!==i--;){var r=o[i];if(!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}},18:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(635);s.__exportStar(n(730),t),s.__exportStar(n(649),t),s.__exportStar(n(386),t),s.__exportStar(n(400),t),s.__exportStar(n(983),t),s.__exportStar(n(104),t),s.__exportStar(n(258),t),s.__exportStar(n(131),t),s.__exportStar(n(371),t),s.__exportStar(n(786),t),s.__exportStar(n(132),t)},22:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===s(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=i,t.convertMapToObject=function(e){return Array.from(e).reduce(function(e,t){var s,i,o=(i=2,function(e){if(Array.isArray(e))return e}(s=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,o=[],r=!0,a=!1;try{for(n=n.call(e);!(r=(s=n.next()).done)&&(o.push(s.value),!t||o.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(a)throw i}}return o}}(s,i)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(e,t):void 0}}(s,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0],a=o[1];return e[r]=a,e},{})},t.isArguments=function(e){return null!=e&&i(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var o={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=o,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(o.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),s=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},i=function(e){return"="===e?-1:n[e]},o=0;o<64;o++)n[s(o)]=o;var r=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},a={encode:function(e){if("string"==typeof e){var t=e;e=r(t.length);for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=i}}for(var o=[],a=null,l=null,c=null,d=null,p=0;p<e.length;p++)switch(p%3){case 0:a=e[p]>>2&63,l=(3&e[p])<<4;break;case 1:l|=e[p]>>4&15,c=(15&e[p])<<2;break;case 2:c|=e[p]>>6&3,d=63&e[p],o.push(s(a)),o.push(s(l)),o.push(s(c)),o.push(s(d)),a=null,l=null,c=null,d=null}return null!=a&&(o.push(s(a)),o.push(s(l)),null==c?o.push("="):o.push(s(c)),null==d&&o.push("=")),o.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var n=r(t),s=null,o=null,a=null,l=0,c=0;c<e.length;c++){var d=e.charAt(c),p=i(d);switch(c%4){case 0:if(p<0)throw new Error("invalid base64 string");s=p<<2;break;case 1:if(p<0)throw new Error("invalid base64 string");s|=p>>4,n[l++]=s,o=(15&p)<<4;break;case 2:p>=0&&(o|=p>>2,n[l++]=o,a=(3&p)<<6);break;case 3:p>=0&&(n[l++]=a|p)}}return n},newBinary:r};t.Base64=a},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,i,o,r,a){var l=i[t];switch(n(l)){case"string":return s(l);case"number":return isFinite(l)?String(l):"null";case"boolean":return String(l);case"object":if(!l)return"null";var c,d=r+o,p=[];if(Array.isArray(l)||{}.hasOwnProperty.call(l,"callee")){for(var u=l.length,h=0;h<u;h+=1)p[h]=e(h,l,o,d,a)||"null";return c=0===p.length?"[]":d?"[\n"+d+p.join(",\n"+d)+"\n"+r+"]":"["+p.join(",")+"]"}var b=Object.keys(l);return a&&(b=b.sort()),b.forEach(function(t){(c=e(t,l,o,d,a))&&p.push(s(t)+(d?": ":":")+c)}),c=0===p.length?"{}":d?"{\n"+d+p.join(",\n"+d)+"\n"+r+"}":"{"+p.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var s="",o=0;o<n.indent;o++)s+=" ";n.indent=s}return i("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,s),o.exports}var i={};!function(){var e=i,t=s(2).Base64,n=s(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var o=s(1),r={};e.EJSON=r;var a=new Map;r.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var l=[{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$date")&&1===(0,o.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$regexp")&&(0,o.hasOwn)(e,"$flags")&&2===(0,o.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$InfNaN")&&1===(0,o.lengthOf)(e)},matchObject:o.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$binary")&&1===(0,o.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,o.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$escape")&&1===(0,o.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,o.lengthOf)(e);1!==n&&2!==n||(t=l.some(function(t){return t.matchJSONValue(e)}))}return t},toJSONValue:function(e){var t={};return(0,o.keysOf)(e).forEach(function(n){t[n]=r.toJSONValue(e[n])}),{$escape:t}},fromJSONValue:function(e){var t={};return(0,o.keysOf)(e.$escape).forEach(function(n){t[n]=r.fromJSONValue(e.$escape[n])}),t}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$type")&&(0,o.hasOwn)(e,"$value")&&2===(0,o.lengthOf)(e)},matchObject:function(e){return r._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed(function(){return e.toJSONValue()});return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var s=a.get(t);return n._noYieldsAllowed(function(){return s(e.$value)})}}];r._isCustomType=function(e){return e&&(0,o.isFunction)(e.toJSONValue)&&(0,o.isFunction)(e.typeName)&&a.has(e.typeName())},r._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,o.convertMapToObject)(a)},r._getConverters=function(){return l};var c=function(e){for(var t=0;t<l.length;t++){var n=l[t];if(n.matchObject(e))return n.toJSONValue(e)}},d=function e(t){if(null===t)return null;var n=c(t);return void 0!==n?n:(0,o.isObject)(t)?((0,o.keysOf)(t).forEach(function(n){var s=t[n];if((0,o.isObject)(s)||void 0===s||(0,o.isInfOrNaN)(s)){var i=c(s);i?t[n]=i:e(s)}}),t):t};r._adjustTypesToJSONValue=d,r.toJSONValue=function(e){var t=c(e);if(void 0!==t)return t;var n=e;return(0,o.isObject)(e)&&(n=r.clone(e),d(n)),n};var p=function(e){if((0,o.isObject)(e)&&null!==e){var t=(0,o.keysOf)(e);if(t.length<=2&&t.every(function(e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var n=0;n<l.length;n++){var s=l[n];if(s.matchJSONValue(e))return s.fromJSONValue(e)}}return e},u=function e(t){if(null===t)return null;var n=p(t);return n!==t?n:(0,o.isObject)(t)?((0,o.keysOf)(t).forEach(function(n){var s=t[n];if((0,o.isObject)(s)){var i=p(s);if(s!==i)return void(t[n]=i);e(s)}}),t):t};r._adjustTypesFromJSONValue=u,r.fromJSONValue=function(e){var t=p(e);return t===e&&(0,o.isObject)(e)&&(t=r.clone(e),u(t)),t},r.stringify=(0,o.handleError)(function(e,t){var n=r.toJSONValue(e);return t&&(t.canonical||t.indent)?s(4)(n,t):JSON.stringify(n)}),r.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return r.fromJSONValue(JSON.parse(e))},r.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},r.equals=function(e,t,n){var s,i=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,o.isObject)(e)||!(0,o.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(r.isBinary(e)&&r.isBinary(t)){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}if((0,o.isFunction)(e.equals))return e.equals(t,n);if((0,o.isFunction)(t.equals))return t.equals(e,n);var a,l=Array.isArray(e),c=Array.isArray(t);if(l!==c)return!1;if(l&&c){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(!r.equals(e[s],t[s],n))return!1;return!0}switch(r._isCustomType(e)+r._isCustomType(t)){case 1:return!1;case 2:return r.equals(r.toJSONValue(e),r.toJSONValue(t))}var d=(0,o.keysOf)(e),p=(0,o.keysOf)(t);return i?(s=0,a=d.every(function(i){return!(s>=p.length||i!==p[s]||!r.equals(e[i],t[p[s]],n)||(s++,0))})):(s=0,a=d.every(function(i){return!!(0,o.hasOwn)(t,i)&&!!r.equals(e[i],t[i],n)&&(s++,!0)})),a&&s===p.length},r.clone=function(e){var t;if(!(0,o.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(r.isBinary(e)){t=r.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(r.clone):(0,o.isArguments)(e)?Array.from(e).map(r.clone):(0,o.isFunction)(e.clone)?e.clone():r._isCustomType(e)?r.fromJSONValue(r.clone(r.toJSONValue(e)),!0):(t={},(0,o.keysOf)(e).forEach(function(n){t[n]=r.clone(e[n])}),t)},r.newBinary=t.newBinary}(),e.exports=i.EJSON}()},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const s=n(635),i=n(593),o=s.__importDefault(n(0));function r(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#e;#t;#n;#s;#i=new Map;#o=new Map;#r=new Map;#a=new Map;#l;get parseVariablesContext(){return this.#l}constructor(e,t,n,s){this.#e=e,this.#t=t,this.#n=n,this.#s=s}getDefinitionIds(){return Array.from(this.#i.keys())}getInstanceIds(){return Array.from(this.#o.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#o.get(t);if(e){const t=this.#i.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(r(t.type,e),n)).catch(t=>{this.#s("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}if(!n||n.disabled)this.#o.delete(t);else{this.#o.set(t,{...n,referencedVariables:null});const e=this.#i.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#e({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(r(e.type,n),t)).catch(e=>{this.#s("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)})}this.#c(t)}}}async handleLearnFeedback(e){const t=this.#i.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#a.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#o.values())if(!this.#a.has(e.id)&&e.referencedVariables)for(const s of e.referencedVariables)if(t.has(s)){n.add(e.id);break}for(const e of n)setImmediate(()=>{this.#c(e)})}#c(e){const t=this.#a.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#o.get(e);if(!n)return;const s=n,i={needsRecheck:!1,changedVariables:new Set};this.#a.set(e,i),Promise.resolve().then(async()=>{const t=this.#i.get(s.feedbackId);let n;const i=new Set;if(t){this.#l=`Feedback ${s.feedbackId} (${e})`;const o={parseVariablesInString:async t=>{const n=await this.#e({text:t,controlId:s.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)i.add(e);return n.text}};n="boolean"===t.type?t.callback({...r("boolean",s),type:"boolean"},o):t.callback({...r("advanced",s),type:"advanced",image:s.image},o),this.#l=void 0}const o=await n;this.#r.set(e,{id:e,controlId:s.controlId,value:o}),this.#d(),s.referencedVariables=i.size>0?Array.from(i):null}).catch(e=>{console.error(`Feedback check failed: ${JSON.stringify(s)} - ${e?.message??e} ${e?.stack}`)}).finally(()=>{this.#l=void 0,this.#a.delete(e);let t=!1;if(s.referencedVariables)for(const e of s.referencedVariables)if(i.changedVariables.has(e)){t=!0;break}(t||i.needsRecheck)&&setImmediate(()=>{this.#c(e)})})}#d=(0,o.default)(()=>{const e=this.#r;this.#r=new Map,e.size>0&&this.#t({values:Array.from(e.values())})},{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#i.clear();for(const[n,s]of Object.entries(e))s&&(t.push({id:n,name:s.name,description:s.description,options:(0,i.serializeIsVisibleFn)(s.options),type:s.type,defaultStyle:"boolean"===s.type?s.defaultStyle:void 0,hasLearn:!!s.learn,learnTimeout:s.learnTimeout,showInvert:"boolean"===s.type&&s.showInvert}),this.#i.set(n,s));this.#n({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#o.entries())this.#i.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#c(e)}checkFeedbacksById(e){for(const t of e)this.#c(t)}_getAllFeedbacks(){return Array.from(this.#o.values()).map(e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options}))}subscribeFeedbacks(e){let t=Array.from(this.#o.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.feedbackId)));for(const e of t){const t=this.#i.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(r(t.type,e),n)).catch(t=>{this.#s("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}unsubscribeFeedbacks(e){let t=Array.from(this.#o.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.feedbackId)));for(const e of t){const t=this.#i.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(r(t.type,e),n)).catch(t=>{this.#s("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}}},44:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const s=n(635),i=n(360),o=s.__importDefault(n(22));t.IpcWrapper=class{#p;#u;#h;#b=1;#g=new Map;constructor(e,t,n){this.#p=e,this.#u=t,this.#h=n}async sendWithCb(e,t,n,s=0){s<=0&&(s=this.#h);const i={timeout:void 0,resolve:()=>null,reject:()=>null},r=new Promise((e,t)=>{i.resolve=e,i.reject=t});this.#b>268435456&&(this.#b=1);const a=this.#b++;this.#g.set(a,i),this.#u({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:a});const l=new Error("Call timed out");return i.timeout=setTimeout(()=>{i.reject(n?n():l),this.#g.delete(a)},s),r}sendWithNoCb(e,t){this.#u({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#p[e.name];if(!t)return void(e.callbackId&&this.#u({direction:"response",callbackId:e.callbackId,success:!1,payload:o.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?o.default.parse(e.payload):void 0).then(t=>{e.callbackId&&this.#u({direction:"response",callbackId:e.callbackId,success:!0,payload:o.default.stringify(t)})},t=>{e.callbackId&&this.#u({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):o.default.stringify(t)})});break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#g.get(e.callbackId);if(this.#g.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const n=e.payload?o.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"object"==typeof n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,i.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},77:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,s.default)(e)){const e=s.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const s=n(635).__importDefault(n(281))},104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const s=n(635).__importDefault(n(228)),i=n(203),o=n(895);class r extends s.default{#f;#m;#y;get isConnected(){return this.#f.isConnected}get isConnecting(){return this.#f.isConnecting}get isDestroyed(){return this.#f.isDestroyed}constructor(e,t,n){super(),this.#f=new o.TCPHelper(e,t,n),this.#m=new a,this.#f._socket.pipe(this.#m),this.#f.on("connect",()=>this.emit("connect")),this.#f.on("end",()=>this.emit("end")),this.#f.on("error",e=>this.emit("error",e)),this.#f.on("status_change",(e,t)=>this.emit("status_change",e,t)),this.#m.on("iac",(e,t)=>this.emit("iac",e,t)),this.#m.on("sb",e=>this.emit("sb",e)),this.#m.on("data",e=>this.emit("data",e)),this.#m.on("drain",()=>this.emit("drain")),this.#y=setTimeout(()=>{this.#y=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)},5e3)}connect(){return this.#f.connect()}async send(e){return this.#f.send(e)}destroy(){this.#f.destroy(),void 0!==this.#y&&(clearTimeout(this.#y),this.#y=void 0),this.#m.removeAllListeners(),this.#m.destroy()}}t.TelnetHelper=r;class a extends i.Transform{#_;#v;#x;constructor(e){super(e),this.#_=Buffer.alloc(0),this.#v=Buffer.alloc(0),this.#x=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#I(e[t]);const s=this.#k();s.length&&this.push(s),n()}#I(e){if(0===this.#x){if(255===e)return void(this.#x=255);this.#_=Buffer.concat([this.#_,Buffer.from([e])])}else if(255===this.#x)switch(e){case 250:case 251:case 252:case 253:case 254:this.#x=e;break;default:this.#x=0}else{if(this.#x>=251&&this.#x<=254){let t;switch(this.#x){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#x=0)}if(250===this.#x){if(240===e)return this.emit("sb",this.#v),this.#x=0,void(this.#v=Buffer.alloc(0));this.#v=Buffer.concat([this.#v,Buffer.from([e])])}}}#k(){const e=this.#_;return this.#_=Buffer.alloc(0),e}}},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var s=n(895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return s.TCPHelper}});var i=n(118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return i.TelnetHelper}});var o=n(259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return o.UDPHelper}})},194:e=>{"use strict";e.exports=require("dgram")},203:e=>{"use strict";e.exports=require("stream")},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function s(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,s,o,r){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new i(s,o||e,r),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function r(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,s,i=[];if(0===this._eventsCount)return i;for(s in e=this._events)t.call(e,s)&&i.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var i=0,o=s.length,r=new Array(o);i<o;i++)r[i]=s[i].fn;return r},a.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,i,o,r){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,d=this._events[a],p=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,i),!0;case 5:return d.fn.call(d.context,t,s,i,o),!0;case 6:return d.fn.call(d.context,t,s,i,o,r),!0}for(c=1,l=new Array(p-1);c<p;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var u,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),p){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,s);break;case 4:d[c].fn.call(d[c].context,t,s,i);break;default:if(!l)for(u=1,l=new Array(p-1);u<p;u++)l[u-1]=arguments[u];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,s,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return r(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||s&&a.context!==s||r(this,o);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==t||i&&!a[l].once||s&&a[l].context!==s)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:r(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&r(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},250:(e,t,n)=>{"use strict";const s=n(17);s.code='require("ajv/dist/runtime/equal").default',t.A=s},258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const s=n(635).__importDefault(n(194)),i=n(228),o=n(400);class r extends i.EventEmitter{#w;#A;#S;#M;#$=!1;#O;#y;get isDestroyed(){return this.#$}constructor(e,t,n){super(),this.#w=e,this.#A=t,this.#M={...n},this.#S=s.default.createSocket("udp4");try{this.#S.bind(this.#M.bind_port||0,this.#M.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#M.bind_ip||"0.0.0.0"}:${this.#M.bind_port||0}`)}void 0!==this.#M.ttl&&this.#S.setTTL(this.#M.ttl),void 0!==this.#M.multicast_ttl&&this.#S.setMulticastTTL(this.#M.multicast_ttl),this.#S.on("error",e=>{this.#P(o.InstanceStatus.UnknownError,e.message),this.emit("error",e)}),this.#S.on("listening",()=>{this.#M.broadcast&&this.#S.setBroadcast(!0),this.#M.multicast_interface&&this.#S.setMulticastInterface(this.#M.multicast_interface),this.#P(o.InstanceStatus.Ok),this.emit("listening")}),this.#S.on("message",(e,t)=>this.emit("data",e,t)),this.#y=setTimeout(()=>{this.#$||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#w}:${this.#A} is missing an error handler!`)},5e3)}async send(e){if(this.#$)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise((t,n)=>{this.#S.send(e,this.#A,this.#w,e=>{e?n(e):t()})})}destroy(){this.#$=!0,void 0!==this.#y&&(clearTimeout(this.#y),this.#y=void 0),this.#S.removeAllListeners(),this.#S.close(),this.removeAllListeners()}#P(e,t){this.#O!=e&&(this.#O=e,this.emit("status_change",e,t))}}t.UDPHelper=r},278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const s=n(635);s.__exportStar(n(77),t),s.__exportStar(n(18),t),s.__exportStar(n(581),t);var i=n(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return i.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return i.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return i.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return i.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return i.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return i.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return i.assertNever}}),s.__exportStar(n(160),t);var o=n(326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return o.runEntrypoint}})},281:(e,t,n)=>{"use strict";e.exports=l,e.exports.default=l;const s={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}}},i={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1},o=Object.prototype.hasOwnProperty,r=n(250).A,a=new RegExp("","u");function l(e,{instancePath:t="",parentData:n,parentDataProperty:c,rootData:d=e}={}){let p=null,u=0;if(0===u){if(!e||"object"!=typeof e||Array.isArray(e))return l.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return l.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=u;for(const n in e)if(!o.call(s.properties,n))return l.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===u){if(void 0!==e.$schema){const n=u;if("string"!=typeof e.$schema)return l.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=n===u}else h=!0;if(h){if(void 0!==e.id){const n=u;if("string"!=typeof e.id)return l.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.name){const n=u;if("string"!=typeof e.name)return l.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.shortname){const n=u;if("string"!=typeof e.shortname)return l.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.description){const n=u;if("string"!=typeof e.description)return l.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.version){const n=u;if("string"!=typeof e.version)return l.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.license){const n=u;if("string"!=typeof e.license)return l.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.repository){const n=u;if("string"!=typeof e.repository)return l.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.bugs){const n=u;if("string"!=typeof e.bugs)return l.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.maintainers){let n=e.maintainers;const s=u;if(u===s){if(!Array.isArray(n))return l.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var b=!0;const e=n.length;for(let s=0;s<e;s++){let e=n[s];const i=u;if(u===i){if(!e||"object"!=typeof e||Array.isArray(e))return l.errors=[{instancePath:t+"/maintainers/"+s,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return l.errors=[{instancePath:t+"/maintainers/"+s,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.name){const n=u;if("string"!=typeof e.name)return l.errors=[{instancePath:t+"/maintainers/"+s+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=n===u}else g=!0;if(g){if(void 0!==e.email){const n=u;if("string"!=typeof e.email)return l.errors=[{instancePath:t+"/maintainers/"+s+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=n===u}else g=!0;if(g)if(void 0!==e.github){const n=u;if("string"!=typeof e.github)return l.errors=[{instancePath:t+"/maintainers/"+s+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=n===u}else g=!0}}}if(!(b=i===u))break}if(b){let e,s=n.length;if(s>1)for(;s--;)for(e=s;e--;)if(r(n[s],n[e]))return l.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1}}}h=s===u}else h=!0;if(h){if(void 0!==e.legacyIds){let n=e.legacyIds;const s=u;if(u===s){if(!Array.isArray(n))return l.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const e=n.length;for(let s=0;s<e;s++){const e=u;if("string"!=typeof n[s])return l.errors=[{instancePath:t+"/legacyIds/"+s,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(f=e===u))break}if(f){let e,s=n.length;if(s>1){const i={};for(;s--;){let o=n[s];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],l.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;i[o]=s}}}}}}h=s===u}else h=!0;if(h){if(void 0!==e.runtime){let n=e.runtime;const i=u;if(u===i){if(!n||"object"!=typeof n||Array.isArray(n))return l.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return l.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){let e=n.type;const i=u;if("string"!=typeof e)return l.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return l.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:s.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var m=i===u}else m=!0;if(m){if(void 0!==n.api){let e=n.api;const i=u;if("string"!=typeof e)return l.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return l.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:s.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;m=i===u}else m=!0;if(m){if(void 0!==n.apiVersion){const e=u;if("string"!=typeof n.apiVersion)return l.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=e===u}else m=!0;if(m)if(void 0!==n.entrypoint){const e=u;if("string"!=typeof n.entrypoint)return l.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=e===u}else m=!0}}}}h=i===u}else h=!0;if(h){if(void 0!==e.manufacturer){const n=u;if("string"!=typeof e.manufacturer)return l.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===u}else h=!0;if(h){if(void 0!==e.products){let n=e.products;const s=u;if(u===s){if(!Array.isArray(n))return l.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(n.length<1)return l.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var y=!0;const e=n.length;for(let s=0;s<e;s++){const e=u;if("string"!=typeof n[s])return l.errors=[{instancePath:t+"/products/"+s,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(y=e===u))break}if(y){let e,s=n.length;if(s>1){const i={};for(;s--;){let o=n[s];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],l.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;i[o]=s}}}}}}h=s===u}else h=!0;if(h){if(void 0!==e.keywords){let n=e.keywords;const s=u;if(u===s){if(!Array.isArray(n))return l.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var _=!0;const e=n.length;for(let s=0;s<e;s++){const e=u;if("string"!=typeof n[s])return l.errors=[{instancePath:t+"/keywords/"+s,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(_=e===u))break}if(_){let e,s=n.length;if(s>1){const i={};for(;s--;){let o=n[s];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],l.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;i[o]=s}}}}}}h=s===u}else h=!0;if(h)if(void 0!==e.bonjourQueries){let n=e.bonjourQueries;const s=u;if(u===s){if(!n||"object"!=typeof n||Array.isArray(n))return l.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=u;for(const e in n)if(!a.test(e))return l.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===u)for(const e in n)if(a.test(e)){let s=n[e];const o=u,r=u;let c=!1,d=null;const h=u;if(u==u)if(s&&"object"==typeof s&&!Array.isArray(s)){let n;if(void 0===s.type&&(n="type")||void 0===s.protocol&&(n="protocol")){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===p?p=[s]:p.push(s),u++}else{const n=u;for(const n in s)if("type"!==n&&"protocol"!==n&&"txt"!==n){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===p?p=[s]:p.push(s),u++;break}if(n===u){if(void 0!==s.type){const n=u;if("string"!=typeof s.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[n]:p.push(n),u++}var v=n===u}else v=!0;if(v){if(void 0!==s.protocol){let n=s.protocol;const o=u;if("string"!=typeof n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[n]:p.push(n),u++}if("tcp"!==n&&"udp"!==n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:i.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===p?p=[n]:p.push(n),u++}v=o===u}else v=!0;if(v)if(void 0!==s.txt){let n=s.txt;const i=u;if(u===i)if(n&&"object"==typeof n&&!Array.isArray(n)){const s=u;for(const s in n)if(!a.test(s)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};null===p?p=[n]:p.push(n),u++;break}if(s===u)for(const s in n)if(a.test(s)){const i=u;if("string"!=typeof n[s]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+s.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[n]:p.push(n),u++}if(i!==u)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[n]:p.push(n),u++}v=i===u}else v=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[n]:p.push(n),u++}h===u&&(c=!0,d=0);const b=u;if(u===b)if(Array.isArray(s)){const n=s.length;for(let o=0;o<n;o++){let n=s[o];const r=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let s;if(void 0===n.type&&(s="type")||void 0===n.protocol&&(s="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"};null===p?p=[n]:p.push(n),u++}else{const s=u;for(const s in n)if("type"!==s&&"protocol"!==s&&"txt"!==s){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o,schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};null===p?p=[n]:p.push(n),u++;break}if(s===u){if(void 0!==n.type){const s=u;if("string"!=typeof n.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[n]:p.push(n),u++}var x=s===u}else x=!0;if(x){if(void 0!==n.protocol){let s=n.protocol;const r=u;if("string"!=typeof s){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[n]:p.push(n),u++}if("tcp"!==s&&"udp"!==s){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:i.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===p?p=[n]:p.push(n),u++}x=r===u}else x=!0;if(x)if(void 0!==n.txt){let s=n.txt;const i=u;if(u===i)if(s&&"object"==typeof s&&!Array.isArray(s)){const n=u;for(const n in s)if(!a.test(n)){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===p?p=[s]:p.push(s),u++;break}if(n===u)for(const n in s)if(a.test(n)){const i=u;if("string"!=typeof s[n]){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===p?p=[s]:p.push(s),u++}if(i!==u)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[n]:p.push(n),u++}x=i===u}else x=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===p?p=[n]:p.push(n),u++}if(r!==u)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===p?p=[n]:p.push(n),u++}var I;if((I=b===u)&&c?(c=!1,d=[d,1]):I&&(c=!0,d=1),!c){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:d},message:"must match exactly one schema in oneOf"};return null===p?p=[n]:p.push(n),u++,l.errors=p,!1}if(u=r,null!==p&&(r?p.length=r:p=null),o!==u)break}}}h=s===u}else h=!0}}}}}}}}}}}}}}}}}}return l.errors=p,0===u}},284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},s=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},i=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},o=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},r=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:o(e.r,0,255),g:o(e.g,0,255),b:o(e.b,0,255),a:o(e.a)}},l=function(e){return{r:i(e.r),g:i(e.g),b:i(e.b),a:i(e.a,3)}},c=/^#([0-9a-f]{3,8})$/i,d=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},p=function(e){var t=e.r,n=e.g,s=e.b,i=e.a,o=Math.max(t,n,s),r=o-Math.min(t,n,s),a=r?o===t?(n-s)/r:o===n?2+(s-t)/r:4+(t-n)/r:0;return{h:60*(a<0?a+6:a),s:o?r/o*100:0,v:o/255*100,a:i}},u=function(e){var t=e.h,n=e.s,s=e.v,i=e.a;t=t/360*6,n/=100,s/=100;var o=Math.floor(t),r=s*(1-n),a=s*(1-(t-o)*n),l=s*(1-(1-t+o)*n),c=o%6;return{r:255*[s,a,r,r,l,s][c],g:255*[l,s,s,a,r,r][c],b:255*[r,r,l,s,s,a][c],a:i}},h=function(e){return{h:r(e.h),s:o(e.s,0,100),l:o(e.l,0,100),a:o(e.a)}},b=function(e){return{h:i(e.h),s:i(e.s),l:i(e.l),a:i(e.a,3)}},g=function(e){return u((n=(t=e).s,{h:t.h,s:(n*=((s=t.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:t.a}));var t,n,s},f=function(e){return{h:(t=p(e)).h,s:(i=(200-(n=t.s))*(s=t.v)/100)>0&&i<200?n*s/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,s,i},m=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x={string:[[function(e){var t=c.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?i(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?i(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=_.exec(e)||v.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=m.exec(e)||y.exec(e);if(!t)return null;var s,i,o=h({h:(s=t[1],i=t[2],void 0===i&&(i="deg"),Number(s)*(n[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return g(o)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,i=e.b,o=e.a,r=void 0===o?1:o;return s(t)&&s(n)&&s(i)?a({r:Number(t),g:Number(n),b:Number(i),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,n=e.s,i=e.l,o=e.a,r=void 0===o?1:o;if(!s(t)||!s(n)||!s(i))return null;var a=h({h:Number(t),s:Number(n),l:Number(i),a:Number(r)});return g(a)},"hsl"],[function(e){var t=e.h,n=e.s,i=e.v,a=e.a,l=void 0===a?1:a;if(!s(t)||!s(n)||!s(i))return null;var c=function(e){return{h:r(e.h),s:o(e.s,0,100),v:o(e.v,0,100),a:o(e.a)}}({h:Number(t),s:Number(n),v:Number(i),a:Number(l)});return u(c)},"hsv"]]},I=function(e,t){for(var n=0;n<t.length;n++){var s=t[n][0](e);if(s)return[s,t[n][1]]}return[null,void 0]},k=function(e){return"string"==typeof e?I(e.trim(),x.string):"object"==typeof e&&null!==e?I(e,x.object):[null,void 0]},w=function(e,t){var n=f(e);return{h:n.h,s:o(n.s+100*t,0,100),l:n.l,a:n.a}},A=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},S=function(e,t){var n=f(e);return{h:n.h,s:n.s,l:o(n.l+100*t,0,100),a:n.a}},M=function(){function e(e){this.parsed=k(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return i(A(this.rgba),2)},e.prototype.isDark=function(){return A(this.rgba)<.5},e.prototype.isLight=function(){return A(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=l(this.rgba)).r,n=e.g,s=e.b,r=(o=e.a)<1?d(i(255*o)):"","#"+d(t)+d(n)+d(s)+r;var e,t,n,s,o,r},e.prototype.toRgb=function(){return l(this.rgba)},e.prototype.toRgbString=function(){return t=(e=l(this.rgba)).r,n=e.g,s=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+s+", "+i+")":"rgb("+t+", "+n+", "+s+")";var e,t,n,s,i},e.prototype.toHsl=function(){return b(f(this.rgba))},e.prototype.toHslString=function(){return t=(e=b(f(this.rgba))).h,n=e.s,s=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+s+"%, "+i+")":"hsl("+t+", "+n+"%, "+s+"%)";var e,t,n,s,i},e.prototype.toHsv=function(){return e=p(this.rgba),{h:i(e.h),s:i(e.s),v:i(e.v),a:i(e.a,3)};var e},e.prototype.invert=function(){return $({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),$(w(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),$(w(this.rgba,-e))},e.prototype.grayscale=function(){return $(w(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),$(S(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),$(S(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?$({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):i(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=f(this.rgba);return"number"==typeof e?$({h:e,s:t.s,l:t.l,a:t.a}):i(t.h)},e.prototype.isEqual=function(e){return this.toHex()===$(e).toHex()},e}(),$=function(e){return e instanceof M?e:new M(e)},O=[];t.Colord=M,t.colord=$,t.extend=function(e){e.forEach(function(e){O.indexOf(e)<0&&(e(M,x),O.push(e))})},t.getFormat=function(e){return k(e)[1]},t.random=function(){return new M({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const s=n(593);function i(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#e;#C;#s;#E=new Map;#D=new Map;constructor(e,t,n){this.#e=e,this.#C=t,this.#s=n}async handleExecuteAction(e){const t=this.#E.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#D.get(t);if(e){const t=this.#E.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch(t=>{this.#s("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}if(!n||n.disabled)this.#D.delete(t);else{this.#D.set(t,n);const e=this.#E.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#e({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(i(n),t)).catch(e=>{this.#s("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)})}}}}async handleLearnAction(e){const t=this.#E.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#E.clear();for(const[n,i]of Object.entries(e))i&&(t.push({id:n,name:i.name,description:i.description,options:(0,s.serializeIsVisibleFn)(i.options),hasLearn:!!i.learn,learnTimeout:i.learnTimeout}),this.#E.set(n,i));this.#C({actions:t})}_getAllActions(){return Array.from(this.#D.values()).map(e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}))}subscribeActions(e){let t=Array.from(this.#D.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.actionId)));for(const e of t){const t=this.#E.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(i(e),n)).catch(t=>{this.#s("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}unsubscribeActions(e){let t=Array.from(this.#D.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.actionId)));for(const e of t){const t=this.#E.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#e({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch(t=>{this.#s("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}}},290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(368),i=n(641),o=n(774),r=()=>{},a=new i.TimeoutError;t.default=class extends s{constructor(e){var t,n,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(s=e.interval)||void 0===s?void 0:s.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,s)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&s(a)});n(await o)}catch(e){s(e)}this._next()},t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then(async()=>{if(d)throw new Error("runEntrypoint can only be called once");if(d=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const s=await o.default.readFile(n),p=JSON.parse(s.toString());if(p.runtime?.api!==i.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!p.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let u=p.runtime.apiVersion;if("0.0.0"===u)try{const e=await o.default.readFile(l.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(u=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const h=process.env.CONNECTION_ID;if("string"!=typeof h||!h)throw new Error("Module initialise is missing CONNECTION_ID");const b=process.env.VERIFICATION_TOKEN;if("string"!=typeof b||!b)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const g=new a.IpcWrapper({},e=>{process.send(e)},5e3);process.once("message",e=>{g.receivedMessage(e)}),c=new e((0,r.literal)({id:h,upgradeScripts:t,_isInstanceBaseProps:!0})),g.sendWithCb("register",{apiVersion:u,connectionId:h,verificationToken:b}).then(()=>{console.log("Module-host accepted registration")},e=>{console.error("Module registration failed",e),process.exit(11)})}).catch(e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)})};const s=n(635),i=n(967),o=s.__importDefault(n(943)),r=n(360),a=n(44),l=s.__importDefault(n(928));let c,d=!1},360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n,s){let i=(255&e)<<16|(255&t)<<8|255&n;return s&&s>=0&&s<1&&(i+=16777216*Math.round(255*(1-s))),i},t.splitRgb=i,t.splitHsl=function(e){const t=i(e);return(0,s.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=i(e);return(0,s.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=i(e);return(0,s.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()};const s=n(284);function i(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,s.colord)(e).isValid()){const t=(0,s.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const s=n(635).__importDefault(n(228)),i=n(360);class o extends s.default{#N;#T;#M;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#x&&"object"==typeof this.#x?this.#x:void 0}#x="pending";constructor(e,t,n){super(),this.#N=e,this.#T=t,this.#M={...n}}bind(e,t,n){if(this.#x&&"object"==typeof this.#x)throw new Error("Socket is already bound");switch(this.#x){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,i.assertNever)(this.#x),new Error("Invalid socket state")}this.#x="binding",n&&this.on("listening",n),this.#N.sendWithCb("sharedUdpSocketJoin",{family:this.#M.type,portNumber:e}).then(t=>{this.#x={portNumber:e,handleId:t},this.#T.set(t,this),this.emit("listening")},e=>{this.#x="closed",this.emit("error",e instanceof Error?e:new Error(e))}).catch(()=>null)}close(e){if(this.#x&&"object"==typeof this.#x);else switch(this.#x){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,i.assertNever)(this.#x),new Error("Invalid socket state")}const t=this.#x.handleId;this.#x="closed",e&&this.on("close",e),this.#N.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then(()=>{this.#T.delete(t),this.emit("close")},e=>{this.#T.delete(t),this.emit("error",e instanceof Error?e:new Error(e))}).catch(()=>null)}send(e,t,n,s,i,o){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof n){if("number"!=typeof s||"string"!=typeof i)throw new Error("Invalid arguments");if(void 0!==o&&"number"!=typeof o)throw new Error("Invalid arguments");const r=this.#j(e,t,n);this.#R(r,s,i,o)}else{if("string"!=typeof n)throw new Error("Invalid arguments");{if(void 0!==s&&"function"!=typeof s)throw new Error("Invalid arguments");const i=this.#j(e,0,void 0);this.#R(i,t,n,s)}}}#j(e,t,n){let s;if("string"==typeof e)s=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))s=e;else{if(Array.isArray(e))return Buffer.from(e);s=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return s.subarray(t,void 0!==n?n+t:void 0)}#R(e,t,n,s){if(!this.#x||"object"!=typeof this.#x)throw new Error("Socket is not open");this.#N.sendWithCb("sharedUdpSocketSend",{handleId:this.#x.handleId,message:e,address:n,port:t}).then(()=>{s?.()},e=>{this.emit("error",e instanceof Error?e:new Error(e))}).catch(()=>null)}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#x="fatalError";const t=this.boundState;t&&this.#T.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=o},368:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function s(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,s,o,r){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new i(s,o||e,r),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function r(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,s,i=[];if(0===this._eventsCount)return i;for(s in e=this._events)t.call(e,s)&&i.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var i=0,o=s.length,r=new Array(o);i<o;i++)r[i]=s[i].fn;return r},a.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,i,o,r){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,d=this._events[a],p=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,i),!0;case 5:return d.fn.call(d.context,t,s,i,o),!0;case 6:return d.fn.call(d.context,t,s,i,o,r),!0}for(c=1,l=new Array(p-1);c<p;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var u,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),p){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,s);break;case 4:d[c].fn.call(d[c].context,t,s,i);break;default:if(!l)for(u=1,l=new Array(p-1);u<p;u++)l[u-1]=arguments[u];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,s,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return r(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||s&&a.context!==s||r(this,o);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==t||i&&!a[l].once||s&&a[l].context!==s)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:r(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&r(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},400:(e,t)=>{"use strict";var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(n||(t.InstanceStatus=n={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(s||(t.Regex=s={}))},581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map(e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0})},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>T,__assign:()=>o,__asyncDelegator:()=>A,__asyncGenerator:()=>w,__asyncValues:()=>S,__await:()=>k,__awaiter:()=>b,__classPrivateFieldGet:()=>E,__classPrivateFieldIn:()=>N,__classPrivateFieldSet:()=>D,__createBinding:()=>f,__decorate:()=>a,__disposeResources:()=>R,__esDecorate:()=>c,__exportStar:()=>m,__extends:()=>i,__generator:()=>g,__importDefault:()=>C,__importStar:()=>P,__makeTemplateObject:()=>M,__metadata:()=>h,__param:()=>l,__propKey:()=>p,__read:()=>_,__rest:()=>r,__rewriteRelativeImportExtension:()=>V,__runInitializers:()=>d,__setFunctionName:()=>u,__spread:()=>v,__spreadArray:()=>I,__spreadArrays:()=>x,__values:()=>y,default:()=>F});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function r(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}function a(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r}function l(e,t){return function(n,s){t(n,s,e)}}function c(e,t,n,s,i,o){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,l=s.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?s.static?e:e.prototype:null,p=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),u=!1,h=n.length-1;h>=0;h--){var b={};for(var g in s)b[g]="access"===g?{}:s[g];for(var g in s.access)b.access[g]=s.access[g];b.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");o.push(r(e||null))};var f=(0,n[h])("accessor"===l?{get:p.get,set:p.set}:p[c],b);if("accessor"===l){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(a=r(f.get))&&(p.get=a),(a=r(f.set))&&(p.set=a),(a=r(f.init))&&i.unshift(a)}else(a=r(f))&&("field"===l?i.unshift(a):p[c]=a)}d&&Object.defineProperty(d,s.name,p),u=!0}function d(e,t,n){for(var s=arguments.length>2,i=0;i<t.length;i++)n=s?t[i].call(e,n):t[i].call(e);return s?n:void 0}function p(e){return"symbol"==typeof e?e:"".concat(e)}function u(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function b(e,t,n,s){return new(n||(n=Promise))(function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,a)}l((s=s.apply(e,t||[])).next())})}function g(e,t){var n,s,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=a(0),r.throw=a(1),r.return=a(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(n=1,s&&(i=2&a[0]?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],s=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var f=Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]};function m(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,i,o=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(s=o.next()).done;)r.push(s.value)}catch(e){i={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function x(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,a=o.length;r<a;r++,i++)s[i]=o[r];return s}function I(e,t,n){if(n||2===arguments.length)for(var s,i=0,o=t.length;i<o;i++)!s&&i in t||(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(e,t||[]),o=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),s[Symbol.asyncIterator]=function(){return this},s;function r(e,t){i[e]&&(s[e]=function(t){return new Promise(function(n,s){o.push([e,t,n,s])>1||a(e,t)})},t&&(s[e]=t(s[e])))}function a(e,t){try{(n=i[e](t)).value instanceof k?Promise.resolve(n.value.v).then(l,c):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function A(e){var t,n;return t={},s("next"),s("throw",function(e){throw e}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,i){t[s]=e[s]?function(t){return(n=!n)?{value:k(e[s](t)),done:!1}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise(function(s,i){!function(e,t,n,s){Promise.resolve(s).then(function(t){e({value:t,done:n})},t)}(s,i,(t=e[n](t)).done,t.value)})}}}function M(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var $=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},O=function(e){return O=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},O(e)};function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=O(e),s=0;s<n.length;s++)"default"!==n[s]&&f(t,e,n[s]);return $(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)}function D(e,t,n,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,n):i?i.value=n:t.set(e,n),n}function N(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function T(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var s,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],n&&(i=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");i&&(s=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:s,async:n})}else n&&e.stack.push({async:!0});return t}var j="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var s=new Error(n);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function R(e){function t(t){e.error=e.hasError?new j(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,s=0;return function i(){for(;n=e.stack.pop();)try{if(!n.async&&1===s)return s=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(o).then(i,function(e){return t(e),i()})}else s|=1}catch(e){t(e)}if(1===s)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function V(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,s,i,o){return n?t?".jsx":".js":!s||i&&o?s+i+"."+o.toLowerCase()+"js":e}):e}const F={__extends:i,__assign:o,__rest:r,__decorate:a,__param:l,__esDecorate:c,__runInitializers:d,__propKey:p,__setFunctionName:u,__metadata:h,__awaiter:b,__generator:g,__createBinding:f,__exportStar:m,__values:y,__read:_,__spread:v,__spreadArrays:x,__spreadArray:I,__await:k,__asyncGenerator:w,__asyncDelegator:A,__asyncValues:S,__makeTemplateObject:M,__importStar:P,__importDefault:C,__classPrivateFieldGet:E,__classPrivateFieldSet:D,__classPrivateFieldIn:N,__addDisposableResource:T,__disposeResources:R,__rewriteRelativeImportExtension:V}},641:(e,t,n)=>{"use strict";const s=n(617);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const o=(e,t,n)=>new Promise((o,r)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void o(e);const a=setTimeout(()=>{if("function"==typeof n){try{o(n())}catch(e){r(e)}return}const s=n instanceof Error?n:new i("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),r(s)},t);s(e.then(o,r),()=>{clearTimeout(a)})});e.exports=o,e.exports.default=o,e.exports.TimeoutError=i},649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const s=n(635),i=n(360),o=s.__importDefault(n(290)),r=n(593),a=n(706),l=n(39),c=n(44),d=n(289),p=n(365);t.InstanceBase=class{#N;#V;id;#F=new o.default({concurrency:1});#G=!1;#B=!1;#q={};#L;#Y;#z=new Map;#W=new Map;#U=new Map;#M;#H;get instanceOptions(){return this.#M}get label(){return this.#H}constructor(e){if(!(0,r.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#M={disableVariableValidation:!1},this.#N=new c.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},e=>{process.send(e)},5e3),process.on("message",e=>{this.#N.receivedMessage(e)}),this.#L=new d.ActionManager(async e=>this.#N.sendWithCb("parseVariablesInString",e),e=>this.#N.sendWithNoCb("setActionDefinitions",e),this.log.bind(this)),this.#Y=new l.FeedbackManager(async e=>this.#N.sendWithCb("parseVariablesInString",e),e=>this.#N.sendWithNoCb("updateFeedbackValues",e),e=>this.#N.sendWithNoCb("setFeedbackDefinitions",e),this.log.bind(this)),this.#V=e.upgradeScripts,this.id=e.id,this.#H=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#F.add(async()=>{if(this.#G)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#q=e.config,this.#H=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#q=t,this.saveConfig(this.#q),e.lastUpgradeIndex=this.#V.length-1}const{updatedActions:s,updatedFeedbacks:i,updatedConfig:o}=(0,a.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#V,this.#q,!1);this.#q=o??this.#q;const r=this.#N.sendWithCb("upgradedItems",{updatedActions:s,updatedFeedbacks:i});try{await this.init(this.#q,!!e.isFirstInit),this.#G=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await r}return setImmediate(()=>{this._handleUpdateActions({actions:t},!0).catch(e=>{this.log("error",`Receive actions failed: ${e}`)}),this._handleUpdateFeedbacks({feedbacks:n},!0).catch(e=>{this.log("error",`Receive feedbacks failed: ${e}`)})}),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#V.length-1,updatedConfig:this.#q}})}async _handleDestroy(){await this.#F.add(async()=>{if(!this.#G)throw new Error("Not initialized");await this.destroy(),this.#G=!1})}async _handleConfigUpdateAndLabel(e){await this.#F.add(async()=>{if(!this.#G)throw new Error("Not initialized");this.#H=e.label,this.#q=e.config,await this.configUpdated(this.#q)})}async _handleExecuteAction(e){return this.#L.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#V,this.#q,!0);this.#N.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch(e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)})}this.#Y.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#V,this.#q,!0);this.#N.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch(e=>{this.log("error",`Failed to save upgraded actions: ${e}`)})}this.#L.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,r.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#L.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#Y.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#B)return}else if(!this.#B)return;if(!this.handleStartStopRecordActions)throw this.#B=!1,new Error("Recording actions is not supported by this module!");this.#B=e.recording,this.handleStartStopRecordActions(this.#B)}async _handleVariablesChanged(e){this.#Y.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#z.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#z.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#q=e,this.#N.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#L.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#Y.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,s]of Object.entries(e))s&&t.push({...s,id:n});this.#N.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],n=[];this.#W.clear();for(const s of e)t.push({id:s.variableId,name:s.name}),this.#W.set(s.variableId,s),this.#U.has(s.variableId)||(this.#U.set(s.variableId,""),n.push({id:s.variableId,value:""}));if(!this.#M.disableVariableValidation){const e=new Set(this.#W.keys());for(const t of this.#U.keys())e.has(t)||(this.#U.delete(t),n.push({id:t,value:void 0}))}this.#N.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:n})}setVariableValues(e){const t=[];for(const[n,s]of Object.entries(e))this.#M.disableVariableValidation?(void 0===s?this.#U.delete(n):this.#U.set(n,s),t.push({id:n,value:s})):this.#W.has(n)?(this.#U.set(n,s??""),t.push({id:n,value:s??""})):t.push({id:n,value:void 0});this.#N.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#U.get(e)}async parseVariablesInString(e){const t=this.#Y.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#N.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#Y.checkFeedbacks(e)}checkFeedbacksById(...e){this.#Y.checkFeedbacksById(e)}_getAllActions(){return this.#L._getAllActions()}subscribeActions(...e){this.#L.subscribeActions(e)}unsubscribeActions(...e){this.#L.unsubscribeActions(e)}_getAllFeedbacks(){return this.#Y._getAllFeedbacks()}subscribeFeedbacks(...e){this.#Y.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#Y.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#B)throw new Error("Not currently recording actions");this.#N.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}setCustomVariableValue(e,t){this.#N.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,n,s){this.#N.sendWithNoCb("send-osc",(0,i.literal)({host:e,port:t,path:n,args:s}))}updateStatus(e,t){this.#N.sendWithNoCb("set-status",(0,i.literal)({status:e,message:t??null}))}log(e,t){this.#N.sendWithNoCb("log-message",(0,i.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const n="string"==typeof e?{type:e}:e,s=new p.SharedUdpSocketImpl(this.#N,this.#z,n);return t&&s.on("message",t),s}}},706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,n,o,r,a){const l=new Map,c=e=>{let t=l.get(e);return t||(t={actions:[],feedbacks:[],config:!1},l.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&c(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&c(t).feedbacks.push(e.id)}if(!a)for(let e=n??-1;e<o.length;e++)c(e).config=!0;const d={},p={};let u;if(l.size>0){const a=Array.from(l.keys()).sort(),c=Math.min(...a,n??-1)+1,h=[],b=[],g=o.length;for(let n=c;n<g;n++){const a=l.get(n-1);a&&(h.push(...a.actions),b.push(...a.feedbacks));const c=!!a?.config;if(!c&&0===h.length&&0===b.length)continue;const g=u??r,f=(0,o[n])({currentConfig:i(g)},{config:c?g:null,actions:h.map(t=>{const n=e[t];if(n)return(0,s.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?i(n.options):{}})}).filter(e=>!!e),feedbacks:b.map(e=>{const n=t[e];if(n)return(0,s.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?i(n.options):{},isInverted:n.isInverted})}).filter(e=>!!e)});c&&f.updatedConfig&&(u=f.updatedConfig);for(const t of f.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,p[t.id]=n)}for(const e of f.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,d[e.id]={...n,style:d[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,n]of Object.entries(e))p[t]||"number"!=typeof n?.upgradeIndex||(p[t]=n);for(const[e,n]of Object.entries(t))d[e]||"number"!=typeof n?.upgradeIndex||(d[e]=n)}return{updatedActions:p,updatedFeedbacks:d,updatedConfig:u}};const s=n(360);function i(e){return JSON.parse(JSON.stringify(e))}},730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const i=s.default(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const s=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,i]of Object.entries(n))void 0!==t.options[e]&&(t.style[i]=t.options[e],delete t.options[e],s.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:s}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,n)=>{const s=[];for(const t of n.feedbacks){const n=e[t.feedbackId];if("string"!=typeof n)continue;const i=t.options[n];void 0!==i&&(delete t.options[n],t.isInverted="true"===i||!0===i||Number(i)>0,s.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:s}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]})},865:e=>{"use strict";const t=(e,t,s,i)=>{if("length"===s||"prototype"===s)return;if("arguments"===s||"caller"===s)return;const o=Object.getOwnPropertyDescriptor(e,s),r=Object.getOwnPropertyDescriptor(t,s);!n(o,r)&&i||Object.defineProperty(e,s,r)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},s=(e,t)=>`/* Wrapped ${e}*/\n${t}`,i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),o=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:r=!1}={})=>{const{name:a}=e;for(const s of Reflect.ownKeys(n))t(e,n,s,r);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const r=""===n?"":`with ${n.trim()}() `,a=s.bind(null,r,t.toString());Object.defineProperty(a,"name",o),Object.defineProperty(e,"toString",{...i,value:a})})(e,n,a),e}},895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const s=n(635).__importDefault(n(897)),i=n(228),o=n(400);class r extends i.EventEmitter{#w;#A;_socket;#M;#J=!1;#Q=!1;#$=!1;#O;#X;#y;get isConnected(){return this.#J}get isConnecting(){return this.#Q}get isDestroyed(){return this.#$}constructor(e,t,n){super(),this.#w=e,this.#A=t,this.#M={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new s.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",e=>{this.#Q=!1,this.#J=!1,this.#M.reconnect&&this.#Z(),this.#P(o.InstanceStatus.UnknownError,e.message),this.emit("error",e)}),this._socket.on("ready",()=>{this.#J=!0,this.#Q=!1,this.#P(o.InstanceStatus.Ok),this.emit("connect")}),this._socket.on("end",()=>{this.#J=!1,this.#P(o.InstanceStatus.Disconnected),!this.#Q&&this.#M.reconnect&&this.#Z(),this.emit("end")}),this._socket.on("data",e=>this.emit("data",e)),this._socket.on("drain",()=>this.emit("drain")),setImmediate(()=>{this.#$||this.connect()}),this.#y=setTimeout(()=>{this.#y=void 0,this.#$||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#w}:${this.#A} is missing an error handler!`)},5e3)}connect(){if(this.#$)throw new Error("Cannot connect destroyed socket");return!this.#Q&&(this.#Q=!0,this._socket.connect(this.#A,this.#w),!0)}async send(e){if(this.#$||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#J)return!1;try{return new Promise((t,n)=>{this._socket.write(e,e=>{e?n(e):t(!0)})})}catch(e){this.#J=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#P(o.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#$=!0,void 0!==this.#X&&(clearTimeout(this.#X),this.#X=void 0),void 0!==this.#y&&(clearTimeout(this.#y),this.#y=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#Z(){void 0!==this.#X&&clearTimeout(this.#X),this.#X=setTimeout(()=>{this.#X=void 0,this.#P(o.InstanceStatus.Connecting),this.connect()},this.#M.reconnect_interval)}#P(e,t){this.#O!=e&&(this.#O=e,this.emit("status_change",e,t))}}t.TCPHelper=r},897:e=>{"use strict";e.exports=require("net")},928:e=>{"use strict";e.exports=require("path")},943:e=>{"use strict";e.exports=require("fs/promises")},967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let s=0,i=e.length;for(;i>0;){const o=i/2|0;let r=s+o;n(e[r],t)<=0?(s=++r,i-=o+1):i=o}return s}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{JsonPatchError:()=>$,_areEquals:()=>V,applyOperation:()=>D,applyPatch:()=>N,applyReducer:()=>T,deepClone:()=>O,getValueByPointer:()=>E,validate:()=>R,validator:()=>j});var t={};n.r(t),n.d(t,{compare:()=>W,generate:()=>Y,observe:()=>L,unobserve:()=>q});var s=n(278);const i=e=>"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:`${e}`,o=[{label:"Select Previous item",id:"%%prev%%"},{label:"Select Next item",id:"%%next%%"}],r=e=>{if("dropdown"===e.type&&Array.isArray(e.choices)){const t=[...e.choices];return 2==t.length?(t.unshift({label:"Toggle",id:"%%toggle%%"}),e.default="%%toggle%%"):1==t.length?(e.default=t[0].id,e.isVisible=()=>!1):t.length>2&&(t.unshift(...o),e.default=e.choices[2].id),{...e,choices:t}}return e};function a(e){const t=(0,s.splitRgb)(e),n=(i=t.r,o=t.g,r=t.b,[i,o,r]=[i,o,r].map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}),.2126*i+.7152*o+.0722*r);var i,o,r;return 1.05/(n+.05)>(n+.05)/.05?16777215:0}const l=["O:4/I:F","O:3/I:4","O:2/I:3","O:1/I:2","O:F/I:1"],c=["4","3","2","1","F"],d=[{type:"src",slotid:"gen",slotlabel:"Generator",chid:1,chlabel:"BLDS",index:0},{type:"src",slotid:"gen",slotlabel:"Generator",chid:3,chlabel:"Sine Tone 1",index:2},{type:"src",slotid:"gen",slotlabel:"Generator",chid:4,chlabel:"Sine Tone 2",index:3},{type:"src",slotid:"gen",slotlabel:"Generator",chid:5,chlabel:"White Noise 1",index:4},{type:"src",slotid:"gen",slotlabel:"Generator",chid:6,chlabel:"White Noise 2",index:5},{type:"src",slotid:"gen",slotlabel:"Generator",chid:7,chlabel:"Pink Noise 1",index:6},{type:"src",slotid:"gen",slotlabel:"Generator",chid:8,chlabel:"Pink Noise 2",index:7}],p={unassigned:{GENERIC:[{type:"src",slotid:"gen",slotlabel:"",chid:-1,chlabel:"Unassigned",index:-1}]},generatorSources:{"PRODIGY.MC":Array.from(d,e=>({...e,index:e.index+448})),"PRODIGY.MP":Array.from(d,e=>({...e,index:e.index+448})),"PRODIGY.MX":Array.from(d,e=>({...e,index:e.index+1664})),"MAVEN.A":Array.from(d,e=>({...e,index:e.index+800}))},sourceTable:{"PRODIGY.MC":[...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/input_slot_name/8",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${0+t}`,index:0+t})),...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/input_slot_name/9",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${64+t}`,index:64+t})),...Array.from({length:128},(e,t)=>({type:"src",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/input_slot_name/10",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${128+t}`,index:128+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot1",slotlabel:"Slot 1",slotlabelpath:"/settings/input_slot_name/0",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${384+t}`,index:384+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot2",slotlabel:"Slot 2",slotlabelpath:"/settings/input_slot_name/1",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${392+t}`,index:392+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot3",slotlabel:"Slot 3",slotlabelpath:"/settings/input_slot_name/2",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${400+t}`,index:400+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot4",slotlabel:"Slot 4",slotlabelpath:"/settings/input_slot_name/3",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${408+t}`,index:408+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot5",slotlabel:"Slot 5",slotlabelpath:"/settings/input_slot_name/4",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${416+t}`,index:416+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot6",slotlabel:"Slot 6",slotlabelpath:"/settings/input_slot_name/5",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${424+t}`,index:424+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot7",slotlabel:"Slot 7",slotlabelpath:"/settings/input_slot_name/6",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${432+t}`,index:432+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot8",slotlabel:"Slot 8",slotlabelpath:"/settings/input_slot_name/7",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${440+t}`,index:440+t}))],"PRODIGY.MP":[...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/input_slot_name/8",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${0+t}`,index:0+t})),...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/input_slot_name/9",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${64+t}`,index:64+t})),...Array.from({length:128},(e,t)=>({type:"src",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/input_slot_name/10",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${128+t}`,index:128+t})),...Array.from({length:128},(e,t)=>({type:"src",slotid:"net2",slotlabel:"Net 2",slotlabelpath:"/settings/input_slot_name/11",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${256+t}`,index:256+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot1",slotlabel:"Slot 1",slotlabelpath:"/settings/input_slot_name/0",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${384+t}`,index:384+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot2",slotlabel:"Slot 2",slotlabelpath:"/settings/input_slot_name/1",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${392+t}`,index:392+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot3",slotlabel:"Slot 3",slotlabelpath:"/settings/input_slot_name/2",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${400+t}`,index:400+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot4",slotlabel:"Slot 4",slotlabelpath:"/settings/input_slot_name/3",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${408+t}`,index:408+t}))],"PRODIGY.MX":[...Array.from({length:256},(e,t)=>({type:"src",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/input_slot_name/0",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${0+t}`,index:0+t})),...Array.from({length:256},(e,t)=>({type:"src",slotid:"net2",slotlabel:"Net 2",slotlabelpath:"/settings/input_slot_name/1",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${256+t}`,index:256+t})),...Array.from({length:256},(e,t)=>({type:"src",slotid:"net3",slotlabel:"Net 3",slotlabelpath:"/settings/input_slot_name/2",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${512+t}`,index:512+t})),...Array.from({length:256},(e,t)=>({type:"src",slotid:"net4",slotlabel:"Net 4",slotlabelpath:"/settings/input_slot_name/3",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${768+t}`,index:768+t})),...Array.from({length:256},(e,t)=>({type:"src",slotid:"net5",slotlabel:"Net 5",slotlabelpath:"/settings/input_slot_name/4",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${1024+t}`,index:1024+t})),...Array.from({length:256},(e,t)=>({type:"src",slotid:"net6",slotlabel:"Net 6",slotlabelpath:"/settings/input_slot_name/5",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${1280+t}`,index:1280+t})),...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/input_slot_name/6",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${1536+t}`,index:1536+t})),...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/input_slot_name/7",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${1600+t}`,index:1600+t}))],"MAVEN.A":[...Array.from({length:256},(e,t)=>({type:"src",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/input_slot_name/0",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${0+t}`,index:0+t})),...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/input_slot_name/1",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${512+t}`,index:512+t})),...Array.from({length:64},(e,t)=>({type:"src",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/input_slot_name/2",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${576+t}`,index:576+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot1",slotlabel:"Slot 1",slotlabelpath:"/settings/input_slot_name/3",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${768+t}`,index:768+t})),...Array.from({length:8},(e,t)=>({type:"src",slotid:"slot2",slotlabel:"Slot 2",slotlabelpath:"/settings/input_slot_name/4",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/input_labels/${776+t}`,index:776+t}))]},sourceDspTable:{"PRODIGY.MC":[...Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:992+t})),...Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"sumbus",slotlabel:"Sum Bus",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/sum_bus_master/${t}/label`,index:480+t}))],"PRODIGY.MP":[...Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:992+t})),...Array.from({length:160},(e,t)=>({type:"srcdsp",slotid:"flexch1",slotlabel:"Flex Channels",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`#${Math.floor(t/5)+1} ${l[t%5]}`,chlabelpath:`/settings/flex_channel/${Math.floor(t/5)}/label`,index:512+t})),...Array.from({length:160},(e,t)=>({type:"srcdsp",slotid:`mtx${Math.floor(t/20)+1}`,slotlabel:`MTX${Math.floor(t/20)+1} (16x4)`,slotlabelpath:`/settings/mixer/${4*Math.floor(t/20)+3}/label`,chid:`${Math.floor(t/5)%4+1}p${t%5+1}`,chlabel:`Master ${String.fromCharCode(65+Math.floor(t/5)%4)} ${c[t%5]}`,chlabelpath:`/settings/mixer/${4*Math.floor(t/20)+3}/master/${Math.floor(t/5)%4}/label`,index:1144+160*Math.floor(t/20)+t%20})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:`mtx${Math.floor(t/40)+9}`,slotlabel:`MTX${Math.floor(t/40)+9} (8x8)`,slotlabelpath:`/settings/mixer/${4*Math.floor(t/40)}/label`,chid:`${Math.floor(t/5)%8+1}p${t%5+1}`,chlabel:`Master ${String.fromCharCode(65+Math.floor(t/5)%8)} ${c[t%5]}`,chlabelpath:`/settings/mixer/${4*Math.floor(t/40)}/master/${Math.floor(t/5)%8}/label`,index:1024+160*Math.floor(t/40)+t%40})),...Array.from({length:160},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`#${Math.floor(t/5)+1} ${c[t%5]}`,chlabelpath:`/settings/sum_bus_master/${Math.floor(t/5)}/label`,index:4096+t}))],"PRODIGY.MX":[...Array.from({length:64},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:3008+t})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:"flexch1",slotlabel:"Flex Channels",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`#${Math.floor(t/5)+1} ${l[t%5]}`,chlabelpath:`/settings/flex_channel/${Math.floor(t/5)}/label`,index:2368+t})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:"mtx1",slotlabel:"MTX (64x64)",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`MatMix${Math.floor(t/5)+1} ${c[t%5]}`,chlabelpath:`/settings/mixer64x64/master/${Math.floor(t/5)}/label`,index:2048+t})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`#${Math.floor(t/5)+1} ${c[t%5]}`,chlabelpath:`/settings/sum_bus_master/${Math.floor(t/5)}/label`,index:2688+t}))],"MAVEN.A":[...Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:3008+t})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:"flexch1",slotlabel:"Flex Channels",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`#${Math.floor(t/5)+1} ${l[t%5]}`,chlabelpath:`/settings/flex_channel/${Math.floor(t/5)}/label`,index:2048+t})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:"mtx1",slotlabel:"MTX (64x64)",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`MatMix${Math.floor(t/5)+1} ${c[t%5]}`,chlabelpath:`/settings/mixer64x64/master/${Math.floor(t/5)}/label`,index:2368+t})),...Array.from({length:320},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:`${Math.floor(t/5)+1}p${t%5+1}`,chlabel:`#${Math.floor(t/5)+1} ${c[t%5]}`,chlabelpath:`/settings/sum_bus_master/${Math.floor(t/5)}/label`,index:2688+t}))]},sinkTable:{"PRODIGY.MC":[...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/slot_name/8",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${0+t}`,index:0+t})),...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/slot_name/9",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${64+t}`,index:64+t})),...Array.from({length:128},(e,t)=>({type:"snk",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/slot_name/10",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${128+t}`,index:128+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot1",slotlabel:"Slot 1",slotlabelpath:"/settings/slot_name/0",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${384+t}`,index:384+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot2",slotlabel:"Slot 2",slotlabelpath:"/settings/slot_name/1",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${392+t}`,index:392+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot3",slotlabel:"Slot 3",slotlabelpath:"/settings/slot_name/2",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${400+t}`,index:400+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot4",slotlabel:"Slot 4",slotlabelpath:"/settings/slot_name/3",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${408+t}`,index:408+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot5",slotlabel:"Slot 5",slotlabelpath:"/settings/slot_name/4",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${416+t}`,index:416+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot6",slotlabel:"Slot 6",slotlabelpath:"/settings/slot_name/5",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${424+t}`,index:424+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot7",slotlabel:"Slot 7",slotlabelpath:"/settings/slot_name/6",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${432+t}`,index:432+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot8",slotlabel:"Slot 8",slotlabelpath:"/settings/slot_name/7",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${440+t}`,index:440+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones1",slotlabel:"Phones",chid:t+1,chlabel:`Ph1 ${t+1}`,chlabelpath:`/settings/output_labels/${448+t}`,index:448+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones2",slotlabel:"Phones",chid:t+1,chlabel:`Ph2 ${t+1}`,chlabelpath:`/settings/output_labels/${450+t}`,index:450+t}))],"PRODIGY.MP":[...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/slot_name/8",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${0+t}`,index:0+t})),...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/slot_name/9",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${64+t}`,index:64+t})),...Array.from({length:128},(e,t)=>({type:"snk",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/slot_name/10",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${128+t}`,index:128+t})),...Array.from({length:128},(e,t)=>({type:"snk",slotid:"net2",slotlabel:"Net 2",slotlabelpath:"/settings/slot_name/11",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${256+t}`,index:256+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot1",slotlabel:"Slot 1",slotlabelpath:"/settings/slot_name/0",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${384+t}`,index:384+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot2",slotlabel:"Slot 2",slotlabelpath:"/settings/slot_name/1",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${392+t}`,index:392+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot3",slotlabel:"Slot 3",slotlabelpath:"/settings/slot_name/2",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${400+t}`,index:400+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot4",slotlabel:"Slot 4",slotlabelpath:"/settings/slot_name/3",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${408+t}`,index:408+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones1",slotlabel:"Phones",chid:t+1,chlabel:`Ph1 ${t+1}`,chlabelpath:`/settings/output_labels/${448+t}`,index:448+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones2",slotlabel:"Phones",chid:t+1,chlabel:`Ph2 ${t+1}`,chlabelpath:`/settings/output_labels/${450+t}`,index:450+t}))],"PRODIGY.MX":[...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/slot_name/0",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${0+t}`,index:0+t})),...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net2",slotlabel:"Net 2",slotlabelpath:"/settings/slot_name/1",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${256+t}`,index:256+t})),...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net3",slotlabel:"Net 3",slotlabelpath:"/settings/slot_name/2",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${512+t}`,index:512+t})),...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net4",slotlabel:"Net 4",slotlabelpath:"/settings/slot_name/3",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${768+t}`,index:768+t})),...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net5",slotlabel:"Net 5",slotlabelpath:"/settings/slot_name/4",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${1024+t}`,index:1024+t})),...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net6",slotlabel:"Net 6",slotlabelpath:"/settings/slot_name/5",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${1280+t}`,index:1280+t})),...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/slot_name/6",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${1536+t}`,index:1536+t})),...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/slot_name/7",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${1600+t}`,index:1600+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones1",slotlabel:"Phones",chid:t+1,chlabel:`Ph1 ${t+1}`,chlabelpath:`/settings/output_labels/${1664+t}`,index:1664+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones2",slotlabel:"Phones",chid:t+1,chlabel:`Ph2 ${t+1}`,chlabelpath:`/settings/output_labels/${1666+t}`,index:1666+t}))],"MAVEN.A":[...Array.from({length:256},(e,t)=>({type:"snk",slotid:"net1",slotlabel:"Net 1",slotlabelpath:"/settings/output_slot_name/4",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${0+t}`,index:0+t})),...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi1",slotlabel:"MADI 1",slotlabelpath:"/settings/output_slot_name/2",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${512+t}`,index:512+t})),...Array.from({length:64},(e,t)=>({type:"snk",slotid:"madi2",slotlabel:"MADI 2",slotlabelpath:"/settings/output_slot_name/3",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${576+t}`,index:576+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot1",slotlabel:"Slot 1",slotlabelpath:"/settings/output_slot_name/0",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${768+t}`,index:768+t})),...Array.from({length:8},(e,t)=>({type:"snk",slotid:"slot2",slotlabel:"Slot 2",slotlabelpath:"/settings/output_slot_name/1",chid:t+1,chlabel:`Out ${t+1}`,chlabelpath:`/settings/output_labels/${776+t}`,index:776+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones1",slotlabel:"Phones",chid:t+1,chlabel:`Ph1 ${t+1}`,chlabelpath:`/settings/output_labels/${800+t}`,index:800+t})),...Array.from({length:2},(e,t)=>({type:"snk",slotid:"Phones2",slotlabel:"Phones",chid:t+1,chlabel:`Ph2 ${t+1}`,chlabelpath:`/settings/output_labels/${802+t}`,index:802+t}))]},sinkTableFlex:{"PRODIGY.MC":[],"PRODIGY.MP":[...Array.from({length:32},(e,t)=>({type:"snkdsp",slotid:"flex1",slotlabel:"Flex Channels",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/flex_channel/${0+t}/label`,index:0+t}))],"PRODIGY.MX":[...Array.from({length:64},(e,t)=>({type:"snkdsp",slotid:"flex1",slotlabel:"Flex Channels",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/flex_channel/${0+t}/label`,index:0+t}))],"MAVEN.A":[...Array.from({length:64},(e,t)=>({type:"snkdsp",slotid:"flex1",slotlabel:"Flex Channels",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/flex_channel/${0+t}/label`,index:0+t}))]},sinkTableMixer:{"PRODIGY.MC":[],"PRODIGY.MP":[...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx1",slotlabel:"MatMix 1 (16x4)",slotlabelpath:"/settings/mixer/3/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/1/source_label/${t}`,index:`1/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx1",slotlabel:"MatMix 1 (16x4)",slotlabelpath:"/settings/mixer/3/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/2/source_label/${t}`,index:`2/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx2",slotlabel:"MatMix 2 (16x4)",slotlabelpath:"/settings/mixer/7/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/5/source_label/${t}`,index:`5/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx2",slotlabel:"MatMix 2 (16x4)",slotlabelpath:"/settings/mixer/7/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/6/source_label/${t}`,index:`6/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx3",slotlabel:"MatMix 3 (16x4)",slotlabelpath:"/settings/mixer/11/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/9/source_label/${t}`,index:`9/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx3",slotlabel:"MatMix 3 (16x4)",slotlabelpath:"/settings/mixer/11/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/10/source_label/${t}`,index:`10/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx4",slotlabel:"MatMix 4 (16x4)",slotlabelpath:"/settings/mixer/15/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/13/source_label/${t}`,index:`13/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx4",slotlabel:"MatMix 4 (16x4)",slotlabelpath:"/settings/mixer/15/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/14/source_label/${t}`,index:`14/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx5",slotlabel:"MatMix 5 (16x4)",slotlabelpath:"/settings/mixer/19/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/17/source_label/${t}`,index:`17/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx5",slotlabel:"MatMix 5 (16x4)",slotlabelpath:"/settings/mixer/19/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/18/source_label/${t}`,index:`18/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx6",slotlabel:"MatMix 6 (16x4)",slotlabelpath:"/settings/mixer/23/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/21/source_label/${t}`,index:`21/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx6",slotlabel:"MatMix 6 (16x4)",slotlabelpath:"/settings/mixer/23/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/22/source_label/${t}`,index:`22/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx7",slotlabel:"MatMix 7 (16x4)",slotlabelpath:"/settings/mixer/27/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/25/source_label/${t}`,index:`25/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx7",slotlabel:"MatMix 7 (16x4)",slotlabelpath:"/settings/mixer/27/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/26/source_label/${t}`,index:`26/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx8",slotlabel:"MatMix 8 (16x4)",slotlabelpath:"/settings/mixer/31/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/29/source_label/${t}`,index:`29/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx8",slotlabel:"MatMix 8 (16x4)",slotlabelpath:"/settings/mixer/31/label",chid:t+9,chlabel:`In ${t+9}`,chlabelpath:`/settings/mixer/30/source_label/${t}`,index:`30/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx9",slotlabel:"MatMix 9 (8x8)",slotlabelpath:"/settings/mixer/0/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/0/source_label/${t}`,index:`0/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx10",slotlabel:"MatMix 10 (8x8)",slotlabelpath:"/settings/mixer/4/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/4/source_label/${t}`,index:`4/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx11",slotlabel:"MatMix 11 (8x8)",slotlabelpath:"/settings/mixer/8/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/8/source_label/${t}`,index:`8/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx12",slotlabel:"MatMix 12 (8x8)",slotlabelpath:"/settings/mixer/12/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/12/source_label/${t}`,index:`12/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx13",slotlabel:"MatMix 13 (8x8)",slotlabelpath:"/settings/mixer/16/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/16/source_label/${t}`,index:`16/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx14",slotlabel:"MatMix 14 (8x8)",slotlabelpath:"/settings/mixer/20/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/20/source_label/${t}`,index:`20/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx15",slotlabel:"MatMix 15 (8x8)",slotlabelpath:"/settings/mixer/24/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/24/source_label/${t}`,index:`24/source_routing/${t}`})),...Array.from({length:8},(e,t)=>({type:"snkdsp",slotid:"mtx16",slotlabel:"MatMix 16 (8x8)",slotlabelpath:"/settings/mixer/28/label",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer/28/source_label/${t}`,index:`28/source_routing/${t}`}))],"PRODIGY.MX":[...Array.from({length:64},(e,t)=>({type:"snkdsp",slotid:"mtx1",slotlabel:"MatMix (64x64)",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer64x64/source_label/${0+t}/label`,index:t}))],"MAVEN.A":[...Array.from({length:64},(e,t)=>({type:"snkdsp",slotid:"mtx1",slotlabel:"MatMix (64x64)",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/mixer64x64/source_label/${0+t}/label`,index:t}))]},sinkTableSidechain:{"PRODIGY.MC":[],"PRODIGY.MP":[...Array.from({length:32},(e,t)=>({type:"snkdsp",slotid:"dyn1",slotlabel:"Dyn Side Chain",chid:t+1,chlabel:`In ${t+1}`,index:0+t}))],"PRODIGY.MX":[...Array.from({length:64},(e,t)=>({type:"snkdsp",slotid:"dyn1",slotlabel:"Dyn Side Chain",chid:t+1,chlabel:`In ${t+1}`,index:0+t}))],"MAVEN.A":[...Array.from({length:64},(e,t)=>({type:"snkdsp",slotid:"dyn1",slotlabel:"Dyn Side Chain",chid:t+1,chlabel:`In ${t+1}`,index:0+t}))]},groupsTable:{"PRODIGY.MC":[...Array.from({length:16},(e,t)=>({type:"grp",slotid:"",slotlabel:"Group",chid:t+1,chlabel:`${t+1}`,chlabelpath:`/settings/group/channel/${t}/label`,index:0+t}))],"PRODIGY.MP":[...Array.from({length:16},(e,t)=>({type:"grp",slotid:"",slotlabel:"Group",chid:t+1,chlabel:`${t+1}`,chlabelpath:`/settings/group/channel/${t}/label`,index:0+t}))],"PRODIGY.MX":[...Array.from({length:32},(e,t)=>({type:"grp",slotid:"",slotlabel:"Group",chid:t+1,chlabel:`${t+1}`,chlabelpath:`/settings/group/channel/${t}/label`,index:0+t}))],"MAVEN.A":[...Array.from({length:32},(e,t)=>({type:"grp",slotid:"",slotlabel:"Group",chid:t+1,chlabel:`${t+1}`,chlabelpath:`/settings/group/channel/${t}/label`,index:0+t}))]},sourceTableSumbus:{"PRODIGY.MC":[...Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/sum_bus_master/${t}/label`,index:t}))],"PRODIGY.MP":[...Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/sum_bus_master/${t}/label`,index:t}))],"PRODIGY.MX":[...Array.from({length:64},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/sum_bus_master/${t}/label`,index:t}))],"MAVEN.A":[...Array.from({length:64},(e,t)=>({type:"srcdsp",slotid:"sumbus1",slotlabel:"Sum Bus",chid:t+1,chlabel:`In ${t+1}`,chlabelpath:`/settings/sum_bus_master/${t}/label`,index:t}))]},earsTable:{"PRODIGY.MC":[{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1 Input Port",index:0},{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2 Input Port",index:1},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1a",chlabel:"1 A Input Port",index:2},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1b",chlabel:"1 B Input Port",index:3},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2a",chlabel:"2 A Input Port",index:4},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2b",chlabel:"2 B Input Port",index:5}],"PRODIGY.MP":[{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1 Input Port",index:0},{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2 Input Port",index:1},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1a",chlabel:"1 A Input Port",index:2},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1b",chlabel:"1 B Input Port",index:3},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2a",chlabel:"2 A Input Port",index:4},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2b",chlabel:"2 B Input Port",index:5}],"PRODIGY.MX":[{type:"ears",slotid:"net",slotlabel:"Net",chid:"1a",chlabel:"1 A Input Port",index:0},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1b",chlabel:"1 B Input Port",index:1},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1c",chlabel:"1 C Input Port",index:2},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1d",chlabel:"1 D Input Port",index:3},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2a",chlabel:"2 A Input Port",index:4},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2b",chlabel:"2 B Input Port",index:5},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2c",chlabel:"2 C Input Port",index:6},{type:"ears",slotid:"net",slotlabel:"Net",chid:"2d",chlabel:"2 D Input Port",index:7},{type:"ears",slotid:"net",slotlabel:"Net",chid:"3a",chlabel:"3 A Input Port",index:8},{type:"ears",slotid:"net",slotlabel:"Net",chid:"3b",chlabel:"3 B Input Port",index:9},{type:"ears",slotid:"net",slotlabel:"Net",chid:"3c",chlabel:"3 C Input Port",index:10},{type:"ears",slotid:"net",slotlabel:"Net",chid:"3d",chlabel:"3 D Input Port",index:11},{type:"ears",slotid:"net",slotlabel:"Net",chid:"4a",chlabel:"4 A Input Port",index:12},{type:"ears",slotid:"net",slotlabel:"Net",chid:"4b",chlabel:"4 B Input Port",index:13},{type:"ears",slotid:"net",slotlabel:"Net",chid:"4c",chlabel:"4 C Input Port",index:14},{type:"ears",slotid:"net",slotlabel:"Net",chid:"4d",chlabel:"4 D Input Port",index:15},{type:"ears",slotid:"net",slotlabel:"Net",chid:"5a",chlabel:"5 A Input Port",index:16},{type:"ears",slotid:"net",slotlabel:"Net",chid:"5b",chlabel:"5 B Input Port",index:17},{type:"ears",slotid:"net",slotlabel:"Net",chid:"5c",chlabel:"5 C Input Port",index:18},{type:"ears",slotid:"net",slotlabel:"Net",chid:"5d",chlabel:"5 D Input Port",index:19},{type:"ears",slotid:"net",slotlabel:"Net",chid:"6a",chlabel:"6 A Input Port",index:20},{type:"ears",slotid:"net",slotlabel:"Net",chid:"6b",chlabel:"6 B Input Port",index:21},{type:"ears",slotid:"net",slotlabel:"Net",chid:"6c",chlabel:"6 C Input Port",index:22},{type:"ears",slotid:"net",slotlabel:"Net",chid:"6d",chlabel:"6 D Input Port",index:23},{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1 Input Port",index:24},{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2 Input Port",index:25}],"MAVEN.A":[{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1 Input Port",index:0},{type:"ears",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2 Input Port",index:1},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1a",chlabel:"1 A Input Port",index:2},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1b",chlabel:"1 B Input Port",index:3},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1c",chlabel:"1 B Input Port",index:4},{type:"ears",slotid:"net",slotlabel:"Net",chid:"1d",chlabel:"1 C Input Port",index:5}]},inmngTable:{"PRODIGY.MC":Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:t})),"PRODIGY.MP":Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:t})),"PRODIGY.MX":Array.from({length:64},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:t})),"MAVEN.A":Array.from({length:32},(e,t)=>({type:"srcdsp",slotid:"inmng1",slotlabel:"In Mng",chid:t+1,chlabel:`#${t+1}`,chlabelpath:`/settings/input_manager/${t}/label`,index:t}))},groupMuteTable:{"PRODIGY.MC":[{type:"mutegrp",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1",index:0},{type:"mutegrp",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2",index:1},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"1",chlabel:"1",index:2},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"2",chlabel:"2",index:3},{type:"mutegrp",slotid:"all",slotlabel:"",chid:"slots",chlabel:"All Slots",index:4}],"PRODIGY.MP":[{type:"mutegrp",slotid:"madi",slotlabel:"Madi",slotlabelpath:"/settings/slot_name/8",chid:"1",chlabel:"1",index:0},{type:"mutegrp",slotid:"madi",slotlabel:"Madi",slotlabelpath:"/settings/slot_name/9",chid:"2",chlabel:"2",index:1},{type:"mutegrp",slotid:"net",slotlabel:"Net",slotlabelpath:"/settings/slot_name/10",chid:"1",chlabel:"1",index:2},{type:"mutegrp",slotid:"net",slotlabel:"Net",slotlabelpath:"/settings/slot_name/11",chid:"2",chlabel:"2",index:3},{type:"mutegrp",slotid:"all",slotlabel:"",chid:"slots",chlabel:"All Slots",index:4}],"PRODIGY.MX":[{type:"mutegrp",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1",index:6},{type:"mutegrp",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2",index:7},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"1",chlabel:"1",index:0},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"2",chlabel:"2",index:1},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"3",chlabel:"3",index:2},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"4",chlabel:"4",index:3},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"5",chlabel:"5",index:4},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"6",chlabel:"6",index:5},{type:"mutegrp",slotid:"dsp",slotlabel:"",chid:"",chlabel:"DSP",index:1001},{type:"mutegrp",slotid:"all",slotlabel:"",chid:"",chlabel:"All",index:1002}],"MAVEN.A":[{type:"mutegrp",slotid:"madi",slotlabel:"Madi",chid:"1",chlabel:"1",index:0},{type:"mutegrp",slotid:"madi",slotlabel:"Madi",chid:"2",chlabel:"2",index:1},{type:"mutegrp",slotid:"net",slotlabel:"Net",chid:"1",chlabel:"1",index:2},{type:"mutegrp",slotid:"all",slotlabel:"",chid:"slots",chlabel:"All Slots",index:4}]},monitoringSnkTable:{GENERIC:[{type:"snk",slotid:"mon1",slotlabel:"Monitoring Out",chid:"1",chlabel:"Phones 1",index:0},{type:"snk",slotid:"mon1",slotlabel:"Monitoring Out",chid:"2",chlabel:"Phones 2",index:1},{type:"snk",slotid:"mon1",slotlabel:"Monitoring Out",chid:"3",chlabel:"Monitor 1",index:2},{type:"snk",slotid:"mon1",slotlabel:"Monitoring Out",chid:"4",chlabel:"Monitor 2",index:3}]},monitoringSrcTable:{GENERIC:[{type:"src",slotid:"mon1",slotlabel:"Monitoring Bus",chid:"1",chlabel:"Phones 1",index:0},{type:"src",slotid:"mon1",slotlabel:"Monitoring Bus",chid:"2",chlabel:"Phones 2",index:1},{type:"src",slotid:"mon1",slotlabel:"Monitoring Bus",chid:"3",chlabel:"Monitor 1",index:2},{type:"src",slotid:"mon1",slotlabel:"Monitoring Bus",chid:"4",chlabel:"Monitor 2",index:3}]}},u={numSlots:{"PRODIGY.MC":8,"PRODIGY.MP":4,"PRODIGY.MX":0,"MAVEN.A":2},numNet:{"PRODIGY.MC":1,"PRODIGY.MP":2,"PRODIGY.MX":6,"MAVEN.A":1},numEqFIR:{"PRODIGY.MC":0,"PRODIGY.MP":32,"PRODIGY.MX":0,"MAVEN.A":16},numEqIIR:{"PRODIGY.MC":0,"PRODIGY.MP":32,"PRODIGY.MX":64,"MAVEN.A":64},numDelay:{"PRODIGY.MC":0,"PRODIGY.MP":32,"PRODIGY.MX":64,"MAVEN.A":64},numCompressor:{"PRODIGY.MC":0,"PRODIGY.MP":32,"PRODIGY.MX":64,"MAVEN.A":64},numGroups:{"PRODIGY.MC":16,"PRODIGY.MP":16,"PRODIGY.MX":32,"MAVEN.A":32},numSumBus:{"PRODIGY.MC":0,"PRODIGY.MP":32,"PRODIGY.MX":64,"MAVEN.A":64},noRecordPaths:{"PRODIGY.MC":[/^\/fan\/(?!silent|temp_thres)/,/^\/status/,/^\/device_info\/(?!name|front_panel_auto_lock|front_panel_lock_timeout)/,/^\/snapshots\/\d+\/(compliant|dataset|scopeset)/,/^\/ip_config\/(current_|mac)/,/^\/mirroring\/(scope|mirrors)/,/^\/licenses\/(?!active)/,/^\/settings\/net_status_tx_t\/\d+\/src_bypass/,/^\/settings\/madi_status_tx\/\d+\/src_bypass/,/^\/settings\/eq\/\d+\/custom_filter\/points/,/^\/settings\/group\/channel\/\d+\/fading_state/,/^\/last_snapshot_recalled/],"PRODIGY.MP":[/^\/fan\/(?!silent|temp_thres)/,/^\/status/,/^\/device_info\/(?!name|front_panel_auto_lock|front_panel_lock_timeout)/,/^\/snapshots\/\d+\/(compliant|dataset|scopeset)/,/^\/ip_config\/(current_|mac)/,/^\/mirroring\/(scope|mirrors)/,/^\/licenses\/(?!active)/,/^\/settings\/net_status_tx_t\/\d+\/src_bypass/,/^\/settings\/madi_status_tx\/\d+\/src_bypass/,/^\/settings\/eq\/\d+\/custom_filter\/points/,/^\/settings\/group\/channel\/\d+\/fading_state/,/^\/last_snapshot_recalled/],"PRODIGY.MX":[/^\/fan\/(?!silent|temp_thres)/,/^\/status/,/^\/device_info\/(?!name|front_panel_auto_lock|front_panel_lock_timeout)/,/^\/snapshots\/\d+\/(compliant|dataset|scopeset|settings)/,/^\/ip_config\/mac/,/^\/mirroring\/(scope|mirrors)/,/^\/licenses\/(?!active)/,/^\/settings\/net_status_tx_t\/\d+\/src_bypass/,/^\/settings\/madi_status_tx\/\d+\/src_bypass/,/^\/settings\/eq\/\d+\/custom_filter\/points/,/^\/settings\/group\/channel\/\d+\/fading_state/,/^\/last_snapshot_recalled/],"MAVEN.A":[/^\/fan\/(?!silent|temp_thres)/,/^\/status/,/^\/device_info\/(?!name|front_panel_auto_lock|front_panel_lock_timeout)/,/^\/snapshots\/\d+\/(compliant|dataset|scopeset)/,/^\/ip_config\/(current_|mac)/,/^\/mirroring\/(scope|mirrors)/,/^\/licenses\/(?!active)/,/^\/settings\/net\/\d+\/src_bypass/,/^\/settings\/madi\/\d+\/src_bypass/,/^\/settings\/eq\/\d+\/custom_filter\/points/,/^\/settings\/group\/channel\/\d+\/fading_state/,/^\/last_snapshot_recalled/]},matMixer:{"PRODIGY.MC":[],"PRODIGY.MP":[{id:"mtx1",label:"MatMix 1",in:16,out:4,devId:3,path:"mixer/3"},{id:"mtx2",label:"MatMix 2",in:16,out:4,devId:7,path:"mixer/7"},{id:"mtx3",label:"MatMix 3",in:16,out:4,devId:11,path:"mixer/11"},{id:"mtx4",label:"MatMix 4",in:16,out:4,devId:15,path:"mixer/15"},{id:"mtx5",label:"MatMix 5",in:16,out:4,devId:19,path:"mixer/19"},{id:"mtx6",label:"MatMix 6",in:16,out:4,devId:23,path:"mixer/23"},{id:"mtx7",label:"MatMix 7",in:16,out:4,devId:27,path:"mixer/27"},{id:"mtx8",label:"MatMix 8",in:16,out:4,devId:31,path:"mixer/31"},{id:"mtx9",label:"MatMix 9",in:8,out:8,devId:0,path:"mixer/0"},{id:"mtx10",label:"MatMix 10",in:8,out:8,devId:4,path:"mixer/4"},{id:"mtx11",label:"MatMix 11",in:8,out:8,devId:8,path:"mixer/8"},{id:"mtx12",label:"MatMix 12",in:8,out:8,devId:12,path:"mixer/12"},{id:"mtx13",label:"MatMix 13",in:8,out:8,devId:16,path:"mixer/16"},{id:"mtx14",label:"MatMix 14",in:8,out:8,devId:20,path:"mixer/20"},{id:"mtx15",label:"MatMix 15",in:8,out:8,devId:24,path:"mixer/24"},{id:"mtx16",label:"MatMix 16",in:8,out:8,devId:28,path:"mixer/28"}],"PRODIGY.MX":[{id:"mtx1",label:"MatMix",in:64,out:64,devId:0,path:"mixer64x64"}],"MAVEN.A":[{id:"mtx1",label:"MatMix",in:64,out:64,devId:0,path:"mixer64x64"}]},sumBusSources:{"PRODIGY.MC":[...Array.from({length:128},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_madi${Math.floor(t/64)+1}_${t%64+1}`})),...Array.from({length:128},(e,t,n=4)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_net${Math.floor(t/128)+1}_${t%128+1}`})),...Array.from({length:64},(e,t,n=12)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_slot${Math.floor(t/8)+1}_${t%8+1}`})),{segment:14,bit:0,chId:"src_gen_1"},{segment:14,bit:2,chId:"src_gen_3"},{segment:14,bit:3,chId:"src_gen_4"},{segment:14,bit:4,chId:"src_gen_5"},{segment:14,bit:5,chId:"src_gen_6"},{segment:14,bit:6,chId:"src_gen_7"},{segment:14,bit:7,chId:"src_gen_8"}],"PRODIGY.MP":[...Array.from({length:128},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_madi${Math.floor(t/64)+1}_${t%64+1}`})),...Array.from({length:256},(e,t,n=4)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_net${Math.floor(t/128)+1}_${t%128+1}`})),...Array.from({length:32},(e,t,n=12)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_slot${Math.floor(t/8)+1}_${t%8+1}`})),...Array.from({length:32},(e,t,n=15)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_inmng${Math.floor(t/32)+1}_${t%32+1}`})),...Array.from({length:160},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_flexch1_${Math.floor(t/5)+1}p${t%5+1}`})),...Array.from({length:160},(e,t,n=16)=>{const s=Math.floor(t/20),i=t%20,o=Math.floor(i/5),r=i%5,a=8*(4*s+3)*5+(5*o+r);return{segment:Math.floor(a/32)+n,bit:a%32,chId:`srcdsp_mtx${s+1}_${o+1}p${r+1}`}}),...Array.from({length:320},(e,t,n=16)=>{const s=Math.floor(t/40),i=t%40,o=Math.floor(i/5),r=i%5,a=4*s*8*5+(5*o+r);return{segment:Math.floor(a/32)+n,bit:a%32,chId:`srcdsp_mtx${s+9}_${o+1}p${r+1}`}}),{segment:14,bit:0,chId:"src_gen_1"},{segment:14,bit:2,chId:"src_gen_3"},{segment:14,bit:3,chId:"src_gen_4"},{segment:14,bit:4,chId:"src_gen_5"},{segment:14,bit:5,chId:"src_gen_6"},{segment:14,bit:6,chId:"src_gen_7"},{segment:14,bit:7,chId:"src_gen_8"}],"PRODIGY.MX":[...Array.from({length:768},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_net${Math.floor(t/128)+1}_${t%128+1}`})),...Array.from({length:128},(e,t,n=48)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_madi${Math.floor(t/64)+1}_${t%64+1}`})),...Array.from({length:64},(e,t,n=30)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_inmng${Math.floor(t/64)+1}_${t%64+1}`})),...Array.from({length:320},(e,t,n=10)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_flexch1_${Math.floor(t/5)+1}p${t%5+1}`})),...Array.from({length:320},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_mtx1_${Math.floor(t/5)+1}p${t%5+1}`})),{segment:52,bit:0,chId:"src_gen_1"},{segment:52,bit:2,chId:"src_gen_3"},{segment:52,bit:3,chId:"src_gen_4"},{segment:52,bit:4,chId:"src_gen_5"},{segment:52,bit:5,chId:"src_gen_6"},{segment:52,bit:6,chId:"src_gen_7"},{segment:52,bit:7,chId:"src_gen_8"}],"MAVEN.A":[...Array.from({length:256},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_net${Math.floor(t/256)+1}_${t%256+1}`})),...Array.from({length:128},(e,t,n=16)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_madi${Math.floor(t/64)+1}_${t%64+1}`})),...Array.from({length:16},(e,t,n=24)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`src_slot${Math.floor(t/8)+1}_${t%8+1}`})),...Array.from({length:64},(e,t,n=30)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_inmng${Math.floor(t/32)+1}_${t%32+1}`})),...Array.from({length:320},(e,t,n=0)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_flexch1_${Math.floor(t/5)+1}p${t%5+1}`})),...Array.from({length:320},(e,t,n=10)=>({segment:n+Math.floor(t/32),bit:t%32,chId:`srcdsp_mtx1_${Math.floor(t/5)+1}p${t%5+1}`})),{segment:25,bit:0,chId:"src_gen_1"},{segment:25,bit:2,chId:"src_gen_3"},{segment:25,bit:3,chId:"src_gen_4"},{segment:25,bit:4,chId:"src_gen_5"},{segment:25,bit:5,chId:"src_gen_6"},{segment:25,bit:6,chId:"src_gen_7"},{segment:25,bit:7,chId:"src_gen_8"}]}};function h(e){const t={set_custom_value:{name:"Set Custom Value",options:[{id:"path",type:"textinput",label:"Path",default:"/",useVariables:{local:!0},tooltip:"Path must start with a forward slash and every segment is divided by a slash."},{id:"value",type:"textinput",label:"Value",default:"",useVariables:{local:!0},tooltip:"Value must be in JSON value notation, that means a string must be enclosed in double quotes."}],callback:async(t,n)=>{const s=await n.parseVariablesInString(`${t.options.path}`),i=await n.parseVariablesInString(`${t.options.value}`);if(!s.match(/^(\/[a-zA-Z0-9_-]+)+$/))return void e.log("error",`Path: ${s} of custom set action is not a valid path format.`);let o;try{o=JSON.parse(i)}catch(t){return void e.log("error",`Value: ${i} of custom set action is not a valid value format.`)}if("string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o)return void e.log("error",`Value: ${i} of custom set action is not a type that can be used. Only string, number and boolean are allowed.`);const r=e.getState(s);void 0!==r?typeof r==typeof o?e.sendSetCmd(s,o):e.log("error",`Path ${s} requires type ${typeof r} but custom value is of type ${typeof o}. Custom set not possible.`):e.log("error",`Path ${s} can't be found on the device. Custom set not possible.`)},learn:(t,n)=>({...t.options,path:e.lastChange.path,value:JSON.stringify(e.lastChange.value)})},snapshot_recall_id:{name:"Recall Snapshot by ID",options:[{id:"snapshot",type:"dropdown",label:"Snapshot",default:"",choices:Array.from({length:99},(t,n)=>e.getState(`/snapshots/${n}`)).map((e,t)=>({label:`${e.name}`,id:t,valid:e.valid,position:Number(e.position)})).filter(e=>e.valid).sort((e,t)=>e.position-t.position).map(e=>({label:e.label,id:e.id})),tooltip:"The ID is an internal number that keeps assigned to the snapshot even if you rename or reposition the snapshot. In the selection you see the current name."}],callback:async(t,n)=>{e.sendCmd({type:"cmd",payload:`recall_snapshot_${t.options.snapshot}`})},learn(t,n){const s=e.getState("/last_snapshot_recalled");return"number"==typeof s&&s>=0?{...t.options,snapshot:s}:{}}},snapshot_recall_pos:{name:"Recall Snapshot by Position",options:[{id:"position",type:"dropdown",label:"Position",default:"",choices:Array.from({length:99},(t,n)=>e.getState(`/snapshots/${n}`)).map(e=>({label:`${e.position+1} (${e.name})`,id:Number(e.position)})).sort((e,t)=>e.id-t.id),tooltip:"The snapshot at the selected position will be recalled. In the selection you see the name of the snapshot at each position only for reference."}],callback:async(t,n)=>{e.sendCmd({type:"cmd",payload:`recall_pos_snapshot_${t.options.position}`})},learn(t,n){const s=e.getState("/last_snapshot_recalled_pos");return"number"==typeof s&&s>=0?{...t.options,position:s}:{}}},flash:{name:"Identify Device",options:[],callback:async(t,n)=>{e.sendCmd({type:"cmd",payload:"flash"})}}},n="PRODIGY.MP"===e.devicetype||"PRODIGY.MX"===e.devicetype||"MAVEN.A"===e.devicetype?[...e.choices.outputChoices,...e.choices.outputFlexChoices,...e.choices.outputMixerChoices,...e.choices.outputSidechainChoices]:e.choices.outputChoices,s=[...e.choices.unassigned,...e.choices.inputChoices,...e.choices.inputDspChoices,...e.choices.generatorSources];return t.routing_standard={name:"Routing: Patch Route",options:[{id:"sink",type:"dropdown",label:"Destination",choices:n,default:n[0].id},{id:"source",type:"dropdown",label:"Source",choices:[...o,...s],default:e.choices.unassigned[0].id}],callback:(t,n)=>{let i=t.options.source;const o=`${t.options.sink}`;let r="/settings/easy_routing/*",a="output";"MAVEN.A"===e.devicetype&&(r="/settings/routing/*"),o.startsWith("snkdsp_flex")?(r="/settings/flex_channel/*/source_routing",a="sinkFlex"):o.startsWith("snkdsp_mtx")&&"PRODIGY.MP"===e.devicetype?(r="/settings/mixer/*",a="sinkMixer"):o.startsWith("snkdsp_mtx")?(r="/settings/mixer64x64/source_routing/*",a="sinkMixer"):o.startsWith("snkdsp_dyn")&&(r="/settings/compressor/*/side_chain_key",a="sinkSidechain");const l=r.replace("*",e.translate("outgoing",a,o));if("%%next%%"==i){const t=s,n=e.getState(l,"input"),o=t.findIndex(e=>e.id==n);if(-1==o)return;i=t[(o+1)%t.length].id}else if("%%prev%%"==i){const t=s,n=e.getState(l,"input"),o=t.findIndex(e=>e.id==n);if(-1==o)return;i=t[0==o?t.length-1:o-1].id}e.sendSetCmd(l,`${i}`,"input")},learn:(t,n)=>{const s=`${t.options.sink}`;let i="/settings/easy_routing/*",o="output";"MAVEN.A"===e.devicetype&&(i="/settings/routing/*"),s.startsWith("snkdsp_flex")?(i="/settings/flex_channel/*/source_routing",o="sinkFlex"):s.startsWith("snkdsp_mtx")&&"PRODIGY.MP"===e.devicetype?(i="/settings/mixer/*",o="sinkMixer"):s.startsWith("snkdsp_mtx")?(i="/settings/mixer64x64/source_routing/*",o="sinkMixer"):s.startsWith("snkdsp_dyn")&&(i="/settings/compressor/*/side_chain_key",o="sinkSidechain");const r=i.replace("*",e.translate("outgoing",o,s)),a=e.getState(r,"input");return{...t.options,source:a}}},t.routing_sumbus={name:"Routing: Sum Bus Assign",options:[{id:"sink",type:"dropdown",label:"Destination",choices:e.choices.sumbusSinkChoices,default:e.choices.sumbusSinkChoices[0].id},{id:"source",type:"dropdown",label:"Source",choices:e.choices.sumbusSourceChoices,default:e.choices.sumbusSourceChoices[0].id},{id:"action",type:"dropdown",label:"Action",choices:[{label:"Toggle",id:"%%toggle%%"},{label:"Set Crosspoint",id:"%%true%%"},{label:"Clear Crosspoint",id:"%%false%%"}],default:"%%toggle%%"}],callback:(t,n)=>{const s=t.options.sink,i=e.translate("outgoing","sinkSumbus",s),o=t.options.source,r=t.options.action;let a="/settings/sum_bus_assign_io/*/segment/#";o.startsWith("srcdsp_")&&(a="/settings/sum_bus_assign_dsp/*/segment/#");const l=u.sumBusSources[e.devicetype].find(e=>e.chId===o);if(!l)return void e.log("error",`sumbus source ${o} not found`);a=a.replace("#",`${l.segment}`),a=a.replace("*",`${i}`);let c=Number(e.getState(a));const d=l.bit;let p=((e,t)=>e>>t&1)(c,d);p="%%toggle%%"===r&&0===p?1:"%%toggle%%"===r&&1===p?0:"%%true%%"===r?1:0,c=((e,t,n)=>e&~(1<<t)|(1&n)<<t)(c,d,p),e.sendSetCmd(a,c)},learn:(t,n)=>{const s=t.options.sink,i=e.translate("outgoing","sinkSumbus",s),o=t.options.source;let r="/settings/sum_bus_assign_io/*/segment/#";o.startsWith("srcdsp_")&&(r="/settings/sum_bus_assign_dsp/*/segment/#");const a=u.sumBusSources[e.devicetype].find(e=>e.chId===o);if(!a)return e.log("error",`sumbus source ${o} not found`),{};r=r.replace("#",`${a.segment}`),r=r.replace("*",`${i}`);const l=(c=Number(e.getState(r)),d=a.bit,c>>d&1);var c,d;let p="%%false%%";if(1===l)p="%%true%%";else{if(0!==l)return{};p="%%false%%"}return{...t.options,action:p}}},t}const b=require("util/types");function g(e){const t={CustomValue:{name:"Check Custom Value",type:"boolean",description:"Observe a custom value and compare to a set value.",defaultStyle:e.defaultDefaultStyle,options:[{id:"path",type:"textinput",label:"Path",default:"/",tooltip:"Path must start with a forward slash and every segment is divided by a slash."},{id:"type",type:"dropdown",label:"Interpret as",tooltip:"The value will be casted to the given type if it is different and possible.",choices:[{label:"String",id:"string"},{label:"Number",id:"number"},{label:"Boolean",id:"boolean"}],default:"string"},{id:"op_string",label:"Check",type:"dropdown",choices:[{label:"Equals",id:"eq"},{label:"Starts With",id:"sw"},{label:"Ends With",id:"ew"},{label:"Contains",id:"co"}],default:"eq",isVisible:e=>"string"===e.type},{id:"op_number",label:"Check",type:"dropdown",choices:[{label:"=",id:"eq"},{label:">",id:"gt"},{label:"<",id:"lt"},{label:"% = 0",id:"mo"}],default:"eq",isVisible:e=>"number"===e.type},{id:"value",type:"textinput",label:"Value",default:"",tooltip:"Type number for numerical comparisons and text for string comparisons.",isVisible:e=>"boolean"!==e.type}],callback:t=>{const n=t.options,s=`${n.path}`,i=n.type,o=`${n.value}`;if(!s.match(/^(\/[a-zA-Z0-9_-]+)+$/))return e.log("error",`Path: ${s} of custom feedback is not a valid path format.`),!1;const r=e.getState(s);if(void 0===r)return e.log("error",`Path ${s} can't be found on the device. Custom feedback not possible.`),!1;if("boolean"===i)return!0===r;if("string"===i){let e=`${r}`;return Array.isArray(r)&&(e=r.join(", ")),"eq"===n.op_string&&e==o||!("sw"!==n.op_string||!e.startsWith(o))||!("ew"!==n.op_string||!e.endsWith(o))||!("co"!==n.op_string||!e.includes(o))}if("number"===i){const t=Number(o);if(isNaN(t))return e.log("warn",`Entered custom feedback value ${o} can't be interpreted as a number.`),!1;const s=Number(r);return isNaN(s)?(e.log("warn",`Retrieved custom feedback value ${r} can't be interpreted as a number.`),!1):"eq"===n.op_number&&s==t||"gt"===n.op_number&&s>t||"lt"===n.op_number&&s<t||"mo"===n.op_number&&s%t==0}return!1},subscribe:t=>{const n=`${t.options.path}`;if(e.validPath(n))if(e.subscriptions.has(n)){const s=e.subscriptions.get(n);(0,b.isSet)(s?.listeners)||(s.listeners=new Set),s.listeners.add(t.id),Array.isArray(s.feedback)||(s.feedback=[t.feedbackId])}else e.subscriptions.set(n,{check:RegExp(n+"$"),feedback:[t.feedbackId],listeners:new Set([t.id])})},unsubscribe:t=>{const n=`${t.options.path}`;if(e.subscriptions.has(n)){const s=e.subscriptions.get(n);(0,b.isSet)(s?.listeners)&&(s.listeners.delete(t.id),0===s.listeners.size&&e.subscriptions.delete(n))}},learn:(t,n)=>{const s=e.lastChange.value;let i=typeof s;"number"!==i&&"string"!==i&&"boolean"!==i&&(i="string");const o={};return"number"===i?o.op_number="eq":"string"===i&&(o.op_string="eq"),{...t.options,...o,path:e.lastChange.path,value:s}}},CustomVariable:{name:"Create Custom Variable",type:"advanced",description:"Observe a custom value and serve the value as a connection variable.",options:[{id:"path",type:"textinput",label:"Path",default:"/",tooltip:"Path must start with a forward slash and every segment is divided by a slash."},{id:"variable",type:"textinput",label:"Variable",default:"",tooltip:"Generate a variable with this name for the value.",regex:"/^[a-zA-Z0-9_-]+$/"}],callback:e=>({}),subscribe:t=>{const n=`${t.options.variable}`;if(!n.match(/^[a-zA-Z0-9_-]+$/))return;const s=`${t.options.path}`;if(!e.validPath(s))return;if(e.variablesTable.has(n)){const s=e.variablesTable.get(n);s?.publishers.add(t.id)}else e.variablesTable.set(n,{variableId:n,name:`Device path ${s}`,publishers:new Set([t.id])}),e.updateVariableDefinitions();e.subscriptions.set(t.id,{check:RegExp(`^${s}$`),listeners:new Set([t.id]),fun:()=>{const t=e.getState(s);e.setVariableValues({[n]:t})}});const i=e.getState(s);e.setVariableValues({[n]:i})},unsubscribe:t=>{const n=`${t.options.variable}`,s=e.variablesTable.get(n);void 0!==s&&(s.publishers.delete(t.id),0===s.publishers.size&&(e.variablesTable.delete(n),e.updateVariableDefinitions()),e.subscriptions.delete(t.id))},learn:(t,n)=>""===t.options.variable&&e.lastChange.path.startsWith("/")?{path:e.lastChange.path,variable:`${e.lastChange.path.substring(1).replaceAll("/","_")}`}:{...t.options,path:e.lastChange.path}}},n="PRODIGY.MP"===e.devicetype||"PRODIGY.MX"===e.devicetype||"MAVEN.A"===e.devicetype?[...e.choices.outputChoices,...e.choices.outputFlexChoices,...e.choices.outputMixerChoices,...e.choices.outputSidechainChoices]:e.choices.outputChoices,s=[...e.choices.unassigned,...e.choices.inputChoices,...e.choices.inputDspChoices,...e.choices.generatorSources];return t.routing_standard={name:"Routing: Check patch",type:"boolean",options:[{id:"sink",type:"dropdown",label:"Destination",choices:n,default:n[0].id},{id:"source",type:"dropdown",label:"Source",choices:s,default:e.choices.unassigned[0].id}],defaultStyle:e.defaultDefaultStyle,callback:(t,n)=>{const s=t.options.source,i=`${t.options.sink}`;let o="/settings/easy_routing/*",r="output";"MAVEN.A"===e.devicetype&&(o="/settings/routing/*"),i.startsWith("snkdsp_flex")?(o="/settings/flex_channel/*/source_routing",r="sinkFlex"):i.startsWith("snkdsp_mtx")&&"PRODIGY.MP"===e.devicetype?(o="/settings/mixer/*",r="sinkMixer"):i.startsWith("snkdsp_mtx")?(o="/settings/mixer64x64/source_routing/*",r="sinkMixer"):i.startsWith("snkdsp_dyn")&&(o="/settings/compressor/*/side_chain_key",r="sinkSidechain");const a=o.replace("*",e.translate("outgoing",r,i));return e.getState(a,"input")==s},learn:(t,n)=>{const s=`${t.options.sink}`;let i="/settings/easy_routing/*",o="output";"MAVEN.A"===e.devicetype&&(i="/settings/routing/*"),s.startsWith("snkdsp_flex")?(i="/settings/flex_channel/*/source_routing",o="sinkFlex"):s.startsWith("snkdsp_mtx")&&"PRODIGY.MP"===e.devicetype?(i="/settings/mixer/*",o="sinkMixer"):s.startsWith("snkdsp_mtx")?(i="/settings/mixer64x64/source_routing/*",o="sinkMixer"):s.startsWith("snkdsp_dyn")&&(i="/settings/compressor/*/side_chain_key",o="sinkSidechain");const r=i.replace("*",e.translate("outgoing",o,s)),a=e.getState(r,"input");return{...t.options,source:a}}},t.routing_sumbus={name:"Routing: Check Sum Bus Assign",type:"boolean",defaultStyle:e.defaultDefaultStyle,options:[{id:"sink",type:"dropdown",label:"Destination",choices:e.choices.sumbusSinkChoices,default:e.choices.sumbusSinkChoices[0].id},{id:"source",type:"dropdown",label:"Source",choices:e.choices.sumbusSourceChoices,default:e.choices.sumbusSourceChoices[0].id}],callback:(t,n)=>{const s=t.options.sink,i=e.translate("outgoing","sinkSumbus",s),o=t.options.source;let r="/settings/sum_bus_assign_io/*/segment/#";o.startsWith("srcdsp_")&&(r="/settings/sum_bus_assign_dsp/*/segment/#");const a=u.sumBusSources[e.devicetype].find(e=>e.chId===o);if(!a)return e.log("error",`sumbus source ${o} not found`),!1;r=r.replace("#",`${a.segment}`),r=r.replace("*",`${i}`);var l,c;return 1===(l=Number(e.getState(r)),c=a.bit,l>>c&1)}},t}var f,m=(f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},f(e,t)},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=Object.prototype.hasOwnProperty;function _(e,t){return y.call(e,t)}function v(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var s=[];for(var i in e)_(e,i)&&s.push(i);return s}function x(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function I(e){for(var t,n=0,s=e.length;n<s;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function k(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function w(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function A(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(A(e[t]))return!0}else if("object"==typeof e)for(var s=v(e),i=s.length,o=0;o<i;o++)if(A(e[s[o]]))return!0;return!1}function S(e,t){var n=[e];for(var s in t){var i="object"==typeof t[s]?JSON.stringify(t[s],null,2):t[s];void 0!==i&&n.push(s+": "+i)}return n.join("\n")}var M=function(e){function t(t,n,s,i,o){var r=this.constructor,a=e.call(this,S(t,{name:n,index:s,operation:i,tree:o}))||this;return a.name=n,a.index=s,a.operation=i,a.tree=o,Object.setPrototypeOf(a,r.prototype),a.message=S(t,{name:n,index:s,operation:i,tree:o}),a}return m(t,e),t}(Error),$=M,O=x,P={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var s=e[t];return delete e[t],{newDocument:n,removed:s}},replace:function(e,t,n){var s=e[t];return e[t]=this.value,{newDocument:n,removed:s}},move:function(e,t,n){var s=E(n,this.path);s&&(s=x(s));var i=D(n,{op:"remove",path:this.from}).removed;return D(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:s}},copy:function(e,t,n){var s=E(n,this.from);return D(n,{op:"add",path:this.path,value:x(s)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:V(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},C={add:function(e,t,n){return I(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var s=e[t];return e[t]=this.value,{newDocument:n,removed:s}},move:P.move,copy:P.copy,test:P.test,_get:P._get};function E(e,t){if(""==t)return e;var n={op:"_get",path:t};return D(e,n),n.value}function D(e,t,n,s,i,o){if(void 0===n&&(n=!1),void 0===s&&(s=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):j(t,0)),""===t.path){var r={newDocument:e};if("add"===t.op)return r.newDocument=t.value,r;if("replace"===t.op)return r.newDocument=t.value,r.removed=e,r;if("move"===t.op||"copy"===t.op)return r.newDocument=E(e,t.from),"move"===t.op&&(r.removed=e),r;if("test"===t.op){if(r.test=V(e,t.value),!1===r.test)throw new $("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return r.newDocument=e,r}if("remove"===t.op)return r.removed=e,r.newDocument=null,r;if("_get"===t.op)return t.value=e,r;if(n)throw new $("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return r}s||(e=x(e));var a=(t.path||"").split("/"),l=e,c=1,d=a.length,p=void 0,u=void 0,h=void 0;for(h="function"==typeof n?n:j;;){if((u=a[c])&&-1!=u.indexOf("~")&&(u=w(u)),i&&("__proto__"==u||"prototype"==u&&c>0&&"constructor"==a[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===p&&(void 0===l[u]?p=a.slice(0,c).join("/"):c==d-1&&(p=t.path),void 0!==p&&h(t,0,e,p)),c++,Array.isArray(l)){if("-"===u)u=l.length;else{if(n&&!I(u))throw new $("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);I(u)&&(u=~~u)}if(c>=d){if(n&&"add"===t.op&&u>l.length)throw new $("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(r=C[t.op].call(t,l,u,e)).test)throw new $("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return r}}else if(c>=d){if(!1===(r=P[t.op].call(t,l,u,e)).test)throw new $("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return r}if(l=l[u],n&&c<d&&(!l||"object"!=typeof l))throw new $("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function N(e,t,n,s,i){if(void 0===s&&(s=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new $("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");s||(e=x(e));for(var o=new Array(t.length),r=0,a=t.length;r<a;r++)o[r]=D(e,t[r],n,!0,i,r),e=o[r].newDocument;return o.newDocument=e,o}function T(e,t,n){var s=D(e,t);if(!1===s.test)throw new $("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return s.newDocument}function j(e,t,n,s){if("object"!=typeof e||null===e||Array.isArray(e))throw new $("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!P[e.op])throw new $("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new $("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new $('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new $("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new $("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&A(e.value))throw new $("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=s.split("/").length;if(i!==o+1&&i!==o)throw new $("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==s)throw new $("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var r=R([{op:"_get",path:e.from,value:void 0}],n);if(r&&"OPERATION_PATH_UNRESOLVABLE"===r.name)throw new $("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function R(e,t,n){try{if(!Array.isArray(e))throw new $("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)N(x(t),x(e),n||!0);else{n=n||j;for(var s=0;s<e.length;s++)n(e[s],s,t,void 0)}}catch(e){if(e instanceof $)return e;throw e}}function V(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,s,i,o=Array.isArray(e),r=Array.isArray(t);if(o&&r){if((s=e.length)!=t.length)return!1;for(n=s;0!==n--;)if(!V(e[n],t[n]))return!1;return!0}if(o!=r)return!1;var a=Object.keys(e);if((s=a.length)!==Object.keys(t).length)return!1;for(n=s;0!==n--;)if(!t.hasOwnProperty(a[n]))return!1;for(n=s;0!==n--;)if(!V(e[i=a[n]],t[i]))return!1;return!0}return e!=e&&t!=t}var F=new WeakMap,G=function(e){this.observers=new Map,this.obj=e},B=function(e,t){this.callback=e,this.observer=t};function q(e,t){t.unobserve()}function L(e,t){var n,s=function(e){return F.get(e)}(e);if(s){var i=function(e,t){return e.observers.get(t)}(s,t);n=i&&i.observer}else s=new G(e),F.set(e,s);if(n)return n;if(n={},s.value=x(e),t){n.callback=t,n.next=null;var o=function(){Y(n)},r=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",r),window.addEventListener("keyup",r),window.addEventListener("mousedown",r),window.addEventListener("keydown",r),window.addEventListener("change",r))}return n.patches=[],n.object=e,n.unobserve=function(){Y(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(s,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",r),window.removeEventListener("keyup",r),window.removeEventListener("mousedown",r),window.removeEventListener("keydown",r),window.removeEventListener("change",r))},s.observers.set(t,new B(t,n)),n}function Y(e,t){void 0===t&&(t=!1);var n=F.get(e.object);z(n.value,e.object,e.patches,"",t),e.patches.length&&N(n.value,e.patches);var s=e.patches;return s.length>0&&(e.patches=[],e.callback&&e.callback(s)),s}function z(e,t,n,s,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=v(t),r=v(e),a=!1,l=r.length-1;l>=0;l--){var c=e[p=r[l]];if(!_(t,p)||void 0===t[p]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:s+"/"+k(p),value:x(c)}),n.push({op:"remove",path:s+"/"+k(p)}),a=!0):(i&&n.push({op:"test",path:s,value:e}),n.push({op:"replace",path:s,value:t}));else{var d=t[p];"object"==typeof c&&null!=c&&"object"==typeof d&&null!=d&&Array.isArray(c)===Array.isArray(d)?z(c,d,n,s+"/"+k(p),i):c!==d&&(i&&n.push({op:"test",path:s+"/"+k(p),value:x(c)}),n.push({op:"replace",path:s+"/"+k(p),value:x(d)}))}}if(a||o.length!=r.length)for(l=0;l<o.length;l++){var p;_(e,p=o[l])||void 0===t[p]||n.push({op:"add",path:s+"/"+k(p),value:x(t[p])})}}}function W(e,t,n){void 0===n&&(n=!1);var s=[];return z(e,t,s,"",n),s}const U=Object.assign({},e,t,{JsonPatchError:M,deepClone:x,escapePathComponent:k,unescapePathComponent:w});function H(e){const t=e.config.defaultcolor_bg,n=e.config.defaultcolor_inactive,s=e.config.defaultcolor_active,i=e.config.defaultcolor_ok,o=e.config.defaultcolor_warn,r=e.config.defaultcolor_bad;return[{type:"button",category:"Input",style:{text:'`${$(DO:input_label)["src_slot2_1"]}\\nMute\\n ${toFixed($(DO:input_trim)["src_madi1_1"],1)} dB Trim`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"mute_input",options:{input:"src_slot2_1",input_mute:1},style:{color:a(r),bgcolor:r},isInverted:!1,headline:"Change background when input is muted"}],steps:[{down:[{actionId:"mute_input",options:{input:"src_slot2_1",input_mute:"%%toggle%%"},headline:"Toggle Input Mute"}],up:[]}],name:"Input Mute and Trim"},{type:"button",category:"Input",style:{text:'`${$(DO:input_label)["src_slot2_1"]}\\nMute\\n ${$(DO:settings_slot_pad)["1"]["0"]?$(DO:settings_slot_analog_gain)["1"]["0"]-9:$(DO:settings_slot_analog_gain)["1"]["0"]+0} dB`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"mute_input",options:{input:"src_slot2_1",input_mute:1},style:{color:a(r),bgcolor:r},isInverted:!1,headline:"Change background when input is muted"}],steps:[{down:[{actionId:"mute_input",options:{input:"src_slot2_1",input_mute:"%%toggle%%"},headline:"Toggle input mute"}],up:[]}],name:"Input Mute and Gain"},{type:"button",category:"Input",style:{text:"PAD",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"slot_analog_pad",options:{slot:1,channel:0,pad:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when pad is enabled"}],steps:[{down:[{actionId:"slot_analog_pad",options:{slot:1,channel:0,pad:"%%toggle%%"},headline:"Toggle input pad"}],up:[]}],name:"PAD"},{type:"button",category:"Input",style:{text:"Input Polarity",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"input_polarity",options:{input:"src_slot2_1",input_polarity:1},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when input polarity is inverted"}],steps:[{down:[{actionId:"input_polarity",options:{input:"src_slot2_1",input_polarity:"%%toggle%%"},headline:"Toggle input polarity"}],up:[]}],name:"Input Polarity"},{type:"button",category:"Input",style:{text:"48 V",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"slot_analog_phantom",options:{slot:1,channel:0,phantom_power:!0},style:{color:a(16744448),bgcolor:16744448},isInverted:!1,headline:"Change background when phantom power is enabled"}],steps:[{down:[{actionId:"slot_analog_phantom",options:{slot:1,channel:0,phantom_power:"%%toggle%%"},headline:"Toggle phantom power"}],up:[]}],name:"Phantom Power"},{type:"button",category:"Input",style:{text:"AES SRC",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"slot_aes_src",options:{slot:0,channel:0,src:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when AES input SRC is enabled"}],steps:[{down:[{actionId:"slot_aes_src",options:{slot:0,channel:0,src:"%%toggle%%"},headline:"Toggle AES input SRC"}],up:[]}],name:"AES SRC"},{type:"button",category:"Output",style:{text:'`${$(DO:output_label)["snk_madi1_1"]}\\nMute\\n ${toFixed($(DO:output_trim)["snk_madi1_1"],1)} dB Trim`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"mute_output",options:{output:"snk_madi1_1",output_mute:1},style:{color:a(r),bgcolor:r},isInverted:!1,headline:"Change background when output is muted"}],steps:[{down:[{actionId:"mute_output",options:{output:"snk_madi1_1",output_mute:"%%toggle%%"},headline:"Toggle output mute"}],up:[]}],name:"Output Mute and Trim"},{type:"button",category:"Output",style:{text:'`${$(DO:output_label)["snk_madi1_1"]}\\nMute\\n ${toFixed($(DO:output_gain)["snk_madi1_1"],1)} dB`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"mute_output",options:{output:"snk_madi1_1",output_mute:1},style:{color:a(r),bgcolor:r},isInverted:!1,headline:"Change background when output is muted"}],steps:[{down:[{actionId:"mute_output",options:{output:"snk_madi1_1",output_mute:"%%toggle%%"},headline:"Toggle output mute"}],up:[]}],name:"Output Mute and Gain"},{type:"button",category:"Output",style:{text:"Output Polarity",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"output_polarity",options:{output:"snk_madi1_1",output_polarity:1},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when output polarity is enabled"}],steps:[{down:[{actionId:"output_polarity",options:{output:"snk_madi1_1",output_polarity:"%%toggle%%"},headline:"Toggle output polarity"}],up:[]}],name:"Output Polarity"},{type:"button",category:"Output",style:{text:"LV Coherence",textExpression:!1,size:"12",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"inmng_coherency",options:{inmng:"srcdsp_inmng1_1",coherency_detection:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when coherency detection is enabled"}],steps:[{down:[{actionId:"inmng_coherency",options:{inmng:"srcdsp_inmng1_1",coherency_detection:"%%toggle%%"},headline:"Toggle In Mng coherency detection"}],up:[]}],name:"In Mng Coherence Detection"},{type:"button",category:"Output",style:{text:"Force\\nAuto",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"inmng_manual",options:{inmng:"srcdsp_inmng1_1",manual:"none"},style:{color:a(s),bgcolor:s,text:"Auto",textExpression:!1},isInverted:!1,headline:"Change background when In Mng manual mode is disabled"}],steps:[{down:[{actionId:"inmng_manual",options:{inmng:"srcdsp_inmng1_1",manual:"none"},headline:"Disable In Mng manual mode"}],up:[]}],name:"In Mng Force Auto"},{type:"button",category:"Output",style:{text:'`${$(DO:input_manager_label)["srcdsp_inmng1_1"]}\\n#1`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"inmng_status_active",options:{inmng:"srcdsp_inmng1_1",channel:"in1"},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text color when In Mng slot is active"}],steps:[{down:[],up:[]}],name:"In Mng Active #1 "},{type:"button",category:"Output",style:{text:"Lock\\n#1",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"inmng_status_locked",options:{inmng:"srcdsp_inmng1_1",channel:"in1",trigger:!0},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text color when In Mng slot is locked"}],steps:[{down:[],up:[]}],name:"In Mng Lock Status"},{type:"button",category:"Output",style:{text:"Coherence\\n#1",textExpression:!1,size:"12",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"inmng_status_coherency",options:{inmng:"srcdsp_inmng1_1",channel:"in1",coherency:!0},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text color when In Mng slot coherence is detected"},{feedbackId:"inmng_coherency",options:{inmng:"srcdsp_inmng1_1",coherency_detection:!1},style:{text:"",textExpression:!1,color:a(t),bgcolor:t},isInverted:!1,headline:"Change background and text when In Mng coherence detection is disabled"}],steps:[{down:[],up:[]}],name:"In Mng Coherence Status"},{type:"button",category:"Output",style:{text:"Force\\nManual\\n#1",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"inmng_manual",options:{inmng:"srcdsp_inmng1_1",manual:"in1"},style:{color:a(s),bgcolor:s,text:"Manual\\n#1",textExpression:!1},isInverted:!1,headline:"Change background and text when In Mng slot is set to manual"}],steps:[{down:[{actionId:"inmng_manual",options:{inmng:"srcdsp_inmng1_1",manual:"in1"},headline:"Set In Mng slot to manual"}],up:[]}],name:"In Mng Force Manual "},{type:"button",category:"EARS",style:{text:"Ears Active Status",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"status_ears_active",options:{ears:"ears_madi_1",active:0},style:{text:"Main",textExpression:!1,color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text when EARS Main is active"},{feedbackId:"status_ears_active",options:{ears:"ears_madi_1",active:1},style:{text:"Backup",textExpression:!1,color:a(r),bgcolor:r},isInverted:!1,headline:"Change background and text when EARS Backup is active"},{feedbackId:"status_ears_active",options:{ears:"ears_madi_1",active:2},style:{text:"Recovery",textExpression:!1,color:a(r),bgcolor:r},isInverted:!1,headline:"Change background and text when EARS recovery is active"}],steps:[{down:[],up:[]}],name:"Ears Active Status"},{type:"button",category:"EARS",style:{text:"Auto\\nPriority",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_priority",options:{ears:"ears_madi_1",priority:3},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when priority is set to Auto"}],steps:[{down:[{actionId:"ears_priority",options:{ears:"ears_madi_1",priority:3},headline:"Set EARS priority to Auto"}],up:[]}],name:"Ears Priority Auto"},{type:"button",category:"EARS",style:{text:"Main\\nPriority",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_priority",options:{ears:"ears_madi_1",priority:1},style:{color:a(s),bgcolor:s,text:"Main\\nPriority",textExpression:!1},isInverted:!1,headline:"Change background when priority is set to Main"}],steps:[{down:[{actionId:"ears_priority",options:{ears:"ears_madi_1",priority:1},headline:"Set EARS priority to Main"}],up:[]}],name:"Ears Priority Main"},{type:"button",category:"EARS",style:{text:"Backup\\nPriority",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_priority",options:{ears:"ears_madi_1",priority:2},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when priority is set to Backup"}],steps:[{down:[{actionId:"ears_priority",options:{ears:"ears_madi_1",priority:2},headline:"Set EARS priority to Backup"}],up:[]}],name:"Ears Priority Backup"},{type:"button",category:"EARS",style:{text:"Main\\nN/A",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"status_ears_blds",options:{ears:"ears_madi_1",blds_present:!0},style:{text:"Main\\nBLDS",textExpression:!1,color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text when BLDS is detected"},{feedbackId:"status_ears_pilot",options:{ears:"ears_madi_1",audio_pilot:!0},style:{text:"Main\\nPilot",textExpression:!1,color:a(s),bgcolor:s},isInverted:!1,headline:"Change background and text when Pilot is detected"}],steps:[{down:[],up:[]}],name:"Ears Main Trigger "},{type:"button",category:"EARS",style:{text:"Backup\\nN/A",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"status_ears_blds",options:{ears:"ears_madi_2",blds_present:!0},style:{text:"Backup\\nBLDS",textExpression:!1,color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text when BLDS is detected"},{feedbackId:"status_ears_pilot",options:{ears:"ears_madi_2",audio_pilot:!0},style:{text:"Backup\\nPilot",textExpression:!1,color:a(s),bgcolor:s},isInverted:!1,headline:"Change background and text when Pilot is detected"}],steps:[{down:[],up:[]}],name:"Ears Backup Trigger "},{type:"button",category:"EARS",style:{text:"Recovery\\nN/A",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"status_ears_blds",options:{ears:"ears_net_1a",blds_present:!0},style:{text:"Recovery\\nBLDS",textExpression:!1,color:a(i),bgcolor:i},isInverted:!1,headline:"Change background and text when BLDS is detected"},{feedbackId:"status_ears_pilot",options:{ears:"ears_net_1a",audio_pilot:!0},style:{text:"Recovery\\nPilot",textExpression:!1,color:a(s),bgcolor:s},isInverted:!1,headline:"Change background and text when Pilot is detected"}],steps:[{down:[],up:[]}],name:"Ears Recovery Trigger "},{type:"button",category:"EARS",style:{text:"Force\\nOff",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_force",options:{ears:"ears_madi_1",force:0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when manual mode is disabled"}],steps:[{down:[{actionId:"ears_force",options:{ears:"ears_madi_1",force:0},headline:"Disable EARS manual mode"}],up:[]}],name:"Force Off"},{type:"button",category:"EARS",style:{text:"Force\\nMain",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_force",options:{ears:"ears_madi_1",force:1},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when manual mode is forced"}],steps:[{down:[{actionId:"ears_force",options:{ears:"ears_madi_1",force:1},headline:"Force Main to manual"}],up:[]}],name:"Force Main"},{type:"button",category:"EARS",style:{text:"Force\\nBackup",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_force",options:{ears:"ears_madi_1",force:2},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when manual mode is forced"}],steps:[{down:[{actionId:"ears_force",options:{ears:"ears_madi_1",force:2},headline:"Force Backup to manual"}],up:[]}],name:"Force Backup"},{type:"button",category:"EARS",style:{text:"Force\\nRecovery",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ears_force",options:{ears:"ears_madi_1",force:3},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when manual mode is forced"}],steps:[{down:[{actionId:"ears_force",options:{ears:"ears_madi_1",force:3},headline:"Force Disaster Recovery to manual"}],up:[]}],name:"Force Recovery"},{type:"button",category:"Flex Channel",style:{text:'`${$(DO:flex_channel_label)["snkdsp_flex1_1"]}\\n${$(DO:flex_channel_gain)["snkdsp_flex1_1"]} dB`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"flex_mute",options:{flexchannel:"snkdsp_flex1_1",mute:!0},style:{color:a(r),bgcolor:r},isInverted:!1,headline:"Change background when Flex Channel is muted"}],steps:[{down:[{actionId:"flex_mute",options:{flexchannel:"snkdsp_flex1_1",mute:"%%toggle%%"},headline:"Toggle Flex Channel mute"}],up:[]}],name:"Flex Channel Mute,  Label and Gain"},{type:"button",category:"Flex Channel",style:{text:"Flex Channel Polarity",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"flex_polarity",options:{flexchannel:"snkdsp_flex1_1",polarity:1},style:{color:a(s),bgcolor:s,text:"Polarity",textExpression:!1},isInverted:!1},{feedbackId:"flex_polarity",options:{flexchannel:"snkdsp_flex1_1",polarity:0},style:{color:a(n),bgcolor:n,text:"Polarity",textExpression:!1},isInverted:!1}],steps:[{down:[{actionId:"flex_polarity",options:{flexchannel:"snkdsp_flex1_1",polarity:"%%toggle%%"},headline:"Toggel Flex Channel polarity"}],up:[]}],name:"Flex Channel Polarity"},{type:"button",category:"Flex Channel",style:{text:'`Time Adjust\\n${$(DO:flex_channel_time_adjust)["snkdsp_flex1_1"]} smp`',textExpression:!0,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"flex_time_adj",options:{operation:"gt",flexchannel:"snkdsp_flex1_1",time_adj:0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when time adjust is enabled"}],steps:[{down:[],up:[]}],name:"Flex Channel Time Adjust"},{type:"button",category:"Flex Channel",style:{text:'`Contribution\\n${$(DO:flex_channel_automix_contribution)["snkdsp_flex1_1"]}`',textExpression:!0,size:"12",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"flex_automix_contrib",options:{operation:"lt",flexchannel:"snkdsp_flex1_1",automix_contrib:100},style:{color:a(o),bgcolor:o},isInverted:!1,headline:"Change background when contribution is below the default value"}],steps:[{down:[],up:[]}],name:"AutoMix Contribution"},{type:"button",category:"Flex Channel",style:{text:'`Priority\\n${$(DO:flex_channel_automix_priority)["snkdsp_flex1_1"]}`',textExpression:!0,size:"12",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"flex_automix_priority",options:{operation:"gt",flexchannel:"snkdsp_flex1_1",automix_priority:0},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background when priority is enabled"}],steps:[{down:[],up:[]}],name:"AutoMix Priority"},{type:"button",category:"Flex Channel",style:{text:'`Hush\\nWizard\\n${$(DO:automix_hush_wizard)["0"]}`',textExpression:!0,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"automix_bias",options:{operation:"gt",automix:0,bias:-104},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change Background when hush wizard is enabled"}],steps:[{down:[],up:[]}],name:"Hush Wizard"},{type:"button",category:"Flex Channel",style:{text:'`${$(DO:automix_label)["0"]}\\nSpeed \\n${$(DO:automix_speed)\n["0"]+1}`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[],steps:[{down:[{actionId:"automix_speed",options:{automix:0,speed:"%%next%%"},headline:"Select AutoMix speed"}],up:[]}],name:"Automix Speed"},{type:"button",category:"Sum Bus",style:{text:'`${$(DO:sum_bus_label)["srcdsp_sumbus1_1"]}\\nMute\\n${toFixed($(DO:sum_bus_gain)["srcdsp_sumbus1_1"],1)} dB`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"sum_bus_mute",options:{sink:"srcdsp_sumbus1_1",mute_master:!0},style:{color:a(r),bgcolor:r,text:'`${$(DO:Sum_Bus_Label)["srcdsp_sumbus1_1"]}\\nMute\\n${toFixed($(DO:Sum_Bus_Gain)["srcdsp_sumbus1_1"],1)} dB`',textExpression:!0},isInverted:!1,headline:"Change background when Sum Bus is muted"}],steps:[{down:[{actionId:"sum_bus_mute",options:{sink:"srcdsp_sumbus1_1",mute_master:"%%toggle%%"},headline:"Toggel Sum Bus mute"}],up:[]}],name:"Sum Bus Mute Label and Gain"},{type:"button",category:"Sum Bus",style:{text:"Polarity",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"sum_bus_polarity",options:{sink:"srcdsp_sumbus1_1",polarity:1},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when Sum Bus polarity is reversed "}],steps:[{down:[{actionId:"sum_bus_polarity",options:{sink:"srcdsp_sumbus1_1",polarity:"%%toggle%%"},headline:"Toggel Sum Bus polarity"}],up:[]}],name:"Sum Bus Polarity"},{type:"button",category:"Sum Bus",style:{text:"Sum Bus\\n Assign",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"routing_sumbus",options:{sink:"srcdsp_sumbus1_1",source:"src_madi1_1"},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background when specific source is assigned to Sum Bus"}],steps:[{down:[{actionId:"routing_sumbus",options:{sink:"srcdsp_sumbus1_1",source:"src_madi1_1",action:"%%toggle%%"},headline:"Toggle Sum Bus assignment for specific source"}],up:[]}],name:"Sum Bus\\n Assign"},{type:"button",category:"Groups",style:{text:'`${$(DO:group_label)["grp__1"]}\\nMute\\n${toFixed($(DO:group_gain)["grp__1"],1)} dB`',textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"group_mute",options:{group:"grp__1",mute:!0},style:{color:a(r),bgcolor:r,text:'`${$(DO:Group_Label)["grp__1"]}\\nMute\\n${toFixed($(DO:Group_Gain)["grp__1"],1)} dB`',textExpression:!0},isInverted:!1}],steps:[{down:[{actionId:"group_mute",options:{group:"grp__1",mute:"%%toggle%%"}}],up:[]}],name:"Group Mute, Label and Gain"},{type:"button",category:"Groups",style:{text:"Group Fade",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"group_fadingstate",options:{group:"grp__1",fading_state:"faded_in"},style:{text:"Fade\\nOut",textExpression:!1,color:a(n),bgcolor:n},isInverted:!1,headline:"Change background and text when faded in"},{feedbackId:"group_fadingstate",options:{group:"grp__1",fading_state:"fading_in"},style:{text:"Fading\\nIn",textExpression:!1},isInverted:!1,headline:"Change text while fading in"},{feedbackId:"group_fadingstate",options:{group:"grp__1",fading_state:"fading_out"},style:{text:"Fading\\nOut",textExpression:!1},isInverted:!1,headline:"Change text while fading out"},{feedbackId:"group_fadingstate",options:{group:"grp__1",fading_state:"faded_out"},style:{text:"Fade\\nIn",textExpression:!1,color:a(s),bgcolor:s},isInverted:!1,headline:"Change background and text when faded out"}],steps:[{down:[{actionId:"group_fadeout",options:{group:"grp__1",fade_out:"%%toggle%%"},headline:"Toggle group fade"}],up:[]}],name:"Group Fade"},{type:"button",category:"Groups",style:{text:"Output\\nGroup\\nMute",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"mute_group",options:{mutegroup:"mutegrp_madi_1",mute_group:1},style:{color:a(r),bgcolor:r},isInverted:!1,headline:"Change background when output mute group is muted"}],steps:[{down:[{actionId:"mute_group",options:{mutegroup:"mutegrp_madi_1",mute_group:"%%toggle%%"},headline:"Toggle output group mute"}],up:[]}],name:"Output Group Mute"},{type:"button",category:"DSP",style:{text:"IIR",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"eq_iir_enable",options:{eqiir:0,eq_enabled:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when IIR is enabled"}],steps:[{down:[{actionId:"eq_iir_enable",options:{eqiir:0,eq_enabled:"%%toggle%%"},headline:"Toggle IIR enable"}],up:[]}],name:"Enable IIR"},{type:"button",category:"DSP",style:{text:"FIR",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"eq_fir_enable",options:{eqfir:0,eq_enabled:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when FIR is enabled"}],steps:[{down:[{actionId:"eq_fir_enable",options:{eqfir:0,eq_enabled:"%%toggle%%"},headline:"Toggle FIR enable"}],up:[]}],name:"Enable FIR"},{type:"button",category:"DSP",style:{text:"Dynamics",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"compressor_enable",options:{compressor:0,compressor_enabled:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when dynamics is enabled"}],steps:[{down:[{actionId:"compressor_enable",options:{compressor:0,compressor_enabled:"%%toggle%%"},headline:"Toggle dynamics enable"}],up:[]}],name:"Enable Dynamics"},{type:"button",category:"DSP",style:{text:"`Delay\\n${$(DO:delay_samples)[0]} smp\\n${toFixed((($(DO:delay_samples)[0]/$(DO:device_samplerate))*1000),1)} ms`",textExpression:!0,size:"auto",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"delay_enable",options:{delay:0,delay_enabled:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when delay is enabled"}],steps:[{down:[{actionId:"delay_enable",options:{delay:0,delay_enabled:"%%toggle%%"},headline:"Toggle delay enable"}],up:[]}],name:"Enable Delay"},{type:"button",category:"Snapshots",style:{text:"`Active\\nSnapshot\\n${$(DO:last_recalled_snapshot_name)}`",textExpression:!0,size:"auto",color:a(n),bgcolor:n},feedbacks:[],steps:[{down:[],up:[]}],name:"Last Recalled Snapshot"},{type:"button",category:"Snapshots",style:{text:'`Recall \\n${$(DO:snapshots)["0"]["name"]}`',textExpression:!0,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"snapshot_last_id",options:{operation:"eq",last_snapshot_recalled:0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when snapshot is loaded"}],steps:[{down:[{actionId:"snapshot_recall_id",options:{snapshot:0},headline:"Recall snapshot by ID"}],up:[]}],name:"Recall Snapshot by ID "},{type:"button",category:"Monitoring",style:{text:'`LTC\\n${replaceAll($(DO:settings_ltc_source),"src_gen_-1","Unassigned")}`',textExpression:!0,size:"auto",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ltc_source",options:{ltc_source:"src_gen_-1"},style:{color:a(i),bgcolor:i},isInverted:!0,headline:"Change background when LTC source is assigned "}],steps:[{down:[],up:[]}],name:"LTC Source Feedback"},{type:"button",category:"Monitoring",style:{text:"Set\\nLTC\\nSource",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"ltc_source",options:{ltc_source:"src_madi1_1"},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change Background when LTC is assigned "}],steps:[{down:[{actionId:"ltc_source",options:{ltc_source:"src_madi1_1"},headline:"Set LTC source"}],up:[]}],name:"Set LTC Source"},{type:"button",category:"Monitoring",style:{text:'`${$(DO:monitoring_label)["snk_mon1_3"]}\\n${$(DO:input_label)[$(DO:settings_monitoring_source_1)["0"]]?$(DO:input_label)[$(DO:settings_monitoring_source_1)["0"]]:"Unassigned"}`',textExpression:!0,size:"auto",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"monitoring_source1",options:{channel:0,input:"src_gen_-1"},style:{color:a(i),bgcolor:i},isInverted:!0,headline:"Change background when monitoring source is assigned to Monitor 1"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_3",source:"src_mon1_3"},style:{color:a(r),bgcolor:r},isInverted:!0,headline:"Change background when Monitor 1 route is not Monitor 1"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_3",source:"src_mon1_1"},style:{text:'`${$(DO:Monitoring_Label)["snk_mon1_3"]}\\n${$(DO:Monitoring_Label)["snk_mon1_1"]}`',textExpression:!0},isInverted:!1,headline:"Change text when Monitor 1 route is Phones 1"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_3",source:"src_mon1_2"},style:{text:'`${$(DO:Monitoring_Label)["snk_mon1_3"]}\\n${$(DO:Monitoring_Label)["snk_mon1_2"]}`',textExpression:!0},isInverted:!1,headline:"Change text when Monitor 1 route is Phones 2"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_3",source:"src_mon1_4"},style:{text:'`${$(DO:Monitoring_Label)["snk_mon1_3"]}\\n${$(DO:Monitoring_Label)["snk_mon1_4"]}`',textExpression:!0},isInverted:!1,headline:"Change text when Monitor 1 route is Monitor 2"}],steps:[{down:[],up:[]}],name:"Monitor 1 Feedback"},{type:"button",category:"Monitoring",style:{text:'`Set\\n${$(DO:monitoring_label)["snk_mon1_3"]}\\nSource`',textExpression:!0,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"monitoring_source1",options:{channel:0,input:"src_madi1_1"},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background when Monitor 1 source is assigned"}],steps:[{down:[{actionId:"monitoring_source1",options:{channel:0,input:"src_madi1_1"},headline:"Set Monitor 1 source"},{actionId:"monitoring_source1",options:{channel:1,input:"src_madi1_2"},headline:"Set Monitor 1 source"}],up:[]}],name:"Set Monitor 1"},{type:"button",category:"Monitoring",style:{text:'`${$(DO:monitoring_label)["snk_mon1_4"]}\\n${$(DO:input_label)[$(DO:settings_monitoring_source_2)["0"]]?$(DO:input_label)[$(DO:settings_monitoring_source_2)["0"]]:"Unassigned"}`',textExpression:!0,size:"auto",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"monitoring_source2",options:{channel:0,input:"src_gen_-1"},style:{color:a(i),bgcolor:i},isInverted:!0,headline:"Change background when source is assigned to Monitor 2"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_4",source:"src_mon1_4"},style:{color:a(r),bgcolor:r},isInverted:!0,headline:"Change background when Monitor 2 route is not Monitor 1"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_4",source:"src_mon1_1"},style:{text:'`${$(DO:Monitoring_Label)["snk_mon1_4"]}\\n${$(DO:Monitoring_Label)["snk_mon1_1"]}`',textExpression:!0},isInverted:!1,headline:"Change text when Monitor 2 route is Phones 1"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_4",source:"src_mon1_2"},style:{text:'`${$(DO:Monitoring_Label)["snk_mon1_4"]}\\n${$(DO:Monitoring_Label)["snk_mon1_2"]}`',textExpression:!0},isInverted:!1,headline:"Change text when Monitor 2 route is Phones 2"},{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_4",source:"src_mon1_3"},style:{text:'`${$(DO:Monitoring_Label)["snk_mon1_4"]}\\n${$(DO:Monitoring_Label)["snk_mon1_3"]}`',textExpression:!0},isInverted:!1,headline:"Change text when Monitor 2 route is Monitor 1"}],steps:[{down:[],up:[]}],name:"Monitor 2 Feedback"},{type:"button",category:"Monitoring",style:{text:'`Set\\n${$(DO:monitoring_label)["snk_mon1_4"]}\\nSource`',textExpression:!0,size:"auto",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"monitoring_source2",options:{channel:0,input:"src_madi1_1"},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background when Monitor 2 source is assigned"}],steps:[{down:[{actionId:"monitoring_source2",options:{channel:0,input:"src_madi1_1"},headline:"Set Monitor 2 source"},{actionId:"monitoring_source2",options:{channel:1,input:"src_madi1_2"},headline:"Set Monitor 2 source"}],up:[]}],name:"Set Monitor 2"},{type:"button",category:"Monitoring",style:{text:"Monitoring Route",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"monitoring_routing",options:{sink:"snk_mon1_1",source:"src_mon1_1"},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background when monitor route is assigned"}],steps:[{down:[{actionId:"monitoring_routing",options:{sink:"snk_mon1_1",source:"src_mon1_1"},headline:"Set monitor route"}],up:[]}],name:"Set Monitoring Route"},{type:"button",category:"Settings",style:{text:"GP Input Status",textExpression:!1,size:"14",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"status_gpi",options:{gpi:0,state:!0},style:{color:a(i),bgcolor:i},isInverted:!1,headline:"Change background when GPI is true"}],steps:[{down:[],up:[]}],name:"GPI Status"},{type:"button",category:"Settings",style:{text:"GP Output",textExpression:!1,size:"14",color:a(n),bgcolor:n},feedbacks:[{feedbackId:"gpo_set",options:{gpo:0,state:!0},style:{color:a(s),bgcolor:s},isInverted:!1,headline:"Change background when GP output is on"}],steps:[{down:[{actionId:"gpo_set",options:{gpo:0,state:"%%toggle%%"},headline:"Toggle GP output"}],up:[]}],name:"GPO Status"},{type:"button",category:"Settings",style:{text:"No\\nWarning",textExpression:!1,size:"auto",color:a(t),bgcolor:t},feedbacks:[{feedbackId:"status_warnings_active",options:{active:!0},style:{color:a(r),bgcolor:r,text:"$(DO:warnings_message)",textExpression:!0},isInverted:!1,headline:"Change background and text when warning present"}],steps:[{down:[],up:[]}],name:"Warning Feedback"},{type:"button",category:"Settings",style:{text:"$(DO:settings_device_name)",textExpression:!0,size:"auto",color:a(t),bgcolor:t},feedbacks:[],steps:[{down:[{actionId:"flash",options:{},headline:"Flash device leds"}],up:[]}],name:"Device Name and Identify"}].reduce((e,t)=>({...e,[t.name]:t}),{})}class J extends s.InstanceBase{static port=5003;config;socket;sendId=0;state={};translations={input:{outgoing:new Map,incoming:new Map},output:{outgoing:new Map,incoming:new Map},fadingStates:{incoming:new Map([[0,"faded_in"],[1,"faded_out"],[2,"fading_in"],[3,"fading_out"]]),outgoing:new Map([["faded_in",0],["faded_out",1],["fading_in",2],["fading_out",3]])}};choices={};actionDefinitions={};feedbackDefinitions={};variablesTable=new Map;presetDefinitions={};subscriptions=new Map;defaultDefaultStyle={};recorderTable=new Map;lastChange={path:"/",value:""};devicetype="GENERIC";isRecording=!1;inhibitNextGenericRecord=!1;constructor(e){super(e)}async init(e){this.log("debug","Initializing DirectOut module"),this.config=e,this.initVariablesTable(),this.updateDefaultDefaultStyle(),""!==this.config.host&&(this.log("debug",`Starting connection to ${this.config.host}:${J.port}`),this.startConnection(this.config.host,J.port)),this.setPresetDefinitions(H(this))}getOptionsValues(e){const t={options:[],parameters:[]};return t.parameters=Object.keys(e).filter(e=>e.startsWith("param")).sort().map(t=>{let n;const s=(e=>e.indexOf("/")>-1?e.substring(e.indexOf("/")):"")(t);if("translation"===t.split("_")[1]){const e=t.split("_")[2];"string"==typeof e&&Object.keys(this.translations).includes(e)&&(n=e)}const o=e[t];let r=i(o);return n&&(r=this.translate("outgoing",n,o)),{key:t,value:r,translation:n,origvalue:o,path:s}}),t.options=Object.keys(e).filter(e=>e.startsWith("opt")).sort().map(t=>{let n;if("translation"===t.split("_")[1]){const e=t.split("_")[2];"string"==typeof e&&Object.keys(this.translations).includes(e)&&(n=e)}const s=e[t];let o=i(s);return n&&(o=this.translate("outgoing",n,s)),{key:t,value:o,translation:n,origvalue:s}}),t.options.length&&t.parameters.forEach(e=>{e.path=((e,t)=>{if(!Array.isArray(t))return e;if(e.split("").filter(e=>"*"===e).length>t.length)return e;const n=e.split("*");if(n.length<=1)return e;const s=[];for(let e=0;e<n.length-1;e++)s.push(n[e]),s.push(`${t[e]}`);return s.push(n[n.length-1]),s.join("")})(e.path,t.options.map(e=>{return"string"==typeof(t=e.value)||"number"==typeof t?t:`${t}`;var t}))}),t}insertOptionsValues(e,t,n){let s=e;return t.forEach(e=>{const t=n[e.id??e.label??`unknown_${e.type}_option`];if(void 0===t)return;const i=this.translate("outgoing",e.translation,t);s.includes("*")&&(s=s.replace("*",i))}),s}updateAllChoices(){this.choices.unassigned=this.getChoicesFromTable("unassigned"),this.choices.inputChoices=this.getChoicesFromTable("sourceTable"),this.choices.inputDspChoices=this.getChoicesFromTable("sourceDspTable"),this.choices.generatorSources=this.getChoicesFromTable("generatorSources"),this.choices.outputChoices=this.getChoicesFromTable("sinkTable"),this.choices.outputFlexChoices=this.getChoicesFromTable("sinkTableFlex"),this.choices.outputMixerChoices=this.getChoicesFromTable("sinkTableMixer"),this.choices.outputSidechainChoices=this.getChoicesFromTable("sinkTableSidechain"),this.choices.earsChoices=this.getChoicesFromTable("earsTable"),this.choices.inmngChoices=this.getChoicesFromTable("inmngTable"),this.choices.groupsChoices=this.getChoicesFromTable("groupsTable"),this.choices.monitoringSnkChoices=this.getChoicesFromTable("monitoringSnkTable"),this.choices.monitoringSrcChoices=this.getChoicesFromTable("monitoringSrcTable"),this.choices.groupMuteChoices=this.getChoicesFromTable("groupMuteTable"),this.choices.sumbusSinkChoices=this.getChoicesFromTable("sourceTableSumbus"),this.choices.sumbusSourceChoices=u.sumBusSources[this.devicetype].map(e=>{const t=e.chId,n=[...this.choices.inputChoices,...this.choices.inputDspChoices,...this.choices.generatorSources].find(e=>e.id===t)?.label??t;return{id:t,label:n}})}updateAllDefinitions(){this.subscriptions=function(e){return new Map([["some_label",{check:/(label)|(name)/,feedback:[],fun:e=>!0}],["routing_standard",{check:/^\/settings\/((easy_)?routing\/\d+)|(flex_channel\/\d+\/source_routing)|(mixer\/\d+)|(mixer64x64\/source_routing\/\d+)|(compressor\/\d+\/side_chain_key)/,init:["/settings/routing/1/1"],feedback:["routing_standard"],fun:t=>{if(e.isRecording){const s=t.substring(1).split("/");let i="output",o=2;"flex_channel"===s[1]?i="sinkFlex":"mixer64x64"===s[1]?(i="sinkMixer",o=3):"mixer"===s[1]?i="sinkMixer":"compressor"===s[1]&&(i="sinkSidechain");const r={actionId:"routing_standard",options:{sink:e.translate("incoming",i,"number"==typeof(n=s[o])||isNaN(parseInt(n))?n:parseInt(n)),source:e.getState(t,"input")}};e.recordAction(r),e.inhibitNextGenericRecord=!0}var n}}],["routing_sumbus",{check:/^\/settings\/sum_bus_assign_(io|dsp)\/\d+\/segment\/\d+/,feedback:["routing_sumbus"]}],["device_samplerate",{check:/^\/status\/ref_frequency/,init:["/status/ref_frequency"],fun:t=>{const n=e.getState("/status/ref_frequency");if("number"!=typeof n)return!1;const s=Math.round(100*n)/100;return e.setVariableValues({device_samplerate:s}),!1}}],["snapshots",{check:/^\/snapshots/,init:["/snapshots"],fun:t=>{const n=e.getState("/snapshots");return null==n||"object"!=typeof n||e.setVariableValues({snapshots:n}),!1}}]])}(this),this.actionDefinitions=h(this),this.feedbackDefinitions=g(this);const e=function(e){return{ltc_source:{name:"Settings: LTC Source",provide:["action","feedback","preset","variable"],parameters:[{id:"ltc_source",path:"/settings/ltc_source",translation:"input",label:"LTC Source",type:"dropdown",choices:[...e.choices.unassigned,...e.choices.inputChoices,...e.choices.inputDspChoices,...e.choices.generatorSources]}]},device_name:{name:"Settings: Device Name",provide:["action","feedback","preset","variable"],parameters:[{id:"device_name",path:"/device_info/name",label:"Device Name",type:"string"}]},mute_input:{name:"Input: Mute",provide:["action","feedback","preset","variable"],parameters:[{id:"input_mute",path:"/settings/input_mute/*",label:"Mute",type:"dropdown",choices:[{label:"Mute",id:1},{label:"Unmute",id:0}]}],options:[{id:"input",translation:"input",label:"Input",type:"dropdown",choices:e.choices.inputChoices}]},mute_output:{id:"mute_output",device:["PRODIGY.MC","PRODIGY.MP","PRODIGY.MX"],name:"Output: Mute",provide:["action","feedback","preset","variable"],parameters:[{id:"output_mute",path:"/settings/mute/*",label:"Mute",type:"dropdown",choices:[{label:"Mute",id:1},{label:"Unmute",id:0}]}],options:[{id:"output",translation:"output",label:"Output",type:"dropdown",choices:e.choices.outputChoices}]},mute_output_maven:{id:"mute_output",device:["MAVEN.A"],name:"Output: Mute",provide:["action","feedback","preset","variable"],parameters:[{id:"output_mute",path:"/settings/output_mute/*",label:"Mute",type:"dropdown",choices:[{label:"Mute",id:1},{label:"Unmute",id:0}]}],options:[{id:"output",translation:"output",label:"Output",type:"dropdown",choices:e.choices.outputChoices}]},mute_group_generic:{id:"mute_group",name:"Output Group Mute",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],parameters:[{id:"mute_group",path:"/settings/mute_group/*",label:"Mute",type:"dropdown",choices:[{label:"Mute",id:1},{label:"Unmute",id:0}]}],options:[{id:"mutegroup",translation:"groupMute",label:"Group",type:"dropdown",choices:e.choices.groupMuteChoices}]},mute_group_mx:{id:"mute_group",name:"Output Group Mute",provide:["action","feedback","preset","variable"],device:["PRODIGY.MX"],parameters:[{id:"mute_group",path:"/settings/mute_group/*",label:"Mute",type:"dropdown",choices:[{label:"Mute",id:1},{label:"Unmute",id:0}]}],options:[{id:"mutegroup",translation:"groupMute",label:"Group",type:"dropdown",choices:e.choices.groupMuteChoices}],action:{callback:async t=>{const n=t.options,s=e.translate("outgoing","groupMute",n.mutegroup);let i=[];if(s<1e3?i=[{path:`/settings/mute_group/${s}`}]:1001==s?i=[{path:"/settings/dsp_mute_group/0"}]:1002==s&&(i=[{path:"/settings/mute_group/0"},{path:"/settings/mute_group/1"},{path:"/settings/mute_group/2"},{path:"/settings/mute_group/3"},{path:"/settings/mute_group/4"},{path:"/settings/mute_group/5"},{path:"/settings/mute_group/6"},{path:"/settings/mute_group/7"},{path:"/settings/dsp_mute_group/0"}]),i.length<1)return;let o=n.mute_group;"%%toggle%%"==o&&(o=i.map(t=>e.getState(t.path)).includes(0)?1:0),i.forEach(t=>{e.sendSetCmd(t.path,o)})},learn:t=>{const n=t.options,s=e.translate("outgoing","groupMute",n.mutegroup);let i=[];if(s<1e3?i=[{path:`/settings/mute_group/${s}`}]:1001==s?i=[{path:"/settings/dsp_mute_group/0"}]:1002==s&&(i=[{path:"/settings/mute_group/0"},{path:"/settings/mute_group/1"},{path:"/settings/mute_group/2"},{path:"/settings/mute_group/3"},{path:"/settings/mute_group/4"},{path:"/settings/mute_group/5"},{path:"/settings/mute_group/6"},{path:"/settings/mute_group/7"},{path:"/settings/dsp_mute_group/0"}]),i.length<1)return{};const o=i.map(t=>e.getState(t.path)).includes(0)?0:1;return{...n,mute_group:o}}},feedback:{callback:async t=>{const n=t.options,s=e.translate("outgoing","groupMute",n.mutegroup);let i=[];return s<1e3?i=[{path:`/settings/mute_group/${s}`}]:1001==s?i=[{path:"/settings/dsp_mute_group/0"}]:1002==s&&(i=[{path:"/settings/mute_group/0"},{path:"/settings/mute_group/1"},{path:"/settings/mute_group/2"},{path:"/settings/mute_group/3"},{path:"/settings/mute_group/4"},{path:"/settings/mute_group/5"},{path:"/settings/mute_group/6"},{path:"/settings/mute_group/7"},{path:"/settings/dsp_mute_group/0"}]),!(i.length<1||i.map(t=>e.getState(t.path)).includes(0))},learn:t=>{const n=t.options,s=e.translate("outgoing","groupMute",n.mutegroup);let i=[];if(s<1e3?i=[{path:`/settings/mute_group/${s}`}]:1001==s?i=[{path:"/settings/dsp_mute_group/0"}]:1002==s&&(i=[{path:"/settings/mute_group/0"},{path:"/settings/mute_group/1"},{path:"/settings/mute_group/2"},{path:"/settings/mute_group/3"},{path:"/settings/mute_group/4"},{path:"/settings/mute_group/5"},{path:"/settings/mute_group/6"},{path:"/settings/mute_group/7"},{path:"/settings/dsp_mute_group/0"}]),i.length<1)return{};const o=i.map(t=>e.getState(t.path)).includes(0)?0:1;return{...n,mute_group:o}}}},input_polarity:{name:"Input: Polarity",provide:["action","feedback","preset","variable"],parameters:[{id:"input_polarity",path:"/settings/input_polarity/*",label:"Polarity",type:"dropdown",choices:[{label:"Normal",id:0},{label:"Inverted",id:1}]}],options:[{id:"input",translation:"input",label:"Input",type:"dropdown",choices:e.choices.inputChoices}]},output_polarity:{name:"Output: Polarity",provide:["action","feedback","preset","variable"],parameters:[{id:"output_polarity",path:"/settings/output_polarity/*",label:"Polarity",type:"dropdown",choices:[{label:"Normal",id:0},{label:"Inverted",id:1}]}],options:[{id:"output",translation:"output",label:"Output",type:"dropdown",choices:e.choices.outputChoices}]},output_gain:{name:"Output: Gain",provide:["action","feedback","preset","variable"],parameters:[{id:"output_gain",path:"/settings/output_gain/*",label:"Gain",type:"number",min:-144,max:18,step:.1,default:0}],options:[{id:"output",translation:"output",label:"Output",type:"dropdown",choices:e.choices.outputChoices}]},input_trim:{name:"Input: Trim",provide:["action","feedback","preset","variable"],parameters:[{id:"input_trim",path:"/settings/input_trim/*",label:"Trim",type:"number",min:-24,max:24,step:.1,default:0}],options:[{id:"input",translation:"input",label:"Input",type:"dropdown",choices:e.choices.inputChoices}]},output_trim:{name:"Output: Trim",provide:["action","feedback","preset","variable"],parameters:[{id:"output_trim",path:"/settings/output_trim/*",label:"Trim",type:"number",min:-24,max:24,step:.1,default:0}],options:[{id:"output",translation:"output",label:"Output",type:"dropdown",choices:e.choices.outputChoices}]},input_label:{name:"Input Label",provide:["action","feedback","preset","variable"],parameters:[{id:"label",path:"/settings/input_labels/*",label:"Label",type:"string"}],options:[{id:"input",translation:"input",label:"Input",type:"dropdown",choices:e.choices.inputChoices}]},output_label:{name:"Output Label",provide:["action","feedback","preset","variable"],parameters:[{id:"label",path:"/settings/output_labels/*",label:"Label",type:"string"}],options:[{id:"output",translation:"output",label:"Output",type:"dropdown",choices:e.choices.outputChoices}]},ears_priority:{name:"EARS: Priority",provide:["action","feedback","preset","variable"],parameters:[{id:"priority",path:"/settings/ears/*/priority",label:"Priority",type:"dropdown",choices:[{label:"Off",id:0},{label:"Main",id:1},{label:"Backup",id:2},{label:"Auto",id:3}]}],options:[{id:"ears",translation:"ears",label:"EARS on",type:"dropdown",choices:e.choices.earsChoices}]},ears_force:{name:"EARS: Force",provide:["action","feedback","preset","variable"],parameters:[{id:"force",path:"/settings/ears/*/force",label:"Force to",type:"dropdown",choices:[{label:"Off",id:0},{label:"Main",id:1},{label:"Backup",id:2},{label:"Disaster Recovery",id:3}]}],options:[{id:"ears",translation:"ears",label:"EARS on",type:"dropdown",choices:e.choices.earsChoices}]},sum_bus_mute:{name:"Sum Bus: Mute",provide:["action","feedback","preset","variable"],options:[{id:"sink",translation:"sinkSumbus",label:"Sum Bus",type:"dropdown",choices:e.choices.sumbusSinkChoices}],parameters:[{id:"mute_master",path:"/settings/sum_bus_master/*/mute",label:"Mute Master",type:"boolean"}]},sum_bus_polarity:{name:"Sum Bus: Polarity",provide:["action","feedback","preset","variable"],options:[{id:"sink",translation:"sinkSumbus",label:"Sum Bus",type:"dropdown",choices:e.choices.sumbusSinkChoices}],parameters:[{id:"polarity",path:"/settings/sum_bus_master/*/polarity",label:"Polarity",type:"dropdown",choices:[{label:"Off / normal",id:0},{label:"On / reversed",id:1}]}]},sum_bus_gain:{name:"Sum Bus: Gain",provide:["action","feedback","preset","variable"],options:[{id:"sink",translation:"sinkSumbus",label:"Sum Bus",type:"dropdown",choices:e.choices.sumbusSinkChoices}],parameters:[{id:"gain",path:"/settings/sum_bus_master/*/gain",label:"Gain",type:"number",min:-144,max:18,step:.1,default:0}]},sum_bus_label:{name:"Sum Bus Label",provide:["action","feedback","preset","variable"],options:[{id:"sink",translation:"sinkSumbus",label:"Sum Bus",type:"dropdown",choices:e.choices.sumbusSinkChoices}],parameters:[{id:"label",path:"/settings/sum_bus_master/*/label",label:"Label",type:"string"}]},inmng_label:{name:"Input Manager Label",provide:["action","feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices}],parameters:[{id:"label",path:"/settings/input_manager/*/label",label:"Label",type:"string"}]},inmng_manual:{name:"Input Manager Manual Selection",provide:["action","feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices}],parameters:[{id:"manual",path:"/settings/input_manager/*/manual",label:"Manual Selection",type:"dropdown",translation:"genericIn",choices:[{label:"No manual selection",id:"none"},{label:"Select input 1",id:"in1"},{label:"Select input 2",id:"in2"},{label:"Select input 3",id:"in3"},{label:"Select input 4",id:"in4"},{label:"Select input 5",id:"in5"},{label:"Select input 6",id:"in6"}]}]},inmng_coherency:{name:"Input Manager Coherency Detection",provide:["action","feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices}],parameters:[{id:"coherency_detection",path:"/settings/input_manager/*/coherency_detection",label:"Coherency Detection",type:"boolean"}]},inmng_autoresume:{name:"Input Manager Input Auto Resume",provide:["action","feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices},{id:"channel",label:"Input",type:"dropdown",translation:"genericIn",choices:[{label:"Input 1",id:"in1"},{label:"Input 2",id:"in2"},{label:"Input 3",id:"in3"},{label:"Input 4",id:"in4"},{label:"Input 5",id:"in5"},{label:"Input 6",id:"in6"}]}],parameters:[{id:"auto_resume",path:"/settings/input_manager/*/entries/*/auto_resume",label:"Auto Resume",type:"boolean"}]},inmng_status_active:{name:"Input Manager Active Signal",provide:["feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices}],parameters:[{id:"channel",label:"Input",path:"/status/input_manager/*/current",type:"dropdown",translation:"genericIn",choices:[{label:"Input 1",id:"in1"},{label:"Input 2",id:"in2"},{label:"Input 3",id:"in3"},{label:"Input 4",id:"in4"},{label:"Input 5",id:"in5"},{label:"Input 6",id:"in6"}]}]},inmng_status_coherency:{name:"Input Manager Coherency",provide:["feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices},{id:"channel",label:"Input",type:"dropdown",translation:"genericIn",choices:[{label:"Input 1",id:"in1"},{label:"Input 2",id:"in2"},{label:"Input 3",id:"in3"},{label:"Input 4",id:"in4"},{label:"Input 5",id:"in5"},{label:"Input 6",id:"in6"}]}],parameters:[{id:"coherency",path:"/status/input_manager/*/signals/*/coherency",label:"Coherent",type:"boolean"}]},inmng_status_locked:{name:"Input Manager Locked",provide:["feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices},{id:"channel",label:"Input",type:"dropdown",translation:"genericIn",choices:[{label:"Input 1",id:"in1"},{label:"Input 2",id:"in2"},{label:"Input 3",id:"in3"},{label:"Input 4",id:"in4"},{label:"Input 5",id:"in5"},{label:"Input 6",id:"in6"}]}],parameters:[{id:"trigger",path:"/status/input_manager/*/signals/*/trigger",label:"Locked",type:"boolean"}]},inmng_status_silence:{name:"Input Manager Silence",provide:["feedback","preset","variable"],options:[{id:"inmng",translation:"inmng",label:"Input Manager",type:"dropdown",choices:e.choices.inmngChoices},{id:"channel",label:"Input",type:"dropdown",translation:"genericIn",choices:[{label:"Input 1",id:"in1"},{label:"Input 2",id:"in2"},{label:"Input 3",id:"in3"},{label:"Input 4",id:"in4"},{label:"Input 5",id:"in5"},{label:"Input 6",id:"in6"}]}],parameters:[{id:"silence",path:"/status/input_manager/*/signals/*/silence",label:"Silence Detected",type:"boolean"}]},solo_bus_enabled:{name:"Settings: Solo Bus Enabled",device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],provide:["action","feedback","preset","variable"],parameters:[{id:"solo_bus_enabled",path:"/settings/monitoring/solo_bus_enabled",label:"Solo Bus Enabled",type:"boolean"}]},monitoring_routing:{name:"Routing: Patch Monitoring Route",provide:["action","feedback","preset","variable"],options:[{id:"sink",label:"Destination",type:"dropdown",translation:"monitoringSnk",choices:e.choices.monitoringSnkChoices}],parameters:[{id:"source",path:"/settings/monitoring/routing/*",label:"Source",type:"dropdown",translation:"monitoringSrc",choices:e.choices.monitoringSrcChoices}]},monitoring_source1:{name:"Settings: Monitoring Source 1",provide:["action","feedback","preset","variable"],options:[{id:"channel",label:"Monitor 1 Channel",type:"dropdown",choices:[{label:"Left",id:0},{label:"Right",id:1}]}],parameters:[{id:"input",path:"/settings/monitoring/monitor_1/*",translation:"input",label:"Input",type:"dropdown",choices:[...e.choices.unassigned,...e.choices.inputChoices,...e.choices.generatorSources]}]},monitoring_source2:{name:"Settings: Monitoring Source 2",provide:["action","feedback","preset","variable"],options:[{id:"channel",label:"Monitor 2 Channel",type:"dropdown",choices:[{label:"Left",id:0},{label:"Right",id:1}]}],parameters:[{id:"input",path:"/settings/monitoring/monitor_2/*",translation:"input",label:"Input",type:"dropdown",choices:[...e.choices.unassigned,...e.choices.inputChoices,...e.choices.generatorSources]}]},monitoring_label:{name:"Monitoring Label",provide:["action","feedback","preset","variable"],options:[{id:"channel",translation:"monitoringSnk",label:"Monitoring Channel",type:"dropdown",choices:e.choices.monitoringSnkChoices}],parameters:[{id:"label",path:"/settings/monitoring/label/*",label:"Label",type:"string"}]},gpio_polarity:{name:"Settings: GPIO Polarity",provide:["action","feedback","preset","variable"],options:[{id:"gpio",label:"GPIO",type:"dropdown",choices:[{label:"GP Input #1",id:0},{label:"GP Input #2",id:1},{label:"GP Output #1",id:2},{label:"GP Output #2",id:3}]}],parameters:[{id:"polarity",path:"/settings/gpio_polarity/*",label:"Polarity",type:"boolean",choices:[{label:"Off / normal",id:"%%false%%"},{label:"On / reversed",id:"%%true%%"}]}]},gpo_set:{name:"Settings: GPO",provide:["action","feedback","preset","variable"],options:[{id:"gpo",label:"GPO",type:"dropdown",choices:[{label:"GP Output #1",id:0},{label:"GP Output #2",id:1}]}],parameters:[{id:"state",path:"/settings/gpo/*",label:"On/Off",type:"boolean"}]},slot_analog_gain:{name:"Settings: Slot, Analog Gain",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],options:[{id:"slot",label:"Slot",type:"dropdown",choices:Array.from({length:Number(u.numSlots[e.devicetype])},(e,t)=>({label:`Slot #${t+1}`,id:t}))},{id:"channel",label:"Channel",type:"dropdown",choices:Array.from({length:8},(e,t)=>({label:`Channel ${t+1}`,id:t}))}],parameters:[{id:"analog_gain",path:"/settings/slot_settings/*/channels/*/analog_gain",label:"Analog Gain",type:"number",min:5,max:75,step:.1,tooltip:"Values range from 5 to 75, incrementing by 0.1."}]},slot_analog_phantom:{name:"Settings: Slot, Phantom Power",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],options:[{id:"slot",label:"Slot",type:"dropdown",choices:Array.from({length:Number(u.numSlots[e.devicetype])},(e,t)=>({label:`Slot #${t+1}`,id:t}))},{id:"channel",label:"Channel",type:"dropdown",choices:Array.from({length:8},(e,t)=>({label:`Channel ${t+1}`,id:t}))}],parameters:[{id:"phantom_power",path:"/settings/slot_settings/*/channels/*/p48",label:"Phantom Power",type:"boolean"}]},slot_analog_pad:{name:"Settings: Slot, Pad",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],options:[{id:"slot",label:"Slot",type:"dropdown",choices:Array.from({length:Number(u.numSlots[e.devicetype])},(e,t)=>({label:`Slot #${t+1}`,id:t}))},{id:"channel",label:"Channel",type:"dropdown",choices:Array.from({length:8},(e,t)=>({label:`Channel ${t+1}`,id:t}))}],parameters:[{id:"pad",path:"/settings/slot_settings/*/channels/*/pad",label:"Pad",type:"boolean"}]},slot_aes_src:{name:"Settings: Slot, AES SRC",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],options:[{id:"slot",label:"Slot",type:"dropdown",choices:Array.from({length:Number(u.numSlots[e.devicetype])},(e,t)=>({label:`Slot #${t+1}`,id:t}))},{id:"channel",label:"Channel",type:"dropdown",choices:Array.from({length:4},(e,t)=>({label:`Channel ${2*t+1}/${2*t+2}`,id:t}))}],parameters:[{id:"src",path:"/settings/slot_settings/*/src/*",label:"AES SRC",type:"boolean"}]},slot_label_input:{name:"Slot Label Input",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],options:[{id:"slot",label:"Slot",type:"dropdown",choices:Array.from({length:Number(u.numSlots[e.devicetype])},(e,t)=>({label:`Slot #${t+1}`,id:t}))}],parameters:[{id:"label",path:"/settings/input_slot_name/*",label:"Label",type:"string"}]},slot_label_output:{name:"Slot Label Output",provide:["action","feedback","preset","variable"],device:["PRODIGY.MC","PRODIGY.MP","MAVEN.A"],options:[{id:"slot",label:"Slot",type:"dropdown",choices:Array.from({length:Number(u.numSlots[e.devicetype])},(e,t)=>({label:`Slot #${t+1}`,id:t}))}],parameters:[{id:"label",path:"/settings/slot_name/*",label:"Label",type:"string"}]},flex_mute:{name:"Flex Channel: Mute",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"mute",path:"/settings/flex_channel/*/mute",label:"Mute",type:"boolean"}]},flex_polarity:{name:"Flex Channel: Polarity",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"polarity",path:"/settings/flex_channel/*/polarity",label:"Polarity",type:"dropdown",choices:[{label:"Off / normal",id:0},{label:"On / reversed",id:1}]}]},flex_gain:{name:"Flex Channel: Gain",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"gain",path:"/settings/flex_channel/*/gain",label:"Gain",type:"number",min:-144,max:18,step:.1,default:0}]},flex_label:{name:"Flex Channel Label",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"label",path:"/settings/flex_channel/*/label",label:"Label",type:"string"}]},flex_time_adj:{name:"Flex Channel: Time Adjust",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"time_adj",path:"/settings/flex_channel/*/time_adj",label:"Samples",type:"number",min:0,max:511,step:1,default:0}]},flex_automix_contrib:{name:"Flex Channel: Automix Contribution",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"automix_contrib",path:"/settings/flex_channel/*/automix_contrib",label:"Percent",type:"number",min:0,max:100,step:1,default:100}]},flex_automix_priority:{name:"Flex Channel: Automix Priority",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"flexchannel",translation:"sinkFlex",label:"Flex Channel",type:"dropdown",choices:e.choices.outputFlexChoices}],parameters:[{id:"automix_priority",path:"/settings/flex_channel/*/automix_priority",label:"Priority",type:"number",min:0,max:18,step:.1,tooltip:"Values range from 0.0 to 18.0."}]},eq_fir_enable:{name:"EQ FIR Enable",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","MAVEN.A"],options:[{id:"eqfir",label:"FIR Equalizer",type:"dropdown",choices:Array.from({length:Number(u.numEqFIR[e.devicetype])},(e,t)=>({label:`FIR EQ ${t+1}`,id:t}))}],parameters:[{id:"eq_enabled",path:"/settings/eq/*/enabled",label:"Enable",type:"boolean"}]},eq_iir_enable:{name:"EQ IIR Enable",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"eqiir",label:"IIR Equalizer",type:"dropdown",choices:Array.from({length:Number(u.numEqIIR[e.devicetype])},(e,t)=>({label:`IIR EQ ${t+1}`,id:t}))}],parameters:[{id:"eq_enabled",path:"/settings/iir_eq/*/enabled",label:"Enable",type:"boolean"}]},mtx_label:{name:"Matrix Mixer Label",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP"],options:[{id:"mixer",translation:"mtxNum",label:"Mixer",type:"dropdown",choices:u.matMixer[e.devicetype].map(e=>({id:`${e.id}`,label:`${e.label} (${e.in}x${e.out})`}))}],parameters:[{id:"label",path:"/settings/mixer/*/label",label:"Label",type:"string"}]},automix_label:{name:"Automix Label",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"automix",label:"Automix",type:"dropdown",choices:Array.from({length:16},(e,t)=>({label:`Automix ${t+1}`,id:t}))}],parameters:[{id:"label",path:"/settings/automix/*/label",label:"Label",type:"string"}]},automix_speed:{name:"Automix Speed",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"automix",label:"Automix",type:"dropdown",choices:Array.from({length:16},(e,t)=>({label:`Automix ${t+1}`,id:t}))}],parameters:[{id:"speed",path:"/settings/automix/*/speed",label:"Speed",type:"dropdown",choices:[{label:"1 - Fast",id:0},{label:"2",id:1},{label:"3",id:2},{label:"4",id:3},{label:"5",id:4},{label:"6",id:5},{label:"7",id:6},{label:"8 - Slow",id:7}]}]},automix_bias:{name:"Automix Hush Wizard",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"automix",label:"Automix",type:"dropdown",choices:Array.from({length:16},(e,t)=>({label:`Automix ${t+1}`,id:t}))}],parameters:[{id:"bias",path:"/settings/automix/*/bias",label:"Hush Wizard",type:"number",min:-104,max:0,step:.1,default:-104}]},group_gain:{name:"Group Gain",provide:["action","feedback","preset","variable"],options:[{id:"group",translation:"groups",label:"Group",type:"dropdown",choices:e.choices.groupsChoices}],parameters:[{id:"gain",path:"/settings/group/channel/*/gain",label:"Gain",type:"number",min:-144,max:18,step:.1}]},group_label:{name:"Group Label",provide:["action","feedback","preset","variable"],options:[{id:"group",translation:"groups",label:"Group",type:"dropdown",choices:e.choices.groupsChoices}],parameters:[{id:"label",path:"/settings/group/channel/*/label",label:"Label",type:"string"}]},group_mute:{name:"Group Mute",provide:["action","feedback","preset","variable"],options:[{id:"group",translation:"groups",label:"Group",type:"dropdown",choices:e.choices.groupsChoices}],parameters:[{id:"mute",path:"/settings/group/channel/*/mute",label:"Mute",type:"boolean",choices:e.choices.muteChoices}]},group_fadeout:{name:"Group Fade Out",provide:["action","feedback","preset","variable"],options:[{id:"group",translation:"groups",label:"Group",type:"dropdown",choices:e.choices.groupsChoices}],parameters:[{id:"fade_out",path:"/settings/group/channel/*/fade_out",label:"Fade Out",type:"boolean",choices:[{label:"Fade in",id:"%%false%%"},{label:"Fade out",id:"%%true%%"}]}]},group_fadingstate:{name:"Group Fading State",provide:["feedback","variable"],options:[{id:"group",translation:"groups",label:"Group",type:"dropdown",choices:e.choices.groupsChoices}],parameters:[{id:"fading_state",path:"/settings/group/channel/*/fading_state",translation:"fadingStates",label:"Fading State",type:"dropdown",choices:[{label:"Faded in",id:"faded_in"},{label:"Fading in",id:"fading_in"},{label:"Fading out",id:"fading_out"},{label:"Faded out",id:"faded_out"}]}]},delay_enable:{name:"Delay Enable",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"delay",label:"Delay",type:"dropdown",choices:Array.from({length:Number(u.numDelay[e.devicetype])},(e,t)=>({label:`Delay ${t+1}`,id:t}))}],parameters:[{id:"delay_enabled",path:"/settings/delay/*/enabled",label:"Enable",type:"boolean"}]},delay_samples:{name:"Delay Samples",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"delay",label:"Delay",type:"dropdown",choices:Array.from({length:Number(u.numDelay[e.devicetype])},(e,t)=>({label:`Delay ${t+1}`,id:t}))}],parameters:[{id:"samples",path:"/settings/delay/*/samples",label:"Samples",type:"number",min:0,max:65535,step:1,default:0}]},compressor_enable:{name:"Compressor Enable",provide:["action","feedback","preset","variable"],device:["PRODIGY.MP","PRODIGY.MX","MAVEN.A"],options:[{id:"compressor",label:"Compressor",type:"dropdown",choices:Array.from({length:Number(u.numCompressor[e.devicetype])},(e,t)=>({label:`Compressor ${t+1}`,id:t}))}],parameters:[{id:"compressor_enabled",path:"/settings/compressor/*/enabled",label:"Enable",type:"boolean"}]},status_gpi:{name:"GPI Status",provide:["feedback","variable"],options:[{id:"gpi",label:"GPI Number",type:"dropdown",choices:Array.from({length:2},(e,t)=>({label:`GPI ${t+1}`,id:t}))}],parameters:[{id:"state",path:"/status/gpi/*",label:"GPI State",type:"boolean"}]},status_ears_active:{name:"EARS Active Status",provide:["feedback","variable"],parameters:[{id:"active",path:"/status/ears_status/*/active",label:"Now active",type:"dropdown",choices:[{label:"Main",id:0},{label:"Backup",id:1},{label:"Recovery",id:2}]}],options:[{id:"ears",translation:"ears",label:"EARS on",type:"dropdown",choices:e.choices.earsChoices}]},status_ears_pilot:{name:"EARS Pilot Status",provide:["feedback","variable"],parameters:[{id:"audio_pilot",path:"/status/ears_status/*/audio_pilot",label:"Pilot sound",type:"boolean",choices:[{label:"present",id:"%%true%%"},{label:"not present",id:"%%false%%"}]}],options:[{id:"ears",translation:"ears",label:"EARS on",type:"dropdown",choices:e.choices.earsChoices}]},status_ears_blds:{name:"EARS BLDS Status",provide:["feedback","variable"],parameters:[{id:"blds_present",path:"/status/ears_status/*/blds",label:"BLDS",type:"boolean",choices:[{label:"present",id:"%%true%%"},{label:"not present",id:"%%false%%"}]}],options:[{id:"ears",translation:"ears",label:"EARS on",type:"dropdown",choices:e.choices.earsChoices}]},status_warnings_active:{name:"Warnings Active Status",device:["PRODIGY.MC","PRODIGY.MP","PRODIGY.MX"],provide:["feedback","variable"],parameters:[{id:"active",path:"/status/warnings/active",label:"Warnings",type:"boolean"}]},status_warnings_message:{name:"Warnings Message",device:["PRODIGY.MC","PRODIGY.MP","PRODIGY.MX"],provide:["feedback","variable"],parameters:[{id:"message",path:"/status/warnings/message",label:"Warnings Message",type:"string"}]},snapshot_last_id:{name:"Last Recalled Snapshot ID",provide:["feedback","variable"],parameters:[{id:"last_snapshot_recalled",path:"/last_snapshot_recalled",label:"ID",type:"number"}]},snapshot_last_pos:{name:"Last Recalled Snapshot Position",provide:["feedback","variable"],parameters:[{id:"last_snapshot_recalled_pos",path:"/last_snapshot_recalled_pos",label:"Position",type:"number"}]},snapshot_last_name:{name:"Last Recalled Snapshot Name",provide:["feedback","variable"],parameters:[{id:"last_snapshot_recalled_name",path:"/last_snapshot_recalled_name",label:"Snapshot Name",type:"string"}]}}}(this),t=this,n=e=>{const t={id:e.id??e.label??`unknown_${e.type}_option`,label:e.label??"Unknown"};return e.tooltip&&(t.tooltip=e.tooltip),"dropdown"===e.type?(t.type="dropdown",Array.isArray(e.choices)&&e.choices.length?(t.choices=e.choices,void 0!==e.default?t.default=e.default:void 0!==t.choices[0].id?t.default=t.choices[0].id:(this.log("error",`Default value for dropdown ${t.label} can't be found or calculated.`),t.default="")):(this.log("error",`Dropdown ${t.label} has no valid choices.`),t.choices=[],t.default="")):"number"===e.type?(t.type="number",t.min=e.min??0,t.max=e.max??1024,t.step=e.step??1,t.default=e.default??0,Number(t.default)<Number(t.min)&&(t.default=t.min),Number(t.default)>Number(t.max)&&(t.default=t.max),void 0===t.tooltip&&(t.tooltip=`Value range between ${t.min} and ${t.max}, increments ${t.step}`)):"boolean"===e.type?(t.type="dropdown",t.choices=e.choices??[{label:"On",id:"%%true%%"},{label:"Off",id:"%%false%%"}],t.default=e.default??"%%true%%"):"string"===e.type&&(t.type="textinput",t.useVariables={local:!0},t.default=e.default??"",e.regex&&(t.regex=e.regex)),t},s=e=>{const t={id:e.id??e.label??`unknown_${e.type}_option`,label:e.label??"Unknown"};return e.tooltip&&(t.tooltip=e.tooltip),"dropdown"===e.type?(t.type="dropdown",Array.isArray(e.choices)&&e.choices.length?(t.choices=e.choices,void 0!==e.default?t.default=e.default:void 0!==t.choices[0].id?t.default=t.choices[0].id:(this.log("error",`Default value for dropdown ${t.label} can't be found or calculated.`),t.default="")):(this.log("error",`Dropdown ${t.label} has no valid choices.`),t.choices=[{label:"On",id:"%%true%%"},{label:"Off",id:"%%false%%"}],t.default="%%true%%")):"number"===e.type?(t.type="number",t.min=e.min??0,t.max=e.max??1024,t.step=e.step??1,t.default=e.default??0,Number(t.default)<Number(t.min)&&(t.default=t.min),Number(t.default)>Number(t.max)&&(t.default=t.max)):"boolean"===e.type?(t.type="checkbox",t.default=!0):"string"===e.type&&(t.type="textinput",t.default=e.default??"",e.regex&&(t.regex=e.regex)),t};for(const i of Object.keys(e)){const o=e[i],a=o.id??i;if(Array.isArray(o.device)&&!o.device.includes(this.devicetype))continue;const l=o.parameters?.map(e=>({...e,key:e.id??e.label??`unknown_${e.type}_option`})),c=l?.length?l[0]:void 0,d=o.options?.map(e=>({...e,key:e.id??e.label??`unknown_${e.type}_option`}));if(o.provide.includes("action")&&c){const e=async(e,n)=>{const s=e.options;for(const e of l??[]){if(!e.path?.startsWith("/"))continue;let i=e.path;const o=e.key;if(d?.length&&e.path.includes("*")&&(i=this.insertOptionsValues(i,d,s)),"string"==e.type){const r=await n.parseVariablesInString(s[o]??"");t.sendSetCmd(i,r,e.translation)}else if("boolean"==e.type){let e=s[o];"%%toggle%%"==e&&(e=0==t.getState(i)?"%%true%%":"%%false%%"),e="%%false%%"!=e,t.sendSetCmd(i,e)}else if("dropdown"==e.type){let n=s[o];if("%%toggle%%"==n){const s=e.choices?.filter(e=>"%%toggle%%"!==e.id&&"%%next%%"!==e.id&&"%%prev%%"!==e.id)??[],o=t.getState(i,e.translation),r=s.findIndex(e=>e.id==o);if(0==r)n=s[1].id;else{if(1!=r)return;n=s[0].id}}else if("%%next%%"==n){const s=e.choices?.filter(e=>"%%toggle%%"!==e.id&&"%%next%%"!==e.id&&"%%prev%%"!==e.id)??[],o=t.getState(i,e.translation),r=s.findIndex(e=>e.id==o);if(-1==r)return;n=s[(r+1)%s.length].id}else if("%%prev%%"==n){const s=e.choices?.filter(e=>"%%toggle%%"!==e.id&&"%%next%%"!==e.id&&"%%prev%%"!==e.id)??[],o=t.getState(i,e.translation),r=s.findIndex(e=>e.id==o);if(-1==r)return;n=s[0==r?s.length-1:r-1].id}"%%false%%"==n?n=!1:"%%true%%"==n&&(n=!0),t.sendSetCmd(i,n,e.translation)}else if("number"==e.type){let n=Number(s[o]);e.min&&n<e.min&&(n=e.min),e.max&&n>e.max&&(n=e.max),e.step&&(n=Number((Math.round((n+Number.EPSILON)/e.step)*e.step).toFixed(e.step.toString().includes(".")?e.step.toString().split(".")[1].length:0))),t.sendSetCmd(i,n)}else t.sendSetCmd(i,s[o],e.translation)}},s=(e,n)=>{const s=e.options,i={};for(const e of l??[]){if(!e.path?.startsWith("/"))continue;let n=e.path;d?.length&&n?.includes("*")&&(n=this.insertOptionsValues(n,d,s));let o=t.getState(n,e.translation);!0===o?o="%%true%%":!1===o&&(o="%%false%%"),i[e.key]=o}return{...s,...i}};this.actionDefinitions[a]={name:`Set ${o.name}`,options:[...d?d.map(e=>n(e)):[],...l?l.map(e=>r(n(e))):[]],callback:e,learn:s},"object"==typeof o.action&&(this.actionDefinitions[a]={...this.actionDefinitions[a],...o.action})}if(o.provide.includes("feedback")&&l?.length)for(const e of l){if(!e.path?.startsWith("/"))continue;const n=e.key,i=l.length>1?`${a}_${n}`:a;let r=s=>{const i=s.options;let o=e.path;return d?.length&&e.path.includes("*")&&(o=this.insertOptionsValues(o,d,i)),i[n]==t.getState(o,e.translation)};const c=s=>{const i=s.options;let o=e.path;d?.length&&e.path.includes("*")&&(o=this.insertOptionsValues(o,d,i));const r=t.getState(o,e.translation);return void 0===r?{}:{...i,[n]:r}},p=[...d?d.map(e=>s(e)):[],s(e)];if("number"===e.type){const s={type:"dropdown",label:"Operation",id:"operation",choices:[{id:"eq",label:"Equals"},{id:"lt",label:"Less than"},{id:"gt",label:"Greater than"}],default:"eq"};p.unshift(s),r=s=>{const i=s.options;let o=e.path;d?.length&&e.path.includes("*")&&(o=this.insertOptionsValues(o,d,i));const r=i[n];if("number"!=typeof r)return!1;const a=t.getState(o);return"lt"==i.operation&&a<r||"gt"==i.operation&&a>r||"eq"==i.operation&&a==r}}else if("string"===e.type){const s={type:"dropdown",label:"Operation",id:"operation",choices:[{id:"eq",label:"Equals"},{id:"start",label:"Starts with"},{id:"include",label:"Includes"}],default:"eq"};p.unshift(s),r=s=>{const i=s.options;let o=e.path;d?.length&&e.path.includes("*")&&(o=this.insertOptionsValues(o,d,i));const r=i[n],a=t.getState(o);return"string"==typeof r&&"string"==typeof a&&(!("start"!=i.operation||!a.startsWith(r))||!("include"!=i.operation||!a.includes(r))||"eq"==i.operation&&a==r)}}this.feedbackDefinitions[i]={type:"boolean",name:`Check ${o.name}`,options:p,callback:r,learn:c,defaultStyle:this.defaultDefaultStyle,subscribe:n=>{const s=n.options;let i=e.path;if(d?.length&&e.path.includes("*")&&(i=this.insertOptionsValues(i,d,s)),t.subscriptions.has(i)){const e=t.subscriptions.get(i);(0,b.isSet)(e?.listeners)||(e.listeners=new Set),e.listeners.add(n.id)}else t.subscriptions.set(i,{check:RegExp(i+"$"),feedback:[n.feedbackId],listeners:new Set([n.id])})},unsubscribe:n=>{const s=n.options;let i=e.path;if(d?.length&&e.path.includes("*")&&(i=this.insertOptionsValues(i,d,s)),t.subscriptions.has(i)){const e=t.subscriptions.get(i);(0,b.isSet)(e?.listeners)&&(e.listeners.delete(n.id),0===e.listeners.size&&t.subscriptions.delete(i))}}},"object"==typeof o.feedback&&(this.feedbackDefinitions[a]={...this.feedbackDefinitions[a],...o.feedback})}if(o.provide.includes("variable")&&l?.length)for(const e of l){if(!e.path?.startsWith("/"))continue;const n=e.path,s=o.name+(l?.length>1?` ${e.label}`:""),i=o.name.toLocaleLowerCase().replaceAll(/[^a-zA-Z0-9_-]/g,"_").replaceAll(/_+/g,"_");if(t.variablesTable.has(i)){const e=t.variablesTable.get(i);e?.publishers.add("parameter")}else t.variablesTable.set(i,{variableId:i,name:s,publishers:new Set(["parameter"])}),t.updateVariableDefinitions();if(void 0===d||0===d?.length){t.subscriptions.set(`parameter_${a}`,{check:RegExp(`^${n}$`),listeners:new Set([`parameter_${a}`]),fun:n=>{const s=t.getState(n,e.translation);t.setVariableValues({[i]:s})},init:[`${n}`]});const s=t.getState(n,e.translation);t.setVariableValues({[i]:s})}else if(1==d?.length){const s=d.map(e=>e.translation);let r={check:RegExp(`^${n.replaceAll("*","([^/])+")}$`),listeners:new Set([`parameter_${a}`]),fun:o=>{const r=t.getState(o,e.translation),a=n.substring(1).split("/").map((e,t)=>"*"===e?t:null).filter(e=>null!==e),l=o.substring(1).split("/"),c=t.getVariableValue(i);let d={};"object"==typeof c&&(d={...c});for(let e=0;e<a.length;e++){let n=l[a[e]];const i=parseInt(n);isNaN(i)||(n=i),d[`${t.translate("incoming",s[e],n)}`]=r}t.setVariableValues({[i]:d})}};"object"==typeof o.subscription&&(r={...r,...o.subscription}),t.subscriptions.set(`parameter_${a}`,r);const l=n.substring(1).split("/").map((e,t)=>"*"===e?t:null).filter(e=>null!==e),c=n.substring(1).split("/"),p={};for(let n=0;n<l.length;n++){const o="/"+c.slice(0,l[n]).join("/"),r=t.getState(o);let a=[];Array.isArray(r)?a=Array.from({length:r.length},(e,t)=>t):"object"==typeof r&&(a=Object.keys(r)),a.forEach(i=>{const o=c;o[l[n]]=i.toString();const r=t.getState(`/${o.join("/")}`,e.translation),a=t.translate("incoming",s[n],i);"string"!=typeof a&&"number"!=typeof a||(p[`${a}`]=r)}),t.setVariableValues({[i]:p})}}else if(2==d?.length){const s=d.map(e=>e.translation);let r={check:RegExp(`^${n.replaceAll("*","([^/])+")}$`),listeners:new Set([`parameter_${a}`]),fun:o=>{const r=t.getState(o,e.translation),a=n.substring(1).split("/").map((e,t)=>"*"===e?t:null).filter(e=>null!==e),l=o.substring(1).split("/"),c=t.getVariableValue(i);let d={};"object"==typeof c&&(d={...c});const p=[];for(let e=0;e<a.length;e++){let n=l[a[e]];const i=parseInt(n);isNaN(i)||(n=i),p[e]=t.translate("incoming",s[e],n)}"object"!=typeof d[`${p[0]}`]&&(d[`${p[0]}`]={}),d[`${p[0]}`][`${p[1]}`]=r,t.setVariableValues({[i]:d})}};"object"==typeof o.subscription&&(r={...r,...o.subscription}),t.subscriptions.set(`parameter_${a}`,r);const c={},p=n.substring(1).split("/"),u=p.map((e,t)=>"*"===e?t:null).filter(e=>null!==e),h="/"+p.slice(u[0]+1,u[1]).join("/"),b="/"+p.slice(u[1]+1).join("/"),g=t.getState("/"+p.slice(0,u[0]).join("/")),f=e=>{let t=[];return Array.isArray(e)?t=Array.from({length:e.length},(e,t)=>t):"object"==typeof e&&null!==e&&(t=Object.keys(e)),t};f(g).forEach(e=>{const n=t.translate("incoming",d[0].translation,e),s=this.getPath(h,g[e]);c[n]={},f(s).forEach(e=>{const i=t.translate("incoming",d[1].translation,e),o=this.getPath(`/${e}${b}`,s,l[0].translation);c[n.toString()][i.toString()]=o})}),t.setVariableValues({[i]:c})}else t.setVariableValues({[i]:"Not implemented yet (recursion)"});if(o.provide.includes("action"))if(0===d?.length)this.recorderTable.set(n,{actionId:a,parameters:[{name:e.key,translation:e.translation}],options:[]});else if(d&&d.length>=1){const t=n.substring(1).split("/").map((e,t)=>"*"===e?t:null).filter(e=>null!==e);this.recorderTable.set(n.replaceAll("*","([^/])+"),{actionId:a,parameters:[{name:e.key,translation:e.translation}],options:d.map((e,n)=>({name:e.key,index:t[n],translation:e.translation}))})}}}this.setActionDefinitions(this.actionDefinitions),this.setFeedbackDefinitions(this.feedbackDefinitions),this.subscribeFeedbacks()}async startConnection(e,t){if(this.updateStatus(s.InstanceStatus.Connecting),!e.match(new RegExp(s.Regex.IP.split("/")[1])))return this.log("error","Invalid host address"),void this.updateStatus(s.InstanceStatus.BadConfig);if(void 0!==this.socket){try{this.socket.destroy()}catch(e){return this.log("error","Failed to close socket"),void this.updateStatus(s.InstanceStatus.UnknownError)}delete this.socket}let n="";this.sendId=0,this.socket=new s.TCPHelper(e,t),this.socket.on("status_change",(e,t)=>{this.updateStatus(e,t)}),this.socket.on("connect",()=>{this.log("info","Connected"),this.sendCmd({type:"get"}),this.sendCmd({type:"cmd",payload:"enable_auto_update"})}),this.socket.on("error",e=>{this.log("error","Network error: "+e.message)}),this.socket.on("data",e=>{let t=0,s="",i=0;for(n+=e;-1!==(t=n.indexOf("\n",i));)s=n.substring(i,t),i=t+1,this.parseResponse(s.toString());n=n.slice(i)})}async parseResponse(e){if(0===e.length)return;if(!e.startsWith("{"))return void this.log("error","Invalid response format");let t;try{t=JSON.parse(e)}catch(e){return void this.log("error","Failed to parse response JSON")}if("string"==typeof t.type)if("update"===t.type){const e=this.payloadToPatches(t.payload);U.applyPatch(this.state,e),e.forEach(e=>{this.checkSub(e.path),"replace"!==e.op&&"add"!==e.op||-1==u.noRecordPaths[this.devicetype].findIndex(t=>null!==e.path.match(t))&&(this.lastChange={path:e.path,value:e.value},this.isRecording&&this.recordPatch(e))})}else if("ack"===t.type);else{if("get_resp"!==t.type)return"error"===t.type?void this.log("error","Received error from device: "+JSON.stringify(t,null,2)):void this.log("error","Received response with unexpected type: "+t.type);if("object"==typeof t.payload&&null!==t.payload)if("string"==typeof t.obj||Array.isArray(t.obj));else{if(this.updateState(t.payload),this.devicetype=this.getState("/device_info/model"),void 0===this.devicetype)return void this.log("error","Can't read device type, connection failed.");let e="";e=this.devicetype.startsWith("MAVEN")?this.getState("/device_info/version_fpga"):`v${this.getState("/device_info/FPGA_FW_rev/0")}.${this.getState("/device_info/FPGA_FW_rev/1")} b${this.getState("/device_info/FPGA_FW_build/0")}${this.getState("/device_info/FPGA_FW_build/1")}`,this.log("info",`Root GET, New state received\n\tModel Type: ${this.devicetype}\n\tSystem Build: ${this.getState("/device_info/image_build/0")} (${this.getState("/device_info/image_build/1")})\n\tFPGA Version: ${e}\n\tCORED Version: ${this.getState("/device_info/cored_tag")}\n\tSerial Number: ${this.getState("/device_info/serial_number")}`),this.updateAllTranslations(),this.updateAllChoices(),this.updateAllDefinitions(),this.initSubscriptions(),this.checkFeedbacks()}}else this.log("error","Response object missing type")}updateState(e,t=this.state){for(const n in e){const s=e[n];if("object"!=typeof s||null===s||Array.isArray(s))if(Array.isArray(s)&&s.every(e=>Array.isArray(e)&&2===e.length&&"number"==typeof e[0])){Array.isArray(t[n])||(t[n]=[]);for(const[e,i]of s)e>=t[n].length&&(t[n].length=e+1),"object"!=typeof i||null===i||Array.isArray(i)?"object"==typeof i&&null!==i&&Array.isArray(i)?(Array.isArray(t[n][e])||(t[n][e]=[]),this.updateState(i,t[n][e])):t[n][e]=i:(("object"!=typeof t[n][e]||null==t[n][e]||Array.isArray(t[n][e]))&&(t[n][e]={}),this.updateState(i,t[n][e]))}else t[n]=s;else("object"!=typeof t[n]||null===t[n]||Array.isArray(t[n]))&&(t[n]={}),this.updateState(s,t[n])}}payloadToPatches(e,t=""){const n=[],s=(e,t="")=>{for(const i in e){const o=e[i];if("object"!=typeof o||null===o||Array.isArray(o))if(Array.isArray(o)&&o.every(e=>Array.isArray(e)&&2===e.length&&"number"==typeof e[0]))for(const[e,r]of o)"object"==typeof r&&null!==r?s(r,`${t}/${i}/${e}`):n.push({op:"replace",path:`${t}/${i}/${e}`,value:r});else n.push({op:"replace",path:`${t}/${i}`,value:o});else s(o,`${t}/${i}`)}};return s(e,t),n}checkSub(e){let t=!1;Array.from(this.subscriptions.values()).filter(t=>e.match(t.check)).forEach(n=>{n.fun&&"function"==typeof n.fun&&n.fun(e)&&(t=!0),n.feedback&&this.checkFeedbacks(...n.feedback)}),t&&(this.updateAllChoices(),this.updateAllDefinitions())}initSubscriptions(){let e=!1;Array.from(this.subscriptions.values()).filter(e=>Array.isArray(e.init)&&e.init.length>0).forEach(t=>{if(null!=t.init)for(const n of t.init)t.fun&&"function"==typeof t.fun&&t.fun(n)&&(e=!0),t.feedback&&this.checkFeedbacks(...t.feedback)}),e&&this.updateAllDefinitions()}recordPatch(e){if("replace"!==e.op)return;const t=Array.from(this.recorderTable.keys()).find(t=>new RegExp(`^${t}$`).test(e.path));if(void 0!==t){const n=this.recorderTable.get(t);let s=this.translate("incoming",n.parameters[0].translation,e.value);!0===s?s="%%true%%":!1===s&&(s="%%false%%");const i={[n.parameters[0].name]:s},o=e.path.substring(1).split("/"),r={};n.options.forEach(e=>{let t=o[e.index];isNaN(parseInt(t))||(t=parseInt(t)),r[e.name]=this.translate("incoming",e.translation,t)});const a={actionId:n.actionId,options:{...r,...i}};this.recordAction(a)}else if(!this.inhibitNextGenericRecord){const t={actionId:"set_custom_value",options:{path:e.path,value:JSON.stringify(e.value)}};this.recordAction(t)}this.inhibitNextGenericRecord=!1}getState(e,t){return this.getPath(e,this.state,t)}getPath(e,t=this.state,n){try{let s=U.getValueByPointer(t,e);return"string"==typeof n&&Object.keys(this.translations).includes(n)&&(s=this.translations[n].incoming.get(s)),s}catch(s){return void this.log("error",`Failed to read value at path ${e}${n?" with translation"+n:""} from ${t==this.state?"state":"object"}. ${s}`)}}sendSetCmd(e,t,n){if("string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t)return void this.log("error","Invalid value type for set command");const s=Array.isArray(e)?e:this.pathToArray(e);let i=t;"string"==typeof n&&Object.keys(this.translations).includes(n)&&(i=this.translations[n].outgoing.get(t),"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i)?this.log("error",`Invalid value type for set command after translation ${n} of value ${t}: ${typeof i}`):this.sendCmd({type:"set",obj:s,payload:i})}sendCmd(e){if(void 0===this.socket)return void this.log("error","Socket is not connected");this.sendId>64353&&(this.sendId=0),e.seq=this.sendId;const t=`${JSON.stringify(e)}\n`;this.socket.send(t),this.sendId++}async destroy(){this.log("debug","destroy")}async configUpdated(e){const t={...this.config};this.config=e,this.config.host!==t.host&&this.startConnection(this.config.host,J.port),this.config.defaultcolor_active!==t.defaultcolor_active&&(this.updateDefaultDefaultStyle(),this.updateAllDefinitions()),this.setPresetDefinitions(H(this))}validPath(e){const t=`${e}`;return t.match(/^(\/[a-zA-Z0-9_-]+)+$/)?void 0!==this.getState(t)||(this.log("error",`Path ${t} can't be found on the device.`),!1):(this.log("error",`Path: ${t} is not a valid path format.`),!1)}pathToArray(e){for(;e.startsWith("/");)e=e.substring(1);return e.split("/").map(e=>e.match(/^\d+$/)?parseInt(e):e)}getConfigFields(){return[{type:"textinput",id:"host",label:"Device IP",width:4,regex:s.Regex.IP,default:""},{id:"coltext",type:"static-text",label:"Colors",value:"The colors are used as default colors for presets, actions and feedbacks",width:12},{type:"colorpicker",id:"defaultcolor_bg",label:"background",default:"#000000",width:4},{type:"colorpicker",id:"defaultcolor_inactive",label:"inactive",default:"#828282",width:4},{type:"colorpicker",id:"defaultcolor_active",label:"active",default:"#3a00db",width:4},{type:"colorpicker",id:"defaultcolor_ok",label:"ok",default:"#00ea27",width:4},{type:"colorpicker",id:"defaultcolor_warn",label:"warn",default:"#ff8000",width:4},{type:"colorpicker",id:"defaultcolor_bad",label:"bad",default:"#cc0000",width:4}]}getInputChoices(){return"string"!=typeof this.devicetype?[]:Object.keys(p.sourceTable).includes(this.devicetype)?p.sourceTable[this.devicetype].map(e=>{const t=e.slotlabelpath?this.getState(e.slotlabelpath):void 0,n=e.chlabelpath?this.getState(e.chlabelpath):void 0,s=`${e.slotlabel} ${e.chlabel}`;let i;return i=t&&n?`${t} ${n} (${s})`:n?`${e.slotlabel} ${n} (${s})`:t?`${t} (${s})`:s,{label:i,id:`${e.type}_${e.slotid}_${e.chid}`}}):[]}getChoicesFromTable(e){if("string"!=typeof this.devicetype)return[];if(!Object.keys(p).includes(e))return[];let t;if(Object.keys(p[e]).includes(this.devicetype))t=this.devicetype;else{if(!Object.keys(p[e]).includes("GENERIC"))return[];t="GENERIC"}return p[e][t].map(e=>{const t=e.slotlabelpath?this.getState(e.slotlabelpath):void 0,n=e.chlabelpath?this.getState(e.chlabelpath):void 0,s=`${e.slotlabel} ${e.chlabel}`;let i;return i=t&&n?`${t} ${n} (${s})`:n?`${e.slotlabel} ${n} (${s})`:s,{label:i,id:`${e.type}_${e.slotid}_${e.chid}`}})}translate(e,t,n){return void 0===t||"incoming"!==e&&"outgoing"!==e?n:Object.keys(this.translations).includes(t)?this.translations[t][e].get(n):n}updateAllTranslations(){this.makeTranslation("input","unassigned","sourceTable","sourceDspTable","generatorSources"),this.makeTranslation("output","sinkTable"),this.makeTranslation("sinkFlex","sinkTableFlex"),this.makeTranslation("sinkMixer","sinkTableMixer"),this.makeTranslation("sinkSidechain","sinkTableSidechain"),this.makeTranslation("sinkSumbus","sourceTableSumbus"),this.makeTranslation("ears","earsTable"),this.makeTranslation("inmng","inmngTable"),this.makeTranslation("groups","groupsTable"),this.makeTranslation("monitoringSnk","monitoringSnkTable"),this.makeTranslation("monitoringSrc","monitoringSrcTable"),this.makeTranslation("groupMute","groupMuteTable"),this.translations.mtxNum={incoming:new Map,outgoing:new Map},u.matMixer[this.devicetype].forEach(e=>{this.translations.mtxNum.incoming.set(e.devId,e.id),this.translations.mtxNum.outgoing.set(e.id,e.devId)}),this.translations.genericIn={incoming:new Map,outgoing:new Map},Array.from({length:8192},(e,t)=>t).forEach(e=>{this.translations.genericIn.incoming.set(e,`in${e+1}`),this.translations.genericIn.outgoing.set(`in${e+1}`,e)}),this.translations.genericIn.incoming.set(-1,"none"),this.translations.genericIn.outgoing.set("none",-1)}makeTranslation(e,...t){"string"==typeof this.devicetype&&0!==t.length&&t.forEach((t,n)=>{if(!Object.keys(p).includes(t))return;let s=[];if(Object.keys(p[t]).includes(this.devicetype))s=p[t][this.devicetype];else{if(!Object.keys(p[t]).includes("GENERIC"))return;s=p[t].GENERIC}void 0===this.translations[e]&&(this.translations[e]={incoming:new Map,outgoing:new Map});const i=this.translations[e];0===n&&(i.incoming.clear(),i.outgoing.clear()),s.forEach(e=>{if(void 0!==e.type&&void 0!==e.slotid&&void 0!==e.chid&&void 0!==e.index){const t=`${e.type}_${e.slotid}_${e.chid}`,n=e.index;i.outgoing.set(t,n),i.incoming.set(n,t)}else if(void 0!==e.type&&void 0!==e.chid&&void 0!==e.index){const t=`${e.type}_${e.chid}`,n=e.index;i.outgoing.set(t,n),i.incoming.set(n,t)}})})}updateActions(){h(this)}updateFeedbacks(){g(this)}initVariablesTable(){this.variablesTable=new Map([["device_samplerate",{variableId:"device_samplerate",name:"Current Sample Rate of the device",publishers:new Set(["static"])}],["snapshots",{variableId:"snapshots",name:"Array with snapshot metadata. Index is the Snapshot ID",publishers:new Set(["static"])}]])}updateVariableDefinitions(){const e=Array.from(this.variablesTable).map(([e,t])=>({variableId:e,name:t.name}));this.setVariableDefinitions(e)}updateDefaultDefaultStyle(){this.defaultDefaultStyle={bgcolor:this.config.defaultcolor_active,color:a(this.config.defaultcolor_active)}}handleStartStopRecordActions(e){this.inhibitNextGenericRecord=!1,this.isRecording=e}}(0,s.runEntrypoint)(J,[])})()})();