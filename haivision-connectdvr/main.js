/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={7169:(t,e,n)=>{"use strict";const i=n(2017);i.code='require("ajv/dist/runtime/equal").default',e.A=i},7690:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>x,__await:()=>b,__awaiter:()=>h,__classPrivateFieldGet:()=>C,__classPrivateFieldIn:()=>I,__classPrivateFieldSet:()=>O,__createBinding:()=>p,__decorate:()=>a,__exportStar:()=>d,__extends:()=>r,__generator:()=>u,__importDefault:()=>T,__importStar:()=>k,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>m,__rest:()=>o,__spread:()=>g,__spreadArray:()=>y,__spreadArrays:()=>_,__values:()=>f});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function o(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function a(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e){return function(n,i){e(n,i,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}function u(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var p=Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||p(e,t,n)}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function _(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i}function y(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{(n=r[t](e)).value instanceof b?Promise.resolve(n.value.v).then(c,l):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function c(t){a("next",t)}function l(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:b(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function x(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var S=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&p(e,t,n);return S(e,t),e}function T(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function O(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}function I(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},7360:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3693)),s=i(n(4252)),o=n(7754),a="image/bmp",c="image/x-ms-bmp",l=function(t){return e=s.default.decode(t),(0,o.scan)({bitmap:e},0,0,e.width,e.height,(function(t,n,i){var r=this.bitmap.data[i+0],s=this.bitmap.data[i+1],o=this.bitmap.data[i+2],a=this.bitmap.data[i+3];this.bitmap.data[i+0]=a,this.bitmap.data[i+1]=o,this.bitmap.data[i+2]=s,this.bitmap.data[i+3]=e.is_with_alpha?r:255})).bitmap;var e},h=function(t){return s.default.encode(function(t){return(0,o.scan)(t,0,0,t.bitmap.width,t.bitmap.height,(function(t,e,n){var i=this.bitmap.data[n+0],r=this.bitmap.data[n+1],s=this.bitmap.data[n+2],o=this.bitmap.data[n+3];this.bitmap.data[n+0]=o,this.bitmap.data[n+1]=s,this.bitmap.data[n+2]=r,this.bitmap.data[n+3]=i})).bitmap}(t)).data};e.default=function(){var t,e;return{mime:(0,r.default)({},a,["bmp"]),constants:{MIME_BMP:a,MIME_X_MS_BMP:c},decoders:(t={},(0,r.default)(t,a,l),(0,r.default)(t,c,l),t),encoders:(e={},(0,r.default)(e,a,h),(0,r.default)(e,c,h),e)}}},7006:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.srcOver=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a;return{r:(t.r*t.a+e.r*e.a*(1-t.a))/i,g:(t.g*t.a+e.g*e.a*(1-t.a))/i,b:(t.b*t.a+e.b*e.a*(1-t.a))/i,a:i}},e.dstOver=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a;return{r:(e.r*e.a+t.r*t.a*(1-e.a))/i,g:(e.g*e.a+t.g*t.a*(1-e.a))/i,b:(e.b*e.a+t.b*t.a*(1-e.a))/i,a:i}},e.multiply=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(r*a+r*(1-e.a)+a*(1-t.a))/i,g:(s*c+s*(1-e.a)+c*(1-t.a))/i,b:(o*l+o*(1-e.a)+l*(1-t.a))/i,a:i}},e.add=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a;return{r:(r+e.r*e.a)/i,g:(s+e.g*e.a)/i,b:(o+e.b*e.a)/i,a:i}},e.screen=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(r*e.a+a*t.a-r*a+r*(1-e.a)+a*(1-t.a))/i,g:(s*e.a+c*t.a-s*c+s*(1-e.a)+c*(1-t.a))/i,b:(o*e.a+l*t.a-o*l+o*(1-e.a)+l*(1-t.a))/i,a:i}},e.overlay=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(2*a<=e.a?2*r*a+r*(1-e.a)+a*(1-t.a):r*(1+e.a)+a*(1+t.a)-2*a*r-e.a*t.a)/i,g:(2*c<=e.a?2*s*c+s*(1-e.a)+c*(1-t.a):s*(1+e.a)+c*(1+t.a)-2*c*s-e.a*t.a)/i,b:(2*l<=e.a?2*o*l+o*(1-e.a)+l*(1-t.a):o*(1+e.a)+l*(1+t.a)-2*l*o-e.a*t.a)/i,a:i}},e.darken=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(Math.min(r*e.a,a*t.a)+r*(1-e.a)+a*(1-t.a))/i,g:(Math.min(s*e.a,c*t.a)+s*(1-e.a)+c*(1-t.a))/i,b:(Math.min(o*e.a,l*t.a)+o*(1-e.a)+l*(1-t.a))/i,a:i}},e.lighten=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(Math.max(r*e.a,a*t.a)+r*(1-e.a)+a*(1-t.a))/i,g:(Math.max(s*e.a,c*t.a)+s*(1-e.a)+c*(1-t.a))/i,b:(Math.max(o*e.a,l*t.a)+o*(1-e.a)+l*(1-t.a))/i,a:i}},e.hardLight=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(2*r<=t.a?2*r*a+r*(1-e.a)+a*(1-t.a):r*(1+e.a)+a*(1+t.a)-2*a*r-e.a*t.a)/i,g:(2*s<=t.a?2*s*c+s*(1-e.a)+c*(1-t.a):s*(1+e.a)+c*(1+t.a)-2*c*s-e.a*t.a)/i,b:(2*o<=t.a?2*o*l+o*(1-e.a)+l*(1-t.a):o*(1+e.a)+l*(1+t.a)-2*l*o-e.a*t.a)/i,a:i}},e.difference=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(r+a-2*Math.min(r*e.a,a*t.a))/i,g:(s+c-2*Math.min(s*e.a,c*t.a))/i,b:(o+l-2*Math.min(o*e.a,l*t.a))/i,a:i}},e.exclusion=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.a*=n;var i=e.a+t.a-e.a*t.a,r=t.r*t.a,s=t.g*t.a,o=t.b*t.a,a=e.r*e.a,c=e.g*e.a,l=e.b*e.a;return{r:(r*e.a+a*t.a-2*r*a+r*(1-e.a)+a*(1-t.a))/i,g:(s*e.a+c*t.a-2*s*c+s*(1-e.a)+c*(1-t.a))/i,b:(o*e.a+l*t.a-2*o*l+o*(1-e.a)+l*(1-t.a))/i,a:i}}},128:(t,e,n)=>{"use strict";var i=n(6305);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;if("function"==typeof i&&(a=i,i={}),!(t instanceof this.constructor))return r.throwError.call(this,"The source must be a Jimp image",a);if("number"!=typeof e||"number"!=typeof n)return r.throwError.call(this,"x and y must be numbers",a);var c=i,l=c.mode,h=c.opacitySource,u=c.opacityDest;l||(l=s.BLEND_SOURCE_OVER),("number"!=typeof h||h<0||h>1)&&(h=1),("number"!=typeof u||u<0||u>1)&&(u=1);var p=o[l];e=Math.round(e),n=Math.round(n);var d=this;return 1!==u&&d.opacity(u),t.scanQuiet(0,0,t.bitmap.width,t.bitmap.height,(function(t,i,r){var o=d.getPixelIndex(e+t,n+i,s.EDGE_CROP),a=p({r:this.bitmap.data[r+0]/255,g:this.bitmap.data[r+1]/255,b:this.bitmap.data[r+2]/255,a:this.bitmap.data[r+3]/255},{r:d.bitmap.data[o+0]/255,g:d.bitmap.data[o+1]/255,b:d.bitmap.data[o+2]/255,a:d.bitmap.data[o+3]/255},h);d.bitmap.data[o+0]=this.constructor.limit255(255*a.r),d.bitmap.data[o+1]=this.constructor.limit255(255*a.g),d.bitmap.data[o+2]=this.constructor.limit255(255*a.b),d.bitmap.data[o+3]=this.constructor.limit255(255*a.a)})),(0,r.isNodePattern)(a)&&a.call(this,null,this),this};var r=n(7754),s=i(n(4401)),o=i(n(7006))},4401:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EDGE_CROP=e.EDGE_WRAP=e.EDGE_EXTEND=e.BLEND_EXCLUSION=e.BLEND_DIFFERENCE=e.BLEND_HARDLIGHT=e.BLEND_LIGHTEN=e.BLEND_DARKEN=e.BLEND_OVERLAY=e.BLEND_SCREEN=e.BLEND_ADD=e.BLEND_MULTIPLY=e.BLEND_DESTINATION_OVER=e.BLEND_SOURCE_OVER=e.VERTICAL_ALIGN_BOTTOM=e.VERTICAL_ALIGN_MIDDLE=e.VERTICAL_ALIGN_TOP=e.HORIZONTAL_ALIGN_RIGHT=e.HORIZONTAL_ALIGN_CENTER=e.HORIZONTAL_ALIGN_LEFT=e.AUTO=void 0,e.AUTO=-1,e.HORIZONTAL_ALIGN_LEFT=1,e.HORIZONTAL_ALIGN_CENTER=2,e.HORIZONTAL_ALIGN_RIGHT=4,e.VERTICAL_ALIGN_TOP=8,e.VERTICAL_ALIGN_MIDDLE=16,e.VERTICAL_ALIGN_BOTTOM=32,e.BLEND_SOURCE_OVER="srcOver",e.BLEND_DESTINATION_OVER="dstOver",e.BLEND_MULTIPLY="multiply",e.BLEND_ADD="add",e.BLEND_SCREEN="screen",e.BLEND_OVERLAY="overlay",e.BLEND_DARKEN="darken",e.BLEND_LIGHTEN="lighten",e.BLEND_HARDLIGHT="hardLight",e.BLEND_DIFFERENCE="difference",e.BLEND_EXCLUSION="exclusion",e.EDGE_EXTEND=1,e.EDGE_WRAP=2,e.EDGE_CROP=3},1212:(t,e,n)=>{"use strict";var i=n(6305),r=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.addConstants=U,e.addJimpMethods=j,e.jimpEvMethod=z,e.jimpEvChange=G,Object.defineProperty(e,"addType",{enumerable:!0,get:function(){return C.addType}}),e.default=void 0;for(var s=r(n(9646)),o=r(n(5715)),a=r(n(7383)),c=r(n(4579)),l=r(n(8452)),h=r(n(3072)),u=r(n(2475)),p=r(n(9511)),d=r(n(3693)),f=r(n(3738)),m=r(n(9896)),g=r(n(6928)),_=r(n(4434)),y=n(7754),b=r(n(1493)),v=r(n(3354)),w=r(n(8160)),x=r(n(6535)),E=r(n(7262)),S=r(n(5089)),k=r(n(128)),T=r(n(8634)),C=i(n(7964)),O=n(5271),I=i(n(4401)),A="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",P=[NaN,NaN],N=2;N<65;N++){var M=(0,b.default)(b.default.BIN,A.slice(0,N))(new Array(65).join("1"));P.push(M.length)}function D(){}function R(t,e){(0,S.default)(t,(function(n,i,r){if(n)return e(n);if("headers"in i&&"location"in i.headers)return t.url=i.headers.location,R(t,e);if("object"===(0,f.default)(r)&&Buffer.isBuffer(r))return e(null,r);var s="Could not load Buffer from <"+t.url+"> (HTTP: "+i.statusCode+")";return new Error(s)}))}var B,F={data:null,width:null,height:null},L=function(t){function e(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(0,a.default)(this,e),t=(0,l.default)(this,(0,h.default)(e).call(this)),(0,d.default)((0,u.default)(t),"bitmap",F),(0,d.default)((0,u.default)(t),"_background",0),(0,d.default)((0,u.default)(t),"_originalMime",e.MIME_PNG),(0,d.default)((0,u.default)(t),"_exif",null),(0,d.default)((0,u.default)(t),"_rgba",!0),(0,d.default)((0,u.default)(t),"writeAsync",(function(e){return(0,T.default)(t.write,(0,u.default)(t),e)})),(0,d.default)((0,u.default)(t),"getBase64Async",(function(e){return(0,T.default)(t.getBase64,(0,u.default)(t),e)})),(0,d.default)((0,u.default)(t),"getBuffer",O.getBuffer),(0,d.default)((0,u.default)(t),"getBufferAsync",O.getBufferAsync),(0,d.default)((0,u.default)(t),"getPixelColour",t.getPixelColor),(0,d.default)((0,u.default)(t),"setPixelColour",t.setPixelColor);var s,o,c=(0,u.default)(t),p=D;function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0];(i||{}).methodName="constructor",setTimeout((function(){var t;i&&p===D?c.emitError("constructor",i):i||c.emitMulti("constructor","initialized"),(t=p).call.apply(t,[c].concat(e))}),1)}if(s=i[0],Object.prototype.toString.call(s).toLowerCase().indexOf("arraybuffer")>-1&&(i[0]=function(t){for(var e=Buffer.alloc(t.byteLength),n=new Uint8Array(t),i=0;i<e.length;++i)e[i]=n[i];return e}(i[0])),"number"==typeof i[0]&&"number"==typeof i[1]||parseInt(i[0],10)&&parseInt(i[1],10)){var _=parseInt(i[0],10),b=parseInt(i[1],10);if(p=i[2],"number"==typeof i[2]&&(t._background=i[2],p=i[3]),"string"==typeof i[2]&&(t._background=e.cssColorToHex(i[2]),p=i[3]),void 0===p&&(p=D),"function"!=typeof p)return(0,l.default)(t,y.throwError.call((0,u.default)(t),"cb must be a function",g));t.bitmap={data:Buffer.alloc(_*b*4),width:_,height:b};for(var v=0;v<t.bitmap.data.length;v+=4)t.bitmap.data.writeUInt32BE(t._background,v);g(null,(0,u.default)(t))}else if("object"===(0,f.default)(i[0])&&i[0].url){if("function"!=typeof(p=i[1]||D))return(0,l.default)(t,y.throwError.call((0,u.default)(t),"cb must be a function",g));R(i[0],(function(e,n){if(e)return y.throwError.call((0,u.default)(t),e,g);t.parseBitmap(n,i[0].url,g)}))}else if(i[0]instanceof e){var w=i[0];if(void 0===(p=i[1])&&(p=D),"function"!=typeof p)return(0,l.default)(t,y.throwError.call((0,u.default)(t),"cb must be a function",g));t.bitmap={data:Buffer.from(w.bitmap.data),width:w.bitmap.width,height:w.bitmap.height},t._quality=w._quality,t._deflateLevel=w._deflateLevel,t._deflateStrategy=w._deflateStrategy,t._filterType=w._filterType,t._rgba=w._rgba,t._background=w._background,t._originalMime=w._originalMime,g(null,(0,u.default)(t))}else if((o=i[0])&&"object"===(0,f.default)(o)&&"number"==typeof o.width&&"number"==typeof o.height&&(Buffer.isBuffer(o.data)||o.data instanceof Uint8Array||"function"==typeof Uint8ClampedArray&&o.data instanceof Uint8ClampedArray)&&(o.data.length===o.width*o.height*4||o.data.length===o.width*o.height*3)){var x=i[0];p=i[1]||D;var E=x.width*x.height*4===x.data.length?Buffer.from(x.data):function(t){if(t.length%3!=0)throw new Error("Buffer length is incorrect");for(var e=Buffer.allocUnsafe(t.length/3*4),n=0,i=0;i<t.length;i++)e[n]=t[i],(i+1)%3==0&&(e[++n]=255),n++;return e}(x.data);t.bitmap={data:E,width:x.width,height:x.height},g(null,(0,u.default)(t))}else if("string"==typeof i[0]){var S=i[0];if(void 0===(p=i[1])&&(p=D),"function"!=typeof p)return(0,l.default)(t,y.throwError.call((0,u.default)(t),"cb must be a function",g));!function(t,e){m.default&&"function"==typeof m.default.readFile&&!t.match(/^(http|ftp)s?:\/\/./)?m.default.readFile(t,e):R({url:t},e)}(S,(function(e,n){if(e)return y.throwError.call((0,u.default)(t),e,g);t.parseBitmap(n,S,g)}))}else if("object"===(0,f.default)(i[0])&&Buffer.isBuffer(i[0])){var k=i[0];if("function"!=typeof(p=i[1]))return(0,l.default)(t,y.throwError.call((0,u.default)(t),"cb must be a function",g));t.parseBitmap(k,null,g)}else{"function"!=typeof(p=i[i.length-1])&&"function"!=typeof(p=i[i.length-2])&&(p=D);var C=e.__extraConstructors.find((function(t){return t.test.apply(t,i)}));if(!C)return(0,l.default)(t,y.throwError.call((0,u.default)(t),"No matching constructor overloading was found. Please see the docs for how to call the Jimp constructor.",g));new Promise((function(e,n){var r;return(r=C.run).call.apply(r,[(0,u.default)(t),e,n].concat(i))})).then((function(){return g(null,(0,u.default)(t))})).catch(g)}return t}return(0,p.default)(e,t),(0,c.default)(e,[{key:"parseBitmap",value:function(t,e,n){O.parseBitmap.call(this,t,null,n)}},{key:"rgba",value:function(t,e){return"boolean"!=typeof t?y.throwError.call(this,"bool must be a boolean, true for RGBA or false for RGB",e):(this._rgba=t,(0,y.isNodePattern)(e)&&e.call(this,null,this),this)}},{key:"emitMulti",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign(n,{methodName:t,eventName:e}),this.emit("any",n),t&&this.emit(t,n),this.emit(e,n)}},{key:"emitError",value:function(t,e){this.emitMulti(t,"error",e)}},{key:"getHeight",value:function(){return this.bitmap.height}},{key:"getWidth",value:function(){return this.bitmap.width}},{key:"inspect",value:function(){return"<Jimp "+(this.bitmap===F?"pending...":this.bitmap.width+"x"+this.bitmap.height)+">"}},{key:"toString",value:function(){return"[object Jimp]"}},{key:"getMIME",value:function(){return this._originalMime||e.MIME_PNG}},{key:"getExtension",value:function(){var t=this.getMIME();return C.getExtension(t)}},{key:"write",value:function(t,e){var n=this;if(!m.default||!m.default.createWriteStream)throw new Error("Cant access the filesystem. You can use the getBase64 method.");if("string"!=typeof t)return y.throwError.call(this,"path must be a string",e);if(void 0===e&&(e=D),"function"!=typeof e)return y.throwError.call(this,"cb must be a function",e);var i=C.getType(t)||this.getMIME(),r=g.default.parse(t);return r.dir&&v.default.sync(r.dir),this.getBuffer(i,(function(i,r){if(i)return y.throwError.call(n,i,e);var s=m.default.createWriteStream(t);s.on("open",(function(){s.write(r),s.end()})).on("error",(function(t){return y.throwError.call(n,t,e)})),s.on("finish",(function(){e.call(n,null,n)}))})),this}},{key:"getBase64",value:function(t,n){return t===e.AUTO&&(t=this.getMIME()),"string"!=typeof t?y.throwError.call(this,"mime must be a string",n):"function"!=typeof n?y.throwError.call(this,"cb must be a function",n):(this.getBuffer(t,(function(e,i){if(e)return y.throwError.call(this,e,n);var r="data:"+t+";base64,"+i.toString("base64");n.call(this,null,r)})),this)}},{key:"hash",value:function(t,e){if("function"==typeof(t=t||64)&&(e=t,t=64),"number"!=typeof t)return y.throwError.call(this,"base must be a number",e);if(t<2||t>64)return y.throwError.call(this,"base must be a number between 2 and 64",e);var n=this.pHash();for(n=(0,b.default)(b.default.BIN,A.slice(0,t))(n);n.length<P[t];)n="0"+n;return(0,y.isNodePattern)(e)&&e.call(this,null,n),n}},{key:"pHash",value:function(){return(new E.default).getHash(this)}},{key:"distanceFromHash",value:function(t){var e=new E.default,n=e.getHash(this);return e.distance(n,t)}},{key:"getPixelIndex",value:function(t,n,i,r){var s,o;if("function"==typeof i&&void 0===r&&(r=i,i=null),i||(i=e.EDGE_EXTEND),"number"!=typeof t||"number"!=typeof n)return y.throwError.call(this,"x and y must be numbers",r);s=t=Math.round(t),o=n=Math.round(n),i===e.EDGE_EXTEND&&(t<0&&(s=0),t>=this.bitmap.width&&(s=this.bitmap.width-1),n<0&&(o=0),n>=this.bitmap.height&&(o=this.bitmap.height-1)),i===e.EDGE_WRAP&&(t<0&&(s=this.bitmap.width+t),t>=this.bitmap.width&&(s=t%this.bitmap.width),n<0&&(s=this.bitmap.height+n),n>=this.bitmap.height&&(o=n%this.bitmap.height));var a=this.bitmap.width*o+s<<2;return(s<0||s>=this.bitmap.width)&&(a=-1),(o<0||o>=this.bitmap.height)&&(a=-1),(0,y.isNodePattern)(r)&&r.call(this,null,a),a}},{key:"getPixelColor",value:function(t,e,n){if("number"!=typeof t||"number"!=typeof e)return y.throwError.call(this,"x and y must be numbers",n);t=Math.round(t),e=Math.round(e);var i=this.getPixelIndex(t,e),r=this.bitmap.data.readUInt32BE(i);return(0,y.isNodePattern)(n)&&n.call(this,null,r),r}},{key:"setPixelColor",value:function(t,e,n,i){if("number"!=typeof t||"number"!=typeof e||"number"!=typeof n)return y.throwError.call(this,"hex, x and y must be numbers",i);e=Math.round(e),n=Math.round(n);var r=this.getPixelIndex(e,n);return this.bitmap.data.writeUInt32BE(t,r),(0,y.isNodePattern)(i)&&i.call(this,null,this),this}},{key:"hasAlpha",value:function(){for(var t=0;t<this.bitmap.height;t++)for(var e=0;e<this.bitmap.width;e++){var n=this.bitmap.width*t+e<<2;if(255!==this.bitmap.data[n+3])return!0}return!1}},{key:"scanIterator",value:function(t,e,n,i){return"number"!=typeof t||"number"!=typeof e?y.throwError.call(this,"x and y must be numbers"):"number"!=typeof n||"number"!=typeof i?y.throwError.call(this,"w and h must be numbers"):(0,y.scanIterator)(this,t,e,n,i)}}]),e}(_.default);function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;Object.entries(t).forEach((function(t){var n=(0,o.default)(t,2),i=n[0],r=n[1];e[i]=r}))}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;Object.entries(t).forEach((function(t){var n=(0,o.default)(t,2),i=n[0],r=n[1];e.prototype[i]=r}))}function z(t,e,n){var i="before-"+e,r=e.replace(/e$/,"")+"ed";L.prototype[t]=function(){for(var e,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var c,l=o[n.length-1],h=this;"function"==typeof l?(e=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var s=n[0],o=n[1];s?h.emitError(t,s):h.emitMulti(t,r,(0,d.default)({},t,o)),l.apply(this,n)},o[o.length-1]=e):e=!1,this.emitMulti(t,i);try{c=n.apply(this,o),e||this.emitMulti(t,r,(0,d.default)({},t,c))}catch(e){e.methodName=t,this.emitError(t,e)}return c},L.prototype[t+"Quiet"]=n}function G(t,e){z(t,"change",e)}U(I),j({composite:k.default}),L.__extraConstructors=[],L.appendConstructorOption=function(t,e,n){L.__extraConstructors.push({name:t,test:e,run:n})},L.read=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise((function(t,n){(0,s.default)(L,e.concat([function(e,i){e?n(e):t(i)}]))}))},L.create=L.read,L.rgbaToInt=function(t,e,n,i,r){if("number"!=typeof t||"number"!=typeof e||"number"!=typeof n||"number"!=typeof i)return y.throwError.call(this,"r, g, b and a must be numbers",r);if(t<0||t>255)return y.throwError.call(this,"r must be between 0 and 255",r);if((e<0||e>255)&&y.throwError.call(this,"g must be between 0 and 255",r),n<0||n>255)return y.throwError.call(this,"b must be between 0 and 255",r);if(i<0||i>255)return y.throwError.call(this,"a must be between 0 and 255",r);t=Math.round(t),n=Math.round(n),e=Math.round(e),i=Math.round(i);var s=t*Math.pow(256,3)+e*Math.pow(256,2)+n*Math.pow(256,1)+i*Math.pow(256,0);return(0,y.isNodePattern)(r)&&r.call(this,null,s),s},L.intToRGBA=function(t,e){if("number"!=typeof t)return y.throwError.call(this,"i must be a number",e);var n={};return n.r=Math.floor(t/Math.pow(256,3)),n.g=Math.floor((t-n.r*Math.pow(256,3))/Math.pow(256,2)),n.b=Math.floor((t-n.r*Math.pow(256,3)-n.g*Math.pow(256,2))/Math.pow(256,1)),n.a=Math.floor((t-n.r*Math.pow(256,3)-n.g*Math.pow(256,2)-n.b*Math.pow(256,1))/Math.pow(256,0)),(0,y.isNodePattern)(e)&&e.call(this,null,n),n},L.cssColorToHex=function(t){return"number"==typeof(t=t||0)?Number(t):parseInt((0,x.default)(t).toHex8(),16)},L.limit255=function(t){return t=Math.max(t,0),Math.min(t,255)},L.diff=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;if(!(t instanceof L&&e instanceof L))return y.throwError.call(this,"img1 and img2 must be an Jimp images");var i=t.bitmap,r=e.bitmap;if(i.width===r.width&&i.height===r.height||(i.width*i.height>r.width*r.height?t=t.cloneQuiet().resize(r.width,r.height):e=e.cloneQuiet().resize(i.width,i.height)),"number"!=typeof n||n<0||n>1)return y.throwError.call(this,"threshold must be a number between 0 and 1");var s=new L(i.width,i.height,4294967295);return{percent:(0,w.default)(i.data,r.data,s.bitmap.data,s.bitmap.width,s.bitmap.height,{threshold:n})/(s.bitmap.width*s.bitmap.height),image:s}},L.distance=function(t,e){var n=new E.default,i=n.getHash(t),r=n.getHash(e);return n.distance(i,r)},L.compareHashes=function(t,e){return(new E.default).distance(t,e)},L.colorDiff=function(t,e){var n=function(t){return Math.pow(t,2)},i=Math.max;return 0===t.a||t.a||(t.a=255),0===e.a||e.a||(e.a=255),(i(n(t.r-e.r),n(t.r-e.r-t.a+e.a))+i(n(t.g-e.g),n(t.g-e.g-t.a+e.a))+i(n(t.b-e.b),n(t.b-e.b-t.a+e.a)))/195075},z("clone","clone",(function(t){var e=new L(this);return(0,y.isNodePattern)(t)&&t.call(e,null,e),e})),G("background",(function(t,e){return"number"!=typeof t?y.throwError.call(this,"hex must be a hexadecimal rgba value",e):(this._background=t,(0,y.isNodePattern)(e)&&e.call(this,null,this),this)})),G("scan",(function(t,e,n,i,r,s){if("number"!=typeof t||"number"!=typeof e)return y.throwError.call(this,"x and y must be numbers",s);if("number"!=typeof n||"number"!=typeof i)return y.throwError.call(this,"w and h must be numbers",s);if("function"!=typeof r)return y.throwError.call(this,"f must be a function",s);var o=(0,y.scan)(this,t,e,n,i,r);return(0,y.isNodePattern)(s)&&s.call(this,null,o),o})),"BROWSER"===process.env.ENVIRONMENT&&("undefined"!=typeof window&&"object"===("undefined"==typeof window?"undefined":(0,f.default)(window))&&(B=window),"undefined"!=typeof self&&"object"===("undefined"==typeof self?"undefined":(0,f.default)(self))&&(B=self),B.Jimp=L,B.Buffer=Buffer);var q=L;e.default=q},7262:t=>{"use strict";function e(t,e){this.size=this.size||t,this.smallerSize=this.smallerSize||e,function(t){for(var e=1;e<t;e++)n[e]=1;n[0]=1/Math.sqrt(2)}(this.size)}e.prototype.size=32,e.prototype.smallerSize=8,e.prototype.distance=function(t,e){for(var n=0,i=0;i<t.length;i++)t[i]!==e[i]&&n++;return n/t.length},e.prototype.getHash=function(t){(t=t.clone().resize(this.size,this.size)).grayscale();for(var e=[],i=0;i<t.bitmap.width;i++){e[i]=[];for(var r=0;r<t.bitmap.height;r++)e[i][r]=(s=t.getPixelColor(i,r),o=void 0,o={},o.r=Math.floor(s/Math.pow(256,3)),o.g=Math.floor((s-o.r*Math.pow(256,3))/Math.pow(256,2)),o.b=Math.floor((s-o.r*Math.pow(256,3)-o.g*Math.pow(256,2))/Math.pow(256,1)),o.a=Math.floor((s-o.r*Math.pow(256,3)-o.g*Math.pow(256,2)-o.b*Math.pow(256,1))/Math.pow(256,0)),o).b}for(var s,o,a=function(t,e){for(var i=e,r=[],s=0;s<i;s++){r[s]=[];for(var o=0;o<i;o++){for(var a=0,c=0;c<i;c++)for(var l=0;l<i;l++)a+=Math.cos((2*c+1)/(2*i)*s*Math.PI)*Math.cos((2*l+1)/(2*i)*o*Math.PI)*t[c][l];a*=n[s]*n[o]/4,r[s][o]=a}}return r}(e,this.size),c=0,l=0;l<this.smallerSize;l++)for(var h=0;h<this.smallerSize;h++)c+=a[l][h];for(var u=c/(this.smallerSize*this.smallerSize),p="",d=0;d<this.smallerSize;d++)for(var f=0;f<this.smallerSize;f++)p+=a[d][f]>u?"1":"0";return p};var n=[];t.exports=e},5089:(t,e,n)=>{"use strict";var i=n(4994),r=i(n(3693)),s=i(n(2253));function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}process.browser||"BROWSER"===process.env.ENVIRONMENT||void 0!==process.versions.electron&&"renderer"===process.type&&"function"==typeof XMLHttpRequest?t.exports=function(t,e){var n=new XMLHttpRequest;n.open("GET",t.url,!0),n.responseType="arraybuffer",n.addEventListener("load",(function(){if(n.status<400)try{var i=Buffer.from(this.response);e(null,n,i)}catch(n){return e(new Error("Response is not a buffer for url "+t.url+". Error: "+n.message))}else e(new Error("HTTP Status "+n.status+" for url "+t.url))})),n.addEventListener("error",(function(t){e(t)})),n.send()}:t.exports=function(t,e){var i=(0,s.default)({},t);n(5802)(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({compression:!0},i),(function(t,n){null===t?e(null,n,n.body):e(t)}))}},5271:(t,e,n)=>{"use strict";var i=n(6305),r=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.parseBitmap=function(t,e,n){var i=function(t,e){var n=(0,o.default)(t);return n?n.mime:e?h.getType(e):null}(t,e);if("string"!=typeof i)return n(new Error("Could not find MIME for Buffer <"+e+">"));this._originalMime=i.toLowerCase();try{var r=this.getMIME();if(!this.constructor.decoders[r])return c.throwError.call(this,"Unsupported MIME type: "+r,n);this.bitmap=this.constructor.decoders[r](t)}catch(t){return n.call(this,t,this)}try{this._exif=a.default.create(t).parse(),function(t){if(!(p(t)<2)){var e=function(t){var e=t.getWidth(),n=t.getHeight();switch(p(t)){case 1:default:return null;case 2:return function(t,n){return[e-t-1,n]};case 3:return function(t,i){return[e-t-1,n-i-1]};case 4:return function(t,e){return[t,n-e-1]};case 5:return function(t,e){return[e,t]};case 6:return function(t,e){return[e,n-t-1]};case 7:return function(t,i){return[e-i-1,n-t-1]};case 8:return function(t,n){return[e-n-1,t]}}}(t),n=p(t)>4;!function(t,e,n,i){for(var r=t.bitmap.data,o=t.bitmap.width,a=Buffer.alloc(r.length),c=0;c<e;c++)for(var l=0;l<n;l++){var h=i(c,l),u=(0,s.default)(h,2),p=u[0],d=e*l+c<<2,f=o*u[1]+p<<2,m=r.readUInt32BE(f);a.writeUInt32BE(m,d)}t.bitmap.data=a,t.bitmap.width=e,t.bitmap.height=n}(t,n?t.bitmap.height:t.bitmap.width,n?t.bitmap.width:t.bitmap.height,e)}}(this)}catch(t){}return n.call(this,null,this),this},e.getBuffer=d,e.getBufferAsync=function(t){return(0,u.default)(d,this,t)};var s=r(n(5715)),o=r(n(3846)),a=r(n(7833)),c=n(7754),l=i(n(4401)),h=i(n(7964)),u=r(n(8634));function p(t){return t._exif&&t._exif.tags&&t._exif.tags.Orientation||1}function d(t,e){if(t===l.AUTO&&(t=this.getMIME()),"string"!=typeof t)return c.throwError.call(this,"mime must be a string",e);if("function"!=typeof e)return c.throwError.call(this,"cb must be a function",e);var n,i;if(t=t.toLowerCase(),this._rgba&&this.constructor.hasAlpha[t]?this.bitmap.data=Buffer.from(this.bitmap.data):this.bitmap.data=(n=this.constructor,i=this,new n(i.bitmap.width,i.bitmap.height,i._background).composite(i,0,0).bitmap).data,this.constructor.encoders[t]){var r=this.constructor.encoders[t](this);e.call(this,null,r)}else e.call(this,"Unsupported MIME type: "+t);return this}},7964:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getExtension=e.getType=e.addType=void 0;var n={};e.addType=function(t,e){n[t]=e},e.getType=function(t){var e,i=t.split("/").slice(-1);return(e=i[i.length-1].split(".").pop(),Object.entries(n).find((function(t){return t[1].includes(e)}))||[])[0]},e.getExtension=function(t){return(n[t.toLowerCase()]||[])[0]}},8634:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return new Promise((function(n,r){i.push((function(t,e){t&&r(t),n(e)})),t.bind(e).apply(void 0,i)}))}},3354:(t,e,n)=>{var i=n(6928),r=n(9896),s=parseInt("0777",8);function o(t,e,n,a){"function"==typeof e?(n=e,e={}):e&&"object"==typeof e||(e={mode:e});var c=e.mode,l=e.fs||r;void 0===c&&(c=s),a||(a=null);var h=n||function(){};t=i.resolve(t),l.mkdir(t,c,(function(n){if(!n)return h(null,a=a||t);if("ENOENT"===n.code){if(i.dirname(t)===t)return h(n);o(i.dirname(t),e,(function(n,i){n?h(n,i):o(t,e,h,i)}))}else l.stat(t,(function(t,e){t||!e.isDirectory()?h(n,a):h(null,a)}))}))}t.exports=o.mkdirp=o.mkdirP=o,o.sync=function t(e,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,c=n.fs||r;void 0===a&&(a=s),o||(o=null),e=i.resolve(e);try{c.mkdirSync(e,a),o=o||e}catch(r){if("ENOENT"===r.code)o=t(i.dirname(e),n,o),t(e,n,o);else{var l;try{l=c.statSync(e)}catch(t){throw r}if(!l.isDirectory())throw r}}return o}},1688:(t,e,n)=>{"use strict";var i=n(6305),r=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default,n={hasAlpha:{},encoders:{},decoders:{},class:{},constants:{}};function i(t){Object.entries(t).forEach((function(t){var e=(0,a.default)(t,2),i=e[0],r=e[1];n[i]=h({},n[i],{},r)}))}return t.types&&(t.types.forEach((function(t){var e=t();Array.isArray(e.mime)?c.addType.apply(void 0,(0,s.default)(e.mime)):Object.entries(e.mime).forEach((function(t){return c.addType.apply(void 0,(0,s.default)(t))})),delete e.mime,i(e)})),e.decoders=h({},e.decoders,{},n.decoders),e.encoders=h({},e.encoders,{},n.encoders),e.hasAlpha=h({},e.hasAlpha,{},n.hasAlpha)),t.plugins&&t.plugins.forEach((function(t){var e=t(c.jimpEvChange)||{};e.class||e.constants?i(e):i({class:e})})),(0,c.addJimpMethods)(n.class,e),(0,c.addConstants)(n.constants,e),c.default};var s=r(n(1132)),o=r(n(3693)),a=r(n(5715)),c=i(n(1212));function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},2967:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3693)),s=i(n(4399)),o=n(1224),a="image/gif";e.default=function(){return{mime:(0,r.default)({},a,["gif"]),constants:{MIME_GIF:a},decoders:(0,r.default)({},a,(function(t){var e=new s.default.GifReader(t),n=Buffer.alloc(e.width*e.height*4);return e.decodeAndBlitFrameRGBA(0,n),{data:n,width:e.width,height:e.height}})),encoders:(0,r.default)({},a,(function(t){var e=new o.BitmapImage(t.bitmap);o.GifUtil.quantizeDekker(e,256);var n=new o.GifFrame(e);return(new o.GifCodec).encodeGif([n],{}).then((function(t){return t.buffer}))}))}}},9447:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3693)),s=i(n(5609)),o=n(7754),a="image/jpeg";e.default=function(){return{mime:(0,r.default)({},a,["jpeg","jpg","jpe"]),constants:{MIME_JPEG:a},decoders:(0,r.default)({},a,s.default.decode),encoders:(0,r.default)({},a,(function(t){return s.default.encode(t.bitmap,t._quality).data})),class:{_quality:100,quality:function(t,e){return"number"!=typeof t?o.throwError.call(this,"n must be a number",e):t<0||t>100?o.throwError.call(this,"n must be a number 0 - 100",e):(this._quality=Math.round(t),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)}}}}},9358:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3738)),s=n(7754);e.default=function(){return{blit:function(t,e,n,i,o,a,c,l){if(!(t instanceof this.constructor))return s.throwError.call(this,"The source must be a Jimp image",l);if("number"!=typeof e||"number"!=typeof n)return s.throwError.call(this,"x and y must be numbers",l);if("function"==typeof i)l=i,i=0,o=0,a=t.bitmap.width,c=t.bitmap.height;else{if((0,r.default)(i)!==(0,r.default)(o)||(0,r.default)(o)!==(0,r.default)(a)||(0,r.default)(a)!==(0,r.default)(c))return s.throwError.call(this,"srcx, srcy, srcw, srch must be numbers",l);i=i||0,o=o||0,a=a||t.bitmap.width,c=c||t.bitmap.height}e=Math.round(e),n=Math.round(n),i=Math.round(i),o=Math.round(o),a=Math.round(a),c=Math.round(c);var h=this.bitmap.width,u=this.bitmap.height,p=this;return t.scanQuiet(i,o,a,c,(function(t,r,s){var a=e+t-i,c=n+r-o;if(a>=0&&c>=0&&h-a>0&&u-c>0){var l=p.getPixelIndex(a,c),d={r:this.bitmap.data[s],g:this.bitmap.data[s+1],b:this.bitmap.data[s+2],a:this.bitmap.data[s+3]},f={r:p.bitmap.data[l],g:p.bitmap.data[l+1],b:p.bitmap.data[l+2],a:p.bitmap.data[l+3]};p.bitmap.data[l]=(d.a*(d.r-f.r)-f.r+255>>8)+f.r,p.bitmap.data[l+1]=(d.a*(d.g-f.g)-f.g+255>>8)+f.g,p.bitmap.data[l+2]=(d.a*(d.b-f.b)-f.b+255>>8)+f.b,p.bitmap.data[l+3]=this.constructor.limit255(f.a+d.a)}})),(0,s.isNodePattern)(l)&&l.call(this,null,this),this}}}},833:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shgTable=e.mulTable=void 0,e.mulTable=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1],e.shgTable=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18]},9912:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754),r=n(833);e.default=function(){return{blur:function(t,e){if("number"!=typeof t)return i.throwError.call(this,"r must be a number",e);if(t<1)return i.throwError.call(this,"r must be greater than 0",e);for(var n,s,o,a,c,l,h,u,p,d,f,m,g,_,y=this.bitmap.width-1,b=this.bitmap.height-1,v=t+1,w=r.mulTable[t],x=r.shgTable[t],E=[],S=[],k=[],T=[],C=[],O=[],I=2;I-- >0;){for(m=0,g=0,l=0;l<this.bitmap.height;l++){for(n=this.bitmap.data[g]*v,s=this.bitmap.data[g+1]*v,o=this.bitmap.data[g+2]*v,a=this.bitmap.data[g+3]*v,h=1;h<=t;h++)u=g+((h>y?y:h)<<2),n+=this.bitmap.data[u++],s+=this.bitmap.data[u++],o+=this.bitmap.data[u++],a+=this.bitmap.data[u];for(c=0;c<this.bitmap.width;c++)E[m]=n,S[m]=s,k[m]=o,T[m]=a,0===l&&(C[c]=((u=c+v)<y?u:y)<<2,O[c]=(u=c-t)>0?u<<2:0),p=g+C[c],d=g+O[c],n+=this.bitmap.data[p++]-this.bitmap.data[d++],s+=this.bitmap.data[p++]-this.bitmap.data[d++],o+=this.bitmap.data[p++]-this.bitmap.data[d++],a+=this.bitmap.data[p]-this.bitmap.data[d],m++;g+=this.bitmap.width<<2}for(c=0;c<this.bitmap.width;c++){for(n=E[f=c]*v,s=S[f]*v,o=k[f]*v,a=T[f]*v,h=1;h<=t;h++)n+=E[f+=h>b?0:this.bitmap.width],s+=S[f],o+=k[f],a+=T[f];for(m=c<<2,l=0;l<this.bitmap.height;l++)_=a*w>>>x,this.bitmap.data[m+3]=_,_>255&&(this.bitmap.data[m+3]=255),_>0?(_=255/_,this.bitmap.data[m]=(n*w>>>x)*_,this.bitmap.data[m+1]=(s*w>>>x)*_,this.bitmap.data[m+2]=(o*w>>>x)*_):(this.bitmap.data[m+2]=0,this.bitmap.data[m+1]=0,this.bitmap.data[m]=0),0===c&&(C[l]=((u=l+v)<b?u:b)*this.bitmap.width,O[l]=(u=l-t)>0?u*this.bitmap.width:0),p=c+C[l],d=c+O[l],n+=E[p]-E[d],s+=S[p]-S[d],o+=k[p]-k[d],a+=T[p]-T[d],m+=this.bitmap.width<<2}}return(0,i.isNodePattern)(e)&&e.call(this,null,this),this}}}},6923:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{circle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(e=t,t={});var n=t.radius||(this.bitmap.width>this.bitmap.height?this.bitmap.height:this.bitmap.width)/2,r="number"==typeof t.x?t.x:this.bitmap.width/2,s="number"==typeof t.y?t.y:this.bitmap.height/2;return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,i){var o=Math.sqrt(Math.pow(t-r,2)+Math.pow(e-s,2));n-o<=0?this.bitmap.data[i+3]=0:n-o<1&&(this.bitmap.data[i+3]=255*(n-o))})),(0,i.isNodePattern)(e)&&e.call(this,null,this),this}}}},9082:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(1132)),s=i(n(6535)),o=n(7754);function a(t,e,n,i){for(var r=[0,0,0],s=(e.length-1)/2,o=0;o<e.length;o+=1)for(var a=0;a<e[o].length;a+=1){var c=t.getPixelIndex(n+o-s,i+a-s);r[0]+=t.bitmap.data[c]*e[o][a],r[1]+=t.bitmap.data[c+1]*e[o][a],r[2]+=t.bitmap.data[c+2]*e[o][a]}return r}var c=function(t){return null!=t};function l(t){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){var i=parseInt(.2126*this.bitmap.data[n]+.7152*this.bitmap.data[n+1]+.0722*this.bitmap.data[n+2],10);this.bitmap.data[n]=i,this.bitmap.data[n+1]=i,this.bitmap.data[n+2]=i})),(0,o.isNodePattern)(t)&&t.call(this,null,this),this}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return{r:(e.r-t.r)*(n/100)+t.r,g:(e.g-t.g)*(n/100)+t.g,b:(e.b-t.b)*(n/100)+t.b}}function u(t,e){var n=this;return t&&Array.isArray(t)?(t=t.map((function(t){return"xor"!==t.apply&&"mix"!==t.apply||(t.params[0]=(0,s.default)(t.params[0]).toRgb()),t})),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,a,c){var l={r:n.bitmap.data[c],g:n.bitmap.data[c+1],b:n.bitmap.data[c+2]},u=function(t,e){return n.constructor.limit255(l[t]+e)};t.forEach((function(t){if("mix"===t.apply)l=h(l,t.params[0],t.params[1]);else if("tint"===t.apply)l=h(l,{r:255,g:255,b:255},t.params[0]);else if("shade"===t.apply)l=h(l,{r:0,g:0,b:0},t.params[0]);else if("xor"===t.apply)l={r:l.r^t.params[0].r,g:l.g^t.params[0].g,b:l.b^t.params[0].b};else if("red"===t.apply)l.r=u("r",t.params[0]);else if("green"===t.apply)l.g=u("g",t.params[0]);else if("blue"===t.apply)l.b=u("b",t.params[0]);else{var i;if("hue"===t.apply&&(t.apply="spin"),!(l=(0,s.default)(l))[t.apply])return o.throwError.call(n,"action "+t.apply+" not supported",e);l=(i=l)[t.apply].apply(i,(0,r.default)(t.params)).toRgb()}})),n.bitmap.data[c]=l.r,n.bitmap.data[c+1]=l.g,n.bitmap.data[c+2]=l.b})),(0,o.isNodePattern)(e)&&e.call(this,null,this),this):o.throwError.call(this,"actions must be an array",e)}e.default=function(){return{brightness:function(t,e){return"number"!=typeof t?o.throwError.call(this,"val must be numbers",e):t<-1||t>1?o.throwError.call(this,"val must be a number between -1 and +1",e):(this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(e,n,i){t<0?(this.bitmap.data[i]=this.bitmap.data[i]*(1+t),this.bitmap.data[i+1]=this.bitmap.data[i+1]*(1+t),this.bitmap.data[i+2]=this.bitmap.data[i+2]*(1+t)):(this.bitmap.data[i]=this.bitmap.data[i]+(255-this.bitmap.data[i])*t,this.bitmap.data[i+1]=this.bitmap.data[i+1]+(255-this.bitmap.data[i+1])*t,this.bitmap.data[i+2]=this.bitmap.data[i+2]+(255-this.bitmap.data[i+2])*t)})),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},contrast:function(t,e){if("number"!=typeof t)return o.throwError.call(this,"val must be numbers",e);if(t<-1||t>1)return o.throwError.call(this,"val must be a number between -1 and +1",e);var n=(t+1)/(1-t);function i(t){return(t=Math.floor(n*(t-127)+127))<0?0:t>255?255:t}return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){this.bitmap.data[n]=i(this.bitmap.data[n]),this.bitmap.data[n+1]=i(this.bitmap.data[n+1]),this.bitmap.data[n+2]=i(this.bitmap.data[n+2])})),(0,o.isNodePattern)(e)&&e.call(this,null,this),this},posterize:function(t,e){return"number"!=typeof t?o.throwError.call(this,"n must be numbers",e):(t<2&&(t=2),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(e,n,i){this.bitmap.data[i]=Math.floor(this.bitmap.data[i]/255*(t-1))/(t-1)*255,this.bitmap.data[i+1]=Math.floor(this.bitmap.data[i+1]/255*(t-1))/(t-1)*255,this.bitmap.data[i+2]=Math.floor(this.bitmap.data[i+2]/255*(t-1))/(t-1)*255})),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},greyscale:l,grayscale:l,opacity:function(t,e){return"number"!=typeof t?o.throwError.call(this,"f must be a number",e):t<0||t>1?o.throwError.call(this,"f must be a number from 0 to 1",e):(this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(e,n,i){var r=this.bitmap.data[i+3]*t;this.bitmap.data[i+3]=r})),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},sepia:function(t){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){var i=this.bitmap.data[n],r=this.bitmap.data[n+1],s=this.bitmap.data[n+2];s=.272*(i=.393*i+.769*r+.189*s)+.534*(r=.349*i+.686*r+.168*s)+.131*s,this.bitmap.data[n]=i<255?i:255,this.bitmap.data[n+1]=r<255?r:255,this.bitmap.data[n+2]=s<255?s:255})),(0,o.isNodePattern)(t)&&t.call(this,null,this),this},fade:function(t,e){return"number"!=typeof t?o.throwError.call(this,"f must be a number",e):t<0||t>1?o.throwError.call(this,"f must be a number from 0 to 1",e):(this.opacity(1-t),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},convolution:function(t,e,n){"function"==typeof e&&void 0===n&&(n=e,e=null),e||(e=this.constructor.EDGE_EXTEND);var i,r,s,a,c,l,h,u,p,d,f=Buffer.from(this.bitmap.data),m=t.length,g=t[0].length,_=Math.floor(m/2),y=Math.floor(g/2),b=-_,v=-y;return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(n,o,m){a=0,s=0,r=0;for(var g=b;g<=_;g++)for(var w=v;w<=y;w++)u=n+w,p=o+g,i=t[g+_][w+y],-1===(d=this.getPixelIndex(u,p,e))?(h=0,l=0,c=0):(c=this.bitmap.data[d+0],l=this.bitmap.data[d+1],h=this.bitmap.data[d+2]),r+=i*c,s+=i*l,a+=i*h;r<0&&(r=0),s<0&&(s=0),a<0&&(a=0),r>255&&(r=255),s>255&&(s=255),a>255&&(a=255),f[m+0]=r,f[m+1]=s,f[m+2]=a})),this.bitmap.data=f,(0,o.isNodePattern)(n)&&n.call(this,null,this),this},opaque:function(t){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){this.bitmap.data[n+3]=255})),(0,o.isNodePattern)(t)&&t.call(this,null,this),this},pixelate:function(t,e,n,i,r,s){if("function"==typeof e)s=e,r=null,i=null,n=null,e=null;else{if("number"!=typeof t)return o.throwError.call(this,"size must be a number",s);if(c(e)&&"number"!=typeof e)return o.throwError.call(this,"x must be a number",s);if(c(n)&&"number"!=typeof n)return o.throwError.call(this,"y must be a number",s);if(c(i)&&"number"!=typeof i)return o.throwError.call(this,"w must be a number",s);if(c(r)&&"number"!=typeof r)return o.throwError.call(this,"h must be a number",s)}var l=[[1/16,2/16,1/16],[2/16,.25,2/16],[1/16,2/16,1/16]];e=e||0,n=n||0,i=c(i)?i:this.bitmap.width-e,r=c(r)?r:this.bitmap.height-n;var h=this.cloneQuiet();return this.scanQuiet(e,n,i,r,(function(e,n,i){e=t*Math.floor(e/t),n=t*Math.floor(n/t);var r=a(h,l,e,n);this.bitmap.data[i]=r[0],this.bitmap.data[i+1]=r[1],this.bitmap.data[i+2]=r[2]})),(0,o.isNodePattern)(s)&&s.call(this,null,this),this},convolute:function(t,e,n,i,r,s){if(!Array.isArray(t))return o.throwError.call(this,"the kernel must be an array",s);if("function"==typeof e)s=e,e=null,n=null,i=null,r=null;else{if(c(e)&&"number"!=typeof e)return o.throwError.call(this,"x must be a number",s);if(c(n)&&"number"!=typeof n)return o.throwError.call(this,"y must be a number",s);if(c(i)&&"number"!=typeof i)return o.throwError.call(this,"w must be a number",s);if(c(r)&&"number"!=typeof r)return o.throwError.call(this,"h must be a number",s)}var l=(t.length-1)/2;e=c(e)?e:l,n=c(n)?n:l,i=c(i)?i:this.bitmap.width-e,r=c(r)?r:this.bitmap.height-n;var h=this.cloneQuiet();return this.scanQuiet(e,n,i,r,(function(e,n,i){var r=a(h,t,e,n);this.bitmap.data[i]=this.constructor.limit255(r[0]),this.bitmap.data[i+1]=this.constructor.limit255(r[1]),this.bitmap.data[i+2]=this.constructor.limit255(r[2])})),(0,o.isNodePattern)(s)&&s.call(this,null,this),this},color:u,colour:u}}},2447:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{contain:function(t,e,n,r,s){if("number"!=typeof t||"number"!=typeof e)return i.throwError.call(this,"w and h must be numbers",s);"string"==typeof n&&("function"==typeof r&&void 0===s&&(s=r),r=n,n=null),"function"==typeof n&&(void 0===s&&(s=n),r=null,n=null),"function"==typeof r&&void 0===s&&(s=r,r=null);var o=7&(n=n||this.constructor.HORIZONTAL_ALIGN_CENTER|this.constructor.VERTICAL_ALIGN_MIDDLE),a=n>>3;if((0===o||o&o-1)&&(0===a||a&a-1))return i.throwError.call(this,"only use one flag per alignment direction",s);var c=o>>1,l=a>>1,h=t/e>this.bitmap.width/this.bitmap.height?e/this.bitmap.height:t/this.bitmap.width,u=this.cloneQuiet().scale(h,r);return this.resize(t,e,r),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){this.bitmap.data.writeUInt32BE(this._background,n)})),this.blit(u,(this.bitmap.width-u.bitmap.width)/2*c,(this.bitmap.height-u.bitmap.height)/2*l),(0,i.isNodePattern)(s)&&s.call(this,null,this),this}}}},8966:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{cover:function(t,e,n,r,s){if("number"!=typeof t||"number"!=typeof e)return i.throwError.call(this,"w and h must be numbers",s);n&&"function"==typeof n&&void 0===s?(s=n,n=null,r=null):"function"==typeof r&&void 0===s&&(s=r,r=null);var o=7&(n=n||this.constructor.HORIZONTAL_ALIGN_CENTER|this.constructor.VERTICAL_ALIGN_MIDDLE),a=n>>3;if((0===o||o&o-1)&&(0===a||a&a-1))return i.throwError.call(this,"only use one flag per alignment direction",s);var c=o>>1,l=a>>1,h=t/e>this.bitmap.width/this.bitmap.height?t/this.bitmap.width:e/this.bitmap.height;return this.scale(h,r),this.crop((this.bitmap.width-t)/2*c,(this.bitmap.height-e)/2*l,t,e),(0,i.isNodePattern)(s)&&s.call(this,null,this),this}}}},7277:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t("crop",(function(t,e,n,i,r){if("number"!=typeof t||"number"!=typeof e)return s.throwError.call(this,"x and y must be numbers",r);if("number"!=typeof n||"number"!=typeof i)return s.throwError.call(this,"w and h must be numbers",r);if(t=Math.round(t),e=Math.round(e),n=Math.round(n),i=Math.round(i),0===t&&n===this.bitmap.width){var o=n*e+t<<2,a=o+i*n<<2;this.bitmap.data=this.bitmap.data.slice(o,a)}else{var c=Buffer.allocUnsafe(n*i*4),l=0;this.scanQuiet(t,e,n,i,(function(t,e,n){var i=this.bitmap.data.readUInt32BE(n,!0);c.writeUInt32BE(i,l,!0),l+=4})),this.bitmap.data=c}return this.bitmap.width=n,this.bitmap.height=i,(0,s.isNodePattern)(r)&&r.call(this,null,this),this})),{class:{autocrop:function(){for(var t,e=this.bitmap.width,n=this.bitmap.height,i=0,o=2e-4,a=!0,c=!1,l={north:!1,south:!1,east:!1,west:!1},h=arguments.length,u=new Array(h),p=0;p<h;p++)u[p]=arguments[p];for(var d=0,f=u.length;d<f;d++)if("number"==typeof u[d]&&(o=u[d]),"boolean"==typeof u[d]&&(a=u[d]),"function"==typeof u[d]&&(t=u[d]),"object"===(0,r.default)(u[d])){var m=u[d];void 0!==m.tolerance&&(o=m.tolerance),void 0!==m.cropOnlyFrames&&(a=m.cropOnlyFrames),void 0!==m.cropSymmetric&&(c=m.cropSymmetric),void 0!==m.leaveBorder&&(i=m.leaveBorder),void 0!==m.ignoreSides&&(l=m.ignoreSides)}var g=this.getPixelColor(0,0),_=this.constructor.intToRGBA(g),y=0,b=0,v=0,w=0;if(g=this.getPixelColor(0,0),!l.north)t:for(var x=0;x<n-1;x++){for(var E=0;E<e;E++){var S=this.getPixelColor(E,x),k=this.constructor.intToRGBA(S);if(this.constructor.colorDiff(_,k)>o)break t}y++}if(g=this.getPixelColor(e,0),!l.east)t:for(var T=0;T<e-1;T++){for(var C=0+y;C<n;C++){var O=this.getPixelColor(T,C),I=this.constructor.intToRGBA(O);if(this.constructor.colorDiff(_,I)>o)break t}b++}if(g=this.getPixelColor(0,n),!l.south)t:for(var A=n-1;A>=y+1;A--){for(var P=e-b-1;P>=0;P--){var N=this.getPixelColor(P,A),M=this.constructor.intToRGBA(N);if(this.constructor.colorDiff(_,M)>o)break t}v++}if(g=this.getPixelColor(e,n),!l.west)t:for(var D=e-1;D>=0+b+1;D--){for(var R=n-1;R>=0+y;R--){var B=this.getPixelColor(D,R),F=this.constructor.intToRGBA(B);if(this.constructor.colorDiff(_,F)>o)break t}w++}if(w-=i,b-=i,y-=i,v-=i,c){var L=Math.min(b,w),U=Math.min(y,v);w=L,b=L,y=U,v=U}var j=e-((w=w>=0?w:0)+(b=b>=0?b:0)),z=n-((v=v>=0?v:0)+(y=y>=0?y:0));return(a?0!==b&&0!==y&&0!==w&&0!==v:0!==b||0!==y||0!==w||0!==v)&&this.crop(b,y,j,z),(0,s.isNodePattern)(t)&&t.call(this,null,this),this}}}};var r=i(n(3738)),s=n(7754)},8246:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3738)),s=n(7754);e.default=function(){return{displace:function(t,e,n){if("object"!==(0,r.default)(t)||t.constructor!==this.constructor)return s.throwError.call(this,"The source must be a Jimp image",n);if("number"!=typeof e)return s.throwError.call(this,"factor must be a number",n);var i=this.cloneQuiet();return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(n,r,s){var o=t.bitmap.data[s]/256*e;o=Math.round(o);var a=this.getPixelIndex(n+o,r);this.bitmap.data[a]=i.bitmap.data[s],this.bitmap.data[a+1]=i.bitmap.data[s+1],this.bitmap.data[a+2]=i.bitmap.data[s+2]})),(0,s.isNodePattern)(n)&&n.call(this,null,this),this}}}},4975:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);function r(t){var e=[1,9,3,11,13,5,15,7,4,12,2,10,16,8,14,6];return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,n,i){var r=e[((3&n)<<2)+t%4];this.bitmap.data[i]=Math.min(this.bitmap.data[i]+r,255),this.bitmap.data[i+1]=Math.min(this.bitmap.data[i+1]+r,255),this.bitmap.data[i+2]=Math.min(this.bitmap.data[i+2]+r,255)})),(0,i.isNodePattern)(t)&&t.call(this,null,this),this}e.default=function(){return{dither565:r,dither16:r}}},6790:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{fisheye:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:2.5},n=arguments.length>1?arguments[1]:void 0;"function"==typeof e&&(n=e,e={r:2.5});var r=this.cloneQuiet(),s=r.bitmap,o=s.width,a=s.height;return r.scanQuiet(0,0,o,a,(function(n,i){var s=n/o,c=i/a,l=Math.sqrt(Math.pow(s-.5,2)+Math.pow(c-.5,2)),h=2*Math.pow(l,e.r),u=(s-.5)/l,p=(c-.5)/l,d=Math.round((h*u+.5)*o),f=Math.round((h*p+.5)*a),m=r.getPixelColor(d,f);t.setPixelColor(m,n,i)})),this.setPixelColor(r.getPixelColor(o/2,a/2),o/2,a/2),(0,i.isNodePattern)(n)&&n.call(this,null,this),this}}}},902:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);function r(t,e,n){if("boolean"!=typeof t||"boolean"!=typeof e)return i.throwError.call(this,"horizontal and vertical must be Booleans",n);var r=Buffer.alloc(this.bitmap.data.length);return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(n,i,s){var o=t?this.bitmap.width-1-n:n,a=e?this.bitmap.height-1-i:i,c=this.bitmap.width*a+o<<2,l=this.bitmap.data.readUInt32BE(s);r.writeUInt32BE(l,c)})),this.bitmap.data=Buffer.from(r),(0,i.isNodePattern)(n)&&n.call(this,null,this),this}e.default=function(){return{flip:r,mirror:r}}},1742:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{gaussian:function(t,e){if("number"!=typeof t)return i.throwError.call(this,"r must be a number",e);if(t<1)return i.throwError.call(this,"r must be greater than 0",e);for(var n=Math.ceil(2.57*t),r=2*n+1,s=t*t*2,o=s*Math.PI,a=[],c=0;c<r;c++){a[c]=[];for(var l=0;l<r;l++){var h=Math.pow(l-n,2)+Math.pow(c-n,2);a[c][l]=Math.exp(-h/s)/o}}for(var u=0;u<this.bitmap.height;u++)for(var p=0;p<this.bitmap.width;p++)for(var d=0,f=0,m=0,g=0,_=0,y=0;y<r;y++){for(var b=0;b<r;b++){var v=Math.min(this.bitmap.width-1,Math.max(0,b+p-n)),w=Math.min(this.bitmap.height-1,Math.max(0,y+u-n)),x=a[y][b],E=w*this.bitmap.width+v<<2;d+=this.bitmap.data[E]*x,f+=this.bitmap.data[E+1]*x,m+=this.bitmap.data[E+2]*x,g+=this.bitmap.data[E+3]*x,_+=x}var S=u*this.bitmap.width+p<<2;this.bitmap.data[S]=Math.round(d/_),this.bitmap.data[S+1]=Math.round(f/_),this.bitmap.data[S+2]=Math.round(m/_),this.bitmap.data[S+3]=Math.round(g/_)}return(0,i.isNodePattern)(e)&&e.call(this,null,this),this}}}},5035:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{invert:function(t){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){this.bitmap.data[n]=255-this.bitmap.data[n],this.bitmap.data[n+1]=255-this.bitmap.data[n+1],this.bitmap.data[n+2]=255-this.bitmap.data[n+2]})),(0,i.isNodePattern)(t)&&t.call(this,null,this),this}}}},7811:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{mask:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!(t instanceof this.constructor))return i.throwError.call(this,"The source must be a Jimp image",r);if("number"!=typeof e||"number"!=typeof n)return i.throwError.call(this,"x and y must be numbers",r);e=Math.round(e),n=Math.round(n);var s=this.bitmap.width,o=this.bitmap.height,a=this;return t.scanQuiet(0,0,t.bitmap.width,t.bitmap.height,(function(t,i,r){var c=e+t,l=n+i;if(c>=0&&l>=0&&c<s&&l<o){var h=a.getPixelIndex(c,l),u=this.bitmap.data,p=(u[r+0]+u[r+1]+u[r+2])/3;a.bitmap.data[h+3]*=p/255}})),(0,i.isNodePattern)(r)&&r.call(this,null,this),this}}}},5326:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);function r(){var t={r:new Array(256).fill(0),g:new Array(256).fill(0),b:new Array(256).fill(0)};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(e,n,i){t.r[this.bitmap.data[i+0]]++,t.g[this.bitmap.data[i+1]]++,t.b[this.bitmap.data[i+2]]++})),t}var s=function(t,e,n){return 255*(t-e)/(n-e)},o=function(t){return[t.findIndex((function(t){return t>0})),255-t.slice().reverse().findIndex((function(t){return t>0}))]};e.default=function(){return{normalize:function(t){var e=r.call(this),n={r:o(e.r),g:o(e.g),b:o(e.b)};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,i){var r=this.bitmap.data[i+0],o=this.bitmap.data[i+1],a=this.bitmap.data[i+2];this.bitmap.data[i+0]=s(r,n.r[0],n.r[1]),this.bitmap.data[i+1]=s(o,n.g[0],n.g[1]),this.bitmap.data[i+2]=s(a,n.b[0],n.b[1])})),(0,i.isNodePattern)(t)&&t.call(this,null,this),this}}}},658:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3738)),s=i(n(1132)),o=i(n(6928)),a=i(n(6176)),c=n(7754),l=n(2080);function h(t,e,n,i,r){if(r.width>0&&r.height>0){var s=e.pages[r.page];t.blit(s,n+r.xoffset,i+r.yoffset,r.x,r.y,r.width,r.height)}return t}function u(t,e,n,i,r){for(var s=0;s<i.length;s++){var o;o=t.chars[i[s]]?i[s]:/\s/.test(i[s])?"":"?";var a=t.chars[o]||{},c=t.kernings[o];h(this,t,e,n,a||{}),e+=(c&&c[i[s+1]]?c[i[s+1]]:0)+(a.xadvance||r)}}var p=process.env.DIRNAME||"".concat(__dirname,"/../");e.default=function(){return{constants:{measureText:l.measureText,measureTextHeight:l.measureTextHeight,FONT_SANS_8_BLACK:o.default.join(p,"fonts/open-sans/open-sans-8-black/open-sans-8-black.fnt"),FONT_SANS_10_BLACK:o.default.join(p,"fonts/open-sans/open-sans-10-black/open-sans-10-black.fnt"),FONT_SANS_12_BLACK:o.default.join(p,"fonts/open-sans/open-sans-12-black/open-sans-12-black.fnt"),FONT_SANS_14_BLACK:o.default.join(p,"fonts/open-sans/open-sans-14-black/open-sans-14-black.fnt"),FONT_SANS_16_BLACK:o.default.join(p,"fonts/open-sans/open-sans-16-black/open-sans-16-black.fnt"),FONT_SANS_32_BLACK:o.default.join(p,"fonts/open-sans/open-sans-32-black/open-sans-32-black.fnt"),FONT_SANS_64_BLACK:o.default.join(p,"fonts/open-sans/open-sans-64-black/open-sans-64-black.fnt"),FONT_SANS_128_BLACK:o.default.join(p,"fonts/open-sans/open-sans-128-black/open-sans-128-black.fnt"),FONT_SANS_8_WHITE:o.default.join(p,"fonts/open-sans/open-sans-8-white/open-sans-8-white.fnt"),FONT_SANS_16_WHITE:o.default.join(p,"fonts/open-sans/open-sans-16-white/open-sans-16-white.fnt"),FONT_SANS_32_WHITE:o.default.join(p,"fonts/open-sans/open-sans-32-white/open-sans-32-white.fnt"),FONT_SANS_64_WHITE:o.default.join(p,"fonts/open-sans/open-sans-64-white/open-sans-64-white.fnt"),FONT_SANS_128_WHITE:o.default.join(p,"fonts/open-sans/open-sans-128-white/open-sans-128-white.fnt"),loadFont:function(t,e){var n=this;return"string"!=typeof t?c.throwError.call(this,"file must be a string",e):new Promise((function(i,r){e=e||function(t,e){t?r(t):i(e)},(0,a.default)(t,(function(i,r){var s={},a={};if(i)return c.throwError.call(n,i,e);for(var l=0;l<r.chars.length;l++)s[String.fromCharCode(r.chars[l].id)]=r.chars[l];for(var h=0;h<r.kernings.length;h++){var u=String.fromCharCode(r.kernings[h].first);a[u]=a[u]||{},a[u][String.fromCharCode(r.kernings[h].second)]=r.kernings[h].amount}(function(t,e,n){var i=n.map((function(n){return t.read(e+"/"+n)}));return Promise.all(i)})(n,o.default.dirname(t),r.pages).then((function(t){e(null,{chars:s,kernings:a,pages:t,common:r.common,info:r.info})}))}))}))}},class:{print:function(t,e,n,i,o,a,h){var p,d,f=this;if("function"==typeof o&&void 0===h&&(h=o,o=1/0),void 0===o&&(o=1/0),"function"==typeof a&&void 0===h&&(h=a,a=1/0),void 0===a&&(a=1/0),"object"!==(0,r.default)(t))return c.throwError.call(this,"font must be a Jimp loadFont",h);if("number"!=typeof e||"number"!=typeof n||"number"!=typeof o)return c.throwError.call(this,"x, y and maxWidth must be numbers",h);if("number"!=typeof o)return c.throwError.call(this,"maxWidth must be a number",h);if("number"!=typeof a)return c.throwError.call(this,"maxHeight must be a number",h);"object"===(0,r.default)(i)&&null!==i.text&&void 0!==i.text?(p=i.alignmentX||this.constructor.HORIZONTAL_ALIGN_LEFT,d=i.alignmentY||this.constructor.VERTICAL_ALIGN_TOP,i=i.text):(p=this.constructor.HORIZONTAL_ALIGN_LEFT,d=this.constructor.VERTICAL_ALIGN_TOP,i=i.toString()),a!==1/0&&d===this.constructor.VERTICAL_ALIGN_BOTTOM?n+=a-(0,l.measureTextHeight)(t,i,o):a!==1/0&&d===this.constructor.VERTICAL_ALIGN_MIDDLE&&(n+=a/2-(0,l.measureTextHeight)(t,i,o)/2);var m=Object.entries(t.chars)[0][1].xadvance,g=function(t,e,n){var i=e.split(" "),r=[],o=[],a=0;return i.forEach((function(e){var i=[].concat((0,s.default)(o),[e]).join(" "),c=(0,l.measureText)(t,i);c<=n?(c>a&&(a=c),o.push(e)):(r.push(o),o=[e])})),r.push(o),{lines:r,longestLine:a}}(t,i,o),_=g.lines,y=g.longestLine;return _.forEach((function(i){var r=i.join(" "),s=function(t,e,n,i,r){return r===t.HORIZONTAL_ALIGN_LEFT?0:r===t.HORIZONTAL_ALIGN_CENTER?(i-(0,l.measureText)(e,n))/2:i-(0,l.measureText)(e,n)}(f.constructor,t,r,o,p);u.call(f,t,e+s,n,r,m),n+=t.common.lineHeight})),(0,c.isNodePattern)(h)&&h.call(this,null,this,{x:e+y,y:n}),this}}}}},2080:(t,e)=>{"use strict";function n(t,e){for(var n=0,i=0;i<e.length;i++)if(t.chars[e[i]]){var r=t.kernings[e[i]]&&t.kernings[e[i]][e[i+1]]?t.kernings[e[i]][e[i+1]]:0;n+=(t.chars[e[i]].xadvance||0)+r}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.measureText=n,e.measureTextHeight=function(t,e,i){for(var r=e.split(" "),s="",o=t.common.lineHeight,a=0;a<r.length;a++){var c=s+r[a]+" ";n(t,c)>i&&a>0?(o+=t.common.lineHeight,s=r[a]+" "):s=c}return o}},9831:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(7754),s=i(n(9197)),o=i(n(7087));e.default=function(){return{constants:{RESIZE_NEAREST_NEIGHBOR:"nearestNeighbor",RESIZE_BILINEAR:"bilinearInterpolation",RESIZE_BICUBIC:"bicubicInterpolation",RESIZE_HERMITE:"hermiteInterpolation",RESIZE_BEZIER:"bezierInterpolation"},class:{resize:function(t,e,n,i){if("number"!=typeof t||"number"!=typeof e)return r.throwError.call(this,"w and h must be numbers",i);if("function"==typeof n&&void 0===i&&(i=n,n=null),t===this.constructor.AUTO&&e===this.constructor.AUTO)return r.throwError.call(this,"w and h cannot both be set to auto",i);if(t===this.constructor.AUTO&&(t=this.bitmap.width*(e/this.bitmap.height)),e===this.constructor.AUTO&&(e=this.bitmap.height*(t/this.bitmap.width)),t<0||e<0)return r.throwError.call(this,"w and h must be positive numbers",i);if(t=Math.round(t),e=Math.round(e),"function"==typeof o.default[n]){var a={data:Buffer.alloc(t*e*4),width:t,height:e};o.default[n](this.bitmap,a),this.bitmap=a}else{var c=this;new s.default(this.bitmap.width,this.bitmap.height,t,e,!0,!0,(function(n){c.bitmap.data=Buffer.from(n),c.bitmap.width=t,c.bitmap.height=e})).resize(this.bitmap.data)}return(0,r.isNodePattern)(i)&&i.call(this,null,this),this}}}}},9197:t=>{"use strict";function e(t,e,n,i,r,s,o){this.widthOriginal=Math.abs(Math.floor(t)||0),this.heightOriginal=Math.abs(Math.floor(e)||0),this.targetWidth=Math.abs(Math.floor(n)||0),this.targetHeight=Math.abs(Math.floor(i)||0),this.colorChannels=r?4:3,this.interpolationPass=Boolean(s),this.resizeCallback="function"==typeof o?o:function(){},this.targetWidthMultipliedByChannels=this.targetWidth*this.colorChannels,this.originalWidthMultipliedByChannels=this.widthOriginal*this.colorChannels,this.originalHeightMultipliedByChannels=this.heightOriginal*this.colorChannels,this.widthPassResultSize=this.targetWidthMultipliedByChannels*this.heightOriginal,this.finalResultSize=this.targetWidthMultipliedByChannels*this.targetHeight,this.initialize()}e.prototype.initialize=function(){if(!(this.widthOriginal>0&&this.heightOriginal>0&&this.targetWidth>0&&this.targetHeight>0))throw new Error("Invalid settings specified for the resizer.");this.configurePasses()},e.prototype.configurePasses=function(){this.widthOriginal===this.targetWidth?this.resizeWidth=this.bypassResizer:(this.ratioWeightWidthPass=this.widthOriginal/this.targetWidth,this.ratioWeightWidthPass<1&&this.interpolationPass?(this.initializeFirstPassBuffers(!0),this.resizeWidth=4===this.colorChannels?this.resizeWidthInterpolatedRGBA:this.resizeWidthInterpolatedRGB):(this.initializeFirstPassBuffers(!1),this.resizeWidth=4===this.colorChannels?this.resizeWidthRGBA:this.resizeWidthRGB)),this.heightOriginal===this.targetHeight?this.resizeHeight=this.bypassResizer:(this.ratioWeightHeightPass=this.heightOriginal/this.targetHeight,this.ratioWeightHeightPass<1&&this.interpolationPass?(this.initializeSecondPassBuffers(!0),this.resizeHeight=this.resizeHeightInterpolated):(this.initializeSecondPassBuffers(!1),this.resizeHeight=4===this.colorChannels?this.resizeHeightRGBA:this.resizeHeightRGB))},e.prototype._resizeWidthInterpolatedRGBChannels=function(t,e){var n,i,r=e?4:3,s=this.ratioWeightWidthPass,o=this.widthBuffer,a=0,c=0,l=0,h=0,u=0;for(n=0;a<1/3;n+=r,a+=s)for(c=n,l=0;c<this.widthPassResultSize;l+=this.originalWidthMultipliedByChannels,c+=this.targetWidthMultipliedByChannels)o[c]=t[l],o[c+1]=t[l+1],o[c+2]=t[l+2],e&&(o[c+3]=t[l+3]);for(a-=1/3,i=this.widthOriginal-1;a<i;n+=r,a+=s)for(h=1-(u=a%1),c=n,l=Math.floor(a)*r;c<this.widthPassResultSize;l+=this.originalWidthMultipliedByChannels,c+=this.targetWidthMultipliedByChannels)o[c+0]=t[l+0]*h+t[l+r+0]*u,o[c+1]=t[l+1]*h+t[l+r+1]*u,o[c+2]=t[l+2]*h+t[l+r+2]*u,e&&(o[c+3]=t[l+3]*h+t[l+r+3]*u);for(i=this.originalWidthMultipliedByChannels-r;n<this.targetWidthMultipliedByChannels;n+=r)for(c=n,l=i;c<this.widthPassResultSize;l+=this.originalWidthMultipliedByChannels,c+=this.targetWidthMultipliedByChannels)o[c]=t[l],o[c+1]=t[l+1],o[c+2]=t[l+2],e&&(o[c+3]=t[l+3]);return o},e.prototype._resizeWidthRGBChannels=function(t,e){var n=e?4:3,i=this.ratioWeightWidthPass,r=1/i,s=this.originalWidthMultipliedByChannels-n+1,o=this.targetWidthMultipliedByChannels-n+1,a=this.outputWidthWorkBench,c=this.widthBuffer,l=this.outputWidthWorkBenchOpaquePixelsCount,h=0,u=0,p=0,d=0,f=0,m=0,g=0,_=1,y=0,b=0,v=0,w=0;do{for(f=0;f<this.originalHeightMultipliedByChannels;)a[f++]=0,a[f++]=0,a[f++]=0,e&&(a[f++]=0,l[f/n-1]=0);h=i;do{for(u=1+p-d,_=Math.min(h,u),f=0,m=p;f<this.originalHeightMultipliedByChannels;m+=s)y=t[m],b=t[++m],v=t[++m],w=e?t[++m]:255,a[f++]+=(w?y:0)*_,a[f++]+=(w?b:0)*_,a[f++]+=(w?v:0)*_,e&&(a[f++]+=w*_,l[f/n-1]+=w?_:0);if(!(h>=u)){d+=h;break}d=p+=n,h-=u}while(h>0&&p<this.originalWidthMultipliedByChannels);for(f=0,m=g;f<this.originalHeightMultipliedByChannels;m+=o)h=e?l[f/n]:1,_=e?h?1/h:0:r,c[m]=a[f++]*_,c[++m]=a[f++]*_,c[++m]=a[f++]*_,e&&(c[++m]=a[f++]*r);g+=n}while(g<this.targetWidthMultipliedByChannels);return c},e.prototype._resizeHeightRGBChannels=function(t,e){var n=this.ratioWeightHeightPass,i=1/n,r=this.outputHeightWorkBench,s=this.heightBuffer,o=this.outputHeightWorkBenchOpaquePixelsCount,a=0,c=0,l=0,h=0,u=0,p=0,d=0,f=1,m=0,g=0,_=0,y=0;do{for(u=0;u<this.targetWidthMultipliedByChannels;)r[u++]=0,r[u++]=0,r[u++]=0,e&&(r[u++]=0,o[u/4-1]=0);a=n;do{for(c=1+l-h,f=Math.min(a,c),d=l,u=0;u<this.targetWidthMultipliedByChannels;)m=t[d++],g=t[d++],_=t[d++],y=e?t[d++]:255,r[u++]+=(y?m:0)*f,r[u++]+=(y?g:0)*f,r[u++]+=(y?_:0)*f,e&&(r[u++]+=y*f,o[u/4-1]+=y?f:0);if(!(a>=c)){h+=a;break}h=l=d,a-=c}while(a>0&&l<this.widthPassResultSize);for(u=0;u<this.targetWidthMultipliedByChannels;)a=e?o[u/4]:1,f=e?a?1/a:0:i,s[p++]=Math.round(r[u++]*f),s[p++]=Math.round(r[u++]*f),s[p++]=Math.round(r[u++]*f),e&&(s[p++]=Math.round(r[u++]*i))}while(p<this.finalResultSize);return s},e.prototype.resizeWidthInterpolatedRGB=function(t){return this._resizeWidthInterpolatedRGBChannels(t,!1)},e.prototype.resizeWidthInterpolatedRGBA=function(t){return this._resizeWidthInterpolatedRGBChannels(t,!0)},e.prototype.resizeWidthRGB=function(t){return this._resizeWidthRGBChannels(t,!1)},e.prototype.resizeWidthRGBA=function(t){return this._resizeWidthRGBChannels(t,!0)},e.prototype.resizeHeightInterpolated=function(t){for(var e,n=this.ratioWeightHeightPass,i=this.heightBuffer,r=0,s=0,o=0,a=0,c=0,l=0,h=0;r<1/3;r+=n)for(o=0;o<this.targetWidthMultipliedByChannels;)i[s++]=Math.round(t[o++]);for(r-=1/3,e=this.heightOriginal-1;r<e;r+=n)for(l=1-(h=r%1),c=(a=Math.floor(r)*this.targetWidthMultipliedByChannels)+this.targetWidthMultipliedByChannels,o=0;o<this.targetWidthMultipliedByChannels;++o)i[s++]=Math.round(t[a++]*l+t[c++]*h);for(;s<this.finalResultSize;)for(o=0,a=e*this.targetWidthMultipliedByChannels;o<this.targetWidthMultipliedByChannels;++o)i[s++]=Math.round(t[a++]);return i},e.prototype.resizeHeightRGB=function(t){return this._resizeHeightRGBChannels(t,!1)},e.prototype.resizeHeightRGBA=function(t){return this._resizeHeightRGBChannels(t,!0)},e.prototype.resize=function(t){this.resizeCallback(this.resizeHeight(this.resizeWidth(t)))},e.prototype.bypassResizer=function(t){return t},e.prototype.initializeFirstPassBuffers=function(t){this.widthBuffer=this.generateFloatBuffer(this.widthPassResultSize),t||(this.outputWidthWorkBench=this.generateFloatBuffer(this.originalHeightMultipliedByChannels),this.colorChannels>3&&(this.outputWidthWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.heightOriginal)))},e.prototype.initializeSecondPassBuffers=function(t){this.heightBuffer=this.generateUint8Buffer(this.finalResultSize),t||(this.outputHeightWorkBench=this.generateFloatBuffer(this.targetWidthMultipliedByChannels),this.colorChannels>3&&(this.outputHeightWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.targetWidth)))},e.prototype.generateFloatBuffer=function(t){try{return new Float32Array(t)}catch(t){return[]}},e.prototype.generateFloat64Buffer=function(t){try{return new Float64Array(t)}catch(t){return[]}},e.prototype.generateUint8Buffer=function(t){try{return new Uint8Array(t)}catch(t){return[]}},t.exports=e},7087:t=>{"use strict";t.exports={nearestNeighbor:function(t,e){for(var n=t.width,i=t.height,r=e.width,s=e.height,o=t.data,a=e.data,c=0;c<s;c++)for(var l=0;l<r;l++){var h=4*(c*r+l),u=4*(Math.floor(c*i/s)*n+Math.floor(l*n/r));a[h++]=o[u++],a[h++]=o[u++],a[h++]=o[u++],a[h++]=o[u++]}},bilinearInterpolation:function(t,e){for(var n=t.width,i=t.height,r=e.width,s=e.height,o=t.data,a=e.data,c=function(t,e,n,i,r){return e===i?n:Math.round((t-e)*r+(i-t)*n)},l=function(t,e,i,r,s,l,h,u){var p=4*(h*n+r)+e,d=4*(h*n+s)+e,f=c(i,r,o[p],s,o[d]);if(u===h)a[t+e]=f;else{d=4*(u*n+s)+e;var m=c(i,r,o[p=4*(u*n+r)+e],s,o[d]);a[t+e]=c(l,h,f,u,m)}},h=0;h<s;h++)for(var u=0;u<r;u++){var p=4*(h*r+u),d=u*n/r,f=Math.floor(d),m=Math.min(Math.ceil(d),n-1),g=h*i/s,_=Math.floor(g),y=Math.min(Math.ceil(g),i-1);l(p,0,d,f,m,g,_,y),l(p,1,d,f,m,g,_,y),l(p,2,d,f,m,g,_,y),l(p,3,d,f,m,g,_,y)}},_interpolate2D:function(t,e,n,i){for(var r=t.data,s=e.data,o=t.width,a=t.height,c=e.width,l=e.height,h=Math.max(1,Math.floor(o/c)),u=c*h,p=Math.max(1,Math.floor(a/l)),d=l*p,f=Buffer.alloc(u*a*4),m=0;m<a;m++)for(var g=0;g<u;g++)for(var _=g*(o-1)/u,y=Math.floor(_),b=_-y,v=4*(m*o+y),w=4*(m*u+g),x=0;x<4;x++){var E=v+x,S=y>0?r[E-4]:2*r[E]-r[E+4],k=r[E],T=r[E+4],C=y<o-2?r[E+8]:2*r[E+4]-r[E];f[w+x]=i(S,k,T,C,b)}for(var O=Buffer.alloc(u*d*4),I=0;I<d;I++)for(var A=0;A<u;A++)for(var P=I*(a-1)/d,N=Math.floor(P),M=P-N,D=4*(N*u+A),R=4*(I*u+A),B=0;B<4;B++){var F=D+B,L=N>0?f[F-4*u]:2*f[F]-f[F+4*u],U=f[F],j=f[F+4*u],z=N<a-2?f[F+8*u]:2*f[F+4*u]-f[F];O[R+B]=i(L,U,j,z,M)}var G=h*p;if(G>1)for(var q=0;q<l;q++)for(var H=0;H<c;H++){for(var $=0,Y=0,W=0,V=0,J=0,X=0;X<p;X++)for(var Q=q*p+X,K=0;K<h;K++){var Z=4*(Q*u+(H*h+K)),tt=O[Z+3];tt&&($+=O[Z],Y+=O[Z+1],W+=O[Z+2],J++),V+=tt}var et=4*(q*c+H);s[et]=J?Math.round($/J):0,s[et+1]=J?Math.round(Y/J):0,s[et+2]=J?Math.round(W/J):0,s[et+3]=Math.round(V/G)}else e.data=O},bicubicInterpolation:function(t,e,n){return this._interpolate2D(t,e,n,(function(t,e,n,i,r){var s=i-n-t+e,o=t-e-s,a=n-t,c=e;return Math.max(0,Math.min(255,s*(r*r*r)+o*(r*r)+a*r+c))}))},hermiteInterpolation:function(t,e,n){return this._interpolate2D(t,e,n,(function(t,e,n,i,r){var s=e,o=.5*(n-t),a=t-2.5*e+2*n-.5*i,c=.5*(i-t)+1.5*(e-n);return Math.max(0,Math.min(255,Math.round(((c*r+a)*r+o)*r+s)))}))},bezierInterpolation:function(t,e,n){return this._interpolate2D(t,e,n,(function(t,e,n,i,r){var s=1-r,o=e*s*s*s,a=3*(e+(n-t)/4)*s*s*r,c=3*(n-(i-e)/4)*s*r*r,l=n*r*r*r;return Math.max(0,Math.min(255,Math.round(o+a+c+l)))}))}}},5990:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);function r(t,e){var n=(t%=360)*Math.PI/180,i=Math.cos(n),r=Math.sin(n),s=this.bitmap.width,o=this.bitmap.height;if(!0===e||"string"==typeof e){(s=Math.ceil(Math.abs(this.bitmap.width*i)+Math.abs(this.bitmap.height*r))+1)%2!=0&&s++,(o=Math.ceil(Math.abs(this.bitmap.width*r)+Math.abs(this.bitmap.height*i))+1)%2!=0&&o++;var a=this.cloneQuiet();this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,n){this.bitmap.data.writeUInt32BE(this._background,n)}));var c=Math.max(s,o,this.bitmap.width,this.bitmap.height);this.resize(c,c,e),this.blit(a,this.bitmap.width/2-a.bitmap.width/2,this.bitmap.height/2-a.bitmap.height/2)}var l=this.bitmap.width,h=this.bitmap.height,u=Buffer.alloc(this.bitmap.data.length);function p(t,e){return function(n,i){return{x:n+t,y:i+e}}}for(var d=p(-l/2,-h/2),f=p(l/2+.5,h/2+.5),m=1;m<=h;m++)for(var g=1;g<=l;g++){var _=d(g,m),y=f(i*_.x-r*_.y,i*_.y+r*_.x),b=l*(m-1)+g-1<<2;if(y.x>=0&&y.x<l&&y.y>=0&&y.y<h){var v=l*(0|y.y)+y.x<<2,w=this.bitmap.data.readUInt32BE(v);u.writeUInt32BE(w,b)}else u.writeUInt32BE(this._background,b)}if(this.bitmap.data=u,!0===e||"string"==typeof e){var x=l/2-s/2,E=h/2-o/2;this.crop(x,E,s,o)}}e.default=function(){return{rotate:function(t,e,n){return null==e&&(e=!0),"function"==typeof e&&void 0===n&&(n=e,e=!0),"number"!=typeof t?i.throwError.call(this,"deg must be a number",n):"boolean"!=typeof e&&"string"!=typeof e?i.throwError.call(this,"mode must be a boolean or a string",n):(r.call(this,t,e,n),(0,i.isNodePattern)(n)&&n.call(this,null,this),this)}}}},7161:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{scale:function(t,e,n){if("number"!=typeof t)return i.throwError.call(this,"f must be a number",n);if(t<0)return i.throwError.call(this,"f must be a positive number",n);"function"==typeof e&&void 0===n&&(n=e,e=null);var r=this.bitmap.width*t,s=this.bitmap.height*t;return this.resize(r,s,e),(0,i.isNodePattern)(n)&&n.call(this,null,this),this},scaleToFit:function(t,e,n,r){if("number"!=typeof t||"number"!=typeof e)return i.throwError.call(this,"w and h must be numbers",r);"function"==typeof n&&void 0===r&&(r=n,n=null);var s=t/e>this.bitmap.width/this.bitmap.height?e/this.bitmap.height:t/this.bitmap.width;return this.scale(s,n),(0,i.isNodePattern)(r)&&r.call(this,null,this),this}}}},1939:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{shadow:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof e&&(n=e,e={});var r=e,s=r.opacity,o=void 0===s?.7:s,a=r.size,c=void 0===a?1.1:a,l=r.x,h=void 0===l?-25:l,u=r.y,p=void 0===u?25:u,d=r.blur,f=void 0===d?5:d,m=this.clone(),g=this.clone();return g.scan(0,0,g.bitmap.width,g.bitmap.height,(function(e,n,i){g.bitmap.data[i]=0,g.bitmap.data[i+1]=0,g.bitmap.data[i+2]=0,g.bitmap.data[i+3]=g.constructor.limit255(g.bitmap.data[i+3]*o),t.bitmap.data[i]=0,t.bitmap.data[i+1]=0,t.bitmap.data[i+2]=0,t.bitmap.data[i+3]=0})),g.resize(g.bitmap.width*c,g.bitmap.height*c).blur(f),this.composite(g,h,p),this.composite(m,0,0),(0,i.isNodePattern)(n)&&n.call(this,null,this),this}}}},738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(7754);e.default=function(){return{threshold:function(t,e){var n=this,r=t.max,s=t.replace,o=void 0===s?255:s,a=t.autoGreyscale,c=void 0===a||a;return"number"!=typeof r?i.throwError.call(this,"max must be a number",e):"number"!=typeof o?i.throwError.call(this,"replace must be a number",e):"boolean"!=typeof c?i.throwError.call(this,"autoGreyscale must be a boolean",e):(r=this.constructor.limit255(r),o=this.constructor.limit255(o),c&&this.greyscale(),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(t,e,i){var s=n.bitmap.data[i]<r?n.bitmap.data[i]:o;n.bitmap.data[i]=s,n.bitmap.data[i+1]=s,n.bitmap.data[i+2]=s})),(0,i.isNodePattern)(e)&&e.call(this,null,this),this)}}}},5385:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(1132)),s=n(9027),o=i(n(9358)),a=i(n(9912)),c=i(n(6923)),l=i(n(9082)),h=i(n(2447)),u=i(n(8966)),p=i(n(7277)),d=i(n(8246)),f=i(n(4975)),m=i(n(6790)),g=i(n(902)),_=i(n(1742)),y=i(n(5035)),b=i(n(7811)),v=i(n(5326)),w=i(n(658)),x=i(n(9831)),E=i(n(5990)),S=i(n(7161)),k=i(n(1939)),T=i(n(738)),C=[o.default,a.default,c.default,l.default,h.default,u.default,p.default,d.default,f.default,m.default,g.default,_.default,y.default,b.default,v.default,w.default,x.default,E.default,S.default,k.default,T.default];e.default=function(t){var e=C.map((function(e){var n=e(t)||{};return n.class||n.constants||(n={class:n}),n}));return s.mergeDeep.apply(void 0,(0,r.default)(e))}},8684:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3693)),s=n(9904),o=n(7754),a="image/png";e.default=function(){return{mime:(0,r.default)({},a,["png"]),constants:{MIME_PNG:a,PNG_FILTER_AUTO:-1,PNG_FILTER_NONE:0,PNG_FILTER_SUB:1,PNG_FILTER_UP:2,PNG_FILTER_AVERAGE:3,PNG_FILTER_PATH:4},hasAlpha:(0,r.default)({},a,!0),decoders:(0,r.default)({},a,s.PNG.sync.read),encoders:(0,r.default)({},a,(function(t){var e=new s.PNG({width:t.bitmap.width,height:t.bitmap.height});return e.data=t.bitmap.data,s.PNG.sync.write(e,{width:t.bitmap.width,height:t.bitmap.height,deflateLevel:t._deflateLevel,deflateStrategy:t._deflateStrategy,filterType:t._filterType,colorType:"number"==typeof t._colorType?t._colorType:t._rgba?6:2,inputHasAlpha:t._rgba})})),class:{_deflateLevel:9,_deflateStrategy:3,_filterType:-1,_colorType:null,deflateLevel:function(t,e){return"number"!=typeof t?o.throwError.call(this,"l must be a number",e):t<0||t>9?o.throwError.call(this,"l must be a number 0 - 9",e):(this._deflateLevel=Math.round(t),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},deflateStrategy:function(t,e){return"number"!=typeof t?o.throwError.call(this,"s must be a number",e):t<0||t>3?o.throwError.call(this,"s must be a number 0 - 3",e):(this._deflateStrategy=Math.round(t),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},filterType:function(t,e){return"number"!=typeof t?o.throwError.call(this,"n must be a number",e):t<-1||t>4?o.throwError.call(this,"n must be -1 (auto) or a number 0 - 4",e):(this._filterType=Math.round(t),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)},colorType:function(t,e){return"number"!=typeof t?o.throwError.call(this,"s must be a number",e):0!==t&&2!==t&&4!==t&&6!==t?o.throwError.call(this,"s must be a number 0, 2, 4, 6.",e):(this._colorType=Math.round(t),(0,o.isNodePattern)(e)&&e.call(this,null,this),this)}}}}},6876:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(3693)),s=i(n(7713)),o="image/tiff";e.default=function(){return{mime:(0,r.default)({},o,["tiff","tif"]),constants:{MIME_TIFF:o},decoders:(0,r.default)({},o,(function(t){var e=s.default.decode(t),n=e[0];s.default.decodeImages(t,e);var i=s.default.toRGBA8(n);return{data:Buffer.from(i),width:n.t256[0],height:n.t257[0]}})),encoders:(0,r.default)({},o,(function(t){var e=s.default.encodeImage(t.bitmap.data,t.bitmap.width,t.bitmap.height);return Buffer.from(e)}))}}},8070:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(9027),s=i(n(9447)),o=i(n(8684)),a=i(n(7360)),c=i(n(6876)),l=i(n(2967));e.default=function(){return(0,r.mergeDeep)((0,s.default)(),(0,o.default)(),(0,a.default)(),(0,c.default)(),(0,l.default)())}},7754:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.isNodePattern=function(t){if(void 0===t)return!1;if("function"!=typeof t)throw new TypeError("Callback must be a function");return!0},e.throwError=function(t,e){if("string"==typeof t&&(t=new Error(t)),"function"==typeof e)return e.call(this,t);throw t},e.scan=function(t,e,n,i,r,s){e=Math.round(e),n=Math.round(n),i=Math.round(i),r=Math.round(r);for(var o=n;o<n+r;o++)for(var a=e;a<e+i;a++){var c=t.bitmap.width*o+a<<2;s.call(t,a,o,c)}return t},e.scanIterator=o;var r=i(n(2375)),s=r.default.mark(o);function o(t,e,n,i,o){var a,c,l;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=Math.round(e),n=Math.round(n),i=Math.round(i),o=Math.round(o),a=n;case 5:if(!(a<n+o)){r.next=17;break}c=e;case 7:if(!(c<e+i)){r.next=14;break}return l=t.bitmap.width*a+c<<2,r.next=11,{x:c,y:a,idx:l,image:t};case 11:c++,r.next=7;break;case 14:a++,r.next=5;break;case 17:case"end":return r.stop()}}),s)}},6641:(t,e,n)=>{"use strict";n.d(e,{BF:()=>m,EU:()=>d,Me:()=>_,YZ:()=>p,gM:()=>f,lq:()=>y});var i=n(6936),r=n(9297),s=n(7412),o=n(6341),a=n(258),c=n(2486),l=n(7058);const h=4,u=100;class p{__init(){this._stack=[{}]}constructor(t,e=new c.H,n=h){this._version=n,p.prototype.__init.call(this),this.getStackTop().scope=e,t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=c.H.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(t){const e=this.pushScope();try{t(e)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:(0,i.eJ)(),r=new Error("Sentry syntheticException");return this._withClient(((i,s)=>{i.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},s)})),n}captureMessage(t,e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:(0,i.eJ)(),s=new Error(t);return this._withClient(((i,o)=>{i.captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:r},o)})),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:(0,i.eJ)();return"transaction"!==t.type&&(this._lastEventId=n),this._withClient(((i,r)=>{i.captureEvent(t,{...e,event_id:n},r)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:i}=this.getStackTop();if(!n||!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=u}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const c={timestamp:(0,r.lu)(),...t},l=o?(0,s.pq)((()=>o(c,e))):c;null!==l&&n.addBreadcrumb(l,a)}setUser(t){const e=this.getScope();e&&e.setUser(t)}setTags(t){const e=this.getScope();e&&e.setTags(t)}setExtras(t){const e=this.getScope();e&&e.setExtras(t)}setTag(t,e){const n=this.getScope();n&&n.setTag(t,e)}setExtra(t,e){const n=this.getScope();n&&n.setExtra(t,e)}setContext(t,e){const n=this.getScope();n&&n.setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();e&&n&&t(e)}run(t){const e=f(this);try{t(this)}finally{f(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.vF.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){return this._callExtensionMethod("startTransaction",t,e)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop(),e=t&&t.scope,n=e&&e.getSession();n&&(0,l.Vu)(n),this._sendSessionUpdate(),e&&e.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:i,environment:r}=n&&n.getOptions()||{},{userAgent:s}=o.OW.navigator||{},a=(0,l.fj)({release:i,environment:r,...e&&{user:e.getUser()},...s&&{userAgent:s},...t});if(e){const t=e.getSession&&e.getSession();t&&"ok"===t.status&&(0,l.qO)(t,{status:"exited"}),this.endSession(),e.setSession(a)}return a}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop();if(!t)return;const n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_withClient(t){const{scope:e,client:n}=this.getStackTop();n&&t(n,e)}_callExtensionMethod(t,...e){const n=d().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.vF.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function d(){return o.OW.__SENTRY__=o.OW.__SENTRY__||{extensions:{},hub:void 0},o.OW}function f(t){const e=d(),n=_(e);return y(e,t),n}function m(){const t=d();return g(t)&&!_(t).isOlderThan(h)||y(t,new p),(0,a.wD)()?function(t){try{const e=d().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return _(t);if(!g(n)||_(n).isOlderThan(h)){const e=_(t).getStackTop();y(n,new p(e.client,c.H.clone(e.scope)))}return _(n)}catch(e){return _(t)}}(t):_(t)}function g(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function _(t){return(0,o.BY)("hub",(()=>new p),t)}function y(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}},2486:(t,e,n)=>{"use strict";n.d(e,{H:()=>h,l:()=>p});var i=n(3816),r=n(9297),s=n(690),o=n(7412),a=n(6936),c=n(6341),l=n(7058);class h{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(t){const e=new h;return t&&(e._breadcrumbs=[...t._breadcrumbs],e._tags={...t._tags},e._extra={...t._extra},e._contexts={...t._contexts},e._user=t._user,e._level=t._level,e._span=t._span,e._session=t._session,e._transactionName=t._transactionName,e._fingerprint=t._fingerprint,e._eventProcessors=[...t._eventProcessors],e._requestSession=t._requestSession,e._attachments=[...t._attachments],e._sdkProcessingMetadata={...t._sdkProcessingMetadata}),e}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&(0,l.qO)(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if("function"==typeof t){const e=t(this);return e instanceof h?e:this}return t instanceof h?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):(0,i.Qd)(t)&&(this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const i={timestamp:(0,r.lu)(),...t};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,e={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const e=this._span.transaction&&this._span.transaction.name;e&&(t.tags={transaction:e,...t.tags})}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...u(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}_notifyEventProcessors(t,e,n,r=0){return new s.T2(((s,a)=>{const c=t[r];if(null===e||"function"!=typeof c)s(e);else{const l=c({...e},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.id&&null===l&&o.vF.log(`Event processor "${c.id}" dropped event`),(0,i.Qg)(l)?l.then((e=>this._notifyEventProcessors(t,e,n,r+1).then(s))).then(null,a):this._notifyEventProcessors(t,l,n,r+1).then(s).then(null,a)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?(0,a.k9)(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function u(){return(0,c.BY)("globalEventProcessors",(()=>[]))}function p(t){u().push(t)}},7058:(t,e,n)=>{"use strict";n.d(e,{Vu:()=>c,fj:()=>o,qO:()=>a});var i=n(9297),r=n(6936),s=n(792);function o(t){const e=(0,i.zf)(),n={sid:(0,r.eJ)(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return(0,s.Ce)({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&a(n,t),n}function a(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||(0,i.zf)(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:(0,r.eJ)()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function c(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),a(t,n)}},5091:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DEFAULT_USER_INCLUDES:()=>ae,Handlers:()=>s,Hub:()=>m.YZ,Integrations:()=>Me,NodeClient:()=>ft,SDK_VERSION:()=>g,Scope:()=>Z.H,addBreadcrumb:()=>w,addGlobalEventProcessor:()=>Z.l,addRequestDataToEvent:()=>he,captureEvent:()=>b,captureException:()=>_,captureMessage:()=>y,close:()=>we,configureScope:()=>v,createTransport:()=>Q,deepReadDirSync:()=>ke,defaultIntegrations:()=>_e,defaultStackParser:()=>Se,extractRequestData:()=>le,flush:()=>ve,getCurrentHub:()=>m.BF,getHubFromCarrier:()=>m.Me,getSentryRelease:()=>Ee,init:()=>ye,lastEventId:()=>be,makeMain:()=>m.gM,makeNodeTransport:()=>xt,setContext:()=>x,setExtra:()=>S,setExtras:()=>E,setTag:()=>T,setTags:()=>k,setUser:()=>C,startTransaction:()=>I,withScope:()=>O});var i={};n.r(i),n.d(i,{FunctionToString:()=>c,InboundFilters:()=>d});var r={};n.r(r),n.d(r,{Console:()=>Tt,Context:()=>Xt,ContextLines:()=>zt,Http:()=>Dt,LinkedErrors:()=>qt,Modules:()=>Yt,OnUncaughtException:()=>Ft,OnUnhandledRejection:()=>Lt,RequestData:()=>pe});var s={};n.r(s),n.d(s,{errorHandler:()=>Ne,extractRequestData:()=>Ce,parseRequest:()=>Oe,requestHandler:()=>Ae,tracingHandler:()=>Ie});var o=n(792);let a;class c{constructor(){c.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=c.id}setupOnce(){a=Function.prototype.toString,Function.prototype.toString=function(...t){const e=(0,o.sp)(this)||this;return a.apply(e,t)}}}c.__initStatic();var l=n(7412),h=n(6936),u=n(9653);const p=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class d{static __initStatic(){this.id="InboundFilters"}__init(){this.name=d.id}constructor(t={}){this._options=t,d.prototype.__init.call(this)}setupOnce(t,e){const n=t=>{const n=e();if(n){const e=n.getIntegration(d);if(e){const i=n.getClient(),r=i?i.getOptions():{},s=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...p],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(e._options,r);return function(t,e){return e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,h.$X)(t)}`),!0):function(t,e){return!(!e||!e.length)&&function(t){if(t.message)return[t.message];if(t.exception)try{const{type:e="",value:n=""}=t.exception.values&&t.exception.values[0]||{};return[`${n}`,`${e}: ${n}`]}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error(`Cannot extract message for event ${(0,h.$X)(t)}`),[]}return[]}(t).some((t=>(0,u.Xr)(t,e)))}(t,e.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,h.$X)(t)}`),!0):function(t,e){if(!e||!e.length)return!1;const n=f(t);return!!n&&(0,u.Xr)(n,e)}(t,e.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,h.$X)(t)}.\nUrl: ${f(t)}`),!0):!function(t,e){if(!e||!e.length)return!0;const n=f(t);return!n||(0,u.Xr)(n,e)}(t,e.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,h.$X)(t)}.\nUrl: ${f(t)}`),!0)}(t,s)?null:t}}return t};n.id=this.name,t(n)}}function f(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error(`Cannot extract url for event ${(0,h.$X)(t)}`),null}}d.__initStatic();var m=n(6641);const g="7.29.0";function _(t,e){return(0,m.BF)().captureException(t,{captureContext:e})}function y(t,e){const n="string"==typeof e?e:void 0,i="string"!=typeof e?{captureContext:e}:void 0;return(0,m.BF)().captureMessage(t,n,i)}function b(t,e){return(0,m.BF)().captureEvent(t,e)}function v(t){(0,m.BF)().configureScope(t)}function w(t){(0,m.BF)().addBreadcrumb(t)}function x(t,e){(0,m.BF)().setContext(t,e)}function E(t){(0,m.BF)().setExtras(t)}function S(t,e){(0,m.BF)().setExtra(t,e)}function k(t){(0,m.BF)().setTags(t)}function T(t,e){(0,m.BF)().setTag(t,e)}function C(t){(0,m.BF)().setUser(t)}function O(t){(0,m.BF)().withScope(t)}function I(t,e){return(0,m.BF)().startTransaction({...t},e)}class A extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}var P=n(690);const N=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function M(t,e=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i?`${i}/`:i}${o}`}function D(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}var R=n(3816),B=n(3917);function F(t,e=1/0,n=1/0){try{return U("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function L(t,e=3,n=102400){const i=F(t,e);return r=i,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(r))>n?L(t,e-1,n):i;var r}function U(t,e,n=1/0,i=1/0,r=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++)if(e[t]===n)return!0;return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}()){const[s,a]=r;if(null===e||["number","boolean","string"].includes(typeof e)&&!(0,R.yr)(e))return e;const c=function(t,e){try{return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!=typeof global&&e===global?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":(0,R.mE)(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?`[Function: ${(0,B.qQ)(e)}]`:"symbol"==typeof e?`[${String(e)}]`:"bigint"==typeof e?`[BigInt: ${String(e)}]`:`[object ${Object.getPrototypeOf(e).constructor.name}]`}catch(t){return`**non-serializable** (${t})`}}(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;if(0===n)return c.replace("object ","");if(s(e))return"[Circular ~]";const l=e;if(l&&"function"==typeof l.toJSON)try{return U("",l.toJSON(),n-1,i,r)}catch(t){}const h=Array.isArray(e)?[]:{};let u=0;const p=(0,o.W4)(e);for(const t in p){if(!Object.prototype.hasOwnProperty.call(p,t))continue;if(u>=i){h[t]="[MaxProperties ~]";break}const e=p[t];h[t]=U(t,e,n-1,i,r),u++}return a(e),h}function j(t,e=[]){return[t,e]}function z(t,e){const[n,i]=t;return[n,[...i,e]]}function G(t,e){t[1].forEach((t=>{const n=t[0].type;e(t,n)}))}function q(t,e){return(e||new TextEncoder).encode(t)}function H(t,e){const[n,i]=t;let r=JSON.stringify(n);function s(t){"string"==typeof r?r="string"==typeof t?r+t:[q(r,e),t]:r.push("string"==typeof t?q(t,e):t)}for(const t of i){const[e,n]=t;if(s(`\n${JSON.stringify(e)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let t;try{t=JSON.stringify(n)}catch(e){t=JSON.stringify(F(n))}s(t)}}return"string"==typeof r?r:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}(r)}function $(t,e){const n="string"==typeof t.data?q(t.data,e):t.data;return[(0,o.Ce)({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const Y={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay_event",replay_recording:"replay_recording"};function W(t){return Y[t]}function V(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}const J=6e4;const X=30;function Q(t,e,n=function(t){const e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(i){if(!(void 0===t||e.length<t))return(0,P.xg)(new A("Not adding Promise because buffer limit was reached."));const r=i();return-1===e.indexOf(r)&&e.push(r),r.then((()=>n(r))).then(null,(()=>n(r).then(null,(()=>{})))),r},drain:function(t){return new P.T2(((n,i)=>{let r=e.length;if(!r)return n(!0);const s=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{(0,P.XW)(t).then((()=>{--r||(clearTimeout(s),n(!0))}),i)}))}))}}}(t.bufferSize||X)){let i={};return{send:function(r){const s=[];if(G(r,((e,n)=>{const r=W(n);if(function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(i,r)){const i=K(e,n);t.recordDroppedEvent("ratelimit_backoff",r,i)}else s.push(e)})),0===s.length)return(0,P.XW)();const o=j(r[0],s),a=e=>{G(o,((n,i)=>{const r=K(n,i);t.recordDroppedEvent(e,W(i),r)}))};return n.add((()=>e({body:H(o,t.textEncoder)}).then((t=>{void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),i=function(t,{statusCode:e,headers:n},i=Date.now()){const r={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const t of s.trim().split(",")){const[e,n]=t.split(":",2),s=parseInt(e,10),o=1e3*(isNaN(s)?60:s);if(n)for(const t of n.split(";"))r[t]=i+o;else r.all=i+o}else o?r.all=i+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${t}`);return isNaN(i)?J:i-e}(o,i):429===e&&(r.all=i+6e4);return r}(i,t)}),(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error("Failed while sending event:",t),a("network_error")})))).then((t=>t),(t=>{if(t instanceof A)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error("Skipped sending event because buffer is full."),a("queue_overflow"),(0,P.XW)();throw t}))},flush:t=>n.drain(t)}}function K(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}var Z=n(2486),tt=n(853);const et=[];function nt(t){const e=t.defaultIntegrations||[],n=t.integrations;let i;e.forEach((t=>{t.isDefaultInstance=!0})),i=Array.isArray(n)?[...e,...n]:"function"==typeof n?(0,h.k9)(n(e)):e;const r=function(t){const e={};return t.forEach((t=>{const{name:n}=t,i=e[n];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.values(e)}(i),s=r.findIndex((t=>"Debug"===t.name));if(-1!==s){const[t]=r.splice(s,1);r.push(t)}return r}var it=n(7058),rt=n(9297);const st="Not capturing exception because it's already been captured.";class ot{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(t){if(ot.prototype.__init.call(this),ot.prototype.__init2.call(this),ot.prototype.__init3.call(this),ot.prototype.__init4.call(this),this._options=t,t.dsn){this._dsn=function(t){const e="string"==typeof t?function(t){const e=N.exec(t);if(!e)throw new A(`Invalid Sentry Dsn: ${t}`);const[n,i,r="",s,o="",a]=e.slice(1);let c="",l=a;const h=l.split("/");if(h.length>1&&(c=h.slice(0,-1).join("/"),l=h.pop()),l){const t=l.match(/^\d+/);t&&(l=t[0])}return D({host:s,pass:r,path:c,projectId:l,port:o,protocol:n,publicKey:i})}(t):D(t);return function(t){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:e,projectId:n,protocol:i}=t;if(["protocol","publicKey","host","projectId"].forEach((e=>{if(!t[e])throw new A(`Invalid Sentry Dsn: ${e} missing`)})),!n.match(/^\d+$/))throw new A(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!function(t){return"http"===t||"https"===t}(i))throw new A(`Invalid Sentry Dsn: Invalid protocol ${i}`);if(e&&isNaN(parseInt(e,10)))throw new A(`Invalid Sentry Dsn: Invalid port ${e}`)}(e),e}(t.dsn);const e=function(t,e={}){const n="string"==typeof e?e:e.tunnel,i="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return(0,o.u4)({sentry_key:t.publicKey,sentry_version:"7",...e&&{sentry_client:`${e.name}/${e.version}`}})}(t,i)}`}(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("No DSN provided, client will not do anything.")}captureException(t,e,n){if((0,h.GR)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log(st));let i=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{i=t}))),i}captureMessage(t,e,n,i){let r=n&&n.event_id;const s=(0,R.sO)(t)?this.eventFromMessage(String(t),e,n):this.eventFromException(t,n);return this._process(s.then((t=>this._captureEvent(t,n,i))).then((t=>{r=t}))),r}captureEvent(t,e,n){if(e&&e.originalException&&(0,h.GR)(e.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log(st));let i=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((t=>{i=t}))),i}captureSession(t){this._isEnabled()?"string"!=typeof t.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),(0,it.qO)(t,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t)))):(0,P.XW)(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,t)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(t){const e={};return t.forEach((t=>{e[t.name]=t,-1===et.indexOf(t.name)&&(t.setupOnce(Z.l,m.BF),et.push(t.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log(`Integration installed: ${t.name}`))})),e}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}sendEvent(t,e={}){if(this._dsn){let n=function(t,e,n,i){const r=V(n),s=t.type||"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const a=function(t,e,n,i){const r=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&{dsn:M(i)},..."transaction"===t.type&&r&&{trace:(0,o.Ce)({...r})}}}(t,r,i,e);return delete t.sdkProcessingMetadata,j(a,[[{type:s},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=z(n,$(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(n)}}sendSession(t){if(this._dsn){const e=function(t,e,n,i){const r=V(n);return j({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!i&&{dsn:M(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(t,e){let n=!1,i=!1;const r=e.exception&&e.exception.values;if(r){i=!0;for(const t of r){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const s="ok"===t.status;(s&&0===t.errors||s&&n)&&((0,it.qO)(t,{...n&&{status:"crashed"},errors:t.errors||Number(i||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new P.T2((e=>{let n=0;const i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),e(!0)):(n+=1,t&&n>=t&&(clearInterval(i),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(t,e,n){return function(t,e,n,i){const{normalizeDepth:r=3,normalizeMaxBreadth:s=1e3}=t,o={...e,event_id:e.event_id||n.event_id||(0,h.eJ)(),timestamp:e.timestamp||(0,rt.lu)()};!function(t,e){const{environment:n,release:i,dist:r,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==i&&(t.release=i),void 0===t.dist&&void 0!==r&&(t.dist=r),t.message&&(t.message=(0,u.xv)(t.message,s));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=(0,u.xv)(o.value,s));const a=t.request;a&&a.url&&(a.url=(0,u.xv)(a.url,s))}(o,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(o,t.integrations.map((t=>t.name)));let a=i;n.captureContext&&(a=Z.H.clone(a).update(n.captureContext));let c=(0,P.XW)(o);if(a){if(a.getAttachments){const t=[...n.attachments||[],...a.getAttachments()];t.length&&(n.attachments=t)}c=a.applyToEvent(o,n)}return c.then((t=>"number"==typeof r&&r>0?function(t,e,n){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:F(t.data,e,n)}})))},...t.user&&{user:F(t.user,e,n)},...t.contexts&&{contexts:F(t.contexts,e,n)},...t.extra&&{extra:F(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=F(t.contexts.trace.data,e,n))),t.spans&&(i.spans=t.spans.map((t=>(t.data&&(t.data=F(t.data,e,n)),t)))),i}(t,r,s):t))}(this.getOptions(),t,e,n)}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const e=t;"log"===e.logLevel?l.vF.log(e.message):l.vF.warn(e)}}))}_processEvent(t,e,n){const i=this.getOptions(),{sampleRate:r}=i;if(!this._isEnabled())return(0,P.xg)(new A("SDK not enabled, will not capture event.","log"));const s=ct(t),o=at(t),a=t.type||"error",c=`before send for type \`${a}\``;return o&&"number"==typeof r&&Math.random()>r?(this.recordDroppedEvent("sample_rate","error",t),(0,P.xg)(new A(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"))):this._prepareEvent(t,e,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",a,t),new A("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const r=function(t,e,n){const{beforeSend:i,beforeSendTransaction:r}=t;return at(e)&&i?i(e,n):ct(e)&&r?r(e,n):e}(i,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if((0,R.Qg)(t))return t.then((t=>{if(!(0,R.Qd)(t)&&null!==t)throw new A(n);return t}),(t=>{throw new A(`${e} rejected with ${t}`)}));if(!(0,R.Qd)(t)&&null!==t)throw new A(n);return t}(r,c)})).then((i=>{if(null===i)throw this.recordDroppedEvent("before_send",t.type||"error",t),new A(`${c} returned \`null\`, will not send event.`,"log");const r=n&&n.getSession();!s&&r&&this._updateSessionFromEvent(r,i);const o=i.transaction_info;if(s&&o&&i.transaction!==t.transaction){const t="custom";i.transaction_info={...o,source:t,changes:[...o.changes,{source:t,timestamp:i.timestamp,propagations:o.propagations}]}}return this.sendEvent(i,e),i})).then(null,(t=>{if(t instanceof A)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new A(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){this._transport&&this._dsn?this._transport.send(t).then(null,(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error("Error while sending event:",t)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,i]=e.split(":");return{reason:n,category:i,quantity:t[e]}}))}}function at(t){return void 0===t.type}function ct(t){return"transaction"===t.type}class lt{__init(){this.flushTimeout=60}__init2(){this._pendingAggregates={}}__init3(){this._isEnabled=!0}constructor(t,e){lt.prototype.__init.call(this),lt.prototype.__init2.call(this),lt.prototype.__init3.call(this),this._client=t,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._sessionAttrs=e}flush(){const t=this.getSessionAggregates();0!==t.aggregates.length&&(this._pendingAggregates={},this._client.sendSession(t))}getSessionAggregates(){const t=Object.keys(this._pendingAggregates).map((t=>this._pendingAggregates[parseInt(t)])),e={attrs:this._sessionAttrs,aggregates:t};return(0,o.Ce)(e)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const t=(0,m.BF)().getScope(),e=t&&t.getRequestSession();e&&e.status&&(this._incrementSessionStatusCount(e.status,new Date),t&&t.setRequestSession(void 0))}_incrementSessionStatusCount(t,e){const n=new Date(e).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};const i=this._pendingAggregates[n];switch(i.started||(i.started=new Date(n).toISOString()),t){case"errored":return i.errored=(i.errored||0)+1,i.errored;case"ok":return i.exited=(i.exited||0)+1,i.exited;default:return i.crashed=(i.crashed||0)+1,i.crashed}}}var ht=n(857),ut=n(9023);function pt(t,e){return t(e.stack||"",1)}function dt(t,e){const n={type:e.name||e.constructor.name,value:e.message},i=pt(t,e);return i.length&&(n.stacktrace={frames:i}),n}class ft extends ot{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:g}],version:g},t.transportOptions={textEncoder:new ut.TextEncoder,...t.transportOptions},super(t)}captureException(t,e,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&n){const t=n.getRequestSession();t&&"ok"===t.status&&(t.status="errored")}return super.captureException(t,e,n)}captureEvent(t,e,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&n&&"exception"===(t.type||"exception")&&t.exception&&t.exception.values&&t.exception.values.length>0){const t=n.getRequestSession();t&&"ok"===t.status&&(t.status="errored")}return super.captureEvent(t,e,n)}close(t){return(0,tt.z)([this,"access",t=>t._sessionFlusher,"optionalAccess",t=>t.close,"call",t=>t()]),super.close(t)}initSessionFlusher(){const{release:t,environment:e}=this._options;t?this._sessionFlusher=new lt(this,{release:t,environment:e}):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}eventFromException(t,e){return(0,P.XW)(function(t,e,n){let i=e;const r=n&&n.data&&n.data.mechanism||{handled:!0,type:"generic"};if(!(0,R.bJ)(e)){if((0,R.Qd)(e)){const t=`Non-Error exception captured with keys: ${(0,o.HF)(e)}`,r=(0,m.BF)(),s=r.getClient(),a=s&&s.getOptions().normalizeDepth;r.configureScope((t=>{t.setExtra("__serialized__",L(e,a))})),i=n&&n.syntheticException||new Error(t),i.message=t}else i=n&&n.syntheticException||new Error(e),i.message=e;r.synthetic=!0}const s={exception:{values:[dt(t,i)]}};return(0,h.gO)(s,void 0,void 0),(0,h.M6)(s,r),{...s,event_id:n&&n.event_id}}(this._options.stackParser,t,e))}eventFromMessage(t,e="info",n){return(0,P.XW)(function(t,e,n="info",i,r){const s={event_id:i&&i.event_id,level:n,message:e};if(r&&i&&i.syntheticException){const n=pt(t,i.syntheticException);n.length&&(s.exception={values:[{value:e,stacktrace:{frames:n}}]})}return s}(this._options.stackParser,t,e,n,this._options.attachStacktrace))}_prepareEvent(t,e,n){return t.platform=t.platform||"node",t.contexts={...t.contexts,runtime:(0,tt.z)([t,"access",t=>t.contexts,"optionalAccess",t=>t.runtime])||{name:"node",version:global.process.version}},t.server_name=t.server_name||this.getOptions().serverName||global.process.env.SENTRY_NAME||ht.hostname(),super._prepareEvent(t,e,n)}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("Discarded request mode session because autoSessionTracking option was disabled")}}var mt=n(2460),gt=n(8611),_t=n(5692),yt=n(2203),bt=n(7016),vt=n(3106);const wt=32768;function xt(t){const e=new bt.URL(t.url),i="https:"===e.protocol,r=function(t,e){const{no_proxy:n}=process.env;return n&&n.split(",").some((e=>t.host.endsWith(e)||t.hostname.endsWith(e)))?void 0:e}(e,t.proxy||(i?process.env.https_proxy:void 0)||process.env.http_proxy),s=i?_t:gt,o=void 0!==t.keepAlive&&t.keepAlive,a=r?new(n(2288))(r):new s.Agent({keepAlive:o,maxSockets:30,timeout:2e3}),c=function(t,e,n){const{hostname:i,pathname:r,port:s,protocol:o,search:a}=new bt.URL(t.url);return function(c){return new Promise(((l,h)=>{let u=function(t){return new yt.Readable({read(){this.push(t),this.push(null)}})}(c.body);const p={...t.headers};c.body.length>wt&&(p["content-encoding"]="gzip",u=u.pipe((0,vt.createGzip)()));const d=e.request({method:"POST",agent:n,headers:p,hostname:i,path:`${r}${a}`,port:s,protocol:o,ca:t.caCerts},(t=>{t.on("data",(()=>{})),t.on("end",(()=>{})),t.setEncoding("utf8");const e=(0,mt.S)(t.headers["retry-after"],(()=>null)),n=(0,mt.S)(t.headers["x-sentry-rate-limits"],(()=>null));l({statusCode:t.statusCode,headers:{"retry-after":e,"x-sentry-rate-limits":Array.isArray(n)?n[0]:n}})}));d.on("error",h),u.pipe(d)}))}}(t,(0,mt.S)(t.httpModule,(()=>s)),a);return Q(t,c)}var Et=n(6341);const St=require("domain"),kt=["fatal","error","warning","log","info","debug"];class Tt{constructor(){Tt.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=Tt.id}setupOnce(){for(const t of["debug","info","warn","error","log"])(0,o.GS)(console,t,Ct(t))}}function Ct(t){return function(e){const n=function(t){return"warn"===t?"warning":kt.includes(t)?t:"log"}(t);return function(){(0,m.BF)().getIntegration(Tt)&&(0,m.BF)().addBreadcrumb({category:"console",level:n,message:ut.format.apply(void 0,arguments)},{input:[...arguments],level:t}),e.apply(this,arguments)}}}Tt.__initStatic();var Ot=n(5584);const It=(0,h.kf)(process.versions.node);function At(t){return`${t.protocol||""}//${t.hostname||t.host||""}${t.port&&80!==t.port&&443!==t.port?`:${t.port}`:""}${t.path?t.path:"/"}`}function Pt(t,e,n){if(!t)return t;let[i,r]=t.split(" ");return e.host&&!e.protocol&&(e.protocol=(0,tt.z)([n,"optionalAccess",t=>t.agent,"optionalAccess",t=>t.protocol]),r=At(e)),(0,tt.z)([r,"optionalAccess",t=>t.startsWith,"call",t=>t("///")])&&(r=r.slice(2)),`${i} ${r}`}function Nt(t){const e={protocol:t.protocol,hostname:"string"==typeof t.hostname&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:`${t.pathname||""}${t.search||""}`,href:t.href};return""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`),e}const Mt=(0,h.kf)(process.versions.node);class Dt{static __initStatic(){this.id="Http"}__init(){this.name=Dt.id}constructor(t={}){Dt.prototype.__init.call(this),this._breadcrumbs=void 0===t.breadcrumbs||t.breadcrumbs,this._tracing=t.tracing?!0===t.tracing?{}:t.tracing:void 0}setupOnce(t,e){if(!this._breadcrumbs&&!this._tracing)return;const i=(0,tt.z)([e,"call",t=>t(),"access",t=>t.getClient,"call",t=>t(),"optionalAccess",t=>t.getOptions,"call",t=>t()]);if(i&&"sentry"!==i.instrumenter)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log("HTTP Integration is skipped because of instrumenter configuration."));const r=this._tracing?{...i,...this._tracing}:void 0,s=function(t,e){const n={},i={};return function(r){return function(...s){const o=function(t,e){let n,i;return"function"==typeof e[e.length-1]&&(n=e.pop()),i="string"==typeof e[0]?Nt(new bt.URL(e[0])):e[0]instanceof bt.URL?Nt(e[0]):e[0],2===e.length&&(i={...i,...e[1]}),void 0===i.protocol&&(It.major&&It.major>8?i.protocol=(0,tt.z)([(0,tt.z)([t,"optionalAccess",t=>t.globalAgent]),"optionalAccess",t=>t.protocol])||(0,tt.z)([i.agent,"optionalAccess",t=>t.protocol])||(0,tt.z)([i._defaultAgent,"optionalAccess",t=>t.protocol]):i.protocol=(0,tt.z)([i.agent,"optionalAccess",t=>t.protocol])||(0,tt.z)([i._defaultAgent,"optionalAccess",t=>t.protocol])||(0,tt.z)([(0,tt.z)([t,"optionalAccess",t=>t.globalAgent]),"optionalAccess",t=>t.protocol])),n?[i,n]:[i]}(this,s),a=o[0],c=At(a);if(function(t){const e=(0,tt.z)([m.BF,"call",t=>t(),"access",t=>t.getClient,"call",t=>t(),"optionalAccess",t=>t.getDsn,"call",t=>t()]);return!!e&&t.includes(e.host)}(c))return r.apply(this,o);let h,p;const d=(0,m.BF)().getScope();if(d&&e&&(t=>void 0===(0,tt.z)([e,"optionalAccess",t=>t.shouldCreateSpanForRequest])||(n[t]||(n[t]=e.shouldCreateSpanForRequest(t)),n[t]))(c)&&(p=d.getSpan(),p)){if(h=p.startChild({description:`${a.method||"GET"} ${c}`,op:"http.client"}),(t=>void 0===(0,tt.z)([e,"optionalAccess",t=>t.tracePropagationTargets])||(i[t]||(i[t]=(0,u.Xr)(t,e.tracePropagationTargets)),i[t]))(c)){const t=h.toTraceparent();if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log(`[Tracing] Adding sentry-trace header ${t} to outgoing request to "${c}": `),a.headers={...a.headers,"sentry-trace":t},p.transaction){const t=p.transaction.getDynamicSamplingContext(),e=(0,Ot.De)(t);let n;n=a.headers&&a.headers.baggage?e?Array.isArray(a.headers.baggage)?[...a.headers.baggage,e]:[a.headers.baggage,e]:a.headers.baggage:e,a.headers={...a.headers,...n&&{baggage:n}}}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.log(`[Tracing] Not adding sentry-trace header to outgoing request (${c}) due to mismatching tracePropagationTargets option.`);const t=p.transaction;t&&t.metadata.propagations++}return r.apply(this,o).once("response",(function(e){t&&Rt("response",c,this,e),h&&(e.statusCode&&h.setHttpStatus(e.statusCode),h.description=Pt(h.description,a,this),h.finish())})).once("error",(function(){t&&Rt("error",c,this),h&&(h.setHttpStatus(500),h.description=Pt(h.description,a,this),h.finish())}))}}}(this._breadcrumbs,r),a=n(8611);if((0,o.GS)(a,"get",s),(0,o.GS)(a,"request",s),Mt.major&&Mt.major>8){const t=n(5692);(0,o.GS)(t,"get",s),(0,o.GS)(t,"request",s)}}}function Rt(t,e,n,i){(0,m.BF)().getIntegration(Dt)&&(0,m.BF)().addBreadcrumb({category:"http",data:{method:n.method,status_code:i&&i.statusCode,url:e},type:"http"},{event:t,request:n,response:i})}function Bt(t){console.error(t&&t.stack?t.stack:t);const e=(0,m.BF)().getClient();void 0===e&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));const n=e.getOptions(),i=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||2e3;e.close(i).then((t=>{t||("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}),(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error(t)}))}Dt.__initStatic();class Ft{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=Ft.id}__init2(){this.handler=this._makeErrorHandler()}constructor(t={}){Ft.prototype.__init.call(this),Ft.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...t}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let t,e=!1,n=!1,i=!1;return r=>{let s=Bt;const o=(0,m.BF)().getClient();this._options.onFatalError?s=this._options.onFatalError:o&&o.getOptions().onFatalError&&(s=o.getOptions().onFatalError);const a=0===global.process.listeners("uncaughtException").reduce(((t,e)=>"domainUncaughtExceptionClear"===e.name||e===this.handler?t:t+1),0),c=this._options.exitEvenIfOtherHandlersAreRegistered||a;if(e)c&&(i?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),Bt(r)):n||(n=!0,setTimeout((()=>{i||(i=!0,s(t,r))}),2e3)));else{const n=(0,m.BF)();t=r,e=!0,n.getIntegration(Ft)?n.withScope((t=>{t.setLevel("fatal"),n.captureException(r,{originalException:r,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!i&&c&&(i=!0,s(r))})):!i&&c&&(i=!0,s(r))}}}}Ft.__initStatic();class Lt{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=Lt.id}constructor(t={mode:"warn"}){this._options=t,Lt.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(t,e){const n=(0,m.BF)();n.getIntegration(Lt)&&n.withScope((i=>{i.setExtra("unhandledPromiseRejection",!0),n.captureException(t,{originalException:e,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})})),this._handleRejection(t)}_handleRejection(t){const e="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===this._options.mode?(0,l.pq)((()=>{console.warn(e),console.error(t&&t.stack?t.stack:t)})):"strict"===this._options.mode&&((0,l.pq)((()=>{console.warn(e)})),Bt(t))}}Lt.__initStatic();var Ut=n(9896);const jt=new(n(9438).LRUMap)(100);class zt{static __initStatic(){this.id="ContextLines"}__init(){this.name=zt.id}constructor(t={}){this._options=t,zt.prototype.__init.call(this)}get _contextLines(){return void 0!==this._options.frameContextLines?this._options.frameContextLines:7}setupOnce(t){t((t=>this.addSourceContext(t)))}async addSourceContext(t){if(this._contextLines>0&&(0,tt.z)([t,"access",t=>t.exception,"optionalAccess",t=>t.values]))for(const e of t.exception.values)(0,tt.z)([e,"access",t=>t.stacktrace,"optionalAccess",t=>t.frames])&&await this.addSourceContextToFrames(e.stacktrace.frames);return t}async addSourceContextToFrames(t){const e=this._contextLines;for(const n of t)if(n.filename&&void 0===n.context_line){const t=await Gt(n.filename);if(t)try{const i=t.split("\n");(0,h.db)(i,n,e)}catch(t){}}}}async function Gt(t){const e=jt.get(t);if(void 0!==e)return e;let n=null;try{n=await(i=t,new Promise(((t,e)=>{(0,Ut.readFile)(i,"utf8",((n,i)=>{n?e(n):t(i)}))})))}catch(t){}var i;return jt.set(t,n),n}zt.__initStatic();class qt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=qt.id}constructor(t={}){qt.prototype.__init.call(this),this._key=t.key||"cause",this._limit=t.limit||5}setupOnce(){(0,Z.l)((async(t,e)=>{const n=(0,m.BF)(),i=n.getIntegration(qt),r=n.getClient();return r&&i&&i._handler&&"function"==typeof i._handler&&await i._handler(r.getOptions().stackParser,t,e),t}))}_handler(t,e,n){return e.exception&&e.exception.values&&(0,R.tH)(n.originalException,Error)?new P.T2((i=>{this._walkErrorTree(t,n.originalException,this._key).then((t=>{e&&e.exception&&e.exception.values&&(e.exception.values=[...t,...e.exception.values]),i(e)})).then(null,(()=>{i(e)}))})):(0,P.XW)(e)}async _walkErrorTree(t,e,n,i=[]){if(!(0,R.tH)(e[n],Error)||i.length+1>=this._limit)return Promise.resolve(i);const r=dt(t,e[n]),s=(0,m.BF)().getIntegration(zt);return s&&(0,tt.z)([r,"access",t=>t.stacktrace,"optionalAccess",t=>t.frames])&&await s.addSourceContextToFrames(r.stacktrace.frames),new Promise(((s,o)=>{this._walkErrorTree(t,e[n],n,[r,...i]).then(s).then(null,(()=>{o()}))}))}}qt.__initStatic();var Ht=n(6928);let $t;class Yt{constructor(){Yt.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=Yt.id}setupOnce(t,e){t((t=>e().getIntegration(Yt)?{...t,modules:{...t.modules,...this._getModules()}}:t))}_getModules(){return $t||($t=function(){const t=n.c[n.s]&&n.c[n.s].paths||[],e=function(){try{return n.c?Object.keys(n.c):[]}catch(t){return[]}}(),i={},r={};return e.forEach((e=>{let n=e;const s=()=>{const e=n;if(n=(0,Ht.dirname)(e),!n||e===n||r[e])return;if(t.indexOf(n)<0)return s();const o=(0,Ht.join)(e,"package.json");if(r[e]=!0,!(0,Ut.existsSync)(o))return s();try{const t=JSON.parse((0,Ut.readFileSync)(o,"utf8"));i[t.name]=t.version}catch(t){}};s()})),i}()),$t}}Yt.__initStatic();var Wt=n(5317);const Vt=(0,ut.promisify)(Ut.readFile),Jt=(0,ut.promisify)(Ut.readdir);class Xt{static __initStatic(){this.id="Context"}__init(){this.name=Xt.id}constructor(t={app:!0,os:!0,device:!0,culture:!0}){this._options=t,Xt.prototype.__init.call(this)}setupOnce(t){t((t=>this.addContext(t)))}async addContext(t){void 0===this._cachedContext&&(this._cachedContext=this._getContexts());const e=this._updateContext(await this._cachedContext);return t.contexts={...t.contexts,app:{...e.app,...(0,tt.z)([t,"access",t=>t.contexts,"optionalAccess",t=>t.app])},os:{...e.os,...(0,tt.z)([t,"access",t=>t.contexts,"optionalAccess",t=>t.os])},device:{...e.device,...(0,tt.z)([t,"access",t=>t.contexts,"optionalAccess",t=>t.device])},culture:{...e.culture,...(0,tt.z)([t,"access",t=>t.contexts,"optionalAccess",t=>t.culture])}},t}_updateContext(t){return(0,tt.z)([t,"optionalAccess",t=>t.app,"optionalAccess",t=>t.app_memory])&&(t.app.app_memory=process.memoryUsage().rss),(0,tt.z)([t,"optionalAccess",t=>t.device,"optionalAccess",t=>t.free_memory])&&(t.device.free_memory=ht.freemem()),t}async _getContexts(){const t={};if(this._options.os&&(t.os=await async function(){const t=ht.platform();switch(t){case"darwin":return async function(){const t={kernel_version:ht.release(),name:"Mac OS X",version:"10."+(Number(ht.release().split(".")[0])-4)};try{const e=await new Promise(((t,e)=>{(0,Wt.execFile)("/usr/bin/sw_vers",((n,i)=>{n?e(n):t(i)}))}));t.name=te(/^ProductName:\s+(.*)$/m,e),t.version=te(/^ProductVersion:\s+(.*)$/m,e),t.build=te(/^BuildVersion:\s+(.*)$/m,e)}catch(t){}return t}();case"linux":return async function(){const t={kernel_version:ht.release(),name:"Linux"};try{const e=await Jt("/etc"),n=Kt.find((t=>e.includes(t.name)));if(!n)return t;const i=(0,Ht.join)("/etc",n.name),r=(await Vt(i,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;t.name=s.find((t=>r.indexOf(ee(t))>=0))||s[0];const o=ee(t.name);t.version=Zt[o](r)}catch(t){}return t}();default:return{name:Qt[t]||t,version:ht.release()}}}()),this._options.app&&(t.app=function(){const t=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:t}}()),this._options.device&&(t.device=function(t){const e={},n=ht.uptime&&ht.uptime();if("number"==typeof n&&(e.boot_time=new Date(Date.now()-1e3*n).toISOString()),e.arch=ht.arch(),(!0===t||t.memory)&&(e.memory_size=ht.totalmem(),e.free_memory=ht.freemem()),!0===t||t.cpu){const t=ht.cpus();if(t&&t.length){const n=t[0];e.processor_count=t.length,e.cpu_description=n.model,e.processor_frequency=n.speed}}return e}(this._options.device)),this._options.culture){const e=function(){try{if("string"!=typeof process.versions.icu)return;const t=new Date(9e8);if("enero"===new Intl.DateTimeFormat("es",{month:"long"}).format(t)){const t=Intl.DateTimeFormat().resolvedOptions();return{locale:t.locale,timezone:t.timeZone}}}catch(t){}}();e&&(t.culture=e)}return t}}Xt.__initStatic();const Qt={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},Kt=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],Zt={alpine:t=>t,arch:t=>te(/distrib_release=(.*)/,t),centos:t=>te(/release ([^ ]+)/,t),debian:t=>t,fedora:t=>te(/release (..)/,t),mint:t=>te(/distrib_release=(.*)/,t),red:t=>te(/release ([^ ]+)/,t),suse:t=>te(/VERSION = (.*)\n/,t),ubuntu:t=>te(/distrib_release=(.*)/,t)};function te(t,e){const n=t.exec(e);return n?n[1]:void 0}function ee(t){return t.split(" ")[0].toLowerCase()}var ne=n(8351),ie=n(2879),re=n(7427);const se={ip:!1,request:!0,transaction:!0,user:!0},oe=["cookies","data","headers","method","query_string","url"],ae=["id","username","email"];function ce(t,e={}){const n=t.method&&t.method.toUpperCase();let i="",r="url";e.customRoute||t.route?(i=e.customRoute||`${t.baseUrl||""}${t.route&&t.route.path}`,r="route"):(t.originalUrl||t.url)&&(i=(0,ie.f)(t.originalUrl||t.url||""));let s="";return e.method&&n&&(s+=n),e.method&&e.path&&(s+=" "),e.path&&i&&(s+=i),[s,r]}function le(t,e){const{include:n=oe}=e||{},i={},r=t.headers||{},s=t.method,o=t.hostname||t.host||r.host||"<no host>",a="https"===t.protocol||t.socket&&t.socket.encrypted?"https":"http",c=t.originalUrl||t.url||"",l=c.startsWith(a)?c:`${a}://${o}${c}`;return n.forEach((e=>{switch(e){case"headers":i.headers=r,n.includes("cookies")||delete i.headers.cookie;break;case"method":i.method=s;break;case"url":i.url=l;break;case"cookies":i.cookies=t.cookies||r.cookie&&re.q(r.cookie)||{};break;case"query_string":i.query_string=function(t){let e=t.originalUrl||t.url||"";if(e)return e.startsWith("/")&&(e=`http://dogs.are.great${e}`),t.query||void 0!==typeof URL&&new URL(e).search.replace("?","")||bt.parse(e).query||void 0}(t);break;case"data":if("GET"===s||"HEAD"===s)break;void 0!==t.body&&(i.data=(0,R.Kg)(t.body)?t.body:JSON.stringify(F(t.body)));break;default:({}).hasOwnProperty.call(t,e)&&(i[e]=t[e])}})),i}function he(t,e,n){const i={...se,...(0,tt.z)([n,"optionalAccess",t=>t.include])};if(i.request){const n=Array.isArray(i.request)?le(e,{include:i.request}):le(e);t.request={...t.request,...n}}if(i.user){const n=e.user&&(0,R.Qd)(e.user)?function(t,e){const n={};return(Array.isArray(e)?e:ae).forEach((e=>{t&&e in t&&(n[e]=t[e])})),n}(e.user,i.user):{};Object.keys(n).length&&(t.user={...t.user,...n})}if(i.ip){const n=e.ip||e.socket&&e.socket.remoteAddress;n&&(t.user={...t.user,ip_address:n})}return i.transaction&&!t.transaction&&(t.transaction=function(t,e){switch(e){case"path":return ce(t,{path:!0})[0];case"handler":return t.route&&t.route.stack&&t.route.stack[0]&&t.route.stack[0].name||"<anonymous>";default:return ce(t,{path:!0,method:!0})[0]}}(e,i.transaction)),t}const ue={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class pe{static __initStatic(){this.id="RequestData"}__init(){this.name=pe.id}constructor(t={}){pe.prototype.__init.call(this),this._addRequestData=he,this._options={...ue,...t,include:{method:!0,...ue.include,...t.include,user:t.include&&"boolean"==typeof t.include.user?t.include.user:{...ue.include.user,...(t.include||{}).user}}}}setupOnce(t,e){const{transactionNamingScheme:n}=this._options;t((t=>{const i=e(),r=i.getIntegration(pe),{sdkProcessingMetadata:s={}}=t,o=s.request;if(!r||!o)return t;const a=s.requestDataOptionsFromExpressHandler||s.requestDataOptionsFromGCPWrapper||function(t){const{transactionNamingScheme:e,include:{ip:n,user:i,...r}}=t,s=[];for(const[t,e]of Object.entries(r))e&&s.push(t);let o;if(void 0===i)o=!0;else if("boolean"==typeof i)o=i;else{const t=[];for(const[e,n]of Object.entries(i))n&&t.push(e);o=t}return{include:{ip:n,user:o,request:0!==s.length?s:void 0,transaction:e}}}(this._options),c=this._addRequestData(t,o,a);if("transaction"===t.type||"handler"===n)return c;const l=o._sentryTransaction;if(l){const t="sentry.javascript.nextjs"===function(t){try{return t.getClient().getOptions()._metadata.sdk.name}catch(t){return}}(i)?l.name.startsWith("/api"):"path"!==n,[e]=(0,ne.Up)(o,{path:!0,method:t,customRoute:l.name});c.transaction=e}return c}))}}pe.__initStatic();const de=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function fe(t){const e=de.exec(t);return e?e.slice(1):[]}function me(t){const e=fe(t),n=e[0];let i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."}function ge(t){return t.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}const _e=[new d,new c,new Tt,new Dt,new Ft,new Lt,new zt,new Xt,new Yt,new pe,new qt];function ye(t={}){const e=(0,m.EU)(),n=(0,tt.z)([e,"access",t=>t.__SENTRY__,"optionalAccess",t=>t.integrations])||[];if(t.defaultIntegrations=!1===t.defaultIntegrations?[]:[...Array.isArray(t.defaultIntegrations)?t.defaultIntegrations:_e,...n],void 0===t.dsn&&process.env.SENTRY_DSN&&(t.dsn=process.env.SENTRY_DSN),void 0===t.tracesSampleRate&&process.env.SENTRY_TRACES_SAMPLE_RATE){const e=parseFloat(process.env.SENTRY_TRACES_SAMPLE_RATE);isFinite(e)&&(t.tracesSampleRate=e)}if(void 0===t.release){const e=Ee();void 0!==e?t.release=e:t.autoSessionTracking=!1}void 0===t.environment&&process.env.SENTRY_ENVIRONMENT&&(t.environment=process.env.SENTRY_ENVIRONMENT),void 0===t.autoSessionTracking&&void 0!==t.dsn&&(t.autoSessionTracking=!0),void 0===t.instrumenter&&(t.instrumenter="sentry"),St.active&&(0,m.lq)(e,(0,m.BF)());const i={...t,stackParser:(0,B.vk)(t.stackParser||Se),integrations:nt(t),transport:t.transport||xt};!function(t,e){!0===e.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?l.vF.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=(0,m.BF)(),i=n.getScope();i&&i.update(e.initialScope);const r=new t(e);n.bindClient(r)}(ft,i),t.autoSessionTracking&&function(){const t=(0,m.BF)();t.startSession(),process.on("beforeExit",(()=>{const e=(0,tt.z)([t,"access",t=>t.getScope,"call",t=>t(),"optionalAccess",t=>t.getSession,"call",t=>t()]);e&&!["exited","crashed"].includes(e.status)&&t.endSession()}))}()}function be(){return(0,m.BF)().lastEventId()}async function ve(t){const e=(0,m.BF)().getClient();return e?e.flush(t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function we(t){const e=(0,m.BF)().getClient();return e?e.close(t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function xe(t){if(void 0===t)return!1;const e=t&&t.getOptions();return!(!e||void 0===e.autoSessionTracking)&&e.autoSessionTracking}function Ee(t){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:Et.OW.SENTRY_RELEASE&&Et.OW.SENTRY_RELEASE.id?Et.OW.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||t}const Se=(0,B.gd)((0,B.o)((function(t){if(!t)return;const e=ge(t),i=ge(`${n.c[n.s]&&n.c[n.s].filename&&me(n.c[n.s].filename)||global.process.cwd()}/`),r=function(t,e){let n=fe(t)[2];return e&&n.substr(-3)===e&&(n=n.substr(0,n.length-3)),n}(e,".js"),s=me(e);let o=s.lastIndexOf("/node_modules/");if(o>-1)return`${s.substr(o+14).replace(/\//g,".")}:${r}`;if(o=`${s}/`.lastIndexOf(i,0),0===o){let t=s.substr(i.length).replace(/\//g,".");return t&&(t+=":"),t+=r,t}return r})));function ke(t){const e=Ht.resolve(t);if(!Ut.existsSync(e))throw new Error(`Cannot read contents of ${e}. Directory does not exist.`);if(!Ut.statSync(e).isDirectory())throw new Error(`Cannot read contents of ${e}, because it is not a directory.`);const n=t=>Ut.readdirSync(t).reduce(((e,i)=>{const r=Ht.join(t,i);return Ut.statSync(r).isDirectory()?[...e,...n(r)]:[...e,r]}),[]);return n(e).map((t=>Ht.relative(e,t)))}var Te=n(6524);function Ce(t,e){return le(t,{include:e})}function Oe(t,e,n={}){return he(t,e,{include:n})}function Ie(){return function(t,e,n){const i=(0,m.BF)(),r=(0,tt.z)([i,"access",t=>t.getClient,"call",t=>t(),"optionalAccess",t=>t.getOptions,"call",t=>t()]);if(!r||"sentry"!==r.instrumenter||"OPTIONS"===(0,tt.z)([t,"access",t=>t.method,"optionalAccess",t=>t.toUpperCase,"call",t=>t()])||"HEAD"===(0,tt.z)([t,"access",t=>t.method,"optionalAccess",t=>t.toUpperCase,"call",t=>t()]))return n();if(!("tracesSampleRate"in r)&&!("tracesSampler"in r))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.warn("Sentry `tracingHandler` is being used, but tracing is disabled. Please enable tracing by setting either `tracesSampleRate` or `tracesSampler` in your `Sentry.init()` options."),n();const s=t.headers&&(0,R.Kg)(t.headers["sentry-trace"])&&(0,Te.n)(t.headers["sentry-trace"]),o=(0,tt.z)([t,"access",t=>t.headers,"optionalAccess",t=>t.baggage]),a=(0,Ot.yD)(o),[c,h]=(0,ne.Up)(t,{path:!0,method:!0}),u=I({name:c,op:"http.server",...s,metadata:{dynamicSamplingContext:s&&!a?{}:a,request:t,source:h}},{request:le(t)});i.configureScope((t=>{t.setSpan(u)})),e.__sentry_transaction=u,e.once("finish",(()=>{setImmediate((()=>{(0,ne.em)(u,t),u.setHttpStatus(e.statusCode),u.finish()}))})),n()}}function Ae(t){const e=function(t={}){let e;if("include"in t)e={include:t.include};else{const{ip:n,request:i,transaction:r,user:s}=t;(n||i||r||s)&&(e={include:(0,o.Ce)({ip:n,request:i,transaction:r,user:s})})}return e}(t),n=(0,m.BF)(),i=n.getClient();if(i&&xe(i)){i.initSessionFlusher();const t=n.getScope();t&&t.getSession()&&t.setSession()}return function(n,i,r){if(t&&t.flushTimeout&&t.flushTimeout>0){const e=i.end;i.end=function(n,i,r){ve(t.flushTimeout).then((()=>{e.call(this,n,i,r)})).then(null,(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.vF.error(t),e.call(this,n,i,r)}))}}const s=St.create();s.add(n),s.add(i),s.run((()=>{const t=(0,m.BF)();t.configureScope((i=>{if(i.setSDKProcessingMetadata({request:n,requestDataOptionsFromExpressHandler:e}),xe(t.getClient())){const e=t.getScope();e&&e.setRequestSession({status:"ok"})}})),i.once("finish",(()=>{const e=t.getClient();xe(e)&&setImmediate((()=>{e&&e._captureRequestSession&&e._captureRequestSession()}))})),r()}))}}function Pe(t){const e=function(t){const e=t.status||t.statusCode||t.status_code||t.output&&t.output.statusCode;return e?parseInt(e,10):500}(t);return e>=500}function Ne(t){return function(e,n,i,r){(t&&t.shouldHandleError||Pe)(e)?O((t=>{t.setSDKProcessingMetadata({request:n});const s=i.__sentry_transaction;s&&void 0===t.getSpan()&&t.setSpan(s);const o=(0,m.BF)().getClient();if(o&&xe(o)&&void 0!==o._sessionFlusher){const e=t.getRequestSession();e&&void 0!==e.status&&(e.status="crashed")}const a=_(e);i.sentry=a,r(e)})):r(e)}}const Me={...i,...r},De=(0,m.EU)();De.__SENTRY__&&(De.__SENTRY__.extensions=De.__SENTRY__.extensions||{},De.__SENTRY__.extensions.domain=De.__SENTRY__.extensions.domain||St)},8664:(t,e,n)=>{"use strict";n.d(e,{lk:()=>g,pd:()=>m});var i=n(6641),r=n(7412),s=n(3816),o=n(258),a=n(7230),c=n(4408);function l(){const t=(0,c.Z7)();if(t){const e="internal_error";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}var h=n(9375),u=n(7253);function p(){const t=this.getScope();if(t){const e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function d(t,e,n){if(!(0,c.wt)(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setMetadata({sampleRate:Number(t.sampled)}),t;let i;return"function"==typeof e.tracesSampler?(i=e.tracesSampler(n),t.setMetadata({sampleRate:Number(i)})):void 0!==n.parentSampled?i=n.parentSampled:(i=e.tracesSampleRate,t.setMetadata({sampleRate:Number(i)})),o=i,((0,s.yr)(o)||"number"!=typeof o&&"boolean"!=typeof o?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!(o<0||o>1)||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${o}.`),0))?i?(t.sampled=Math.random()<i,t.sampled?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] starting ${t.op} transaction - ${t.name}`),t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),t)):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t);var o}function f(t,e){const n=this.getClient(),i=n&&n.getOptions()||{},s=i.instrumenter||"sentry",o=t.instrumenter||"sentry";s!==o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let a=new u.Z(t,this);return a=d(a,i,{parentSampled:t.parentSampled,transactionContext:t,...e}),a.sampled&&a.initSpanRecorder(i._experiments&&i._experiments.maxSpans),a}function m(t,e,n,i,r,s,o){const a=t.getClient(),c=a&&a.getOptions()||{};let l=new h.zX(e,t,n,i,o,r);return l=d(l,c,{parentSampled:e.parentSampled,transactionContext:e,...s}),l.sampled&&l.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l}function g(){!function(){const t=(0,i.EU)();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=f),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=p))}(),(0,o.wD)()&&function(){const e=(0,i.EU)();if(!e.__SENTRY__)return;const n={mongodb:()=>new((0,o.fj)(t,"./integrations/node/mongo").Mongo),mongoose:()=>new((0,o.fj)(t,"./integrations/node/mongo").Mongo)({mongoose:!0}),mysql:()=>new((0,o.fj)(t,"./integrations/node/mysql").Mysql),pg:()=>new((0,o.fj)(t,"./integrations/node/postgres").Postgres)},r=Object.keys(n).filter((t=>!!(0,o.Vw)(t))).map((t=>{try{return n[t]()}catch(t){return}})).filter((t=>t));r.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...r])}(),(0,a.O)("error",l),(0,a.O)("unhandledrejection",l)}t=n.hmd(t)},9375:(t,e,n)=>{"use strict";n.d(e,{$F:()=>a,Xs:()=>l,nJ:()=>c,zX:()=>u});var i=n(9297),r=n(7412),s=n(9121),o=n(7253);const a=1e3,c=3e4,l=5e3;class h extends s.lh{constructor(t,e,n,i){super(i),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=n}add(t){t.spanId!==this.transactionSpanId&&(t.finish=e=>{t.endTimestamp="number"==typeof e?e:(0,i.LU)(),this._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),super.add(t)}}class u extends o.Z{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(t,e,n=a,i=c,s=l,o=!1){super(t,e),this._idleHub=e,this._idleTimeout=n,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,u.prototype.__init.call(this),u.prototype.__init2.call(this),u.prototype.__init3.call(this),u.prototype.__init4.call(this),o&&(p(e),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),e.configureScope((t=>t.setSpan(this)))),this._startIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())}),this._finalTimeout)}finish(t=(0,i.LU)()){if(this._finished=!0,this.activities={},this.spanRecorder){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanId===this.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const n=e.startTimestamp<t;return n||("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,void 0,2)),n})),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] flushing IdleTransaction")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] No active IdleTransaction");return this._onScope&&p(this._idleHub),super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this._finished||this._pushActivity(t)},n=t=>{this._finished||this._popActivity(t)};this.spanRecorder=new h(e,n,this.spanId,t),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(t){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||this.finish(t)}),this._idleTimeout)}_pushActivity(t){this._cancelIdleTimeout(),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] popActivity ${t}`),delete this.activities[t],("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const t=(0,i.LU)()+this._idleTimeout/1e3;this._startIdleTimeout(t)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}_pingHeartbeat(){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function p(t){const e=t.getScope();e&&e.getTransaction()&&e.setSpan(void 0)}},8031:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BROWSER_TRACING_INTEGRATION_ID:()=>et,BrowserTracing:()=>it,IdleTransaction:()=>O.zX,Integrations:()=>i,Span:()=>ot.L9,SpanStatus:()=>st,TRACEPARENT_REGEXP:()=>k.M,Transaction:()=>at.Z,addExtensionMethods:()=>r.lk,defaultRequestInstrumentationOptions:()=>Z,extractTraceparentData:()=>k.n,getActiveTransaction:()=>I.Z7,hasTracingEnabled:()=>I.wt,instrumentOutgoingRequests:()=>tt,spanStatusfromHttpCode:()=>ot.o6,startIdleTransaction:()=>r.pd,stripUrlQueryAndFragment:()=>a.f});var i={};n.r(i),n.d(i,{Apollo:()=>E,BrowserTracing:()=>it,Express:()=>u,GraphQL:()=>w,Mongo:()=>b,Mysql:()=>g,Postgres:()=>m,Prisma:()=>v});var r=n(8664),s=n(853),o=n(7412),a=n(2879),c=n(8351),l=n(3816);function h(t){const e=(0,s.z)([t,"call",t=>t(),"access",t=>t.getClient,"call",t=>t(),"optionalAccess",t=>t.getOptions,"call",t=>t()]);return"sentry"!==((0,s.z)([e,"optionalAccess",t=>t.instrumenter])||"sentry")}class u{static __initStatic(){this.id="Express"}__init(){this.name=u.id}constructor(t={}){u.prototype.__init.call(this),this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(t,e){this._router?h(e)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("Express Integration is skipped because of instrumenter configuration."):(function(t,e=[]){e.forEach((e=>function(t,e){const n=t[e];return t[e]=function(...t){return n.call(this,...function(t,e){return t.map((t=>"function"==typeof t?p(t,e):Array.isArray(t)?t.map((t=>"function"==typeof t?p(t,e):t)):t))}(t,e))},t}(t,e)))}(this._router,this._methods),function(t){const e="settings"in t;e&&void 0===t._router&&t.lazyrouter&&t.lazyrouter();const n=e?t._router:t;if(!n)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.debug("Routing instrumentation is currently only supported in Express 4."));const i=Object.getPrototypeOf(n),r=i.process_params;i.process_params=function(t,e,n,i,o){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:h,isRegex:u,isArray:p,numExtraSegments:d}=function(t){const e=(0,s.z)([t,"access",t=>t.route,"optionalAccess",t=>t.path]),n=(0,l.gd)(e),i=Array.isArray(e);if(!e)return{isRegex:n,isArray:i,numExtraSegments:0};const r=i?Math.max(e.reduce(((t,e)=>t+(0,a.c4)(e.toString())),0)-(0,a.c4)(t.path||""),0):0,o=function(t,e){return t?e.map((t=>t.toString())).join(","):e&&e.toString()}(i,e);return{layerRoutePath:o,isRegex:n,isArray:i,numExtraSegments:r}}(t);(h||u||p)&&(n._hasParameters=!0);const f=(h||t.path||"").split("/").filter((t=>t.length>0&&(u||p||!t.includes("*")))).join("/");if(f&&f.length>0&&(n._reconstructedRoute+=`/${f}${u?"/":""}`),(0,a.c4)(n.originalUrl||"")+d===(0,a.c4)(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl);const t=i.__sentry_transaction;if(t&&"custom"!==t.metadata.source){const e=n._reconstructedRoute||"/";t.setName(...(0,c.Up)(n,{path:!0,method:!0,customRoute:e}))}}return r.call(this,t,e,n,i,o)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("ExpressIntegration is missing an Express instance")}}function p(t,e){const n=t.length;switch(n){case 2:return function(n,i){const r=i.__sentry_transaction;if(r){const n=r.startChild({description:t.name,op:`middleware.express.${e}`});i.once("finish",(()=>{n.finish()}))}return t.call(this,n,i)};case 3:return function(n,i,r){const o=i.__sentry_transaction,a=(0,s.z)([o,"optionalAccess",t=>t.startChild,"call",n=>n({description:t.name,op:`middleware.express.${e}`})]);t.call(this,n,i,(function(...t){(0,s.z)([a,"optionalAccess",t=>t.finish,"call",t=>t()]),r.call(this,...t)}))};case 4:return function(n,i,r,o){const a=r.__sentry_transaction,c=(0,s.z)([a,"optionalAccess",t=>t.startChild,"call",n=>n({description:t.name,op:`middleware.express.${e}`})]);t.call(this,n,i,r,(function(...t){(0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),o.call(this,...t)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}u.__initStatic();var d=n(258),f=n(792);class m{static __initStatic(){this.id="Postgres"}__init(){this.name=m.id}constructor(t={}){m.prototype.__init.call(this),this._usePgNative=!!t.usePgNative}setupOnce(t,e){if(h(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("Postgres Integration is skipped because of instrumenter configuration."));const n=(0,d.Vw)("pg");if(!n)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!(0,s.z)([n,"access",t=>t.native,"optionalAccess",t=>t.Client]))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:i}=this._usePgNative?n.native:n;(0,f.GS)(i.prototype,"query",(function(t){return function(n,i,r){const o=e().getScope(),a=(0,s.z)([o,"optionalAccess",t=>t.getSpan,"call",t=>t()]),c=(0,s.z)([a,"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"==typeof n?n:n.text,op:"db"})]);if("function"==typeof r)return t.call(this,n,i,(function(t,e){(0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),r(t,e)}));if("function"==typeof i)return t.call(this,n,(function(t,e){(0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),i(t,e)}));const h=void 0!==i?t.call(this,n,i):t.call(this,n);return(0,l.Qg)(h)?h.then((t=>((0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):((0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),h)}}))}}m.__initStatic();class g{constructor(){g.prototype.__init.call(this)}static __initStatic(){this.id="Mysql"}__init(){this.name=g.id}setupOnce(t,e){if(h(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("Mysql Integration is skipped because of instrumenter configuration."));const n=(0,d.Vw)("mysql/lib/Connection.js");n?(0,f.GS)(n,"createQuery",(function(t){return function(n,i,r){const o=e().getScope(),a=(0,s.z)([o,"optionalAccess",t=>t.getSpan,"call",t=>t()]),c=(0,s.z)([a,"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"==typeof n?n:n.sql,op:"db"})]);return"function"==typeof r?t.call(this,n,i,(function(t,e,n){(0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),r(t,e,n)})):"function"==typeof i?t.call(this,n,(function(t,e,n){(0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),i(t,e,n)})):t.call(this,n,i,r)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("Mysql Integration was unable to require `mysql` package.")}}g.__initStatic();const _=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],y={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class b{static __initStatic(){this.id="Mongo"}__init(){this.name=b.id}constructor(t={}){b.prototype.__init.call(this),this._operations=Array.isArray(t.operations)?t.operations:_,this._describeOperations=!("describeOperations"in t)||t.describeOperations,this._useMongoose=!!t.useMongoose}setupOnce(t,e){if(h(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this._useMongoose?"mongoose":"mongodb",i=(0,d.Vw)(n);i?this._instrumentOperations(i.Collection,this._operations,e):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error(`Mongo Integration was unable to require \`${n}\` package.`)}_instrumentOperations(t,e,n){e.forEach((e=>this._patchOperation(t,e,n)))}_patchOperation(t,e,n){if(!(e in t.prototype))return;const i=this._getSpanContextFromOperationArguments.bind(this);(0,f.GS)(t.prototype,e,(function(t){return function(...r){const o=r[r.length-1],a=n().getScope(),c=(0,s.z)([a,"optionalAccess",t=>t.getSpan,"call",t=>t()]);if("function"!=typeof o||"mapReduce"===e&&2===r.length){const n=(0,s.z)([c,"optionalAccess",t=>t.startChild,"call",t=>t(i(this,e,r))]),o=t.call(this,...r);if((0,l.Qg)(o))return o.then((t=>((0,s.z)([n,"optionalAccess",t=>t.finish,"call",t=>t()]),t)));if((h=o)&&"object"==typeof h&&h.once&&"function"==typeof h.once){const t=o;try{t.once("close",(()=>{(0,s.z)([n,"optionalAccess",t=>t.finish,"call",t=>t()])}))}catch(t){(0,s.z)([n,"optionalAccess",t=>t.finish,"call",t=>t()])}return t}return(0,s.z)([n,"optionalAccess",t=>t.finish,"call",t=>t()]),o}var h;const u=(0,s.z)([c,"optionalAccess",t=>t.startChild,"call",t=>t(i(this,e,r.slice(0,-1)))]);return t.call(this,...r.slice(0,-1),(function(t,e){(0,s.z)([u,"optionalAccess",t=>t.finish,"call",t=>t()]),o(t,e)}))}}))}_getSpanContextFromOperationArguments(t,e,n){const i={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},r={op:"db",description:e,data:i},s=y[e],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!s||!o)return r;try{if("mapReduce"===e){const[t,e]=n;i[s[0]]="string"==typeof t?t:t.name||"<anonymous>",i[s[1]]="string"==typeof e?e:e.name||"<anonymous>"}else for(let t=0;t<s.length;t++)i[s[t]]=JSON.stringify(n[t])}catch(t){}return r}}b.__initStatic();class v{static __initStatic(){this.id="Prisma"}__init(){this.name=v.id}constructor(t={}){var e;v.prototype.__init.call(this),(e=t.client)&&e.$use?this._client=t.client:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`Unsupported Prisma client provided to PrismaIntegration. Provided client: ${JSON.stringify(t.client)}`)}setupOnce(t,e){this._client?h(e)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("Prisma Integration is skipped because of instrumenter configuration."):this._client.$use(((t,n)=>{const i=e().getScope(),r=(0,s.z)([i,"optionalAccess",t=>t.getSpan,"call",t=>t()]),o=t.action,a=t.model,c=(0,s.z)([r,"optionalAccess",t=>t.startChild,"call",t=>t({description:a?`${a} ${o}`:o,op:"db.sql.prisma"})]),h=n(t);return(0,l.Qg)(h)?h.then((t=>((0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):((0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),h)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("PrismaIntegration is missing a Prisma Client Instance")}}v.__initStatic();class w{constructor(){w.prototype.__init.call(this)}static __initStatic(){this.id="GraphQL"}__init(){this.name=w.id}setupOnce(t,e){if(h(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=(0,d.Vw)("graphql/execution/execute.js");n?(0,f.GS)(n,"execute",(function(t){return function(...n){const i=e().getScope(),r=(0,s.z)([i,"optionalAccess",t=>t.getSpan,"call",t=>t()]),o=(0,s.z)([r,"optionalAccess",t=>t.startChild,"call",t=>t({description:"execute",op:"graphql.execute"})]);(0,s.z)([i,"optionalAccess",t=>t.setSpan,"call",t=>t(o)]);const a=t.call(this,...n);return(0,l.Qg)(a)?a.then((t=>((0,s.z)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),(0,s.z)([i,"optionalAccess",t=>t.setSpan,"call",t=>t(r)]),t))):((0,s.z)([o,"optionalAccess",t=>t.finish,"call",t=>t()]),(0,s.z)([i,"optionalAccess",t=>t.setSpan,"call",t=>t(r)]),a)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("GraphQL Integration was unable to require graphql/execution package.")}}w.__initStatic();var x=n(6936);class E{constructor(){E.prototype.__init.call(this)}static __initStatic(){this.id="Apollo"}__init(){this.name=E.id}setupOnce(t,e){if(h(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("Apollo Integration is skipped because of instrumenter configuration."));const n=(0,d.Vw)("apollo-server-core");n?(0,f.GS)(n.ApolloServerBase.prototype,"constructSchema",(function(t){return function(){if(!this.config.resolvers)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?o.vF.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property."):this.config.modules&&o.vF.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),o.vF.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),t.call(this);const n=(0,x.k9)(this.config.resolvers);return this.config.resolvers=n.map((t=>(Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((i=>{"function"==typeof t[n][i]&&function(t,e,n,i){(0,f.GS)(t[e],n,(function(t){return function(...r){const o=i().getScope(),a=(0,s.z)([o,"optionalAccess",t=>t.getSpan,"call",t=>t()]),c=(0,s.z)([a,"optionalAccess",t=>t.startChild,"call",t=>t({description:`${e}.${n}`,op:"graphql.resolve"})]),h=t.call(this,...r);return(0,l.Qg)(h)?h.then((t=>((0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):((0,s.z)([c,"optionalAccess",t=>t.finish,"call",t=>t()]),h)}}))}(t,n,i,e)}))})),t))),t.call(this)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.error("Apollo Integration was unable to require apollo-server-core package.")}}E.__initStatic();var S=n(2460),k=n(6524),T=n(5584),C=n(9766),O=n(9375),I=n(4408);const A=n(6341).OW;var P=n(9297);const N=(t,e,n)=>{let i,r;return s=>{e.value>=0&&(s||n)&&(r=e.value-(i||0),(r||void 0===i)&&(i=e.value,e.delta=r,t(e)))}},M=()=>A.__WEB_VITALS_POLYFILL__?A.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const t=A.performance.timing,e=A.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==e?"back_forward":1===e?"reload":"navigate"};for(const e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n})()):A.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],D=()=>{const t=M();return t&&t.activationStart||0},R=(t,e)=>{const n=M();let i="navigate";return n&&(i=A.document.prerendering||D()>0?"prerender":n.type.replace(/_/g,"-")),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},B=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const i=new PerformanceObserver((t=>{e(t.getEntries())}));return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch(t){}},F=(t,e)=>{const n=i=>{"pagehide"!==i.type&&"hidden"!==A.document.visibilityState||(t(i),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let L=-1;const U=()=>(L<0&&(L="hidden"!==A.document.visibilityState||A.document.prerendering?1/0:0,F((({timeStamp:t})=>{L=t}),!0)),{get firstHiddenTime(){return L}}),j={};function z(t){return"number"==typeof t&&isFinite(t)}function G(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}function q(){return A&&A.addEventListener&&A.performance}let H,$,Y=0,W={};function V(){const t=q();t&&P.k3&&(t.mark&&A.performance.mark("sentry-tracing-init"),(t=>{const e=R("CLS",0);let n,i=0,r=[];const s=t=>{t.forEach((t=>{if(!t.hadRecentInput){const s=r[0],o=r[r.length-1];i&&0!==r.length&&t.startTime-o.startTime<1e3&&t.startTime-s.startTime<5e3?(i+=t.value,r.push(t)):(i=t.value,r=[t]),i>e.value&&(e.value=i,e.entries=r,n&&n())}}))},o=B("layout-shift",s);o&&(n=N(t,e),F((()=>{s(o.takeRecords()),n(!0)})))})((t=>{const e=t.entries.pop();e&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding CLS"),W.cls={value:t.value,unit:""},$=e)})),(t=>{const e=U(),n=R("LCP");let i;const r=t=>{const r=t[t.length-1];if(r){const t=Math.max(r.startTime-D(),0);t<e.firstHiddenTime&&(n.value=t,n.entries=[r],i())}},s=B("largest-contentful-paint",r);if(s){i=N(t,n);const e=()=>{j[n.id]||(r(s.takeRecords()),s.disconnect(),j[n.id]=!0,i(!0))};["keydown","click"].forEach((t=>{addEventListener(t,e,{once:!0,capture:!0})})),F(e,!0)}})((t=>{const e=t.entries.pop();e&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding LCP"),W.lcp={value:t.value,unit:"millisecond"},H=e)})),(t=>{const e=U(),n=R("FID");let i;const r=t=>{t.startTime<e.firstHiddenTime&&(n.value=t.processingStart-t.startTime,n.entries.push(t),i(!0))},s=t=>{t.forEach(r)},o=B("first-input",s);i=N(t,n),o&&F((()=>{s(o.takeRecords()),o.disconnect()}),!0)})((t=>{const e=t.entries.pop();if(!e)return;const n=(0,I.rv)(P.k3),i=(0,I.rv)(e.startTime);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding FID"),W.fid={value:t.value,unit:"millisecond"},W["mark.fid"]={value:n+i,unit:"second"}})))}function J(t,e,n,i,r,s){const o=s?e[s]:e[`${n}End`],a=e[`${n}Start`];a&&o&&G(t,{op:"browser",description:(0,S.S)(r,(()=>n)),startTimestamp:i+(0,I.rv)(a),endTimestamp:i+(0,I.rv)(o)})}var X=n(7230),Q=n(9653);const K=["localhost",/^\//],Z={traceFetch:!0,traceXHR:!0,tracingOrigins:K,tracePropagationTargets:K};function tt(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:i,tracingOrigins:r,shouldCreateSpanForRequest:s}={traceFetch:Z.traceFetch,traceXHR:Z.traceXHR,...t},o="function"==typeof s?s:t=>!0,a=t=>function(t,e){return(0,Q.Xr)(t,e||K)}(t,i||r),c={};e&&(0,X.O)("fetch",(t=>{!function(t,e,n,i){if(!(0,I.wt)()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp){const e=t.fetchData.__span;if(!e)return;const n=i[e];return void(n&&(t.response?n.setHttpStatus(t.response.status):t.error&&n.setStatus("internal_error"),n.finish(),delete i[e]))}const r=(0,I.Z7)();if(r){const e=r.startChild({data:{...t.fetchData,type:"fetch"},description:`${t.fetchData.method} ${t.fetchData.url}`,op:"http.client"});t.fetchData.__span=e.spanId,i[e.spanId]=e;const s=t.args[0];t.args[1]=t.args[1]||{};const o=t.args[1];n(t.fetchData.url)&&(o.headers=function(t,e,n,i){const r=(0,T.De)(e),s=n.toTraceparent(),o="undefined"!=typeof Request&&(0,l.tH)(t,Request)?t.headers:i.headers;if(o){if("undefined"!=typeof Headers&&(0,l.tH)(o,Headers)){const t=new Headers(o);return t.append("sentry-trace",s),r&&t.append(T.hF,r),t}if(Array.isArray(o)){const t=[...o,["sentry-trace",s]];return r&&t.push([T.hF,r]),t}{const t="baggage"in o?o.baggage:void 0,e=[];return Array.isArray(t)?e.push(...t):t&&e.push(t),r&&e.push(r),{...o,"sentry-trace":s,baggage:e.length>0?e.join(","):void 0}}}return{"sentry-trace":s,baggage:r}}(s,r.getDynamicSamplingContext(),e,o),r.metadata.propagations++)}}(t,o,a,c)})),n&&(0,X.O)("xhr",(t=>{!function(t,e,n,i){if(!(0,I.wt)()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;const r=t.xhr.__sentry_xhr__;if(t.endTimestamp){const e=t.xhr.__sentry_xhr_span_id__;if(!e)return;const n=i[e];return void(n&&(n.setHttpStatus(r.status_code),n.finish(),delete i[e]))}const s=(0,I.Z7)();if(s){const e=s.startChild({data:{...r.data,type:"xhr",method:r.method,url:r.url},description:`${r.method} ${r.url}`,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=e.spanId,i[t.xhr.__sentry_xhr_span_id__]=e,t.xhr.setRequestHeader&&n(t.xhr.__sentry_xhr__.url))try{t.xhr.setRequestHeader("sentry-trace",e.toTraceparent());const n=s.getDynamicSamplingContext(),i=(0,T.De)(n);i&&t.xhr.setRequestHeader(T.hF,i),s.metadata.propagations++}catch(t){}}}(t,o,a,c)}))}const et="BrowserTracing",nt={idleTimeout:O.$F,finalTimeout:O.nJ,heartbeatInterval:O.Xs,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,n=!0){if(!A||!A.location)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn("Could not initialize routing instrumentation due to invalid location"));let i,r=A.location.href;e&&(i=t({name:A.location.pathname,op:"pageload",metadata:{source:"url"}})),n&&(0,X.O)("history",(({to:e,from:n})=>{void 0===n&&r&&-1!==r.indexOf(e)?r=void 0:n!==e&&(r=void 0,i&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.finish()),i=t({name:A.location.pathname,op:"navigation",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0,enableInteractions:!1},...Z};class it{__init(){this.name=et}constructor(t){it.prototype.__init.call(this),this.options={...nt,...t},t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),V(),(0,s.z)([this,"access",t=>t.options,"access",t=>t._experiments,"optionalAccess",t=>t.enableLongTask])&&B("longtask",(t=>{for(const e of t){const t=(0,I.Z7)();if(!t)return;const n=(0,I.rv)(P.k3+e.startTime),i=(0,I.rv)(e.duration);t.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:n,endTimestamp:n+i})}}))}setupOnce(t,e){this._getCurrentHub=e;const{routingInstrumentation:n,startTransactionOnLocationChange:i,startTransactionOnPageLoad:r,markBackgroundTransactions:a,traceFetch:c,traceXHR:l,tracePropagationTargets:h,shouldCreateSpanForRequest:u,_experiments:p}=this.options;n((t=>this._createRouteTransaction(t)),r,i),a&&(A&&A.document?A.document.addEventListener("visibilitychange",(()=>{const t=(0,I.Z7)();if(A.document.hidden&&t){const e="cancelled";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t.op}`),t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn("[Tracing] Could not set up background tab detection due to lack of global document")),(0,s.z)([p,"optionalAccess",t=>t.enableInteractions])&&this._registerInteractionListener(),tt({traceFetch:c,traceXHR:l,tracePropagationTargets:h,shouldCreateSpanForRequest:u})}_createRouteTransaction(t){if(!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`));const{beforeNavigate:e,idleTimeout:n,finalTimeout:i,heartbeatInterval:a}=this.options,c="pageload"===t.op,l=c?rt("sentry-trace"):null,h=c?rt("baggage"):null,u=l?(0,k.n)(l):void 0,p=h?(0,T.yD)(h):void 0,d={...t,...u,metadata:{...t.metadata,dynamicSamplingContext:u&&!p?{}:p},trimEnd:!0},f="function"==typeof e?e(d):d,m=void 0===f?{...d,sampled:!1}:f;m.metadata=m.name!==d.name?{...m.metadata,source:"custom"}:m.metadata,this._latestRouteName=m.name,this._latestRouteSource=(0,s.z)([m,"access",t=>t.metadata,"optionalAccess",t=>t.source]),!1===m.sampled&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Will not send ${m.op} transaction because of beforeNavigate.`),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Starting ${m.op} transaction on scope`);const g=this._getCurrentHub(),{location:_}=A,y=(0,r.pd)(g,m,n,i,!0,{location:_},a);return y.registerBeforeFinishCallback((t=>{!function(t){const e=q();if(!e||!A.performance.getEntries||!P.k3)return;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Tracing] Adding & adjusting spans using Performance API");const n=(0,I.rv)(P.k3),i=e.getEntries();let r,s;if(i.slice(Y).forEach((e=>{const i=(0,I.rv)(e.startTime),a=(0,I.rv)(e.duration);if(!("navigation"===t.op&&n+i<t.startTimestamp))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((i=>{J(t,e,i,n)})),J(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),J(t,e,"fetch",n,"cache","domainLookupStart"),J(t,e,"domainLookup",n,"DNS"),function(t,e,n){G(t,{op:"browser",description:"request",startTimestamp:n+(0,I.rv)(e.requestStart),endTimestamp:n+(0,I.rv)(e.responseEnd)}),G(t,{op:"browser",description:"response",startTimestamp:n+(0,I.rv)(e.responseStart),endTimestamp:n+(0,I.rv)(e.responseEnd)})}(t,e,n)}(t,e,n),r=n+(0,I.rv)(e.responseStart),s=n+(0,I.rv)(e.requestStart);break;case"mark":case"paint":case"measure":{!function(t,e,n,i,r){const s=r+n,o=s+i;G(t,{description:e.name,endTimestamp:o,op:e.entryType,startTimestamp:s})}(t,e,i,a,n);const r=U(),s=e.startTime<r.firstHiddenTime;"first-paint"===e.name&&s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding FP"),W.fp={value:e.startTime,unit:"millisecond"}),"first-contentful-paint"===e.name&&s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding FCP"),W.fcp={value:e.startTime,unit:"millisecond"});break}case"resource":{const r=e.name.replace(A.location.origin,"");!function(t,e,n,i,r,s){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const o={};"transferSize"in e&&(o["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(o["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(o["Decoded Body Size"]=e.decodedBodySize);const a=s+i;G(t,{description:n,endTimestamp:a+r,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",startTimestamp:a,data:o})}(t,e,r,i,a,n);break}}})),Y=Math.max(i.length-1,0),function(t){const e=A.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),z(n.rtt)&&(W["connection.rtt"]={value:n.rtt,unit:"millisecond"})),z(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),z(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===t.op){"number"==typeof r&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding TTFB"),W.ttfb={value:1e3*(r-t.startTimestamp),unit:"millisecond"},"number"==typeof s&&s<=r&&(W["ttfb.requestTime"]={value:1e3*(r-s),unit:"millisecond"})),["fcp","fp","lcp"].forEach((e=>{if(!W[e]||n>=t.startTimestamp)return;const i=W[e].value,r=n+(0,I.rv)(i),s=Math.abs(1e3*(r-t.startTimestamp)),a=s-i;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Measurements] Normalized ${e} from ${i} to ${s} (${a})`),W[e].value=s}));const e=W["mark.fid"];e&&W.fid&&(G(t,{description:"first input delay",endTimestamp:e.value+(0,I.rv)(W.fid.value),op:"ui.action",startTimestamp:e.value}),delete W["mark.fid"]),"fcp"in W||delete W.cls,Object.keys(W).forEach((e=>{t.setMeasurement(e,W[e].value,W[e].unit)})),function(t){H&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding LCP Data"),H.element&&t.setTag("lcp.element",(0,C.Hd)(H.element)),H.id&&t.setTag("lcp.id",H.id),H.url&&t.setTag("lcp.url",H.url.trim().slice(0,200)),t.setTag("lcp.size",H.size)),$&&$.sources&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding CLS Data"),$.sources.forEach(((e,n)=>t.setTag(`cls.source.${n+1}`,(0,C.Hd)(e.node)))))}(t)}H=void 0,$=void 0,W={}}(t)})),y}_registerInteractionListener(){let t;const e=()=>{const{idleTimeout:e,finalTimeout:n,heartbeatInterval:i}=this.options,s="ui.action.click";if(t&&(t.finish(),t=void 0),!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const a=this._getCurrentHub(),{location:c}=A,l={name:this._latestRouteName,op:s,trimEnd:!0,metadata:{source:(0,S.S)(this._latestRouteSource,(()=>"url"))}};t=(0,r.pd)(a,l,e,n,!0,{location:c},i)};["click"].forEach((t=>{addEventListener(t,e,{once:!1,capture:!0})}))}}function rt(t){const e=(0,C.NX)(`meta[name=${t}]`);return e?e.getAttribute("content"):null}var st,ot=n(9121);!function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(st||(st={}));var at=n(7253);("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,r.lk)()},9121:(t,e,n)=>{"use strict";n.d(e,{L9:()=>l,lh:()=>c,o6:()=>h});var i=n(2460),r=n(6936),s=n(9297),o=n(7412),a=n(792);class c{__init(){this.spans=[]}constructor(t=1e3){c.prototype.__init.call(this),this._maxlen=t}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class l{__init2(){this.traceId=(0,r.eJ)()}__init3(){this.spanId=(0,r.eJ)().substring(16)}__init4(){this.startTimestamp=(0,s.LU)()}__init5(){this.tags={}}__init6(){this.data={}}__init7(){this.instrumenter="sentry"}constructor(t){if(l.prototype.__init2.call(this),l.prototype.__init3.call(this),l.prototype.__init4.call(this),l.prototype.__init5.call(this),l.prototype.__init6.call(this),l.prototype.__init7.call(this),!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp),t.instrumenter&&(this.instrumenter=t.instrumenter)}startChild(t){const e=new l({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e),e.transaction=this.transaction,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&e.transaction){const n=`[Tracing] Starting '${t&&t.op||"< unknown op >"}' span on transaction '${e.transaction.name||"< unknown name >"}' (${e.transaction.spanId}).`;e.transaction.metadata.spanMetadata[e.spanId]={logMessage:n},o.vF.log(n)}return e}setTag(t,e){return this.tags={...this.tags,[t]:e},this}setData(t,e){return this.data={...this.data,[t]:e},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t));const e=h(t);return"unknown_error"!==e&&this.setStatus(e),this}isSuccess(){return"ok"===this.status}finish(t){if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:t}=this.transaction.metadata.spanMetadata[this.spanId];t&&o.vF.log(t.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof t?t:(0,s.LU)()}toTraceparent(){let t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${t}`}toContext(){return(0,a.Ce)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=(0,i.S)(t.data,(()=>({}))),this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=(0,i.S)(t.spanId,(()=>this.spanId)),this.startTimestamp=(0,i.S)(t.startTimestamp,(()=>this.startTimestamp)),this.status=t.status,this.tags=(0,i.S)(t.tags,(()=>({}))),this.traceId=(0,i.S)(t.traceId,(()=>this.traceId)),this}getTraceContext(){return(0,a.Ce)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return(0,a.Ce)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function h(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},7253:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(2460),r=n(6641),s=n(9297),o=n(7412),a=n(792),c=n(9121);class l extends c.L9{__init(){this._measurements={}}__init2(){this._contexts={}}__init3(){this._frozenDynamicSamplingContext=void 0}constructor(t,e){super(t),l.prototype.__init.call(this),l.prototype.__init2.call(this),l.prototype.__init3.call(this),this._hub=e||(0,r.BF)(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{},changes:[],propagations:0},this._trimEnd=t.trimEnd,this.transaction=this;const n=this.metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(t){this.setName(t)}setName(t,e="custom"){t===this.name&&e===this.metadata.source||this.metadata.changes.push({source:this.metadata.source,timestamp:(0,s.zf)(),propagations:this.metadata.propagations}),this._name=t,this.metadata.source=e}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new c.lh(t)),this.spanRecorder.add(this)}setContext(t,e){null===e?delete this._contexts[t]:this._contexts[t]=e}setMeasurement(t,e,n=""){this._measurements[t]={value:e,unit:n}}setMetadata(t){this.metadata={...this.metadata,...t}}finish(t){if(void 0!==this.endTimestamp)return;if(this.name||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t),!0!==this.sampled){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");const t=this._hub.getClient();return void(t&&t.recordDroppedEvent("sample_rate","transaction"))}const e=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&t.endTimestamp)):[];this._trimEnd&&e.length>0&&(this.endTimestamp=e.reduce(((t,e)=>t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t)).endTimestamp);const n=this.metadata,i={contexts:{...this._contexts,trace:this.getTraceContext()},spans:e,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...n,dynamicSamplingContext:this.getDynamicSamplingContext()},...n.source&&{transaction_info:{source:n.source,changes:n.changes,propagations:n.propagations}}};return Object.keys(this._measurements).length>0&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(i)}toContext(){const t=super.toContext();return(0,a.Ce)({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=(0,i.S)(t.name,(()=>"")),this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const t=this._hub||(0,r.BF)(),e=t&&t.getClient();if(!e)return{};const{environment:n,release:i}=e.getOptions()||{},{publicKey:s}=e.getDsn()||{},o=this.metadata.sampleRate,c=void 0!==o?o.toString():void 0,l=t.getScope(),{segment:h}=l&&l.getUser()||{},u=this.metadata.source,p=u&&"url"!==u?this.name:void 0;return(0,a.Ce)({environment:n,release:i,transaction:p,user_segment:h,public_key:s,trace_id:this.traceId,sample_rate:c})}}},4408:(t,e,n)=>{"use strict";n.d(e,{Z7:()=>s,rv:()=>o,wt:()=>r});var i=n(6641);function r(t){const e=(0,i.BF)().getClient(),n=t||e&&e.getOptions();return!!n&&("tracesSampleRate"in n||"tracesSampler"in n)}function s(t){const e=(t||(0,i.BF)()).getScope();return e&&e.getTransaction()}function o(t){return t/1e3}},5584:(t,e,n)=>{"use strict";n.d(e,{De:()=>h,hF:()=>s,yD:()=>l});var i=n(3816),r=n(7412);const s="baggage",o="sentry-",a=/^sentry-/,c=8192;function l(t){if(!(0,i.Kg)(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce(((t,e)=>({...t,...u(e)})),{});else{if(!t)return;e=u(t)}const n=Object.entries(e).reduce(((t,[e,n])=>(e.match(a)&&(t[e.slice(o.length)]=n),t)),{});return Object.keys(n).length>0?n:void 0}function h(t){return function(t){if(0!==Object.keys(t).length)return Object.entries(t).reduce(((t,[e,n],i)=>{const s=`${encodeURIComponent(e)}=${encodeURIComponent(n)}`,o=0===i?s:`${t},${s}`;return o.length>c?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn(`Not adding key: ${e} with val: ${n} to baggage header due to exceeding baggage size limits.`),t):o}),"")}(Object.entries(t).reduce(((t,[e,n])=>(n&&(t[`${o}${e}`]=n),t)),{}))}function u(t){return t.split(",").map((t=>t.split("=").map((t=>decodeURIComponent(t.trim()))))).reduce(((t,[e,n])=>(t[e]=n,t)),{})}},9766:(t,e,n)=>{"use strict";n.d(e,{Hd:()=>o,NX:()=>c});var i=n(3816);const r=(0,n(6341).VZ)(),s=80;function o(t,e={}){try{let n=t;const i=5,r=[];let o=0,c=0;const l=" > ",h=l.length;let u;const p=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||s;for(;n&&o++<i&&(u=a(n,p),!("html"===u||o>1&&c+r.length*h+u.length>=d));)r.push(u),c+=u.length,n=n.parentNode;return r.reverse().join(l)}catch(t){return"<unknown>"}}function a(t,e){const n=t,r=[];let s,o,a,c,l;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const h=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(h&&h.length)h.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&(0,i.Kg)(s))for(o=s.split(/\s+/),l=0;l<o.length;l++)r.push(`.${o[l]}`);const u=["type","name","title","alt"];for(l=0;l<u.length;l++)a=u[l],c=n.getAttribute(a),c&&r.push(`[${a}="${c}"]`);return r.join("")}function c(t){return r.document&&r.document.querySelector?r.document.querySelector(t):null}},2460:(t,e,n)=>{"use strict";function i(t,e){return null!=t?t:e()}n.d(e,{S:()=>i})},853:(t,e,n)=>{"use strict";function i(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}n.d(e,{z:()=>i})},7230:(t,e,n)=>{"use strict";n.d(e,{O:()=>f});var i=n(3816),r=n(7412),s=n(792),o=n(3917),a=n(6341);const c=(0,a.VZ)();function l(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}const h=(0,a.VZ)(),u={},p={};function d(t){if(!p[t])switch(p[t]=!0,t){case"console":"console"in h&&r.Ow.forEach((function(t){t in h.console&&(0,s.GS)(h.console,t,(function(e){return function(...n){m("console",{args:n,level:t}),e&&e.apply(h.console,n)}}))}));break;case"dom":!function(){if(!("document"in h))return;const t=m.bind(null,"dom"),e=x(t,!0);h.document.addEventListener("click",e,!1),h.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const n=h[e]&&h[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,s.GS)(n,"addEventListener",(function(e){return function(n,i,r){if("click"===n||"keypress"==n)try{const i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},o=s[n]=s[n]||{refCount:0};if(!o.handler){const i=x(t);o.handler=i,e.call(this,n,i,r)}o.refCount++}catch(t){}return e.call(this,n,i,r)}})),(0,s.GS)(n,"removeEventListener",(function(t){return function(e,n,i){if("click"===e||"keypress"==e)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},s=r[e];s&&(s.refCount--,s.refCount<=0&&(t.call(this,e,s.handler,i),s.handler=void 0,delete r[e]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,i)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in h))return;const t=XMLHttpRequest.prototype;(0,s.GS)(t,"open",(function(t){return function(...e){const n=this,r=e[1],o=n.__sentry_xhr__={method:(0,i.Kg)(e[0])?e[0].toUpperCase():e[0],url:e[1]};(0,i.Kg)(r)&&"POST"===o.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const a=function(){if(4===n.readyState){try{o.status_code=n.status}catch(t){}m("xhr",{args:e,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?(0,s.GS)(n,"onreadystatechange",(function(t){return function(...e){return a(),t.apply(n,e)}})):n.addEventListener("readystatechange",a),t.apply(n,e)}})),(0,s.GS)(t,"send",(function(t){return function(...e){return this.__sentry_xhr__&&void 0!==e[0]&&(this.__sentry_xhr__.body=e[0]),m("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in c))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}())return!1;if(l(c.fetch))return!0;let t=!1;const e=c.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=l(n.contentWindow.fetch)),e.head.removeChild(n)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t})()&&(0,s.GS)(h,"fetch",(function(t){return function(...e){const n={args:e,fetchData:{method:g(e),url:_(e)},startTimestamp:Date.now()};return m("fetch",{...n}),t.apply(h,e).then((t=>(m("fetch",{...n,endTimestamp:Date.now(),response:t}),t)),(t=>{throw m("fetch",{...n,endTimestamp:Date.now(),error:t}),t}))}}));break;case"history":!function(){if(!function(){const t=c.chrome,e=t&&t.app&&t.app.runtime,n="history"in c&&!!c.history.pushState&&!!c.history.replaceState;return!e&&n}())return;const t=h.onpopstate;function e(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const t=y,e=String(n);y=e,m("history",{from:t,to:e})}return t.apply(this,e)}}h.onpopstate=function(...e){const n=h.location.href,i=y;if(y=n,m("history",{from:i,to:n}),t)try{return t.apply(this,e)}catch(t){}},(0,s.GS)(h.history,"pushState",e),(0,s.GS)(h.history,"replaceState",e)}();break;case"error":E=h.onerror,h.onerror=function(t,e,n,i,r){return m("error",{column:i,error:r,line:n,msg:t,url:e}),!!E&&E.apply(this,arguments)};break;case"unhandledrejection":S=h.onunhandledrejection,h.onunhandledrejection=function(t){return m("unhandledrejection",t),!S||S.apply(this,arguments)};break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn("unknown instrumentation type:",t))}}function f(t,e){u[t]=u[t]||[],u[t].push(e),d(t)}function m(t,e){if(t&&u[t])for(const n of u[t]||[])try{n(e)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${(0,o.qQ)(n)}\nError:`,e)}}function g(t=[]){return"Request"in h&&(0,i.tH)(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function _(t=[]){return"string"==typeof t[0]?t[0]:"Request"in h&&(0,i.tH)(t[0],Request)?t[0].url:String(t[0])}let y;const b=1e3;let v,w;function x(t,e=!1){return n=>{if(!n||w===n)return;if(function(t){if("keypress"!==t.type)return!1;try{const e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n))return;const i="keypress"===n.type?"input":n.type;(void 0===v||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(w,n))&&(t({event:n,name:i,global:e}),w=n),clearTimeout(v),v=h.setTimeout((()=>{v=void 0}),b)}}let E=null,S=null},3816:(t,e,n)=>{"use strict";n.d(e,{Kg:()=>o,Qd:()=>c,Qg:()=>p,bJ:()=>r,gd:()=>u,mE:()=>d,sO:()=>a,tH:()=>m,vq:()=>h,xH:()=>l,yr:()=>f});const i=Object.prototype.toString;function r(t){switch(i.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return m(t,Error)}}function s(t,e){return i.call(t)===`[object ${e}]`}function o(t){return s(t,"String")}function a(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function c(t){return s(t,"Object")}function l(t){return"undefined"!=typeof Event&&m(t,Event)}function h(t){return"undefined"!=typeof Element&&m(t,Element)}function u(t){return s(t,"RegExp")}function p(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function d(t){return c(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function f(t){return"number"==typeof t&&t!=t}function m(t,e){try{return t instanceof e}catch(t){return!1}}},7412:(t,e,n)=>{"use strict";n.d(e,{Ow:()=>r,pq:()=>s,vF:()=>a});var i=n(6341);const r=["debug","info","warn","error","log","assert","trace"];function s(t){if(!("console"in i.OW))return t();const e=i.OW.console,n={};r.forEach((t=>{const i=e[t]&&e[t].__sentry_original__;t in e&&i&&(n[t]=e[t],e[t]=i)}));try{return t()}finally{Object.keys(n).forEach((t=>{e[t]=n[t]}))}}function o(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?r.forEach((n=>{e[n]=(...e)=>{t&&s((()=>{i.OW.console[n](`Sentry Logger [${n}]:`,...e)}))}})):r.forEach((t=>{e[t]=()=>{}})),e}let a;a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,i.BY)("logger",o):o()},6936:(t,e,n)=>{"use strict";n.d(e,{$X:()=>c,GR:()=>f,M6:()=>h,db:()=>d,eJ:()=>o,gO:()=>l,k9:()=>m,kf:()=>p});var i=n(792),r=n(9653),s=n(6341);function o(){const t=s.OW,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&n())>>t/4).toString(16)))}function a(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function c(t){const{message:e,event_id:n}=t;if(e)return e;const i=a(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function l(t,e,n){const i=t.exception=t.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function h(t,e){const n=a(t);if(!n)return;const i=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...i,...e},e&&"data"in e){const t={...i&&i.data,...e.data};n.mechanism.data=t}}const u=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function p(t){const e=t.match(u)||[],n=parseInt(e[1],10),i=parseInt(e[2],10),r=parseInt(e[3],10);return{buildmetadata:e[5],major:isNaN(n)?void 0:n,minor:isNaN(i)?void 0:i,patch:isNaN(r)?void 0:r,prerelease:e[4]}}function d(t,e,n=5){if(void 0===e.lineno)return;const i=t.length,s=Math.max(Math.min(i,e.lineno-1),0);e.pre_context=t.slice(Math.max(0,s-n),s).map((t=>(0,r.nC)(t,0))),e.context_line=(0,r.nC)(t[Math.min(i-1,s)],e.colno||0),e.post_context=t.slice(Math.min(s+1,i),s+1+n).map((t=>(0,r.nC)(t,0)))}function f(t){if(t&&t.__sentry_captured__)return!0;try{(0,i.my)(t,"__sentry_captured__",!0)}catch(t){}return!1}function m(t){return Array.isArray(t)?t:[t]}},258:(t,e,n)=>{"use strict";function i(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function r(t,e){return t.require(e)}function s(e){let n;try{n=r(t,e)}catch(t){}try{const{cwd:i}=r(t,"process");n=r(t,`${i()}/node_modules/${e}`)}catch(t){}return n}n.d(e,{fj:()=>r,wD:()=>i,Vw:()=>s}),t=n.hmd(t)},792:(t,e,n)=>{"use strict";n.d(e,{Ce:()=>f,GS:()=>o,HF:()=>d,W4:()=>h,my:()=>a,sp:()=>c,u4:()=>l});var i=n(9766),r=n(3816),s=n(9653);function o(t,e,n){if(!(e in t))return;const i=t[e],r=n(i);if("function"==typeof r)try{!function(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,a(t,"__sentry_original__",e)}(r,i)}catch(t){}t[e]=r}function a(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function c(t){return t.__sentry_original__}function l(t){return Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&")}function h(t){if((0,r.bJ)(t))return{message:t.message,name:t.name,stack:t.stack,...p(t)};if((0,r.xH)(t)){const e={type:t.type,target:u(t.target),currentTarget:u(t.currentTarget),...p(t)};return"undefined"!=typeof CustomEvent&&(0,r.tH)(t,CustomEvent)&&(e.detail=t.detail),e}return t}function u(t){try{return(0,r.vq)(t)?(0,i.Hd)(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}}function p(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function d(t,e=40){const n=Object.keys(h(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return(0,s.xv)(n[0],e);for(let t=n.length;t>0;t--){const i=n.slice(0,t).join(", ");if(!(i.length>e))return t===n.length?i:(0,s.xv)(i,e)}return""}function f(t){return m(t,new Map)}function m(t,e){if((0,r.Qd)(t)){const n=e.get(t);if(void 0!==n)return n;const i={};e.set(t,i);for(const n of Object.keys(t))void 0!==t[n]&&(i[n]=m(t[n],e));return i}if(Array.isArray(t)){const n=e.get(t);if(void 0!==n)return n;const i=[];return e.set(t,i),t.forEach((t=>{i.push(m(t,e))})),i}return t}},8351:(t,e,n)=>{"use strict";n.d(e,{Up:()=>s,em:()=>r});var i=n(2879);function r(t,e,n){t&&(t.metadata.source&&"url"!==t.metadata.source||t.setName(...s(e,{path:!0,method:!0})),t.setData("url",e.originalUrl||e.url),e.baseUrl&&t.setData("baseUrl",e.baseUrl),t.setData("query",function(t,e){let n=t.originalUrl||t.url||"";if(n)return n.startsWith("/")&&(n=`http://dogs.are.great${n}`),t.query||void 0!==typeof URL&&new URL(n).search.replace("?","")||e&&e.url&&e.url.parse(n).query||void 0}(e,n)))}function s(t,e={}){const n=t.method&&t.method.toUpperCase();let r="",s="url";e.customRoute||t.route?(r=e.customRoute||`${t.baseUrl||""}${t.route&&t.route.path}`,s="route"):(t.originalUrl||t.url)&&(r=(0,i.f)(t.originalUrl||t.url||""));let o="";return e.method&&n&&(o+=n),e.method&&e.path&&(o+=" "),e.path&&r&&(o+=r),[o,s]}},3917:(t,e,n)=>{"use strict";n.d(e,{gd:()=>s,o:()=>h,qQ:()=>c,vk:()=>o});var i=n(853);const r=50;function s(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{const i=[];for(const r of t.split("\n").slice(n)){const t=r.replace(/\(error: (.*)\)/,"$1");for(const n of e){const e=n(t);if(e){i.push(e);break}}}return function(t){if(!t.length)return[];let e=t;const n=e[0].function||"",i=e[e.length-1].function||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==i.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,r).map((t=>({...t,filename:t.filename||e[0].filename,function:t.function||"?"}))).reverse()}(i)}}function o(t){return Array.isArray(t)?s(...t):t}const a="<anonymous>";function c(t){try{return t&&"function"==typeof t&&t.name||a}catch(t){return a}}function l(t){const e=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{if(r.match(e))return{filename:r};const s=r.match(n);if(!s)return;let o,a,c,l,h;if(s[1]){c=s[1];let t=c.lastIndexOf(".");if("."===c[t-1]&&t--,t>0){o=c.substr(0,t),a=c.substr(t+1);const e=o.indexOf(".Module");e>0&&(c=c.substr(e+1),o=o.substr(0,e))}l=void 0}a&&(l=o,h=a),"<anonymous>"===a&&(h=void 0,c=void 0),void 0===c&&(h=h||"<anonymous>",c=l?`${l}.${h}`:h);const u=(0,i.z)([s,"access",t=>t[2],"optionalAccess",t=>t.startsWith,"call",t=>t("file://")])?s[2].substr(7):s[2],p=!("native"===s[5]||u&&!u.startsWith("/")&&!u.startsWith(".")&&1!==u.indexOf(":\\")||void 0===u||u.includes("node_modules/"));return{filename:u,module:(0,i.z)([t,"optionalCall",t=>t(u)]),function:c,lineno:parseInt(s[3],10)||void 0,colno:parseInt(s[4],10)||void 0,in_app:p}}}function h(t){return[90,l(t)]}},9653:(t,e,n)=>{"use strict";n.d(e,{Xr:()=>o,nC:()=>s,xv:()=>r});var i=n(3816);function r(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.substr(0,e)}...`}function s(t,e){let n=t;const i=n.length;if(i<=150)return n;e>i&&(e=i);let r=Math.max(e-60,0);r<5&&(r=0);let s=Math.min(r+140,i);return s>i-5&&(s=i),s===i&&(r=Math.max(s-140,0)),n=n.slice(r,s),r>0&&(n=`'{snip} ${n}`),s<i&&(n+=" {snip}"),n}function o(t,e=[],n=!1){return e.some((e=>function(t,e,n=!1){return!!(0,i.Kg)(t)&&((0,i.gd)(e)?e.test(t):!!(0,i.Kg)(e)&&(n?t===e:t.includes(e)))}(t,e,n)))}},690:(t,e,n)=>{"use strict";n.d(e,{T2:()=>a,XW:()=>s,xg:()=>o});var i,r=n(3816);function s(t){return new a((e=>{e(t)}))}function o(t){return new a(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(i||(i={}));class a{__init(){this._state=i.PENDING}__init2(){this._handlers=[]}constructor(t){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),a.prototype.__init5.call(this),a.prototype.__init6.call(this);try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new a(((n,i)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(t){i(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){i(t)}else i(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new a(((e,n)=>{let i,r;return this.then((e=>{r=!1,i=e,t&&t()}),(e=>{r=!0,i=e,t&&t()})).then((()=>{r?n(i):e(i)}))}))}__init3(){this._resolve=t=>{this._setResult(i.RESOLVED,t)}}__init4(){this._reject=t=>{this._setResult(i.REJECTED,t)}}__init5(){this._setResult=(t,e)=>{this._state===i.PENDING&&((0,r.Qg)(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===i.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===i.RESOLVED&&t[1](this._value),this._state===i.REJECTED&&t[2](this._value),t[0]=!0)}))}}}},9297:(t,e,n)=>{"use strict";n.d(e,{LU:()=>u,k3:()=>d,lu:()=>l,zf:()=>h});var i=n(258),r=n(6341);t=n.hmd(t);const s=(0,r.VZ)(),o={nowSeconds:()=>Date.now()/1e3},a=(0,i.wD)()?function(){try{return(0,i.fj)(t,"perf_hooks").performance}catch(t){return}}():function(){const{performance:t}=s;if(t&&t.now)return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}(),c=void 0===a?o:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},l=o.nowSeconds.bind(o),h=c.nowSeconds.bind(c),u=h;let p;const d=(()=>{const{performance:t}=s;if(!t||!t.now)return void(p="none");const e=36e5,n=t.now(),i=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+n-i):e,o=r<e,a=t.timing&&t.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-i):e;return o||c<e?r<=c?(p="timeOrigin",t.timeOrigin):(p="navigationStart",a):(p="dateNow",i)})()},6524:(t,e,n)=>{"use strict";n.d(e,{M:()=>i,n:()=>r});const i=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function r(t){const e=t.match(i);if(!t||!e)return;let n;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}},2879:(t,e,n)=>{"use strict";function i(t){return t.split(/[\?#]/,1)[0]}function r(t){return t.split(/\\?\//).filter((t=>t.length>0&&","!==t)).length}n.d(e,{c4:()=>r,f:()=>i})},6341:(t,e,n)=>{"use strict";function i(t){return t&&t.Math==Math?t:void 0}n.d(e,{BY:()=>o,OW:()=>r,VZ:()=>s});const r="object"==typeof globalThis&&i(globalThis)||"object"==typeof window&&i(window)||"object"==typeof self&&i(self)||"object"==typeof global&&i(global)||function(){return this}()||{};function s(){return r}function o(t,e,n){const i=n||r,s=i.__SENTRY__=i.__SENTRY__||{};return s[t]||(s[t]=e())}},969:t=>{function e(){}t.exports=function(t,n,i){var r=!1;return i=i||e,s.count=t,0===t?n():s;function s(t,e){if(s.count<=0)throw new Error("after called too many times");--s.count,t?(r=!0,n(t),n=i):0!==s.count||r||n(null,e)}}},9724:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const r=n(4434),s=i(n(5753)),o=i(n(1956)),a=s.default("agent-base");function c(){const{stack:t}=new Error;return"string"==typeof t&&t.split("\n").some((t=>-1!==t.indexOf("(https.js:")||-1!==t.indexOf("node:https:")))}function l(t,e){return new l.Agent(t,e)}!function(t){class e extends r.EventEmitter{constructor(t,e){super();let n=e;"function"==typeof t?this.callback=t:t&&(n=t),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(t){this.explicitDefaultPort=t}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(t){this.explicitProtocol=t}callback(t,e,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(t,e){const n=Object.assign({},e);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,t._last=!0,t.shouldKeepAlive=!1;let i=!1,r=null;const s=n.timeout||this.timeout,l=e=>{t._hadError||(t.emit("error",e),t._hadError=!0)},h=()=>{r=null,i=!0;const t=new Error(`A "socket" was not created for HTTP request before ${s}ms`);t.code="ETIMEOUT",l(t)},u=t=>{i||(null!==r&&(clearTimeout(r),r=null),l(t))},p=e=>{if(i)return;if(null!=r&&(clearTimeout(r),r=null),s=e,Boolean(s)&&"function"==typeof s.addRequest)return a("Callback returned another Agent instance %o",e.constructor.name),void e.addRequest(t,n);var s;if(e)return e.once("free",(()=>{this.freeSocket(e,n)})),void t.onSocket(e);const o=new Error(`no Duplex stream was returned to agent-base for \`${t.method} ${t.path}\``);l(o)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=o.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof s&&s>0&&(r=setTimeout(h,s)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${t.method} ${t.path}`),Promise.resolve(this.promisifiedCallback(t,n)).then(p,u)}catch(t){Promise.reject(t).catch(u)}}else l(new Error("`callback` is not defined"))}freeSocket(t,e){a("Freeing socket %o %o",t.constructor.name,e),t.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype}(l||(l={})),t.exports=l},1956:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e,n){return new Promise(((i,r)=>{t.call(this,e,n,((t,e)=>{t?r(t):i(e)}))}))}}},1493:(t,e,n)=>{var i=n(6264);function r(t,e){var n=new i(t,e);return function(t){return n.convert(t)}}r.BIN="01",r.OCT="01234567",r.DEC="0123456789",r.HEX="0123456789abcdef",t.exports=r},6264:t=>{"use strict";function e(t,e){if(!(t&&e&&t.length&&e.length))throw new Error("Bad alphabet");this.srcAlphabet=t,this.dstAlphabet=e}e.prototype.convert=function(t){var e,n,i,r={},s=this.srcAlphabet.length,o=this.dstAlphabet.length,a=t.length,c="string"==typeof t?"":[];if(!this.isValid(t))throw new Error('Number "'+t+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return t;for(e=0;e<a;e++)r[e]=this.srcAlphabet.indexOf(t[e]);do{for(n=0,i=0,e=0;e<a;e++)(n=n*s+r[e])>=o?(r[i++]=parseInt(n/o,10),n%=o):i>0&&(r[i++]=0);a=i,c=this.dstAlphabet.slice(n,n+1).concat(c)}while(0!==i);return c},e.prototype.isValid=function(t){for(var e=0;e<t.length;++e)if(-1===this.srcAlphabet.indexOf(t[e]))return!1;return!0},t.exports=e},3059:t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=1&Math.floor(10*e)?t+n:t-n}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},4252:(t,e,n)=>{var i=n(3684),r=n(8844);t.exports={encode:i,decode:r}},8844:t=>{function e(t,e){if(this.pos=0,this.buffer=t,this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),"BM"!=this.flag)throw new Error("Invalid BMP File");this.parseHeader(),this.parseRGBA()}e.prototype.parseHeader=function(){if(this.fileSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.reserved=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.offset=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.headerSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.width=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.height=this.buffer.readInt32LE(this.pos),this.pos+=4,this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compress=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.rawSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.hr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.vr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.colors=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.importantColors=this.buffer.readUInt32LE(this.pos),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.buffer.readUInt8(this.pos++),i=this.buffer.readUInt8(this.pos++),r=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++);this.palette[e]={red:r,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},e.prototype.parseRGBA=function(){var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Buffer(e),this[t]()},e.prototype.bit1=function(){var t=Math.ceil(this.width/8),e=t%4,n=this.height>=0?this.height-1:-this.height;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++)for(var s=this.buffer.readUInt8(this.pos++),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var c=this.palette[s>>7-a&1];this.data[o+4*a]=0,this.data[o+4*a+1]=c.blue,this.data[o+4*a+2]=c.green,this.data[o+4*a+3]=c.red}0!=e&&(this.pos+=4-e)}},e.prototype.bit4=function(){if(2==this.compress){this.data.fill(255);for(var t=0,e=this.bottom_up?this.height-1:0,n=!1;t<this.data.length;){var i=this.buffer.readUInt8(this.pos++),r=this.buffer.readUInt8(this.pos++);if(0==i){if(0==r){this.bottom_up?e--:e++,t=e*this.width*4,n=!1;continue}if(1==r)break;if(2==r){var s=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++);this.bottom_up?e-=o:e+=o,t+=o*this.width*4+4*s}else{for(var a=this.buffer.readUInt8(this.pos++),c=0;c<r;c++)n?l.call(this,15&a):l.call(this,(240&a)>>4),1&c&&c+1<r&&(a=this.buffer.readUInt8(this.pos++)),n=!n;1==(r+1>>1&1)&&this.pos++}}else for(c=0;c<i;c++)n?l.call(this,15&r):l.call(this,(240&r)>>4),n=!n}function l(e){var n=this.palette[e];this.data[t]=0,this.data[t+1]=n.blue,this.data[t+2]=n.green,this.data[t+3]=n.red,t+=4}}else{var h=Math.ceil(this.width/2),u=h%4;for(o=this.height-1;o>=0;o--){var p=this.bottom_up?o:this.height-1-o;for(s=0;s<h;s++){r=this.buffer.readUInt8(this.pos++),t=p*this.width*4+2*s*4;var d=r>>4,f=15&r,m=this.palette[d];if(this.data[t]=0,this.data[t+1]=m.blue,this.data[t+2]=m.green,this.data[t+3]=m.red,2*s+1>=this.width)break;m=this.palette[f],this.data[t+4]=0,this.data[t+4+1]=m.blue,this.data[t+4+2]=m.green,this.data[t+4+3]=m.red}0!=u&&(this.pos+=4-u)}}},e.prototype.bit8=function(){if(1==this.compress){this.data.fill(255);for(var t=0,e=this.bottom_up?this.height-1:0;t<this.data.length;){var n=this.buffer.readUInt8(this.pos++),i=this.buffer.readUInt8(this.pos++);if(0==n){if(0==i){this.bottom_up?e--:e++,t=e*this.width*4;continue}if(1==i)break;if(2==i){var r=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++);this.bottom_up?e-=s:e+=s,t+=s*this.width*4+4*r}else{for(var o=0;o<i;o++){var a=this.buffer.readUInt8(this.pos++);c.call(this,a)}!0&i&&this.pos++}}else for(o=0;o<n;o++)c.call(this,i)}function c(e){var n=this.palette[e];this.data[t]=0,this.data[t+1]=n.blue,this.data[t+2]=n.green,this.data[t+3]=n.red,t+=4}}else{var l=this.width%4;for(s=this.height-1;s>=0;s--){var h=this.bottom_up?s:this.height-1-s;for(r=0;r<this.width;r++)if(i=this.buffer.readUInt8(this.pos++),t=h*this.width*4+4*r,i<this.palette.length){var u=this.palette[i];this.data[t]=0,this.data[t+1]=u.blue,this.data[t+2]=u.green,this.data[t+3]=u.red}else this.data[t]=0,this.data[t+1]=255,this.data[t+2]=255,this.data[t+3]=255;0!=l&&(this.pos+=4-l)}}},e.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var s=this.buffer.readUInt16LE(this.pos);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,l=s>>15?255:0,h=i*this.width*4+4*r;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=c}this.pos+=t}},e.prototype.bit16=function(){var t=this.width%2*2;this.maskRed=31744,this.maskGreen=992,this.maskBlue=31,this.mask0=0,3==this.compress&&(this.maskRed=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskGreen=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskBlue=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.mask0=this.buffer.readUInt32LE(this.pos),this.pos+=4);for(var e=[0,0,0],n=0;n<16;n++)this.maskRed>>n&1&&e[0]++,this.maskGreen>>n&1&&e[1]++,this.maskBlue>>n&1&&e[2]++;e[1]+=e[0],e[2]+=e[1],e[0]=8-e[0],e[1]-=8,e[2]-=8;for(var i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.buffer.readUInt16LE(this.pos);this.pos+=2;var a=(o&this.maskBlue)<<e[0],c=(o&this.maskGreen)>>e[1],l=(o&this.maskRed)>>e[2],h=r*this.width*4+4*s;this.data[h]=0,this.data[h+1]=a,this.data[h+2]=c,this.data[h+3]=l}this.pos+=t}},e.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.buffer.readUInt8(this.pos++),r=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++),o=e*this.width*4+4*n;this.data[o]=0,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=s}this.pos+=this.width%4}},e.prototype.bit32=function(){if(3==this.compress){this.maskRed=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskGreen=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskBlue=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.mask0=this.buffer.readUInt32LE(this.pos),this.pos+=4;for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.buffer.readUInt8(this.pos++),r=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=r,this.data[a+2]=s,this.data[a+3]=o}}else for(t=this.height-1;t>=0;t--)for(e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++)r=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++),i=this.buffer.readUInt8(this.pos++),a=e*this.width*4+4*n,this.data[a]=i,this.data[a+1]=r,this.data[a+2]=s,this.data[a+3]=o},e.prototype.getData=function(){return this.data},t.exports=function(t){return new e(t)}},3684:t=>{function e(t){this.buffer=t.data,this.width=t.width,this.height=t.height,this.extraBytes=this.width%4,this.rgbSize=this.height*(3*this.width+this.extraBytes),this.headerInfoSize=40,this.data=[],this.flag="BM",this.reserved=0,this.offset=54,this.fileSize=this.rgbSize+this.offset,this.planes=1,this.bitPP=24,this.compress=0,this.hr=0,this.vr=0,this.colors=0,this.importantColors=0}e.prototype.encode=function(){var t=new Buffer(this.offset+this.rgbSize);this.pos=0,t.write(this.flag,this.pos,2),this.pos+=2,t.writeUInt32LE(this.fileSize,this.pos),this.pos+=4,t.writeUInt32LE(this.reserved,this.pos),this.pos+=4,t.writeUInt32LE(this.offset,this.pos),this.pos+=4,t.writeUInt32LE(this.headerInfoSize,this.pos),this.pos+=4,t.writeUInt32LE(this.width,this.pos),this.pos+=4,t.writeInt32LE(-this.height,this.pos),this.pos+=4,t.writeUInt16LE(this.planes,this.pos),this.pos+=2,t.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,t.writeUInt32LE(this.compress,this.pos),this.pos+=4,t.writeUInt32LE(this.rgbSize,this.pos),this.pos+=4,t.writeUInt32LE(this.hr,this.pos),this.pos+=4,t.writeUInt32LE(this.vr,this.pos),this.pos+=4,t.writeUInt32LE(this.colors,this.pos),this.pos+=4,t.writeUInt32LE(this.importantColors,this.pos),this.pos+=4;for(var e=0,n=3*this.width+this.extraBytes,i=0;i<this.height;i++){for(var r=0;r<this.width;r++){var s=this.pos+i*n+3*r;e++,t[s]=this.buffer[e++],t[s+1]=this.buffer[e++],t[s+2]=this.buffer[e++]}if(this.extraBytes>0){var o=this.pos+i*n+3*this.width;t.fill(0,o,o+this.extraBytes)}}return t},t.exports=function(t,n){return void 0===n&&(n=100),{data:new e(t).encode(),width:t.width,height:t.height}}},3922:(t,e,n)=>{var i=n(181).Buffer;t.exports=function(t,e){if(i.isBuffer(t)&&i.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}},8144:t=>{var e=[].slice;t.exports=function(t,n){if("string"==typeof n&&(n=t[n]),"function"!=typeof n)throw new Error("bind() requires a function");var i=e.call(arguments,2);return function(){return n.apply(t,i.concat(e.call(arguments)))}}},5971:t=>{function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},2370:t=>{t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},7427:(t,e)=>{"use strict";e.q=function(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var r={},s=e||{},o=t.split(";"),a=s.decode||n,c=0;c<o.length;c++){var l=o[c],h=l.indexOf("=");if(!(h<0)){var u=l.substring(0,h).trim();if(null==r[u]){var p=l.substring(h+1,l.length).trim();'"'===p[0]&&(p=p.slice(1,-1)),r[u]=i(p,a)}}}return r};var n=decodeURIComponent;encodeURIComponent;function i(t,e){try{return e(t)}catch(e){return t}}},214:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(i++,"%c"===t&&(r=i))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(736)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},736:(t,e,n)=>{t.exports=function(t){function e(t){let n,r,s,o=null;function a(...t){if(!a.enabled)return;const i=a,r=Number(new Date),s=r-(n||r);i.diff=s,i.prev=n,i.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";o++;const s=e.formatters[r];if("function"==typeof s){const e=t[o];n=s.call(i,e),t.splice(o,1),o--}return n})),e.formatArgs.call(i,t),(i.log||e.log).apply(i,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=i,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,s=e.enabled(t)),s),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function i(t,n){const i=e(this.namespace+(void 0===n?":":n)+t);return i.log=this.log,i}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(6585),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},5753:(t,e,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?t.exports=n(214):t.exports=n(6033)},6033:(t,e,n)=>{const i=n(2018),r=n(9023);e.init=function(t){t.inspectOpts={};const n=Object.keys(e.inspectOpts);for(let i=0;i<n.length;i++)t.inspectOpts[n[i]]=e.inspectOpts[n[i]]},e.log=function(...t){return process.stderr.write(r.format(...t)+"\n")},e.formatArgs=function(n){const{namespace:i,useColors:r}=this;if(r){const e=this.color,r="[3"+(e<8?e:"8;5;"+e),s=`  ${r};1m${i} [0m`;n[0]=s+n[0].split("\n").join("\n"+s),n.push(r+"m+"+t.exports.humanize(this.diff)+"[0m")}else n[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+i+" "+n[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):i.isatty(process.stderr.fd)},e.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const t=n(7687);t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter((t=>/^debug_/i.test(t))).reduce(((t,e)=>{const n=e.substring(6).toLowerCase().replace(/_([a-z])/g,((t,e)=>e.toUpperCase()));let i=process.env[e];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),t[n]=i,t}),{}),t.exports=n(736)(e);const{formatters:s}=t.exports;s.o=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts).split("\n").map((t=>t.trim())).join(" ")},s.O=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts)}},602:(t,e,n)=>{"use strict";const{Transform:i,PassThrough:r}=n(2203),s=n(3106),o=n(5022);t.exports=t=>{const e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;const n="br"===e;if(n&&"function"!=typeof s.createBrotliDecompress)return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let a=!0;const c=new i({transform(t,e,n){a=!1,n(null,t)},flush(t){t()}}),l=new r({autoDestroy:!1,destroy(e,n){t.destroy(),n(e)}}),h=n?s.createBrotliDecompress():s.createUnzip();return h.once("error",(e=>{!a||t.readable?l.destroy(e):l.end()})),o(t,l),t.pipe(c).pipe(h).pipe(l),l}},687:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=(t,e)=>{let n;n="function"==typeof e?{connect:e}:e;const i="function"==typeof n.connect,r="function"==typeof n.secureConnect,s="function"==typeof n.close,o=()=>{i&&n.connect(),function(t){return t.encrypted}(t)&&r&&(t.authorized?n.secureConnect():t.authorizationError||t.once("secureConnect",n.secureConnect)),s&&t.once("close",n.close)};t.writable&&!t.connecting?o():t.connecting?t.once("connect",o):t.destroyed&&s&&n.close(t._hadError)};e.default=n,t.exports=n,t.exports.default=n},6022:t=>{!function(){"use strict";var e=[,function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.lengthOf=e.keysOf=e.isObject=e.isInfOrNaN=e.isFunction=e.isArguments=e.hasOwn=e.handleError=e.convertMapToObject=e.checkError=void 0,e.isFunction=function(t){return"function"==typeof t},e.isObject=function(t){return"object"===i(t)},e.keysOf=function(t){return Object.keys(t)},e.lengthOf=function(t){return Object.keys(t).length};var r=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};e.hasOwn=r,e.convertMapToObject=function(t){return Array.from(t).reduce((function(t,e){var i,r,s=(r=2,function(t){if(Array.isArray(t))return t}(i=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}}(i,r)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(i,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[0],a=s[1];return t[o]=a,t}),{})},e.isArguments=function(t){return null!=t&&r(t,"callee")},e.isInfOrNaN=function(t){return Number.isNaN(t)||t===1/0||t===-1/0};var s={maxStack:function(t){return new RegExp("Maximum call stack size exceeded","g").test(t)}};e.checkError=s,e.handleError=function(t){return function(){try{return t.apply(this,arguments)}catch(t){if(s.maxStack(t.message))throw new Error("Converting circular structure to JSON");throw t}}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Base64=void 0;for(var n=Object.create(null),i=function(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)},r=0;r<64;r++)n[i(r)]=r;var s=function(t){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var e=[],n=0;n<t;n++)e.push(0);return e.$Uint8ArrayPolyfill=!0,e}return new Uint8Array(new ArrayBuffer(t))},o={encode:function(t){if("string"==typeof t){var e=t;t=s(e.length);for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");t[n]=r}}for(var o=[],a=null,c=null,l=null,h=null,u=0;u<t.length;u++)switch(u%3){case 0:a=t[u]>>2&63,c=(3&t[u])<<4;break;case 1:c|=t[u]>>4&15,l=(15&t[u])<<2;break;case 2:l|=t[u]>>6&3,h=63&t[u],o.push(i(a)),o.push(i(c)),o.push(i(l)),o.push(i(h)),a=null,c=null,l=null,h=null}return null!=a&&(o.push(i(a)),o.push(i(c)),null==l?o.push("="):o.push(i(l)),null==h&&o.push("=")),o.join("")},decode:function(t){var e=Math.floor(3*t.length/4);"="==t.charAt(t.length-1)&&(e--,"="==t.charAt(t.length-2)&&e--);for(var i,r=s(e),o=null,a=null,c=null,l=0,h=0;h<t.length;h++){var u="="===(i=t.charAt(h))?-1:n[i];switch(h%4){case 0:if(u<0)throw new Error("invalid base64 string");o=u<<2;break;case 1:if(u<0)throw new Error("invalid base64 string");o|=u>>4,r[l++]=o,a=(15&u)<<4;break;case 2:u>=0&&(a|=u>>2,r[l++]=a,c=(3&u)<<6);break;case 3:u>=0&&(r[l++]=c|u)}}return r},newBinary:s};e.Base64=o},function(t){t.exports={_noYieldsAllowed:function(t){return t()}}},function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t){return JSON.stringify(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function t(e,r,s,o,a){var c=r[e];switch(n(c)){case"string":return i(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var l,h=o+s,u=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,d=0;d<p;d+=1)u[d]=t(d,c,s,h,a)||"null";return l=0===u.length?"[]":h?"[\n"+h+u.join(",\n"+h)+"\n"+o+"]":"["+u.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach((function(e){(l=t(e,c,s,h,a))&&u.push(i(e)+(h?": ":":")+l)})),l=0===u.length?"{}":h?"{\n"+h+u.join(",\n"+h)+"\n"+o+"}":"{"+u.join(",")+"}"}};e.default=function(t,e){var n=Object.assign({indent:"",canonical:!1},e);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var i="",s=0;s<n.indent;s++)i+=" ";n.indent=i}return r("",{"":t},n.indent,"",n.canonical)},t.exports=e.default}],n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,i),s.exports}var r={};!function(){var t=r,e=i(2).Base64,n=i(3);Object.defineProperty(t,"__esModule",{value:!0}),t.EJSON=void 0;var s=i(1),o={};t.EJSON=o;var a=new Map;o.addType=function(t,e){if(a.has(t))throw new Error("Type ".concat(t," already present"));a.set(t,e)};var c=[{matchJSONValue:function(t){return(0,s.hasOwn)(t,"$date")&&1===(0,s.lengthOf)(t)},matchObject:function(t){return t instanceof Date},toJSONValue:function(t){return{$date:t.getTime()}},fromJSONValue:function(t){return new Date(t.$date)}},{matchJSONValue:function(t){return(0,s.hasOwn)(t,"$regexp")&&(0,s.hasOwn)(t,"$flags")&&2===(0,s.lengthOf)(t)},matchObject:function(t){return t instanceof RegExp},toJSONValue:function(t){return{$regexp:t.source,$flags:t.flags}},fromJSONValue:function(t){return new RegExp(t.$regexp,t.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(t){return(0,s.hasOwn)(t,"$InfNaN")&&1===(0,s.lengthOf)(t)},matchObject:s.isInfOrNaN,toJSONValue:function(t){return{$InfNaN:Number.isNaN(t)?0:t===1/0?1:-1}},fromJSONValue:function(t){return t.$InfNaN/0}},{matchJSONValue:function(t){return(0,s.hasOwn)(t,"$binary")&&1===(0,s.lengthOf)(t)},matchObject:function(t){return"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&(0,s.hasOwn)(t,"$Uint8ArrayPolyfill")},toJSONValue:function(t){return{$binary:e.encode(t)}},fromJSONValue:function(t){return e.decode(t.$binary)}},{matchJSONValue:function(t){return(0,s.hasOwn)(t,"$escape")&&1===(0,s.lengthOf)(t)},matchObject:function(t){var e=!1;if(t){var n=(0,s.lengthOf)(t);1!==n&&2!==n||(e=c.some((function(e){return e.matchJSONValue(t)})))}return e},toJSONValue:function(t){var e={};return(0,s.keysOf)(t).forEach((function(n){e[n]=o.toJSONValue(t[n])})),{$escape:e}},fromJSONValue:function(t){var e={};return(0,s.keysOf)(t.$escape).forEach((function(n){e[n]=o.fromJSONValue(t.$escape[n])})),e}},{matchJSONValue:function(t){return(0,s.hasOwn)(t,"$type")&&(0,s.hasOwn)(t,"$value")&&2===(0,s.lengthOf)(t)},matchObject:function(t){return o._isCustomType(t)},toJSONValue:function(t){var e=n._noYieldsAllowed((function(){return t.toJSONValue()}));return{$type:t.typeName(),$value:e}},fromJSONValue:function(t){var e=t.$type;if(!a.has(e))throw new Error("Custom EJSON type ".concat(e," is not defined"));var i=a.get(e);return n._noYieldsAllowed((function(){return i(t.$value)}))}}];o._isCustomType=function(t){return t&&(0,s.isFunction)(t.toJSONValue)&&(0,s.isFunction)(t.typeName)&&a.has(t.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,s.convertMapToObject)(a)},o._getConverters=function(){return c};var l=function(t){for(var e=0;e<c.length;e++){var n=c[e];if(n.matchObject(t))return n.toJSONValue(t)}},h=function t(e){if(null===e)return null;var n=l(e);return void 0!==n?n:(0,s.isObject)(e)?((0,s.keysOf)(e).forEach((function(n){var i=e[n];if((0,s.isObject)(i)||void 0===i||(0,s.isInfOrNaN)(i)){var r=l(i);r?e[n]=r:t(i)}})),e):e};o._adjustTypesToJSONValue=h,o.toJSONValue=function(t){var e=l(t);if(void 0!==e)return e;var n=t;return(0,s.isObject)(t)&&(n=o.clone(t),h(n)),n};var u=function(t){if((0,s.isObject)(t)&&null!==t){var e=(0,s.keysOf)(t);if(e.length<=2&&e.every((function(t){return"string"==typeof t&&"$"===t.substr(0,1)})))for(var n=0;n<c.length;n++){var i=c[n];if(i.matchJSONValue(t))return i.fromJSONValue(t)}}return t},p=function t(e){if(null===e)return null;var n=u(e);return n!==e?n:(0,s.isObject)(e)?((0,s.keysOf)(e).forEach((function(n){var i=e[n];if((0,s.isObject)(i)){var r=u(i);if(i!==r)return void(e[n]=r);t(i)}})),e):e};o._adjustTypesFromJSONValue=p,o.fromJSONValue=function(t){var e=u(t);return e===t&&(0,s.isObject)(t)&&(e=o.clone(t),p(e)),e},o.stringify=(0,s.handleError)((function(t,e){var n=o.toJSONValue(t);return e&&(e.canonical||e.indent)?i(4)(n,e):JSON.stringify(n)})),o.parse=function(t){if("string"!=typeof t)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(t))},o.isBinary=function(t){return!!("undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&t.$Uint8ArrayPolyfill)},o.equals=function(t,e,n){var i,r=!(!n||!n.keyOrderSensitive);if(t===e)return!0;if(Number.isNaN(t)&&Number.isNaN(e))return!0;if(!t||!e)return!1;if(!(0,s.isObject)(t)||!(0,s.isObject)(e))return!1;if(t instanceof Date&&e instanceof Date)return t.valueOf()===e.valueOf();if(o.isBinary(t)&&o.isBinary(e)){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}if((0,s.isFunction)(t.equals))return t.equals(e,n);if((0,s.isFunction)(e.equals))return e.equals(t,n);var a,c=Array.isArray(t),l=Array.isArray(e);if(c!==l)return!1;if(c&&l){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(!o.equals(t[i],e[i],n))return!1;return!0}switch(o._isCustomType(t)+o._isCustomType(e)){case 1:return!1;case 2:return o.equals(o.toJSONValue(t),o.toJSONValue(e))}var h=(0,s.keysOf)(t),u=(0,s.keysOf)(e);return r?(i=0,a=h.every((function(r){return!(i>=u.length||r!==u[i]||!o.equals(t[r],e[u[i]],n)||(i++,0))}))):(i=0,a=h.every((function(r){return!!(0,s.hasOwn)(e,r)&&!!o.equals(t[r],e[r],n)&&(i++,!0)}))),a&&i===u.length},o.clone=function(t){var e;if(!(0,s.isObject)(t))return t;if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return t;if(o.isBinary(t)){e=o.newBinary(t.length);for(var n=0;n<t.length;n++)e[n]=t[n];return e}return Array.isArray(t)?t.map(o.clone):(0,s.isArguments)(t)?Array.from(t).map(o.clone):(0,s.isFunction)(t.clone)?t.clone():o._isCustomType(t)?o.fromJSONValue(o.clone(o.toJSONValue(t)),!0):(e={},(0,s.keysOf)(t).forEach((function(n){e[n]=o.clone(t[n])})),e)},o.newBinary=e.newBinary}(),t.exports=r.EJSON}()},3198:t=>{t.exports=global},3357:(t,e,n)=>{t.exports=n(7292),t.exports.parser=n(6809)},7292:(t,e,n)=>{var i=n(8520),r=n(5971),s=n(4953)("engine.io-client:socket"),o=n(6938),a=n(6809),c=n(4258),l=n(9140);function h(t,e){if(!(this instanceof h))return new h(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=c(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=c(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=h,h.priorWebsocketSuccess=!1,r(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=n(2672),h.transports=n(8520),h.parser=n(6809),h.prototype.createTransport=function(t){s('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=a.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},h.prototype.open=function(){var t;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},h.prototype.setTransport=function(t){s("setting transport %s",t.name);var e=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},h.prototype.probe=function(t){s('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,i=this;function r(){if(i.onlyBinaryUpgrades){var r=!this.supportsBinary&&i.transport.supportsBinary;n=n||r}n||(s('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(s('probe transport "%s" pong',t),i.upgrading=!0,i.emit("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"===e.name,s('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(s("changing transport and sending upgrade packet"),p(),i.setTransport(e),e.send([{type:"upgrade"}]),i.emit("upgrade",e),e=null,i.upgrading=!1,i.flush())}))}else{s('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=e.name,i.emit("upgradeError",o)}})))}function o(){n||(n=!0,p(),e.close(),e=null)}function a(n){var r=new Error("probe error: "+n);r.transport=e.name,o(),s('probe transport "%s" failed because of error: %s',t,n),i.emit("upgradeError",r)}function c(){a("transport closed")}function l(){a("socket closed")}function u(t){e&&t.name!==e.name&&(s('"%s" works - aborting "%s"',t.name,e.name),o())}function p(){e.removeListener("open",r),e.removeListener("error",a),e.removeListener("close",c),i.removeListener("close",l),i.removeListener("upgrading",u)}h.priorWebsocketSuccess=!1,e.once("open",r),e.once("error",a),e.once("close",c),this.once("close",l),this.once("upgrading",u),e.open()},h.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},h.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else s('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},h.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},h.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},h.prototype.sendPacket=function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},h.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():e()})):this.upgrading?i():e()}function e(){t.onClose("forced close"),s("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function i(){t.once("upgrade",n),t.once("upgradeError",n)}return this},h.prototype.onError=function(t){s("socket error %j",t),h.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},h.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(s('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},h.prototype.filterUpgrades=function(t){for(var e=[],n=0,i=t.length;n<i;n++)~o(this.transports,t[n])&&e.push(t[n]);return e}},2672:(t,e,n)=>{var i=n(6809),r=n(5971);function s(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=s,r(s.prototype),s.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},s.prototype.onPacket=function(t){this.emit("packet",t)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},8520:(t,e,n)=>{var i=n(3376),r=n(9332),s=n(2252),o=n(6855);e.polling=function(t){var e=!1,n=!1,o=!1!==t.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),e=t.hostname!==location.hostname||c!==t.port,n=t.secure!==a}if(t.xdomain=e,t.xscheme=n,"open"in new i(t)&&!t.forceJSONP)return new r(t);if(!o)throw new Error("JSONP disabled");return new s(t)},e.websocket=o},2252:(t,e,n)=>{var i=n(5911),r=n(2370),s=n(3198);t.exports=h;var o,a=/\n/g,c=/\\n/g;function l(){}function h(t){i.call(this,t),this.query=this.query||{},o||(o=s.___eio=s.___eio||[]),this.index=o.length;var e=this;o.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=l)}),!1)}r(h,i),h.prototype.supportsBinary=!1,h.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},h.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},h.prototype.doWrite=function(t,e){var n=this;if(!this.form){var i,r=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),s.name="d",r.appendChild(s),document.body.appendChild(r),this.form=r,this.area=s}function l(){h(),e()}function h(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(t)}catch(t){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),h(),t=t.replace(c,"\\\n"),this.area.value=t.replace(a,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}},9332:(t,e,n)=>{var i=n(3376),r=n(5911),s=n(5971),o=n(2370),a=n(4953)("engine.io-client:polling-xhr"),c=n(3198);function l(){}function h(t){if(r.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function u(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function p(){for(var t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}t.exports=h,t.exports.Request=u,o(h,r),h.prototype.supportsBinary=!0,h.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new u(t)},h.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,i=this.request({method:"POST",data:t,isBinary:n}),r=this;i.on("success",e),i.on("error",(function(t){r.onError("xhr post error",t)})),this.sendXhr=i},h.prototype.doPoll=function(){a("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},s(u.prototype),u.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new i(t),n=this;try{a("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},a("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){n.onError(t)}),0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},u.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},u.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},u.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",p):"function"==typeof addEventListener&&addEventListener("onpagehide"in c?"pagehide":"unload",p,!1))},5911:(t,e,n)=>{var i=n(2672),r=n(9140),s=n(6809),o=n(2370),a=n(2121),c=n(4953)("engine.io-client:polling");t.exports=h;var l=null!=new(n(3376))({xdomain:!1}).responseType;function h(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),i.call(this,t)}o(h,i),h.prototype.name="polling",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(t){var e=this;function n(){c("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--i||n()}))),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){c("pre-pause writing complete"),--i||n()})))}else n()},h.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},h.prototype.onData=function(t){var e=this;c("polling got data %s",t),s.decodePayload(t,this.socket.binaryType,(function(t,n,i){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},h.prototype.doClose=function(){var t=this;function e(){c("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},h.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},h.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},6855:(t,e,n)=>{var i,r,s=n(2672),o=n(6809),a=n(9140),c=n(2370),l=n(2121),h=n(4953)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=n(7699)}catch(t){}var u=i||r;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=i&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(u=r),s.call(this,t)}t.exports=p,c(p,s),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new u(t,e):new u(t):new u(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,i=0,r=n;i<r;i++)!function(t){o.encodePacket(t,e.supportsBinary,(function(i){if(!e.usingBrowserWebSocket){var r={};t.options&&(r.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof i?Buffer.byteLength(i):i.length)<e.perMessageDeflate.threshold&&(r.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(i):e.ws.send(i,r)}catch(t){h("websocket closed before onclose event")}--n||(e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0))}))}(t[i])},p.prototype.onClose=function(){s.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},p.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===p.prototype.name)}},3376:(t,e,n)=>{t.exports=n(5480)},6617:(t,e,n)=>{function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n(9110)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(s=r))})),t.splice(s,0,i)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())},9110:(t,e,n)=>{function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,s=r-(n||r);t.diff=s,t.prev=n,t.curr=r,n=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=e.formatters[i];if("function"==typeof r){var s=o[c];n=r.call(t,s),o.splice(c,1),c--}return n})),e.formatArgs.call(t,o),(i.log||e.log||console.log.bind(console)).apply(t,o)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var s=e.instances[n];s.enabled=e.enabled(s.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(3097),e.instances=[],e.names=[],e.skips=[],e.formatters={}},4953:(t,e,n)=>{"undefined"==typeof process||"renderer"===process.type?t.exports=n(6617):t.exports=n(8001)},8001:(t,e,n)=>{var i=n(2018),r=n(9023);(e=t.exports=n(9110)).init=function(t){t.inspectOpts={};for(var n=Object.keys(e.inspectOpts),i=0;i<n.length;i++)t.inspectOpts[n[i]]=e.inspectOpts[n[i]]},e.log=function(){return process.stderr.write(r.format.apply(r,arguments)+"\n")},e.formatArgs=function(t){var n=this.namespace;if(this.useColors){var i=this.color,r="[3"+(i<8?i:"8;5;"+i),s="  "+r+";1m"+n+" [0m";t[0]=s+t[0].split("\n").join("\n"+s),t.push(r+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=o,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):i.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var s=n(7687);s&&s.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function o(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),i=process.env[e];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),t[n]=i,t}),{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts).split("\n").map((function(t){return t.trim()})).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts)},e.enable(o())},3097:t=>{var e=1e3,n=60*e,i=60*n,r=24*i;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,o){o=o||{};var a,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return o.long?s(a=t,r,"day")||s(a,i,"hour")||s(a,n,"minute")||s(a,e,"second")||a+" ms":function(t){return t>=r?Math.round(t/r)+"d":t>=i?Math.round(t/i)+"h":t>=n?Math.round(t/n)+"m":t>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},6809:(t,e,n)=>{var i=n(8758),r=n(8839),s=n(969),o=n(2505);e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},c=o(a),l={type:"error",data:"parser error"};const h=Buffer.concat([]);function u(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=t.data,s=Buffer.allocUnsafe(1);return s[0]=a[t.type],i(Buffer.concat([s,r]))}function p(t,e,n){for(var i=new Array(t.length),r=s(t.length,n),o=0;o<t.length;o++)e(t[o],(function(t,e){i[o]=e,r(t,i)}))}function d(t){for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);return e}function f(t){for(var e=Buffer.allocUnsafe(t.length),n=0,i=t.length;n<i;n++)e.writeUInt8(t.charCodeAt(n),n);return e}function m(t){var e=t.byteLength||t.length,n=t.byteOffset||0;return Buffer.from(t.buffer||t,n,e)}function g(t,n){e.encodePacket(t,!0,!0,(function(t){var e,i=""+t.length;if("string"==typeof t){(e=Buffer.allocUnsafe(i.length+2))[0]=0;for(var r=0;r<i.length;r++)e[r+1]=parseInt(i[r],10);return e[e.length-1]=255,n(null,Buffer.concat([e,f(t)]))}for((e=Buffer.allocUnsafe(i.length+2))[0]=1,r=0;r<i.length;r++)e[r+1]=parseInt(i[r],10);e[e.length-1]=255,n(null,Buffer.concat([e,t]))}))}e.encodePacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=null),"function"==typeof n&&(r=n,n=null),Buffer.isBuffer(t.data))return u(t,e,r);if(t.data&&(t.data.buffer||t.data)instanceof ArrayBuffer)return u({type:t.type,data:m(t.data)},e,r);var s=a[t.type];return void 0!==t.data&&(s+=n?i.encode(String(t.data),{strict:!1}):String(t.data)),r(""+s)},e.encodeBase64Packet=function(t,e){var n=Buffer.isBuffer(t.data)?t.data:m(t.data),i="b"+a[t.type];return e(i+=n.toString("base64"))},e.decodePacket=function(t,n,r){if(void 0===t)return l;var s;if("string"==typeof t)return"b"===(s=t.charAt(0))?e.decodeBase64Packet(t.substr(1),n):r&&!1===(t=function(t){try{t=i.decode(t,{strict:!1})}catch(t){return!1}return t}(t))?l:Number(s)==s&&c[s]?t.length>1?{type:c[s],data:t.substring(1)}:{type:c[s]}:l;if("arraybuffer"===n){var o=new Uint8Array(t);return s=o[0],{type:c[s],data:o.buffer.slice(1)}}return t instanceof ArrayBuffer&&(t=m(t)),s=t[0],{type:c[s],data:t.slice(1)}},e.decodeBase64Packet=function(t,e){var n=c[t.charAt(0)],i=Buffer.from(t.substr(1),"base64");if("arraybuffer"===e){for(var r=new Uint8Array(i.length),s=0;s<r.length;s++)r[s]=i[s];i=r.buffer}return{type:n,data:i}},e.encodePayload=function(t,n,i){return"function"==typeof n&&(i=n,n=null),n&&r(t)?e.encodePayloadAsBinary(t,i):t.length?void p(t,(function(t,i){e.encodePacket(t,n,!1,(function(t){i(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return i(e.join(""))})):i("0:")},e.decodePayload=function(t,n,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,i);if("function"==typeof n&&(i=n,n=null),""===t)return i(l,0,1);for(var r,s,o,a="",c=0,h=t.length;c<h;c++){var u=t.charAt(c);if(":"===u){if(""===a||a!=(r=Number(a)))return i(l,0,1);if(a!=(s=t.substr(c+1,r)).length)return i(l,0,1);if(s.length){if(o=e.decodePacket(s,n,!1),l.type===o.type&&l.data===o.data)return i(l,0,1);if(!1===i(o,c+r,h))return}c+=r,a=""}else a+=u}return""!==a?i(l,0,1):void 0},e.encodePayloadAsBinary=function(t,e){if(!t.length)return e(h);p(t,g,(function(t,n){return e(Buffer.concat(n))}))},e.decodePayloadAsBinary=function(t,n,i){"function"==typeof n&&(i=n,n=null);for(var r,s=t,o=[];s.length>0;){var a="",c=0===s[0];for(r=1;255!==s[r];r++){if(a.length>310)return i(l,0,1);a+=""+s[r]}s=s.slice(a.length+1);var h=parseInt(a,10),u=s.slice(1,h+1);c&&(u=d(u)),o.push(u),s=s.slice(h+1)}var p=o.length;for(r=0;r<p;r++){var f=o[r];i(e.decodePacket(f,n,!0),r,p)}}},2505:t=>{t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e}},8758:t=>{var e,n,i,r=String.fromCharCode;function s(t){for(var e,n,i=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function o(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(t,e){return r(t>>e&63|128)}function c(t,e){if(!(4294967168&t))return r(t);var n="";return 4294965248&t?4294901760&t?4292870144&t||(n=r(t>>18&7|240),n+=a(t,12),n+=a(t,6)):(o(t,e)||(t=65533),n=r(t>>12&15|224),n+=a(t,6)):n=r(t>>6&31|192),n+r(63&t|128)}function l(){if(i>=n)throw Error("Invalid byte index");var t=255&e[i];if(i++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(t){var r,s;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(r=255&e[i],i++,!(128&r))return r;if(192==(224&r)){if((s=(31&r)<<6|l())>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&r)){if((s=(15&r)<<12|l()<<6|l())>=2048)return o(s,t)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&r)&&(s=(7&r)<<18|l()<<12|l()<<6|l())>=65536&&s<=1114111)return s;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,i=s(t),r=i.length,o=-1,a="";++o<r;)a+=c(i[o],n);return a},decode:function(t,o){var a=!1!==(o=o||{}).strict;e=s(t),n=e.length,i=0;for(var c,l=[];!1!==(c=h(a));)l.push(c);return function(t){for(var e,n=t.length,i=-1,s="";++i<n;)(e=t[i])>65535&&(s+=r((e-=65536)>>>10&1023|55296),e=56320|1023&e),s+=r(e);return s}(l)}}},228:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,s),!0;case 6:return h.fn.call(h.context,e,i,r,s,o),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var p,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,i);break;case 4:h[l].fn.call(h[l].context,e,i,r);break;default:if(!c)for(p=1,c=new Array(u-1);p<u;p++)c[p-1]=arguments[p];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==e||r&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},7833:(t,e,n)=>{var i=n(4942);t.exports={create:function(t,e){if(t instanceof(e=e||(0,eval)("this")).ArrayBuffer){var r=n(4628);return new i(new r(t,0,t.byteLength,!0,e))}var s=n(3779);return new i(new s(t,0,t.length,!0))}}},3779:t=>{function e(t,e,n,i){this.buffer=t,this.offset=e||0,n="number"==typeof n?n:t.length,this.endPosition=this.offset+n,this.setBigEndian(i)}e.prototype={setBigEndian:function(t){this.bigEndian=!!t},nextUInt8:function(){var t=this.buffer.readUInt8(this.offset);return this.offset+=1,t},nextInt8:function(){var t=this.buffer.readInt8(this.offset);return this.offset+=1,t},nextUInt16:function(){var t=this.bigEndian?this.buffer.readUInt16BE(this.offset):this.buffer.readUInt16LE(this.offset);return this.offset+=2,t},nextUInt32:function(){var t=this.bigEndian?this.buffer.readUInt32BE(this.offset):this.buffer.readUInt32LE(this.offset);return this.offset+=4,t},nextInt16:function(){var t=this.bigEndian?this.buffer.readInt16BE(this.offset):this.buffer.readInt16LE(this.offset);return this.offset+=2,t},nextInt32:function(){var t=this.bigEndian?this.buffer.readInt32BE(this.offset):this.buffer.readInt32LE(this.offset);return this.offset+=4,t},nextFloat:function(){var t=this.bigEndian?this.buffer.readFloatBE(this.offset):this.buffer.readFloatLE(this.offset);return this.offset+=4,t},nextDouble:function(){var t=this.bigEndian?this.buffer.readDoubleBE(this.offset):this.buffer.readDoubleLE(this.offset);return this.offset+=8,t},nextBuffer:function(t){var e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e},remainingLength:function(){return this.endPosition-this.offset},nextString:function(t){var e=this.buffer.toString("utf8",this.offset,this.offset+t);return this.offset+=t,e},mark:function(){var t=this;return{openWithOffset:function(n){return n=(n||0)+this.offset,new e(t.buffer,n,t.endPosition-n,t.bigEndian)},offset:this.offset}},offsetFrom:function(t){return this.offset-t.offset},skip:function(t){this.offset+=t},branch:function(t,n){return n="number"==typeof n?n:this.endPosition-(this.offset+t),new e(this.buffer,this.offset+t,n,this.bigEndian)}},t.exports=e},2297:t=>{function e(t){return parseInt(t,10)}function n(t,n){t=t.map(e),n=n.map(e);var i=t[0],r=t[1]-1,s=t[2],o=n[0],a=n[1],c=n[2];return Date.UTC(i,r,s,o,a,c,0)/1e3}function i(t){var i=t.substr(0,10).split("-"),r=t.substr(11,8).split(":"),s=t.substr(19,6).split(":").map(e),o=3600*s[0]+60*s[1],a=n(i,r);if("number"==typeof(a-=o)&&!isNaN(a))return a}function r(t){var e=t.split(" "),i=n(e[0].split(":"),e[1].split(":"));if("number"==typeof i&&!isNaN(i))return i}t.exports={parseDateWithSpecFormat:r,parseDateWithTimezoneFormat:i,parseExifDate:function(t){var e=19===t.length&&":"===t.charAt(4);return 25===t.length&&"T"===t.charAt(10)?i(t):e?r(t):void 0}}},4628:t=>{function e(t,e,n,i,r,s){this.global=r,e=e||0,n=n||t.byteLength-e,this.arrayBuffer=t.slice(e,e+n),this.view=new r.DataView(this.arrayBuffer,0,this.arrayBuffer.byteLength),this.setBigEndian(i),this.offset=0,this.parentOffset=(s||0)+e}e.prototype={setBigEndian:function(t){this.littleEndian=!t},nextUInt8:function(){var t=this.view.getUint8(this.offset);return this.offset+=1,t},nextInt8:function(){var t=this.view.getInt8(this.offset);return this.offset+=1,t},nextUInt16:function(){var t=this.view.getUint16(this.offset,this.littleEndian);return this.offset+=2,t},nextUInt32:function(){var t=this.view.getUint32(this.offset,this.littleEndian);return this.offset+=4,t},nextInt16:function(){var t=this.view.getInt16(this.offset,this.littleEndian);return this.offset+=2,t},nextInt32:function(){var t=this.view.getInt32(this.offset,this.littleEndian);return this.offset+=4,t},nextFloat:function(){var t=this.view.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t},nextDouble:function(){var t=this.view.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t},nextBuffer:function(t){var e=this.arrayBuffer.slice(this.offset,this.offset+t);return this.offset+=t,e},remainingLength:function(){return this.arrayBuffer.byteLength-this.offset},nextString:function(t){var e=this.arrayBuffer.slice(this.offset,this.offset+t);return e=String.fromCharCode.apply(null,new this.global.Uint8Array(e)),this.offset+=t,e},mark:function(){var t=this;return{openWithOffset:function(n){return n=(n||0)+this.offset,new e(t.arrayBuffer,n,t.arrayBuffer.byteLength-n,!t.littleEndian,t.global,t.parentOffset)},offset:this.offset,getParentOffset:function(){return t.parentOffset}}},offsetFrom:function(t){return this.parentOffset+this.offset-(t.offset+t.getParentOffset())},skip:function(t){this.offset+=t},branch:function(t,n){return n="number"==typeof n?n:this.arrayBuffer.byteLength-(this.offset+t),new e(this.arrayBuffer,this.offset+t,n,!this.littleEndian,this.global,this.parentOffset)}},t.exports=e},6393:t=>{t.exports={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}}},8107:t=>{function e(t,e){switch(t){case 1:return e.nextUInt8();case 3:case 8:return e.nextUInt16();case 4:case 9:return e.nextUInt32();case 5:return[e.nextUInt32(),e.nextUInt32()];case 6:return e.nextInt8();case 10:return[e.nextInt32(),e.nextInt32()];case 11:return e.nextFloat();case 12:return e.nextDouble();default:throw new Error("Invalid format while decoding: "+t)}}function n(t,n){var i,r,s=n.nextUInt16(),o=n.nextUInt16(),a=function(t){switch(t){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}}(o),c=n.nextUInt32(),l=a*c;if(l>4&&(n=t.openWithOffset(n.nextUInt32())),2===o){var h=(i=n.nextString(c)).indexOf("\0");-1!==h&&(i=i.substr(0,h))}else if(7===o)i=n.nextBuffer(c);else if(0!==o)for(i=[],r=0;r<c;++r)i.push(e(o,n));return l<4&&n.skip(4-l),[s,i,o]}function i(t,e,i){var r,s,o=e.nextUInt16();for(s=0;s<o;++s)i((r=n(t,e))[0],r[1],r[2])}t.exports={IFD0:1,IFD1:2,GPSIFD:3,SubIFD:4,InteropIFD:5,parseTags:function(t,e){var n,r,s,o;try{n=function(t){if("Exif\0\0"!==t.nextString(6))throw new Error("Invalid EXIF header");var e=t.mark(),n=t.nextUInt16();if(18761===n)t.setBigEndian(!1);else{if(19789!==n)throw new Error("Invalid TIFF header");t.setBigEndian(!0)}if(42!==t.nextUInt16())throw new Error("Invalid TIFF data");return e}(t)}catch(t){return!1}var a=n.openWithOffset(t.nextUInt32()),c=this.IFD0;i(n,a,(function(t,n,i){switch(t){case 34853:s=n[0];break;case 34665:r=n[0];break;default:e(c,t,n,i)}}));var l=a.nextUInt32();if(0!==l){var h=n.openWithOffset(l);i(n,h,e.bind(null,this.IFD1))}if(s){var u=n.openWithOffset(s);i(n,u,e.bind(null,this.GPSIFD))}if(r){var p=n.openWithOffset(r),d=this.InteropIFD;i(n,p,(function(t,n,i){40965===t?o=n[0]:e(d,t,n,i)}))}if(o){var f=n.openWithOffset(o);i(n,f,e.bind(null,this.InteropIFD))}return!0}}},2335:t=>{t.exports={parseSections:function(t,e){var n,i;for(t.setBigEndian(!0);t.remainingLength()>0&&218!==i;){if(255!==t.nextUInt8())throw new Error("Invalid JPEG section offset");n=(i=t.nextUInt8())>=208&&i<=217||218===i?0:t.nextUInt16()-2,e(i,t.branch(0,n)),t.skip(n)}},getSizeFromSOFSection:function(t){return t.skip(1),{height:t.nextUInt16(),width:t.nextUInt16()}},getSectionName:function(t){var e,n;switch(t){case 216:e="SOI";break;case 196:e="DHT";break;case 219:e="DQT";break;case 221:e="DRI";break;case 218:e="SOS";break;case 254:e="COM";break;case 217:e="EOI";break;default:t>=224&&t<=239?(e="APP",n=t-224):t>=192&&t<=207&&196!==t&&200!==t&&204!==t?(e="SOF",n=t-192):t>=208&&t<=215&&(e="RST",n=t-208)}var i={name:e};return"number"==typeof n&&(i.index=n),i}}},4942:(t,e,n)=>{var i=n(2335),r=n(8107),s=n(9062);function o(t,e,n,i,r,s,o){this.startMarker=t,this.tags=e,this.imageSize=n,this.thumbnailOffset=i,this.thumbnailLength=r,this.thumbnailType=s,this.app1Offset=o}function a(t){this.stream=t,this.flags={readBinaryTags:!1,resolveTagNames:!0,simplifyValues:!0,imageSize:!0,hidePointers:!0,returnTags:!0}}o.prototype={hasThumbnail:function(t){return!(!this.thumbnailOffset||!this.thumbnailLength||"string"==typeof t&&("image/jpeg"===t.toLowerCase().trim()?6!==this.thumbnailType:"image/tiff"!==t.toLowerCase().trim()||1!==this.thumbnailType))},getThumbnailOffset:function(){return this.app1Offset+6+this.thumbnailOffset},getThumbnailLength:function(){return this.thumbnailLength},getThumbnailBuffer:function(){return this._getThumbnailStream().nextBuffer(this.thumbnailLength)},_getThumbnailStream:function(){return this.startMarker.openWithOffset(this.getThumbnailOffset())},getImageSize:function(){return this.imageSize},getThumbnailSize:function(){var t,e=this._getThumbnailStream();return i.parseSections(e,(function(e,n){"SOF"===i.getSectionName(e).name&&(t=i.getSizeFromSOFSection(n))})),t}},a.prototype={enableBinaryFields:function(t){return this.flags.readBinaryTags=!!t,this},enablePointers:function(t){return this.flags.hidePointers=!t,this},enableTagNames:function(t){return this.flags.resolveTagNames=!!t,this},enableImageSize:function(t){return this.flags.imageSize=!!t,this},enableReturnTags:function(t){return this.flags.returnTags=!!t,this},enableSimpleValues:function(t){return this.flags.simplifyValues=!!t,this},parse:function(){var t,e,a,c,l,h,u,p,d,f=this.stream.mark(),m=f.openWithOffset(0),g=this.flags;return g.resolveTagNames&&(u=n(6393)),g.resolveTagNames?(t={},p=function(e){return t[e.name]},d=function(e,n){t[e.name]=n}):(t=[],p=function(e){var n;for(n=0;n<t.length;++n)if(t[n].type===e.type&&t[n].section===e.section)return t.value},d=function(e,n){var i;for(i=0;i<t.length;++i)if(t[i].type===e.type&&t[i].section===e.section)return void(t.value=n)}),i.parseSections(m,(function(n,o){var p=o.offsetFrom(f);225===n?r.parseTags(o,(function(e,n,i,o){if(g.readBinaryTags||7!==o){if(513===n){if(a=i[0],g.hidePointers)return}else if(514===n){if(c=i[0],g.hidePointers)return}else if(259===n&&(l=i[0],g.hidePointers))return;if(g.returnTags)if(g.simplifyValues&&(i=s.simplifyValue(i,o)),g.resolveTagNames){var h=(e===r.GPSIFD?u.gps:u.exif)[n];h||(h=u.exif[n]),t.hasOwnProperty(h)||(t[h]=i)}else t.push({section:e,type:n,value:i})}}))&&(h=p):g.imageSize&&"SOF"===i.getSectionName(n).name&&(e=i.getSizeFromSOFSection(o))})),g.simplifyValues&&(s.castDegreeValues(p,d),s.castDateValues(p,d)),new o(f,t,e,a,c,l,h)}},t.exports=a},9062:(t,e,n)=>{var i=n(8107),r=n(2297),s=[{section:i.GPSIFD,type:2,name:"GPSLatitude",refType:1,refName:"GPSLatitudeRef",posVal:"N"},{section:i.GPSIFD,type:4,name:"GPSLongitude",refType:3,refName:"GPSLongitudeRef",posVal:"E"}],o=[{section:i.SubIFD,type:306,name:"ModifyDate"},{section:i.SubIFD,type:36867,name:"DateTimeOriginal"},{section:i.SubIFD,type:36868,name:"CreateDate"},{section:i.SubIFD,type:306,name:"ModifyDate"}];t.exports={castDegreeValues:function(t,e){s.forEach((function(n){var i=t(n);if(i){var r=t({section:n.section,type:n.refType,name:n.refName})===n.posVal?1:-1,s=(i[0]+i[1]/60+i[2]/3600)*r;e(n,s)}}))},castDateValues:function(t,e){o.forEach((function(n){var i=t(n);if(i){var s=r.parseExifDate(i);void 0!==s&&e(n,s)}}))},simplifyValue:function(t,e){return Array.isArray(t)&&1===(t=t.map((function(t){return 10===e||5===e?t[0]/t[1]:t}))).length&&(t=t[0]),t}}},2017:t=>{"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;0!=r--;){var o=s[r];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n}},3846:t=>{"use strict";const e=t=>[...t].map((t=>t.charCodeAt(0))),n=e("META-INF/mozilla.rsa"),i=e("[Content_Types].xml"),r=e("_rels/.rels");t.exports=t=>{const s=t instanceof Uint8Array?t:new Uint8Array(t);if(!(s&&s.length>1))return null;const o=(t,e)=>{e=Object.assign({offset:0},e);for(let n=0;n<t.length;n++)if(e.mask){if(t[n]!==(e.mask[n]&s[n+e.offset]))return!1}else if(t[n]!==s[n+e.offset])return!1;return!0},a=(t,n)=>o(e(t),n);if(o([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(o([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(o([71,73,70]))return{ext:"gif",mime:"image/gif"};if(o([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(o([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((o([73,73,42,0])||o([77,77,0,42]))&&o([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(o([73,73,42,0])||o([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(o([66,77]))return{ext:"bmp",mime:"image/bmp"};if(o([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(o([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(o([80,75,3,4])){if(o([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(o(n,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(a("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(a("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(a("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const t=(t,e=0)=>t.findIndex(((t,n,i)=>n>=e&&80===i[n]&&75===i[n+1]&&3===i[n+2]&&4===i[n+3]));let e=0,c=!1,l=null;do{const n=e+30;if(c||(c=o(i,{offset:n})||o(r,{offset:n})),l||(a("word/",{offset:n})?l={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:a("ppt/",{offset:n})?l={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:a("xl/",{offset:n})&&(l={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),c&&l)return l;e=t(s,n)}while(e>=0);if(l)return l}if(o([80,75])&&(3===s[2]||5===s[2]||7===s[2])&&(4===s[3]||6===s[3]||8===s[3]))return{ext:"zip",mime:"application/zip"};if(o([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(o([82,97,114,33,26,7])&&(0===s[6]||1===s[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(o([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(o([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(o([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(o([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(o([51,103,112,53])||o([0,0,0])&&o([102,116,121,112],{offset:4})&&(o([109,112,52,49],{offset:8})||o([109,112,52,50],{offset:8})||o([105,115,111,109],{offset:8})||o([105,115,111,50],{offset:8})||o([109,109,112,52],{offset:8})||o([77,52,86],{offset:8})||o([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(o([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(o([26,69,223,163])){const t=s.subarray(4,4100),e=t.findIndex(((t,e,n)=>66===n[e]&&130===n[e+1]));if(-1!==e){const n=e+3,i=e=>[...e].every(((e,i)=>t[n+i]===e.charCodeAt(0)));if(i("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(i("webm"))return{ext:"webm",mime:"video/webm"}}}if(o([0,0,0,20,102,116,121,112,113,116,32,32])||o([102,114,101,101],{offset:4})||o([102,116,121,112,113,116,32,32],{offset:4})||o([109,100,97,116],{offset:4})||o([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(o([82,73,70,70])){if(o([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(o([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(o([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(o([48,38,178,117,142,102,207,17,166,217]))return{ext:"wmv",mime:"video/x-ms-wmv"};if(o([0,0,1,186])||o([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(o([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let t=0;t<2&&t<s.length-16;t++){if(o([73,68,51],{offset:t})||o([255,226],{offset:t,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(o([255,228],{offset:t,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(o([255,248],{offset:t,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(o([255,240],{offset:t,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(o([102,116,121,112,77,52,65],{offset:4})||o([77,52,65,32]))return{ext:"m4a",mime:"audio/mp4"};if(o([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(o([79,103,103,83]))return o([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:o([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:o([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:o([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:o([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(o([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(o([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(o([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(o([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(o([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(o([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===s[0]||70===s[0])&&o([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(o([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(o([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(o([119,79,70,70])&&(o([0,1,0,0],{offset:4})||o([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(o([119,79,70,50])&&(o([0,1,0,0],{offset:4})||o([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(o([76,80],{offset:34})&&(o([0,0,1],{offset:8})||o([1,0,2],{offset:8})||o([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(o([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(o([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(o([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(o([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(o([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(o([37,33]))return{ext:"ps",mime:"application/postscript"};if(o([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(o([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(o([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(o([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(o([77,83,67,70])||o([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(o([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(o([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(o([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(o([31,160])||o([31,157]))return{ext:"Z",mime:"application/x-compress"};if(o([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(o([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(o([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(o([71],{offset:4})&&(o([71],{offset:192})||o([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(o([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(o([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(o([0,0,0,12,106,80,32,32,13,10,135,10])){if(o([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(o([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(o([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(o([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(o([70,79,82,77,0]))return{ext:"aif",mime:"audio/aiff"};if(a("<?xml "))return{ext:"xml",mime:"application/xml"};if(o([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(o([102,116,121,112],{offset:4})){if(o([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(o([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(o([104,101,105,99],{offset:8})||o([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(o([104,101,118,99],{offset:8})||o([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return o([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:null}},5635:(t,e,n)=>{"use strict";const{PassThrough:i}=n(2203);t.exports=t=>{t={...t};const{array:e}=t;let{encoding:n}=t;const r="buffer"===n;let s=!1;e?s=!(n||r):n=n||"utf8",r&&(n=null);const o=new i({objectMode:s});n&&o.setEncoding(n);let a=0;const c=[];return o.on("data",(t=>{c.push(t),s?a=c.length:a+=t.length})),o.getBufferedValue=()=>e?c:r?Buffer.concat(c,a):c.join(""),o.getBufferedLength=()=>a,o}},4594:(t,e,n)=>{"use strict";const{constants:i}=n(181),r=n(2203),{promisify:s}=n(9023),o=n(5635),a=s(r.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function l(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};const{maxBuffer:n}=e,r=o(e);return await new Promise(((e,s)=>{const o=t=>{t&&r.getBufferedLength()<=i.MAX_LENGTH&&(t.bufferedData=r.getBufferedValue()),s(t)};(async()=>{try{await a(t,r),e()}catch(t){o(t)}})(),r.on("data",(()=>{r.getBufferedLength()>n&&o(new c)}))})),r.getBufferedValue()}t.exports=l,t.exports.buffer=(t,e)=>l(t,{...e,encoding:"buffer"}),t.exports.array=(t,e)=>l(t,{...e,array:!0}),t.exports.MaxBufferError=c},9208:t=>{"use strict";class e{constructor(...t){if(0===t.length)throw new Error("constructor requires parameters");const n=t[0];if(null!==n&&"object"==typeof n)if(n instanceof e){const t=n.bitmap;this.bitmap={width:t.width,height:t.height,data:new Buffer(t.width*t.height*4)},t.data.copy(this.bitmap.data)}else{if(!(n.width&&n.height&&n.data))throw new Error("unrecognized constructor parameters");this.bitmap=n}else{if("number"!=typeof n||"number"!=typeof t[1])throw new Error("unrecognized constructor parameters");{const e=n,i=t[1],r=t[2];this.bitmap={width:e,height:i},Buffer.isBuffer(r)?this.bitmap.data=r:(this.bitmap.data=new Buffer(e*i*4),"number"==typeof r&&this.fillRGBA(r))}}}blit(t,e,n,i,r,s,o){if(i+s>this.bitmap.width)throw new Error("copy exceeds width of source bitmap");if(e+s>t.bitmap.width)throw new Error("copy exceeds width of target bitmap");if(r+o>this.bitmap.height)throw new Error("copy exceeds height of source bitmap");if(n+o>t.bitmap.height)throw new Erro("copy exceeds height of target bitmap");const a=this.bitmap.data,c=t.bitmap.data,l=4*this.bitmap.width,h=4*t.bitmap.width,u=4*s;let p=r*l+4*i,d=n*h+4*e;for(;--o>=0;)a.copy(c,d,p,p+u),p+=l,d+=h;return this}fillRGBA(t){const e=this.bitmap.data,n=4*this.bitmap.height;let i=0;for(;i<n;)e.writeUInt32BE(t,i),i+=4;for(;i<e.length;)e.copy(e,i,0,n),i+=n;return this}getRGBA(t,e){const n=4*(e*this.bitmap.width+t);return this.bitmap.data.readUInt32BE(n)}getRGBASet(){const t=new Set,e=this.bitmap.data;for(let n=0;n<e.length;n+=4)t.add(e.readUInt32BE(n,!0));return t}greyscale(){const t=this.bitmap.data;return this.scan(0,0,this.bitmap.width,this.bitmap.height,((e,n,i)=>{const r=Math.round(.299*t[i]+.587*t[i+1]+.114*t[i+2]);t[i]=r,t[i+1]=r,t[i+2]=r})),this}reframe(t,n,i,r,s){const o=t<0?0:t,a=n<0?0:n,c=i+o>this.bitmap.width?this.bitmap.width-o:i,l=r+a>this.bitmap.height?this.bitmap.height-a:r,h=t<0?-t:0,u=n<0?-n:0;let p;if(void 0===s){if(o!==t||a!=n||c!==i||l!==r)throw new GifError("fillRGBA required for this reframing");p=new e(i,r)}else p=new e(i,r,s);return this.blit(p,h,u,o,a,c,l),this.bitmap=p.bitmap,this}scale(t){if(1===t)return;if(!Number.isInteger(t)||t<1)throw new Error("the scale must be an integer >= 1");const e=this.bitmap.width,n=this.bitmap.height,i=e*t*4,r=this.bitmap.data,s=new Buffer(n*i*t);let o,a=0,c=0;for(let l=0;l<n;++l){o=c;for(let n=0;n<e;++n){const e=r.readUInt32BE(a,!0);for(let n=0;n<t;++n)s.writeUInt32BE(e,c),c+=4;a+=4}for(let e=1;e<t;++e)s.copy(s,c,o,c),c+=i,o+=i}return this.bitmap={width:e*t,height:n*t,data:s},this}scanAllCoords(t){const e=this.bitmap.width,n=this.bitmap.data.length;let i=0,r=0;for(let s=0;s<n;s+=4)t(i,r,s),++i===e&&(i=0,++r)}scanAllIndexes(t){const e=this.bitmap.data.length;for(let n=0;n<e;n+=4)t(n)}}t.exports=e},1658:(t,e)=>{"use strict";class n{constructor(t,e,n){this.width=n.width,this.height=n.height,this.loops=n.loops,this.usesTransparency=n.usesTransparency,this.colorScope=n.colorScope,this.frames=e,this.buffer=t}}n.GlobalColorsPreferred=0,n.GlobalColorsOnly=1,n.LocalColorsOnly=2;class i extends Error{constructor(t){super(t),t instanceof Error&&(this.stack="Gif"+t.stack)}}e.Gif=n,e.GifError=i},6154:(t,e,n)=>{"use strict";const i=n(4399),{Gif:r,GifError:s}=n(1658);function o(){const t=n(3606);return o=function(){return t},t}const{GifFrame:a}=n(9925);function c(t,e){const n=t.indexOf(e);return-1===n?null:n}function l(t,e){for(var n,i=0,r=t.length-1;i<=r;)if(t[n=Math.floor((i+r)/2)]>e)r=n-1;else{if(!(t[n]<e))return n;i=n+1}return null}function h(t){const e=t.colors;t.usesTransparency&&e.push(0);const n=e.length;let i=2;for(;n>i;)i<<=1;e.length=i,e.fill(0,n)}function u(t,e){let n=t.bitmap.width*t.bitmap.height;return n=Math.ceil(n*e/8),n+=Math.ceil(n/255),100+n+768}function p(t){let e=t.indexCount,n=0;for(--e;e;)++n,e>>=1;return n>0?n:1}function d(t,e,n,i,r){if(n.interlaced)throw new s("writing interlaced GIFs is not supported");const o=function(t,e,n){const i=n.colors,r=i.length<=8?c:l,o=e.bitmap.data,a=new Buffer(o.length/4);let h=i.length,u=0,p=0;for(;u<o.length;){if(0!==o[u+3]){const t=o.readUInt32BE(u,!0)>>8&16777215;a[p]=r(i,t)}else a[p]=h;u+=4,++p}if(n.usesTransparency){if(256===h)throw new s(`Frame ${t} already has 256 colorsand so can't use transparency`)}else h=null;return{buffer:a,transparentIndex:h}}(e,n,i),a={delay:n.delayCentisecs,disposal:n.disposalMethod,transparent:o.transparentIndex};r&&(h(i),a.palette=i.colors);try{let e,i=t.getOutputBuffer(),r=t.getOutputBufferPosition(),s=!0;for(;s;)if(e=t.addFrame(n.xOffset,n.yOffset,n.bitmap.width,n.bitmap.height,o.buffer,a),s=!1,e>=i.length-1){const e=new Buffer(1.5*i.length);i.copy(e),t.setOutputBuffer(e),t.setOutputBufferPosition(r),i=e,s=!0}return i}catch(t){throw new s(t)}}e.GifCodec=class{constructor(t={}){this._transparentRGB=null,"number"==typeof t.transparentRGB&&0!==t.transparentRGB&&(this._transparentRGBA=256*t.transparentRGB),this._testInitialBufferSize=0}decodeGif(t){try{let e;try{e=new i.GifReader(t)}catch(t){throw new s(t)}const n=e.numFrames(),o=[],a={width:e.width,height:e.height,loops:e.loopCount(),usesTransparency:!1};for(let t=0;t<n;++t){const n=this._decodeFrame(e,t,a.usesTransparency);o.push(n.frame),n.usesTransparency&&(a.usesTransparency=!0)}return Promise.resolve(new r(t,o,a))}catch(t){return Promise.reject(t)}}encodeGif(t,e={}){try{if(null===t||0===t.length)throw new s("there are no frames");const n=o().getMaxDimensions(t);return(e=Object.assign({},e)).width=n.maxWidth,e.height=n.maxHeight,e.loops=e.loops||0,e.colorScope=e.colorScope||r.GlobalColorsPreferred,Promise.resolve(this._encodeGif(t,e))}catch(t){return Promise.reject(t)}}_decodeFrame(t,e,n){let i,r;try{if(i=t.frameInfo(e),r=new Buffer(t.width*t.height*4),t.decodeAndBlitFrameRGBA(e,r),i.width!==t.width||i.height!==t.height){if(i.y&&(r=r.slice(i.y*t.width*4)),t.width>i.width)for(let e=0;e<i.height;++e)r.copy(r,e*i.width*4,4*(i.x+e*t.width),4*(i.x+e*t.width)+4*i.width);r=r.slice(0,i.width*i.height*4)}}catch(t){throw new s(t)}let o=!1;if(null===this._transparentRGBA){if(!n)for(let t=3;t<r.length;t+=4)0===r[t]&&(o=!0,t=r.length)}else for(let t=3;t<r.length;t+=4)0===r[t]&&(r.writeUInt32BE(this._transparentRGBA,t-3),o=!0);return{frame:new a(i.width,i.height,r,{xOffset:i.x,yOffset:i.y,disposalMethod:i.disposal,interlaced:i.interlaced,delayCentisecs:i.delay}),usesTransparency:o}}_encodeGif(t,e){let n;if(e.colorScope===r.LocalColorsOnly)n=o().getColorInfo(t,0);else if(n=o().getColorInfo(t,256),!n.colors){if(e.colorScope===r.GlobalColorsOnly)throw new s("Too many color indexes for global color table");e.colorScope=r.LocalColorsOnly}e.usesTransparency=n.usesTransparency;const a=n.palettes;return e.colorScope===r.LocalColorsOnly?function(t,e,n,o){const a={loop:e.loops};let c,l=new Buffer(2e3);try{c=new i.GifWriter(l,e.width,e.height,a)}catch(t){throw new s(t)}for(let e=0;e<t.length;++e)l=d(c,e,t[e],o[e],!0);return new r(l.slice(0,c.end()),t,e)}(t,e,0,a):function(t,e,n,o){const a={colors:o.colors.slice(),usesTransparency:o.usesTransparency};h(a);const c={palette:a.colors,loop:e.loops};let l,u=new Buffer(2e3);try{l=new i.GifWriter(u,e.width,e.height,c)}catch(t){throw new s(t)}for(let e=0;e<t.length;++e)u=d(l,e,t[e],o,!1);return new r(u.slice(0,l.end()),t,e)}(t,e,0,n)}_getSizeEstimateGlobal(t,e){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let n=968;const i=p(t);return e.forEach((t=>{n+=u(t,i)})),n}_getSizeEstimateLocal(t,e){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let n=200;for(let i=0;i<e.length;++i){const r=p(t[i]);n+=u(e[i],r)}return n}}},9925:(t,e,n)=>{"use strict";const i=n(9208),{GifError:r}=n(1658);class s extends i{constructor(...t){if(super(...t),t[0]instanceof s){const e=t[0];this.xOffset=e.xOffset,this.yOffset=e.yOffset,this.disposalMethod=e.disposalMethod,this.delayCentisecs=e.delayCentisecs,this.interlaced=e.interlaced}else{const e=t[t.length-1];let n={};"object"!=typeof e||e instanceof i||(n=e),this.xOffset=n.xOffset||0,this.yOffset=n.yOffset||0,this.disposalMethod=void 0!==n.disposalMethod?n.disposalMethod:s.DisposeToBackgroundColor,this.delayCentisecs=n.delayCentisecs||8,this.interlaced=n.interlaced||!1}}getPalette(){const t=new Set,e=this.bitmap.data;let n=0,i=!1;for(;n<e.length;){if(0===e[n+3])i=!0;else{const i=e.readUInt32BE(n,!0)>>8&16777215;t.add(i)}n+=4}const r=new Array(t.size),s=t.values();for(n=0;n<r.length;++n)r[n]=s.next().value;r.sort(((t,e)=>t-e));let o=r.length;return i&&++o,{colors:r,usesTransparency:i,indexCount:o}}}s.DisposeToAnything=0,s.DisposeNothing=1,s.DisposeToBackgroundColor=2,s.DisposeToPrevious=3,e.GifFrame=s},3606:(t,e,n)=>{"use strict";const i=n(9896),r=n(5565),s=n(9208),{GifFrame:o}=n(9925),{GifError:a}=n(1658),{GifCodec:c}=n(6154),l=[".jpg",".jpeg",".png",".bmp"],h=new c;function u(t,e,n,i,s){const o=Array.isArray(t)?t:[t];if(s){if(["FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite"].indexOf(s.ditherAlgorithm)<0)throw new Error(`Invalid ditherAlgorithm '${s.ditherAlgorithm}'`);void 0===s.serpentine&&(s.serpentine=!0),void 0===s.minimumColorDistanceToDither&&(s.minimumColorDistanceToDither=0),void 0===s.calculateErrorLikeGIMP&&(s.calculateErrorLikeGIMP=!1)}const a=new r.distance.Euclidean,c=new r.palette[e](a,n,i);let l;l=s?new r.image.ErrorDiffusionArray(a,r.image.ErrorDiffusionArrayKernel[s.ditherAlgorithm],s.serpentine,s.minimumColorDistanceToDither,s.calculateErrorLikeGIMP):new r.image.NearestColor(a);const h=[];o.forEach((t=>{const e=t.bitmap.data,n=new ArrayBuffer(e.length),i=new Uint32Array(n);for(let t=0,n=0;t<e.length;t+=4,++n)i[n]=e.readUInt32LE(t,!0);const s=r.utils.PointContainer.fromUint32Array(i,t.bitmap.width,t.bitmap.height);c.sample(s),h.push(s)}));const u=c.quantizeSync();for(let t=0;t<o.length;++t){const e=o[t].bitmap.data,n=l.quantizeSync(h[t],u).toUint32Array();for(let t=0,i=0;t<e.length;t+=4,++i)e.writeUInt32LE(n[i],t)}}e.cloneFrames=function(t){let e=[];return t.forEach((t=>{e.push(new o(t))})),e},e.getColorInfo=function(t,e){let n=!1;const i=[];for(let e=0;e<t.length;++e){let r=t[e].getPalette();if(r.usesTransparency&&(n=!0),r.indexCount>256)throw new a(`Frame ${e} uses more than 256 color indexes`);i.push(r)}if(0===e)return{usesTransparency:n,palettes:i};const r=new Set;i.forEach((t=>{t.colors.forEach((t=>{r.add(t)}))}));let s=r.size;if(n&&++s,e&&s>e)return{usesTransparency:n,palettes:i};const o=new Array(r.size),c=r.values();for(let t=0;t<o.length;++t)o[t]=c.next().value;return o.sort(((t,e)=>t-e)),{colors:o,indexCount:s,usesTransparency:n,palettes:i}},e.copyAsJimp=function(t,n){return e.shareAsJimp(t,new s(n))},e.getMaxDimensions=function(t){let e=0,n=0;return t.forEach((t=>{const i=t.xOffset+t.bitmap.width;i>e&&(e=i);const r=t.yOffset+t.bitmap.height;r>n&&(n=r)})),{maxWidth:e,maxHeight:n}},e.quantizeDekker=function(t,e,n){u(t,"NeuQuantFloat",e=e||256,0,n)},e.quantizeSorokin=function(t,e,n,i){let r;switch(e=e||256,n=n||"min-pop"){case"min-pop":r=2;break;case"top-pop":r=1;break;default:throw new Error(`Invalid quantizeSorokin histogram '${n}'`)}u(t,"RGBQuant",e,r,i)},e.quantizeWu=function(t,e,n,i){if(e=e||256,(n=n||5)<1||n>8)throw new Error("Invalid quantization quality");u(t,"WuQuant",e,n,i)},e.read=function(t,e){return e=e||h,Buffer.isBuffer(t)?e.decodeGif(t):(n=t,new Promise(((t,e)=>{i.readFile(n,((n,i)=>n?e(n):t(i)))}))).then((t=>e.decodeGif(t)));var n},e.shareAsJimp=function(t,e){const n=new t(e.bitmap.width,e.bitmap.height,0);return n.bitmap.data=e.bitmap.data,n},e.write=function(t,e,n,r){r=r||h;const s=t.match(/\.[a-zA-Z]+$/);if(null!==s&&l.includes(s[0].toLowerCase()))throw new Error(`GIF '${t}' has an unexpected suffix`);return r.encodeGif(e,n).then((e=>function(t,e){return new Promise(((n,r)=>{i.writeFile(t,e,(t=>t?r(t):n()))}))}(t,e.buffer).then((()=>e))))}},1224:(t,e,n)=>{"use strict";const i=n(9208),{Gif:r,GifError:s}=n(1658),{GifCodec:o}=n(6154),{GifFrame:a}=n(9925),c=n(3606);t.exports={BitmapImage:i,Gif:r,GifCodec:o,GifFrame:a,GifUtil:c,GifError:s}},8839:(t,e,n)=>{var i=n(4634),r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(i(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||s&&e instanceof Blob||o&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return!0;return!1}},5884:t=>{"use strict";t.exports=(t,e=process.argv)=>{const n=t.startsWith("-")?"":1===t.length?"-":"--",i=e.indexOf(n+t),r=e.indexOf("--");return-1!==i&&(-1===r||i<r)}},7234:t=>{"use strict";const e=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),n=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),i=new Set([500,502,503,504]),r={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},s={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function o(t){const e=parseInt(t,10);return isFinite(e)?e:0}function a(t){const e={};if(!t)return e;const n=t.trim().split(/,/);for(const t of n){const[n,i]=t.split(/=/,2);e[n.trim()]=void 0===i||i.trim().replace(/^"|"$/g,"")}return e}function c(t){let e=[];for(const n in t){const i=t[n];e.push(!0===i?n:n+"="+i)}if(e.length)return e.join(", ")}t.exports=class{constructor(t,e,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:r,ignoreCargoCult:s,_fromObject:o}={}){if(o)this._fromObject(o);else{if(!e||!e.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(t),this._responseTime=this.now(),this._isShared=!1!==n,this._cacheHeuristic=void 0!==i?i:.1,this._immutableMinTtl=void 0!==r?r:864e5,this._status="status"in e?e.status:200,this._resHeaders=e.headers,this._rescc=a(e.headers["cache-control"]),this._method="method"in t?t.method:"GET",this._url=t.url,this._host=t.headers.host,this._noAuthorization=!t.headers.authorization,this._reqHeaders=e.headers.vary?t.headers:null,this._reqcc=a(t.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==e.headers["cache-control"]&&/no-cache/.test(e.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!n.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||e.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(t){if(!t||!t.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(t){this._assertRequestHasHeaders(t);const e=a(t.headers["cache-control"]);return!e["no-cache"]&&!/no-cache/.test(t.headers.pragma)&&(!(e["max-age"]&&this.age()>e["max-age"])&&(!(e["min-fresh"]&&this.timeToLive()<1e3*e["min-fresh"])&&(!(this.stale()&&(!e["max-stale"]||this._rescc["must-revalidate"]||!(!0===e["max-stale"]||e["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(t,!1))))}_requestMatches(t,e){return(!this._url||this._url===t.url)&&this._host===t.headers.host&&(!t.method||this._method===t.method||e&&"HEAD"===t.method)&&this._varyMatches(t)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(t){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const e=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const n of e)if(t.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(t){const e={};for(const n in t)r[n]||(e[n]=t[n]);if(t.connection){const n=t.connection.trim().split(/\s*,\s*/);for(const t of n)delete e[t]}if(e.warning){const t=e.warning.split(/,/).filter((t=>!/^\s*1[0-9][0-9]/.test(t)));t.length?e.warning=t.join(",").trim():delete e.warning}return e}responseHeaders(){const t=this._copyWithoutHopByHopHeaders(this._resHeaders),e=this.age();return e>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(t.warning=(t.warning?`${t.warning}, `:"")+'113 - "rfc7234 5.5.4"'),t.age=`${Math.round(e)}`,t.date=new Date(this.now()).toUTCString(),t}date(){const t=Date.parse(this._resHeaders.date);return isFinite(t)?t:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return o(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return o(this._rescc["s-maxage"])}if(this._rescc["max-age"])return o(this._rescc["max-age"]);const t=this._rescc.immutable?this._immutableMinTtl:0,e=this.date();if(this._resHeaders.expires){const n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<e?0:Math.max(t,(n-e)/1e3)}if(this._resHeaders["last-modified"]){const n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&e>n)return Math.max(t,(e-n)/1e3*this._cacheHeuristic)}return t}timeToLive(){const t=this.maxAge()-this.age(),e=t+o(this._rescc["stale-if-error"]),n=t+o(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,t,e,n)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+o(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+o(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(t){return new this(void 0,void 0,{_fromObject:t})}_fromObject(t){if(this._responseTime)throw Error("Reinitialized");if(!t||1!==t.v)throw Error("Invalid serialization");this._responseTime=t.t,this._isShared=t.sh,this._cacheHeuristic=t.ch,this._immutableMinTtl=void 0!==t.imm?t.imm:864e5,this._status=t.st,this._resHeaders=t.resh,this._rescc=t.rescc,this._method=t.m,this._url=t.u,this._host=t.h,this._noAuthorization=t.a,this._reqHeaders=t.reqh,this._reqcc=t.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(t){this._assertRequestHasHeaders(t);const e=this._copyWithoutHopByHopHeaders(t.headers);if(delete e["if-range"],!this._requestMatches(t,!0)||!this.storable())return delete e["if-none-match"],delete e["if-modified-since"],e;if(this._resHeaders.etag&&(e["if-none-match"]=e["if-none-match"]?`${e["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),e["accept-ranges"]||e["if-match"]||e["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete e["if-modified-since"],e["if-none-match"]){const t=e["if-none-match"].split(/,/).filter((t=>!/^\s*W\//.test(t)));t.length?e["if-none-match"]=t.join(",").trim():delete e["if-none-match"]}}else this._resHeaders["last-modified"]&&!e["if-modified-since"]&&(e["if-modified-since"]=this._resHeaders["last-modified"]);return e}revalidatedPolicy(t,e){if(this._assertRequestHasHeaders(t),this._useStaleIfError()&&function(t){return!t||i.has(t.status)}(e))return{modified:!1,matches:!1,policy:this};if(!e||!e.headers)throw Error("Response headers missing");let n=!1;if(void 0!==e.status&&304!=e.status?n=!1:e.headers.etag&&!/^\s*W\//.test(e.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===e.headers.etag:this._resHeaders.etag&&e.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===e.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===e.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||e.headers.etag||e.headers["last-modified"]||(n=!0),!n)return{policy:new this.constructor(t,e),modified:304!=e.status,matches:!1};const r={};for(const t in this._resHeaders)r[t]=t in e.headers&&!s[t]?e.headers[t]:this._resHeaders[t];const o=Object.assign({},e,{status:this._status,method:this._method,headers:r});return{policy:new this.constructor(t,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},7444:(t,e,n)=>{"use strict";const{URL:i}=n(7016),r=n(4434),s=n(4756),o=n(5675),a=n(7392),c=n(2822),l=Symbol("currentStreamCount"),h=Symbol("request"),u=Symbol("cachedOriginSet"),p=Symbol("gracefullyClosing"),d=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,g=(t,e)=>{for(let n=0;n<t.length;n++){const i=t[n];i[u].length>0&&i[u].length<e[u].length&&i[u].every((t=>e[u].includes(t)))&&i[l]+e[l]<=e.remoteSettings.maxConcurrentStreams&&y(i)}},_=(t,e)=>{for(let n=0;n<t.length;n++){const i=t[n];if(e[u].length>0&&e[u].length<i[u].length&&e[u].every((t=>i[u].includes(t)))&&e[l]+i[l]<=i.remoteSettings.maxConcurrentStreams)return y(e),!0}return!1},y=t=>{t[p]=!0,0===t[l]&&t.close()};class b extends r{constructor({timeout:t=0,maxSessions:e=Number.POSITIVE_INFINITY,maxEmptySessions:n=10,maxCachedTlsSessions:i=100}={}){super(),this.sessions={},this.queue={},this.timeout=t,this.maxSessions=e,this.maxEmptySessions=n,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:i})}get protocol(){return"https:"}normalizeOptions(t){let e="";for(let n=0;n<f.length;n++){const i=f[n];e+=":",t&&void 0!==t[i]&&(e+=t[i])}return e}_processQueue(){if(this._sessionCount>=this.maxSessions)this.closeEmptySessions(this.maxSessions-this._sessionCount+1);else for(const t in this.queue)for(const e in this.queue[t]){const n=this.queue[t][e];n.completed||(n.completed=!0,n())}}_isBetterSession(t,e){return t>e}_accept(t,e,n,i){let r=0;for(;r<e.length&&t[l]<t.remoteSettings.maxConcurrentStreams;)e[r].resolve(t),r++;e.splice(0,r),e.length>0&&(this.getSession(n,i,e),e.length=0)}getSession(t,e,n){return new Promise(((r,s)=>{Array.isArray(n)&&n.length>0?(n=[...n],r()):n=[{resolve:r,reject:s}];try{if("string"==typeof t)t=new i(t);else if(!(t instanceof i))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(e){const{servername:n}=e,{hostname:i}=t;if(n&&i!==n)throw new Error(`Origin ${i} differs from servername ${n}`)}}catch(t){for(let e=0;e<n.length;e++)n[e].reject(t);return}const a=this.normalizeOptions(e),c=t.origin;if(a in this.sessions){const t=this.sessions[a];let i,r=-1,s=-1;for(let e=0;e<t.length;e++){const n=t[e],o=n.remoteSettings.maxConcurrentStreams;if(o<r)break;if(!n[u].includes(c))continue;const a=n[l];a>=o||n[p]||n.destroyed||(i||(r=o),this._isBetterSession(a,s)&&(i=n,s=a))}if(i)return void this._accept(i,n,c,e)}if(a in this.queue){if(c in this.queue[a])return void this.queue[a][c].listeners.push(...n)}else this.queue[a]={[d]:0};const f=()=>{a in this.queue&&this.queue[a][c]===y&&(delete this.queue[a][c],0==--this.queue[a][d]&&delete this.queue[a])},y=async()=>{this._sessionCount++;const i=`${c}:${a}`;let r,s=!1;try{const b={...e};void 0===b.settings&&(b.settings=this.settings),void 0===b.session&&(b.session=this.tlsSessionCache.get(i));const v=b.createConnection||this.createConnection;r=await v.call(this,t,b),b.createConnection=()=>r;const w=o.connect(t,b);w[l]=0,w[p]=!1;const x=()=>{const{socket:t}=w;let e;return!1===t.servername?(t.servername=t.remoteAddress,e=w.originSet,t.servername=!1):e=w.originSet,e},E=()=>w[l]<w.remoteSettings.maxConcurrentStreams;w.socket.once("session",(t=>{this.tlsSessionCache.set(i,t)})),w.once("error",(t=>{for(let e=0;e<n.length;e++)n[e].reject(t);this.tlsSessionCache.delete(i)})),w.setTimeout(this.timeout,(()=>{w.destroy()})),w.once("close",(()=>{if(this._sessionCount--,s){this._emptySessionCount--;const t=this.sessions[a];1===t.length?delete this.sessions[a]:t.splice(t.indexOf(w),1)}else{f();const t=new Error("Session closed without receiving a SETTINGS frame");t.code="HTTP2WRAPPER_NOSETTINGS";for(let e=0;e<n.length;e++)n[e].reject(t)}this._processQueue()}));const S=()=>{const t=this.queue[a];if(!t)return;const e=w[u];for(let n=0;n<e.length;n++){const i=e[n];if(i in t){const{listeners:e,completed:n}=t[i];let r=0;for(;r<e.length&&E();)e[r].resolve(w),r++;if(t[i].listeners.splice(0,r),0===t[i].listeners.length&&!n&&(delete t[i],0==--t[d])){delete this.queue[a];break}if(!E())break}}};w.on("origin",(()=>{w[u]=x()||[],w[p]=!1,_(this.sessions[a],w),!w[p]&&E()&&(S(),E()&&g(this.sessions[a],w))})),w.once("remoteSettings",(()=>{if(y.destroyed){const t=new Error("Agent has been destroyed");for(let e=0;e<n.length;e++)n[e].reject(t);w.destroy()}else{if(w.setLocalWindowSize&&w.setLocalWindowSize(4194304),w[u]=x()||[],w.socket.encrypted){const t=w[u][0];if(t!==c){const e=new Error(`Requested origin ${c} does not match server ${t}`);for(let t=0;t<n.length;t++)n[t].reject(e);return void w.destroy()}}f();{const t=this.sessions;if(a in t){const e=t[a];e.splice(((t,e,n)=>{let i=0,r=t.length;for(;i<r;){const s=i+r>>>1;n(t[s],e)?i=s+1:r=s}return i})(e,w,m),0,w)}else t[a]=[w]}s=!0,this._emptySessionCount++,this.emit("session",w),this._accept(w,n,c,e),0===w[l]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),w.on("remoteSettings",(()=>{E()&&(S(),E()&&g(this.sessions[a],w))}))}})),w[h]=w.request,w.request=(t,e)=>{if(w[p])throw new Error("The session is gracefully closing. No new streams are allowed.");const n=w[h](t,e);return w.ref(),0==w[l]++&&this._emptySessionCount--,n.once("close",(()=>{0==--w[l]&&(this._emptySessionCount++,w.unref(),this._emptySessionCount>this.maxEmptySessions||w[p])?w.close():w.destroyed||w.closed||E()&&!_(this.sessions[a],w)&&(g(this.sessions[a],w),S(),0===w[l]&&this._processQueue())})),n}}catch(t){f(),this._sessionCount--;for(let e=0;e<n.length;e++)n[e].reject(t)}};y.listeners=n,y.completed=!1,y.destroyed=!1,this.queue[a][c]=y,this.queue[a][d]++,this._processQueue()}))}request(t,e,n,i){return new Promise(((r,s)=>{this.getSession(t,e,[{reject:s,resolve:t=>{try{const e=t.request(n,i);c(e),r(e)}catch(t){s(t)}}}])}))}async createConnection(t,e){return b.connect(t,e)}static connect(t,e){e.ALPNProtocols=["h2"];const n=t.port||443,i=t.hostname;void 0===e.servername&&(e.servername=i);const r=s.connect(n,i,e);return e.socket&&(r._peername={family:void 0,address:void 0,port:n}),r}closeEmptySessions(t=Number.POSITIVE_INFINITY){let e=0;const{sessions:n}=this;for(const i in n){const r=n[i];for(let n=0;n<r.length;n++){const i=r[n];if(0===i[l]&&(e++,i.close(),e>=t))return e}}return e}destroy(t){const{sessions:e,queue:n}=this;for(const n in e){const i=e[n];for(let e=0;e<i.length;e++)i[e].destroy(t)}for(const t in n){const e=n[t];for(const t in e)e[t].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}b.kCurrentStreamCount=l,b.kGracefullyClosing=p,t.exports={Agent:b,globalAgent:new b}},2094:(t,e,n)=>{"use strict";const{URL:i,urlToHttpOptions:r}=n(7016),s=n(8611),o=n(5692),a=n(1169),c=n(7392),{Agent:l,globalAgent:h}=n(7444),u=n(2734),p=n(491),d=n(2822),f=new c({maxSize:100}),m=(t,e=new Map,n=void 0)=>async i=>{const r=`${i.host}:${i.port}:${i.ALPNProtocols.sort()}`;if(!t.has(r)){if(e.has(r))return{alpnProtocol:(await e.get(r)).alpnProtocol};const{path:s}=i;i.path=i.socketPath;const o=a(i,n);e.set(r,o);try{const n=await o;return t.set(r,n.alpnProtocol),e.delete(r),i.path=s,n}catch(t){throw e.delete(r),i.path=s,t}}return{alpnProtocol:t.get(r)}},g=m(f,new Map);t.exports=async(t,e,n)=>{if(t="string"==typeof t?r(new i(t)):t instanceof i?r(t):{...t},"function"==typeof e||void 0===e?(n=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||0===e.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";const a="https:"===e.protocol;e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||p(e.headers&&e.headers.host||e.host),e.port=e.port||(a?443:80),e._defaultAgent=a?o.globalAgent:s.globalAgent;const c=e.resolveProtocol||g;let{agent:f}=e;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){e.resolveSocket=!0;let{socket:t,alpnProtocol:i,timeout:r}=await c(e);if(r){t&&t.destroy();const n=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw n.code="ETIMEDOUT",n.ms=e.timeout,n}t&&e.createConnection&&(t.destroy(),t=void 0),delete e.resolveSocket;const s="h2"===i;if(f&&(f=s?f.http2:f.https,e.agent=f),void 0===f&&(f=s?h:o.globalAgent),t)if(!1===f)t.destroy();else{const n=(s?l:o.Agent).prototype.createConnection;f.createConnection===n?s?e._reuseSocket=t:((t,e,n)=>{e._httpMessage={shouldKeepAlive:!0};const i=()=>{t.emit("free",e,n)};e.on("free",i);const r=()=>{t.removeSocket(e,n)};e.on("close",r);const s=()=>{const{freeSockets:n}=t;for(const t of Object.values(n))if(t.includes(e))return void e.destroy()};e.on("timeout",s);const o=()=>{t.removeSocket(e,n),e.off("close",r),e.off("free",i),e.off("timeout",s),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,n)})(f,t,e):t.destroy()}if(s)return d(new u(e,n))}else f&&(e.agent=f.http);return d(s.request(e,n))},t.exports.protocolCache=f,t.exports.resolveProtocol=g,t.exports.createResolveProtocol=m},2734:(t,e,n)=>{"use strict";const{URL:i,urlToHttpOptions:r}=n(7016),s=n(5675),{Writable:o}=n(2203),{Agent:a,globalAgent:c}=n(7444),l=n(7235),h=n(1125),{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_PROTOCOL:p,ERR_HTTP_HEADERS_SENT:d}=n(3876),f=n(5711),m=n(9879),g=n(5332),{HTTP2_HEADER_STATUS:_,HTTP2_HEADER_METHOD:y,HTTP2_HEADER_PATH:b,HTTP2_HEADER_AUTHORITY:v,HTTP2_METHOD_CONNECT:w}=s.constants,x=Symbol("headers"),E=Symbol("origin"),S=Symbol("session"),k=Symbol("options"),T=Symbol("flushedHeaders"),C=Symbol("jobs"),O=Symbol("pendingAgentPromise");t.exports=class extends o{constructor(t,e,n){if(super({autoDestroy:!1,emitClose:!1}),t="string"==typeof t?r(new i(t)):t instanceof i?r(t):{...t},"function"==typeof e||void 0===e?(n=e,e=t):e=Object.assign(t,e),e.h2session){if(this[S]=e.h2session,this[S].destroyed)throw new Error("The session has been closed already");this.protocol=this[S].socket.encrypted?"https:":"http:"}else if(!1===e.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===e.agent||null===e.agent)this.agent=c;else{if("function"!=typeof e.agent.request)throw new u("options.agent",["http2wrapper.Agent-like Object","undefined","false"],e.agent);this.agent=e.agent}if(this.agent&&(this.protocol=this.agent.protocol),e.protocol&&e.protocol!==this.protocol)throw new p(e.protocol,this.protocol);e.port||(e.port=e.defaultPort||this.agent&&this.agent.defaultPort||443),e.host=e.hostname||e.host||"localhost",delete e.hostname;const{timeout:s}=e;e.timeout=void 0,this[x]=Object.create(null),this[C]=[],this[O]=void 0,this.socket=null,this.connection=null,this.method=e.method||"GET",("CONNECT"!==this.method||"/"!==e.path&&void 0!==e.path)&&(this.path=e.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;const{headers:o}=e;if(o)for(const t in o)this.setHeader(t,o[t]);e.auth&&!("authorization"in this[x])&&(this[x].authorization="Basic "+Buffer.from(e.auth).toString("base64")),e.session=e.tlsSession,e.path=e.socketPath,this[k]=e,this[E]=new i(`${this.protocol}//${e.servername||e.host}:${e.port}`);const l=e._reuseSocket;l&&(e.createConnection=(...t)=>l.destroyed?this.agent.createConnection(...t):l,this.agent.getSession(this[E],this[k]).catch((()=>{}))),s&&this.setTimeout(s),n&&this.once("response",n),this[T]=!1}get method(){return this[x][y]}set method(t){t&&(this[x][y]=t.toUpperCase())}get path(){const t="CONNECT"===this.method?v:b;return this[x][t]}set path(t){if(t){const e="CONNECT"===this.method?v:b;this[x][e]=t}}get host(){return this[E].hostname}set host(t){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(t,e,n){if(this._mustNotHaveABody)return void n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const i=()=>this._request.write(t,e,n);this._request?i():this[C].push(i)}_final(t){this.flushHeaders();const e=()=>{this._mustNotHaveABody||"CONNECT"===this.method?t():this._request.end(t)};this._request?e():this[C].push(e)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick((()=>this.emit("abort"))),this.aborted=!0,this.destroy())}async _destroy(t,e){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick((()=>{this.emit("close")}));try{await this[O]}catch(e){this.aborted&&(t=e)}e(t)}async flushHeaders(){if(this[T]||this.destroyed)return;this[T]=!0;const t=this.method===w,e=e=>{if(this._request=e,this.destroyed)return void e.destroy();t||h(e,this,["timeout","continue"]),e.once("error",(t=>{this.destroy(t)})),e.once("aborted",(()=>{const{res:t}=this;t?(t.aborted=!0,t.emit("aborted"),t.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))}));const n=(n,i,r)=>{const s=new l(this.socket,e.readableHighWaterMark);this.res=s,s.url=`${this[E].origin}${this.path}`,s.req=this,s.statusCode=n[_],s.headers=n,s.rawHeaders=r,s.once("end",(()=>{s.complete=!0,s.socket=null,s.connection=null})),t?(s.upgrade=!0,this.emit("connect",s,e,Buffer.alloc(0))?this.emit("close"):e.destroy()):(e.on("data",(t=>{s._dumped||s.push(t)||e.pause()})),e.once("end",(()=>{this.aborted||s.push(null)})),this.emit("response",s)||s._dump())};e.once("response",n),e.once("headers",(t=>this.emit("information",{statusCode:t[_]}))),e.once("trailers",((t,e,i)=>{const{res:r}=this;null!==r?(r.trailers=t,r.rawTrailers=i):n(t,0,i)})),e.once("close",(()=>{const{aborted:t,res:e}=this;if(e){t&&(e.aborted=!0,e.emit("aborted"),e.destroy());const n=()=>{e.emit("close"),this.destroy(),this.emit("close")};e.readable?e.once("end",n):n()}else{if(!this.destroyed)return this.destroy(new Error("The HTTP/2 stream has been early terminated")),void this.emit("close");this.destroy(),this.emit("close")}})),this.socket=new Proxy(e,g);for(const t of this[C])t();this[C].length=0,this.emit("socket",this.socket)};if(v in this[x]||t||(this[x][v]=this[E].host),this[S])try{e(this[S].request(this[x]))}catch(t){this.destroy(t)}else{this.reusedSocket=!0;try{const t=this.agent.request(this[E],this[k],this[x]);this[O]=t,e(await t),this[O]=!1}catch(t){this[O]=!1,this.destroy(t)}}}get connection(){return this.socket}set connection(t){this.socket=t}getHeaderNames(){return Object.keys(this[x])}hasHeader(t){if("string"!=typeof t)throw new u("name","string",t);return Boolean(this[x][t.toLowerCase()])}getHeader(t){if("string"!=typeof t)throw new u("name","string",t);return this[x][t.toLowerCase()]}get headersSent(){return this[T]}removeHeader(t){if("string"!=typeof t)throw new u("name","string",t);if(this.headersSent)throw new d("remove");delete this[x][t.toLowerCase()]}setHeader(t,e){if(this.headersSent)throw new d("set");f(t),m(t,e);const n=t.toLowerCase();if("connection"===n){if("keep-alive"===e.toLowerCase())return;throw new Error(`Invalid 'connection' header: ${e}`)}"host"===n&&"CONNECT"===this.method?this[x][v]=e:this[x][n]=e}setNoDelay(){}setSocketKeepAlive(){}setTimeout(t,e){const n=()=>this._request.setTimeout(t,e);return this._request?n():this[C].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(t){}}},7235:(t,e,n)=>{"use strict";const{Readable:i}=n(2203);t.exports=class extends i{constructor(t,e){super({emitClose:!1,autoDestroy:!0,highWaterMark:e}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=t,this._dumped=!1}get connection(){return this.socket}set connection(t){this.socket=t}_destroy(t,e){this.readableEnded||(this.aborted=!0),e(),this.req._request.destroy(t)}setTimeout(t,e){return this.req.setTimeout(t,e),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},5769:(t,e,n)=>{"use strict";const i=n(5675),{Agent:r,globalAgent:s}=n(7444),o=n(2734),a=n(7235),c=n(2094),{HttpOverHttp2:l,HttpsOverHttp2:h}=n(201),u=n(312),{Http2OverHttp:p,Http2OverHttps:d}=n(449),f=n(5711),m=n(9879);t.exports={...i,ClientRequest:o,IncomingMessage:a,Agent:r,globalAgent:s,request:(t,e,n)=>new o(t,e,n),get:(t,e,n)=>{const i=new o(t,e,n);return i.end(),i},auto:c,proxies:{HttpOverHttp2:l,HttpsOverHttp2:h,Http2OverHttp2:u,Http2OverHttp:p,Http2OverHttps:d},validateHeaderName:f,validateHeaderValue:m}},9350:t=>{"use strict";t.exports=t=>{const{username:e,password:n}=t.proxyOptions.url;if(e||n){const t=`${e}:${n}`,i=`Basic ${Buffer.from(t).toString("base64")}`;return{"proxy-authorization":i,authorization:i}}return{}}},201:(t,e,n)=>{"use strict";const i=n(4756),r=n(8611),s=n(5692),o=n(6559),{globalAgent:a}=n(7444),c=n(3305),l=n(4394),h=n(9350),u=(t,e,n)=>{(async()=>{try{const{proxyOptions:r}=t,{url:l,headers:u,raw:p}=r,d=await a.request(l,r,{...h(t),...u,":method":"CONNECT",":authority":`${e.host}:${e.port}`});d.once("error",n),d.once("response",(r=>{const a=r[":status"];if(200!==a)return void n(new c(a,""));const l=t instanceof s.Agent;if(p&&l){e.socket=d;const t=i.connect(e);return t.once("close",(()=>{d.destroy()})),void n(null,t)}const h=new o(d);h.encrypted=!1,h._handle.getpeername=t=>{t.family=void 0,t.address=void 0,t.port=void 0},n(null,h)}))}catch(t){n(t)}})()};class p extends r.Agent{constructor(t){super(t),l(this,t.proxyOptions)}createConnection(t,e){u(this,t,e)}}class d extends s.Agent{constructor(t){super(t),l(this,t.proxyOptions)}createConnection(t,e){u(this,t,e)}}t.exports={HttpOverHttp2:p,HttpsOverHttp2:d}},449:(t,e,n)=>{"use strict";const i=n(8611),r=n(5692),s=n(6538),o=n(9350);class a extends s{async _getProxyStream(t){const{proxyOptions:e}=this,{url:n,headers:s}=this.proxyOptions;return a=("https:"===n.protocol?r:i).request({...e,hostname:n.hostname,port:n.port,path:t,headers:{...o(this),...s,host:t},method:"CONNECT"}).end(),new Promise(((t,e)=>{a.once("error",e),a.once("connect",((n,i,r)=>{i.unshift(r),a.off("error",e),t([i,n.statusCode,n.statusMessage])}))}));var a}}t.exports={Http2OverHttp:a,Http2OverHttps:a}},312:(t,e,n)=>{"use strict";const{globalAgent:i}=n(7444),r=n(6538),s=n(9350);t.exports=class extends r{async _getProxyStream(t){const{proxyOptions:e}=this,n={...s(this),...e.headers,":method":"CONNECT",":authority":t},r=await i.request(e.url,e,n),o=await(t=>new Promise(((e,n)=>{t.once("error",n),t.once("response",(i=>{t.off("error",n),e(i[":status"])}))})))(r);return[r,o,""]}}},6538:(t,e,n)=>{"use strict";const{Agent:i}=n(7444),r=n(6559),s=n(3305),o=n(4394);t.exports=class extends i{constructor(t){super(t),o(this,t.proxyOptions)}async createConnection(t,e){const n=`${t.hostname}:${t.port||443}`,[i,o,a]=await this._getProxyStream(n);if(200!==o)throw new s(o,a);if(!this.proxyOptions.raw){const t=new r(i);return t.encrypted=!1,t._handle.getpeername=t=>{t.family=void 0,t.address=void 0,t.port=void 0},t}return e.socket=i,super.createConnection(t,e)}}},4394:(t,e,n)=>{"use strict";const{URL:i}=n(7016),r=n(9420);t.exports=(t,e)=>{r("proxyOptions",e,["object"]),r("proxyOptions.headers",e.headers,["object","undefined"]),r("proxyOptions.raw",e.raw,["boolean","undefined"]),r("proxyOptions.url",e.url,[i,"string"]);const n=new i(e.url);t.proxyOptions={raw:!0,...e,headers:{...e.headers},url:n}}},3305:t=>{"use strict";class e extends Error{constructor(t,e=""){super(`The proxy server rejected the request with status code ${t} (${e||"empty status message"})`),this.statusCode=t,this.statusMessage=e}}t.exports=e},491:(t,e,n)=>{"use strict";const{isIP:i}=n(9278),r=n(2613);t.exports=t=>{const e=(t=>{if("["===t[0]){const e=t.indexOf("]");return r(-1!==e),t.slice(1,e)}const e=t.indexOf(":");return-1===e?t:t.slice(0,e)})(t);return i(e)?"":e}},9420:t=>{"use strict";t.exports=(t,e,n)=>{if(!n.some((t=>"string"==typeof t?typeof e===t:e instanceof t))){const i=n.map((t=>"string"==typeof t?t:t.name));throw new TypeError(`Expected '${t}' to be a type of ${i.join(" or ")}, got ${typeof e}`)}}},2822:t=>{"use strict";t.exports=t=>{if(0!==t.listenerCount("error"))return t;t.__destroy=t._destroy,t._destroy=(...e)=>{const n=e.pop();t.__destroy(...e,(async t=>{await Promise.resolve(),n(t)}))};const e=e=>{Promise.resolve().then((()=>{t.emit("error",e)}))};return t.once("error",e),Promise.resolve().then((()=>{t.off("error",e)})),t}},3876:t=>{"use strict";const e=(e,n,i)=>{t.exports[n]=class extends e{constructor(...t){super("string"==typeof i?i:i(t)),this.name=`${super.name} [${n}]`,this.code=n}}};e(TypeError,"ERR_INVALID_ARG_TYPE",(t=>{const e=t[0].includes(".")?"property":"argument";let n=t[1];const i=Array.isArray(n);return i&&(n=`${n.slice(0,-1).join(", ")} or ${n.slice(-1)}`),`The "${t[0]}" ${e} must be ${i?"one of":"of"} type ${n}. Received ${typeof t[2]}`})),e(TypeError,"ERR_INVALID_PROTOCOL",(t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`)),e(Error,"ERR_HTTP_HEADERS_SENT",(t=>`Cannot ${t[0]} headers after they are sent to the client`)),e(TypeError,"ERR_INVALID_HTTP_TOKEN",(t=>`${t[0]} must be a valid HTTP token [${t[1]}]`)),e(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(t=>`Invalid value "${t[0]} for header "${t[1]}"`)),e(TypeError,"ERR_INVALID_CHAR",(t=>`Invalid character in ${t[0]} [${t[1]}]`)),e(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},3610:t=>{"use strict";t.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},6559:(t,e,n)=>{"use strict";const i=n(2203),r=new(n(4756).TLSSocket)(new i.PassThrough)._handle._parentWrap.constructor;t.exports=r},1125:t=>{"use strict";t.exports=(t,e,n)=>{for(const i of n)t.on(i,((...t)=>e.emit(i,...t)))}},5332:(t,e,n)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:i}=n(3876),r={has(t,e){const n=void 0===t.session?t:t.session.socket;return e in t||e in n},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return!t.destroyed&&t.readable;case"setTimeout":{const{session:e}=t;return void 0!==e?e.setTimeout.bind(e):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new i;default:{const n=void 0===t.session?t:t.session.socket,i=n[e];return"function"==typeof i?i.bind(n):i}}},getPrototypeOf:t=>void 0!==t.session?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t),set(t,e,n){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=n,!0;case"setTimeout":{const{session:e}=t;return void 0===e?t.setTimeout=n:e.setTimeout=n,!0}case"write":case"read":case"pause":case"resume":throw new i;default:return(void 0===t.session?t:t.session.socket)[e]=n,!0}}};t.exports=r},5711:(t,e,n)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:i}=n(3876),r=n(3610),s=/^[\^`\-\w!#$%&*+.|~]+$/;t.exports=t=>{if("string"!=typeof t||!s.test(t)&&!r(t))throw new i("Header name",t)}},9879:(t,e,n)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:i,ERR_INVALID_CHAR:r}=n(3876),s=/[^\t\u0020-\u007E\u0080-\u00FF]/;t.exports=(t,e)=>{if(void 0===e)throw new i(e,t);if(s.test(e))throw new r("header content",t)}},6329:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(n(9278)),o=r(n(4756)),a=r(n(7016)),c=r(n(2613)),l=r(n(5753)),h=n(9724),u=r(n(3868)),p=l.default("https-proxy-agent:agent");class d extends h.Agent{constructor(t){let e;if(e="string"==typeof t?a.default.parse(t):t,!e)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("creating new HttpsProxyAgent instance: %o",e),super(e);const n=Object.assign({},e);var i;this.secureProxy=e.secureProxy||"string"==typeof(i=n.protocol)&&/^https:?$/i.test(i),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(t,e){return i(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:i}=this;let r;i?(p("Creating `tls.Socket`: %o",n),r=o.default.connect(n)):(p("Creating `net.Socket`: %o",n),r=s.default.connect(n));const a=Object.assign({},n.headers);let l=`CONNECT ${e.host}:${e.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:h,port:d,secureEndpoint:m}=e;(function(t,e){return Boolean(!e&&80===t||e&&443===t)})(d,m)||(h+=`:${d}`),a.Host=h,a.Connection="close";for(const t of Object.keys(a))l+=`${t}: ${a[t]}\r\n`;const g=u.default(r);r.write(`${l}\r\n`);const{statusCode:_,buffered:y}=yield g;if(200===_){if(t.once("socket",f),e.secureEndpoint){p("Upgrading socket connection to TLS");const t=e.servername||e.host;return o.default.connect(Object.assign(Object.assign({},function(t,...e){const n={};let i;for(i in t)e.includes(i)||(n[i]=t[i]);return n}(e,"host","hostname","path","port")),{socket:r,servername:t}))}return r}r.destroy();const b=new s.default.Socket({writable:!1});return b.readable=!0,t.once("socket",(t=>{p("replaying proxy buffer for failed request"),c.default(t.listenerCount("data")>0),t.push(y),t.push(null)})),b}))}}function f(t){t.resume()}e.default=d},2288:function(t,e,n){"use strict";const i=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(n(6329));function r(t){return new i.default(t)}!function(t){t.HttpsProxyAgent=i.default,t.prototype=i.default.prototype}(r||(r={})),t.exports=r},3868:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(5753)).default("https-proxy-agent:parse-proxy-response");e.default=function(t){return new Promise(((e,n)=>{let i=0;const s=[];function o(){const n=t.read();n?function(t){s.push(t),i+=t.length;const n=Buffer.concat(s,i);if(-1===n.indexOf("\r\n\r\n"))return r("have not received end of HTTP headers yet..."),void o();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];r("got proxy server response: %o",a),e({statusCode:c,buffered:n})}(n):t.once("readable",o)}function a(t){r("onclose had error %o",t)}function c(){r("onend")}t.on("error",(function e(i){t.removeListener("end",c),t.removeListener("error",e),t.removeListener("close",a),t.removeListener("readable",o),r("onerror %o",i),n(i)})),t.on("close",a),t.on("end",c),o()}))}},6938:t=>{var e=[].indexOf;t.exports=function(t,n){if(e)return t.indexOf(n);for(var i=0;i<t.length;++i)if(t[i]===n)return i;return-1}},4634:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},9001:(t,e,n)=>{"use strict";var i=n(4994);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(1688)),s=i(n(8070)),o=i(n(5385)),a=(0,r.default)({types:[s.default],plugins:[o.default]});e.default=a},5609:(t,e,n)=>{var i=n(2521),r=n(3877);t.exports={encode:i,decode:r}},3877:t=>{var e=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,n=799,i=3406,r=2276,s=1567,o=3784,a=5793,c=2896;function l(){}function h(t,e){for(var n,i,r=0,s=[],o=16;o>0&&!t[o-1];)o--;s.push({children:[],index:0});var a,c=s[0];for(n=0;n<o;n++){for(i=0;i<t[n];i++){for((c=s.pop()).children[c.index]=e[r];c.index>0;){if(0===s.length)throw new Error("Could not recreate Huffman Table");c=s.pop()}for(c.index++,s.push(c);s.length<=n;)s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a;r++}n+1<o&&(s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a)}return s[0].children}function u(e,n,i,r,s,o,a,c,l,h){i.precision,i.samplesPerLine,i.scanLines;var u=i.mcusPerLine,p=i.progressive,d=(i.maxH,i.maxV,n),f=0,m=0;function g(){if(m>0)return m--,f>>m&1;if(255==(f=e[n++])){var t=e[n++];if(t)throw new Error("unexpected marker: "+(f<<8|t).toString(16))}return m=7,f>>>7}function _(t){for(var e,n=t;null!==(e=g());){if("number"==typeof(n=n[e]))return n;if("object"!=typeof n)throw new Error("invalid huffman sequence")}return null}function y(t){for(var e=0;t>0;){var n=g();if(null===n)return;e=e<<1|n,t--}return e}function b(t){var e=y(t);return e>=1<<t-1?e:e+(-1<<t)+1}var v,w=0,x=0;function E(t,e,n,i,r){var s=n%u,o=(n/u|0)*t.v+i,a=s*t.h+r;void 0===t.blocks[o]&&h.tolerantDecoding||e(t,t.blocks[o][a])}function S(t,e,n){var i=n/t.blocksPerLine|0,r=n%t.blocksPerLine;void 0===t.blocks[i]&&h.tolerantDecoding||e(t,t.blocks[i][r])}var k,T,C,O,I,A,P=r.length;A=p?0===o?0===c?function(t,e){var n=_(t.huffmanTableDC),i=0===n?0:b(n)<<l;e[0]=t.pred+=i}:function(t,e){e[0]|=g()<<l}:0===c?function(e,n){if(w>0)w--;else for(var i=o,r=a;i<=r;){var s=_(e.huffmanTableAC),c=15&s,h=s>>4;if(0!==c)n[t[i+=h]]=b(c)*(1<<l),i++;else{if(h<15){w=y(h)+(1<<h)-1;break}i+=16}}}:function(e,n){for(var i=o,r=a,s=0;i<=r;){var c=t[i],h=n[c]<0?-1:1;switch(x){case 0:var u=_(e.huffmanTableAC),p=15&u;if(s=u>>4,0===p)s<15?(w=y(s)+(1<<s),x=4):(s=16,x=1);else{if(1!==p)throw new Error("invalid ACn encoding");v=b(p),x=s?2:3}continue;case 1:case 2:n[c]?n[c]+=(g()<<l)*h:0==--s&&(x=2==x?3:0);break;case 3:n[c]?n[c]+=(g()<<l)*h:(n[c]=v<<l,x=0);break;case 4:n[c]&&(n[c]+=(g()<<l)*h)}i++}4===x&&0==--w&&(x=0)}:function(e,n){var i=_(e.huffmanTableDC),r=0===i?0:b(i);n[0]=e.pred+=r;for(var s=1;s<64;){var o=_(e.huffmanTableAC),a=15&o,c=o>>4;if(0!==a)n[t[s+=c]]=b(a),s++;else{if(c<15)break;s+=16}}};var N,M,D,R,B=0;for(M=1==P?r[0].blocksPerLine*r[0].blocksPerColumn:u*i.mcusPerColumn,s||(s=M);B<M;){for(T=0;T<P;T++)r[T].pred=0;if(w=0,1==P)for(k=r[0],I=0;I<s;I++)S(k,A,B),B++;else for(I=0;I<s;I++){for(T=0;T<P;T++)for(D=(k=r[T]).h,R=k.v,C=0;C<R;C++)for(O=0;O<D;O++)E(k,A,B,C,O);if(++B===M)break}if(B===M)do{if(255===e[n]&&0!==e[n+1])break;n+=1}while(n<e.length-2);if(m=0,(N=e[n]<<8|e[n+1])<65280)throw new Error("marker was not found");if(!(N>=65488&&N<=65495))break;n+=2}return n-d}function p(t,l){var h,u,p=[],d=l.blocksPerLine,f=l.blocksPerColumn,m=d<<3,_=new Int32Array(64),y=new Uint8Array(64);function b(t,h,u){var p,d,f,m,g,_,y,b,v,w,x=l.quantizationTable,E=u;for(w=0;w<64;w++)E[w]=t[w]*x[w];for(w=0;w<8;++w){var S=8*w;0!=E[1+S]||0!=E[2+S]||0!=E[3+S]||0!=E[4+S]||0!=E[5+S]||0!=E[6+S]||0!=E[7+S]?(p=a*E[0+S]+128>>8,d=a*E[4+S]+128>>8,f=E[2+S],m=E[6+S],g=c*(E[1+S]-E[7+S])+128>>8,b=c*(E[1+S]+E[7+S])+128>>8,_=E[3+S]<<4,y=E[5+S]<<4,v=p-d+1>>1,p=p+d+1>>1,d=v,v=f*o+m*s+128>>8,f=f*s-m*o+128>>8,m=v,v=g-y+1>>1,g=g+y+1>>1,y=v,v=b+_+1>>1,_=b-_+1>>1,b=v,v=p-m+1>>1,p=p+m+1>>1,m=v,v=d-f+1>>1,d=d+f+1>>1,f=v,v=g*r+b*i+2048>>12,g=g*i-b*r+2048>>12,b=v,v=_*n+y*e+2048>>12,_=_*e-y*n+2048>>12,y=v,E[0+S]=p+b,E[7+S]=p-b,E[1+S]=d+y,E[6+S]=d-y,E[2+S]=f+_,E[5+S]=f-_,E[3+S]=m+g,E[4+S]=m-g):(v=a*E[0+S]+512>>10,E[0+S]=v,E[1+S]=v,E[2+S]=v,E[3+S]=v,E[4+S]=v,E[5+S]=v,E[6+S]=v,E[7+S]=v)}for(w=0;w<8;++w){var k=w;0!=E[8+k]||0!=E[16+k]||0!=E[24+k]||0!=E[32+k]||0!=E[40+k]||0!=E[48+k]||0!=E[56+k]?(p=a*E[0+k]+2048>>12,d=a*E[32+k]+2048>>12,f=E[16+k],m=E[48+k],g=c*(E[8+k]-E[56+k])+2048>>12,b=c*(E[8+k]+E[56+k])+2048>>12,_=E[24+k],y=E[40+k],v=p-d+1>>1,p=p+d+1>>1,d=v,v=f*o+m*s+2048>>12,f=f*s-m*o+2048>>12,m=v,v=g-y+1>>1,g=g+y+1>>1,y=v,v=b+_+1>>1,_=b-_+1>>1,b=v,v=p-m+1>>1,p=p+m+1>>1,m=v,v=d-f+1>>1,d=d+f+1>>1,f=v,v=g*r+b*i+2048>>12,g=g*i-b*r+2048>>12,b=v,v=_*n+y*e+2048>>12,_=_*e-y*n+2048>>12,y=v,E[0+k]=p+b,E[56+k]=p-b,E[8+k]=d+y,E[48+k]=d-y,E[16+k]=f+_,E[40+k]=f-_,E[24+k]=m+g,E[32+k]=m-g):(v=a*u[w+0]+8192>>14,E[0+k]=v,E[8+k]=v,E[16+k]=v,E[24+k]=v,E[32+k]=v,E[40+k]=v,E[48+k]=v,E[56+k]=v)}for(w=0;w<64;++w){var T=128+(E[w]+8>>4);h[w]=T<0?0:T>255?255:T}}g(m*f*8);for(var v=0;v<f;v++){var w=v<<3;for(h=0;h<8;h++)p.push(new Uint8Array(m));for(var x=0;x<d;x++){b(l.blocks[v][x],y,_);var E=0,S=x<<3;for(u=0;u<8;u++){var k=p[w+u];for(h=0;h<8;h++)k[S+h]=y[E++]}}}return p}function d(t){return t<0?0:t>255?255:t}l.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(e){var n=1e3*this.opts.maxResolutionInMP*1e3,i=0;function r(){var t=e[i]<<8|e[i+1];return i+=2,t}function s(t){var e,n,i=1,r=1;for(n in t.components)t.components.hasOwnProperty(n)&&(i<(e=t.components[n]).h&&(i=e.h),r<e.v&&(r=e.v));var s=Math.ceil(t.samplesPerLine/8/i),o=Math.ceil(t.scanLines/8/r);for(n in t.components)if(t.components.hasOwnProperty(n)){e=t.components[n];var a=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/i),c=Math.ceil(Math.ceil(t.scanLines/8)*e.v/r),l=s*e.h,h=o*e.v,u=[];g(h*l*256);for(var p=0;p<h;p++){for(var d=[],f=0;f<l;f++)d.push(new Int32Array(64));u.push(d)}e.blocksPerLine=a,e.blocksPerColumn=c,e.blocks=u}t.maxH=i,t.maxV=r,t.mcusPerLine=s,t.mcusPerColumn=o}e.length;var o,a,c,l,d=null,f=null,m=[],_=[],y=[],b=[],v=r(),w=-1;if(this.comments=[],65496!=v)throw new Error("SOI not found");for(v=r();65497!=v;){switch(v){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var x=(c=void 0,l=void 0,c=r(),l=e.subarray(i,i+c-2),i+=l.length,l);if(65534===v){var E=String.fromCharCode.apply(null,x);this.comments.push(E)}65504===v&&74===x[0]&&70===x[1]&&73===x[2]&&70===x[3]&&0===x[4]&&(d={version:{major:x[5],minor:x[6]},densityUnits:x[7],xDensity:x[8]<<8|x[9],yDensity:x[10]<<8|x[11],thumbWidth:x[12],thumbHeight:x[13],thumbData:x.subarray(14,14+3*x[12]*x[13])}),65505===v&&69===x[0]&&120===x[1]&&105===x[2]&&102===x[3]&&0===x[4]&&(this.exifBuffer=x.subarray(5,x.length)),65518===v&&65===x[0]&&100===x[1]&&111===x[2]&&98===x[3]&&101===x[4]&&0===x[5]&&(f={version:x[6],flags0:x[7]<<8|x[8],flags1:x[9]<<8|x[10],transformCode:x[11]});break;case 65499:for(var S=r()+i-2;i<S;){var k=e[i++];g(256);var T=new Int32Array(64);if(k>>4){if(k>>4!=1)throw new Error("DQT: invalid table spec");for(V=0;V<64;V++)T[t[V]]=r()}else for(V=0;V<64;V++)T[t[V]]=e[i++];m[15&k]=T}break;case 65472:case 65473:case 65474:r(),(o={}).extended=65473===v,o.progressive=65474===v,o.precision=e[i++],o.scanLines=r(),o.samplesPerLine=r(),o.components={},o.componentsOrder=[];var C=o.scanLines*o.samplesPerLine;if(C>n){var O=Math.ceil((C-n)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${O}MP`)}var I,A=e[i++];for(Y=0;Y<A;Y++){I=e[i];var P=e[i+1]>>4,N=15&e[i+1],M=e[i+2];if(P<=0||N<=0)throw new Error("Invalid sampling factor, expected values above 0");o.componentsOrder.push(I),o.components[I]={h:P,v:N,quantizationIdx:M},i+=3}s(o),_.push(o);break;case 65476:var D=r();for(Y=2;Y<D;){var R=e[i++],B=new Uint8Array(16),F=0;for(V=0;V<16;V++,i++)F+=B[V]=e[i];g(16+F);var L=new Uint8Array(F);for(V=0;V<F;V++,i++)L[V]=e[i];Y+=17+F,(R>>4?y:b)[15&R]=h(B,L)}break;case 65501:r(),a=r();break;case 65500:r(),r();break;case 65498:r();var U=e[i++],j=[];for(Y=0;Y<U;Y++){J=o.components[e[i++]];var z=e[i++];J.huffmanTableDC=b[z>>4],J.huffmanTableAC=y[15&z],j.push(J)}var G=e[i++],q=e[i++],H=e[i++],$=u(e,i,o,j,a,G,q,H>>4,15&H,this.opts);i+=$;break;case 65535:255!==e[i]&&i--;break;default:if(255==e[i-3]&&e[i-2]>=192&&e[i-2]<=254){i-=3;break}if(224===v||225==v){if(-1!==w)throw new Error(`first unknown JPEG marker at offset ${w.toString(16)}, second unknown JPEG marker ${v.toString(16)} at offset ${(i-1).toString(16)}`);w=i-1;const t=r();if(255===e[i+t-2]){i+=t-2;break}}throw new Error("unknown JPEG marker "+v.toString(16))}v=r()}if(1!=_.length)throw new Error("only single frame JPEGs supported");for(var Y=0;Y<_.length;Y++){var W=_[Y].components;for(var V in W)W[V].quantizationTable=m[W[V].quantizationIdx],delete W[V].quantizationIdx}for(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=d,this.adobe=f,this.components=[],Y=0;Y<o.componentsOrder.length;Y++){var J=o.components[o.componentsOrder[Y]];this.components.push({lines:p(0,J),scaleX:J.h/o.maxH,scaleY:J.v/o.maxV})}},getData:function(t,e){var n,i,r,s,o,a,c,l,h,u,p,f,m,_,y,b,v,w,x,E,S,k=this.width/t,T=this.height/e,C=0,O=t*e*this.components.length;g(O);var I=new Uint8Array(O);switch(this.components.length){case 1:for(n=this.components[0],u=0;u<e;u++)for(o=n.lines[0|u*n.scaleY*T],h=0;h<t;h++)p=o[0|h*n.scaleX*k],I[C++]=p;break;case 2:for(n=this.components[0],i=this.components[1],u=0;u<e;u++)for(o=n.lines[0|u*n.scaleY*T],a=i.lines[0|u*i.scaleY*T],h=0;h<t;h++)p=o[0|h*n.scaleX*k],I[C++]=p,p=a[0|h*i.scaleX*k],I[C++]=p;break;case 3:for(S=!0,this.adobe&&this.adobe.transformCode?S=!0:void 0!==this.opts.colorTransform&&(S=!!this.opts.colorTransform),n=this.components[0],i=this.components[1],r=this.components[2],u=0;u<e;u++)for(o=n.lines[0|u*n.scaleY*T],a=i.lines[0|u*i.scaleY*T],c=r.lines[0|u*r.scaleY*T],h=0;h<t;h++)S?(p=o[0|h*n.scaleX*k],f=a[0|h*i.scaleX*k],w=d(p+1.402*((m=c[0|h*r.scaleX*k])-128)),x=d(p-.3441363*(f-128)-.71413636*(m-128)),E=d(p+1.772*(f-128))):(w=o[0|h*n.scaleX*k],x=a[0|h*i.scaleX*k],E=c[0|h*r.scaleX*k]),I[C++]=w,I[C++]=x,I[C++]=E;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(S=!1,this.adobe&&this.adobe.transformCode?S=!0:void 0!==this.opts.colorTransform&&(S=!!this.opts.colorTransform),n=this.components[0],i=this.components[1],r=this.components[2],s=this.components[3],u=0;u<e;u++)for(o=n.lines[0|u*n.scaleY*T],a=i.lines[0|u*i.scaleY*T],c=r.lines[0|u*r.scaleY*T],l=s.lines[0|u*s.scaleY*T],h=0;h<t;h++)S?(p=o[0|h*n.scaleX*k],f=a[0|h*i.scaleX*k],m=c[0|h*r.scaleX*k],_=l[0|h*s.scaleX*k],y=255-d(p+1.402*(m-128)),b=255-d(p-.3441363*(f-128)-.71413636*(m-128)),v=255-d(p+1.772*(f-128))):(y=o[0|h*n.scaleX*k],b=a[0|h*i.scaleX*k],v=c[0|h*r.scaleX*k],_=l[0|h*s.scaleX*k]),I[C++]=255-y,I[C++]=255-b,I[C++]=255-v,I[C++]=255-_;break;default:throw new Error("Unsupported color mode")}return I},copyToImageData:function(t,e){var n,i,r,s,o,a,c,l,h,u=t.width,p=t.height,f=t.data,m=this.getData(u,p),g=0,_=0;switch(this.components.length){case 1:for(i=0;i<p;i++)for(n=0;n<u;n++)r=m[g++],f[_++]=r,f[_++]=r,f[_++]=r,e&&(f[_++]=255);break;case 3:for(i=0;i<p;i++)for(n=0;n<u;n++)c=m[g++],l=m[g++],h=m[g++],f[_++]=c,f[_++]=l,f[_++]=h,e&&(f[_++]=255);break;case 4:for(i=0;i<p;i++)for(n=0;n<u;n++)o=m[g++],a=m[g++],r=m[g++],c=255-d(o*(1-(s=m[g++])/255)+s),l=255-d(a*(1-s/255)+s),h=255-d(r*(1-s/255)+s),f[_++]=c,f[_++]=l,f[_++]=h,e&&(f[_++]=255);break;default:throw new Error("Unsupported color mode")}}};var f=0,m=0;function g(t=0){var e=f+t;if(e>m){var n=Math.ceil((e-m)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${n}MB`)}f=e}return l.resetMaxMemoryUsage=function(t){f=0,m=t},l.getBytesAllocated=function(){return f},l.requestMemoryAllocation=g,l}();t.exports=function(t,n={}){var i={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...n},r=new Uint8Array(t),s=new e;s.opts=i,e.resetMaxMemoryUsage(1024*i.maxMemoryUsageInMB*1024),s.parse(r);var o=i.formatAsRGBA?4:3,a=s.width*s.height*o;try{e.requestMemoryAllocation(a);var c={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:i.useTArray?new Uint8Array(a):Buffer.alloc(a)};s.comments.length>0&&(c.comments=s.comments)}catch(t){if(t instanceof RangeError)throw new Error("Could not allocate enough memory for the image. Required: "+a);if(t instanceof ReferenceError&&"Buffer is not defined"===t.message)throw new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true");throw t}return s.copyToImageData(c,i.formatAsRGBA),c}},2521:t=>{function e(t){Math.round;var e,n,i,r,s,o=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),h=new Array(64),u=new Array(65535),p=new Array(65535),d=new Array(64),f=new Array(64),m=[],g=0,_=7,y=new Array(64),b=new Array(64),v=new Array(64),w=new Array(256),x=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function N(t,e){for(var n=0,i=0,r=new Array,s=1;s<=16;s++){for(var o=1;o<=t[s];o++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=s,i++,n++;n*=2}return r}function M(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(g|=1<<_),n--,--_<0&&(255==g?(D(255),D(0)):D(g),_=7,g=0)}function D(t){m.push(t)}function R(t){D(t>>8&255),D(255&t)}function B(t,e,n,i,r){for(var s,o=r[0],a=r[240],c=function(t,e){var n,i,r,s,o,a,c,l,h,u,p=0;for(h=0;h<8;++h){n=t[p],i=t[p+1],r=t[p+2],s=t[p+3],o=t[p+4],a=t[p+5],c=t[p+6];var f=n+(l=t[p+7]),m=n-l,g=i+c,_=i-c,y=r+a,b=r-a,v=s+o,w=s-o,x=f+v,E=f-v,S=g+y,k=g-y;t[p]=x+S,t[p+4]=x-S;var T=.707106781*(k+E);t[p+2]=E+T,t[p+6]=E-T;var C=.382683433*((x=w+b)-(k=_+m)),O=.5411961*x+C,I=1.306562965*k+C,A=.707106781*(S=b+_),P=m+A,N=m-A;t[p+5]=N+O,t[p+3]=N-O,t[p+1]=P+I,t[p+7]=P-I,p+=8}for(p=0,h=0;h<8;++h){n=t[p],i=t[p+8],r=t[p+16],s=t[p+24],o=t[p+32],a=t[p+40],c=t[p+48];var M=n+(l=t[p+56]),D=n-l,R=i+c,B=i-c,F=r+a,L=r-a,U=s+o,j=s-o,z=M+U,G=M-U,q=R+F,H=R-F;t[p]=z+q,t[p+32]=z-q;var $=.707106781*(H+G);t[p+16]=G+$,t[p+48]=G-$;var Y=.382683433*((z=j+L)-(H=B+D)),W=.5411961*z+Y,V=1.306562965*H+Y,J=.707106781*(q=L+B),X=D+J,Q=D-J;t[p+40]=Q+W,t[p+24]=Q-W,t[p+8]=X+V,t[p+56]=X-V,p++}for(h=0;h<64;++h)u=t[h]*e[h],d[h]=u>0?u+.5|0:u-.5|0;return d}(t,e),l=0;l<64;++l)f[E[l]]=c[l];var h=f[0]-n;n=f[0],0==h?M(i[0]):(M(i[p[s=32767+h]]),M(u[s]));for(var m=63;m>0&&0==f[m];m--);if(0==m)return M(o),n;for(var g,_=1;_<=m;){for(var y=_;0==f[_]&&_<=m;++_);var b=_-y;if(b>=16){g=b>>4;for(var v=1;v<=g;++v)M(a);b&=15}s=32767+f[_],M(r[(b<<4)+p[s]]),M(u[s]),_++}return 63!=m&&M(o),n}function F(t){t<=0&&(t=1),t>100&&(t=100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=o((e[n]*t+50)/100);i<1?i=1:i>255&&(i=255),a[E[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=o((r[s]*t+50)/100);u<1?u=1:u>255&&(u=255),c[E[s]]=u}for(var p=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,f=0;f<8;f++)for(var m=0;m<8;m++)l[d]=1/(a[E[d]]*p[f]*p[m]*8),h[d]=1/(c[E[d]]*p[f]*p[m]*8),d++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){var o;(new Date).getTime(),s&&F(s),m=new Array,g=0,_=7,R(65496),R(65504),R(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),R(1),R(1),D(0),D(0),void 0!==(o=t.comments)&&o.constructor===Array&&o.forEach((t=>{if("string"==typeof t){R(65534);var e,n=t.length;for(R(n+2),e=0;e<n;e++)D(t.charCodeAt(e))}})),function(t){if(t){R(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?R(t.length+2):(R(t.length+5+2),D(69),D(120),D(105),D(102),D(0));for(var e=0;e<t.length;e++)D(t[e])}}(t.exifBuffer),function(){R(65499),R(132),D(0);for(var t=0;t<64;t++)D(a[t]);D(1);for(var e=0;e<64;e++)D(c[e])}(),function(t,e){R(65472),R(17),D(8),R(e),R(t),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1)}(t.width,t.height),function(){R(65476),R(418),D(0);for(var t=0;t<16;t++)D(S[t+1]);for(var e=0;e<=11;e++)D(k[e]);D(16);for(var n=0;n<16;n++)D(T[n+1]);for(var i=0;i<=161;i++)D(C[i]);D(1);for(var r=0;r<16;r++)D(O[r+1]);for(var s=0;s<=11;s++)D(I[s]);D(17);for(var o=0;o<16;o++)D(A[o+1]);for(var a=0;a<=161;a++)D(P[a])}(),R(65498),R(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var u=0,p=0,d=0;g=0,_=7,this.encode.displayName="_encode_";for(var f,w,E,N,L,U,j,z,G,q=t.data,H=t.width,$=t.height,Y=4*H,W=0;W<$;){for(f=0;f<Y;){for(U=L=Y*W+f,j=-1,z=0,G=0;G<64;G++)U=L+(z=G>>3)*Y+(j=4*(7&G)),W+z>=$&&(U-=Y*(W+1+z-$)),f+j>=Y&&(U-=f+j-Y+4),w=q[U++],E=q[U++],N=q[U++],y[G]=(x[w]+x[E+256|0]+x[N+512|0]>>16)-128,b[G]=(x[w+768|0]+x[E+1024|0]+x[N+1280|0]>>16)-128,v[G]=(x[w+1280|0]+x[E+1536|0]+x[N+1792|0]>>16)-128;u=B(y,l,u,e,i),p=B(b,h,p,n,r),d=B(v,h,d,n,r),f+=32}W+=8}if(_>=0){var V=[];V[1]=_+1,V[0]=(1<<_+1)-1,M(V)}return R(65497),Buffer.from(m)},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)w[e]=t(e)}(),e=N(S,k),n=N(O,I),i=N(T,C),r=N(A,P),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var i=t;i<e;i++)p[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=i;for(var r=-(e-1);r<=-t;r++)p[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256|0]=38470*t,x[t+512|0]=7471*t+32768,x[t+768|0]=-11059*t,x[t+1024|0]=-21709*t,x[t+1280|0]=32768*t+8421375,x[t+1536|0]=-27439*t,x[t+1792|0]=-5329*t}(),F(t),(new Date).getTime()}t.exports=function(t,n){return void 0===n&&(n=50),{data:new e(n).encode(t,n),width:t.width,height:t.height}}},5516:(t,e)=>{e.stringify=function t(e){if(void 0===e)return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&"object"==typeof e){var n="",i=Array.isArray(e);n=i?"[":"{";var r=!0;for(var s in e){var o="function"==typeof e[s]||!i&&void 0===e[s];Object.hasOwnProperty.call(e,s)&&!o&&(r||(n+=","),r=!1,i?null==e[s]?n+="null":n+=t(e[s]):void 0!==e[s]&&(n+=t(s)+":"+t(e[s])))}return n+(i?"]":"}")}return"string"==typeof e?JSON.stringify(/^:/.test(e)?":"+e:e):void 0===e?"null":JSON.stringify(e)},e.parse=function(t){return JSON.parse(t,(function(t,e){return"string"==typeof e?/^:base64:/.test(e)?Buffer.from(e.substring(8),"base64"):/^:/.test(e)?e.substring(1):e:e}))}},8387:(t,e,n)=>{"use strict";const i=n(4434),r=n(5516),s=["sqlite","postgres","mysql","mongo","redis","tiered"];t.exports=class extends i{constructor(t,{emitErrors:e=!0,...i}={}){if(super(),this.opts={namespace:"keyv",serialize:r.stringify,deserialize:r.parse,..."string"==typeof t?{uri:t}:t,...i},!this.opts.store){const t={...this.opts};this.opts.store=(t=>{const e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){const i=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(n(6478)(e[i]))(t)}return new Map})(t)}if(this.opts.compression){const t=this.opts.compression;this.opts.serialize=t.serialize.bind(t),this.opts.deserialize=t.deserialize.bind(t)}"function"==typeof this.opts.store.on&&e&&this.opts.store.on("error",(t=>this.emit("error",t))),this.opts.store.namespace=this.opts.namespace;const s=t=>async function*(){for await(const[e,n]of"function"==typeof t?t(this.opts.store.namespace):t){const t=this.opts.deserialize(n);this.opts.store.namespace&&!e.includes(this.opts.store.namespace)||("number"==typeof t.expires&&Date.now()>t.expires?this.delete(e):yield[this._getKeyUnprefix(e),t.value])}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return s.includes(this.opts.store.opts.dialect)||s.findIndex((t=>this.opts.store.opts.url.includes(t)))>=0}_getKeyPrefix(t){return`${this.opts.namespace}:${t}`}_getKeyPrefixArray(t){return t.map((t=>`${this.opts.namespace}:${t}`))}_getKeyUnprefix(t){return t.split(":").splice(1).join(":")}get(t,e){const{store:n}=this.opts,i=Array.isArray(t),r=i?this._getKeyPrefixArray(t):this._getKeyPrefix(t);if(i&&void 0===n.getMany){const t=[];for(const i of r)t.push(Promise.resolve().then((()=>n.get(i))).then((t=>"string"==typeof t||this.opts.compression?this.opts.deserialize(t):t)).then((t=>{if(null!=t)return"number"==typeof t.expires&&Date.now()>t.expires?this.delete(i).then((()=>{})):e&&e.raw?t:t.value})));return Promise.allSettled(t).then((t=>{const e=[];for(const n of t)e.push(n.value);return e}))}return Promise.resolve().then((()=>i?n.getMany(r):n.get(r))).then((t=>"string"==typeof t||this.opts.compression?this.opts.deserialize(t):t)).then((n=>{if(null!=n){if(i){const i=[];for(let r of n)"string"==typeof r&&(r=this.opts.deserialize(r)),null!=r?"number"==typeof r.expires&&Date.now()>r.expires?(this.delete(t).then((()=>{})),i.push(void 0)):i.push(e&&e.raw?r:r.value):i.push(void 0);return i}return"number"==typeof n.expires&&Date.now()>n.expires?this.delete(t).then((()=>{})):e&&e.raw?n:n.value}}))}set(t,e,n){const i=this._getKeyPrefix(t);void 0===n&&(n=this.opts.ttl),0===n&&(n=void 0);const{store:r}=this.opts;return Promise.resolve().then((()=>{const t="number"==typeof n?Date.now()+n:null;return"symbol"==typeof e&&this.emit("error","symbol cannot be serialized"),e={value:e,expires:t},this.opts.serialize(e)})).then((t=>r.set(i,t,n))).then((()=>!0))}delete(t){const{store:e}=this.opts;if(Array.isArray(t)){const n=this._getKeyPrefixArray(t);if(void 0===e.deleteMany){const t=[];for(const i of n)t.push(e.delete(i));return Promise.allSettled(t).then((t=>t.every((t=>!0===t.value))))}return Promise.resolve().then((()=>e.deleteMany(n)))}const n=this._getKeyPrefix(t);return Promise.resolve().then((()=>e.delete(n)))}clear(){const{store:t}=this.opts;return Promise.resolve().then((()=>t.clear()))}has(t){const e=this._getKeyPrefix(t),{store:n}=this.opts;return Promise.resolve().then((async()=>"function"==typeof n.has?n.has(e):void 0!==await n.get(e)))}disconnect(){const{store:t}=this.opts;if("function"==typeof t.disconnect)return t.disconnect()}}},6478:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=6478,t.exports=e},6176:(t,e,n)=>{var i=n(9896),r=n(7016),s=(n(6928),n(5802)),o=n(4361),a=n(3835),c=n(791),l=n(4849),h=function(){},u=n(9690);t.exports=function(t,e){e="function"==typeof e?e:h,"string"==typeof t?t={uri:t,url:t}:t||(t={});var n=t.uri||t.url;function p(t,i){if(t)return e(t);!function(t,e,n){var i,r;u(e)?("string"==typeof e&&(e=Buffer.from(e,"binary")),r=!0):e=e.toString().trim();try{i=r?c(e):/json/.test(l.lookup(t))||"{"===e.charAt(0)?JSON.parse(e):/xml/.test(l.lookup(t))||"<"===e.charAt(0)?a(e):o(e)}catch(t){n(t),n=h}n(null,i)}(n,i.body||i,e)}r.parse(n).host?s(t,p):i.readFile(n,t,p)}},9690:(t,e,n)=>{var i=n(3922),r=Buffer.from([66,77,70,3]);t.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):t.length>4&&i(t.slice(0,4),r)}},9438:function(t,e,n){var i,r;!function(){const s=e;!function(t){const e=Symbol("newer"),n=Symbol("older");function i(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}function r(t,i){this.key=t,this.value=i,this[e]=void 0,this[n]=void 0}function s(t){this.entry=t}function o(t){this.entry=t}function a(t){this.entry=t}t.LRUMap=i,i.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[e]&&(t===this.oldest&&(this.oldest=t[e]),t[e][n]=t[n]),t[n]&&(t[n][e]=t[e]),t[e]=void 0,t[n]=this.newest,this.newest&&(this.newest[e]=t),this.newest=t)},i.prototype.assign=function(t){let i,s=this.limit||Number.MAX_VALUE;this._keymap.clear();let o=t[Symbol.iterator]();for(let t=o.next();!t.done;t=o.next()){let o=new r(t.value[0],t.value[1]);if(this._keymap.set(o.key,o),i?(i[e]=o,o[n]=i):this.oldest=o,i=o,0==s--)throw new Error("overflow")}this.newest=i,this.size=this._keymap.size},i.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},i.prototype.set=function(t,i){var s=this._keymap.get(t);return s?(s.value=i,this._markEntryAsUsed(s),this):(this._keymap.set(t,s=new r(t,i)),this.newest?(this.newest[e]=s,s[n]=this.newest):this.oldest=s,this.newest=s,++this.size,this.size>this.limit&&this.shift(),this)},i.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[e]?(this.oldest=this.oldest[e],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),t[e]=t[n]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},i.prototype.find=function(t){let e=this._keymap.get(t);return e?e.value:void 0},i.prototype.has=function(t){return this._keymap.has(t)},i.prototype.delete=function(t){var i=this._keymap.get(t);if(i)return this._keymap.delete(i.key),i[e]&&i[n]?(i[n][e]=i[e],i[e][n]=i[n]):i[e]?(i[e][n]=void 0,this.oldest=i[e]):i[n]?(i[n][e]=void 0,this.newest=i[n]):this.oldest=this.newest=void 0,this.size--,i.value},i.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:t.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:t.value}):{done:!0,value:void 0}},i.prototype.keys=function(){return new o(this.oldest)},i.prototype.values=function(){return new a(this.oldest)},i.prototype.entries=function(){return this},i.prototype[Symbol.iterator]=function(){return new s(this.oldest)},i.prototype.forEach=function(t,n){"object"!=typeof n&&(n=this);let i=this.oldest;for(;i;)t.call(n,i.value,i.key,this),i=i[e]},i.prototype.toJSON=function(){for(var t=new Array(this.size),n=0,i=this.oldest;i;)t[n++]={key:i.key,value:i.value},i=i[e];return t},i.prototype.toString=function(){for(var t="",n=this.oldest;n;)t+=String(n.key)+":"+n.value,(n=n[e])&&(t+=" < ");return t}}(s),void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r)}()},4849:(t,e,n)=>{n(6928);var i=n(9896);function r(){this.types=Object.create(null),this.extensions=Object.create(null)}r.prototype.define=function(t){for(var e in t){for(var n=t[e],i=0;i<n.length;i++)process.env.DEBUG_MIME&&this.types[n[i]]&&console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+n[i]+'" extension type from '+this.types[n[i]]+" to "+e),this.types[n[i]]=e;this.extensions[e]||(this.extensions[e]=n[0])}},r.prototype.load=function(t){this._loading=t;var e={};i.readFileSync(t,"ascii").split(/[\r\n]+/).forEach((function(t){var n=t.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);e[n.shift()]=n})),this.define(e),this._loading=null},r.prototype.lookup=function(t,e){var n=t.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[n]||e||this.default_type},r.prototype.extension=function(t){var e=t.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[e]};var s=new r;s.define(n(9415)),s.default_type=s.lookup("bin"),s.Mime=r,s.charsets={lookup:function(t,e){return/^text\/|^application\/(javascript|json)/.test(t)?"UTF-8":e}},t.exports=s},5022:t=>{"use strict";const e=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];t.exports=(t,n)=>{if(n._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const i=new Set(Object.keys(t).concat(e)),r={};for(const e of i)e in n||(r[e]={get(){const n=t[e];return"function"==typeof n?n.bind(t):n},set(n){t[e]=n},enumerable:!0,configurable:!1});return Object.defineProperties(n,r),t.once("aborted",(()=>{n.destroy(),n.emit("aborted")})),t.once("close",(()=>{t.complete&&n.readable?n.once("end",(()=>{n.emit("close")})):n.emit("close")})),n}},6585:t=>{var e=1e3,n=60*e,i=60*n,r=24*i,s=7*r;function o(t,e,n,i){var r=e>=1.5*n;return Math.round(t/n)+" "+i+(r?"s":"")}t.exports=function(t,a){a=a||{};var c,l,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===h&&isFinite(t))return a.long?(c=t,(l=Math.abs(c))>=r?o(c,l,r,"day"):l>=i?o(c,l,i,"hour"):l>=n?o(c,l,n,"minute"):l>=e?o(c,l,e,"second"):c+" ms"):function(t){var s=Math.abs(t);return s>=r?Math.round(t/r)+"d":s>=i?Math.round(t/i)+"h":s>=n?Math.round(t/n)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},4399:(t,e)=>{"use strict";function n(t,e,n,i){for(var r=t[e++],s=1<<r,o=s+1,a=o+1,c=r+1,l=(1<<c)-1,h=0,u=0,p=0,d=t[e++],f=new Int32Array(4096),m=null;;){for(;h<16&&0!==d;)u|=t[e++]<<h,h+=8,1===d?d=t[e++]:--d;if(h<c)break;var g=u&l;if(u>>=c,h-=c,g!==s){if(g===o)break;for(var _=g<a?g:m,y=0,b=_;b>s;)b=f[b]>>8,++y;var v=b;if(p+y+(_!==g?1:0)>i)return void console.log("Warning, gif stream longer than expected.");n[p++]=v;var w=p+=y;for(_!==g&&(n[p++]=v),b=_;y--;)b=f[b],n[--w]=255&b,b>>=8;null!==m&&a<4096&&(f[a++]=m<<8|v,a>=l+1&&c<12&&(++c,l=l<<1|1)),m=g}else a=o+1,l=(1<<(c=r+1))-1,m=null}return p!==i&&console.log("Warning, gif stream shorter than expected."),n}try{e.GifWriter=function(t,e,n,i){var r=0,s=void 0===(i=void 0===i?{}:i).loop?null:i.loop,o=void 0===i.palette?null:i.palette;if(e<=0||n<=0||e>65535||n>65535)throw new Error("Width/Height invalid.");function a(t){var e=t.length;if(e<2||e>256||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}t[r++]=71,t[r++]=73,t[r++]=70,t[r++]=56,t[r++]=57,t[r++]=97;var c=0,l=0;if(null!==o){for(var h=a(o);h>>=1;)++c;if(h=1<<c,--c,void 0!==i.background){if((l=i.background)>=h)throw new Error("Background index out of range.");if(0===l)throw new Error("Background index explicitly passed as 0.")}}if(t[r++]=255&e,t[r++]=e>>8&255,t[r++]=255&n,t[r++]=n>>8&255,t[r++]=(null!==o?128:0)|c,t[r++]=l,t[r++]=0,null!==o)for(var u=0,p=o.length;u<p;++u){var d=o[u];t[r++]=d>>16&255,t[r++]=d>>8&255,t[r++]=255&d}if(null!==s){if(s<0||s>65535)throw new Error("Loop count invalid.");t[r++]=33,t[r++]=255,t[r++]=11,t[r++]=78,t[r++]=69,t[r++]=84,t[r++]=83,t[r++]=67,t[r++]=65,t[r++]=80,t[r++]=69,t[r++]=50,t[r++]=46,t[r++]=48,t[r++]=3,t[r++]=1,t[r++]=255&s,t[r++]=s>>8&255,t[r++]=0}var f=!1;this.addFrame=function(e,n,i,s,c,l){if(!0===f&&(--r,f=!1),l=void 0===l?{}:l,e<0||n<0||e>65535||n>65535)throw new Error("x/y invalid.");if(i<=0||s<=0||i>65535||s>65535)throw new Error("Width/Height invalid.");if(c.length<i*s)throw new Error("Not enough pixels for the frame size.");var h=!0,u=l.palette;if(null==u&&(h=!1,u=o),null==u)throw new Error("Must supply either a local or global palette.");for(var p=a(u),d=0;p>>=1;)++d;p=1<<d;var m=void 0===l.delay?0:l.delay,g=void 0===l.disposal?0:l.disposal;if(g<0||g>3)throw new Error("Disposal out of range.");var _=!1,y=0;if(void 0!==l.transparent&&null!==l.transparent&&(_=!0,(y=l.transparent)<0||y>=p))throw new Error("Transparent color index.");if((0!==g||_||0!==m)&&(t[r++]=33,t[r++]=249,t[r++]=4,t[r++]=g<<2|(!0===_?1:0),t[r++]=255&m,t[r++]=m>>8&255,t[r++]=y,t[r++]=0),t[r++]=44,t[r++]=255&e,t[r++]=e>>8&255,t[r++]=255&n,t[r++]=n>>8&255,t[r++]=255&i,t[r++]=i>>8&255,t[r++]=255&s,t[r++]=s>>8&255,t[r++]=!0===h?128|d-1:0,!0===h)for(var b=0,v=u.length;b<v;++b){var w=u[b];t[r++]=w>>16&255,t[r++]=w>>8&255,t[r++]=255&w}return r=function(t,e,n,i){t[e++]=n;var r=e++,s=1<<n,o=s-1,a=s+1,c=a+1,l=n+1,h=0,u=0;function p(n){for(;h>=n;)t[e++]=255&u,u>>=8,h-=8,e===r+256&&(t[r]=255,r=e++)}function d(t){u|=t<<h,h+=l,p(8)}var f=i[0]&o,m={};d(s);for(var g=1,_=i.length;g<_;++g){var y=i[g]&o,b=f<<8|y,v=m[b];if(void 0===v){for(u|=f<<h,h+=l;h>=8;)t[e++]=255&u,u>>=8,h-=8,e===r+256&&(t[r]=255,r=e++);4096===c?(d(s),c=a+1,l=n+1,m={}):(c>=1<<l&&++l,m[b]=c++),f=y}else f=v}return d(f),d(a),p(1),r+1===e?t[r]=0:(t[r]=e-r-1,t[e++]=0),e}(t,r,d<2?2:d,c),r},this.end=function(){return!1===f&&(t[r++]=59,f=!0),r},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(e){t=e},this.getOutputBufferPosition=function(){return r},this.setOutputBufferPosition=function(t){r=t}},e.GifReader=function(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var i=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],o=s>>7,a=1<<1+(7&s);t[e++],t[e++];var c=null,l=null;o&&(c=e,l=a,e+=3*a);var h=!0,u=[],p=0,d=null,f=0,m=null;for(this.width=i,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((O=t[e++])>=0))throw Error("Invalid block size");if(0===O)break;e+=O}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var g=t[e++];p=t[e++]|t[e++]<<8,d=t[e++],1&g||(d=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((O=t[e++])>=0))throw Error("Invalid block size");if(0===O)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,w=t[e++],x=w>>6&1,E=1<<1+(7&w),S=c,k=l,T=!1;w>>7&&(T=!0,S=e,k=E,e+=3*E);var C=e;for(e++;;){var O;if(!((O=t[e++])>=0))throw Error("Invalid block size");if(0===O)break;e+=O}u.push({x:_,y,width:b,height:v,has_local_palette:T,palette_offset:S,palette_size:k,data_offset:C,data_length:e-C,transparent_index:d,interlaced:!!x,delay:p,disposal:f});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(t){if(t<0||t>=u.length)throw new Error("Frame index out of range.");return u[t]},this.decodeAndBlitFrameBGRA=function(e,r){var s=this.frameInfo(e),o=s.width*s.height,a=new Uint8Array(o);n(t,s.data_offset,a,o);var c=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var h=s.width,u=i-h,p=h,d=4*(s.y*i+s.x),f=4*((s.y+s.height)*i+s.x),m=d,g=4*u;!0===s.interlaced&&(g+=4*i*7);for(var _=8,y=0,b=a.length;y<b;++y){var v=a[y];if(0===p&&(p=h,(m+=g)>=f&&(g=4*u+4*i*(_-1),m=d+(h+u)*(_<<1),_>>=1)),v===l)m+=4;else{var w=t[c+3*v],x=t[c+3*v+1],E=t[c+3*v+2];r[m++]=E,r[m++]=x,r[m++]=w,r[m++]=255}--p}},this.decodeAndBlitFrameRGBA=function(e,r){var s=this.frameInfo(e),o=s.width*s.height,a=new Uint8Array(o);n(t,s.data_offset,a,o);var c=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var h=s.width,u=i-h,p=h,d=4*(s.y*i+s.x),f=4*((s.y+s.height)*i+s.x),m=d,g=4*u;!0===s.interlaced&&(g+=4*i*7);for(var _=8,y=0,b=a.length;y<b;++y){var v=a[y];if(0===p&&(p=h,(m+=g)>=f&&(g=4*u+4*i*(_-1),m=d+(h+u)*(_<<1),_>>=1)),v===l)m+=4;else{var w=t[c+3*v],x=t[c+3*v+1],E=t[c+3*v+2];r[m++]=w,r[m++]=x,r[m++]=E,r[m++]=255}--p}}}}catch(t){}},4617:t=>{"use strict";t.exports=(t,e)=>(e=e||(()=>{}),t.then((t=>new Promise((t=>{t(e())})).then((()=>t))),(t=>new Promise((t=>{t(e())})).then((()=>{throw t})))))},3290:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(228),r=n(7685),s=n(4774),o=()=>{},a=new r.TimeoutError;e.default=class extends i{constructor(t){var e,n,i,r;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},t)).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==n?n:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(r=null===(i=t.interval)||void 0===i?void 0:i.toString())&&void 0!==r?r:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const e=this._queue.dequeue();return!!e&&(this.emit("active"),e(),t&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,e={}){return new Promise(((n,i)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===e.timeout?t():r.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,(()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&i(a)}));n(await s)}catch(t){i(t)}this._next()}),e),this._tryToStartAnother(),this.emit("add")}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}}))}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}}},9998:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){let i=0,r=t.length;for(;r>0;){const s=r/2|0;let o=i+s;n(t[o],e)<=0?(i=++o,r-=s+1):r=s}return i}},4774:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(9998);e.default=class{constructor(){this._queue=[]}enqueue(t,e){const n={priority:(e=Object.assign({priority:0},e)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(n);const r=i.default(this._queue,n,((t,e)=>e.priority-t.priority));this._queue.splice(r,0,n)}dequeue(){const t=this._queue.shift();return null==t?void 0:t.run}filter(t){return this._queue.filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return this._queue.length}}},7685:(t,e,n)=>{"use strict";const i=n(4617);class r extends Error{constructor(t){super(t),this.name="TimeoutError"}}const s=(t,e,n)=>new Promise(((s,o)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void s(t);const a=setTimeout((()=>{if("function"==typeof n){try{s(n())}catch(t){o(t)}return}const i=n instanceof Error?n:new r("string"==typeof n?n:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(i)}),e);i(t.then(s,o),(()=>{clearTimeout(a)}))}));t.exports=s,t.exports.default=s,t.exports.TimeoutError=r},1668:(t,e,n)=>{"use strict";var i={};(0,n(9805).assign)(i,n(3303),n(7083),n(9681)),t.exports=i},3303:(t,e,n)=>{"use strict";var i=n(8411),r=n(9805),s=n(1996),o=n(4674),a=n(4442),c=Object.prototype.toString,l=0,h=-1,u=0,p=8;function d(t){if(!(this instanceof d))return new d(t);this.options=r.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==l)throw new Error(o[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var f;if(f="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,f))!==l)throw new Error(o[n]);this._dict_set=!0}}function f(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}d.prototype.push=function(t,e){var n,o,a=this.strm,h=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===c.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(h),a.next_out=0,a.avail_out=h),1!==(n=i.deflate(a,o))&&n!==l)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===o?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==o||(this.onEnd(l),a.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=f,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},7083:(t,e,n)=>{"use strict";var i=n(1447),r=n(9805),s=n(1996),o=n(9681),a=n(4674),c=n(4442),l=n(7414),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);if(this.header=new l,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=i.inflateSetDictionary(this.strm,e.dictionary))!==o.Z_OK))throw new Error(a[n])}function p(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}u.prototype.push=function(t,e){var n,a,c,l,u,p=this.strm,d=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?p.input=s.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(d),p.next_out=0,p.avail_out=d),(n=i.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&f&&(n=i.inflateSetDictionary(this.strm,f)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(p.output,p.next_out),l=p.next_out-c,u=s.buf2string(p.output,c),p.next_out=l,p.avail_out=d-l,l&&r.arraySet(p.output,p.output,c,l,0),this.onData(u)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),p.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=u,e.inflate=p,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.ungzip=p},9805:(t,e)=>{"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,o;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(o=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s=t[e],o.set(s,r),r+=s.length;return o}},s={arraySet:function(t,e,n,i,r){for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},1996:(t,e,n)=>{"use strict";var i=n(9805),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new i.Buf8(256),a=0;a<256;a++)o[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function c(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",o=0;o<e;o++)n+=String.fromCharCode(t[o]);return n}o[254]=o[254]=1,e.string2buf=function(t){var e,n,r,s,o,a=t.length,c=0;for(s=0;s<a;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(c),o=0,s=0;o<c;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},e.buf2binstring=function(t){return c(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,r,s,a=e||t.length,l=new Array(2*a);for(i=0,n=0;n<a;)if((r=t[n++])<128)l[i++]=r;else if((s=o[r])>4)l[i++]=65533,n+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&n<a;)r=r<<6|63&t[n++],s--;s>1?l[i++]=65533:r<65536?l[i++]=r:(r-=65536,l[i++]=55296|r>>10&1023,l[i++]=56320|1023&r)}return c(l,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+o[t[n]]>e?n:e}},3269:t=>{"use strict";t.exports=function(t,e,n,i){for(var r=65535&t,s=t>>>16&65535,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{s=s+(r=r+e[i++]|0)|0}while(--o);r%=65521,s%=65521}return r|s<<16}},9681:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823:t=>{"use strict";var e=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,n,i,r){var s=e,o=r+i;t^=-1;for(var a=r;a<o;a++)t=t>>>8^s[255&(t^n[a])];return~t}},8411:(t,e,n)=>{"use strict";var i,r=n(9805),s=n(3665),o=n(3269),a=n(4823),c=n(4674),l=0,h=0,u=-2,p=2,d=8,f=286,m=30,g=19,_=2*f+1,y=15,b=3,v=258,w=v+b+1,x=42,E=103,S=113,k=666;function T(t,e){return t.msg=c[e],e}function C(t){return(t<<1)-(t>4?9:0)}function O(t){for(var e=t.length;--e>=0;)t[e]=0}function I(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function A(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function P(t,e){t.pending_buf[t.pending++]=e}function N(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function M(t,e){var n,i,r=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-w?t.strstart-(t.w_size-w):0,l=t.window,h=t.w_mask,u=t.prev,p=t.strstart+v,d=l[s+o-1],f=l[s+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(n=e)+o]===f&&l[n+o-1]===d&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<p);if(i=v-(p-s),s=p-v,i>o){if(t.match_start=e,o=i,i>=a)break;d=l[s+o-1],f=l[s+o]}}}while((e=u[e&h])>c&&0!=--r);return o<=t.lookahead?o:t.lookahead}function D(t){var e,n,i,s,c,l,h,u,p,d,f=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-w)){r.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=f?i-f:0}while(--n);e=n=f;do{i=t.prev[--e],t.prev[e]=i>=f?i-f:0}while(--n);s+=f}if(0===t.strm.avail_in)break;if(l=t.strm,h=t.window,u=t.strstart+t.lookahead,p=s,d=void 0,(d=l.avail_in)>p&&(d=p),n=0===d?0:(l.avail_in-=d,r.arraySet(h,l.input,l.next_in,d,u),1===l.state.wrap?l.adler=o(l.adler,h,d,u):2===l.state.wrap&&(l.adler=a(l.adler,h,d,u)),l.next_in+=d,l.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=b)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+b-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<b)););}while(t.lookahead<w&&0!==t.strm.avail_in)}function R(t,e){for(var n,i;;){if(t.lookahead<w){if(D(t),t.lookahead<w&&e===l)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-w&&(t.match_length=M(t,n)),t.match_length>=b)if(i=s._tr_tally(t,t.strstart-t.match_start,t.match_length-b),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=b){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(A(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(A(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(A(t,!1),0===t.strm.avail_out)?1:2}function B(t,e){for(var n,i,r;;){if(t.lookahead<w){if(D(t),t.lookahead<w&&e===l)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=b-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-w&&(t.match_length=M(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===b&&t.strstart-t.match_start>4096)&&(t.match_length=b-1)),t.prev_length>=b&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-b,i=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-b),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=b-1,t.strstart++,i&&(A(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=s._tr_tally(t,0,t.window[t.strstart-1]))&&A(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(A(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(A(t,!1),0===t.strm.avail_out)?1:2}function F(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=d,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*_),this.dyn_dtree=new r.Buf16(2*(2*m+1)),this.bl_tree=new r.Buf16(2*(2*g+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(y+1),this.heap=new r.Buf16(2*f+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*f+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=p,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?x:S,t.adler=2===e.wrap?0:1,e.last_flush=l,s._tr_init(e),h):T(t,u)}function j(t){var e,n=U(t);return n===h&&((e=t.state).window_size=2*e.w_size,O(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=b-1,e.match_available=0,e.ins_h=0),n}function z(t,e,n,i,s,o){if(!t)return u;var a=1;if(-1===e&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),s<1||s>9||n!==d||i<8||i>15||e<0||e>9||o<0||o>4)return T(t,u);8===i&&(i=9);var c=new L;return t.state=c,c.strm=t,c.wrap=a,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+b-1)/b),c.window=new r.Buf8(2*c.w_size),c.head=new r.Buf16(c.hash_size),c.prev=new r.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new r.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=o,c.method=n,j(t)}i=[new F(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(D(t),0===t.lookahead&&e===l)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,A(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-w&&(A(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(A(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(A(t,!1),t.strm.avail_out),1)})),new F(4,4,8,4,R),new F(4,5,16,8,R),new F(4,6,32,32,R),new F(4,4,16,16,B),new F(8,16,32,32,B),new F(8,16,128,128,B),new F(8,32,128,256,B),new F(32,128,258,1024,B),new F(32,258,258,4096,B)],e.deflateInit=function(t,e){return z(t,e,d,15,8,0)},e.deflateInit2=z,e.deflateReset=j,e.deflateResetKeep=U,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,h):u},e.deflate=function(t,e){var n,r,o,c;if(!t||!t.state||e>5||e<0)return t?T(t,u):u;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===k&&4!==e)return T(t,0===t.avail_out?-5:u);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===x)if(2===r.wrap)t.adler=0,P(r,31),P(r,139),P(r,8),r.gzhead?(P(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),P(r,255&r.gzhead.time),P(r,r.gzhead.time>>8&255),P(r,r.gzhead.time>>16&255),P(r,r.gzhead.time>>24&255),P(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),P(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(P(r,255&r.gzhead.extra.length),P(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(P(r,0),P(r,0),P(r,0),P(r,0),P(r,0),P(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),P(r,3),r.status=S);else{var p=d+(r.w_bits-8<<4)<<8;p|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=32),p+=31-p%31,r.status=S,N(r,p),0!==r.strstart&&(N(r,t.adler>>>16),N(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),I(t),o=r.pending,r.pending!==r.pending_buf_size));)P(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),I(t),o=r.pending,r.pending===r.pending_buf_size)){c=1;break}c=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,P(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),0===c&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),I(t),o=r.pending,r.pending===r.pending_buf_size)){c=1;break}c=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,P(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),0===c&&(r.status=E)}else r.status=E;if(r.status===E&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&I(t),r.pending+2<=r.pending_buf_size&&(P(r,255&t.adler),P(r,t.adler>>8&255),t.adler=0,r.status=S)):r.status=S),0!==r.pending){if(I(t),0===t.avail_out)return r.last_flush=-1,h}else if(0===t.avail_in&&C(e)<=C(n)&&4!==e)return T(t,-5);if(r.status===k&&0!==t.avail_in)return T(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==l&&r.status!==k){var f=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(D(t),0===t.lookahead)){if(e===l)return 1;break}if(t.match_length=0,n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(A(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(A(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(A(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,i,r,o,a=t.window;;){if(t.lookahead<=v){if(D(t),t.lookahead<=v&&e===l)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=b&&t.strstart>0&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){o=t.strstart+v;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);t.match_length=v-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=b?(n=s._tr_tally(t,1,t.match_length-b),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(A(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(A(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(A(t,!1),0===t.strm.avail_out)?1:2}(r,e):i[r.level].func(r,e);if(3!==f&&4!==f||(r.status=k),1===f||3===f)return 0===t.avail_out&&(r.last_flush=-1),h;if(2===f&&(1===e?s._tr_align(r):5!==e&&(s._tr_stored_block(r,0,0,!1),3===e&&(O(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),I(t),0===t.avail_out))return r.last_flush=-1,h}return 4!==e?h:r.wrap<=0?1:(2===r.wrap?(P(r,255&t.adler),P(r,t.adler>>8&255),P(r,t.adler>>16&255),P(r,t.adler>>24&255),P(r,255&t.total_in),P(r,t.total_in>>8&255),P(r,t.total_in>>16&255),P(r,t.total_in>>24&255)):(N(r,t.adler>>>16),N(r,65535&t.adler)),I(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?h:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==x&&69!==e&&73!==e&&91!==e&&e!==E&&e!==S&&e!==k?T(t,u):(t.state=null,e===S?T(t,-3):h):u},e.deflateSetDictionary=function(t,e){var n,i,s,a,c,l,p,d,f=e.length;if(!t||!t.state)return u;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==x||n.lookahead)return u;for(1===a&&(t.adler=o(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(O(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,e,f-n.w_size,n.w_size,0),e=d,f=n.w_size),c=t.avail_in,l=t.next_in,p=t.input,t.avail_in=f,t.next_in=0,t.input=e,D(n);n.lookahead>=b;){i=n.strstart,s=n.lookahead-(b-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+b-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--s);n.strstart=i,n.lookahead=b-1,D(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=b-1,n.match_available=0,t.next_in=l,t.input=p,t.avail_in=c,n.wrap=a,h},e.deflateInfo="pako deflate (from Nodeca project)"},7414:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293:t=>{"use strict";t.exports=function(t,e){var n,i,r,s,o,a,c,l,h,u,p,d,f,m,g,_,y,b,v,w,x,E,S,k,T;n=t.state,i=t.next_in,k=t.input,r=i+(t.avail_in-5),s=t.next_out,T=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),c=n.dmax,l=n.wsize,h=n.whave,u=n.wnext,p=n.window,d=n.hold,f=n.bits,m=n.lencode,g=n.distcode,_=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),b=m[d&_];e:for(;;){if(d>>>=v=b>>>24,f-=v,0==(v=b>>>16&255))T[s++]=65535&b;else{if(!(16&v)){if(64&v){if(32&v){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=m[(65535&b)+(d&(1<<v)-1)];continue e}for(w=65535&b,(v&=15)&&(f<v&&(d+=k[i++]<<f,f+=8),w+=d&(1<<v)-1,d>>>=v,f-=v),f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),b=g[d&y];;){if(d>>>=v=b>>>24,f-=v,16&(v=b>>>16&255)){if(x=65535&b,f<(v&=15)&&(d+=k[i++]<<f,(f+=8)<v&&(d+=k[i++]<<f,f+=8)),(x+=d&(1<<v)-1)>c){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=v,f-=v,x>(v=s-o)){if((v=x-v)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(E=0,S=p,0===u){if(E+=l-v,v<w){w-=v;do{T[s++]=p[E++]}while(--v);E=s-x,S=T}}else if(u<v){if(E+=l+u-v,(v-=u)<w){w-=v;do{T[s++]=p[E++]}while(--v);if(E=0,u<w){w-=v=u;do{T[s++]=p[E++]}while(--v);E=s-x,S=T}}}else if(E+=u-v,v<w){w-=v;do{T[s++]=p[E++]}while(--v);E=s-x,S=T}for(;w>2;)T[s++]=S[E++],T[s++]=S[E++],T[s++]=S[E++],w-=3;w&&(T[s++]=S[E++],w>1&&(T[s++]=S[E++]))}else{E=s-x;do{T[s++]=T[E++],T[s++]=T[E++],T[s++]=T[E++],w-=3}while(w>2);w&&(T[s++]=T[E++],w>1&&(T[s++]=T[E++]))}break}if(64&v){t.msg="invalid distance code",n.mode=30;break t}b=g[(65535&b)+(d&(1<<v)-1)]}}break}}while(i<r&&s<a);i-=w=f>>3,d&=(1<<(f-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=s<a?a-s+257:257-(s-a),n.hold=d,n.bits=f}},1447:(t,e,n)=>{"use strict";var i=n(9805),r=n(3269),s=n(4823),o=n(7293),a=n(1998),c=0,l=-2,h=1,u=12,p=30,d=852,f=592;function m(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=h,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(d),e.distcode=e.distdyn=new i.Buf32(f),e.sane=1,e.back=-1,c):l}function y(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,_(t)):l}function b(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?l:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,y(t))):l}function v(t,e){var n,i;return t?(i=new g,t.state=i,i.window=null,(n=b(t,e))!==c&&(t.state=null),n):l}var w,x,E=!0;function S(t){if(E){var e;for(w=new i.Buf32(512),x=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,w,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,x,0,t.work,{bits:5}),E=!1}t.lencode=w,t.lenbits=9,t.distcode=x,t.distbits=5}function k(t,e,n,r){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>r&&(s=r),i.arraySet(o.window,e,n-r,s,o.wnext),(r-=s)?(i.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}e.inflateReset=y,e.inflateReset2=b,e.inflateResetKeep=_,e.inflateInit=function(t){return v(t,15)},e.inflateInit2=v,e.inflate=function(t,e){var n,d,f,g,_,y,b,v,w,x,E,T,C,O,I,A,P,N,M,D,R,B,F,L,U=0,j=new i.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;(n=t.state).mode===u&&(n.mode=13),_=t.next_out,f=t.output,b=t.avail_out,g=t.next_in,d=t.input,y=t.avail_in,v=n.hold,w=n.bits,x=y,E=b,B=c;t:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;w<16;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(2&n.wrap&&35615===v){n.check=0,j[0]=255&v,j[1]=v>>>8&255,n.check=s(n.check,j,2,0),v=0,w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",n.mode=p;break}if(8!=(15&v)){t.msg="unknown compression method",n.mode=p;break}if(w-=4,R=8+(15&(v>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){t.msg="invalid window size",n.mode=p;break}n.dmax=1<<R,t.adler=n.check=1,n.mode=512&v?10:u,v=0,w=0;break;case 2:for(;w<16;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(n.flags=v,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=p;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=p;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(j[0]=255&v,j[1]=v>>>8&255,n.check=s(n.check,j,2,0)),v=0,w=0,n.mode=3;case 3:for(;w<32;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}n.head&&(n.head.time=v),512&n.flags&&(j[0]=255&v,j[1]=v>>>8&255,j[2]=v>>>16&255,j[3]=v>>>24&255,n.check=s(n.check,j,4,0)),v=0,w=0,n.mode=4;case 4:for(;w<16;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(j[0]=255&v,j[1]=v>>>8&255,n.check=s(n.check,j,2,0)),v=0,w=0,n.mode=5;case 5:if(1024&n.flags){for(;w<16;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(j[0]=255&v,j[1]=v>>>8&255,n.check=s(n.check,j,2,0)),v=0,w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((T=n.length)>y&&(T=y),T&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,d,g,T,R)),512&n.flags&&(n.check=s(n.check,d,T,g)),y-=T,g+=T,n.length-=T),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break t;T=0;do{R=d[g+T++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R))}while(R&&T<y);if(512&n.flags&&(n.check=s(n.check,d,T,g)),y-=T,g+=T,R)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break t;T=0;do{R=d[g+T++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R))}while(R&&T<y);if(512&n.flags&&(n.check=s(n.check,d,T,g)),y-=T,g+=T,R)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;w<16;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(v!==(65535&n.check)){t.msg="header crc mismatch",n.mode=p;break}v=0,w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=u;break;case 10:for(;w<32;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}t.adler=n.check=m(v),v=0,w=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=_,t.avail_out=b,t.next_in=g,t.avail_in=y,n.hold=v,n.bits=w,2;t.adler=n.check=1,n.mode=u;case u:if(5===e||6===e)break t;case 13:if(n.last){v>>>=7&w,w-=7&w,n.mode=27;break}for(;w<3;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}switch(n.last=1&v,w-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(S(n),n.mode=20,6===e){v>>>=2,w-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=p}v>>>=2,w-=2;break;case 14:for(v>>>=7&w,w-=7&w;w<32;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",n.mode=p;break}if(n.length=65535&v,v=0,w=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(T=n.length){if(T>y&&(T=y),T>b&&(T=b),0===T)break t;i.arraySet(f,d,g,T,_),y-=T,g+=T,b-=T,_+=T,n.length-=T;break}n.mode=u;break;case 17:for(;w<14;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(n.nlen=257+(31&v),v>>>=5,w-=5,n.ndist=1+(31&v),v>>>=5,w-=5,n.ncode=4+(15&v),v>>>=4,w-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=p;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;w<3;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}n.lens[z[n.have++]]=7&v,v>>>=3,w-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},B=a(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,B){t.msg="invalid code lengths set",n.mode=p;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;A=(U=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,P=65535&U,!((I=U>>>24)<=w);){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(P<16)v>>>=I,w-=I,n.lens[n.have++]=P;else{if(16===P){for(L=I+2;w<L;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(v>>>=I,w-=I,0===n.have){t.msg="invalid bit length repeat",n.mode=p;break}R=n.lens[n.have-1],T=3+(3&v),v>>>=2,w-=2}else if(17===P){for(L=I+3;w<L;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}w-=I,R=0,T=3+(7&(v>>>=I)),v>>>=3,w-=3}else{for(L=I+7;w<L;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}w-=I,R=0,T=11+(127&(v>>>=I)),v>>>=7,w-=7}if(n.have+T>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=p;break}for(;T--;)n.lens[n.have++]=R}}if(n.mode===p)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=p;break}if(n.lenbits=9,F={bits:n.lenbits},B=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,B){t.msg="invalid literal/lengths set",n.mode=p;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},B=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,B){t.msg="invalid distances set",n.mode=p;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(y>=6&&b>=258){t.next_out=_,t.avail_out=b,t.next_in=g,t.avail_in=y,n.hold=v,n.bits=w,o(t,E),_=t.next_out,f=t.output,b=t.avail_out,g=t.next_in,d=t.input,y=t.avail_in,v=n.hold,w=n.bits,n.mode===u&&(n.back=-1);break}for(n.back=0;A=(U=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,P=65535&U,!((I=U>>>24)<=w);){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(A&&!(240&A)){for(N=I,M=A,D=P;A=(U=n.lencode[D+((v&(1<<N+M)-1)>>N)])>>>16&255,P=65535&U,!(N+(I=U>>>24)<=w);){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}v>>>=N,w-=N,n.back+=N}if(v>>>=I,w-=I,n.back+=I,n.length=P,0===A){n.mode=26;break}if(32&A){n.back=-1,n.mode=u;break}if(64&A){t.msg="invalid literal/length code",n.mode=p;break}n.extra=15&A,n.mode=22;case 22:if(n.extra){for(L=n.extra;w<L;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;A=(U=n.distcode[v&(1<<n.distbits)-1])>>>16&255,P=65535&U,!((I=U>>>24)<=w);){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(!(240&A)){for(N=I,M=A,D=P;A=(U=n.distcode[D+((v&(1<<N+M)-1)>>N)])>>>16&255,P=65535&U,!(N+(I=U>>>24)<=w);){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}v>>>=N,w-=N,n.back+=N}if(v>>>=I,w-=I,n.back+=I,64&A){t.msg="invalid distance code",n.mode=p;break}n.offset=P,n.extra=15&A,n.mode=24;case 24:if(n.extra){for(L=n.extra;w<L;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=p;break}n.mode=25;case 25:if(0===b)break t;if(T=E-b,n.offset>T){if((T=n.offset-T)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=p;break}T>n.wnext?(T-=n.wnext,C=n.wsize-T):C=n.wnext-T,T>n.length&&(T=n.length),O=n.window}else O=f,C=_-n.offset,T=n.length;T>b&&(T=b),b-=T,n.length-=T;do{f[_++]=O[C++]}while(--T);0===n.length&&(n.mode=21);break;case 26:if(0===b)break t;f[_++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;w<32;){if(0===y)break t;y--,v|=d[g++]<<w,w+=8}if(E-=b,t.total_out+=E,n.total+=E,E&&(t.adler=n.check=n.flags?s(n.check,f,E,_-E):r(n.check,f,E,_-E)),E=b,(n.flags?v:m(v))!==n.check){t.msg="incorrect data check",n.mode=p;break}v=0,w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;w<32;){if(0===y)break t;y--,v+=d[g++]<<w,w+=8}if(v!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=p;break}v=0,w=0}n.mode=29;case 29:B=1;break t;case p:B=-3;break t;case 31:return-4;default:return l}return t.next_out=_,t.avail_out=b,t.next_in=g,t.avail_in=y,n.hold=v,n.bits=w,(n.wsize||E!==t.avail_out&&n.mode<p&&(n.mode<27||4!==e))&&k(t,t.output,t.next_out,E-t.avail_out)?(n.mode=31,-4):(x-=t.avail_in,E-=t.avail_out,t.total_in+=x,t.total_out+=E,n.total+=E,n.wrap&&E&&(t.adler=n.check=n.flags?s(n.check,f,E,t.next_out-E):r(n.check,f,E,t.next_out-E)),t.data_type=n.bits+(n.last?64:0)+(n.mode===u?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===E||4===e)&&B===c&&(B=-5),B)},e.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,c},e.inflateGetHeader=function(t,e){var n;return t&&t.state&&2&(n=t.state).wrap?(n.head=e,e.done=!1,c):l},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&r(1,e,i,0)!==n.check?-3:k(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,c):l},e.inflateInfo="pako inflate (from Nodeca project)"},1998:(t,e,n)=>{"use strict";var i=n(9805),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,c,l,h,u,p){var d,f,m,g,_,y,b,v,w,x=p.bits,E=0,S=0,k=0,T=0,C=0,O=0,I=0,A=0,P=0,N=0,M=null,D=0,R=new i.Buf16(16),B=new i.Buf16(16),F=null,L=0;for(E=0;E<=15;E++)R[E]=0;for(S=0;S<c;S++)R[e[n+S]]++;for(C=x,T=15;T>=1&&0===R[T];T--);if(C>T&&(C=T),0===T)return l[h++]=20971520,l[h++]=20971520,p.bits=1,0;for(k=1;k<T&&0===R[k];k++);for(C<k&&(C=k),A=1,E=1;E<=15;E++)if(A<<=1,(A-=R[E])<0)return-1;if(A>0&&(0===t||1!==T))return-1;for(B[1]=0,E=1;E<15;E++)B[E+1]=B[E]+R[E];for(S=0;S<c;S++)0!==e[n+S]&&(u[B[e[n+S]]++]=S);if(0===t?(M=F=u,y=19):1===t?(M=r,D-=257,F=s,L-=257,y=256):(M=o,F=a,y=-1),N=0,S=0,E=k,_=h,O=C,I=0,m=-1,g=(P=1<<C)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){b=E-I,u[S]<y?(v=0,w=u[S]):u[S]>y?(v=F[L+u[S]],w=M[D+u[S]]):(v=96,w=0),d=1<<E-I,k=f=1<<O;do{l[_+(N>>I)+(f-=d)]=b<<24|v<<16|w}while(0!==f);for(d=1<<E-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,S++,0==--R[E]){if(E===T)break;E=e[n+u[S]]}if(E>C&&(N&g)!==m){for(0===I&&(I=C),_+=k,A=1<<(O=E-I);O+I<T&&!((A-=R[O+I])<=0);)O++,A<<=1;if(P+=1<<O,1===t&&P>852||2===t&&P>592)return 1;l[m=N&g]=C<<24|O<<16|_-h}}return 0!==N&&(l[_+N]=E-I<<24|64<<16),p.bits=C,0}},4674:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665:(t,e,n)=>{"use strict";var i=n(9805);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var s=256,o=286,a=30,c=15,l=16,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);r(f);var m=new Array(60);r(m);var g=new Array(512);r(g);var _=new Array(256);r(_);var y=new Array(29);r(y);var b,v,w,x=new Array(a);function E(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function k(t){return t<256?g[t]:g[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function C(t,e,n){t.bi_valid>l-n?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>l-t.bi_valid,t.bi_valid+=n-l):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function O(t,e,n){C(t,n[2*e],n[2*e+1])}function I(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function A(t,e,n){var i,r,s=new Array(c+1),o=0;for(i=1;i<=c;i++)s[i]=o=o+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=I(s[a]++,a))}}function P(t){var e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function N(t){t.bi_valid>8?T(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function M(t,e,n,i){var r=2*e,s=2*n;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]}function D(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&M(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!M(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function R(t,e,n){var i,r,o,a,c=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],r=t.pending_buf[t.l_buf+c],c++,0===i?O(t,r,e):(O(t,(o=_[r])+s+1,e),0!==(a=h[o])&&C(t,r-=y[o],a),O(t,o=k(--i),n),0!==(a=u[o])&&C(t,i-=x[o],a))}while(c<t.last_lit);O(t,256,e)}function B(t,e){var n,i,r,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==s[2*n]?(t.heap[++t.heap_len]=h=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=o[2*r+1]);for(e.max_code=h,n=t.heap_len>>1;n>=1;n--)D(t,s,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],D(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,s[2*r]=s[2*n]+s[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,s[2*n+1]=s[2*i+1]=r,t.heap[1]=r++,D(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,s,o,a,l=e.dyn_tree,h=e.max_code,u=e.stat_desc.static_tree,p=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,m=e.stat_desc.max_length,g=0;for(s=0;s<=c;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(s=l[2*l[2*(i=t.heap[n])+1]+1]+1)>m&&(s=m,g++),l[2*i+1]=s,i>h||(t.bl_count[s]++,o=0,i>=f&&(o=d[i-f]),a=l[2*i],t.opt_len+=a*(s+o),p&&(t.static_len+=a*(u[2*i+1]+o)));if(0!==g){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,g-=2}while(g>0);for(s=m;0!==s;s--)for(i=t.bl_count[s];0!==i;)(r=t.heap[--n])>h||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),i--)}}(t,e),A(s,h,t.bl_count)}function F(t,e,n){var i,r,s=-1,o=e[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=e[2*(i+1)+1],++a<c&&r===o||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=r,0===o?(c=138,l=3):r===o?(c=6,l=3):(c=7,l=4))}function L(t,e,n){var i,r,s=-1,o=e[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),i=0;i<=n;i++)if(r=o,o=e[2*(i+1)+1],!(++a<c&&r===o)){if(a<l)do{O(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(O(t,r,t.bl_tree),a--),O(t,16,t.bl_tree),C(t,a-3,2)):a<=10?(O(t,17,t.bl_tree),C(t,a-3,3)):(O(t,18,t.bl_tree),C(t,a-11,7));a=0,s=r,0===o?(c=138,l=3):r===o?(c=6,l=3):(c=7,l=4)}}r(x);var U=!1;function j(t,e,n,r){C(t,0+(r?1:0),3),function(t,e,n){N(t),T(t,n),T(t,~n),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){U||(function(){var t,e,n,i,r,s=new Array(c+1);for(n=0,i=0;i<28;i++)for(y[i]=n,t=0;t<1<<h[i];t++)_[n++]=i;for(_[n-1]=i,r=0,i=0;i<16;i++)for(x[i]=r,t=0;t<1<<u[i];t++)g[r++]=i;for(r>>=7;i<a;i++)for(x[i]=r<<7,t=0;t<1<<u[i]-7;t++)g[256+r++]=i;for(e=0;e<=c;e++)s[e]=0;for(t=0;t<=143;)f[2*t+1]=8,t++,s[8]++;for(;t<=255;)f[2*t+1]=9,t++,s[9]++;for(;t<=279;)f[2*t+1]=7,t++,s[7]++;for(;t<=287;)f[2*t+1]=8,t++,s[8]++;for(A(f,287,s),t=0;t<a;t++)m[2*t+1]=5,m[2*t]=I(t,5);b=new E(f,h,257,o,c),v=new E(m,u,0,a,c),w=new E(new Array(0),p,0,19,7)}(),U=!0),t.l_desc=new S(t.dyn_ltree,b),t.d_desc=new S(t.dyn_dtree,v),t.bl_desc=new S(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,P(t)},e._tr_stored_block=j,e._tr_flush_block=function(t,e,n,i){var r,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<s;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),B(t,t.l_desc),B(t,t.d_desc),a=function(t){var e;for(F(t,t.dyn_ltree,t.l_desc.max_code),F(t,t.dyn_dtree,t.d_desc.max_code),B(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*d[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?j(t,e,n,i):4===t.strategy||o===r?(C(t,2+(i?1:0),3),R(t,f,m)):(C(t,4+(i?1:0),3),function(t,e,n,i){var r;for(C(t,e-257,5),C(t,n-1,5),C(t,i-4,4),r=0;r<i;r++)C(t,t.bl_tree[2*d[r]+1],3);L(t,t.dyn_ltree,e-1),L(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),R(t,t.dyn_ltree,t.dyn_dtree)),P(t),i&&N(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(_[n]+s+1)]++,t.dyn_dtree[2*k(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){C(t,2,3),O(t,256,f),function(t){16===t.bi_valid?(T(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},4442:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4361:t=>{function e(t,e){if(!(t=t.replace(/\t+/g," ").trim()))return null;var i=t.indexOf(" ");if(-1===i)throw new Error("no named row at line "+e);var r=t.substring(0,i);t=(t=(t=(t=t.substring(i+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map((function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)}));for(var s=[],o=0;o<t.length;o++){var a=t[o];0===o?s.push({key:a[0],data:""}):o===t.length-1?s[s.length-1].data=n(a[0]):(s[s.length-1].data=n(a[0]),s.push({key:a[1],data:""}))}var c={key:r,data:{}};return s.forEach((function(t){c.data[t.key]=t.data})),c}function n(t){return t&&0!==t.length?0===t.indexOf('"')||0===t.indexOf("'")?t.substring(1,t.length-1):-1!==t.indexOf(",")?function(t){return t.split(",").map((function(t){return parseInt(t,10)}))}(t):parseInt(t,10):""}t.exports=function(t){if(!t)throw new Error("no data provided");var n={pages:[],chars:[],kernings:[]},i=(t=t.toString().trim()).split(/\r\n?|\n/g);if(0===i.length)throw new Error("no data in BMFont file");for(var r=0;r<i.length;r++){var s=e(i[r],r);if(s)if("page"===s.key){if("number"!=typeof s.data.id)throw new Error("malformed file at line "+r+" -- needs page id=N");if("string"!=typeof s.data.file)throw new Error("malformed file at line "+r+' -- needs page file="path"');n.pages[s.data.id]=s.data.file}else"chars"===s.key||"kernings"===s.key||("char"===s.key?n.chars.push(s.data):"kerning"===s.key?n.kernings.push(s.data):n[s.key]=s.data)}return n}},791:t=>{var e=[66,77,70];function n(t,e,n){if(n>e.length-1)return 0;var r=e.readUInt8(n++),s=e.readInt32LE(n);switch(n+=4,r){case 1:t.info=function(t,e){var n={};n.size=t.readInt16LE(e);var r=t.readUInt8(e+2);return n.smooth=r>>7&1,n.unicode=r>>6&1,n.italic=r>>5&1,n.bold=r>>4&1,r>>3&1&&(n.fixedHeight=1),n.charset=t.readUInt8(e+3)||"",n.stretchH=t.readUInt16LE(e+4),n.aa=t.readUInt8(e+6),n.padding=[t.readInt8(e+7),t.readInt8(e+8),t.readInt8(e+9),t.readInt8(e+10)],n.spacing=[t.readInt8(e+11),t.readInt8(e+12)],n.outline=t.readUInt8(e+13),n.face=function(t,e){return i(t,e).toString("utf8")}(t,e+14),n}(e,n);break;case 2:t.common=function(t,e){var n={};return n.lineHeight=t.readUInt16LE(e),n.base=t.readUInt16LE(e+2),n.scaleW=t.readUInt16LE(e+4),n.scaleH=t.readUInt16LE(e+6),n.pages=t.readUInt16LE(e+8),t.readUInt8(e+10),n.packed=0,n.alphaChnl=t.readUInt8(e+11),n.redChnl=t.readUInt8(e+12),n.greenChnl=t.readUInt8(e+13),n.blueChnl=t.readUInt8(e+14),n}(e,n);break;case 3:t.pages=function(t,e,n){for(var r=[],s=i(t,e),o=s.length+1,a=n/o,c=0;c<a;c++)r[c]=t.slice(e,e+s.length).toString("utf8"),e+=o;return r}(e,n,s);break;case 4:t.chars=function(t,e,n){for(var i=[],r=n/20,s=0;s<r;s++){var o={},a=20*s;o.id=t.readUInt32LE(e+0+a),o.x=t.readUInt16LE(e+4+a),o.y=t.readUInt16LE(e+6+a),o.width=t.readUInt16LE(e+8+a),o.height=t.readUInt16LE(e+10+a),o.xoffset=t.readInt16LE(e+12+a),o.yoffset=t.readInt16LE(e+14+a),o.xadvance=t.readInt16LE(e+16+a),o.page=t.readUInt8(e+18+a),o.chnl=t.readUInt8(e+19+a),i[s]=o}return i}(e,n,s);break;case 5:t.kernings=function(t,e,n){for(var i=[],r=n/10,s=0;s<r;s++){var o={},a=10*s;o.first=t.readUInt32LE(e+0+a),o.second=t.readUInt32LE(e+4+a),o.amount=t.readInt16LE(e+8+a),i[s]=o}return i}(e,n,s)}return 5+s}function i(t,e){for(var n=e;n<t.length&&0!==t[n];n++);return t.slice(e,n)}t.exports=function(t){if(t.length<6)throw new Error("invalid buffer length for BMFont");var i=e.every((function(e,n){return t.readUInt8(n)===e}));if(!i)throw new Error("BMFont missing BMF byte header");var r=3;if(t.readUInt8(r++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var s={kernings:[],chars:[]},o=0;o<5;o++)r+=n(s,t,r);return s}},3835:(t,e,n)=>{var i=n(8805),r=n(5272);t.exports=function(t){t=t.toString().trim();var e={pages:[],chars:[],kernings:[]};return i.parseString(t,(function(t,n){if(t)throw t;if(!n.font)throw"XML bitmap font doesn't have <font> root";n=n.font,e.common=r(n.common[0].$),e.info=r(n.info[0].$);for(var i=0;i<n.pages.length;i++){var s=n.pages[i].page[0].$;if(void 0===s.id)throw new Error("malformed file -- needs page id=N");if("string"!=typeof s.file)throw new Error('malformed file -- needs page file="path"');e.pages[parseInt(s.id,10)]=s.file}if(n.chars){var o=n.chars[0].char||[];for(i=0;i<o.length;i++)e.chars.push(r(o[i].$))}if(n.kernings){var a=n.kernings[0].kerning||[];for(i=0;i<a.length;i++)e.kernings.push(r(a[i].$))}})),e}},5272:t=>{var e="chasrset";t.exports=function(t){for(var n in e in t&&(t.charset=t[e],delete t[e]),t)"face"!==n&&"charset"!==n&&(t[n]="padding"===n||"spacing"===n?t[n].split(",").map((function(t){return parseInt(t,10)})):parseInt(t[n],10));return t}},9140:(t,e)=>{e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var s=n[i].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}},4258:t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var i,r,s=t,o=t.indexOf("["),a=t.indexOf("]");-1!=o&&-1!=a&&(t=t.substring(0,o)+t.substring(o,a).replace(/:/g,";")+t.substring(a,t.length));for(var c,l,h=e.exec(t||""),u={},p=14;p--;)u[n[p]]=h[p]||"";return-1!=o&&-1!=a&&(u.source=s,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=(i=u.path,r=i.replace(/\/{2,9}/g,"/").split("/"),"/"!=i.substr(0,1)&&0!==i.length||r.splice(0,1),"/"==i.substr(i.length-1,1)&&r.splice(r.length-1,1),r),u.queryKey=(c=u.query,l={},c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(l[e]=n)})),l),u}},5802:(t,e,n)=>{"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(8611),s=n(5692),o=n(7016),a=n(3480),c=n(3106),l=n(9023),h=function(t,e){if("string"!=typeof t&&!t.hasOwnProperty("url"))throw new Error("Missing url option from options for request method.");var n="object"===(void 0===t?"undefined":i(t))?o.parse(t.url):o.parse(t),l={hostname:n.hostname,port:n.port||("http:"===n.protocol.toLowerCase()?80:443),path:n.path,method:"GET",headers:{},auth:n.auth||null,parse:"none",stream:!1};if("object"===(void 0===t?"undefined":i(t))&&(l=Object.assign(l,t)),l.port=Number(l.port),l.hasOwnProperty("timeout")&&delete l.timeout,!0===l.compressed&&(l.headers["accept-encoding"]="gzip, deflate"),t.hasOwnProperty("form")){if("object"!==i(t.form))throw new Error("phin 'form' option must be of type Object if present.");var h=a.stringify(t.form);l.headers["Content-Type"]="application/x-www-form-urlencoded",l.headers["Content-Length"]=Buffer.byteLength(h),t.data=h}var u=void 0,p=function(t){var n=t;!0===l.compressed&&("gzip"===t.headers["content-encoding"]?n=t.pipe(c.createGunzip()):"deflate"===t.headers["content-encoding"]&&(n=t.pipe(c.createInflate()))),!0===l.stream?(t.stream=n,e&&e(null,t)):(t.body=new Buffer([]),n.on("data",(function(e){t.body=Buffer.concat([t.body,e])})),n.on("end",(function(){if(e){if("json"===l.parse)try{t.body=JSON.parse(t.body.toString())}catch(n){return void e("Invalid JSON received.",t)}e(null,t)}})))};switch(n.protocol.toLowerCase()){case"http:":u=r.request(l,p);break;case"https:":u=s.request(l,p);break;default:return void(e&&e(new Error("Invalid / unknown URL protocol. Expected HTTP or HTTPS."),null))}if("number"==typeof t.timeout&&u.setTimeout(t.timeout,(function(){u.abort(),e&&e(new Error("Timeout has been reached."),null),e=null})),u.on("error",(function(t){e&&e(t,null)})),t.hasOwnProperty("data")){var d=t.data;if(!(t.data instanceof Buffer)&&"object"===i(t.data))if("application/x-www-form-urlencoded"===(l.headers["content-type"]||l.headers["Content-Type"]))d=a.stringify(t.data);else try{d=JSON.stringify(t.data)}catch(t){e&&e(new Error("Couldn't stringify object. (Likely due to a circular reference.)"),null)}u.write(d)}u.end()};h.promisified=function(t,e){return new Promise((function(e,n){h(t,(function(t,i){t?n(t):e(i)}))}))},l.promisify&&(h[l.promisify.custom]=h.promisified),t.exports=h},8160:t=>{"use strict";function e(t,i,r,s,o,a){for(var c,l,h,u,p=Math.max(i-1,0),d=Math.max(r-1,0),f=Math.min(i+1,s-1),m=Math.min(r+1,o-1),g=4*(r*s+i),_=0,y=0,b=0,v=0,w=0,x=p;x<=f;x++)for(var E=d;E<=m;E++)if(x!==i||E!==r){var S=n(t,t,g,4*(E*s+x),!0);if(0===S?_++:S<0?b++:S>0&&y++,_>2)return!1;a&&(S<v&&(v=S,c=x,l=E),S>w&&(w=S,h=x,u=E))}return!a||0!==b&&0!==y&&(!e(t,c,l,s,o)&&!e(a,c,l,s,o)||!e(t,h,u,s,o)&&!e(a,h,u,s,o))}function n(t,e,n,a,c){var l=t[n+3]/255,h=e[a+3]/255,u=o(t[n+0],l),p=o(t[n+1],l),d=o(t[n+2],l),f=o(e[a+0],h),m=o(e[a+1],h),g=o(e[a+2],h),_=i(u,p,d)-i(f,m,g);if(c)return _;var y=r(u,p,d)-r(f,m,g),b=s(u,p,d)-s(f,m,g);return.5053*_*_+.299*y*y+.1957*b*b}function i(t,e,n){return.29889531*t+.58662247*e+.11448223*n}function r(t,e,n){return.59597799*t-.2741761*e-.32180189*n}function s(t,e,n){return.21147017*t-.52261711*e+.31114694*n}function o(t,e){return 255+(t-255)*e}function a(t,e,n,i,r){t[e+0]=n,t[e+1]=i,t[e+2]=r,t[e+3]=255}t.exports=function(t,r,s,c,l,h){h||(h={});for(var u=void 0===h.threshold?.1:h.threshold,p=35215*u*u,d=0,f=0;f<l;f++)for(var m=0;m<c;m++){var g=4*(f*c+m);if(n(t,r,g,g)>p)h.includeAA||!e(t,m,f,c,l,r)&&!e(r,m,f,c,l,t)?(s&&a(s,g,255,0,0),d++):s&&a(s,g,255,255,0);else if(s){var _=o((void 0,v=(y=t)[(b=g)+3]/255,i(o(y[b+0],v),o(y[b+1],v),o(y[b+2],v))),.1);a(s,g,_,_,_)}}var y,b,v;return d}},5913:(t,e,n)=>{"use strict";var i=n(2582),r=[function(){},function(t,e,n,i){if(i===e.length)throw new Error("Ran out of data");var r=e[i];t[n]=r,t[n+1]=r,t[n+2]=r,t[n+3]=255},function(t,e,n,i){if(i+1>=e.length)throw new Error("Ran out of data");var r=e[i];t[n]=r,t[n+1]=r,t[n+2]=r,t[n+3]=e[i+1]},function(t,e,n,i){if(i+2>=e.length)throw new Error("Ran out of data");t[n]=e[i],t[n+1]=e[i+1],t[n+2]=e[i+2],t[n+3]=255},function(t,e,n,i){if(i+3>=e.length)throw new Error("Ran out of data");t[n]=e[i],t[n+1]=e[i+1],t[n+2]=e[i+2],t[n+3]=e[i+3]}],s=[function(){},function(t,e,n,i){var r=e[0];t[n]=r,t[n+1]=r,t[n+2]=r,t[n+3]=i},function(t,e,n){var i=e[0];t[n]=i,t[n+1]=i,t[n+2]=i,t[n+3]=e[1]},function(t,e,n,i){t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=i},function(t,e,n){t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3]}];function o(t,e,n,i,s,o){for(var a=t.width,c=t.height,l=t.index,h=0;h<c;h++)for(var u=0;u<a;u++){var p=n(u,h,l);r[i](e,s,p,o),o+=i}return o}function a(t,e,n,i,r,o){for(var a=t.width,c=t.height,l=t.index,h=0;h<c;h++){for(var u=0;u<a;u++){var p=r.get(i),d=n(u,h,l);s[i](e,p,d,o)}r.resetAfterLine()}}e.dataToBitMap=function(t,e){var n,r=e.width,s=e.height,c=e.depth,l=e.bpp,h=e.interlace;if(8!==c)var u=function(t,e){var n=[],i=0;function r(){if(i===t.length)throw new Error("Ran out of data");var r,s,o,a,c,l,h,u,p=t[i];switch(i++,e){default:throw new Error("unrecognised depth");case 16:h=t[i],i++,n.push((p<<8)+h);break;case 4:h=15&p,u=p>>4,n.push(u,h);break;case 2:c=3&p,l=p>>2&3,h=p>>4&3,u=p>>6&3,n.push(u,h,l,c);break;case 1:r=1&p,s=p>>1&1,o=p>>2&1,a=p>>3&1,c=p>>4&1,l=p>>5&1,h=p>>6&1,u=p>>7&1,n.push(u,h,l,c,a,o,s,r)}}return{get:function(t){for(;n.length<t;)r();var e=n.slice(0,t);return n=n.slice(t),e},resetAfterLine:function(){n.length=0},end:function(){if(i!==t.length)throw new Error("extra data found")}}}(t,c);n=c<=8?new Buffer(r*s*4):new Uint16Array(r*s*4);var p,d,f=Math.pow(2,c)-1,m=0;if(h)p=i.getImagePasses(r,s),d=i.getInterlaceIterator(r,s);else{var g=0;d=function(){var t=g;return g+=4,t},p=[{width:r,height:s}]}for(var _=0;_<p.length;_++)8===c?m=o(p[_],n,d,l,t,m):a(p[_],n,d,l,u,f);if(8===c){if(m!==t.length)throw new Error("extra data found")}else u.end();return n}},1638:(t,e,n)=>{"use strict";var i=n(6402);t.exports=function(t,e,n,r){var s,o=-1!==[i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(r.colorType);if(r.colorType===r.inputColorType){var a=(s=new ArrayBuffer(2),new DataView(s).setInt16(0,256,!0),256!==new Int16Array(s)[0]);if(8===r.bitDepth||16===r.bitDepth&&a)return t}var c=16!==r.bitDepth?t:new Uint16Array(t.buffer),l=255,h=i.COLORTYPE_TO_BPP_MAP[r.inputColorType];4!==h||r.inputHasAlpha||(h=3);var u=i.COLORTYPE_TO_BPP_MAP[r.colorType];16===r.bitDepth&&(l=65535,u*=2);var p=new Buffer(e*n*u),d=0,f=0,m=r.bgColor||{};function g(){var t,e,n,s=l;switch(r.inputColorType){case i.COLORTYPE_COLOR_ALPHA:s=c[d+3],t=c[d],e=c[d+1],n=c[d+2];break;case i.COLORTYPE_COLOR:t=c[d],e=c[d+1],n=c[d+2];break;case i.COLORTYPE_ALPHA:s=c[d+1],e=t=c[d],n=t;break;case i.COLORTYPE_GRAYSCALE:e=t=c[d],n=t;break;default:throw new Error("input color type:"+r.inputColorType+" is not supported at present")}return r.inputHasAlpha&&(o||(s/=l,t=Math.min(Math.max(Math.round((1-s)*m.red+s*t),0),l),e=Math.min(Math.max(Math.round((1-s)*m.green+s*e),0),l),n=Math.min(Math.max(Math.round((1-s)*m.blue+s*n),0),l))),{red:t,green:e,blue:n,alpha:s}}void 0===m.red&&(m.red=l),void 0===m.green&&(m.green=l),void 0===m.blue&&(m.blue=l);for(var _=0;_<n;_++)for(var y=0;y<e;y++){var b=g();switch(r.colorType){case i.COLORTYPE_COLOR_ALPHA:case i.COLORTYPE_COLOR:8===r.bitDepth?(p[f]=b.red,p[f+1]=b.green,p[f+2]=b.blue,o&&(p[f+3]=b.alpha)):(p.writeUInt16BE(b.red,f),p.writeUInt16BE(b.green,f+2),p.writeUInt16BE(b.blue,f+4),o&&p.writeUInt16BE(b.alpha,f+6));break;case i.COLORTYPE_ALPHA:case i.COLORTYPE_GRAYSCALE:var v=(b.red+b.green+b.blue)/3;8===r.bitDepth?(p[f]=v,o&&(p[f+1]=b.alpha)):(p.writeUInt16BE(v,f),o&&p.writeUInt16BE(b.alpha,f+2));break;default:throw new Error("unrecognised color Type "+r.colorType)}d+=h,f+=u}return p}},9402:(t,e,n)=>{"use strict";var i=n(9023),r=n(2203),s=t.exports=function(){r.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(s,r),s.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e}),process.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},s.prototype.write=function(t,e){return this.writable?(n=Buffer.isBuffer(t)?t:new Buffer(t,e||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",new Error("Stream not writable")),!1);var n},s.prototype.end=function(t,e){t&&this.write(t,e),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._processReadAllowingLess=function(t){this._reads.shift();var e=this._buffers[0];e.length>t.length?(this._buffered-=t.length,this._buffers[0]=e.slice(t.length),t.func.call(this,e.slice(0,t.length))):(this._buffered-=e.length,this._buffers.shift(),t.func.call(this,e))},s.prototype._processRead=function(t){this._reads.shift();for(var e=0,n=0,i=new Buffer(t.length);e<t.length;){var r=this._buffers[n++],s=Math.min(r.length,t.length-e);r.copy(i,e,0,s),e+=s,s!==r.length&&(this._buffers[--n]=r.slice(s))}n>0&&this._buffers.splice(0,n),this._buffered-=t.length,t.func.call(this,i)},s.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var t=this._reads[0];if(t.allowLess)this._processReadAllowingLess(t);else{if(!(this._buffered>=t.length))break;this._processRead(t)}}this._buffers&&!this.writable&&this._end()}catch(t){this.emit("error",t)}}},6402:t=>{"use strict";t.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},7613:t=>{"use strict";var e=[];!function(){for(var t=0;t<256;t++){for(var n=t,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}}();var n=t.exports=function(){this._crc=-1};n.prototype.write=function(t){for(var n=0;n<t.length;n++)this._crc=e[255&(this._crc^t[n])]^this._crc>>>8;return!0},n.prototype.crc32=function(){return~this._crc},n.crc32=function(t){for(var n=-1,i=0;i<t.length;i++)n=e[255&(n^t[i])]^n>>>8;return~n}},947:(t,e,n)=>{"use strict";var i=n(276),r={0:function(t,e,n,i,r){for(var s=0;s<n;s++)i[r+s]=t[e+s]},1:function(t,e,n,i,r,s){for(var o=0;o<n;o++){var a=o>=s?t[e+o-s]:0,c=t[e+o]-a;i[r+o]=c}},2:function(t,e,n,i,r){for(var s=0;s<n;s++){var o=e>0?t[e+s-n]:0,a=t[e+s]-o;i[r+s]=a}},3:function(t,e,n,i,r,s){for(var o=0;o<n;o++){var a=o>=s?t[e+o-s]:0,c=e>0?t[e+o-n]:0,l=t[e+o]-(a+c>>1);i[r+o]=l}},4:function(t,e,n,r,s,o){for(var a=0;a<n;a++){var c=a>=o?t[e+a-o]:0,l=e>0?t[e+a-n]:0,h=e>0&&a>=o?t[e+a-(n+o)]:0,u=t[e+a]-i(c,l,h);r[s+a]=u}}},s={0:function(t,e,n){for(var i=0,r=e+n,s=e;s<r;s++)i+=Math.abs(t[s]);return i},1:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=s>=i?t[e+s-i]:0,a=t[e+s]-o;r+=Math.abs(a)}return r},2:function(t,e,n){for(var i=0,r=e+n,s=e;s<r;s++){var o=e>0?t[s-n]:0,a=t[s]-o;i+=Math.abs(a)}return i},3:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=s>=i?t[e+s-i]:0,a=e>0?t[e+s-n]:0,c=t[e+s]-(o+a>>1);r+=Math.abs(c)}return r},4:function(t,e,n,r){for(var s=0,o=0;o<n;o++){var a=o>=r?t[e+o-r]:0,c=e>0?t[e+o-n]:0,l=e>0&&o>=r?t[e+o-(n+r)]:0,h=t[e+o]-i(a,c,l);s+=Math.abs(h)}return s}};t.exports=function(t,e,n,i,o){var a;if("filterType"in i&&-1!==i.filterType){if("number"!=typeof i.filterType)throw new Error("unrecognised filter types");a=[i.filterType]}else a=[0,1,2,3,4];16===i.bitDepth&&(o*=2);for(var c=e*o,l=0,h=0,u=new Buffer((c+1)*n),p=a[0],d=0;d<n;d++){if(a.length>1)for(var f=1/0,m=0;m<a.length;m++){var g=s[a[m]](t,h,c,o);g<f&&(p=a[m],f=g)}u[l]=p,l++,r[p](t,h,c,u,l,o),l+=c,h+=c}return u}},2170:(t,e,n)=>{"use strict";var i=n(9023),r=n(9402),s=n(695),o=t.exports=function(t){r.call(this);var e=[],n=this;this._filter=new s(t,{read:this.read.bind(this),write:function(t){e.push(t)},complete:function(){n.emit("complete",Buffer.concat(e))}}),this._filter.start()};i.inherits(o,r)},6479:(t,e,n)=>{"use strict";var i=n(1402),r=n(695);e.process=function(t,e){var n=[],s=new i(t);return new r(e,{read:s.read.bind(s),write:function(t){n.push(t)},complete:function(){}}).start(),s.process(),Buffer.concat(n)}},695:(t,e,n)=>{"use strict";var i=n(2582),r=n(276);function s(t,e,n){var i=t*e;return 8!==n&&(i=Math.ceil(i/(8/n))),i}var o=t.exports=function(t,e){var n=t.width,r=t.height,o=t.interlace,a=t.bpp,c=t.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],o)for(var l=i.getImagePasses(n,r),h=0;h<l.length;h++)this._images.push({byteWidth:s(l[h].width,a,c),height:l[h].height,lineIndex:0});else this._images.push({byteWidth:s(n,a,c),height:r,lineIndex:0});this._xComparison=8===c?a:16===c?2*a:1};o.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},o.prototype._unFilterType1=function(t,e,n){for(var i=this._xComparison,r=i-1,s=0;s<n;s++){var o=t[1+s],a=s>r?e[s-i]:0;e[s]=o+a}},o.prototype._unFilterType2=function(t,e,n){for(var i=this._lastLine,r=0;r<n;r++){var s=t[1+r],o=i?i[r]:0;e[r]=s+o}},o.prototype._unFilterType3=function(t,e,n){for(var i=this._xComparison,r=i-1,s=this._lastLine,o=0;o<n;o++){var a=t[1+o],c=s?s[o]:0,l=o>r?e[o-i]:0,h=Math.floor((l+c)/2);e[o]=a+h}},o.prototype._unFilterType4=function(t,e,n){for(var i=this._xComparison,s=i-1,o=this._lastLine,a=0;a<n;a++){var c=t[1+a],l=o?o[a]:0,h=a>s?e[a-i]:0,u=a>s&&o?o[a-i]:0,p=r(h,l,u);e[a]=c+p}},o.prototype._reverseFilterLine=function(t){var e,n=t[0],i=this._images[this._imageIndex],r=i.byteWidth;if(0===n)e=t.slice(1,r+1);else switch(e=new Buffer(r),n){case 1:this._unFilterType1(t,e,r);break;case 2:this._unFilterType2(t,e,r);break;case 3:this._unFilterType3(t,e,r);break;case 4:this._unFilterType4(t,e,r);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(e),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=e,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},4721:t=>{"use strict";t.exports=function(t,e){var n=e.depth,i=e.width,r=e.height,s=e.colorType,o=e.transColor,a=e.palette,c=t;return 3===s?function(t,e,n,i,r){for(var s=0,o=0;o<i;o++)for(var a=0;a<n;a++){var c=r[t[s]];if(!c)throw new Error("index "+t[s]+" not in palette");for(var l=0;l<4;l++)e[s+l]=c[l];s+=4}}(t,c,i,r,a):(o&&function(t,e,n,i,r){for(var s=0,o=0;o<i;o++)for(var a=0;a<n;a++){var c=!1;if(1===r.length?r[0]===t[s]&&(c=!0):r[0]===t[s]&&r[1]===t[s+1]&&r[2]===t[s+2]&&(c=!0),c)for(var l=0;l<4;l++)e[s+l]=0;s+=4}}(t,c,i,r,o),8!==n&&(16===n&&(c=new Buffer(i*r*4)),function(t,e,n,i,r){for(var s=Math.pow(2,r)-1,o=0,a=0;a<i;a++)for(var c=0;c<n;c++){for(var l=0;l<4;l++)e[o+l]=Math.floor(255*t[o+l]/s+.5);o+=4}}(t,c,i,r,n))),c}},2582:(t,e)=>{"use strict";var n=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];e.getImagePasses=function(t,e){for(var i=[],r=t%8,s=e%8,o=(t-r)/8,a=(e-s)/8,c=0;c<n.length;c++){for(var l=n[c],h=o*l.x.length,u=a*l.y.length,p=0;p<l.x.length&&l.x[p]<r;p++)h++;for(p=0;p<l.y.length&&l.y[p]<s;p++)u++;h>0&&u>0&&i.push({width:h,height:u,index:c})}return i},e.getInterlaceIterator=function(t){return function(e,i,r){var s=e%n[r].x.length,o=(e-s)/n[r].x.length*8+n[r].x[s],a=i%n[r].y.length;return 4*o+((i-a)/n[r].y.length*8+n[r].y[a])*t*4}}},8:(t,e,n)=>{"use strict";var i=n(9023),r=n(2203),s=n(6402),o=n(3769),a=t.exports=function(t){r.call(this);var e=t||{};this._packer=new o(e),this._deflate=this._packer.createDeflate(),this.readable=!0};i.inherits(a,r),a.prototype.pack=function(t,e,n,i){this.emit("data",new Buffer(s.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,n)),i&&this.emit("data",this._packer.packGAMA(i));var r=this._packer.filterData(t,e,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(t){this.emit("data",this._packer.packIDAT(t))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(r)}},1497:(t,e,n)=>{"use strict";var i=!0,r=n(3106);r.deflateSync||(i=!1);var s=n(6402),o=n(3769);t.exports=function(t,e){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var n=new o(e||{}),a=[];a.push(new Buffer(s.PNG_SIGNATURE)),a.push(n.packIHDR(t.width,t.height)),t.gamma&&a.push(n.packGAMA(t.gamma));var c=n.filterData(t.data,t.width,t.height),l=r.deflateSync(c,n.getDeflateOptions());if(c=null,!l||!l.length)throw new Error("bad png - invalid compressed data response");return a.push(n.packIDAT(l)),a.push(n.packIEND()),Buffer.concat(a)}},3769:(t,e,n)=>{"use strict";var i=n(6402),r=n(7613),s=n(1638),o=n(947),a=n(3106),c=t.exports=function(t){if(this._options=t,t.deflateChunkSize=t.deflateChunkSize||32768,t.deflateLevel=null!=t.deflateLevel?t.deflateLevel:9,t.deflateStrategy=null!=t.deflateStrategy?t.deflateStrategy:3,t.inputHasAlpha=null==t.inputHasAlpha||t.inputHasAlpha,t.deflateFactory=t.deflateFactory||a.createDeflate,t.bitDepth=t.bitDepth||8,t.colorType="number"==typeof t.colorType?t.colorType:i.COLORTYPE_COLOR_ALPHA,t.inputColorType="number"==typeof t.inputColorType?t.inputColorType:i.COLORTYPE_COLOR_ALPHA,-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(t.colorType))throw new Error("option color type:"+t.colorType+" is not supported at present");if(-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(t.inputColorType))throw new Error("option input color type:"+t.inputColorType+" is not supported at present");if(8!==t.bitDepth&&16!==t.bitDepth)throw new Error("option bit depth:"+t.bitDepth+" is not supported at present")};c.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},c.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},c.prototype.filterData=function(t,e,n){var r=s(t,e,n,this._options),a=i.COLORTYPE_TO_BPP_MAP[this._options.colorType];return o(r,e,n,this._options,a)},c.prototype._packChunk=function(t,e){var n=e?e.length:0,i=new Buffer(n+12);return i.writeUInt32BE(n,0),i.writeUInt32BE(t,4),e&&e.copy(i,8),i.writeInt32BE(r.crc32(i.slice(4,i.length-4)),i.length-4),i},c.prototype.packGAMA=function(t){var e=new Buffer(4);return e.writeUInt32BE(Math.floor(t*i.GAMMA_DIVISION),0),this._packChunk(i.TYPE_gAMA,e)},c.prototype.packIHDR=function(t,e){var n=new Buffer(13);return n.writeUInt32BE(t,0),n.writeUInt32BE(e,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(i.TYPE_IHDR,n)},c.prototype.packIDAT=function(t){return this._packChunk(i.TYPE_IDAT,t)},c.prototype.packIEND=function(){return this._packChunk(i.TYPE_IEND,null)}},276:t=>{"use strict";t.exports=function(t,e,n){var i=t+e-n,r=Math.abs(i-t),s=Math.abs(i-e),o=Math.abs(i-n);return r<=s&&r<=o?t:s<=o?e:n}},7089:(t,e,n)=>{"use strict";var i=n(9023),r=n(3106),s=n(9402),o=n(2170),a=n(336),c=n(5913),l=n(4721),h=t.exports=function(t){s.call(this),this._parser=new a(t,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=t,this.writable=!0,this._parser.start()};i.inherits(h,s),h.prototype._handleError=function(t){this.emit("error",t),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},h.prototype._inflateData=function(t){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=r.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{var e=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,n=Math.max(e,r.Z_MIN_CHUNK);this._inflate=r.createInflate({chunkSize:n});var i=e,s=this.emit.bind(this,"error");this._inflate.on("error",(function(t){i&&s(t)})),this._filter.on("complete",this._complete.bind(this));var o=this._filter.write.bind(this._filter);this._inflate.on("data",(function(t){i&&(t.length>i&&(t=t.slice(0,i)),i-=t.length,o(t))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(t)},h.prototype._handleMetaData=function(t){this._metaData=t,this._bitmapInfo=Object.create(t),this._filter=new o(this._bitmapInfo)},h.prototype._handleTransColor=function(t){this._bitmapInfo.transColor=t},h.prototype._handlePalette=function(t){this._bitmapInfo.palette=t},h.prototype._simpleTransparency=function(){this._metaData.alpha=!0},h.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},h.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},h.prototype._complete=function(t){if(!this.errord){try{var e=c.dataToBitMap(t,this._bitmapInfo),n=l(e,this._bitmapInfo);e=null}catch(t){return void this._handleError(t)}this.emit("parsed",n)}}},4346:(t,e,n)=>{"use strict";var i=!0,r=n(3106),s=n(9874);r.deflateSync||(i=!1);var o=n(1402),a=n(6479),c=n(336),l=n(5913),h=n(4721);t.exports=function(t,e){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var n,u,p,d=[],f=new o(t),m=new c(e,{read:f.read.bind(f),error:function(t){n=t},metadata:function(t){u=t},gamma:function(t){p=t},palette:function(t){u.palette=t},transColor:function(t){u.transColor=t},inflateData:function(t){d.push(t)},simpleTransparency:function(){u.alpha=!0}});if(m.start(),f.process(),n)throw n;var g,_=Buffer.concat(d);if(d.length=0,u.interlace)g=r.inflateSync(_);else{var y=(1+(u.width*u.bpp*u.depth+7>>3))*u.height;g=s(_,{chunkSize:y,maxLength:y})}if(_=null,!g||!g.length)throw new Error("bad png - invalid inflate data response");var b=a.process(g,u);_=null;var v=l.dataToBitMap(b,u);b=null;var w=h(v,u);return u.data=w,u.gamma=p||0,u}},336:(t,e,n)=>{"use strict";var i=n(6402),r=n(7613),s=t.exports=function(t,e){this._options=t,t.checkCRC=!1!==t.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[i.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[i.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[i.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[i.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[i.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[i.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.finished=e.finished,this.simpleTransparency=e.simpleTransparency,this.headersFinished=e.headersFinished||function(){}};s.prototype.start=function(){this.read(i.PNG_SIGNATURE.length,this._parseSignature.bind(this))},s.prototype._parseSignature=function(t){for(var e=i.PNG_SIGNATURE,n=0;n<e.length;n++)if(t[n]!==e[n])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},s.prototype._parseChunkBegin=function(t){for(var e=t.readUInt32BE(0),n=t.readUInt32BE(4),s="",o=4;o<8;o++)s+=String.fromCharCode(t[o]);var a=Boolean(32&t[4]);if(this._hasIHDR||n===i.TYPE_IHDR){if(this._crc=new r,this._crc.write(new Buffer(s)),this._chunks[n])return this._chunks[n](e);a?this.read(e+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+s))}else this.error(new Error("Expected IHDR on beggining"))},s.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},s.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},s.prototype._parseChunkEnd=function(t){var e=t.readInt32BE(0),n=this._crc.crc32();this._options.checkCRC&&n!==e?this.error(new Error("Crc error - "+e+" - "+n)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},s.prototype._handleIHDR=function(t){this.read(t,this._parseIHDR.bind(this))},s.prototype._parseIHDR=function(t){this._crc.write(t);var e=t.readUInt32BE(0),n=t.readUInt32BE(4),r=t[8],s=t[9],o=t[10],a=t[11],c=t[12];if(8===r||4===r||2===r||1===r||16===r)if(s in i.COLORTYPE_TO_BPP_MAP)if(0===o)if(0===a)if(0===c||1===c){this._colorType=s;var l=i.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:n,depth:r,interlace:Boolean(c),palette:Boolean(s&i.COLORTYPE_PALETTE),color:Boolean(s&i.COLORTYPE_COLOR),alpha:Boolean(s&i.COLORTYPE_ALPHA),bpp:l,colorType:s}),this._handleChunkEnd()}else this.error(new Error("Unsupported interlace method"));else this.error(new Error("Unsupported filter method"));else this.error(new Error("Unsupported compression method"));else this.error(new Error("Unsupported color type"));else this.error(new Error("Unsupported bit depth "+r))},s.prototype._handlePLTE=function(t){this.read(t,this._parsePLTE.bind(this))},s.prototype._parsePLTE=function(t){this._crc.write(t);for(var e=Math.floor(t.length/3),n=0;n<e;n++)this._palette.push([t[3*n],t[3*n+1],t[3*n+2],255]);this.palette(this._palette),this._handleChunkEnd()},s.prototype._handleTRNS=function(t){this.simpleTransparency(),this.read(t,this._parseTRNS.bind(this))},s.prototype._parseTRNS=function(t){if(this._crc.write(t),this._colorType===i.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(t.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var e=0;e<t.length;e++)this._palette[e][3]=t[e];this.palette(this._palette)}this._colorType===i.COLORTYPE_GRAYSCALE&&this.transColor([t.readUInt16BE(0)]),this._colorType===i.COLORTYPE_COLOR&&this.transColor([t.readUInt16BE(0),t.readUInt16BE(2),t.readUInt16BE(4)]),this._handleChunkEnd()},s.prototype._handleGAMA=function(t){this.read(t,this._parseGAMA.bind(this))},s.prototype._parseGAMA=function(t){this._crc.write(t),this.gamma(t.readUInt32BE(0)/i.GAMMA_DIVISION),this._handleChunkEnd()},s.prototype._handleIDAT=function(t){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-t,this._parseIDAT.bind(this,t))},s.prototype._parseIDAT=function(t,e){if(this._crc.write(e),this._colorType===i.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(e);var n=t-e.length;n>0?this._handleIDAT(n):this._handleChunkEnd()},s.prototype._handleIEND=function(t){this.read(t,this._parseIEND.bind(this))},s.prototype._parseIEND=function(t){this._crc.write(t),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},2122:(t,e,n)=>{"use strict";var i=n(4346),r=n(1497);e.read=function(t,e){return i(t,e||{})},e.write=function(t,e){return r(t,e)}},9904:(t,e,n)=>{"use strict";var i=n(9023),r=n(2203),s=n(7089),o=n(8),a=n(2122),c=e.PNG=function(t){r.call(this),t=t||{},this.width=0|t.width,this.height=0|t.height,this.data=this.width>0&&this.height>0?new Buffer(4*this.width*this.height):null,t.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(t),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new o(t),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(c,r),c.sync=a,c.prototype.pack=function(){return this.data&&this.data.length?(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(t,e){var n,i;return e&&(n=function(t){this.removeListener("error",i),this.data=t,e(null,this)}.bind(this),i=function(t){this.removeListener("parsed",n),e(t,null)}.bind(this),this.once("parsed",n),this.once("error",i)),this.end(t),this},c.prototype.write=function(t){return this._parser.write(t),!0},c.prototype.end=function(t){this._parser.end(t)},c.prototype._metadata=function(t){this.width=t.width,this.height=t.height,this.emit("metadata",t)},c.prototype._gamma=function(t){this.gamma=t},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(t,e,n,i,r,s,o,a){if(i|=0,r|=0,s|=0,o|=0,a|=0,(n|=0)>t.width||i>t.height||n+r>t.width||i+s>t.height)throw new Error("bitblt reading outside image");if(o>e.width||a>e.height||o+r>e.width||a+s>e.height)throw new Error("bitblt writing outside image");for(var c=0;c<s;c++)t.data.copy(e.data,(a+c)*e.width+o<<2,(i+c)*t.width+n<<2,(i+c)*t.width+n+r<<2)},c.prototype.bitblt=function(t,e,n,i,r,s,o){return c.bitblt(this,t,e,n,i,r,s,o),this},c.adjustGamma=function(t){if(t.gamma){for(var e=0;e<t.height;e++)for(var n=0;n<t.width;n++)for(var i=t.width*e+n<<2,r=0;r<3;r++){var s=t.data[i+r]/255;s=Math.pow(s,1/2.2/t.gamma),t.data[i+r]=Math.round(255*s)}t.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}},9874:(t,e,n)=>{"use strict";var i=n(2613).ok,r=n(3106),s=n(9023),o=n(181).kMaxLength;function a(t){if(!(this instanceof a))return new a(t);t&&t.chunkSize<r.Z_MIN_CHUNK&&(t.chunkSize=r.Z_MIN_CHUNK),r.Inflate.call(this,t),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,t&&null!=t.maxLength&&(this._maxLength=t.maxLength)}function c(t,e){e&&process.nextTick(e),t._handle&&(t._handle.close(),t._handle=null)}function l(t,e){return function(t,e){if("string"==typeof e&&(e=Buffer.from(e)),!(e instanceof Buffer))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return null==n&&(n=r.Z_FINISH),t._processChunk(e,n)}(new a(e),t)}a.prototype._processChunk=function(t,e,n){if("function"==typeof n)return r.Inflate._processChunk.call(this,t,e,n);var s,a=this,l=t&&t.length,h=this._chunkSize-this._offset,u=this._maxLength,p=0,d=[],f=0;function m(t,e){if(!a._hadError){var n=h-e;if(i(n>=0,"have should not go down"),n>0){var r=a._buffer.slice(a._offset,a._offset+n);if(a._offset+=n,r.length>u&&(r=r.slice(0,u)),d.push(r),f+=r.length,0==(u-=r.length))return!1}return(0===e||a._offset>=a._chunkSize)&&(h=a._chunkSize,a._offset=0,a._buffer=Buffer.allocUnsafe(a._chunkSize)),0===e&&(p+=l-t,l=t,!0)}}this.on("error",(function(t){s=t})),i(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(e,t,p,l,this._buffer,this._offset,h);g=g||this._writeState}while(!this._hadError&&m(g[0],g[1]));if(this._hadError)throw s;if(f>=o)throw c(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+o.toString(16)+" bytes");var _=Buffer.concat(d,f);return c(this),_},s.inherits(a,r.Inflate),t.exports=e=l,e.Inflate=a,e.createInflate=function(t){return new a(t)},e.inflateSync=l},1402:t=>{"use strict";var e=t.exports=function(t){this._buffer=t,this._reads=[]};e.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e})},e.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var t=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=t.length||t.allowLess))break;this._reads.shift();var e=this._buffer;this._buffer=e.slice(t.length),t.func.call(this,e.slice(0,t.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},7392:t=>{"use strict";class e{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){if(this.cache.set(t,e),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[t,e]of this.oldCache.entries())this.onEviction(t,e);this.oldCache=this.cache,this.cache=new Map}}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const e=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}}t.exports=e},1169:(t,e,n)=>{"use strict";const i=n(4756);t.exports=(t={},e=i.connect)=>new Promise(((n,i)=>{let r,s=!1;const o=async()=>{await c,r.off("timeout",a),r.off("error",i),t.resolveSocket?(n({alpnProtocol:r.alpnProtocol,socket:r,timeout:s}),s&&(await Promise.resolve(),r.emit("timeout"))):(r.destroy(),n({alpnProtocol:r.alpnProtocol,timeout:s}))},a=async()=>{s=!0,o()},c=(async()=>{try{r=await e(t,o),r.on("error",i),r.once("timeout",a)}catch(t){i(t)}})()}))},4043:(t,e,n)=>{!function(t){t.parser=function(t,e){return new r(t,e)},t.SAXParser=r,t.SAXStream=o,t.createStream=function(t,e){return new o(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(e,n){if(!(this instanceof r))return new r(e,n);var s=this;!function(t){for(var e=0,n=i.length;e<n;e++)t[i[e]]=""}(s),s.q=s.c="",s.bufferCheckPosition=t.MAX_BUFFER_LENGTH,s.opt=n||{},s.opt.lowercase=s.opt.lowercase||s.opt.lowercasetags,s.looseCase=s.opt.lowercase?"toLowerCase":"toUpperCase",s.tags=[],s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.strict=!!e,s.noscript=!(!e&&!s.opt.noscript),s.state=S.BEGIN,s.strictEntities=s.opt.strictEntities,s.ENTITIES=s.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),s.attribList=[],s.opt.xmlns&&(s.ns=Object.create(u)),s.trackPosition=!1!==s.opt.position,s.trackPosition&&(s.position=s.line=s.column=0),T(s,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),r.prototype={end:function(){P(this)},write:function(e){var n=this;if(this.error)throw this.error;if(n.closed)return A(n,"Cannot write after close. Assign an onready handler.");if(null===e)return P(n);"object"==typeof e&&(e=e.toString());for(var r=0,s="";s=j(e,r++),n.c=s,s;)switch(n.trackPosition&&(n.position++,"\n"===s?(n.line++,n.column=0):n.column++),n.state){case S.BEGIN:if(n.state=S.BEGIN_WHITESPACE,"\ufeff"===s)continue;U(n,s);continue;case S.BEGIN_WHITESPACE:U(n,s);continue;case S.TEXT:if(n.sawRoot&&!n.closedRoot){for(var o=r-1;s&&"<"!==s&&"&"!==s;)(s=j(e,r++))&&n.trackPosition&&(n.position++,"\n"===s?(n.line++,n.column=0):n.column++);n.textNode+=e.substring(o,r-1)}"<"!==s||n.sawRoot&&n.closedRoot&&!n.strict?(g(s)||n.sawRoot&&!n.closedRoot||N(n,"Text data outside of root node."),"&"===s?n.state=S.TEXT_ENTITY:n.textNode+=s):(n.state=S.OPEN_WAKA,n.startTagPosition=n.position);continue;case S.SCRIPT:"<"===s?n.state=S.SCRIPT_ENDING:n.script+=s;continue;case S.SCRIPT_ENDING:"/"===s?n.state=S.CLOSE_TAG:(n.script+="<"+s,n.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===s)n.state=S.SGML_DECL,n.sgmlDecl="";else if(g(s));else if(b(p,s))n.state=S.OPEN_TAG,n.tagName=s;else if("/"===s)n.state=S.CLOSE_TAG,n.tagName="";else if("?"===s)n.state=S.PROC_INST,n.procInstName=n.procInstBody="";else{if(N(n,"Unencoded <"),n.startTagPosition+1<n.position){var l=n.position-n.startTagPosition;s=new Array(l).join(" ")+s}n.textNode+="<"+s,n.state=S.TEXT}continue;case S.SGML_DECL:(n.sgmlDecl+s).toUpperCase()===a?(C(n,"onopencdata"),n.state=S.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+s==="--"?(n.state=S.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+s).toUpperCase()===c?(n.state=S.DOCTYPE,(n.doctype||n.sawRoot)&&N(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===s?(C(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=S.TEXT):_(s)?(n.state=S.SGML_DECL_QUOTED,n.sgmlDecl+=s):n.sgmlDecl+=s;continue;case S.SGML_DECL_QUOTED:s===n.q&&(n.state=S.SGML_DECL,n.q=""),n.sgmlDecl+=s;continue;case S.DOCTYPE:">"===s?(n.state=S.TEXT,C(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=s,"["===s?n.state=S.DOCTYPE_DTD:_(s)&&(n.state=S.DOCTYPE_QUOTED,n.q=s));continue;case S.DOCTYPE_QUOTED:n.doctype+=s,s===n.q&&(n.q="",n.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:n.doctype+=s,"]"===s?n.state=S.DOCTYPE:_(s)&&(n.state=S.DOCTYPE_DTD_QUOTED,n.q=s);continue;case S.DOCTYPE_DTD_QUOTED:n.doctype+=s,s===n.q&&(n.state=S.DOCTYPE_DTD,n.q="");continue;case S.COMMENT:"-"===s?n.state=S.COMMENT_ENDING:n.comment+=s;continue;case S.COMMENT_ENDING:"-"===s?(n.state=S.COMMENT_ENDED,n.comment=I(n.opt,n.comment),n.comment&&C(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+s,n.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==s?(N(n,"Malformed comment"),n.comment+="--"+s,n.state=S.COMMENT):n.state=S.TEXT;continue;case S.CDATA:"]"===s?n.state=S.CDATA_ENDING:n.cdata+=s;continue;case S.CDATA_ENDING:"]"===s?n.state=S.CDATA_ENDING_2:(n.cdata+="]"+s,n.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===s?(n.cdata&&C(n,"oncdata",n.cdata),C(n,"onclosecdata"),n.cdata="",n.state=S.TEXT):"]"===s?n.cdata+="]":(n.cdata+="]]"+s,n.state=S.CDATA);continue;case S.PROC_INST:"?"===s?n.state=S.PROC_INST_ENDING:g(s)?n.state=S.PROC_INST_BODY:n.procInstName+=s;continue;case S.PROC_INST_BODY:if(!n.procInstBody&&g(s))continue;"?"===s?n.state=S.PROC_INST_ENDING:n.procInstBody+=s;continue;case S.PROC_INST_ENDING:">"===s?(C(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=S.TEXT):(n.procInstBody+="?"+s,n.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:b(d,s)?n.tagName+=s:(M(n),">"===s?B(n):"/"===s?n.state=S.OPEN_TAG_SLASH:(g(s)||N(n,"Invalid character in tag name"),n.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===s?(B(n,!0),F(n)):(N(n,"Forward-slash in opening tag not followed by >"),n.state=S.ATTRIB);continue;case S.ATTRIB:if(g(s))continue;">"===s?B(n):"/"===s?n.state=S.OPEN_TAG_SLASH:b(p,s)?(n.attribName=s,n.attribValue="",n.state=S.ATTRIB_NAME):N(n,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===s?n.state=S.ATTRIB_VALUE:">"===s?(N(n,"Attribute without value"),n.attribValue=n.attribName,R(n),B(n)):g(s)?n.state=S.ATTRIB_NAME_SAW_WHITE:b(d,s)?n.attribName+=s:N(n,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===s)n.state=S.ATTRIB_VALUE;else{if(g(s))continue;N(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",C(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===s?B(n):b(p,s)?(n.attribName=s,n.state=S.ATTRIB_NAME):(N(n,"Invalid attribute name"),n.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(g(s))continue;_(s)?(n.q=s,n.state=S.ATTRIB_VALUE_QUOTED):(N(n,"Unquoted attribute value"),n.state=S.ATTRIB_VALUE_UNQUOTED,n.attribValue=s);continue;case S.ATTRIB_VALUE_QUOTED:if(s!==n.q){"&"===s?n.state=S.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=s;continue}R(n),n.q="",n.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:g(s)?n.state=S.ATTRIB:">"===s?B(n):"/"===s?n.state=S.OPEN_TAG_SLASH:b(p,s)?(N(n,"No whitespace between attributes"),n.attribName=s,n.attribValue="",n.state=S.ATTRIB_NAME):N(n,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!y(s)){"&"===s?n.state=S.ATTRIB_VALUE_ENTITY_U:n.attribValue+=s;continue}R(n),">"===s?B(n):n.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(n.tagName)">"===s?F(n):b(d,s)?n.tagName+=s:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=S.SCRIPT):(g(s)||N(n,"Invalid tagname in closing tag"),n.state=S.CLOSE_TAG_SAW_WHITE);else{if(g(s))continue;v(p,s)?n.script?(n.script+="</"+s,n.state=S.SCRIPT):N(n,"Invalid tagname in closing tag."):n.tagName=s}continue;case S.CLOSE_TAG_SAW_WHITE:if(g(s))continue;">"===s?F(n):N(n,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var h,u;switch(n.state){case S.TEXT_ENTITY:h=S.TEXT,u="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:h=S.ATTRIB_VALUE_QUOTED,u="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:h=S.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===s?(n[u]+=L(n),n.entity="",n.state=h):b(n.entity.length?m:f,s)?n.entity+=s:(N(n,"Invalid character in entity name"),n[u]+="&"+n.entity+s,n.entity="",n.state=h);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,s=0,o=i.length;s<o;s++){var a=e[i[s]].length;if(a>n)switch(i[s]){case"textNode":O(e);break;case"cdata":C(e,"oncdata",e.cdata),e.cdata="";break;case"script":C(e,"onscript",e.script),e.script="";break;default:A(e,"Max buffer length exceeded: "+i[s])}r=Math.max(r,a)}var c=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=c+e.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;O(t=this),""!==t.cdata&&(C(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(C(t,"onscript",t.script),t.script="")}};try{e=n(2203).Stream}catch(t){e=function(){}}var s=t.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function o(t,n){if(!(this instanceof o))return new o(t,n);e.apply(this),this._parser=new r(t,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,s.forEach((function(t){Object.defineProperty(i,"on"+t,{get:function(){return i._parser["on"+t]},set:function(e){if(!e)return i.removeAllListeners(t),i._parser["on"+t]=e,e;i.on(t,e)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(e.prototype,{constructor:{value:o}}),o.prototype.write=function(t){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)){if(!this._decoder){var e=n(3193).StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},o.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},o.prototype.on=function(t,n){var i=this;return i._parser["on"+t]||-1===s.indexOf(t)||(i._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),i.emit.apply(i,e)}),e.prototype.on.call(i,t,n)};var a="[CDATA[",c="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",u={xml:l,xmlns:h},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function _(t){return'"'===t||"'"===t}function y(t){return">"===t||g(t)}function b(t,e){return t.test(e)}function v(t,e){return!b(t,e)}var w,x,E,S=0;for(var k in t.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],i="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=i})),t.STATE)t.STATE[t.STATE[k]]=k;function T(t,e,n){t[e]&&t[e](n)}function C(t,e,n){t.textNode&&O(t),T(t,e,n)}function O(t){t.textNode=I(t.opt,t.textNode),t.textNode&&T(t,"ontext",t.textNode),t.textNode=""}function I(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function A(t,e){return O(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,T(t,"onerror",e),t}function P(t){return t.sawRoot&&!t.closedRoot&&N(t,"Unclosed root tag"),t.state!==S.BEGIN&&t.state!==S.BEGIN_WHITESPACE&&t.state!==S.TEXT&&A(t,"Unexpected end"),O(t),t.c="",t.closed=!0,T(t,"onend"),r.call(t,t.strict,t.opt),t}function N(t,e){if("object"!=typeof t||!(t instanceof r))throw new Error("bad call to strictFail");t.strict&&A(t,e)}function M(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,C(t,"onopentagstart",n)}function D(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),i=n[0],r=n[1];return e&&"xmlns"===t&&(i="xmlns",r=""),{prefix:i,local:r}}function R(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=D(t.attribName,!0),n=e.prefix,i=e.local;if("xmlns"===n)if("xml"===i&&t.attribValue!==l)N(t,"xml: prefix must be bound to "+l+"\nActual: "+t.attribValue);else if("xmlns"===i&&t.attribValue!==h)N(t,"xmlns: prefix must be bound to "+h+"\nActual: "+t.attribValue);else{var r=t.tag,s=t.tags[t.tags.length-1]||t;r.ns===s.ns&&(r.ns=Object.create(s.ns)),r.ns[i]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,C(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function B(t,e){if(t.opt.xmlns){var n=t.tag,i=D(t.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(N(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=i.prefix);var r=t.tags[t.tags.length-1]||t;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(e){C(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var s=0,o=t.attribList.length;s<o;s++){var a=t.attribList[s],c=a[0],l=a[1],h=D(c,!0),u=h.prefix,p=h.local,d=""===u?"":n.ns[u]||"",f={name:c,value:l,prefix:u,local:p,uri:d};u&&"xmlns"!==u&&!d&&(N(t,"Unbound namespace prefix: "+JSON.stringify(u)),f.uri=u),t.tag.attributes[c]=f,C(t,"onattribute",f)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),C(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=S.TEXT:t.state=S.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function F(t){if(!t.tagName)return N(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=S.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=S.SCRIPT);C(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var i=n;e--&&t.tags[e].name!==i;)N(t,"Unexpected close tag");if(e<0)return N(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=S.TEXT);t.tagName=n;for(var r=t.tags.length;r-- >e;){var s=t.tag=t.tags.pop();t.tagName=t.tag.name,C(t,"onclosetag",t.tagName);var o={};for(var a in s.ns)o[a]=s.ns[a];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach((function(e){var n=s.ns[e];C(t,"onclosenamespace",{prefix:e,uri:n})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=S.TEXT}function L(t){var e,n=t.entity,i=n.toLowerCase(),r="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[i]?t.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),r=(e=parseInt(n,16)).toString(16)):(n=n.slice(1),r=(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(e)||r.toLowerCase()!==n?(N(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function U(t,e){"<"===e?(t.state=S.OPEN_WAKA,t.startTagPosition=t.position):g(e)||(N(t,"Non-whitespace before first tag."),t.textNode=e,t.state=S.TEXT)}function j(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}S=t.STATE,String.fromCodePoint||(w=String.fromCharCode,x=Math.floor,E=function(){var t,e,n=[],i=-1,r=arguments.length;if(!r)return"";for(var s="";++i<r;){var o=Number(arguments[i]);if(!isFinite(o)||o<0||o>1114111||x(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(t=55296+((o-=65536)>>10),e=o%1024+56320,n.push(t,e)),(i+1===r||n.length>16384)&&(s+=w.apply(null,n),n.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:E,configurable:!0,writable:!0}):String.fromCodePoint=E)}(e)},7698:(t,e,n)=>{var i=n(9331),r=n(5074),s=n(9725),o=n(2300)("socket.io-client");t.exports=e=c;var a=e.managers={};function c(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),c=r.source,l=r.id,h=r.path,u=a[l]&&h in a[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?(o("ignoring socket cache for %s",c),n=s(c,e)):(a[l]||(o("new io instance for %s",c),a[l]=s(c,e)),n=a[l]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}e.protocol=r.protocol,e.connect=c,e.Manager=n(9725),e.Socket=n(7773)},9725:(t,e,n)=>{var i=n(3357),r=n(7773),s=n(5971),o=n(5074),a=n(4745),c=n(8144),l=n(2300)("socket.io-client:manager"),h=n(6938),u=n(3059),p=Object.prototype.hasOwnProperty;function d(t,e){if(!(this instanceof d))return new d(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new u({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},d.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},d.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},s(d.prototype),d.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},d.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},d.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(t,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var s=a(n,"open",(function(){r.onopen(),t&&t()})),o=a(n,"error",(function(e){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&s.destroy();var h=setTimeout((function(){l("connect attempt timed out after %d",c),s.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(s),this.subs.push(o),this},d.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",c(this,"ondata"))),this.subs.push(a(t,"ping",c(this,"onping"))),this.subs.push(a(t,"pong",c(this,"onpong"))),this.subs.push(a(t,"error",c(this,"onerror"))),this.subs.push(a(t,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(t){this.decoder.add(t)},d.prototype.ondecoded=function(t){this.emit("packet",t)},d.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},d.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new r(this,t,e),this.nsps[t]=n;var i=this;n.on("connecting",s),n.on("connect",(function(){n.id=i.generateId(t)})),this.autoConnect&&s()}function s(){~h(i.connecting,n)||i.connecting.push(n)}return n},d.prototype.destroy=function(t){var e=h(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},d.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var i=0;i<n.length;i++)e.engine.write(n[i],t.options);e.encoding=!1,e.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},d.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},4745:t=>{t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},7773:(t,e,n)=>{var i=n(5074),r=n(5971),s=n(8104),o=n(4745),a=n(8144),c=n(2300)("socket.io-client:socket"),l=n(9140),h=n(8839);t.exports=d;var u={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=r.prototype.emit;function d(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[o(t,"open",a(this,"onopen")),o(t,"packet",a(this,"onpacket")),o(t,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},d.prototype.emit=function(t){if(u.hasOwnProperty(t))return p.apply(this,arguments),this;var e=s(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:h(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},d.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},d.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},d.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===i.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},d.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},d.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);c("sending ack %j",r),e.packet({type:h(r)?i.BINARY_ACK:i.ACK,id:t,data:r})}}},d.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},d.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(t){return this.flags.compress=t,this},d.prototype.binary=function(t){return this.flags.binary=t,this}},9331:(t,e,n)=>{var i=n(4258),r=n(2300)("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),r("parse %s",t),n=i(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port,n.href=n.protocol+"://"+s+(e&&e.port===n.port?"":":"+n.port),n}},9368:(t,e,n)=>{function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n(9939)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(s=r))})),t.splice(s,0,i)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())},9939:(t,e,n)=>{function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,s=r-(n||r);t.diff=s,t.prev=n,t.curr=r,n=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=e.formatters[i];if("function"==typeof r){var s=o[c];n=r.call(t,s),o.splice(c,1),c--}return n})),e.formatArgs.call(t,o),(i.log||e.log||console.log.bind(console)).apply(t,o)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var s=e.instances[n];s.enabled=e.enabled(s.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(2902),e.instances=[],e.names=[],e.skips=[],e.formatters={}},2300:(t,e,n)=>{"undefined"==typeof process||"renderer"===process.type?t.exports=n(9368):t.exports=n(5834)},5834:(t,e,n)=>{var i=n(2018),r=n(9023);(e=t.exports=n(9939)).init=function(t){t.inspectOpts={};for(var n=Object.keys(e.inspectOpts),i=0;i<n.length;i++)t.inspectOpts[n[i]]=e.inspectOpts[n[i]]},e.log=function(){return process.stderr.write(r.format.apply(r,arguments)+"\n")},e.formatArgs=function(t){var n=this.namespace;if(this.useColors){var i=this.color,r="[3"+(i<8?i:"8;5;"+i),s="  "+r+";1m"+n+" [0m";t[0]=s+t[0].split("\n").join("\n"+s),t.push(r+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=o,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):i.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var s=n(7687);s&&s.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function o(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),i=process.env[e];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),t[n]=i,t}),{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts).split("\n").map((function(t){return t.trim()})).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts)},e.enable(o())},2902:t=>{var e=1e3,n=60*e,i=60*n,r=24*i;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,o){o=o||{};var a,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return o.long?s(a=t,r,"day")||s(a,i,"hour")||s(a,n,"minute")||s(a,e,"second")||a+" ms":function(t){return t>=r?Math.round(t/r)+"d":t>=i?Math.round(t/i)+"h":t>=n?Math.round(t/n)+"m":t>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},2225:(t,e,n)=>{var i=n(4634),r=n(8247),s=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function c(t,e){if(!t)return t;if(r(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(i(t)){for(var s=new Array(t.length),o=0;o<t.length;o++)s[o]=c(t[o],e);return s}if("object"==typeof t&&!(t instanceof Date)){for(var a in s={},t)s[a]=c(t[a],e);return s}return t}function l(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(i(t))for(var n=0;n<t.length;n++)t[n]=l(t[n],e);else if("object"==typeof t)for(var r in t)t[r]=l(t[r],e);return t}e.deconstructPacket=function(t){var e=[],n=t.data,i=t;return i.data=c(n,e),i.attachments=e.length,{packet:i,buffers:e}},e.reconstructPacket=function(t,e){return t.data=l(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,s=t;!function t(c,l,h){if(!c)return c;if(o&&c instanceof Blob||a&&c instanceof File){n++;var u=new FileReader;u.onload=function(){h?h[l]=this.result:s=this.result,--n||e(s)},u.readAsArrayBuffer(c)}else if(i(c))for(var p=0;p<c.length;p++)t(c[p],p,c);else if("object"==typeof c&&!r(c))for(var d in c)t(c[d],d,c)}(s),n||e(s)}},5074:(t,e,n)=>{var i=n(2120)("socket.io-parser"),r=n(5971),s=n(2225),o=n(4634),a=n(8247);function c(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=c,e.Decoder=u;var l=e.ERROR+'"encode error"';function h(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var r=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===r)return l;n+=r}return i("encoded %j as %s",t,n),n}function u(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}c.prototype.encode=function(t,n){i("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(t,e){s.removeBlobs(t,(function(t){var n=s.deconstructPacket(t),i=h(n.packet),r=n.buffers;r.unshift(i),e(r)}))}(t,n):n([h(t)])},r(u.prototype),u.prototype.add=function(t){var n;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=function(t){var n,r=0,s={type:Number(t.charAt(0))};if(null==e.types[s.type])return n="unknown packet type "+s.type,{type:e.ERROR,data:"parser error: "+n};if(e.BINARY_EVENT===s.type||e.BINARY_ACK===s.type){for(var a=r+1;"-"!==t.charAt(++r)&&r!=t.length;);var c=t.substring(a,r);if(c!=Number(c)||"-"!==t.charAt(r))throw new Error("Illegal attachments");s.attachments=Number(c)}if("/"===t.charAt(r+1)){for(a=r+1;++r&&","!==(h=t.charAt(r))&&r!==t.length;);s.nsp=t.substring(a,r)}else s.nsp="/";var l=t.charAt(r+1);if(""!==l&&Number(l)==l){for(a=r+1;++r;){var h;if(null==(h=t.charAt(r))||Number(h)!=h){--r;break}if(r===t.length)break}s.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){var u=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(r));if(!function(t,e){switch(t){case 0:return"object"==typeof e;case 1:return void 0===e;case 4:return"string"==typeof e||"object"==typeof e;case 2:case 5:return o(e)&&("string"==typeof e[0]||"number"==typeof e[0]);case 3:case 6:return o(e)}}(s.type,u))throw new Error("invalid payload");s.data=u}return i("decoded %s as %j",t,s),s}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n)}else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},u.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},8247:t=>{t.exports=function(t){return e&&Buffer.isBuffer(t)||n&&(t instanceof ArrayBuffer||i(t))};var e="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,n="function"==typeof ArrayBuffer,i=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}},852:(t,e,n)=>{function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n(1175)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(s=r))})),t.splice(s,0,i)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())},1175:(t,e,n)=>{function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,s=r-(n||r);t.diff=s,t.prev=n,t.curr=r,n=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=e.formatters[i];if("function"==typeof r){var s=o[c];n=r.call(t,s),o.splice(c,1),c--}return n})),e.formatArgs.call(t,o),(i.log||e.log||console.log.bind(console)).apply(t,o)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var s=e.instances[n];s.enabled=e.enabled(s.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(218),e.instances=[],e.names=[],e.skips=[],e.formatters={}},2120:(t,e,n)=>{"undefined"==typeof process||"renderer"===process.type?t.exports=n(852):t.exports=n(1382)},1382:(t,e,n)=>{var i=n(2018),r=n(9023);(e=t.exports=n(1175)).init=function(t){t.inspectOpts={};for(var n=Object.keys(e.inspectOpts),i=0;i<n.length;i++)t.inspectOpts[n[i]]=e.inspectOpts[n[i]]},e.log=function(){return process.stderr.write(r.format.apply(r,arguments)+"\n")},e.formatArgs=function(t){var n=this.namespace;if(this.useColors){var i=this.color,r="[3"+(i<8?i:"8;5;"+i),s="  "+r+";1m"+n+" [0m";t[0]=s+t[0].split("\n").join("\n"+s),t.push(r+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=o,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):i.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var s=n(7687);s&&s.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function o(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),i=process.env[e];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),t[n]=i,t}),{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts).split("\n").map((function(t){return t.trim()})).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts)},e.enable(o())},218:t=>{var e=1e3,n=60*e,i=60*n,r=24*i;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,o){o=o||{};var a,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return o.long?s(a=t,r,"day")||s(a,i,"hour")||s(a,n,"minute")||s(a,e,"second")||a+" ms":function(t){return t>=r?Math.round(t/r)+"d":t>=i?Math.round(t/i)+"h":t>=n?Math.round(t/n)+"m":t>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},7687:(t,e,n)=>{"use strict";const i=n(857),r=n(2018),s=n(5884),{env:o}=process;let a;function c(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function l(t,e){if(0===a)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(t&&!e&&void 0===a)return 0;const n=a||0;if("dumb"===o.TERM)return n;if("win32"===process.platform){const t=i.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((t=>t in o))||"codeship"===o.CI_NAME?1:n;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const t=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:n}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?a=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(a=1),"FORCE_COLOR"in o&&(a="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),t.exports={supportsColor:function(t){return c(l(t,t&&t.isTTY))},stdout:c(l(!0,r.isatty(1))),stderr:c(l(!0,r.isatty(2)))}},9027:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clone=a,e.addLast=l,e.addFirst=h,e.removeLast=u,e.removeFirst=p,e.insert=d,e.removeAt=f,e.replaceAt=m,e.getIn=g,e.set=_,e.setIn=y,e.update=v,e.updateIn=w,e.merge=x,e.mergeDeep=E,e.mergeIn=S,e.omit=k,e.addDefaults=T,e.default=void 0;const n="INVALID_ARGS",i=!1;function r(t){throw new Error(t)}function s(t){const e=Object.keys(t);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e}const o={}.hasOwnProperty;function a(t){if(Array.isArray(t))return t.slice();const e=t,n=s(e),i={};for(let t=0;t<n.length;t++){const r=n[t];i[r]=e[r]}return i}function c(t){return null!=t&&"object"==typeof t}function l(t,e){return Array.isArray(e)?t.concat(e):t.concat([e])}function h(t,e){return Array.isArray(e)?e.concat(t):[e].concat(t)}function u(t){return t.length?t.slice(0,t.length-1):t}function p(t){return t.length?t.slice(1):t}function d(t,e,n){return t.slice(0,e).concat(Array.isArray(n)?n:[n]).concat(t.slice(e))}function f(t,e){return e>=t.length||e<0?t:t.slice(0,e).concat(t.slice(e+1))}function m(t,e,n){if(t[e]===n)return t;const i=t.length,r=Array(i);for(let e=0;e<i;e++)r[e]=t[e];return r[e]=n,r}function g(t,e){if(Array.isArray(e)||r(i?"A path array should be provided when calling getIn()":n),null==t)return;let s=t;for(let t=0;t<e.length;t++){const n=e[t];if(s=null!=s?s[n]:void 0,void 0===s)return s}return s}function _(t,e,n){let i=t;if(null==i&&(i="number"==typeof e?[]:{}),i[e]===n)return i;const r=a(i);return r[e]=n,r}function y(t,e,n){return e.length?b(t,e,n,0):n}function b(t,e,n,i){let r;const s=e[i];return r=i===e.length-1?n:b(c(t)&&c(t[s])?t[s]:"number"==typeof e[i+1]?[]:{},e,n,i+1),_(t,s,r)}function v(t,e,n){return _(t,e,n(null==t?void 0:t[e]))}function w(t,e,n){return y(t,e,n(g(t,e)))}function x(t,e,n,i,r,s,...o){return o.length?C.call(null,!1,!1,t,e,n,i,r,s,...o):C(!1,!1,t,e,n,i,r,s)}function E(t,e,n,i,r,s,...o){return o.length?C.call(null,!1,!0,t,e,n,i,r,s,...o):C(!1,!0,t,e,n,i,r,s)}function S(t,e,n,i,r,s,o,...a){let c,l=g(t,e);return null==l&&(l={}),c=a.length?C.call(null,!1,!1,l,n,i,r,s,o,...a):C(!1,!1,l,n,i,r,s,o),y(t,e,c)}function k(t,e){const n=Array.isArray(e)?e:[e];let i=!1;for(let e=0;e<n.length;e++)if(o.call(t,n[e])){i=!0;break}if(!i)return t;const r={},a=s(t);for(let e=0;e<a.length;e++){const i=a[e];n.indexOf(i)>=0||(r[i]=t[i])}return r}function T(t,e,n,i,r,s,...o){return o.length?C.call(null,!0,!1,t,e,n,i,r,s,...o):C(!0,!1,t,e,n,i,r,s)}function C(t,e,o,...l){let h=o;null==h&&r(i?"At least one object should be provided to merge()":n);let u=!1;for(let n=0;n<l.length;n++){const i=l[n];if(null==i)continue;const r=s(i);if(r.length)for(let n=0;n<=r.length;n++){const s=r[n];if(t&&void 0!==h[s])continue;let o=i[s];e&&c(h[s])&&c(o)&&(o=C(t,e,h[s],o)),void 0!==o&&o!==h[s]&&(u||(u=!0,h=a(h)),h[s]=o)}}return h}var O={clone:a,addLast:l,addFirst:h,removeLast:u,removeFirst:p,insert:d,removeAt:f,replaceAt:m,getIn:g,set:_,setIn:y,update:v,updateIn:w,merge:x,mergeDeep:E,mergeIn:S,omit:k,addDefaults:T};e.default=O},8104:t=>{t.exports=function(t,e){for(var n=[],i=(e=e||0)||0;i<t.length;i++)n[i-e]=t[i];return n}},7713:(t,e,n)=>{!function(){var e={};function i(){"undefined"==typeof process&&console.log.apply(console,arguments)}t.exports=e,function(t,e){var n,r,s;n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t){this.message="JPEG error: "+t}return t.prototype=Error(),t.prototype.name="JpegError",t.constructor=t}(),s=function(){function t(t,e){this.message=t,this.g=e}return t.prototype=Error(),t.prototype.name="DNLMarkerError",t.constructor=t}(),function(){function e(){this.M=null,this.B=-1}function i(t,e){for(var n,i,r=0,s=[],o=16;0<o&&!t[o-1];)o--;s.push({children:[],index:0});var a,c=s[0];for(n=0;n<o;n++){for(i=0;i<t[n];i++){for((c=s.pop()).children[c.index]=e[r];0<c.index;)c=s.pop();for(c.index++,s.push(c);s.length<=n;)s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a;r++}n+1<o&&(s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a)}return s[0].children}function o(t,e,i,o,a,h,u,p,d){function f(){if(0<I)return I--,O>>I&1;if(255===(O=t[e++])){var n=t[e++];if(n){if(220===n&&k){e+=2;var o=t[e++]<<8|t[e++];if(0<o&&o!==i.g)throw new s("Found DNL marker (0xFFDC) while parsing scan data",o)}throw new r("unexpected marker "+(O<<8|n).toString(16))}}return I=7,O>>>7}function m(t){for(;;){if("number"==typeof(t=t[f()]))return t;if("object"!==(void 0===t?"undefined":n(t)))throw new r("invalid huffman sequence")}}function g(t){for(var e=0;0<t;)e=e<<1|f(),t--;return e}function _(t){if(1===t)return 1===f()?1:-1;var e=g(t);return e>=1<<t-1?e:e+(-1<<t)+1}for(var y,b,v,w,x,E,S,k=9<arguments.length&&void 0!==arguments[9]&&arguments[9],T=i.P,C=e,O=0,I=0,A=0,P=0,N=o.length,M=i.S?0===h?0===p?function(t,e){var n=m(t.D);n=0===n?0:_(n)<<d,t.a[e]=t.m+=n}:function(t,e){t.a[e]|=f()<<d}:0===p?function(t,e){if(0<A)A--;else for(var n=h;n<=u;){var i=m(t.o),r=15&i;if(i>>=4,0===r){if(15>i){A=g(i)+(1<<i)-1;break}n+=16}else n+=i,t.a[e+l[n]]=_(r)*(1<<d),n++}}:function(t,e){for(var n,i=h,s=0;i<=u;){n=e+l[i];var o=0>t.a[n]?-1:1;switch(P){case 0:if(n=15&(s=m(t.o)),s>>=4,0===n)15>s?(A=g(s)+(1<<s),P=4):(s=16,P=1);else{if(1!==n)throw new r("invalid ACn encoding");y=_(n),P=s?2:3}continue;case 1:case 2:t.a[n]?t.a[n]+=o*(f()<<d):0==--s&&(P=2===P?3:0);break;case 3:t.a[n]?t.a[n]+=o*(f()<<d):(t.a[n]=y<<d,P=0);break;case 4:t.a[n]&&(t.a[n]+=o*(f()<<d))}i++}4===P&&0==--A&&(P=0)}:function(t,e){var n=m(t.D);for(n=0===n?0:_(n),t.a[e]=t.m+=n,n=1;64>n;){var i=m(t.o),r=15&i;if(i>>=4,0===r){if(15>i)break;n+=16}else n+=i,t.a[e+l[n]]=_(r),n++}},D=0,R=1===N?o[0].c*o[0].l:T*i.O;D<R;){var B=a?Math.min(R-D,a):R;for(b=0;b<N;b++)o[b].m=0;if(A=0,1===N){var F=o[0];for(x=0;x<B;x++)M(F,64*((F.c+1)*(D/F.c|0)+D%F.c)),D++}else for(x=0;x<B;x++){for(b=0;b<N;b++)for(E=(F=o[b]).h,S=F.j,v=0;v<S;v++)for(w=0;w<E;w++)M(F,64*((F.c+1)*((D/T|0)*F.j+v)+(D%T*F.h+w)));D++}if(I=0,(F=c(t,e))&&F.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+F.f),e=F.offset),!(F=F&&F.F)||65280>=F)throw new r("marker was not found");if(!(65488<=F&&65495>=F))break;e+=2}return(F=c(t,e))&&F.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+F.f),e=F.offset),e-C}function a(t,e){for(var n=e.c,i=e.l,s=new Int16Array(64),o=0;o<i;o++)for(var a=0;a<n;a++){var c=64*((e.c+1)*o+a),l=s,h=e.G,u=e.a;if(!h)throw new r("missing required Quantization Table.");for(var p=0;64>p;p+=8){var d=u[c+p],f=u[c+p+1],m=u[c+p+2],g=u[c+p+3],_=u[c+p+4],y=u[c+p+5],b=u[c+p+6],v=u[c+p+7];if(d*=h[p],f|m|g|_|y|b|v){f*=h[p+1],m*=h[p+2],g*=h[p+3],_*=h[p+4],y*=h[p+5];var w=5793*d+128>>8,x=5793*_+128>>8,E=m,S=b*=h[p+6];x=(w=w+x+1>>1)-x,d=3784*E+1567*S+128>>8,E=1567*E-3784*S+128>>8,y=(_=(_=2896*(f-(v*=h[p+7]))+128>>8)+(y<<=4)+1>>1)-y,g=(v=(v=2896*(f+v)+128>>8)+(g<<=4)+1>>1)-g,S=(w=w+(S=d)+1>>1)-S,E=(x=x+E+1>>1)-E,d=2276*_+3406*v+2048>>12,_=3406*_-2276*v+2048>>12,v=d,d=799*g+4017*y+2048>>12,g=4017*g-799*y+2048>>12,y=d,l[p]=w+v,l[p+7]=w-v,l[p+1]=x+y,l[p+6]=x-y,l[p+2]=E+g,l[p+5]=E-g,l[p+3]=S+_,l[p+4]=S-_}else d=5793*d+512>>10,l[p]=d,l[p+1]=d,l[p+2]=d,l[p+3]=d,l[p+4]=d,l[p+5]=d,l[p+6]=d,l[p+7]=d}for(h=0;8>h;++h)d=l[h],(f=l[h+8])|(m=l[h+16])|(g=l[h+24])|(_=l[h+32])|(y=l[h+40])|(b=l[h+48])|(v=l[h+56])?(w=5793*d+2048>>12,x=5793*_+2048>>12,d=3784*(E=m)+1567*(S=b)+2048>>12,E=1567*E-3784*S+2048>>12,S=d,y=(_=(_=2896*(f-v)+2048>>12)+y+1>>1)-y,g=(v=(v=2896*(f+v)+2048>>12)+g+1>>1)-g,d=2276*_+3406*v+2048>>12,_=3406*_-2276*v+2048>>12,v=d,d=799*g+4017*y+2048>>12,g=4017*g-799*y+2048>>12,f=(x=(x=(w=4112+(w+x+1>>1))-x)+E+1>>1)+(y=d),b=x-y,y=(E=x-E)-g,d=16>(d=(w=w+S+1>>1)+v)?0:4080<=d?255:d>>4,f=16>f?0:4080<=f?255:f>>4,m=16>(m=E+g)?0:4080<=m?255:m>>4,g=16>(g=(S=w-S)+_)?0:4080<=g?255:g>>4,_=16>(_=S-_)?0:4080<=_?255:_>>4,y=16>y?0:4080<=y?255:y>>4,b=16>b?0:4080<=b?255:b>>4,v=16>(v=w-v)?0:4080<=v?255:v>>4,u[c+h]=d,u[c+h+8]=f,u[c+h+16]=m,u[c+h+24]=g,u[c+h+32]=_,u[c+h+40]=y,u[c+h+48]=b,u[c+h+56]=v):(d=-2040>(d=5793*d+8192>>14)?0:2024<=d?255:d+2056>>4,u[c+h]=d,u[c+h+8]=d,u[c+h+16]=d,u[c+h+24]=d,u[c+h+32]=d,u[c+h+40]=d,u[c+h+48]=d,u[c+h+56]=d)}return e.a}function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,i=t.length-1;if(n=n<e?n:e,e>=i)return null;var r=t[e]<<8|t[e+1];if(65472<=r&&65534>=r)return{f:null,F:r,offset:e};for(var s=t[n]<<8|t[n+1];!(65472<=s&&65534>=s);){if(++n>=i)return null;s=t[n]<<8|t[n+1]}return{f:r.toString(16),F:s,offset:n}}var l=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);e.prototype={parse:function(t){function e(){var e=t[d]<<8|t[d+1];return d+=2,e}function n(){var n=e(),i=c(t,n=d+n-2,d);return i&&i.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+i.f),n=i.offset),n=t.subarray(d,n),d+=n.length,n}function h(t){for(var e=Math.ceil(t.v/8/t.s),n=Math.ceil(t.g/8/t.u),i=0;i<t.b.length;i++){C=t.b[i];var r=Math.ceil(Math.ceil(t.v/8)*C.h/t.s),s=Math.ceil(Math.ceil(t.g/8)*C.j/t.u);C.a=new Int16Array(64*n*C.j*(e*C.h+1)),C.c=r,C.l=s}t.P=e,t.O=n}var u=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,p=void 0===u?null:u,d=0,f=null,m=0;u=[];var g=[],_=[],y=e();if(65496!==y)throw new r("SOI not found");for(y=e();65497!==y;){switch(y){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=n();65518===y&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&(f={version:b[5]<<8|b[6],Y:b[7]<<8|b[8],Z:b[9]<<8|b[10],W:b[11]});break;case 65499:y=e()+d-2;for(var v;d<y;){var w=t[d++],x=new Uint16Array(64);if(w>>4){if(1!=w>>4)throw new r("DQT - invalid table spec");for(b=0;64>b;b++)x[v=l[b]]=e()}else for(b=0;64>b;b++)x[v=l[b]]=t[d++];u[15&w]=x}break;case 65472:case 65473:case 65474:if(E)throw new r("Only single frame JPEGs supported");e();var E={};for(E.X=65473===y,E.S=65474===y,E.precision=t[d++],y=e(),E.g=p||y,E.v=e(),E.b=[],E.C={},b=t[d++],y=x=w=0;y<b;y++){v=t[d];var S=t[d+1]>>4,k=15&t[d+1];w<S&&(w=S),x<k&&(x=k),S=E.b.push({h:S,j:k,T:t[d+2],G:null}),E.C[v]=S-1,d+=3}E.s=w,E.u=x,h(E);break;case 65476:for(v=e(),y=2;y<v;){for(w=t[d++],x=new Uint8Array(16),b=S=0;16>b;b++,d++)S+=x[b]=t[d];for(k=new Uint8Array(S),b=0;b<S;b++,d++)k[b]=t[d];y+=17+S,(w>>4?g:_)[15&w]=i(x,k)}break;case 65501:e();var T=e();break;case 65498:for(b=1==++m&&!p,e(),w=t[d++],v=[],y=0;y<w;y++){x=E.C[t[d++]];var C=E.b[x];x=t[d++],C.D=_[x>>4],C.o=g[15&x],v.push(C)}y=t[d++],w=t[d++],x=t[d++];try{var O=o(t,d,E,v,T,y,w,x>>4,15&x,b);d+=O}catch(e){if(e instanceof s)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(t,{N:e.g});throw e}break;case 65500:d+=4;break;case 65535:255!==t[d]&&d--;break;default:if(255===t[d-3]&&192<=t[d-2]&&254>=t[d-2])d-=3;else{if(!(b=c(t,d-2))||!b.f)throw new r("unknown marker "+y.toString(16));(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+b.f),d=b.offset}}y=e()}for(this.width=E.v,this.height=E.g,this.A=f,this.b=[],y=0;y<E.b.length;y++)(T=u[(C=E.b[y]).T])&&(C.G=T),this.b.push({R:a(0,C),U:C.h/E.s,V:C.j/E.u,c:C.c,l:C.l});this.i=this.b.length},L:function(t,e){var n,i,r=this.width/t,s=this.height/e,o=this.b.length,a=t*e*o,c=new Uint8ClampedArray(a),l=new Uint32Array(t);for(i=0;i<o;i++){var h=this.b[i],u=h.U*r,p=h.V*s,d=i,f=h.R,m=h.c+1<<3;for(n=0;n<t;n++)h=0|n*u,l[n]=(4294967288&h)<<3|7&h;for(u=0;u<e;u++)for(h=m*(4294967288&(h=0|u*p))|(7&h)<<3,n=0;n<t;n++)c[d]=f[h+l[n]],d+=o}if(s=this.M)for(i=0;i<a;)for(r=h=0;h<o;h++,i++,r+=2)c[i]=(c[i]*s[r]>>8)+s[r+1];return c},w:function(){return this.A?!!this.A.W:3===this.i?0!==this.B:1===this.B},I:function(t){for(var e,n,i,r=0,s=t.length;r<s;r+=3)e=t[r],n=t[r+1],i=t[r+2],t[r]=e-179.456+1.402*i,t[r+1]=e+135.459-.344*n-.714*i,t[r+2]=e-226.816+1.772*n;return t},K:function(t){for(var e,n,i,r,s=0,o=0,a=t.length;o<a;o+=4)e=t[o],n=t[o+1],i=t[o+2],r=t[o+3],t[s++]=n*(-660635669420364e-19*n+.000437130475926232*i-54080610064599e-18*e+.00048449797120281*r-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*e-.00477271405408747*r+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*r+.48357088451265)+r*(-.000336197177618394*r+.484791561490776),t[s++]=107.268039397724+n*(219927104525741e-19*n-.000640992018297945*i+.000659397001245577*e+.000426105652938837*r-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*e+.000770482631801132*r-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*r+.25802910206845)+r*(-.000318913117588328*r-.213742400323665),t[s++]=n*(-.000570115196973677*n-263409051004589e-19*i+.0020741088115012*e-.00288260236853442*r+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*e+.000560833691242812*r-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*r+.116935020465145)+r*(-.000343531996510555*r+.24165260232407);return t.subarray(0,s)},J:function(t){for(var e,n,i,r=0,s=t.length;r<s;r+=4)e=t[r],n=t[r+1],i=t[r+2],t[r]=434.456-e-1.402*i,t[r+1]=119.541-e+.344*n+.714*i,t[r+2]=481.816-e-1.772*n;return t},H:function(t){for(var e,n,i,r,s=0,o=1/255,a=0,c=t.length;a<c;a+=4)e=t[a]*o,n=t[a+1]*o,i=t[a+2]*o,r=t[a+3]*o,t[s++]=255+e*(-4.387332384609988*e+54.48615194189176*n+18.82290502165302*i+212.25662451639585*r-285.2331026137004)+n*(1.7149763477362134*n-5.6096736904047315*i-17.873870861415444*r-5.497006427196366)+i*(-2.5217340131683033*i-21.248923337353073*r+17.5119270841813)-r*(21.86122147463605*r+189.48180835922747),t[s++]=255+e*(8.841041422036149*e+60.118027045597366*n+6.871425592049007*i+31.159100130055922*r-79.2970844816548)+n*(-15.310361306967817*n+17.575251261109482*i+131.35250912493976*r-190.9453302588951)+i*(4.444339102852739*i+9.8632861493405*r-24.86741582555878)-r*(20.737325471181034*r+187.80453709719578),t[s++]=255+e*(.8842522430003296*e+8.078677503112928*n+30.89978309703729*i-.23883238689178934*r-14.183576799673286)+n*(10.49593273432072*n+63.02378494754052*i+50.606957656360734*r-112.23884253719248)+i*(.03296041114873217*i+115.60384449646641*r-193.58209356861505)-r*(22.33816807309886*r+180.12613974708367);return t.subarray(0,s)},getData:function(t,e,n){if(4<this.i)throw new r("Unsupported color mode");if(t=this.L(t,e),1===this.i&&n){n=t.length,e=new Uint8ClampedArray(3*n);for(var i=0,s=0;s<n;s++){var o=t[s];e[i++]=o,e[i++]=o,e[i++]=o}return e}if(3===this.i&&this.w())return this.I(t);if(4===this.i){if(this.w())return n?this.K(t):this.J(t);if(n)return this.H(t)}return t}},t.JpegDecoder=e}(),t.encodeImage=function(e,n,i,r){var s={t256:[n],t257:[i],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[i],t279:[n*i*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(r)for(var o in r)s[o]=r[o];var a=new Uint8Array(t.encode([s])),c=new Uint8Array(e),l=new Uint8Array(1e3+n*i*4);for(o=0;o<a.length;o++)l[o]=a[o];for(o=0;o<c.length;o++)l[1e3+o]=c[o];return l.buffer},t.encode=function(e){var n=new Uint8Array(2e4),i=4,r=t._binBE;n[0]=77,n[1]=77,n[3]=42;var s=8;r.writeUint(n,i,s),i+=4;for(var o=0;o<e.length;o++){var a=t._writeIFD(r,n,s,e[o]);s=a[1],o<e.length-1&&r.writeUint(n,a[0],s)}return n.slice(0,s).buffer},t.decode=function(e){t.decode._decodeG3.allow2D=null;var n=new Uint8Array(e),i=0,r=t._binBE.readASCII(n,i,2);i+=2;var s="II"==r?t._binLE:t._binBE;s.readUshort(n,i),i+=2;var o=s.readUint(n,i);i+=4;for(var a=[];;){var c=t._readIFD(s,n,o,a);if(0==(o=s.readUint(n,c)))break}return a},t.decodeImages=function(e,n){for(var r=new Uint8Array(e),s=t._binBE.readASCII(r,0,2),o=0;o<n.length;o++){var a=n[o];if(null!=a.t256){a.isLE="II"==s,a.width=a.t256[0],a.height=a.t257[0];var c=a.t259?a.t259[0]:1,l=a.t266?a.t266[0]:1;a.t284&&2==a.t284[0]&&i("PlanarConfiguration 2 should not be used!");var h=(a.t258?Math.min(32,a.t258[0]):1)*(a.t277?a.t277[0]:1),u=8*Math.ceil(a.width*h/8),p=a.t273;null==p&&(p=a.t324);var d=a.t279;1==c&&1==p.length&&(d=[a.height*(u>>>3)]),null==d&&(d=a.t325);var f=new Uint8Array(a.height*(u>>>3)),m=0;if(null!=a.t322){for(var g=a.t322[0],_=a.t323[0],y=Math.floor((a.width+g-1)/g),b=Math.floor((a.height+_-1)/_),v=new Uint8Array(0|Math.ceil(g*_*h/8)),w=0;w<b;w++)for(var x=0;x<y;x++){for(var E=w*y+x,S=0;S<v.length;S++)v[S]=0;t.decode._decompress(a,r,p[E],d[E],c,v,0,l),6==c?f=v:t._copyTile(v,0|Math.ceil(g*h/8),_,f,0|Math.ceil(a.width*h/8),a.height,0|Math.ceil(x*g*h/8),w*_)}m=8*f.length}else{var k=a.t278?a.t278[0]:a.height;for(k=Math.min(k,a.height),E=0;E<p.length;E++)t.decode._decompress(a,r,p[E],d[E],c,f,0|Math.ceil(m/8),l),m+=u*k;m=Math.min(m,8*f.length)}a.data=new Uint8Array(f.buffer,0,0|Math.ceil(m/8))}}},t.decode._decompress=function(n,r,s,o,a,c,l,h){if(1==a)for(var u=0;u<o;u++)c[l+u]=r[s+u];else if(3==a)t.decode._decodeG3(r,s,o,c,l,n.width,h);else if(4==a)t.decode._decodeG4(r,s,o,c,l,n.width,h);else if(5==a)t.decode._decodeLZW(r,s,c,l);else if(6==a)t.decode._decodeOldJPEG(n,r,s,o,c,l);else if(7==a)t.decode._decodeNewJPEG(n,r,s,o,c,l);else if(8==a)for(var p=new Uint8Array(r.buffer,s,o),d=e.inflate(p),f=0;f<d.length;f++)c[l+f]=d[f];else 32773==a?t.decode._decodePackBits(r,s,o,c,l):32809==a?t.decode._decodeThunder(r,s,o,c,l):i("Unknown compression",a);if(n.t317&&2==n.t317[0])for(var m=n.t277?n.t277[0]:1,g=n.t278?n.t278[0]:n.height,_=n.width*m,y=0;y<g;y++){var b=l+y*_;if(3==m)for(u=3;u<_;u+=3)c[b+u]=c[b+u]+c[b+u-3]&255,c[b+u+1]=c[b+u+1]+c[b+u-2]&255,c[b+u+2]=c[b+u+2]+c[b+u-1]&255;else for(u=m;u<_;u++)c[b+u]=c[b+u]+c[b+u-m]&255}},t.decode._decodeNikon=function(t,e,n,r,s){var o,a;i(t.slice(e,e+100)),o=t[e],a=t[++e],e++,i(o.toString(16),a.toString(16),n)},t.decode._decodeNewJPEG=function(e,n,i,r,s,o){var a=e.t347,c=a?a.length:0,l=new Uint8Array(c+r);if(a){for(var h=0,u=0;u<c-1&&(255!=a[u]||217!=a[u+1]);u++)l[h++]=a[u];var p=n[i],d=n[i+1];for(255==p&&216==d||(l[h++]=p,l[h++]=d),u=2;u<r;u++)l[h++]=n[i+u]}else for(u=0;u<r;u++)l[u]=n[i+u];if(32803==e.t262){var f=e.t258[0],m=(new LosslessJpegDecoder).decode(l),g=m.length;if(16==f)for(u=0;u<g;u++)s[o++]=255&m[u],s[o++]=m[u]>>>8;else{if(12!=f)throw new Error("unsupported bit depth "+f);for(u=0;u<g;u+=2)s[o++]=m[u]>>>4,s[o++]=255&(m[u]<<4|m[u+1]>>>8),s[o++]=255&m[u+1]}}else{var _=new t.JpegDecoder;_.parse(l);var y=_.getData(_.width,_.height);for(u=0;u<y.length;u++)s[o+u]=y[u]}6==e.t262[0]&&(e.t262[0]=2)},t.decode._decodeOldJPEGInit=function(t,e,n,r){var s,o,a,c,l,h=216,u=0,p=0,d=!1,f=t.t513,m=f?f[0]:0,g=t.t514,_=g?g[0]:0,y=t.t324||t.t273||f,b=t.t530,v=0,w=0,x=t.t277?t.t277[0]:1,E=t.t515;if(y&&(p=y[0],d=y.length>1),!d){if(255==e[n]&&e[n+1]==h)return{jpegOffset:n};if(null!=f&&(255==e[n+m]&&e[n+m+1]==h?u=n+m:i("JPEGInterchangeFormat does not point to SOI"),null==g?i("JPEGInterchangeFormatLength field is missing"):(m>=p||m+_<=p)&&i("JPEGInterchangeFormatLength field value is invalid"),null!=u))return{jpegOffset:u}}if(null!=b&&(v=b[0],w=b[1]),null!=f&&null!=g)if(_>=2&&m+_<=p){for(s=255==e[n+m+_-2]&&e[n+m+_-1]==h?new Uint8Array(_-2):new Uint8Array(_),a=0;a<s.length;a++)s[a]=e[n+m+a];i("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else i("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==s){var S=0,k=[];k[S++]=255,k[S++]=h;var T=t.t519;if(null==T)throw new Error("JPEGQTables tag is missing");for(a=0;a<T.length;a++)for(k[S++]=255,k[S++]=219,k[S++]=0,k[S++]=67,k[S++]=a,c=0;c<64;c++)k[S++]=e[n+T[a]+c];for(l=0;l<2;l++){var C=t[0==l?"t520":"t521"];if(null==C)throw new Error((0==l?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(a=0;a<C.length;a++){k[S++]=255,k[S++]=196;var O=19;for(c=0;c<16;c++)O+=e[n+C[a]+c];for(k[S++]=O>>>8,k[S++]=255&O,k[S++]=a|l<<4,c=0;c<16;c++)k[S++]=e[n+C[a]+c];for(c=0;c<O;c++)k[S++]=e[n+C[a]+16+c]}}if(k[S++]=255,k[S++]=192,k[S++]=0,k[S++]=8+3*x,k[S++]=8,k[S++]=t.height>>>8&255,k[S++]=255&t.height,k[S++]=t.width>>>8&255,k[S++]=255&t.width,k[S++]=x,1==x)k[S++]=1,k[S++]=17,k[S++]=0;else for(a=0;a<3;a++)k[S++]=a+1,k[S++]=0!=a?17:(15&v)<<4|15&w,k[S++]=a;null!=E&&0!=E[0]&&(k[S++]=255,k[S++]=221,k[S++]=0,k[S++]=4,k[S++]=E[0]>>>8&255,k[S++]=255&E[0]),s=new Uint8Array(k)}var I=-1;for(a=0;a<s.length-1;){if(255==s[a]&&192==s[a+1]){I=a;break}a++}if(-1==I){var A=new Uint8Array(s.length+10+3*x);A.set(s);var P=s.length;if(I=s.length,(s=A)[P++]=255,s[P++]=192,s[P++]=0,s[P++]=8+3*x,s[P++]=8,s[P++]=t.height>>>8&255,s[P++]=255&t.height,s[P++]=t.width>>>8&255,s[P++]=255&t.width,s[P++]=x,1==x)s[P++]=1,s[P++]=17,s[P++]=0;else for(a=0;a<3;a++)s[P++]=a+1,s[P++]=0!=a?17:(15&v)<<4|15&w,s[P++]=a}if(255==e[p]&&218==e[p+1]){var N=e[p+2]<<8|e[p+3];for((o=new Uint8Array(N+2))[0]=e[p],o[1]=e[p+1],o[2]=e[p+2],o[3]=e[p+3],a=0;a<N-2;a++)o[a+4]=e[p+a+4]}else{var M=0;if((o=new Uint8Array(8+2*x))[M++]=255,o[M++]=218,o[M++]=0,o[M++]=6+2*x,o[M++]=x,1==x)o[M++]=1,o[M++]=0;else for(a=0;a<3;a++)o[M++]=a+1,o[M++]=a<<4|a;o[M++]=0,o[M++]=63,o[M++]=0}return{jpegOffset:n,tables:s,sosMarker:o,sofPosition:I}},t.decode._decodeOldJPEG=function(e,n,i,r,s,o){var a,c,l,h=t.decode._decodeOldJPEGInit(e,n,i,r);if(null!=h.jpegOffset)for(a=i+r-h.jpegOffset,l=new Uint8Array(a),d=0;d<a;d++)l[d]=n[h.jpegOffset+d];else{for(c=h.tables.length,(l=new Uint8Array(c+h.sosMarker.length+r+2)).set(h.tables),l[h.sofPosition+5]=e.height>>>8&255,l[h.sofPosition+6]=255&e.height,l[h.sofPosition+7]=e.width>>>8&255,l[h.sofPosition+8]=255&e.width,255==n[i]&&n[i+1]==SOS||(l.set(h.sosMarker,bufoff),bufoff+=sosMarker.length),d=0;d<r;d++)l[bufoff++]=n[i+d];l[bufoff++]=255,l[bufoff++]=EOI}var u=new t.JpegDecoder;u.parse(l);for(var p=u.getData(u.width,u.height),d=0;d<p.length;d++)s[o+d]=p[d];6==e.t262[0]&&(e.t262[0]=2)},t.decode._decodePackBits=function(t,e,n,i,r){for(var s=new Int8Array(t.buffer),o=new Int8Array(i.buffer),a=e+n;e<a;){var c=s[e];if(e++,c>=0&&c<128)for(var l=0;l<c+1;l++)o[r]=s[e],r++,e++;if(c>=-127&&c<0){for(l=0;l<1-c;l++)o[r]=s[e],r++;e++}}},t.decode._decodeThunder=function(t,e,n,i,r){for(var s=[0,1,0,-1],o=[0,1,2,3,0,-3,-2,-1],a=e+n,c=2*r,l=0;e<a;){var h=t[e],u=h>>>6,p=63&h;if(e++,3==u&&(l=15&p,i[c>>>1]|=l<<4*(1-c&1),c++),0==u)for(var d=0;d<p;d++)i[c>>>1]|=l<<4*(1-c&1),c++;if(2==u)for(d=0;d<2;d++)4!=(f=p>>>3*(1-d)&7)&&(l+=o[f],i[c>>>1]|=l<<4*(1-c&1),c++);if(1==u)for(d=0;d<3;d++){var f;2!=(f=p>>>2*(2-d)&3)&&(l+=s[f],i[c>>>1]|=l<<4*(1-c&1),c++)}}},t.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},t.decode._lens=function(){var t=function(t,e,n,i){for(var r=0;r<e.length;r++)t[e[r]]=n+r*i},e="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",n="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",i="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",r="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",s="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";e=e.split(","),n=n.split(","),i=i.split(","),r=r.split(","),s=s.split(",");var o={},a={};return t(o,e,0,1),t(o,i,64,64),t(o,s,1792,64),t(a,n,0,1),t(a,r,64,64),t(a,s,1792,64),[o,a]}(),t.decode._decodeG4=function(e,n,i,r,s,o,a){for(var c=t.decode,l=n<<3,h=0,u="",p=[],d=[],f=0;f<o;f++)d.push(0);d=c._makeDiff(d);for(var m=0,g=0,_=0,y=0,b=0,v=0,w="",x=0,E=8*Math.ceil(o/8);l>>>3<n+i;){_=c._findDiff(d,m+(0==m?0:1),1-b),y=c._findDiff(d,_,b);var S=0;if(1==a&&(S=e[l>>>3]>>>7-(7&l)&1),2==a&&(S=e[l>>>3]>>>(7&l)&1),l++,u+=S,"H"==w){if(null!=c._lens[b][u]){var k=c._lens[b][u];u="",h+=k,k<64&&(c._addNtimes(p,h,b),m+=h,b=1-b,h=0,0==--x&&(w=""))}}else"0001"==u&&(u="",c._addNtimes(p,y-m,b),m=y),"001"==u&&(u="",w="H",x=2),null!=c._dmap[u]&&(g=_+c._dmap[u],c._addNtimes(p,g-m,b),m=g,u="",b=1-b);p.length==o&&""==w&&(c._writeBits(p,r,8*s+v*E),b=0,v++,m=0,d=c._makeDiff(p),p=[])}},t.decode._findDiff=function(t,e,n){for(var i=0;i<t.length;i+=2)if(t[i]>=e&&t[i+1]==n)return t[i]},t.decode._makeDiff=function(t){var e=[];1==t[0]&&e.push(0,1);for(var n=1;n<t.length;n++)t[n-1]!=t[n]&&e.push(n,t[n]);return e.push(t.length,0,t.length,1),e},t.decode._decodeG3=function(e,n,i,r,s,o,a){for(var c=t.decode,l=n<<3,h=0,u="",p=[],d=[],f=0;f<o;f++)p.push(0);for(var m=0,g=0,_=0,y=0,b=0,v=-1,w="",x=0,E=!1,S=8*Math.ceil(o/8);l>>>3<n+i;){_=c._findDiff(d,m+(0==m?0:1),1-b),y=c._findDiff(d,_,b);var k=0;if(1==a&&(k=e[l>>>3]>>>7-(7&l)&1),2==a&&(k=e[l>>>3]>>>(7&l)&1),l++,u+=k,E){if(null!=c._lens[b][u]){var T=c._lens[b][u];u="",h+=T,T<64&&(c._addNtimes(p,h,b),b=1-b,h=0)}}else"H"==w?null!=c._lens[b][u]&&(T=c._lens[b][u],u="",h+=T,T<64&&(c._addNtimes(p,h,b),m+=h,b=1-b,h=0,0==--x&&(w=""))):("0001"==u&&(u="",c._addNtimes(p,y-m,b),m=y),"001"==u&&(u="",w="H",x=2),null!=c._dmap[u]&&(g=_+c._dmap[u],c._addNtimes(p,g-m,b),m=g,u="",b=1-b));u.endsWith("000000000001")&&(v>=0&&c._writeBits(p,r,8*s+v*S),1==a&&(E=1==(e[l>>>3]>>>7-(7&l)&1)),2==a&&(E=1==(e[l>>>3]>>>(7&l)&1)),l++,null==c._decodeG3.allow2D&&(c._decodeG3.allow2D=E),c._decodeG3.allow2D||(E=!0,l--),u="",b=0,v++,m=0,d=c._makeDiff(p),p=[])}p.length==o&&c._writeBits(p,r,8*s+v*S)},t.decode._addNtimes=function(t,e,n){for(var i=0;i<e;i++)t.push(n)},t.decode._writeBits=function(t,e,n){for(var i=0;i<t.length;i++)e[n+i>>>3]|=t[i]<<7-(n+i&7)},t.decode._decodeLZW=function(e,n,i,r){if(null==t.decode._lzwTab){for(var s=new Uint32Array(65535),o=new Uint16Array(65535),a=new Uint8Array(2e6),c=0;c<256;c++)a[c<<2]=c,s[c]=c<<2,o[c]=1;t.decode._lzwTab=[s,o,a]}for(var l=t.decode._copyData,h=t.decode._lzwTab[0],u=t.decode._lzwTab[1],p=(a=t.decode._lzwTab[2],258),d=1032,f=9,m=n<<3,g=0,_=0;g=(e[m>>>3]<<16|e[m+8>>>3]<<8|e[m+16>>>3])>>24-(7&m)-f&(1<<f)-1,m+=f,257!=g;){if(256==g){if(f=9,p=258,d=1032,g=(e[m>>>3]<<16|e[m+8>>>3]<<8|e[m+16>>>3])>>24-(7&m)-f&(1<<f)-1,m+=f,257==g)break;i[r]=g,r++}else if(g<p){var y=h[g],b=u[g];l(a,y,i,r,b),r+=b,_>=p?(h[p]=d,a[h[p]]=y[0],u[p]=1,d=d+1+3&-4,p++):(h[p]=d,l(a,h[_],a,d,v=u[_]),a[d+v]=a[y],v++,u[p]=v,p++,d=d+v+3&-4),p+1==1<<f&&f++}else{var v;_>=p?(h[p]=d,u[p]=0,p++):(h[p]=d,l(a,h[_],a,d,v=u[_]),a[d+v]=a[d],v++,u[p]=v,p++,l(a,d,i,r,v),r+=v,d=d+v+3&-4),p+1==1<<f&&f++}_=g}},t.decode._copyData=function(t,e,n,i,r){for(var s=0;s<r;s+=4)n[i+s]=t[e+s],n[i+s+1]=t[e+s+1],n[i+s+2]=t[e+s+2],n[i+s+3]=t[e+s+3]},t.tags={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffset",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",296:"ResolutionUnit",297:"PageNumber",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffset",325:"TileByteCounts",330:"SubIFDs",336:"DotRange",338:"ExtraSample",339:"SampleFormat",347:"JPEGTables",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",700:"XMP",33421:"CFARepeatPatternDim",33422:"CFAPattern",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33723:"IPTC/NAA",34377:"Photoshop",34665:"ExifIFD",34675:"ICC Profile",34850:"ExposureProgram",34853:"GPSInfo",34855:"ISOSpeedRatings",34858:"TimeZoneOffset",34859:"SelfTimeMode",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37377:"ShutterSpeedValue",37378:"ApertureValue",37380:"ExposureBiasValue",37383:"MeteringMode",37385:"Flash",37386:"FocalLength",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37398:"TIFF/EPStandardID",37399:"SensingMethod",37500:"MakerNote",37510:"UserComment",37724:"ImageSourceData",40092:"XPComment",40094:"XPKeywords",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelXDimension",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50733:"BayerGreenSplit",50738:"AntiAliasStrength",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50727:"AnalogBalance",50728:"AsShotNeutral",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50827:"OriginalRawFileName",50829:"ActiveArea",50830:"MaskedAreas",50931:"CameraCalibrationSignature",50932:"ProfileCalibrationSignature",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualityFinalSize",51091:"OriginalDefaultCropSize",51125:"DefaultUserCrop"},t.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},t._readIFD=function(e,n,r,s){var o=e.readUshort(n,r);r+=2;var a={};s.push(a);for(var c=0;c<o;c++){var l=e.readUshort(n,r);r+=2;var h=e.readUshort(n,r);r+=2;var u=e.readUint(n,r);r+=4;var p=e.readUint(n,r);r+=4;var d=[];if(a["t"+l]=d,1==h||7==h)for(var f=0;f<u;f++)d.push(n[(u<5?r-4:p)+f]);if(2==h&&d.push(e.readASCII(n,u<5?r-4:p,u-1)),3==h)for(f=0;f<u;f++)d.push(e.readUshort(n,(u<3?r-4:p)+2*f));if(4==h)for(f=0;f<u;f++)d.push(e.readUint(n,(u<2?r-4:p)+4*f));if(5==h)for(f=0;f<u;f++)d.push(e.readUint(n,p+8*f)/e.readUint(n,p+8*f+4));if(8==h)for(f=0;f<u;f++)d.push(e.readShort(n,(u<3?r-4:p)+2*f));if(9==h)for(f=0;f<u;f++)d.push(e.readInt(n,(u<2?r-4:p)+4*f));if(10==h)for(f=0;f<u;f++)d.push(e.readInt(n,p+8*f)/e.readInt(n,p+8*f+4));if(11==h)for(f=0;f<u;f++)d.push(e.readFloat(n,p+4*f));if(12==h)for(f=0;f<u;f++)d.push(e.readDouble(n,p+8*f));if(0!=u&&0==d.length&&i("unknown TIFF tag type: ",h,"num:",u),330==l)for(f=0;f<u;f++)t._readIFD(e,n,d[f],s)}return r},t._writeIFD=function(e,n,i,r){var s=Object.keys(r);e.writeUshort(n,i,s.length);for(var o=(i+=2)+12*s.length+4,a=0;a<s.length;a++){var c=s[a],l=parseInt(c.slice(1)),h=t.ttypes[l];if(null==h)throw new Error("unknown type of tag: "+l);var u=r[c];2==h&&(u=u[0]+"\0");var p=u.length;e.writeUshort(n,i,l),i+=2,e.writeUshort(n,i,h),i+=2,e.writeUint(n,i,p);var d=[-1,1,1,2,4,8,0,0,0,0,0,0,8][h]*p,f=i+=4;if(d>4&&(e.writeUint(n,i,o),f=o),2==h&&e.writeASCII(n,f,u),3==h)for(var m=0;m<p;m++)e.writeUshort(n,f+2*m,u[m]);if(4==h)for(m=0;m<p;m++)e.writeUint(n,f+4*m,u[m]);if(5==h)for(m=0;m<p;m++)e.writeUint(n,f+8*m,Math.round(1e4*u[m])),e.writeUint(n,f+8*m+4,1e4);if(12==h)for(m=0;m<p;m++)e.writeDouble(n,f+8*m,u[m]);d>4&&(o+=d+=1&d),i+=4}return[i,o]},t.toRGBA8=function(t){var e=t.width,n=t.height,r=e*n,s=4*r,o=t.data,a=new Uint8Array(4*r),c=t.t262[0],l=t.t258?Math.min(32,t.t258[0]):1,h=t.isLE?1:0;if(0==c)for(var u=Math.ceil(l*e/8),p=0;p<n;p++){var d=p*u,f=p*e;if(1==l)for(var m=0;m<e;m++){var g=f+m<<2,_=o[d+(m>>3)]>>7-(7&m)&1;a[g]=a[g+1]=a[g+2]=255*(1-_),a[g+3]=255}if(4==l)for(m=0;m<e;m++)g=f+m<<2,_=o[d+(m>>1)]>>4-4*(1&m)&15,a[g]=a[g+1]=a[g+2]=17*(15-_),a[g+3]=255;if(8==l)for(m=0;m<e;m++)g=f+m<<2,_=o[d+m],a[g]=a[g+1]=a[g+2]=255-_,a[g+3]=255}else if(1==c)for(u=Math.ceil(l*e/8),p=0;p<n;p++){if(d=p*u,f=p*e,1==l)for(m=0;m<e;m++)g=f+m<<2,_=o[d+(m>>3)]>>7-(7&m)&1,a[g]=a[g+1]=a[g+2]=255*_,a[g+3]=255;if(2==l)for(m=0;m<e;m++)g=f+m<<2,_=o[d+(m>>2)]>>6-2*(3&m)&3,a[g]=a[g+1]=a[g+2]=85*_,a[g+3]=255;if(8==l)for(m=0;m<e;m++)g=f+m<<2,_=o[d+m],a[g]=a[g+1]=a[g+2]=_,a[g+3]=255;if(16==l)for(m=0;m<e;m++)g=f+m<<2,_=o[d+(2*m+h)],a[g]=a[g+1]=a[g+2]=Math.min(255,_),a[g+3]=255}else if(2==c)if(8==l)if(t.t338)if(t.t338[0]>0)for(m=0;m<s;m++)a[m]=o[m];else for(m=0;m<s;m+=4)a[m]=o[m],a[m+1]=o[m+1],a[m+2]=o[m+2],a[m+3]=255;else{if(4==(w=t.t258?t.t258.length:3))for(m=0;m<s;m++)a[m]=o[m];if(3==w)for(m=0;m<r;m++){var y=3*m;a[g=m<<2]=o[y],a[g+1]=o[y+1],a[g+2]=o[y+2],a[g+3]=255}}else for(m=0;m<r;m++)y=6*m,a[g=m<<2]=o[y],a[g+1]=o[y+2],a[g+2]=o[y+4],a[g+3]=255;else if(3==c){var b=t.t320;for(m=0;m<r;m++){g=m<<2;var v=o[m];a[g]=b[v]>>8,a[g+1]=b[256+v]>>8,a[g+2]=b[512+v]>>8,a[g+3]=255}}else if(5==c){var w,x=(w=t.t258?t.t258.length:4)>4?1:0;for(m=0;m<r;m++){g=m<<2;var E=m*w,S=255-o[E],k=255-o[E+1],T=255-o[E+2],C=(255-o[E+3])*(1/255);a[g]=~~(S*C+.5),a[g+1]=~~(k*C+.5),a[g+2]=~~(T*C+.5),a[g+3]=255*(1-x)+o[E+4]*x}}else i("Unknown Photometric interpretation: "+c);return a},t.replaceIMG=function(){for(var e=document.getElementsByTagName("img"),n=0;n<e.length;n++){var i=e[n],r=i.getAttribute("src");if(null!=r){var s=r.split(".").pop().toLowerCase();if("tif"==s||"tiff"==s){var o=new XMLHttpRequest;t._xhrs.push(o),t._imgs.push(i),o.open("GET",r),o.responseType="arraybuffer",o.onload=t._imgLoaded,o.send()}}}},t._xhrs=[],t._imgs=[],t._imgLoaded=function(e){var n=e.target.response,i=t.decode(n),r=i[0];t.decodeImages(n,i);var s=t.toRGBA8(r),o=r.width,a=r.height,c=t._xhrs.indexOf(e.target),l=t._imgs[c];t._xhrs.splice(c,1),t._imgs.splice(c,1);var h=document.createElement("canvas");h.width=o,h.height=a;for(var u=h.getContext("2d"),p=u.createImageData(o,a),d=0;d<s.length;d++)p.data[d]=s[d];u.putImageData(p,0,0);var f=["style","class","id"];for(d=0;d<f.length;d++)h.setAttribute(f[d],l.getAttribute(f[d]));l.parentNode.replaceChild(h,l)},t._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(e,n){var i=t._binBE.ui8;return i[0]=e[n+1],i[1]=e[n+0],t._binBE.i16[0]},readInt:function(e,n){var i=t._binBE.ui8;return i[0]=e[n+3],i[1]=e[n+2],i[2]=e[n+1],i[3]=e[n+0],t._binBE.i32[0]},readUint:function(e,n){var i=t._binBE.ui8;return i[0]=e[n+3],i[1]=e[n+2],i[2]=e[n+1],i[3]=e[n+0],t._binBE.ui32[0]},readASCII:function(t,e,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i},readFloat:function(e,n){for(var i=t._binBE.ui8,r=0;r<4;r++)i[r]=e[n+3-r];return t._binBE.fl32[0]},readDouble:function(e,n){for(var i=t._binBE.ui8,r=0;r<8;r++)i[r]=e[n+7-r];return t._binBE.fl64[0]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=255&n},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},writeASCII:function(t,e,n){for(var i=0;i<n.length;i++)t[e+i]=n.charCodeAt(i)},writeDouble:function(e,n,i){t._binBE.fl64[0]=i;for(var r=0;r<8;r++)e[n+r]=t._binBE.ui8[7-r]}},t._binBE.ui8=new Uint8Array(8),t._binBE.i16=new Int16Array(t._binBE.ui8.buffer),t._binBE.i32=new Int32Array(t._binBE.ui8.buffer),t._binBE.ui32=new Uint32Array(t._binBE.ui8.buffer),t._binBE.fl32=new Float32Array(t._binBE.ui8.buffer),t._binBE.fl64=new Float64Array(t._binBE.ui8.buffer),t._binLE={nextZero:t._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readShort:function(e,n){var i=t._binBE.ui8;return i[0]=e[n+0],i[1]=e[n+1],t._binBE.i16[0]},readInt:function(e,n){var i=t._binBE.ui8;return i[0]=e[n+0],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t._binBE.i32[0]},readUint:function(e,n){var i=t._binBE.ui8;return i[0]=e[n+0],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t._binBE.ui32[0]},readASCII:t._binBE.readASCII,readFloat:function(e,n){for(var i=t._binBE.ui8,r=0;r<4;r++)i[r]=e[n+r];return t._binBE.fl32[0]},readDouble:function(e,n){for(var i=t._binBE.ui8,r=0;r<8;r++)i[r]=e[n+r];return t._binBE.fl64[0]}},t._copyTile=function(t,e,n,i,r,s,o,a){for(var c=Math.min(e,r-o),l=Math.min(n,s-a),h=0;h<l;h++)for(var u=(a+h)*r+o,p=h*e,d=0;d<c;d++)i[u+d]=t[p+d]}}(e,n(1668))}()},7699:(t,e,n)=>{"use strict";const i=n(1060);i.createWebSocketStream=n(3719),i.Server=n(1722),i.Receiver=n(6286),i.Sender=n(914),t.exports=i},3338:(t,e,n)=>{"use strict";const{EMPTY_BUFFER:i}=n(2614);function r(t,e){if(0===t.length)return i;if(1===t.length)return t[0];const n=Buffer.allocUnsafe(e);let r=0;for(let e=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return r<e?n.slice(0,r):n}function s(t,e,n,i,r){for(let s=0;s<r;s++)n[i+s]=t[s]^e[3&s]}function o(t,e){const n=t.length;for(let i=0;i<n;i++)t[i]^=e[3&i]}function a(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function c(t){if(c.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=Buffer.from(t):ArrayBuffer.isView(t)?e=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),c.readOnly=!1),e}try{const e=n(Object(function(){var t=new Error("Cannot find module 'bufferutil'");throw t.code="MODULE_NOT_FOUND",t}())),i=e.BufferUtil||e;t.exports={concat:r,mask(t,e,n,r,o){o<48?s(t,e,n,r,o):i.mask(t,e,n,r,o)},toArrayBuffer:a,toBuffer:c,unmask(t,e){t.length<32?o(t,e):i.unmask(t,e)}}}catch(e){t.exports={concat:r,mask:s,toArrayBuffer:a,toBuffer:c,unmask:o}}},2614:t=>{"use strict";t.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},597:t=>{"use strict";class e{constructor(t,e){this.target=e,this.type=t}}class n extends e{constructor(t,e){super("message",e),this.data=t}}class i extends e{constructor(t,e,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=e,this.code=t}}class r extends e{constructor(t){super("open",t)}}class s extends e{constructor(t,e){super("error",e),this.message=t.message,this.error=t}}const o={addEventListener(t,e,o){if("function"!=typeof e)return;function a(t){e.call(this,new n(t,this))}function c(t,n){e.call(this,new i(t,n,this))}function l(t){e.call(this,new s(t,this))}function h(){e.call(this,new r(this))}const u=o&&o.once?"once":"on";"message"===t?(a._listener=e,this[u](t,a)):"close"===t?(c._listener=e,this[u](t,c)):"error"===t?(l._listener=e,this[u](t,l)):"open"===t?(h._listener=e,this[u](t,h)):this[u](t,e)},removeEventListener(t,e){const n=this.listeners(t);for(let i=0;i<n.length;i++)n[i]!==e&&n[i]._listener!==e||this.removeListener(t,n[i])}};t.exports=o},5926:t=>{"use strict";const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function n(t,e,n){void 0===t[e]?t[e]=[n]:t[e].push(n)}t.exports={format:function(t){return Object.keys(t).map((e=>{let n=t[e];return Array.isArray(n)||(n=[n]),n.map((t=>[e].concat(Object.keys(t).map((e=>{let n=t[e];return Array.isArray(n)||(n=[n]),n.map((t=>!0===t?e:`${e}=${t}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(t){const i=Object.create(null);if(void 0===t||""===t)return i;let r,s,o=Object.create(null),a=!1,c=!1,l=!1,h=-1,u=-1,p=0;for(;p<t.length;p++){const d=t.charCodeAt(p);if(void 0===r)if(-1===u&&1===e[d])-1===h&&(h=p);else if(32===d||9===d)-1===u&&-1!==h&&(u=p);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===h)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);const e=t.slice(h,u);44===d?(n(i,e,o),o=Object.create(null)):r=e,h=u=-1}}else if(void 0===s)if(-1===u&&1===e[d])-1===h&&(h=p);else if(32===d||9===d)-1===u&&-1!==h&&(u=p);else if(59===d||44===d){if(-1===h)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p),n(o,t.slice(h,u),!0),44===d&&(n(i,r,o),o=Object.create(null),r=void 0),h=u=-1}else{if(61!==d||-1===h||-1!==u)throw new SyntaxError(`Unexpected character at index ${p}`);s=t.slice(h,p),h=u=-1}else if(c){if(1!==e[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===h?h=p:a||(a=!0),c=!1}else if(l)if(1===e[d])-1===h&&(h=p);else if(34===d&&-1!==h)l=!1,u=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===d&&61===t.charCodeAt(p-1))l=!0;else if(-1===u&&1===e[d])-1===h&&(h=p);else if(-1===h||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===h)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);let e=t.slice(h,u);a&&(e=e.replace(/\\/g,""),a=!1),n(o,s,e),44===d&&(n(i,r,o),o=Object.create(null),r=void 0),s=void 0,h=u=-1}}else-1===u&&(u=p)}if(-1===h||l)throw new SyntaxError("Unexpected end of input");-1===u&&(u=p);const d=t.slice(h,u);return void 0===r?n(i,d,o):(void 0===s?n(o,d,!0):n(o,s,a?d.replace(/\\/g,""):d),n(i,r,o)),i}}},4759:t=>{"use strict";const e=Symbol("kDone"),n=Symbol("kRun");t.exports=class{constructor(t){this[e]=()=>{this.pending--,this[n]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[n]()}[n](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[e])}}}},2971:(t,e,n)=>{"use strict";const i=n(3106),r=n(3338),s=n(4759),{kStatusCode:o,NOOP:a}=n(2614),c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),h=Symbol("total-length"),u=Symbol("callback"),p=Symbol("buffers"),d=Symbol("error");let f;function m(t){this[p].push(t),this[h]+=t.length}function g(t){this[h]+=t.length,this[l]._maxPayload<1||this[h]<=this[l]._maxPayload?this[p].push(t):(this[d]=new RangeError("Max payload size exceeded"),this[d][o]=1009,this.removeListener("data",g),this.reset())}function _(t){this[l]._inflate=null,t[o]=1007,this[u](t)}t.exports=class{constructor(t,e,n){if(this._maxPayload=0|n,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!f){const t=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new s(t)}}static get extensionName(){return"permessage-deflate"}offer(){const t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const t=this._deflate[u];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){const e=this._options,n=t.find((t=>!(!1===e.serverNoContextTakeover&&t.server_no_context_takeover||t.server_max_window_bits&&(!1===e.serverMaxWindowBits||"number"==typeof e.serverMaxWindowBits&&e.serverMaxWindowBits>t.server_max_window_bits)||"number"==typeof e.clientMaxWindowBits&&!t.client_max_window_bits)));if(!n)throw new Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(n.server_no_context_takeover=!0),e.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof e.serverMaxWindowBits&&(n.server_max_window_bits=e.serverMaxWindowBits),"number"==typeof e.clientMaxWindowBits?n.client_max_window_bits=e.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==e.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(t){const e=t[0];if(!1===this._options.clientNoContextTakeover&&e.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(e.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(e.client_max_window_bits=this._options.clientMaxWindowBits);return e}normalizeParams(t){return t.forEach((t=>{Object.keys(t).forEach((e=>{let n=t[e];if(n.length>1)throw new Error(`Parameter "${e}" must have only a single value`);if(n=n[0],"client_max_window_bits"===e){if(!0!==n){const t=+n;if(!Number.isInteger(t)||t<8||t>15)throw new TypeError(`Invalid value for parameter "${e}": ${n}`);n=t}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${e}": ${n}`)}else if("server_max_window_bits"===e){const t=+n;if(!Number.isInteger(t)||t<8||t>15)throw new TypeError(`Invalid value for parameter "${e}": ${n}`);n=t}else{if("client_no_context_takeover"!==e&&"server_no_context_takeover"!==e)throw new Error(`Unknown parameter "${e}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${e}": ${n}`)}t[e]=n}))})),t}decompress(t,e,n){f.add((i=>{this._decompress(t,e,((t,e)=>{i(),n(t,e)}))}))}compress(t,e,n){f.add((i=>{this._compress(t,e,((t,e)=>{i(),n(t,e)}))}))}_decompress(t,e,n){const s=this._isServer?"client":"server";if(!this._inflate){const t=`${s}_max_window_bits`,e="number"!=typeof this.params[t]?i.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:e}),this._inflate[l]=this,this._inflate[h]=0,this._inflate[p]=[],this._inflate.on("error",_),this._inflate.on("data",g)}this._inflate[u]=n,this._inflate.write(t),e&&this._inflate.write(c),this._inflate.flush((()=>{const t=this._inflate[d];if(t)return this._inflate.close(),this._inflate=null,void n(t);const i=r.concat(this._inflate[p],this._inflate[h]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[h]=0,this._inflate[p]=[],e&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,i)}))}_compress(t,e,n){const s=this._isServer?"server":"client";if(!this._deflate){const t=`${s}_max_window_bits`,e="number"!=typeof this.params[t]?i.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:e}),this._deflate[h]=0,this._deflate[p]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[u]=n,this._deflate.write(t),this._deflate.flush(i.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let t=r.concat(this._deflate[p],this._deflate[h]);e&&(t=t.slice(0,t.length-4)),this._deflate[u]=null,this._deflate[h]=0,this._deflate[p]=[],e&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,t)}))}}},6286:(t,e,n)=>{"use strict";const{Writable:i}=n(2203),r=n(2971),{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=n(2614),{concat:l,toArrayBuffer:h,unmask:u}=n(3338),{isValidStatusCode:p,isValidUTF8:d}=n(5880);function f(t,e,n,i){const r=new t(n?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(r,f),r[a]=i,r}t.exports=class extends i{constructor(t,e,n,i){super(),this._binaryType=t||s[0],this[c]=void 0,this._extensions=e||{},this._isServer=!!n,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(t,e,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(n)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){const e=this._buffers[0];return this._buffers[0]=e.slice(t),e.slice(0,t)}const e=Buffer.allocUnsafe(t);do{const n=this._buffers[0],i=e.length-t;t>=n.length?e.set(this._buffers.shift(),i):(e.set(new Uint8Array(n.buffer,n.byteOffset,t),i),this._buffers[0]=n.slice(t)),t-=n.length}while(t>0);return e}startLoop(t){let e;this._loop=!0;do{switch(this._state){case 0:e=this.getInfo();break;case 1:e=this.getPayloadLength16();break;case 2:e=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:e=this.getData(t);break;default:return void(this._loop=!1)}}while(this._loop);t(e)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const e=!(64&~t[0]);if(e&&!this._extensions[r.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(e)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=e}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(e)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),e=t.readUInt32BE(0);return e>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=e*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(t){let e=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);e=this.consume(this._payloadLength),this._masked&&u(e,this._mask)}return this._opcode>7?this.controlMessage(e):this._compressed?(this._state=5,void this.decompress(e,t)):(e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage())}decompress(t,e){this._extensions[r.extensionName].decompress(t,this._fin,((t,n)=>{if(t)return e(t);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return e(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const i=this.dataMessage();if(i)return e(i);this.startLoop(e)}))}dataMessage(){if(this._fin){const t=this._messageLength,e=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?l(e,t):"arraybuffer"===this._binaryType?h(l(e,t)):e,this.emit("message",n)}else{const n=l(e,t);if(!d(n))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",n.toString())}}this._state=0}controlMessage(t){if(8===this._opcode)if(this._loop=!1,0===t.length)this.emit("conclude",1005,""),this.end();else{if(1===t.length)return f(RangeError,"invalid payload length 1",!0,1002);{const e=t.readUInt16BE(0);if(!p(e))return f(RangeError,`invalid status code ${e}`,!0,1002);const n=t.slice(2);if(!d(n))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",e,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",t):this.emit("pong",t);this._state=0}}},914:(t,e,n)=>{"use strict";const{randomFillSync:i}=n(6982),r=n(2971),{EMPTY_BUFFER:s}=n(2614),{isValidStatusCode:o}=n(5880),{mask:a,toBuffer:c}=n(3338),l=Buffer.alloc(4);class h{constructor(t,e){this._extensions=e||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){const n=e.mask&&e.readOnly;let r=e.mask?6:2,s=t.length;t.length>=65536?(r+=8,s=127):t.length>125&&(r+=2,s=126);const o=Buffer.allocUnsafe(n?t.length+r:r);return o[0]=e.fin?128|e.opcode:e.opcode,e.rsv1&&(o[0]|=64),o[1]=s,126===s?o.writeUInt16BE(t.length,2):127===s&&(o.writeUInt32BE(0,2),o.writeUInt32BE(t.length,6)),e.mask?(i(l,0,4),o[1]|=128,o[r-4]=l[0],o[r-3]=l[1],o[r-2]=l[2],o[r-1]=l[3],n?(a(t,l,o,r,t.length),[o]):(a(t,l,t,0,t.length),[o,t])):[o,t]}close(t,e,n,i){let r;if(void 0===t)r=s;else{if("number"!=typeof t||!o(t))throw new TypeError("First argument must be a valid error code number");if(void 0===e||""===e)r=Buffer.allocUnsafe(2),r.writeUInt16BE(t,0);else{const n=Buffer.byteLength(e);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");r=Buffer.allocUnsafe(2+n),r.writeUInt16BE(t,0),r.write(e,2)}}this._deflating?this.enqueue([this.doClose,r,n,i]):this.doClose(r,n,i)}doClose(t,e,n){this.sendFrame(h.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:e,readOnly:!1}),n)}ping(t,e,n){const i=c(t);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,e,c.readOnly,n]):this.doPing(i,e,c.readOnly,n)}doPing(t,e,n,i){this.sendFrame(h.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:e,readOnly:n}),i)}pong(t,e,n){const i=c(t);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,e,c.readOnly,n]):this.doPong(i,e,c.readOnly,n)}doPong(t,e,n,i){this.sendFrame(h.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:e,readOnly:n}),i)}send(t,e,n){const i=c(t),s=this._extensions[r.extensionName];let o=e.binary?2:1,a=e.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),e.fin&&(this._firstFragment=!0),s){const t={fin:e.fin,rsv1:a,opcode:o,mask:e.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,t,n]):this.dispatch(i,this._compress,t,n)}else this.sendFrame(h.frame(i,{fin:e.fin,rsv1:!1,opcode:o,mask:e.mask,readOnly:c.readOnly}),n)}dispatch(t,e,n,i){if(!e)return void this.sendFrame(h.frame(t,n),i);const s=this._extensions[r.extensionName];this._bufferedBytes+=t.length,this._deflating=!0,s.compress(t,n.fin,((e,r)=>{if(this._socket.destroyed){const t=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(t);for(let e=0;e<this._queue.length;e++){const n=this._queue[e][4];"function"==typeof n&&n(t)}}else this._bufferedBytes-=t.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(h.frame(r,n),i),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const t=this._queue.shift();this._bufferedBytes-=t[1].length,Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[1].length,this._queue.push(t)}sendFrame(t,e){2===t.length?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}}t.exports=h},3719:(t,e,n)=>{"use strict";const{Duplex:i}=n(2203);function r(t){t.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(t){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",t)}t.exports=function(t,e){let n=!0;function a(){n&&t._socket.resume()}t.readyState===t.CONNECTING?t.once("open",(function(){t._receiver.removeAllListeners("drain"),t._receiver.on("drain",a)})):(t._receiver.removeAllListeners("drain"),t._receiver.on("drain",a));const c=new i({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",(function(e){c.push(e)||(n=!1,t._socket.pause())})),t.once("error",(function(t){c.destroyed||c.destroy(t)})),t.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(e,n){if(t.readyState===t.CLOSED)return n(e),void process.nextTick(r,c);let i=!1;t.once("error",(function(t){i=!0,n(t)})),t.once("close",(function(){i||n(e),process.nextTick(r,c)})),t.terminate()},c._final=function(e){t.readyState!==t.CONNECTING?null!==t._socket&&(t._socket._writableState.finished?(e(),c._readableState.endEmitted&&c.destroy()):(t._socket.once("finish",(function(){e()})),t.close())):t.once("open",(function(){c._final(e)}))},c._read=function(){t.readyState!==t.OPEN||n||(n=!0,t._receiver._writableState.needDrain||t._socket.resume())},c._write=function(e,n,i){t.readyState!==t.CONNECTING?t.send(e,i):t.once("open",(function(){c._write(e,n,i)}))},c.on("end",s),c.on("error",o),c}},5880:(t,e,n)=>{"use strict";function i(t){return t>=1e3&&t<=1014&&1004!==t&&1005!==t&&1006!==t||t>=3e3&&t<=4999}function r(t){const e=t.length;let n=0;for(;n<e;)if(128&t[n])if(192==(224&t[n])){if(n+1===e||128!=(192&t[n+1])||192==(254&t[n]))return!1;n+=2}else if(224==(240&t[n])){if(n+2>=e||128!=(192&t[n+1])||128!=(192&t[n+2])||224===t[n]&&128==(224&t[n+1])||237===t[n]&&160==(224&t[n+1]))return!1;n+=3}else{if(240!=(248&t[n]))return!1;if(n+3>=e||128!=(192&t[n+1])||128!=(192&t[n+2])||128!=(192&t[n+3])||240===t[n]&&128==(240&t[n+1])||244===t[n]&&t[n+1]>143||t[n]>244)return!1;n+=4}else n++;return!0}try{let e=n(Object(function(){var t=new Error("Cannot find module 'utf-8-validate'");throw t.code="MODULE_NOT_FOUND",t}()));"object"==typeof e&&(e=e.Validation.isValidUTF8),t.exports={isValidStatusCode:i,isValidUTF8:t=>t.length<150?r(t):e(t)}}catch(e){t.exports={isValidStatusCode:i,isValidUTF8:r}}},1722:(t,e,n)=>{"use strict";const i=n(4434),{createHash:r}=n(6982),{createServer:s,STATUS_CODES:o}=n(8611),a=n(2971),c=n(1060),{format:l,parse:h}=n(5926),{GUID:u,kWebSocket:p}=n(2614),d=/^[+/0-9A-Za-z]{22}==$/;function f(t){t.emit("close")}function m(){this.destroy()}function g(t,e,n,i){t.writable&&(n=n||o[e],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...i},t.write(`HTTP/1.1 ${e} ${o[e]}\r\n`+Object.keys(i).map((t=>`${t}: ${i[t]}`)).join("\r\n")+"\r\n\r\n"+n)),t.removeListener("error",m),t.destroy()}function _(t){return t.trim()}t.exports=class extends i{constructor(t,e){if(super(),null==(t={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...t}).port&&!t.server&&!t.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=t.port?(this._server=s(((t,e)=>{const n=o[426];e.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),e.end(n)})),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){const t=this.emit.bind(this,"connection");this._removeListeners=function(t,e){for(const n of Object.keys(e))t.on(n,e[n]);return function(){for(const n of Object.keys(e))t.removeListener(n,e[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,n,i)=>{this.handleUpgrade(e,n,i,t)}})}!0===t.perMessageDeflate&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set),this.options=t}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(t&&this.once("close",t),this.clients)for(const t of this.clients)t.terminate();const e=this._server;e&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?e.close((()=>this.emit("close"))):process.nextTick(f,this)}shouldHandle(t){if(this.options.path){const e=t.url.indexOf("?");if((-1!==e?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,n,i){e.on("error",m);const r=void 0!==t.headers["sec-websocket-key"]&&t.headers["sec-websocket-key"].trim(),s=+t.headers["sec-websocket-version"],o={};if("GET"!==t.method||"websocket"!==t.headers.upgrade.toLowerCase()||!r||!d.test(r)||8!==s&&13!==s||!this.shouldHandle(t))return g(e,400);if(this.options.perMessageDeflate){const n=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=h(t.headers["sec-websocket-extensions"]);e[a.extensionName]&&(n.accept(e[a.extensionName]),o[a.extensionName]=n)}catch(t){return g(e,400)}}if(this.options.verifyClient){const a={origin:t.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!t.socket.authorized&&!t.socket.encrypted),req:t};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,((s,a,c,l)=>{if(!s)return g(e,a||401,c,l);this.completeUpgrade(r,o,t,e,n,i)}));if(!this.options.verifyClient(a))return g(e,401)}this.completeUpgrade(r,o,t,e,n,i)}completeUpgrade(t,e,n,i,s,o){if(!i.readable||!i.writable)return i.destroy();if(i[p])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${r("sha1").update(t+u).digest("base64")}`],d=new c(null);let f=n.headers["sec-websocket-protocol"];if(f&&(f=f.split(",").map(_),f=this.options.handleProtocols?this.options.handleProtocols(f,n):f[0],f&&(h.push(`Sec-WebSocket-Protocol: ${f}`),d._protocol=f)),e[a.extensionName]){const t=e[a.extensionName].params,n=l({[a.extensionName]:[t]});h.push(`Sec-WebSocket-Extensions: ${n}`),d._extensions=e}this.emit("headers",h,n),i.write(h.concat("\r\n").join("\r\n")),i.removeListener("error",m),d.setSocket(i,s,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",(()=>this.clients.delete(d)))),o(d,n)}}},1060:(t,e,n)=>{"use strict";const i=n(4434),r=n(5692),s=n(8611),o=n(9278),a=n(4756),{randomBytes:c,createHash:l}=n(6982),{URL:h}=n(7016),u=n(2971),p=n(6286),d=n(914),{BINARY_TYPES:f,EMPTY_BUFFER:m,GUID:g,kStatusCode:_,kWebSocket:y,NOOP:b}=n(2614),{addEventListener:v,removeEventListener:w}=n(597),{format:x,parse:E}=n(5926),{toBuffer:S}=n(3338),k=["CONNECTING","OPEN","CLOSING","CLOSED"],T=[8,13];class C extends i{constructor(t,e,n){super(),this._binaryType=f[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=C.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==t?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(e)?e=e.join(", "):"object"==typeof e&&null!==e&&(n=e,e=void 0),O(this,t,e,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(t){f.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,n){const i=new p(this.binaryType,this._extensions,this._isServer,n);this._sender=new d(t,this._extensions),this._receiver=i,this._socket=t,i[y]=this,t[y]=this,i.on("conclude",M),i.on("drain",D),i.on("error",R),i.on("message",F),i.on("ping",L),i.on("pong",U),t.setTimeout(0),t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",j),t.on("data",z),t.on("end",G),t.on("error",q),this._readyState=C.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=C.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[u.extensionName]&&this._extensions[u.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=C.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const t="WebSocket was closed before the connection was established";return P(this,this._req,t)}this.readyState!==C.CLOSING?(this._readyState=C.CLOSING,this._sender.close(t,e,!this._isServer,(t=>{t||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(t,e,n){if(this.readyState===C.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof t?(n=t,t=e=void 0):"function"==typeof e&&(n=e,e=void 0),"number"==typeof t&&(t=t.toString()),this.readyState===C.OPEN?(void 0===e&&(e=!this._isServer),this._sender.ping(t||m,e,n)):N(this,t,n)}pong(t,e,n){if(this.readyState===C.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof t?(n=t,t=e=void 0):"function"==typeof e&&(n=e,e=void 0),"number"==typeof t&&(t=t.toString()),this.readyState===C.OPEN?(void 0===e&&(e=!this._isServer),this._sender.pong(t||m,e,n)):N(this,t,n)}send(t,e,n){if(this.readyState===C.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e&&(n=e,e={}),"number"==typeof t&&(t=t.toString()),this.readyState!==C.OPEN)return void N(this,t,n);const i={binary:"string"!=typeof t,mask:!this._isServer,compress:!0,fin:!0,...e};this._extensions[u.extensionName]||(i.compress=!1),this._sender.send(t||m,i,n)}terminate(){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const t="WebSocket was closed before the connection was established";return P(this,this._req,t)}this._socket&&(this._readyState=C.CLOSING,this._socket.destroy())}}}function O(t,e,n,i){const o={protocolVersion:T[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!T.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${T.join(", ")})`);let a;e instanceof h?(a=e,t._url=e.href):(a=new h(e),t._url=e);const p="ws+unix:"===a.protocol;if(!(a.host||p&&a.pathname))throw new Error(`Invalid URL: ${t.url}`);const d="wss:"===a.protocol||"https:"===a.protocol,f=d?443:80,m=c(16).toString("base64"),_=d?r.get:s.get;let y;if(o.createConnection=d?A:I,o.defaultPort=o.defaultPort||f,o.port=a.port||f,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...o.headers},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(y=new u(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=x({[u.extensionName]:y.offer()})),n&&(o.headers["Sec-WebSocket-Protocol"]=n),o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),p){const t=o.path.split(":");o.socketPath=t[0],o.path=t[1]}let b=t._req=_(o);o.timeout&&b.on("timeout",(()=>{P(t,b,"Opening handshake has timed out")})),b.on("error",(e=>{null===b||b.aborted||(b=t._req=null,t._readyState=C.CLOSING,t.emit("error",e),t.emitClose())})),b.on("response",(r=>{const s=r.headers.location,a=r.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++t._redirects>o.maxRedirects)return void P(t,b,"Maximum redirects exceeded");b.abort();const r=new h(s,e);O(t,r,n,i)}else t.emit("unexpected-response",b,r)||P(t,b,`Unexpected server response: ${r.statusCode}`)})),b.on("upgrade",((e,i,r)=>{if(t.emit("upgrade",e),t.readyState!==C.CONNECTING)return;b=t._req=null;const s=l("sha1").update(m+g).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void P(t,i,"Invalid Sec-WebSocket-Accept header");const a=e.headers["sec-websocket-protocol"],c=(n||"").split(/, */);let h;if(!n&&a?h="Server sent a subprotocol but none was requested":n&&!a?h="Server sent no subprotocol":a&&!c.includes(a)&&(h="Server sent an invalid subprotocol"),h)P(t,i,h);else{if(a&&(t._protocol=a),y)try{const n=E(e.headers["sec-websocket-extensions"]);n[u.extensionName]&&(y.accept(n[u.extensionName]),t._extensions[u.extensionName]=y)}catch(e){return void P(t,i,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(i,r,o.maxPayload)}}))}function I(t){return t.path=t.socketPath,o.connect(t)}function A(t){return t.path=void 0,t.servername||""===t.servername||(t.servername=o.isIP(t.host)?"":t.host),a.connect(t)}function P(t,e,n){t._readyState=C.CLOSING;const i=new Error(n);Error.captureStackTrace(i,P),e.setHeader?(e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),e.once("abort",t.emitClose.bind(t)),t.emit("error",i)):(e.destroy(i),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function N(t,e,n){if(e){const n=S(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}n&&n(new Error(`WebSocket is not open: readyState ${t.readyState} (${k[t.readyState]})`))}function M(t,e){const n=this[y];n._socket.removeListener("data",z),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=e,n._closeCode=t,1005===t?n.close():n.close(t,e)}function D(){this[y]._socket.resume()}function R(t){const e=this[y];e._socket.removeListener("data",z),e._readyState=C.CLOSING,e._closeCode=t[_],e.emit("error",t),e._socket.destroy()}function B(){this[y].emitClose()}function F(t){this[y].emit("message",t)}function L(t){const e=this[y];e.pong(t,!e._isServer,b),e.emit("ping",t)}function U(t){this[y].emit("pong",t)}function j(){const t=this[y];this.removeListener("close",j),this.removeListener("end",G),t._readyState=C.CLOSING,t._socket.read(),t._receiver.end(),this.removeListener("data",z),this[y]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",B),t._receiver.on("finish",B))}function z(t){this[y]._receiver.write(t)||this.pause()}function G(){const t=this[y];t._readyState=C.CLOSING,t._receiver.end(),this.end()}function q(){const t=this[y];this.removeListener("error",q),this.on("error",b),t&&(t._readyState=C.CLOSING,this.destroy())}k.forEach(((t,e)=>{const n={enumerable:!0,value:e};Object.defineProperty(C.prototype,t,n),Object.defineProperty(C,t,n)})),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((t=>{Object.defineProperty(C.prototype,t,{enumerable:!0})})),["open","error","close","message"].forEach((t=>{Object.defineProperty(C.prototype,`on${t}`,{configurable:!0,enumerable:!0,get(){const e=this.listeners(t);for(let t=0;t<e.length;t++)if(e[t]._listener)return e[t]._listener},set(e){const n=this.listeners(t);for(let e=0;e<n.length;e++)n[e]._listener&&this.removeListener(t,n[e]);this.addEventListener(t,e)}})})),C.prototype.addEventListener=v,C.prototype.removeEventListener=w,t.exports=C},3177:function(t,e){(function(){"use strict";e.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},6712:function(t,e,n){(function(){"use strict";var t,i,r,s,o,a={}.hasOwnProperty;t=n(9665),i=n(6465).defaults,s=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},o=function(t){return"<![CDATA["+r(t)+"]]>"},r=function(t){return t.replace("]]>","]]]]><![CDATA[>")},e.Builder=function(){function e(t){var e,n,r;for(e in this.options={},n=i[.2])a.call(n,e)&&(r=n[e],this.options[e]=r);for(e in t)a.call(t,e)&&(r=t[e],this.options[e]=r)}return e.prototype.buildObject=function(e){var n,r,c,l,h,u;return n=this.options.attrkey,r=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===i[.2].rootName?e=e[h=Object.keys(e)[0]]:h=this.options.rootName,u=this,c=function(t,e){var i,l,h,p,d,f;if("object"!=typeof e)u.options.cdata&&s(e)?t.raw(o(e)):t.txt(e);else if(Array.isArray(e)){for(p in e)if(a.call(e,p))for(d in l=e[p])h=l[d],t=c(t.ele(d),h).up()}else for(d in e)if(a.call(e,d))if(l=e[d],d===n){if("object"==typeof l)for(i in l)f=l[i],t=t.att(i,f)}else if(d===r)t=u.options.cdata&&s(l)?t.raw(o(l)):t.txt(l);else if(Array.isArray(l))for(p in l)a.call(l,p)&&(t="string"==typeof(h=l[p])?u.options.cdata&&s(h)?t.ele(d).raw(o(h)).up():t.ele(d,h).up():c(t.ele(d),h).up());else"object"==typeof l?t=c(t.ele(d),l).up():"string"==typeof l&&u.options.cdata&&s(l)?t=t.ele(d).raw(o(l)).up():(null==l&&(l=""),t=t.ele(d,l.toString()).up());return t},l=t.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(l,e).end(this.options.renderOpts)},e}()}).call(this)},6465:function(t,e){(function(){e.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},1912:function(t,e,n){(function(){"use strict";var t,i,r,s,o,a,c,l,h=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty;c=n(4043),r=n(4434),t=n(3177),a=n(2114),l=n(3557).setImmediate,i=n(6465).defaults,s=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},o=function(t,e,n){var i,r;for(i=0,r=t.length;i<r;i++)e=(0,t[i])(e,n);return e},e.Parser=function(n){function r(t){var n,r,s;if(this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(n in this.options={},r=i[.2])u.call(r,n)&&(s=r[n],this.options[n]=s);for(n in t)u.call(t,n)&&(s=t[n],this.options[n]=s);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,n),r.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),l(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},r.prototype.assignOrPush=function(t,e,n){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(n)):this.options.explicitArray?t[e]=[n]:t[e]=n},r.prototype.reset=function(){var t,e,n,i,r;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(r=this,function(t){if(r.saxParser.resume(),!r.saxParser.errThrown)return r.saxParser.errThrown=!0,r.emit("error",t)}),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,i=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(n){return function(r){var s,a,c,l,h;if((c={})[e]="",!n.options.ignoreAttrs)for(s in h=r.attributes)u.call(h,s)&&(t in c||n.options.mergeAttrs||(c[t]={}),a=n.options.attrValueProcessors?o(n.options.attrValueProcessors,r.attributes[s],s):r.attributes[s],l=n.options.attrNameProcessors?o(n.options.attrNameProcessors,s):s,n.options.mergeAttrs?n.assignOrPush(c,l,a):c[t][l]=a);return c["#name"]=n.options.tagNameProcessors?o(n.options.tagNameProcessors,r.name):r.name,n.options.xmlns&&(c[n.options.xmlnskey]={uri:r.uri,local:r.local}),i.push(c)}}(this),this.saxParser.onclosetag=function(t){return function(){var n,r,a,c,l,h,p,d,f,m;if(h=i.pop(),l=h["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete h["#name"],!0===h.cdata&&(n=h.cdata,delete h.cdata),f=i[i.length-1],h[e].match(/^\s*$/)&&!n?(r=h[e],delete h[e]):(t.options.trim&&(h[e]=h[e].trim()),t.options.normalize&&(h[e]=h[e].replace(/\s{2,}/g," ").trim()),h[e]=t.options.valueProcessors?o(t.options.valueProcessors,h[e],l):h[e],1===Object.keys(h).length&&e in h&&!t.EXPLICIT_CHARKEY&&(h=h[e])),s(h)&&(h=""!==t.options.emptyTag?t.options.emptyTag:r),null!=t.options.validator&&(m="/"+function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)c=i[t],n.push(c["#name"]);return n}().concat(l).join("/"),function(){var e;try{return h=t.options.validator(m,f&&f[l],h)}catch(n){return e=n,t.emit("error",e)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof h)if(t.options.preserveChildrenOrder){if(f){for(a in f[t.options.childkey]=f[t.options.childkey]||[],p={},h)u.call(h,a)&&(p[a]=h[a]);f[t.options.childkey].push(p),delete h["#name"],1===Object.keys(h).length&&e in h&&!t.EXPLICIT_CHARKEY&&(h=h[e])}}else c={},t.options.attrkey in h&&(c[t.options.attrkey]=h[t.options.attrkey],delete h[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in h&&(c[t.options.charkey]=h[t.options.charkey],delete h[t.options.charkey]),Object.getOwnPropertyNames(h).length>0&&(c[t.options.childkey]=h),h=c;return i.length>0?t.assignOrPush(f,l,h):(t.options.explicitRoot&&(d=h,(h={})[l]=d),t.resultObject=h,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),n=function(t){return function(n){var r,s;if(s=i[i.length-1])return s[e]+=n,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(s[t.options.childkey]=s[t.options.childkey]||[],(r={"#name":"__text__"})[e]=n,t.options.normalize&&(r[e]=r[e].replace(/\s{2,}/g," ").trim()),s[t.options.childkey].push(r)),s}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(t){var e;if(e=n(t))return e.cdata=!0}},r.prototype.parseString=function(e,n){var i;null!=n&&"function"==typeof n&&(this.on("end",(function(t){return this.reset(),n(null,t)})),this.on("error",(function(t){return this.reset(),n(t)})));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,l(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(t){if(i=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",i),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw i}},r.prototype.parseStringPromise=function(t){return new Promise((e=this,function(n,i){return e.parseString(t,(function(t,e){return t?i(t):n(e)}))}));var e},r}(r),e.parseString=function(t,n,i){var r,s;return null!=i?("function"==typeof i&&(r=i),"object"==typeof n&&(s=n)):("function"==typeof n&&(r=n),s={}),new e.Parser(s).parseString(t,r)},e.parseStringPromise=function(t,n){var i;return"object"==typeof n&&(i=n),new e.Parser(i).parseStringPromise(t)}}).call(this)},2114:function(t,e){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),e.normalize=function(t){return t.toLowerCase()},e.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},e.stripPrefix=function(e){return e.replace(t,"")},e.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},e.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},8805:function(t,e,n){(function(){"use strict";var t,i,r,s,o={}.hasOwnProperty;i=n(6465),t=n(6712),r=n(1912),s=n(2114),e.defaults=i.defaults,e.processors=s,e.ValidationError=function(){function t(t){this.message=t}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(t,Error),t}(),e.Builder=t.Builder,e.Parser=r.Parser,e.parseString=r.parseString,e.parseStringPromise=r.parseStringPromise}).call(this)},4923:function(t){(function(){t.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},1737:function(t){(function(){t.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},9241:function(t){(function(){var e,n,i,r,s,o,a,c=[].slice,l={}.hasOwnProperty;e=function(){var t,e,n,i,r,o;if(o=arguments[0],r=2<=arguments.length?c.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=r.length;t<n;t++)if(null!=(i=r[t]))for(e in i)l.call(i,e)&&(o[e]=i[e]);return o},s=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},o=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},i=function(t){return s(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},r=function(t){var e;if(i(t))return!t.length;for(e in t)if(l.call(t,e))return!1;return!0},a=function(t){var e,n;return o(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},n=function(t){return s(t.valueOf)?t.valueOf():t},t.exports.assign=e,t.exports.isFunction=s,t.exports.isObject=o,t.exports.isArray=i,t.exports.isEmpty=r,t.exports.isPlainObject=a,t.exports.getValue=n}).call(this)},8753:function(t){(function(){t.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},4238:function(t,e,n){(function(){var e;e=n(1737),n(468),t.exports=function(){function t(t,n,i){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(i),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))},t.prototype.debugInfo=function(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(t){return t.namespaceURI===this.namespaceURI&&t.prefix===this.prefix&&t.localName===this.localName&&t.value===this.value},t}()}).call(this)},2691:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;e=n(1737),i=n(7457),t.exports=function(t){function n(t,i){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(i)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},7457:function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(468),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.value=""}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.substringData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.insertData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.deleteData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceData=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.data===this.data},e}(e)}).call(this)},2679:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;e=n(1737),i=n(7457),t.exports=function(t){function n(t,i){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(i)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},3074:function(t,e,n){(function(){var e,i;e=n(5660),i=n(2527),t.exports=function(){function t(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(t.prototype,"parameterNames",{get:function(){return new i(Object.keys(this.defaultParams))}}),t.prototype.getParameter=function(t){return this.params.hasOwnProperty(t)?this.params[t]:null},t.prototype.canSetParameter=function(t,e){return!0},t.prototype.setParameter=function(t,e){return null!=e?this.params[t]=e:delete this.params[t]},t}()}).call(this)},5660:function(t){(function(){t.exports=function(){function t(){}return t.prototype.handleError=function(t){throw new Error(t)},t}()}).call(this)},7260:function(t){(function(){t.exports=function(){function t(){}return t.prototype.hasFeature=function(t,e){return!0},t.prototype.createDocumentType=function(t,e,n){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(t,e,n){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},2527:function(t){(function(){t.exports=function(){function t(t){this.arr=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(t){return this.arr[t]||null},t.prototype.contains=function(t){return-1!==this.arr.indexOf(t)},t}()}).call(this)},4111:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;i=n(468),e=n(1737),t.exports=function(t){function n(t,i,r,s,o,a){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==r)throw new Error("Missing DTD attribute name. "+this.debugInfo(i));if(!s)throw new Error("Missing DTD attribute type. "+this.debugInfo(i));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(i));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(i));if(a&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(i));this.elementName=this.stringify.name(i),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(r),this.attributeType=this.stringify.dtdAttType(s),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=o}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.toString=function(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},7696:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;i=n(468),e=n(1737),t.exports=function(t){function n(t,i,r){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());r||(r="(#PCDATA)"),Array.isArray(r)&&(r="("+r.join(",")+")"),this.name=this.stringify.name(i),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(r)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.toString=function(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},5529:function(t,e,n){(function(){var e,i,r,s={}.hasOwnProperty;r=n(9241).isObject,i=n(468),e=n(1737),t.exports=function(t){function n(t,i,s,o){if(n.__super__.constructor.call(this,t),null==s)throw new Error("Missing DTD entity name. "+this.debugInfo(s));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(s));if(this.pe=!!i,this.name=this.stringify.name(s),this.type=e.EntityDeclaration,r(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(s));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(s));if(this.internal=!1,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(s))}else this.value=this.stringify.dtdEntityValue(o),this.internal=!0}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n.prototype.toString=function(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},8012:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;i=n(468),e=n(1737),t.exports=function(t){function n(t,i,r){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing DTD notation name. "+this.debugInfo(i));if(!r.pubID&&!r.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(i));this.name=this.stringify.name(i),this.type=e.NotationDeclaration,null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID))}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},4130:function(t,e,n){(function(){var e,i,r,s={}.hasOwnProperty;r=n(9241).isObject,i=n(468),e=n(1737),t.exports=function(t){function n(t,i,s,o){var a;n.__super__.constructor.call(this,t),r(i)&&(i=(a=i).version,s=a.encoding,o=a.standalone),i||(i="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(i),null!=s&&(this.encoding=this.stringify.xmlEncoding(s)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.toString=function(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},6376:function(t,e,n){(function(){var e,i,r,s,o,a,c,l,h={}.hasOwnProperty;l=n(9241).isObject,c=n(468),e=n(1737),i=n(4111),s=n(5529),r=n(7696),o=n(8012),a=n(4797),t.exports=function(t){function n(t,i,r){var s,o,a,c,h,u;if(n.__super__.constructor.call(this,t),this.type=e.DocType,t.children)for(o=0,a=(c=t.children).length;o<a;o++)if((s=c[o]).type===e.Element){this.name=s.name;break}this.documentObject=t,l(i)&&(i=(h=i).pubID,r=h.sysID),null==r&&(r=(u=[i,r])[0],i=u[1]),null!=i&&(this.pubID=this.stringify.dtdPubID(i)),null!=r&&(this.sysID=this.stringify.dtdSysID(r))}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"entities",{get:function(){var t,n,i,r,s;for(r={},n=0,i=(s=this.children).length;n<i;n++)(t=s[n]).type!==e.EntityDeclaration||t.pe||(r[t.name]=t);return new a(r)}}),Object.defineProperty(n.prototype,"notations",{get:function(){var t,n,i,r,s;for(r={},n=0,i=(s=this.children).length;n<i;n++)(t=s[n]).type===e.NotationDeclaration&&(r[t.name]=t);return new a(r)}}),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),n.prototype.element=function(t,e){var n;return n=new r(this,t,e),this.children.push(n),this},n.prototype.attList=function(t,e,n,r,s){var o;return o=new i(this,t,e,n,r,s),this.children.push(o),this},n.prototype.entity=function(t,e){var n;return n=new s(this,!1,t,e),this.children.push(n),this},n.prototype.pEntity=function(t,e){var n;return n=new s(this,!0,t,e),this.children.push(n),this},n.prototype.notation=function(t,e){var n;return n=new o(this,t,e),this.children.push(n),this},n.prototype.toString=function(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))},n.prototype.ele=function(t,e){return this.element(t,e)},n.prototype.att=function(t,e,n,i,r){return this.attList(t,e,n,i,r)},n.prototype.ent=function(t,e){return this.entity(t,e)},n.prototype.pent=function(t,e){return this.pEntity(t,e)},n.prototype.not=function(t,e){return this.notation(t,e)},n.prototype.up=function(){return this.root()||this.documentObject},n.prototype.isEqualNode=function(t){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.name===this.name&&t.publicId===this.publicId&&t.systemId===this.systemId},n}(c)}).call(this)},1933:function(t,e,n){(function(){var e,i,r,s,o,a,c,l={}.hasOwnProperty;c=n(9241).isPlainObject,r=n(7260),i=n(3074),s=n(468),e=n(1737),a=n(3976),o=n(382),t.exports=function(t){function n(t){n.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new i,t||(t={}),t.writer||(t.writer=new o),this.options=t,this.stringify=new a(t)}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"implementation",{value:new r}),Object.defineProperty(n.prototype,"doctype",{get:function(){var t,n,i,r;for(n=0,i=(r=this.children).length;n<i;n++)if((t=r[n]).type===e.DocType)return t;return null}}),Object.defineProperty(n.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(n.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(n.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(n.prototype,"origin",{get:function(){return null}}),Object.defineProperty(n.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(n.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(n.prototype,"contentType",{get:function(){return null}}),n.prototype.end=function(t){var e;return e={},t?c(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))},n.prototype.toString=function(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))},n.prototype.createElement=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTextNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createComment=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createCDATASection=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createProcessingInstruction=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttribute=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEntityReference=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.importNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createElementNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementById=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.adoptNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.renameNode=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEvent=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createNodeIterator=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTreeWalker=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(s)}).call(this)},400:function(t,e,n){(function(){var e,i,r,s,o,a,c,l,h,u,p,d,f,m,g,_,y,b,v,w,x,E,S,k={}.hasOwnProperty;S=n(9241),x=S.isObject,w=S.isFunction,E=S.isPlainObject,v=S.getValue,e=n(1737),d=n(1933),f=n(3906),s=n(2691),o=n(2679),g=n(1268),b=n(2535),m=n(5915),u=n(4130),p=n(6376),a=n(4111),l=n(5529),c=n(7696),h=n(8012),r=n(4238),y=n(3976),_=n(382),i=n(8753),t.exports=function(){function t(t,n,i){var r;this.name="?xml",this.type=e.Document,t||(t={}),r={},t.writer?E(t.writer)&&(r=t.writer,t.writer=new _):t.writer=new _,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(r),this.stringify=new y(t),this.onDataCallback=n||function(){},this.onEndCallback=i||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.createChildNode=function(t){var n,i,r,s,o,a,c,l;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(i in r={},c=t.attribs)k.call(c,i)&&(n=c[i],r[i]=n.value);this.node(t.name,r);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(o=0,a=(l=t.children).length;o<a;o++)s=l[o],this.createChildNode(s),s.type===e.Element&&this.up();return this},t.prototype.dummy=function(){return this},t.prototype.node=function(t,e,n){var i;if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=v(t),null==e&&(e={}),e=v(e),x(e)||(n=(i=[e,n])[0],e=i[1]),this.currentNode=new f(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},t.prototype.element=function(t,n,i){var r,s,o,a,c,l;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||x(t)||w(t))for(a=this.options.noValidation,this.options.noValidation=!0,(l=new d(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=a,s=0,o=(c=l.children).length;s<o;s++)r=c[s],this.createChildNode(r),r.type===e.Element&&this.up();else this.node(t,n,i);return this},t.prototype.attribute=function(t,e){var n,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=v(t)),x(t))for(n in t)k.call(t,n)&&(i=t[n],this.attribute(n,i));else w(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new r(this,t,""):null!=e&&(this.currentNode.attribs[t]=new r(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new b(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new s(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new o(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new g(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.instruction=function(t,e){var n,i,r,s,o;if(this.openCurrent(),null!=t&&(t=v(t)),null!=e&&(e=v(e)),Array.isArray(t))for(n=0,s=t.length;n<s;n++)i=t[n],this.instruction(i);else if(x(t))for(i in t)k.call(t,i)&&(r=t[i],this.instruction(i,r));else w(e)&&(e=e.apply()),o=new m(this,t,e),this.onData(this.writer.processingInstruction(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},t.prototype.declaration=function(t,e,n){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return i=new u(this,t,e,n),this.onData(this.writer.declaration(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.doctype=function(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new p(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var n;return this.openCurrent(),n=new c(this,t,e),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.attList=function(t,e,n,i,r){var s;return this.openCurrent(),s=new a(this,t,e,n,i,r),this.onData(this.writer.dtdAttList(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.entity=function(t,e){var n;return this.openCurrent(),n=new l(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.pEntity=function(t,e){var n;return this.openCurrent(),n=new l(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.notation=function(t,e){var n;return this.openCurrent(),n=new h(this,t,e),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){var n,r,s,o;if(!t.isOpen){if(this.root||0!==this.currentLevel||t.type!==e.Element||(this.root=t),r="",t.type===e.Element){for(s in this.writerOptions.state=i.OpenTag,r=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<"+t.name,o=t.attribs)k.call(o,s)&&(n=o[s],r+=this.writer.attribute(n,this.writerOptions,this.currentLevel));r+=(t.children?">":"/>")+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=i.InsideTag}else this.writerOptions.state=i.OpenTag,r=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),t.children?(r+=" [",this.writerOptions.state=i.InsideTag):(this.writerOptions.state=i.CloseTag,r+=">"),r+=this.writer.endline(t,this.writerOptions,this.currentLevel);return this.onData(r,this.currentLevel),t.isOpen=!0}},t.prototype.closeNode=function(t){var n;if(!t.isClosed)return"",this.writerOptions.state=i.CloseTag,n=t.type===e.Element?this.writer.indent(t,this.writerOptions,this.currentLevel)+"</"+t.name+">"+this.writer.endline(t,this.writerOptions,this.currentLevel):this.writer.indent(t,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=i.None,this.onData(n,this.currentLevel),t.isClosed=!0},t.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e,n){return this.doctype(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},1218:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;i=n(468),e=n(1737),t.exports=function(t){function n(t){n.__super__.constructor.call(this,t),this.type=e.Dummy}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return""},n}(i)}).call(this)},3906:function(t,e,n){(function(){var e,i,r,s,o,a,c,l,h={}.hasOwnProperty;l=n(9241),c=l.isObject,a=l.isFunction,o=l.getValue,s=n(468),e=n(1737),i=n(4238),r=n(4797),t.exports=function(t){function n(t,i,r){var s,o,a,c;if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(i),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=r&&this.attribute(r),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(o=0,a=(c=t.children).length;o<a;o++)if((s=c[o]).type===e.DocType){s.name=this.name;break}}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new r(this.attribs)),this.attributeMap}}),n.prototype.clone=function(){var t,e,n,i;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},i=this.attribs)h.call(i,e)&&(t=i[e],n.attribs[e]=t.clone());return n.children=[],this.children.forEach((function(t){var e;return(e=t.clone()).parent=n,n.children.push(e)})),n},n.prototype.attribute=function(t,e){var n,r;if(null!=t&&(t=o(t)),c(t))for(n in t)h.call(t,n)&&(r=t[n],this.attribute(n,r));else a(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.attribs[t]=new i(this,t,""):null!=e&&(this.attribs[t]=new i(this,t,e));return this},n.prototype.removeAttribute=function(t){var e,n,i;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=o(t),Array.isArray(t))for(n=0,i=t.length;n<i;n++)e=t[n],delete this.attribs[e];else delete this.attribs[t];return this},n.prototype.toString=function(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))},n.prototype.att=function(t,e){return this.attribute(t,e)},n.prototype.a=function(t,e){return this.attribute(t,e)},n.prototype.getAttribute=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null},n.prototype.setAttribute=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNode=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null},n.prototype.setAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNS=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNodeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNodeNS=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.hasAttribute=function(t){return this.attribs.hasOwnProperty(t)},n.prototype.hasAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttribute=function(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e},n.prototype.setIdAttributeNS=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttributeNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(t){var e,i,r;if(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t))return!1;if(t.namespaceURI!==this.namespaceURI)return!1;if(t.prefix!==this.prefix)return!1;if(t.localName!==this.localName)return!1;if(t.attribs.length!==this.attribs.length)return!1;for(e=i=0,r=this.attribs.length-1;0<=r?i<=r:i>=r;e=0<=r?++i:--i)if(!this.attribs[e].isEqualNode(t.attribs[e]))return!1;return!0},n}(s)}).call(this)},4797:function(t){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(t){return this.nodes[t]},t.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},t.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},t.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},t.prototype.getNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},468:function(t,e,n){(function(){var e,i,r,s,o,a,c,l,h,u,p,d,f,m,g,_,y,b={}.hasOwnProperty;y=n(9241),_=y.isObject,g=y.isFunction,m=y.isEmpty,f=y.getValue,l=null,r=null,s=null,o=null,a=null,p=null,d=null,u=null,c=null,i=null,h=null,e=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=n(3906),r=n(2691),s=n(2679),o=n(4130),a=n(6376),p=n(1268),d=n(2535),u=n(5915),c=n(1218),i=n(1737),h=n(6684),n(4797),e=n(4923))}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new h(this.children)),this.childNodeList}}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(t.prototype,"textContent",{get:function(){var t,e,n,r,s;if(this.nodeType===i.Element||this.nodeType===i.DocumentFragment){for(s="",e=0,n=(r=this.children).length;e<n;e++)(t=r[e]).textContent&&(s+=t.textContent);return s}return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t.prototype.setParent=function(t){var e,n,i,r,s;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),s=[],n=0,i=(r=this.children).length;n<i;n++)e=r[n],s.push(e.setParent(this));return s},t.prototype.element=function(t,e,n){var i,r,s,o,a,c,l,h,u,p,d;if(c=null,null===e&&null==n&&(e=(u=[{},null])[0],n=u[1]),null==e&&(e={}),e=f(e),_(e)||(n=(p=[e,n])[0],e=p[1]),null!=t&&(t=f(t)),Array.isArray(t))for(s=0,l=t.length;s<l;s++)r=t[s],c=this.element(r);else if(g(t))c=this.element(t.apply());else if(_(t)){for(a in t)if(b.call(t,a))if(d=t[a],g(d)&&(d=d.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),d);else if(!this.options.separateArrayItems&&Array.isArray(d)&&m(d))c=this.dummy();else if(_(d)&&m(d))c=this.element(a);else if(this.options.keepNullNodes||null!=d)if(!this.options.separateArrayItems&&Array.isArray(d))for(o=0,h=d.length;o<h;o++)r=d[o],(i={})[a]=r,c=this.element(i);else _(d)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?c=this.element(d):(c=this.element(a)).element(d):c=this.element(a,d);else c=this.dummy()}else c=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return c},t.prototype.insertBefore=function(t,e,n){var i,r,s,o,a;if(null!=t?t.type:void 0)return o=e,(s=t).setParent(this),o?(r=children.indexOf(o),a=children.splice(r),children.push(s),Array.prototype.push.apply(children,a)):children.push(s),s;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return r=this.parent.children.indexOf(this),a=this.parent.children.splice(r),i=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,a),i},t.prototype.insertAfter=function(t,e,n){var i,r,s;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return r=this.parent.children.indexOf(this),s=this.parent.children.splice(r+1),i=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,s),i},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,n){var i,r;return null!=t&&(t=f(t)),e||(e={}),e=f(e),_(e)||(n=(r=[e,n])[0],e=r[1]),i=new l(this,t,e),null!=n&&i.text(n),this.children.push(i),i},t.prototype.text=function(t){var e;return _(t)&&this.element(t),e=new d(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var e;return e=new r(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new s(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.raw=function(t){var e;return e=new p(this,t),this.children.push(e),this},t.prototype.dummy=function(){return new c(this)},t.prototype.instruction=function(t,e){var n,i,r,s,o;if(null!=t&&(t=f(t)),null!=e&&(e=f(e)),Array.isArray(t))for(s=0,o=t.length;s<o;s++)n=t[s],this.instruction(n);else if(_(t))for(n in t)b.call(t,n)&&(i=t[n],this.instruction(n,i));else g(e)&&(e=e.apply()),r=new u(this,t,e),this.children.push(r);return this},t.prototype.instructionBefore=function(t,e){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},t.prototype.instructionAfter=function(t,e){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},t.prototype.declaration=function(t,e,n){var r,s;return r=this.document(),s=new o(r,t,e,n),0===r.children.length?r.children.unshift(s):r.children[0].type===i.Declaration?r.children[0]=s:r.children.unshift(s),r.root()||r},t.prototype.dtd=function(t,e){var n,r,s,o,c,l,h,u,p;for(n=this.document(),r=new a(n,t,e),s=o=0,l=(u=n.children).length;o<l;s=++o)if(u[s].type===i.DocType)return n.children[s]=r,r;for(s=c=0,h=(p=n.children).length;c<h;s=++c)if(p[s].isRoot)return n.children.splice(s,0,r),r;return n.children.push(r),r},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.type===i.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.type===i.Document)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.debugInfo=function(t){var e,n;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},t.prototype.ele=function(t,e,n){return this.element(t,e,n)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t.prototype.replaceChild=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.hasChildNodes=function(){return 0!==this.children.length},t.prototype.cloneNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isSupported=function(t,e){return!0},t.prototype.hasAttributes=function(){return 0!==this.attribs.length},t.prototype.compareDocumentPosition=function(t){var n,i;return(n=this)===t?0:this.document()!==t.document()?(i=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?i|=e.Preceding:i|=e.Following,i):n.isAncestor(t)?e.Contains|e.Preceding:n.isDescendant(t)?e.Contains|e.Following:n.isPreceding(t)?e.Preceding:e.Following},t.prototype.isSameNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupPrefix=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isDefaultNamespace=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupNamespaceURI=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(t){var e,n,i;if(t.nodeType!==this.nodeType)return!1;if(t.children.length!==this.children.length)return!1;for(e=n=0,i=this.children.length-1;0<=i?n<=i:n>=i;e=0<=i?++n:--n)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setUserData=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getUserData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.contains=function(t){return!!t&&(t===this||this.isDescendant(t))},t.prototype.isDescendant=function(t){var e,n,i,r;for(n=0,i=(r=this.children).length;n<i;n++){if(t===(e=r[n]))return!0;if(e.isDescendant(t))return!0}return!1},t.prototype.isAncestor=function(t){return t.isDescendant(this)},t.prototype.isPreceding=function(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e<n},t.prototype.isFollowing=function(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e>n},t.prototype.treePosition=function(t){var e,n;return n=0,e=!1,this.foreachTreeNode(this.document(),(function(i){if(n++,!e&&i===t)return e=!0})),e?n:-1},t.prototype.foreachTreeNode=function(t,e){var n,i,r,s,o;for(t||(t=this.document()),i=0,r=(s=t.children).length;i<r;i++){if(o=e(n=s[i]))return o;if(o=this.foreachTreeNode(n,e))return o}},t}()}).call(this)},6684:function(t){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(t){return this.nodes[t]||null},t}()}).call(this)},5915:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;e=n(1737),i=n(7457),t.exports=function(t){function n(t,i,r){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(i),this.name=this.target,r&&(this.value=this.stringify.insValue(r))}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))},n.prototype.isEqualNode=function(t){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.target===this.target},n}(i)}).call(this)},1268:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;e=n(1737),i=n(468),t.exports=function(t){function n(t,i){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(i)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))},n}(i)}).call(this)},6775:function(t,e,n){(function(){var e,i,r,s={}.hasOwnProperty;e=n(1737),r=n(3905),i=n(8753),t.exports=function(t){function n(t,e){this.stream=t,n.__super__.constructor.call(this,e)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.endline=function(t,e,r){return t.isLastRootNode&&e.state===i.CloseTag?"":n.__super__.endline.call(this,t,e,r)},n.prototype.document=function(t,e){var n,i,r,s,o,a,c,l,h;for(i=r=0,o=(c=t.children).length;r<o;i=++r)(n=c[i]).isLastRootNode=i===t.children.length-1;for(e=this.filterOptions(e),h=[],s=0,a=(l=t.children).length;s<a;s++)n=l[s],h.push(this.writeChildNode(n,e,0));return h},n.prototype.attribute=function(t,e,i){return this.stream.write(n.__super__.attribute.call(this,t,e,i))},n.prototype.cdata=function(t,e,i){return this.stream.write(n.__super__.cdata.call(this,t,e,i))},n.prototype.comment=function(t,e,i){return this.stream.write(n.__super__.comment.call(this,t,e,i))},n.prototype.declaration=function(t,e,i){return this.stream.write(n.__super__.declaration.call(this,t,e,i))},n.prototype.docType=function(t,e,n){var r,s,o,a;if(n||(n=0),this.openNode(t,e,n),e.state=i.OpenTag,this.stream.write(this.indent(t,e,n)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,e,n)),e.state=i.InsideTag,s=0,o=(a=t.children).length;s<o;s++)r=a[s],this.writeChildNode(r,e,n+1);e.state=i.CloseTag,this.stream.write("]")}return e.state=i.CloseTag,this.stream.write(e.spaceBeforeSlash+">"),this.stream.write(this.endline(t,e,n)),e.state=i.None,this.closeNode(t,e,n)},n.prototype.element=function(t,n,r){var o,a,c,l,h,u,p,d,f;for(p in r||(r=0),this.openNode(t,n,r),n.state=i.OpenTag,this.stream.write(this.indent(t,n,r)+"<"+t.name),d=t.attribs)s.call(d,p)&&(o=d[p],this.attribute(o,n,r));if(l=0===(c=t.children.length)?null:t.children[0],0===c||t.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))n.allowEmpty?(this.stream.write(">"),n.state=i.CloseTag,this.stream.write("</"+t.name+">")):(n.state=i.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==c||l.type!==e.Text&&l.type!==e.Raw||null==l.value){for(this.stream.write(">"+this.endline(t,n,r)),n.state=i.InsideTag,h=0,u=(f=t.children).length;h<u;h++)a=f[h],this.writeChildNode(a,n,r+1);n.state=i.CloseTag,this.stream.write(this.indent(t,n,r)+"</"+t.name+">")}else this.stream.write(">"),n.state=i.InsideTag,n.suppressPrettyCount++,this.writeChildNode(l,n,r+1),n.suppressPrettyCount--,n.state=i.CloseTag,this.stream.write("</"+t.name+">");return this.stream.write(this.endline(t,n,r)),n.state=i.None,this.closeNode(t,n,r)},n.prototype.processingInstruction=function(t,e,i){return this.stream.write(n.__super__.processingInstruction.call(this,t,e,i))},n.prototype.raw=function(t,e,i){return this.stream.write(n.__super__.raw.call(this,t,e,i))},n.prototype.text=function(t,e,i){return this.stream.write(n.__super__.text.call(this,t,e,i))},n.prototype.dtdAttList=function(t,e,i){return this.stream.write(n.__super__.dtdAttList.call(this,t,e,i))},n.prototype.dtdElement=function(t,e,i){return this.stream.write(n.__super__.dtdElement.call(this,t,e,i))},n.prototype.dtdEntity=function(t,e,i){return this.stream.write(n.__super__.dtdEntity.call(this,t,e,i))},n.prototype.dtdNotation=function(t,e,i){return this.stream.write(n.__super__.dtdNotation.call(this,t,e,i))},n}(r)}).call(this)},382:function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(3905),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,t),e.prototype.document=function(t,e){var n,i,r,s,o;for(e=this.filterOptions(e),s="",i=0,r=(o=t.children).length;i<r;i++)n=o[i],s+=this.writeChildNode(n,e,0);return e.pretty&&s.slice(-e.newline.length)===e.newline&&(s=s.slice(0,-e.newline.length)),s},e}(e)}).call(this)},3976:function(t){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.exports=function(){function t(t){var i,r,s;for(i in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.options=t,this.options.version||(this.options.version="1.0"),r=t.stringify||{})n.call(r,i)&&(s=r[i],this[i]=s)}return t.prototype.name=function(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")},t.prototype.text=function(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))},t.prototype.cdata=function(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))},t.prototype.comment=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return this.options.noValidation?t:""+t||""},t.prototype.attValue=function(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))},t.prototype.insTarget=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.insValue=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)},t.prototype.xmlVersion=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return this.assertLegalChar(t)},t.prototype.xmlStandalone=function(t){return this.options.noValidation?t:t?"yes":"no"},t.prototype.dtdPubID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdSysID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdElementValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttType=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttDefault=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdEntityValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdNData=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e,n;if(this.options.noValidation)return t;if(e="","1.0"===this.options.version){if(e=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(e))throw new Error("Invalid character in string: "+t+" at index "+n.index)}else if("1.1"===this.options.version&&(e=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(e)))throw new Error("Invalid character in string: "+t+" at index "+n.index);return t},t.prototype.assertLegalName=function(t){var e;if(this.options.noValidation)return t;if(this.assertLegalChar(t),e=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(e))throw new Error("Invalid character in name");return t},t.prototype.textEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},t.prototype.attEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},t}()}).call(this)},2535:function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;e=n(1737),i=n(7457),t.exports=function(t){function n(t,i){if(n.__super__.constructor.call(this,t),null==i)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(i)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var t,e,n;for(n="",e=this.previousSibling;e;)n=e.data+n,e=e.previousSibling;for(n+=this.data,t=this.nextSibling;t;)n+=t.data,t=t.nextSibling;return n}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))},n.prototype.splitText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(i)}).call(this)},3905:function(t,e,n){(function(){var e,i,r,s={}.hasOwnProperty;r=n(9241).assign,e=n(1737),n(4130),n(6376),n(2691),n(2679),n(3906),n(1268),n(2535),n(5915),n(1218),n(4111),n(7696),n(5529),n(8012),i=n(8753),t.exports=function(){function t(t){var e,n,i;for(e in t||(t={}),this.options=t,n=t.writer||{})s.call(n,e)&&(i=n[e],this["_"+e]=this[e],this[e]=i)}return t.prototype.filterOptions=function(t){var e,n,s,o,a,c,l,h;return t||(t={}),t=r({},this.options,t),(e={writer:this}).pretty=t.pretty||!1,e.allowEmpty=t.allowEmpty||!1,e.indent=null!=(n=t.indent)?n:"  ",e.newline=null!=(s=t.newline)?s:"\n",e.offset=null!=(o=t.offset)?o:0,e.dontPrettyTextNodes=null!=(a=null!=(c=t.dontPrettyTextNodes)?c:t.dontprettytextnodes)?a:0,e.spaceBeforeSlash=null!=(l=null!=(h=t.spaceBeforeSlash)?h:t.spacebeforeslash)?l:"",!0===e.spaceBeforeSlash&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=i.None,e},t.prototype.indent=function(t,e,n){var i;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(i=(n||0)+e.offset+1)>0?new Array(i).join(e.indent):""},t.prototype.endline=function(t,e,n){return!e.pretty||e.suppressPrettyCount?"":e.newline},t.prototype.attribute=function(t,e,n){var i;return this.openAttribute(t,e,n),i=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,e,n),i},t.prototype.cdata=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<![CDATA[",e.state=i.InsideTag,r+=t.value,e.state=i.CloseTag,r+="]]>"+this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.comment=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"\x3c!-- ",e.state=i.InsideTag,r+=t.value,e.state=i.CloseTag,r+=" --\x3e"+this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.declaration=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<?xml",e.state=i.InsideTag,r+=' version="'+t.version+'"',null!=t.encoding&&(r+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(r+=' standalone="'+t.standalone+'"'),e.state=i.CloseTag,r+=e.spaceBeforeSlash+"?>",r+=this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.docType=function(t,e,n){var r,s,o,a,c;if(n||(n=0),this.openNode(t,e,n),e.state=i.OpenTag,a=this.indent(t,e,n),a+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?a+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(a+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(a+=" [",a+=this.endline(t,e,n),e.state=i.InsideTag,s=0,o=(c=t.children).length;s<o;s++)r=c[s],a+=this.writeChildNode(r,e,n+1);e.state=i.CloseTag,a+="]"}return e.state=i.CloseTag,a+=e.spaceBeforeSlash+">",a+=this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),a},t.prototype.element=function(t,n,r){var o,a,c,l,h,u,p,d,f,m,g,_,y,b;for(f in r||(r=0),m=!1,g="",this.openNode(t,n,r),n.state=i.OpenTag,g+=this.indent(t,n,r)+"<"+t.name,_=t.attribs)s.call(_,f)&&(o=_[f],g+=this.attribute(o,n,r));if(l=0===(c=t.children.length)?null:t.children[0],0===c||t.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))n.allowEmpty?(g+=">",n.state=i.CloseTag,g+="</"+t.name+">"+this.endline(t,n,r)):(n.state=i.CloseTag,g+=n.spaceBeforeSlash+"/>"+this.endline(t,n,r));else if(!n.pretty||1!==c||l.type!==e.Text&&l.type!==e.Raw||null==l.value){if(n.dontPrettyTextNodes)for(h=0,p=(y=t.children).length;h<p;h++)if(((a=y[h]).type===e.Text||a.type===e.Raw)&&null!=a.value){n.suppressPrettyCount++,m=!0;break}for(g+=">"+this.endline(t,n,r),n.state=i.InsideTag,u=0,d=(b=t.children).length;u<d;u++)a=b[u],g+=this.writeChildNode(a,n,r+1);n.state=i.CloseTag,g+=this.indent(t,n,r)+"</"+t.name+">",m&&n.suppressPrettyCount--,g+=this.endline(t,n,r),n.state=i.None}else g+=">",n.state=i.InsideTag,n.suppressPrettyCount++,m=!0,g+=this.writeChildNode(l,n,r+1),n.suppressPrettyCount--,m=!1,n.state=i.CloseTag,g+="</"+t.name+">"+this.endline(t,n,r);return this.closeNode(t,n,r),g},t.prototype.writeChildNode=function(t,n,i){switch(t.type){case e.CData:return this.cdata(t,n,i);case e.Comment:return this.comment(t,n,i);case e.Element:return this.element(t,n,i);case e.Raw:return this.raw(t,n,i);case e.Text:return this.text(t,n,i);case e.ProcessingInstruction:return this.processingInstruction(t,n,i);case e.Dummy:return"";case e.Declaration:return this.declaration(t,n,i);case e.DocType:return this.docType(t,n,i);case e.AttributeDeclaration:return this.dtdAttList(t,n,i);case e.ElementDeclaration:return this.dtdElement(t,n,i);case e.EntityDeclaration:return this.dtdEntity(t,n,i);case e.NotationDeclaration:return this.dtdNotation(t,n,i);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},t.prototype.processingInstruction=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<?",e.state=i.InsideTag,r+=t.target,t.value&&(r+=" "+t.value),e.state=i.CloseTag,r+=e.spaceBeforeSlash+"?>",r+=this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.raw=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n),e.state=i.InsideTag,r+=t.value,e.state=i.CloseTag,r+=this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.text=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n),e.state=i.InsideTag,r+=t.value,e.state=i.CloseTag,r+=this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.dtdAttList=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<!ATTLIST",e.state=i.InsideTag,r+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(r+=" "+t.defaultValueType),t.defaultValue&&(r+=' "'+t.defaultValue+'"'),e.state=i.CloseTag,r+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.dtdElement=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<!ELEMENT",e.state=i.InsideTag,r+=" "+t.name+" "+t.value,e.state=i.CloseTag,r+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.dtdEntity=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<!ENTITY",e.state=i.InsideTag,t.pe&&(r+=" %"),r+=" "+t.name,t.value?r+=' "'+t.value+'"':(t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),t.nData&&(r+=" NDATA "+t.nData)),e.state=i.CloseTag,r+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.dtdNotation=function(t,e,n){var r;return this.openNode(t,e,n),e.state=i.OpenTag,r=this.indent(t,e,n)+"<!NOTATION",e.state=i.InsideTag,r+=" "+t.name,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?r+=' PUBLIC "'+t.pubID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),e.state=i.CloseTag,r+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=i.None,this.closeNode(t,e,n),r},t.prototype.openNode=function(t,e,n){},t.prototype.closeNode=function(t,e,n){},t.prototype.openAttribute=function(t,e,n){},t.prototype.closeAttribute=function(t,e,n){},t}()}).call(this)},9665:function(t,e,n){(function(){var e,i,r,s,o,a,c,l,h,u;u=n(9241),l=u.assign,h=u.isFunction,r=n(7260),s=n(1933),o=n(400),c=n(382),a=n(6775),e=n(1737),i=n(8753),t.exports.create=function(t,e,n,i){var r,o;if(null==t)throw new Error("Root element needs a name.");return i=l({},e,n,i),o=(r=new s(i)).element(t),i.headless||(r.declaration(i),null==i.pubID&&null==i.sysID||r.dtd(i)),o},t.exports.begin=function(t,e,n){var i;return h(t)&&(e=(i=[t,e])[0],n=i[1],t={}),e?new o(t,e,n):new s(t)},t.exports.stringWriter=function(t){return new c(t)},t.exports.streamWriter=function(t,e){return new a(t,e)},t.exports.implementation=new r,t.exports.nodeType=e,t.exports.writerState=i}).call(this)},5480:(t,e,n)=>{var i=n(9896),r=n(7016),s=n(5317).spawn;function o(t){"use strict";t=t||{};var e,o,a=this,c=n(8611),l=n(5692),h={},u=!1,p={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},d=Object.assign({},p),f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],g=!1,_=!1,y=!1,b={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.open=function(t,e,n,i,r){if(this.abort(),_=!1,y=!1,!function(t){return t&&-1===m.indexOf(t)}(t))throw new Error("SecurityError: Request method not allowed");h={method:t,url:e.toString(),async:"boolean"!=typeof n||n,user:i||null,password:r||null},v(this.OPENED)},this.setDisableHeaderCheck=function(t){u=t},this.setRequestHeader=function(t,e){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!function(t){return u||t&&-1===f.indexOf(t.toLowerCase())}(t))return console.warn('Refused to set unsafe header "'+t+'"'),!1;if(g)throw new Error("INVALID_STATE_ERR: send flag is true");return d[t]=e,!0},this.getResponseHeader=function(t){return"string"==typeof t&&this.readyState>this.OPENED&&o.headers[t.toLowerCase()]&&!_?o.headers[t.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||_)return"";var t="";for(var e in o.headers)"set-cookie"!==e&&"set-cookie2"!==e&&(t+=e+": "+o.headers[e]+"\r\n");return t.substr(0,t.length-2)},this.getRequestHeader=function(t){return"string"==typeof t&&d[t]?d[t]:""},this.send=function(n){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(g)throw new Error("INVALID_STATE_ERR: send has already been called");var u,p=!1,f=!1,m=r.parse(h.url);switch(m.protocol){case"https:":p=!0;case"http:":u=m.hostname;break;case"file:":f=!0;break;case void 0:case"":u="localhost";break;default:throw new Error("Protocol not supported.")}if(f){if("GET"!==h.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(h.async)i.readFile(unescape(m.pathname),"utf8",(function(t,e){t?a.handleError(t):(a.status=200,a.responseText=e,v(a.DONE))}));else try{this.responseText=i.readFileSync(unescape(m.pathname),"utf8"),this.status=200,v(a.DONE)}catch(t){this.handleError(t)}}else{var y=m.port||(p?443:80),b=m.pathname+(m.search?m.search:"");if(d.Host=u,p&&443===y||80===y||(d.Host+=":"+m.port),h.user){void 0===h.password&&(h.password="");var w=new Buffer(h.user+":"+h.password);d.Authorization="Basic "+w.toString("base64")}"GET"===h.method||"HEAD"===h.method?n=null:n?(d["Content-Length"]=Buffer.isBuffer(n)?n.length:Buffer.byteLength(n),d["Content-Type"]||(d["Content-Type"]="text/plain;charset=UTF-8")):"POST"===h.method&&(d["Content-Length"]=0);var x=t.agent||!1,E={host:u,port:y,path:b,method:h.method,headers:d,agent:x};if(p&&(E.pfx=t.pfx,E.key=t.key,E.passphrase=t.passphrase,E.cert=t.cert,E.ca=t.ca,E.ciphers=t.ciphers,E.rejectUnauthorized=!1!==t.rejectUnauthorized),_=!1,h.async){var S=p?l.request:c.request;g=!0,a.dispatchEvent("readystatechange");var k=function(n){if(302===(o=n).statusCode||303===o.statusCode||307===o.statusCode){h.url=o.headers.location;var i=r.parse(h.url);u=i.hostname;var s={hostname:i.hostname,port:i.port,path:i.path,method:303===o.statusCode?"GET":h.method,headers:d};return p&&(s.pfx=t.pfx,s.key=t.key,s.passphrase=t.passphrase,s.cert=t.cert,s.ca=t.ca,s.ciphers=t.ciphers,s.rejectUnauthorized=!1!==t.rejectUnauthorized),void(e=S(s,k).on("error",T)).end()}o&&o.setEncoding&&o.setEncoding("utf8"),v(a.HEADERS_RECEIVED),a.status=o.statusCode,o.on("data",(function(t){t&&(a.responseText+=t),g&&v(a.LOADING)})),o.on("end",(function(){g&&(g=!1,v(a.DONE))})),o.on("error",(function(t){a.handleError(t)}))},T=function(t){a.handleError(t)};e=S(E,k).on("error",T),n&&e.write(n),e.end(),a.dispatchEvent("loadstart")}else{var C=".node-xmlhttprequest-content-"+process.pid,O=".node-xmlhttprequest-sync-"+process.pid;i.writeFileSync(O,"","utf8");for(var I="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(p?"s":"")+".request;var options = "+JSON.stringify(E)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+C+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+O+"');});response.on('error', function(error) {fs.writeFileSync('"+C+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+O+"');});}).on('error', function(error) {fs.writeFileSync('"+C+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+O+"');});"+(n?"req.write('"+JSON.stringify(n).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=s(process.argv[0],["-e",I]);i.existsSync(O););if(a.responseText=i.readFileSync(C,"utf8"),A.stdin.end(),i.unlinkSync(C),a.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var P=a.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");a.handleError(P,503)}else a.status=a.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),a.responseText=a.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),v(a.DONE)}}},this.handleError=function(t,e){this.status=e||0,this.statusText=t,this.responseText=t.stack,_=!0,v(this.DONE)},this.abort=function(){e&&(e.abort(),e=null),d=Object.assign({},p),this.responseText="",this.responseXML="",_=y=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!g||this.readyState===this.DONE||(g=!1,v(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(t,e){t in b||(b[t]=[]),b[t].push(e)},this.removeEventListener=function(t,e){t in b&&(b[t]=b[t].filter((function(t){return t!==e})))},this.dispatchEvent=function(t){if("function"==typeof a["on"+t]&&(this.readyState===this.DONE?setImmediate((function(){a["on"+t]()})):a["on"+t]()),t in b)for(let e=0,n=b[t].length;e<n;e++)this.readyState===this.DONE?setImmediate((function(){b[t][e].call(a)})):b[t][e].call(a)};var v=function(t){if(!(a.readyState===t||a.readyState===a.UNSENT&&y)&&(a.readyState=t,(h.async||a.readyState<a.OPENED||a.readyState===a.DONE)&&a.dispatchEvent("readystatechange"),a.readyState===a.DONE)){let t;t=y?"abort":_?"error":"load",a.dispatchEvent(t),a.dispatchEvent("loadend")}}}t.exports=o,o.XMLHttpRequest=o},2121:t=>{"use strict";var e,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,r={},s=0,o=0;function a(t){var e="";do{e=n[t%i]+e,t=Math.floor(t/i)}while(t>0);return e}function c(){var t=a(+new Date);return t!==e?(s=0,e=t):t+"."+a(s++)}for(;o<i;o++)r[n[o]]=o;c.encode=a,c.decode=function(t){var e=0;for(o=0;o<t.length;o++)e=e*i+r[t.charAt(o)];return e},t.exports=c},2613:t=>{"use strict";t.exports=require("assert")},181:t=>{"use strict";t.exports=require("buffer")},5317:t=>{"use strict";t.exports=require("child_process")},6982:t=>{"use strict";t.exports=require("crypto")},7194:t=>{"use strict";t.exports=require("dgram")},4434:t=>{"use strict";t.exports=require("events")},9896:t=>{"use strict";t.exports=require("fs")},1943:t=>{"use strict";t.exports=require("fs/promises")},8611:t=>{"use strict";t.exports=require("http")},5675:t=>{"use strict";t.exports=require("http2")},5692:t=>{"use strict";t.exports=require("https")},9278:t=>{"use strict";t.exports=require("net")},857:t=>{"use strict";t.exports=require("os")},6928:t=>{"use strict";t.exports=require("path")},3480:t=>{"use strict";t.exports=require("querystring")},2203:t=>{"use strict";t.exports=require("stream")},3193:t=>{"use strict";t.exports=require("string_decoder")},3557:t=>{"use strict";t.exports=require("timers")},4756:t=>{"use strict";t.exports=require("tls")},2018:t=>{"use strict";t.exports=require("tty")},7016:t=>{"use strict";t.exports=require("url")},9023:t=>{"use strict";t.exports=require("util")},3106:t=>{"use strict";t.exports=require("zlib")},79:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},2987:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},5901:(t,e,n)=>{var i=n(79);t.exports=function(t){if(Array.isArray(t))return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},2475:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},7383:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9646:(t,e,n)=>{var i=n(5636),r=n(7550);function s(e,n,o){return r()?(t.exports=s=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=s=function(t,e,n){var r=[null];r.push.apply(r,e);var s=new(Function.bind.apply(t,r));return n&&i(s,n.prototype),s},t.exports.__esModule=!0,t.exports.default=t.exports),s.apply(null,arguments)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},4579:(t,e,n)=>{var i=n(7736);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},3693:(t,e,n)=>{var i=n(7736);t.exports=function(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},2253:t=>{function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},3072:t=>{function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},9511:(t,e,n)=>{var i=n(5636);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},4994:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},6305:(t,e,n)=>{var i=n(3738).default;function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}t.exports=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var c=o?Object.getOwnPropertyDescriptor(t,a):null;c&&(c.get||c.set)?Object.defineProperty(s,a,c):s[a]=t[a]}return s.default=t,n&&n.set(t,s),s},t.exports.__esModule=!0,t.exports.default=t.exports},7550:t=>{t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9291:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},1156:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],c=!0,l=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},7752:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},1869:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},8452:(t,e,n)=>{var i=n(3738).default,r=n(2475);t.exports=function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4633:(t,e,n)=>{var i=n(3738).default;function r(){"use strict";t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,s=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function p(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,s=Object.create(r.prototype),a=new O(i||[]);return o(s,"_invoke",{value:S(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var f={};function m(){}function g(){}function _(){}var y={};u(y,c,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(I([])));v&&v!==n&&s.call(v,c)&&(y=v);var w=_.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,o,a,c){var l=d(t[r],t,o);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==i(u)&&s.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(u).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var r;o(this,"_invoke",{value:function(t,i){function s(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(s,s):s()}})}function S(t,e,n){var i="suspendedStart";return function(r,s){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw s;return{value:void 0,done:!0}}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=k(o,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function k(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=d(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return g.prototype=_,o(w,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(E.prototype),u(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new E(p(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(w),u(w,h,"Generator"),u(w,c,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return o.type="throw",o.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=s.call(r,"catchLoc"),c=s.call(r,"finallyLoc");if(a&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},5636:t=>{function e(n,i){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},5715:(t,e,n)=>{var i=n(2987),r=n(1156),s=n(7122),o=n(7752);t.exports=function(t,e){return i(t)||r(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},1132:(t,e,n)=>{var i=n(5901),r=n(9291),s=n(7122),o=n(1869);t.exports=function(t){return i(t)||r(t)||s(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},9045:(t,e,n)=>{var i=n(3738).default;t.exports=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},7736:(t,e,n)=>{var i=n(3738).default,r=n(9045);t.exports=function(t){var e=r(t,"string");return"symbol"===i(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},3738:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7122:(t,e,n)=>{var i=n(79);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},2375:(t,e,n)=>{var i=n(4633)();t.exports=i;try{regeneratorRuntime=i}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},4581:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4326:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.runEntrypoint=void 0;const i=n(7690),r=n(9967),s=i.__importDefault(n(1943)),o=n(360),a=n(5091);n(8031);const c=n(4044);let l,h=!1;e.runEntrypoint=function(t,e){Promise.resolve().then((async()=>{try{if(h)throw new Error("runEntrypoint can only be called once");h=!0;const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const i=await s.default.readFile(n),u=JSON.parse(i.toString());if(u.runtime?.api!==r.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!u.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");const p=u.runtime.apiVersion;if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${t.name}`);const d=process.env.CONNECTION_ID;if("string"!=typeof d||!d)throw new Error("Module initialise is missing CONNECTION_ID");const f=process.env.VERIFICATION_TOKEN;if("string"!=typeof f||!f)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const m=process.env.SENTRY_DSN,g=process.env.SENTRY_USERID,_=process.env.SENTRY_COMPANION_VERSION;m&&g&&"https://"==m.substring(0,8)?(console.log("Sentry enabled"),(0,a.init)({dsn:m,release:`${u.name}@${u.version}`,beforeSend:t=>(t.exception&&console.log("sentry","error",t.exception),t)}),(0,a.configureScope)((t=>{t.setUser({id:g}),t.setTag("companion",_)}))):console.log("Sentry disabled");const y=new c.IpcWrapper({},(t=>{process.send(t)}),5e3);process.once("message",(t=>{y.receivedMessage(t)})),l=new t((0,o.literal)({id:d,upgradeScripts:e,_isInstanceBaseProps:!0})),y.sendWithCb("register",{apiVersion:p,connectionId:d,verificationToken:f}).then((()=>{console.log("Module-host accepted registration")}),(t=>{console.error("Module registration failed",t),process.exit(11)}))}catch(t){console.error("Failed to startup module:"),console.error(t.stack||t.message),process.exit(1)}}))}},6160:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UDPHelper=e.TelnetHelper=e.TCPHelper=void 0;var i=n(8895);Object.defineProperty(e,"TCPHelper",{enumerable:!0,get:function(){return i.TCPHelper}});var r=n(1118);Object.defineProperty(e,"TelnetHelper",{enumerable:!0,get:function(){return r.TelnetHelper}});var s=n(6259);Object.defineProperty(e,"UDPHelper",{enumerable:!0,get:function(){return s.UDPHelper}})},8895:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TCPHelper=void 0;const i=n(7690).__importDefault(n(9278)),r=n(228),s=n(1400);class o extends r.EventEmitter{#t;#e;_socket;#n;#i=!1;#r=!1;#s=!1;#o;#a;get isConnected(){return this.#i}get isConnecting(){return this.#r}get isDestroyed(){return this.#s}constructor(t,e,n){super(),this.#t=t,this.#e=e,this.#n={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new i.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(t=>{this.#r=!1,this.#i=!1,this.#n.reconnect&&this.#c(),this.#l(s.InstanceStatus.UnknownError,t.message),this.emit("error",t)})),this._socket.on("ready",(()=>{this.#i=!0,this.#r=!1,this.#l(s.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#i=!1,this.#l(s.InstanceStatus.Disconnected),!this.#r&&this.#n.reconnect&&this.#c(),this.emit("end")})),this._socket.on("data",(t=>this.emit("data",t))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>this.connect())),setTimeout((()=>{this.#s||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#t}:${this.#e} is missing an error handler!`)}),5e3)}connect(){if(this.#s)throw new Error("Cannot connect destroyed socket");return!this.#r&&(this.#r=!0,this._socket.connect(this.#e,this.#t),!0)}async send(t){if(this.#s||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!t||!t.length)throw new Error("No message to send");if(!this.#i)return!1;try{return new Promise(((e,n)=>{this._socket.write(t,(t=>{t?n(t):e(!0)}))}))}catch(t){this.#i=!1;const e=t instanceof Error?t:new Error(`${t}`);throw this.#l(s.InstanceStatus.UnknownError,e.message),this.emit("error",e),e}}destroy(){this.#s=!0,void 0!==this.#a&&clearTimeout(this.#a),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#c(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#l(s.InstanceStatus.Connecting),this.connect()}),this.#n.reconnect_interval)}#l(t,e){this.#o!=t&&(this.#o=t,this.emit("status_change",t,e))}}e.TCPHelper=o},1118:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelnetHelper=void 0;const i=n(7690).__importDefault(n(228)),r=n(2203),s=n(8895);class o extends i.default{#h;#u;get isConnected(){return this.#h.isConnected}get isConnecting(){return this.#h.isConnecting}get isDestroyed(){return this.#h.isDestroyed}constructor(t,e,n){super(),this.#h=new s.TCPHelper(t,e,n),this.#u=new a,this.#h._socket.pipe(this.#u),this.#h.on("connect",(()=>this.emit("connect"))),this.#h.on("end",(()=>this.emit("end"))),this.#h.on("error",(t=>this.emit("error",t))),this.#h.on("status_change",((t,e)=>this.emit("status_change",t,e))),this.#u.on("iac",((t,e)=>this.emit("iac",t,e))),this.#u.on("sb",(t=>this.emit("sb",t))),this.#u.on("data",(t=>this.emit("data",t))),this.#u.on("drain",(()=>this.emit("drain"))),setTimeout((()=>{this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${t}:${e} is missing an error handler!`)}),5e3)}connect(){return this.#h.connect()}send(t){return this.#h.send(t)}destroy(){this.#h.destroy(),this.#u.removeAllListeners(),this.#u.destroy()}}e.TelnetHelper=o;class a extends r.Transform{#p;#d;#f;constructor(t){super(t),this.#p=Buffer.alloc(0),this.#d=Buffer.alloc(0),this.#f=0}_transform(t,e,n){for(let e=0;e<t.length;++e)this.#m(t[e]);const i=this.#g();i.length&&this.push(i),n()}#m(t){if(0===this.#f){if(255===t)return void(this.#f=255);this.#p=Buffer.concat([this.#p,Buffer.from([t])])}else if(255===this.#f)switch(t){case 250:case 251:case 252:case 253:case 254:this.#f=t;break;default:this.#f=0}else{if(this.#f>=251&&this.#f<=254){let e;switch(this.#f){case 251:e="WILL";break;case 252:e="WONT";break;case 253:e="DO";break;case 254:e="DONT";break;default:return}return this.emit("iac",e,t),void(this.#f=0)}if(250===this.#f){if(240===t)return this.emit("sb",this.#d),this.#f=0,void(this.#d=Buffer.alloc(0));this.#d=Buffer.concat([this.#d,Buffer.from([t])])}}}#g(){const t=this.#p;return this.#p=Buffer.alloc(0),t}}},6259:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UDPHelper=void 0;const i=n(7690).__importDefault(n(7194)),r=n(228),s=n(1400);class o extends r.EventEmitter{#t;#e;#_;#n;#s=!1;#o;get isDestroyed(){return this.#s}constructor(t,e,n){if(super(),this.#t=t,this.#e=e,this.#n={...n},this.#_=i.default.createSocket("udp4"),this.#n.bind_port||this.#n.bind_ip)try{this.#_.bind(this.#n.bind_port||0,this.#n.bind_ip)}catch(t){throw new Error(`Unable to bind to ip/port: ${this.#n.bind_ip}:${this.#n.bind_port}`)}this.#n.broadcast&&this.#_.setBroadcast(!0),void 0!==this.#n.ttl&&this.#_.setTTL(this.#n.ttl),void 0!==this.#n.multicast_ttl&&this.#_.setMulticastTTL(this.#n.multicast_ttl),this.#_.on("error",(t=>{this.#l(s.InstanceStatus.UnknownError,t.message),this.emit("error",t)})),this.#_.on("listening",(()=>{this.#n.multicast_interface&&this.#_.setMulticastInterface(this.#n.multicast_interface),this.#l(s.InstanceStatus.Ok),this.emit("listening")})),this.#_.on("message",(t=>this.emit("data",t))),setTimeout((()=>{this.#s||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#t}:${this.#e} is missing an error handler!`)}),5e3)}send(t){if(this.#s)throw new Error("Cannot write to destroyed socket");if(!t||!t.length)throw new Error("No message to send");return new Promise(((e,n)=>{this.#_.send(t,this.#e,this.#t,(t=>{t?n(t):e()}))}))}destroy(){this.#s=!0,this.#_.removeAllListeners(),this.#_.close(),this.removeAllListeners()}#l(t,e){this.#o!=t&&(this.#o=t,this.emit("status_change",t,e))}}e.UDPHelper=o},4044:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IpcWrapper=void 0;const i=n(7690),r=n(1154),s=n(360),o=i.__importDefault(n(6022));e.IpcWrapper=class{#y;#b;#v;#w={};constructor(t,e,n){this.#y=t,this.#b=e,this.#v=n}async sendWithCb(t,e,n,i=0){i<=0&&(i=this.#v);const s={timeout:void 0,resolve:()=>null,reject:()=>null},a=new Promise(((t,e)=>{s.resolve=t,s.reject=e})),c=(0,r.nanoid)();this.#w[c]=s,this.#b({direction:"call",name:String(t),payload:o.default.stringify(e),callbackId:c});const l=new Error("Call timed out");return s.timeout=setTimeout((()=>{s.reject(n?n():l)}),i),a}sendWithNoCb(t,e){this.#b({direction:"call",name:String(t),payload:o.default.stringify(e),callbackId:void 0})}receivedMessage(t){const e=t;switch(t.direction){case"call":{const e=this.#y[t.name];if(!e)return void(t.callbackId&&this.#b({direction:"response",callbackId:t.callbackId,success:!1,payload:o.default.stringify({message:`Unknown command "${t.name}"`})}));e(t.payload?o.default.parse(t.payload):void 0).then((e=>{t.callbackId&&this.#b({direction:"response",callbackId:t.callbackId,success:!0,payload:o.default.stringify(e)})}),(e=>{t.callbackId&&this.#b({direction:"response",callbackId:t.callbackId,success:!1,payload:e instanceof Error?JSON.stringify(e,Object.getOwnPropertyNames(e)):o.default.stringify(e)})}));break}case"response":{if(!t.callbackId)return void console.error("Ipc: Response message has no callbackId");const e=this.#w[t.callbackId];if(!e)return;clearTimeout(e.timeout);const n=t.payload?o.default.parse(t.payload):void 0;if(t.success)e.resolve(n);else{let t=n;n&&"message"in n&&(t=new Error(n.message),n.stack&&(t.stack=n.stack)),e.reject(t)}break}default:(0,s.assertNever)(t),console.error(`Ipc: Message of unknown direction "${e.direction}"`)}}}},9967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HostApiNodeJsIpc=void 0,e.HostApiNodeJsIpc="nodejs-ipc"},6278:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.runEntrypoint=e.assertNever=e.splitRgb=e.combineRgb=e.literal=void 0;const i=n(7690);i.__exportStar(n(9077),e),i.__exportStar(n(9637),e),i.__exportStar(n(4581),e);var r=n(360);Object.defineProperty(e,"literal",{enumerable:!0,get:function(){return r.literal}}),Object.defineProperty(e,"combineRgb",{enumerable:!0,get:function(){return r.combineRgb}}),Object.defineProperty(e,"splitRgb",{enumerable:!0,get:function(){return r.splitRgb}}),Object.defineProperty(e,"assertNever",{enumerable:!0,get:function(){return r.assertNever}}),i.__exportStar(n(6160),e);var s=n(4326);Object.defineProperty(e,"runEntrypoint",{enumerable:!0,get:function(){return s.runEntrypoint}})},2593:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isInstanceBaseProps=e.serializeIsVisibleFn=void 0,e.serializeIsVisibleFn=function(t){return t.map((t=>"isVisible"in t&&"function"==typeof t.isVisible?{...t,isVisibleFn:t.isVisible.toString(),isVisible:void 0}:{...t,isVisibleFn:void 0}))},e.isInstanceBaseProps=function(t){const e=t;return"object"==typeof e&&"string"==typeof e.id&&!0===e._isInstanceBaseProps}},8039:(t,e)=>{"use strict";function n(t,e){return{type:t,id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options}}Object.defineProperty(e,"__esModule",{value:!0}),e.callFeedbackOnDefinition=e.convertFeedbackInstanceToEvent=void 0,e.convertFeedbackInstanceToEvent=n,e.callFeedbackOnDefinition=function(t,e){return"boolean"===t.type?t.callback({...n("boolean",e),type:"boolean",_rawBank:e.rawBank}):t.callback({...n("advanced",e),type:"advanced",image:e.image,_page:e.page,_bank:e.bank,_rawBank:e.rawBank})}},1706:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.runThroughUpgradeScripts=void 0,e.runThroughUpgradeScripts=function(t,e,n,i,r){const s=new Map,o=t=>{let e=s.get(t);return e||(e={actions:[],feedbacks:[]},s.set(t,e)),e};for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&o(t).actions.push(e.id)}for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&o(e).feedbacks.push(t.id)}let a={},c={};if(s.size>0){const o=Array.from(s.keys()).sort(),l=Math.min(...o,n??Number.POSITIVE_INFINITY)+1,h=[],u=[],p=i.length;for(let o=l;o<p;o++){const l=s.get(o-1);l&&(h.push(...l.actions),u.push(...l.feedbacks));const p=void 0!==r&&null!==n&&o>n;if(!p&&0===h.length&&0===u.length)continue;const d=(0,i[o])({},{config:p?r:null,actions:h.map((e=>{const n=t[e];if(n)return{id:n.id,controlId:n.controlId,actionId:n.actionId,options:n.options}})).filter((t=>!!t)),feedbacks:u.map((t=>{const n=e[t];if(n)return{id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:n.options}})).filter((t=>!!t))});p&&d.updatedConfig&&(r=d.updatedConfig);for(const e of d.updatedActions)if(e){const n=t[e.id];n&&(n.actionId=e.actionId,n.options=e.options,c[e.id]=n)}for(const t of d.updatedFeedbacks)if(t){const n=e[t.id];n&&(n.feedbackId=t.feedbackId,n.options=t.options,a[t.id]={...n,style:a[t.id]?.style??t.style})}}for(const[e,n]of Object.entries(t))c[e]||"number"!=typeof n?.upgradeIndex||(c[e]=n);for(const[t,n]of Object.entries(e))a[t]||"number"!=typeof n?.upgradeIndex||(a[t]=n)}return{updatedActions:c,updatedFeedbacks:a,updatedConfig:r}}},9077:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateManifest=void 0;const i=n(7690).__importDefault(n(7281));e.validateManifest=function(t){if(!(0,i.default)(t)){const t=i.default.errors;if(!t)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(t)}`)}}},3730:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1649:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InstanceBase=void 0;const i=n(7690),r=n(360),s=i.__importDefault(n(3290)),o=n(2593),a=n(1706),c=n(8039),l=n(4044);e.InstanceBase=class{#x;#E;id;#S=new s.default({concurrency:1});#k=!1;#T=!1;#C=new Map;#O=new Map;#I=new Map;#A=new Map;#P=new Map;#N=new Map;#n;get instanceOptions(){return this.#n}constructor(t){if(!(0,o.isInstanceBaseProps)(t)||!t._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.#n={disableVariableValidation:!1},this.#x=new l.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfig:this._handleConfigUpdate.bind(this),executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this)},(t=>{process.send(t)}),5e3),process.on("message",(t=>{this.#x.receivedMessage(t)})),this.#E=t.upgradeScripts,this.id=t.id,this.log("debug","Initializing")}async _handleInit(t){return this.#S.add((async()=>{if(this.#k)throw new Error("Already initialized");const e=t.actions,n=t.feedbacks;let i=t.config;if(t.isFirstInit){const t={},e=this.getConfigFields();for(const n of e)"default"in n&&(t[n.id]=n.default);i=t,this.saveConfig(i)}const{updatedActions:r,updatedFeedbacks:s,updatedConfig:o}=(0,a.runThroughUpgradeScripts)(e,n,t.lastUpgradeIndex,this.#E,i);i=o??i;const c=this.#x.sendWithCb("upgradedItems",{updatedActions:r,updatedFeedbacks:s});try{await this.init(i,!!t.isFirstInit),this.#k=!0}catch(t){throw console.trace(`Init failed: ${t}`),t}finally{await c}return setImmediate((()=>{this._handleUpdateActions({actions:e},!0),this._handleUpdateFeedbacks({feedbacks:n},!0)})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#E.length-1,updatedConfig:i}}))}async _handleDestroy(){await this.#S.add((async()=>{if(!this.#k)throw new Error("Not initialized");await this.destroy(),this.#k=!1}))}async _handleConfigUpdate(t){await this.#S.add((async()=>{if(!this.#k)throw new Error("Not initialized");await this.configUpdated(t)}))}async _handleExecuteAction(t){const e=this.#C.get(t.action.actionId);if(!e)throw new Error(`Unknown action: ${t.action.actionId}`);await e.callback({id:t.action.id,actionId:t.action.actionId,controlId:t.action.controlId,options:t.action.options,_deviceId:t.deviceId,_page:t.action.page,_bank:t.action.bank})}async _handleUpdateFeedbacks(t,e){const n=[];e||(0,a.runThroughUpgradeScripts)({},t.feedbacks,null,this.#E,void 0);for(const[e,i]of Object.entries(t.feedbacks)){const t=this.#A.get(e);if(t){const e=this.#O.get(t.feedbackId);if(e?.unsubscribe)try{e.unsubscribe((0,c.convertFeedbackInstanceToEvent)(e.type,t))}catch(e){console.error(`Feedback unsubscribe failed: ${JSON.stringify(t)} - ${e?.message??e} ${e?.stack}`)}}if(!i||i.disabled)this.#A.delete(e);else{this.#A.set(e,i);const t=this.#O.get(i.feedbackId);if(t?.subscribe)try{t.subscribe((0,c.convertFeedbackInstanceToEvent)(t.type,i))}catch(t){console.error(`Feedback subscribe failed: ${JSON.stringify(i)} - ${t?.message??t} ${t?.stack}`)}if(t){let r;try{r=(0,c.callFeedbackOnDefinition)(t,i)}catch(t){console.error(`Feedback check failed: ${JSON.stringify(i)} - ${t?.message??t} ${t?.stack}`)}r instanceof Promise&&(r=void 0,console.error(`Feedback check returned Promise, this is not allowed: ${JSON.stringify(i)}`)),n.push({id:e,controlId:i.controlId,value:r})}}}Object.keys(n).length>0&&this.#x.sendWithNoCb("updateFeedbackValues",{values:n})}async _handleUpdateActions(t,e){e||(0,a.runThroughUpgradeScripts)(t.actions,{},null,this.#E,void 0);for(const[e,n]of Object.entries(t.actions)){const t=this.#P.get(e);if(t){const e=this.#C.get(t.actionId);if(e?.unsubscribe)try{e.unsubscribe(t)}catch(e){console.error(`Action unsubscribe failed: ${JSON.stringify(t)} - ${e?.message??e} ${e?.stack}`)}}if(!n||n.disabled)this.#P.delete(e);else{this.#P.set(e,n);const t=this.#C.get(n.actionId);if(t?.subscribe)try{t.subscribe(n)}catch(t){console.error(`Action subscribe failed: ${JSON.stringify(n)} - ${t?.message??t} ${t?.stack}`)}}}}async _handleGetConfigFields(t){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(t){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(t.request)}}async _handleLearnAction(t){const e=this.#C.get(t.action.actionId);return e&&e.learn?{options:await e.learn({id:t.action.id,actionId:t.action.actionId,controlId:t.action.controlId,options:t.action.options,_deviceId:void 0,_page:t.action.page,_bank:t.action.bank})}:{options:void 0}}async _handleLearnFeedback(t){const e=this.#O.get(t.feedback.feedbackId);return e&&e.learn?{options:await e.learn({id:t.feedback.id,feedbackId:t.feedback.feedbackId,controlId:t.feedback.controlId,options:t.feedback.options,type:e.type})}:{options:void 0}}async _handleStartStopRecordActions(t){if(t.recording){if(this.#T)return}else if(!this.#T)return;if(!this.handleStartStopRecordActions)throw this.#T=!1,new Error("Recording actions is not supported by this module!");this.#T=t.recording,this.handleStartStopRecordActions(this.#T)}saveConfig(t){this.#x.sendWithNoCb("saveConfig",{config:t})}setActionDefinitions(t){const e=[];this.#C.clear();for(const[n,i]of Object.entries(t))i&&(e.push({id:n,name:i.name,description:i.description,options:(0,o.serializeIsVisibleFn)(i.options),hasLearn:!!i.learn}),this.#C.set(n,i));this.#x.sendWithNoCb("setActionDefinitions",{actions:e})}setFeedbackDefinitions(t){const e=[];this.#O.clear();for(const[n,i]of Object.entries(t))i&&(e.push({id:n,name:i.name,description:i.description,options:(0,o.serializeIsVisibleFn)(i.options),type:i.type,defaultStyle:"defaultStyle"in i?i.defaultStyle:void 0,hasLearn:!!i.learn}),this.#O.set(n,i));this.#x.sendWithNoCb("setFeedbackDefinitions",{feedbacks:e})}setPresetDefinitions(t){const e=[];for(const[n,i]of Object.entries(t))i&&e.push({...i,id:n});this.#x.sendWithNoCb("setPresetDefinitions",{presets:e})}setVariableDefinitions(t){const e=[];this.#I.clear();for(const n of t)e.push({id:n.variableId,name:n.name}),this.#I.set(n.variableId,n),this.#N.has(n.variableId)||this.#N.set(n.variableId,"");if(!this.#n.disableVariableValidation){const t=new Set(this.#I.keys());for(const e of this.#N.keys())t.has(e)||this.#N.delete(e)}this.#x.sendWithNoCb("setVariableDefinitions",{variables:e})}setVariableValues(t){const e=[];for(const[n,i]of Object.entries(t))this.#n.disableVariableValidation?(void 0===i?this.#N.delete(n):this.#N.set(n,i),e.push({id:n,value:i})):this.#I.has(n)?(this.#N.set(n,i??""),e.push({id:n,value:i??""})):e.push({id:n,value:void 0});this.#x.sendWithNoCb("setVariableValues",{newValues:e})}getVariableValue(t){return this.#N.get(t)}async parseVariablesInString(t){return(await this.#x.sendWithCb("parseVariablesInString",{text:t})).text}checkFeedbacks(...t){const e=[],n=new Set(t);for(const[t,i]of this.#A.entries()){const r=this.#O.get(i.feedbackId);if(r){if(n.size>0&&!n.has(i.feedbackId))continue;try{let n=(0,c.callFeedbackOnDefinition)(r,i);n instanceof Promise&&(n=void 0,console.error(`Feedback check returned Promise, this is not allowed: ${JSON.stringify(i)}`)),e.push({id:t,controlId:i.controlId,value:n})}catch(t){console.error(`Feedback check failed: ${JSON.stringify(i)} - ${t?.message??t} ${t?.stack}`)}}}Object.keys(e).length>0&&this.#x.sendWithNoCb("updateFeedbackValues",{values:e})}checkFeedbacksById(...t){const e=[];for(const n of t){const t=this.#A.get(n),i=t&&this.#O.get(t.feedbackId);if(t&&i)try{let r=(0,c.callFeedbackOnDefinition)(i,t);r instanceof Promise&&(r=void 0,console.error(`Feedback check returned Promise, this is not allowed: ${JSON.stringify(t)}`)),e.push({id:n,controlId:t.controlId,value:r})}catch(e){console.error(`Feedback check failed: ${JSON.stringify(t)} - ${e?.message??e} ${e?.stack}`)}}Object.keys(e).length>0&&this.#x.sendWithNoCb("updateFeedbackValues",{values:e})}_getAllActions(){return Array.from(this.#P.values()).map((t=>({id:t.id,actionId:t.actionId,controlId:t.controlId,options:t.options})))}subscribeActions(...t){let e=Array.from(this.#P.values());const n=new Set(t);n.size&&(e=e.filter((t=>n.has(t.actionId))));for(const t of e){const e=this.#C.get(t.actionId);e?.subscribe&&e.subscribe({id:t.id,actionId:t.actionId,controlId:t.controlId,options:t.options})}}unsubscribeActions(...t){let e=Array.from(this.#P.values());const n=new Set(t);n.size&&(e=e.filter((t=>n.has(t.actionId))));for(const t of e){const e=this.#C.get(t.actionId);e&&e.unsubscribe&&e.unsubscribe({id:t.id,actionId:t.actionId,controlId:t.controlId,options:t.options})}}_getAllFeedbacks(){return Array.from(this.#A.values()).map((t=>({id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options})))}subscribeFeedbacks(...t){let e=Array.from(this.#A.values());const n=new Set(t);n.size&&(e=e.filter((t=>n.has(t.feedbackId))));for(const t of e){const e=this.#O.get(t.feedbackId);e?.subscribe&&e.subscribe({type:e.type,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options})}}unsubscribeFeedbacks(...t){let e=Array.from(this.#A.values());const n=new Set(t);n.size&&(e=e.filter((t=>n.has(t.feedbackId))));for(const t of e){const e=this.#O.get(t.feedbackId);e&&e.unsubscribe&&e.unsubscribe({type:e.type,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options})}}recordAction(t,e){if(!this.#T)throw new Error("Not currently recording actions");this.#x.sendWithNoCb("recordAction",{uniquenessId:e??null,actionId:t.actionId,options:t.options})}setCustomVariableValue(t,e){this.#x.sendWithNoCb("setCustomVariable",{customVariableId:t,value:e})}oscSend(t,e,n,i){this.#x.sendWithNoCb("send-osc",(0,r.literal)({host:t,port:e,path:n,args:i}))}updateStatus(t,e){this.#x.sendWithNoCb("set-status",(0,r.literal)({status:t,message:e??null}))}log(t,e){this.#x.sendWithNoCb("log-message",(0,r.literal)({level:t,message:e}))}}},7386:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1400:(t,e)=>{"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.Regex=e.InstanceStatus=void 0,(i=e.InstanceStatus||(e.InstanceStatus={})).Ok="ok",i.Connecting="connecting",i.Disconnected="disconnected",i.ConnectionFailure="connection_failure",i.BadConfig="bad_config",i.UnknownError="unknown_error",i.UnknownWarning="unknown_warning",(n=e.Regex||(e.Regex={})).IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",n.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",n.BOOLEAN="/^(true|false|0|1)$/i",n.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",n.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",n.FLOAT="/^([0-9]*\\.)?[0-9]+$/",n.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",n.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",n.NUMBER="/^\\d+$/",n.SIGNED_NUMBER="/^[+-]?\\d+$/",n.SOMETHING="/^.+$/",n.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"},8983:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5723:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9637:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(7690);i.__exportStar(n(3730),e),i.__exportStar(n(1649),e),i.__exportStar(n(7386),e),i.__exportStar(n(1400),e),i.__exportStar(n(8983),e),i.__exportStar(n(5723),e),i.__exportStar(n(3258),e),i.__exportStar(n(131),e),i.__exportStar(n(3371),e),i.__exportStar(n(9786),e),i.__exportStar(n(6132),e)},3258:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},131:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3371:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9786:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateConvertToBooleanFeedbackUpgradeScript=e.EmptyUpgradeScript=void 0,e.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}),e.CreateConvertToBooleanFeedbackUpgradeScript=function(t){return(e,n)=>{const i=[];for(const e of n.feedbacks){let n=t[e.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){e.style||(e.style={});for(const[t,r]of Object.entries(n))void 0!==e.options[t]&&(e.style[r]=e.options[t],delete e.options[t],i.push(e))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:i}}}},6132:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},360:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.from15to32Keys=e.splitRgb=e.combineRgb=e.assertNever=e.literal=void 0,e.literal=function(t){return t},e.assertNever=function(t){},e.combineRgb=function(t,e,n){return(255&t)<<16|(255&e)<<8|255&n},e.splitRgb=function(t){return{r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}},e.from15to32Keys=function(t){t-=1;let e=8*Math.floor(t/5)+(t%5+1);return e>=32?31:e}},7281:(t,e,n)=>{"use strict";t.exports=s,t.exports.default=s;const i={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18"},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"}},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}}},required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"]},r=n(7169).A;function s(t,{instancePath:e="",parentData:n,parentDataProperty:o,rootData:a=t}={}){if(!t||"object"!=typeof t||Array.isArray(t))return s.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===t.id&&(n="id")||void 0===t.name&&(n="name")||void 0===t.shortname&&(n="shortname")||void 0===t.description&&(n="description")||void 0===t.version&&(n="version")||void 0===t.license&&(n="license")||void 0===t.repository&&(n="repository")||void 0===t.bugs&&(n="bugs")||void 0===t.maintainers&&(n="maintainers")||void 0===t.legacyIds&&(n="legacyIds")||void 0===t.runtime&&(n="runtime")||void 0===t.manufacturer&&(n="manufacturer")||void 0===t.products&&(n="products")||void 0===t.keywords&&(n="keywords"))return s.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==t.id){const n=0;if("string"!=typeof t.id)return s.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=0===n}else c=!0;if(c){if(void 0!==t.name){const n=0;if("string"!=typeof t.name)return s.errors=[{instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.shortname){const n=0;if("string"!=typeof t.shortname)return s.errors=[{instancePath:e+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.description){const n=0;if("string"!=typeof t.description)return s.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.version){const n=0;if("string"!=typeof t.version)return s.errors=[{instancePath:e+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.license){const n=0;if("string"!=typeof t.license)return s.errors=[{instancePath:e+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.repository){const n=0;if("string"!=typeof t.repository)return s.errors=[{instancePath:e+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.bugs){const n=0;if("string"!=typeof t.bugs)return s.errors=[{instancePath:e+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.maintainers){let n=t.maintainers;const i=0;if(0===i){if(!Array.isArray(n))return s.errors=[{instancePath:e+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var l=!0;const t=n.length;for(let i=0;i<t;i++){let t=n[i];const r=0;if(0===r){if(!t||"object"!=typeof t||Array.isArray(t))return s.errors=[{instancePath:e+"/maintainers/"+i,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===t.name&&(n="name"))return s.errors=[{instancePath:e+"/maintainers/"+i,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==t.name){const n=0;if("string"!=typeof t.name)return s.errors=[{instancePath:e+"/maintainers/"+i+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=0===n}else h=!0;if(h){if(void 0!==t.email){const n=0;if("string"!=typeof t.email)return s.errors=[{instancePath:e+"/maintainers/"+i+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=0===n}else h=!0;if(h)if(void 0!==t.github){const n=0;if("string"!=typeof t.github)return s.errors=[{instancePath:e+"/maintainers/"+i+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=0===n}else h=!0}}}if(!(l=0===r))break}if(l){let t,i=n.length;if(i>1)for(;i--;)for(t=i;t--;)if(r(n[i],n[t]))return s.errors=[{instancePath:e+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i,j:t},message:"must NOT have duplicate items (items ## "+t+" and "+i+" are identical)"}],!1}}}c=0===i}else c=!0;if(c){if(void 0!==t.legacyIds){let n=t.legacyIds;const i=0;if(0===i){if(!Array.isArray(n))return s.errors=[{instancePath:e+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var u=!0;const t=n.length;for(let i=0;i<t;i++){const t=0;if("string"!=typeof n[i])return s.errors=[{instancePath:e+"/legacyIds/"+i,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(u=0===t))break}if(u){let t,i=n.length;if(i>1){const r={};for(;i--;){let o=n[i];if("string"==typeof o){if("number"==typeof r[o])return t=r[o],s.errors=[{instancePath:e+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i,j:t},message:"must NOT have duplicate items (items ## "+t+" and "+i+" are identical)"}],!1;r[o]=i}}}}}}c=0===i}else c=!0;if(c){if(void 0!==t.runtime){let n=t.runtime;const r=0;if(0===r){if(!n||"object"!=typeof n||Array.isArray(n))return s.errors=[{instancePath:e+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===n.type&&(t="type")||void 0===n.api&&(t="api")||void 0===n.apiVersion&&(t="apiVersion")||void 0===n.entrypoint&&(t="entrypoint"))return s.errors=[{instancePath:e+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==n.type){const t=0;if("string"!=typeof n.type)return s.errors=[{instancePath:e+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=0===t}else p=!0;if(p){if(void 0!==n.api){let t=n.api;const r=0;if("string"!=typeof t)return s.errors=[{instancePath:e+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==t)return s.errors=[{instancePath:e+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:i.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;p=0===r}else p=!0;if(p){if(void 0!==n.apiVersion){const t=0;if("string"!=typeof n.apiVersion)return s.errors=[{instancePath:e+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=0===t}else p=!0;if(p)if(void 0!==n.entrypoint){const t=0;if("string"!=typeof n.entrypoint)return s.errors=[{instancePath:e+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=0===t}else p=!0}}}}c=0===r}else c=!0;if(c){if(void 0!==t.manufacturer){const n=0;if("string"!=typeof t.manufacturer)return s.errors=[{instancePath:e+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==t.products){let n=t.products;const i=0;if(0===i){if(!Array.isArray(n))return s.errors=[{instancePath:e+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var d=!0;const t=n.length;for(let i=0;i<t;i++){const t=0;if("string"!=typeof n[i])return s.errors=[{instancePath:e+"/products/"+i,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(d=0===t))break}if(d){let t,i=n.length;if(i>1){const r={};for(;i--;){let o=n[i];if("string"==typeof o){if("number"==typeof r[o])return t=r[o],s.errors=[{instancePath:e+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i,j:t},message:"must NOT have duplicate items (items ## "+t+" and "+i+" are identical)"}],!1;r[o]=i}}}}}}c=0===i}else c=!0;if(c)if(void 0!==t.keywords){let n=t.keywords;const i=0;if(0===i){if(!Array.isArray(n))return s.errors=[{instancePath:e+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const t=n.length;for(let i=0;i<t;i++){const t=0;if("string"!=typeof n[i])return s.errors=[{instancePath:e+"/keywords/"+i,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(f=0===t))break}if(f){let t,i=n.length;if(i>1){const r={};for(;i--;){let o=n[i];if("string"==typeof o){if("number"==typeof r[o])return t=r[o],s.errors=[{instancePath:e+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i,j:t},message:"must NOT have duplicate items (items ## "+t+" and "+i+" are identical)"}],!1;r[o]=i}}}}}}c=0===i}else c=!0}}}}}}}}}}}}}return s.errors=null,!0}},5565:t=>{var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(t,n)=>{for(var i in n)e(t,i,{get:n[i],enumerable:!0})},o=(t=>(s,o)=>t&&t.get(s)||(o=((t,s,o,a)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let o of i(s))r.call(t,o)||e(t,o,{get:()=>s[o],enumerable:!(a=n(s,o))||a.enumerable});return t})(e({},"__esModule",{value:!0}),s),t&&t.set(s,o),o))("undefined"!=typeof WeakMap?new WeakMap:0),a=(t,n,i)=>(((t,n,i)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i})(t,"symbol"!=typeof n?n+"":n,i),i),c={};s(c,{applyPalette:()=>Qt,applyPaletteSync:()=>Xt,buildPalette:()=>Jt,buildPaletteSync:()=>Vt,constants:()=>l,conversion:()=>f,distance:()=>j,image:()=>Nt,palette:()=>it,quality:()=>zt,utils:()=>lt});var l={};s(l,{bt709:()=>h});var h={};s(h,{Y:()=>u,x:()=>p,y:()=>d});var u=(t=>(t[t.RED=.2126]="RED",t[t.GREEN=.7152]="GREEN",t[t.BLUE=.0722]="BLUE",t[t.WHITE=1]="WHITE",t))(u||{}),p=(t=>(t[t.RED=.64]="RED",t[t.GREEN=.3]="GREEN",t[t.BLUE=.15]="BLUE",t[t.WHITE=.3127]="WHITE",t))(p||{}),d=(t=>(t[t.RED=.33]="RED",t[t.GREEN=.6]="GREEN",t[t.BLUE=.06]="BLUE",t[t.WHITE=.329]="WHITE",t))(d||{}),f={};function m(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}function g(t,e,n){return{x:.4124*(t=m(t/255))+.3576*(e=m(e/255))+.1805*(n=m(n/255)),y:.2126*t+.7152*e+.0722*n,z:.0193*t+.1192*e+.9505*n}}s(f,{lab2rgb:()=>U,lab2xyz:()=>B,rgb2hsl:()=>k,rgb2lab:()=>P,rgb2xyz:()=>g,xyz2lab:()=>A,xyz2rgb:()=>L});var _={};function y(t){return t*(Math.PI/180)}function b(t,e,n){let i=t;return i<e&&(i=e),i<n&&(i=n),i}function v(t,e,n){let i=t;return i>e&&(i=e),i>n&&(i=n),i}function w(t,e,n){return t>n&&(t=n),t<e&&(t=e),0|t}function x(t){return(t=Math.round(t))>255?t=255:t<0&&(t=0),t}function E(t){return t>255?t=255:t<0&&(t=0),t}function S(t,e){const n=typeof t[0];let i;if("number"===n||"string"===n){const n=Object.create(null);for(let e=0,i=t.length;e<i;e++){const i=t[e];n[i]||0===n[i]||(n[i]=e)}i=t.sort(((t,i)=>e(t,i)||n[t]-n[i]))}else{const n=t.slice(0);i=t.sort(((t,i)=>e(t,i)||n.indexOf(t)-n.indexOf(i)))}return i}function k(t,e,n){const i=v(t,e,n),r=b(t,e,n),s=r-i,o=(i+r)/510;let a=0;o>0&&o<1&&(a=s/(o<.5?r+i:510-r-i));let c=0;return s>0&&(c=r===t?(e-n)/s:r===e?2+(n-t)/s:4+(t-e)/s,c*=60,c<0&&(c+=360)),{h:c,s:a,l:o}}s(_,{degrees2radians:()=>y,inRange0to255:()=>E,inRange0to255Rounded:()=>x,intInRange:()=>w,max3:()=>b,min3:()=>v,stableSort:()=>S});var T=.95047,C=1,O=1.08883;function I(t){return t>.008856?t**(1/3):7.787*t+16/116}function A(t,e,n){if(t=I(t/T),e=I(e/C),n=I(n/O),116*e-16<0)throw new Error("xxx");return{L:Math.max(0,116*e-16),a:500*(t-e),b:200*(e-n)}}function P(t,e,n){const i=g(t,e,n);return A(i.x,i.y,i.z)}var N=.95047,M=1,D=1.08883;function R(t){return t>.206893034?t**3:(t-16/116)/7.787}function B(t,e,n){const i=(t+16)/116,r=i-n/200;return{x:N*R(e/500+i),y:M*R(i),z:D*R(r)}}function F(t){return t>.0031308?1.055*t**(1/2.4)-.055:12.92*t}function L(t,e,n){const i=F(3.2406*t+-1.5372*e+-.4986*n),r=F(-.9689*t+1.8758*e+.0415*n),s=F(.0557*t+-.204*e+1.057*n);return{r:x(255*i),g:x(255*r),b:x(255*s)}}function U(t,e,n){const i=B(t,e,n);return L(i.x,i.y,i.z)}var j={};s(j,{AbstractDistanceCalculator:()=>z,AbstractEuclidean:()=>V,AbstractManhattan:()=>K,CIE94GraphicArts:()=>H,CIE94Textiles:()=>q,CIEDE2000:()=>Y,CMetric:()=>W,Euclidean:()=>J,EuclideanBT709:()=>X,EuclideanBT709NoAlpha:()=>Q,Manhattan:()=>Z,ManhattanBT709:()=>et,ManhattanNommyde:()=>tt,PNGQuant:()=>nt});var z=class{constructor(){a(this,"_maxDistance"),a(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(t,e,n,i){this._whitePoint={r:t>0?255/t:0,g:e>0?255/e:0,b:n>0?255/n:0,a:i>0?255/i:0},this._maxDistance=this.calculateRaw(t,e,n,i,0,0,0,0)}calculateNormalized(t,e){return this.calculateRaw(t.r,t.g,t.b,t.a,e.r,e.g,e.b,e.a)/this._maxDistance}},G=class extends z{calculateRaw(t,e,n,i,r,s,o,a){const c=P(E(t*this._whitePoint.r),E(e*this._whitePoint.g),E(n*this._whitePoint.b)),l=P(E(r*this._whitePoint.r),E(s*this._whitePoint.g),E(o*this._whitePoint.b)),h=c.L-l.L,u=c.a-l.a,p=c.b-l.b,d=Math.sqrt(c.a*c.a+c.b*c.b),f=d-Math.sqrt(l.a*l.a+l.b*l.b);let m=u*u+p*p-f*f;m=m<0?0:Math.sqrt(m);const g=(a-i)*this._whitePoint.a*this._kA;return Math.sqrt((h/this._Kl)**2+(f/(1+this._K1*d))**2+(m/(1+this._K2*d))**2+g**2)}},q=class extends G{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},H=class extends G{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},$=class extends z{_setDefaults(){}static _calculatehp(t,e){const n=Math.atan2(t,e);return n>=0?n:n+$._deg360InRad}static _calculateRT(t,e){const n=e**7,i=2*Math.sqrt(n/(n+$._pow25to7)),r=$._deg30InRad*Math.exp(-(((t-$._deg275InRad)/$._deg25InRad)**2));return-Math.sin(2*r)*i}static _calculateT(t){return 1-.17*Math.cos(t-$._deg30InRad)+.24*Math.cos(2*t)+.32*Math.cos(3*t+$._deg6InRad)-.2*Math.cos(4*t-$._deg63InRad)}static _calculate_ahp(t,e,n,i){const r=n+i;return 0===t?r:e<=$._deg180InRad?r/2:r<$._deg360InRad?(r+$._deg360InRad)/2:(r-$._deg360InRad)/2}static _calculate_dHp(t,e,n,i){let r;return r=0===t?0:e<=$._deg180InRad?n-i:n<=i?n-i+$._deg360InRad:n-i-$._deg360InRad,2*Math.sqrt(t)*Math.sin(r/2)}calculateRaw(t,e,n,i,r,s,o,a){const c=P(E(t*this._whitePoint.r),E(e*this._whitePoint.g),E(n*this._whitePoint.b)),l=P(E(r*this._whitePoint.r),E(s*this._whitePoint.g),E(o*this._whitePoint.b)),h=(a-i)*this._whitePoint.a*$._kA,u=this.calculateRawInLab(c,l);return Math.sqrt(u+h*h)}calculateRawInLab(t,e){const n=t.L,i=t.a,r=t.b,s=e.L,o=e.a,a=e.b,c=((Math.sqrt(i*i+r*r)+Math.sqrt(o*o+a*a))/2)**7,l=.5*(1-Math.sqrt(c/(c+$._pow25to7))),h=(1+l)*i,u=(1+l)*o,p=Math.sqrt(h*h+r*r),d=Math.sqrt(u*u+a*a),f=p*d,m=$._calculatehp(r,h),g=$._calculatehp(a,u),_=Math.abs(m-g),y=s-n,b=d-p,v=$._calculate_dHp(f,_,g,m),w=$._calculate_ahp(f,_,m,g),x=(p+d)/2,E=((n+s)/2-50)**2,S=b/(1+.045*x),k=v/(1+.015*$._calculateT(w)*x);return(y/(1+.015*E/Math.sqrt(20+E)))**2+S**2+k**2+$._calculateRT(w,x)*S*k}},Y=$;a(Y,"_kA",25/255),a(Y,"_pow25to7",25**7),a(Y,"_deg360InRad",y(360)),a(Y,"_deg180InRad",y(180)),a(Y,"_deg30InRad",y(30)),a(Y,"_deg6InRad",y(6)),a(Y,"_deg63InRad",y(63)),a(Y,"_deg275InRad",y(275)),a(Y,"_deg25InRad",y(25));var W=class extends z{calculateRaw(t,e,n,i,r,s,o,a){const c=(t+r)/2*this._whitePoint.r,l=(t-r)*this._whitePoint.r,h=(e-s)*this._whitePoint.g,u=(n-o)*this._whitePoint.b,p=((512+c)*l*l>>8)+4*h*h+((767-c)*u*u>>8),d=(a-i)*this._whitePoint.a;return Math.sqrt(p+d*d)}_setDefaults(){}},V=class extends z{calculateRaw(t,e,n,i,r,s,o,a){const c=r-t,l=s-e,h=o-n,u=a-i;return Math.sqrt(this._kR*c*c+this._kG*l*l+this._kB*h*h+this._kA*u*u)}},J=class extends V{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},X=class extends V{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},Q=class extends V{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},K=class extends z{calculateRaw(t,e,n,i,r,s,o,a){let c=r-t,l=s-e,h=o-n,u=a-i;return c<0&&(c=0-c),l<0&&(l=0-l),h<0&&(h=0-h),u<0&&(u=0-u),this._kR*c+this._kG*l+this._kB*h+this._kA*u}},Z=class extends K{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},tt=class extends K{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},et=class extends K{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},nt=class extends z{calculateRaw(t,e,n,i,r,s,o,a){const c=(a-i)*this._whitePoint.a;return this._colordifferenceCh(t*this._whitePoint.r,r*this._whitePoint.r,c)+this._colordifferenceCh(e*this._whitePoint.g,s*this._whitePoint.g,c)+this._colordifferenceCh(n*this._whitePoint.b,o*this._whitePoint.b,c)}_colordifferenceCh(t,e,n){const i=t-e,r=i+n;return i*i+r*r}_setDefaults(){}},it={};s(it,{AbstractPaletteQuantizer:()=>rt,ColorHistogram:()=>wt,NeuQuant:()=>gt,NeuQuantFloat:()=>bt,RGBQuant:()=>Et,WuColorCube:()=>It,WuQuant:()=>Pt});var rt=class{quantizeSync(){for(const t of this.quantize())if(t.palette)return t.palette;throw new Error("unreachable")}},st=class{constructor(){a(this,"r"),a(this,"g"),a(this,"b"),a(this,"a"),a(this,"uint32"),a(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(t){const e=new st;return e.r=0|t[0],e.g=0|t[1],e.b=0|t[2],e.a=0|t[3],e._loadUINT32(),e._loadQuadruplet(),e}static createByRGBA(t,e,n,i){const r=new st;return r.r=0|t,r.g=0|e,r.b=0|n,r.a=0|i,r._loadUINT32(),r._loadQuadruplet(),r}static createByUint32(t){const e=new st;return e.uint32=t>>>0,e._loadRGBA(),e._loadQuadruplet(),e}from(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.uint32=t.uint32,this.rgba[0]=t.r,this.rgba[1]=t.g,this.rgba[2]=t.b,this.rgba[3]=t.a}getLuminosity(t){let e=this.r,n=this.g,i=this.b;return t&&(e=Math.min(255,255-this.a+this.a*e/255),n=Math.min(255,255-this.a+this.a*n/255),i=Math.min(255,255-this.a+this.a*i/255)),.2126*e+.7152*n+.0722*i}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},ot=class{constructor(){a(this,"_pointArray"),a(this,"_width"),a(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(t){this._width=t}setHeight(t){this._height=t}getPointArray(){return this._pointArray}clone(){const t=new ot;t._width=this._width,t._height=this._height;for(let e=0,n=this._pointArray.length;e<n;e++)t._pointArray[e]=st.createByUint32(0|this._pointArray[e].uint32);return t}toUint32Array(){const t=this._pointArray.length,e=new Uint32Array(t);for(let n=0;n<t;n++)e[n]=this._pointArray[n].uint32;return e}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(t){const e=t.naturalWidth,n=t.naturalHeight,i=document.createElement("canvas");return i.width=e,i.height=n,i.getContext("2d").drawImage(t,0,0,e,n,0,0,e,n),ot.fromHTMLCanvasElement(i)}static fromHTMLCanvasElement(t){const e=t.width,n=t.height,i=t.getContext("2d").getImageData(0,0,e,n);return ot.fromImageData(i)}static fromImageData(t){const e=t.width,n=t.height;return ot.fromUint8Array(t.data,e,n)}static fromUint8Array(t,e,n){switch(Object.prototype.toString.call(t)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:t=new Uint8Array(t)}const i=new Uint32Array(t.buffer);return ot.fromUint32Array(i,e,n)}static fromUint32Array(t,e,n){const i=new ot;i._width=e,i._height=n;for(let e=0,n=t.length;e<n;e++)i._pointArray[e]=st.createByUint32(0|t[e]);return i}static fromBuffer(t,e,n){const i=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/Uint32Array.BYTES_PER_ELEMENT);return ot.fromUint32Array(i,e,n)}};function at(t,e){const n=360/e;for(let i=1,r=n-n/2;i<e;i++,r+=n)if(t>=r&&t<r+n)return i;return 0}var ct=class{constructor(){a(this,"_pointContainer"),a(this,"_pointArray",[]),a(this,"_i32idx",{}),this._pointContainer=new ot,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(t){this._pointArray.push(t),this._pointContainer.setWidth(this._pointArray.length)}has(t){for(let e=this._pointArray.length-1;e>=0;e--)if(t.uint32===this._pointArray[e].uint32)return!0;return!1}getNearestColor(t,e){return this._pointArray[0|this._getNearestIndex(t,e)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(t){return"number"==typeof this._i32idx[t]?this._i32idx[t]:-1}_getNearestIndex(t,e){let n=this._nearestPointFromCache(""+e.uint32);if(n>=0)return n;let i=Number.MAX_VALUE;n=0;for(let r=0,s=this._pointArray.length;r<s;r++){const s=this._pointArray[r],o=t.calculateRaw(e.r,e.g,e.b,e.a,s.r,s.g,s.b,s.a);o<i&&(i=o,n=r)}return this._i32idx[e.uint32]=n,n}sort(){this._i32idx={},this._pointArray.sort(((t,e)=>{const n=k(t.r,t.g,t.b),i=k(e.r,e.g,e.b),r=t.r===t.g&&t.g===t.b?0:1+at(n.h,10),s=(e.r===e.g&&e.g===e.b?0:1+at(i.h,10))-r;if(s)return-s;const o=t.getLuminosity(!0),a=e.getLuminosity(!0);if(a-o!=0)return a-o;const c=(100*i.s|0)-(100*n.s|0);return c?-c:0}))}},lt={};s(lt,{HueStatistics:()=>ut,Palette:()=>ct,Point:()=>st,PointContainer:()=>ot,ProgressTracker:()=>dt,arithmetic:()=>_});var ht=class{constructor(){a(this,"num",0),a(this,"cols",[])}},ut=class{constructor(t,e){a(this,"_numGroups"),a(this,"_minCols"),a(this,"_stats"),a(this,"_groupsFull"),this._numGroups=t,this._minCols=e,this._stats=[];for(let e=0;e<=t;e++)this._stats[e]=new ht;this._groupsFull=0}check(t){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const e=255&t,n=t>>>8&255,i=t>>>16&255,r=e===n&&n===i?0:1+at(k(e,n,i).h,this._numGroups),s=this._stats[r],o=this._minCols;s.num++,s.num>o||(s.num===o&&this._groupsFull++,s.num<=o&&this._stats[r].cols.push(t))}injectIntoDictionary(t){for(let e=0;e<=this._numGroups;e++)this._stats[e].num<=this._minCols&&this._stats[e].cols.forEach((e=>{t[e]?t[e]++:t[e]=1}))}injectIntoArray(t){for(let e=0;e<=this._numGroups;e++)this._stats[e].num<=this._minCols&&this._stats[e].cols.forEach((e=>{-1===t.indexOf(e)&&t.push(e)}))}},pt=class{constructor(t,e){a(this,"progress"),a(this,"_step"),a(this,"_range"),a(this,"_last"),a(this,"_progressRange"),this._range=t,this._progressRange=e,this._step=Math.max(1,this._range/(pt.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(t){return t-this._last>=this._step&&(this._last=t,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},dt=pt;a(dt,"steps",100);var ft=class{constructor(t){a(this,"r"),a(this,"g"),a(this,"b"),a(this,"a"),this.r=this.g=this.b=this.a=t}toPoint(){return st.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)}subtract(t,e,n,i){this.r-=0|t,this.g-=0|e,this.b-=0|n,this.a-=0|i}},mt=class extends rt{constructor(t,e=256){super(),a(this,"_pointArray"),a(this,"_networkSize"),a(this,"_network"),a(this,"_sampleFactor"),a(this,"_radPower"),a(this,"_freq"),a(this,"_bias"),a(this,"_distance"),this._distance=t,this._pointArray=[],this._sampleFactor=1,this._networkSize=e,this._distance.setWhitePoint(2040,2040,2040,2040)}sample(t){this._pointArray=this._pointArray.concat(t.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let t=0;t<this._networkSize;t++)this._network[t]=new ft((t<<11)/this._networkSize|0),this._freq[t]=mt._initialBias/this._networkSize|0,this._bias[t]=0}*_learn(){let t=this._sampleFactor;const e=this._pointArray.length;e<mt._minpicturebytes&&(t=1);const n=30+(t-1)/3|0,i=e/t|0;let r,s=i/mt._nCycles|0,o=mt._initAlpha,a=(this._networkSize>>3)*mt._radiusBias,c=a>>mt._radiusBiasShift;c<=1&&(c=0);for(let t=0;t<c;t++)this._radPower[t]=o*((c*c-t*t)*mt._radBias/(c*c))>>>0;r=e<mt._minpicturebytes?1:e%mt._prime1!=0?mt._prime1:e%mt._prime2!=0?mt._prime2:e%mt._prime3!=0?mt._prime3:mt._prime4;const l=new dt(i,99);for(let t=0,h=0;t<i;){l.shouldNotify(t)&&(yield{progress:l.progress});const i=this._pointArray[h],u=i.b<<3,p=i.g<<3,d=i.r<<3,f=i.a<<3,m=this._contest(u,p,d,f);if(this._alterSingle(o,m,u,p,d,f),0!==c&&this._alterNeighbour(c,m,u,p,d,f),h+=r,h>=e&&(h-=e),t++,0===s&&(s=1),t%s==0){o-=o/n|0,a-=a/mt._radiusDecrease|0,c=a>>mt._radiusBiasShift,c<=1&&(c=0);for(let t=0;t<c;t++)this._radPower[t]=o*((c*c-t*t)*mt._radBias/(c*c))>>>0}}}_buildPalette(){const t=new ct;return this._network.forEach((e=>{t.add(e.toPoint())})),t.sort(),t}_alterNeighbour(t,e,n,i,r,s){let o=e-t;o<-1&&(o=-1);let a=e+t;a>this._networkSize&&(a=this._networkSize);let c=e+1,l=e-1,h=1;for(;c<a||l>o;){const t=this._radPower[h++]/mt._alphaRadBias;if(c<a){const e=this._network[c++];e.subtract(t*(e.r-r),t*(e.g-i),t*(e.b-n),t*(e.a-s))}if(l>o){const e=this._network[l--];e.subtract(t*(e.r-r),t*(e.g-i),t*(e.b-n),t*(e.a-s))}}}_alterSingle(t,e,n,i,r,s){t/=mt._initAlpha;const o=this._network[e];o.subtract(t*(o.r-r),t*(o.g-i),t*(o.b-n),t*(o.a-s))}_contest(t,e,n,i){let r=~(1<<31),s=r,o=-1,a=o;for(let c=0;c<this._networkSize;c++){const l=this._network[c],h=8160*this._distance.calculateNormalized(l,{r:n,g:e,b:t,a:i})|0;h<r&&(r=h,o=c);const u=h-(this._bias[c]>>mt._initialBiasShift-3);u<s&&(s=u,a=c);const p=this._freq[c]>>mt._betaShift;this._freq[c]-=p,this._bias[c]+=p<<mt._gammaShift}return this._freq[o]+=mt._beta,this._bias[o]-=mt._betaGamma,a}},gt=mt;a(gt,"_prime1",499),a(gt,"_prime2",491),a(gt,"_prime3",487),a(gt,"_prime4",503),a(gt,"_minpicturebytes",mt._prime4),a(gt,"_nCycles",100),a(gt,"_initialBiasShift",16),a(gt,"_initialBias",1<<mt._initialBiasShift),a(gt,"_gammaShift",10),a(gt,"_betaShift",10),a(gt,"_beta",mt._initialBias>>mt._betaShift),a(gt,"_betaGamma",mt._initialBias<<mt._gammaShift-mt._betaShift),a(gt,"_radiusBiasShift",6),a(gt,"_radiusBias",1<<mt._radiusBiasShift),a(gt,"_radiusDecrease",30),a(gt,"_alphaBiasShift",10),a(gt,"_initAlpha",1<<mt._alphaBiasShift),a(gt,"_radBiasShift",8),a(gt,"_radBias",1<<mt._radBiasShift),a(gt,"_alphaRadBiasShift",mt._alphaBiasShift+mt._radBiasShift),a(gt,"_alphaRadBias",1<<mt._alphaRadBiasShift);var _t=class{constructor(t){a(this,"r"),a(this,"g"),a(this,"b"),a(this,"a"),this.r=this.g=this.b=this.a=t}toPoint(){return st.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)}subtract(t,e,n,i){this.r-=t,this.g-=e,this.b-=n,this.a-=i}},yt=class extends rt{constructor(t,e=256){super(),a(this,"_pointArray"),a(this,"_networkSize"),a(this,"_network"),a(this,"_sampleFactor"),a(this,"_radPower"),a(this,"_freq"),a(this,"_bias"),a(this,"_distance"),this._distance=t,this._pointArray=[],this._sampleFactor=1,this._networkSize=e,this._distance.setWhitePoint(2040,2040,2040,2040)}sample(t){this._pointArray=this._pointArray.concat(t.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let t=0;t<this._networkSize;t++)this._network[t]=new _t((t<<11)/this._networkSize),this._freq[t]=yt._initialBias/this._networkSize,this._bias[t]=0}*_learn(){let t=this._sampleFactor;const e=this._pointArray.length;e<yt._minpicturebytes&&(t=1);const n=30+(t-1)/3,i=e/t;let r,s=i/yt._nCycles|0,o=yt._initAlpha,a=(this._networkSize>>3)*yt._radiusBias,c=a>>yt._radiusBiasShift;c<=1&&(c=0);for(let t=0;t<c;t++)this._radPower[t]=o*((c*c-t*t)*yt._radBias/(c*c));r=e<yt._minpicturebytes?1:e%yt._prime1!=0?yt._prime1:e%yt._prime2!=0?yt._prime2:e%yt._prime3!=0?yt._prime3:yt._prime4;const l=new dt(i,99);for(let t=0,h=0;t<i;){l.shouldNotify(t)&&(yield{progress:l.progress});const i=this._pointArray[h],u=i.b<<3,p=i.g<<3,d=i.r<<3,f=i.a<<3,m=this._contest(u,p,d,f);if(this._alterSingle(o,m,u,p,d,f),0!==c&&this._alterNeighbour(c,m,u,p,d,f),h+=r,h>=e&&(h-=e),t++,0===s&&(s=1),t%s==0){o-=o/n,a-=a/yt._radiusDecrease,c=a>>yt._radiusBiasShift,c<=1&&(c=0);for(let t=0;t<c;t++)this._radPower[t]=o*((c*c-t*t)*yt._radBias/(c*c))}}}_buildPalette(){const t=new ct;return this._network.forEach((e=>{t.add(e.toPoint())})),t.sort(),t}_alterNeighbour(t,e,n,i,r,s){let o=e-t;o<-1&&(o=-1);let a=e+t;a>this._networkSize&&(a=this._networkSize);let c=e+1,l=e-1,h=1;for(;c<a||l>o;){const t=this._radPower[h++]/yt._alphaRadBias;if(c<a){const e=this._network[c++];e.subtract(t*(e.r-r),t*(e.g-i),t*(e.b-n),t*(e.a-s))}if(l>o){const e=this._network[l--];e.subtract(t*(e.r-r),t*(e.g-i),t*(e.b-n),t*(e.a-s))}}}_alterSingle(t,e,n,i,r,s){t/=yt._initAlpha;const o=this._network[e];o.subtract(t*(o.r-r),t*(o.g-i),t*(o.b-n),t*(o.a-s))}_contest(t,e,n,i){let r=~(1<<31),s=r,o=-1,a=o;for(let c=0;c<this._networkSize;c++){const l=this._network[c],h=8160*this._distance.calculateNormalized(l,{r:n,g:e,b:t,a:i});h<r&&(r=h,o=c);const u=h-(this._bias[c]>>yt._initialBiasShift-3);u<s&&(s=u,a=c);const p=this._freq[c]>>yt._betaShift;this._freq[c]-=p,this._bias[c]+=p<<yt._gammaShift}return this._freq[o]+=yt._beta,this._bias[o]-=yt._betaGamma,a}},bt=yt;a(bt,"_prime1",499),a(bt,"_prime2",491),a(bt,"_prime3",487),a(bt,"_prime4",503),a(bt,"_minpicturebytes",yt._prime4),a(bt,"_nCycles",100),a(bt,"_initialBiasShift",16),a(bt,"_initialBias",1<<yt._initialBiasShift),a(bt,"_gammaShift",10),a(bt,"_betaShift",10),a(bt,"_beta",yt._initialBias>>yt._betaShift),a(bt,"_betaGamma",yt._initialBias<<yt._gammaShift-yt._betaShift),a(bt,"_radiusBiasShift",6),a(bt,"_radiusBias",1<<yt._radiusBiasShift),a(bt,"_radiusDecrease",30),a(bt,"_alphaBiasShift",10),a(bt,"_initAlpha",1<<yt._alphaBiasShift),a(bt,"_radBiasShift",8),a(bt,"_radBias",1<<yt._radBiasShift),a(bt,"_alphaRadBiasShift",yt._alphaBiasShift+yt._radBiasShift),a(bt,"_alphaRadBias",1<<yt._alphaRadBiasShift);var vt=class{constructor(t,e){a(this,"_method"),a(this,"_hueStats"),a(this,"_histogram"),a(this,"_initColors"),a(this,"_minHueCols"),this._method=t,this._minHueCols=e<<2,this._initColors=e<<2,this._hueStats=new ut(vt._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(t){switch(this._method){case 1:this._colorStats1D(t);break;case 2:this._colorStats2D(t)}}getImportanceSortedColorsIDXI32(){const t=S(Object.keys(this._histogram),((t,e)=>this._histogram[e]-this._histogram[t]));if(0===t.length)return[];let e;switch(this._method){case 1:const n=Math.min(t.length,this._initColors),i=t[n-1],r=this._histogram[i];e=t.slice(0,n);let s=n;const o=t.length;for(;s<o&&this._histogram[t[s]]===r;)e.push(t[s++]);this._hueStats.injectIntoArray(e);break;case 2:e=t;break;default:throw new Error("Incorrect method")}return e.map((t=>+t))}_colorStats1D(t){const e=this._histogram,n=t.getPointArray(),i=n.length;for(let t=0;t<i;t++){const i=n[t].uint32;this._hueStats.check(i),i in e?e[i]++:e[i]=1}}_colorStats2D(t){const e=t.getWidth(),n=t.getHeight(),i=t.getPointArray(),r=vt._boxSize[0],s=vt._boxSize[1],o=r*s,a=this._makeBoxes(e,n,r,s),c=this._histogram;a.forEach((t=>{let n=Math.round(t.w*t.h/o)*vt._boxPixels;n<2&&(n=2);const r={};this._iterateBox(t,e,(t=>{const e=i[t].uint32;this._hueStats.check(e),e in c?c[e]++:e in r?++r[e]>=n&&(c[e]=r[e]):r[e]=1}))})),this._hueStats.injectIntoDictionary(c)}_iterateBox(t,e,n){const i=t,r=i.y*e+i.x,s=(i.y+i.h-1)*e+(i.x+i.w-1),o=e-i.w+1;let a=0,c=r;do{n.call(this,c),c+=++a%i.w==0?o:1}while(c<=s)}_makeBoxes(t,e,n,i){const r=t%n,s=e%i,o=t-r,a=e-s,c=[];for(let l=0;l<e;l+=i)for(let e=0;e<t;e+=n)c.push({x:e,y:l,w:e===o?r:n,h:l===a?s:i});return c}},wt=vt;a(wt,"_boxSize",[64,64]),a(wt,"_boxPixels",2),a(wt,"_hueGroups",10);var xt=class{constructor(t,e,n){a(this,"index"),a(this,"color"),a(this,"distance"),this.index=t,this.color=e,this.distance=n}},Et=class extends rt{constructor(t,e=256,n=2){super(),a(this,"_colors"),a(this,"_initialDistance"),a(this,"_distanceIncrement"),a(this,"_histogram"),a(this,"_distance"),this._distance=t,this._colors=e,this._histogram=new wt(n,e),this._initialDistance=.01,this._distanceIncrement=.005}sample(t){this._histogram.sample(t)}*quantize(){const t=this._histogram.getImportanceSortedColorsIDXI32();if(0===t.length)throw new Error("No colors in image");yield*this._buildPalette(t)}*_buildPalette(t){const e=new ct,n=e.getPointContainer().getPointArray(),i=new Array(t.length);for(let e=0;e<t.length;e++)n.push(st.createByUint32(t[e])),i[e]=1;const r=n.length,s=[];let o=r,a=this._initialDistance;const c=new dt(o-this._colors,99);for(;o>this._colors;){s.length=0;for(let t=0;t<r;t++){if(c.shouldNotify(r-o)&&(yield{progress:c.progress}),0===i[t])continue;const e=n[t];for(let c=t+1;c<r;c++){if(0===i[c])continue;const t=n[c],r=this._distance.calculateNormalized(e,t);r<a&&(s.push(new xt(c,t,r)),i[c]=0,o--)}}a+=o>3*this._colors?this._initialDistance:this._distanceIncrement}if(o<this._colors){S(s,((t,e)=>e.distance-t.distance));let t=0;for(;o<this._colors&&t<s.length;)i[s[t].index]=1,o++,t++}let l=n.length;for(let t=l-1;t>=0;t--)0===i[t]&&(t!==l-1&&(n[t]=n[l-1]),--l);n.length=l,e.sort(),yield{palette:e,progress:100}}};function St(t){const e=[];for(let n=0;n<t;n++)e[n]=0;return e}function kt(t,e,n,i){const r=new Array(t);for(let s=0;s<t;s++){r[s]=new Array(e);for(let t=0;t<e;t++){r[s][t]=new Array(n);for(let e=0;e<n;e++){r[s][t][e]=new Array(i);for(let n=0;n<i;n++)r[s][t][e][n]=0}}}return r}function Tt(t,e,n){const i=new Array(t);for(let r=0;r<t;r++){i[r]=new Array(e);for(let t=0;t<e;t++){i[r][t]=new Array(n);for(let e=0;e<n;e++)i[r][t][e]=0}}return i}function Ct(t,e,n,i,r){for(let s=0;s<e;s++){t[s]=[];for(let e=0;e<n;e++){t[s][e]=[];for(let n=0;n<i;n++)t[s][e][n]=r}}}function Ot(t,e,n){for(let i=0;i<e;i++)t[i]=n}var It=class{constructor(){a(this,"redMinimum"),a(this,"redMaximum"),a(this,"greenMinimum"),a(this,"greenMaximum"),a(this,"blueMinimum"),a(this,"blueMaximum"),a(this,"volume"),a(this,"alphaMinimum"),a(this,"alphaMaximum")}},At=class extends rt{constructor(t,e=256,n=5){super(),a(this,"_reds"),a(this,"_greens"),a(this,"_blues"),a(this,"_alphas"),a(this,"_sums"),a(this,"_weights"),a(this,"_momentsRed"),a(this,"_momentsGreen"),a(this,"_momentsBlue"),a(this,"_momentsAlpha"),a(this,"_moments"),a(this,"_table"),a(this,"_pixels"),a(this,"_cubes"),a(this,"_colors"),a(this,"_significantBitsPerChannel"),a(this,"_maxSideIndex"),a(this,"_alphaMaxSideIndex"),a(this,"_sideSize"),a(this,"_alphaSideSize"),a(this,"_distance"),this._distance=t,this._setQuality(n),this._initialize(e)}sample(t){const e=t.getPointArray();for(let t=0,n=e.length;t<n;t++)this._addColor(e[t]);this._pixels=this._pixels.concat(e)}*quantize(){yield*this._preparePalette();const t=new ct;for(let e=0;e<this._colors;e++)if(this._sums[e]>0){const n=this._sums[e],i=this._reds[e]/n,r=this._greens[e]/n,s=this._blues[e]/n,o=this._alphas[e]/n,a=st.createByRGBA(0|i,0|r,0|s,0|o);t.add(a)}t.sort(),yield{palette:t,progress:100}}*_preparePalette(){yield*this._calculateMoments();let t=0;const e=St(this._colors);for(let n=1;n<this._colors;++n){this._cut(this._cubes[t],this._cubes[n])?(e[t]=this._cubes[t].volume>1?this._calculateVariance(this._cubes[t]):0,e[n]=this._cubes[n].volume>1?this._calculateVariance(this._cubes[n]):0):(e[t]=0,n--),t=0;let i=e[0];for(let r=1;r<=n;++r)e[r]>i&&(i=e[r],t=r);if(i<=0){this._colors=n+1;break}}const n=[],i=[],r=[],s=[];for(let t=0;t<this._colors;++t){const e=At._volume(this._cubes[t],this._weights);e>0?(n[t]=At._volume(this._cubes[t],this._momentsRed)/e|0,i[t]=At._volume(this._cubes[t],this._momentsGreen)/e|0,r[t]=At._volume(this._cubes[t],this._momentsBlue)/e|0,s[t]=At._volume(this._cubes[t],this._momentsAlpha)/e|0):(n[t]=0,i[t]=0,r[t]=0,s[t]=0)}this._reds=St(this._colors+1),this._greens=St(this._colors+1),this._blues=St(this._colors+1),this._alphas=St(this._colors+1),this._sums=St(this._colors+1);for(let t=0,e=this._pixels.length;t<e;t++){const e=this._pixels[t];let o=-1,a=Number.MAX_VALUE;for(let t=0;t<this._colors;t++){const c=n[t],l=i[t],h=r[t],u=s[t],p=this._distance.calculateRaw(c,l,h,u,e.r,e.g,e.b,e.a);p<a&&(a=p,o=t)}this._reds[o]+=e.r,this._greens[o]+=e.g,this._blues[o]+=e.b,this._alphas[o]+=e.a,this._sums[o]++}}_addColor(t){const e=8-this._significantBitsPerChannel,n=1+(t.r>>e),i=1+(t.g>>e),r=1+(t.b>>e),s=1+(t.a>>e);this._weights[s][n][i][r]++,this._momentsRed[s][n][i][r]+=t.r,this._momentsGreen[s][n][i][r]+=t.g,this._momentsBlue[s][n][i][r]+=t.b,this._momentsAlpha[s][n][i][r]+=t.a,this._moments[s][n][i][r]+=this._table[t.r]+this._table[t.g]+this._table[t.b]+this._table[t.a]}*_calculateMoments(){const t=[],e=[],n=[],i=[],r=[],s=[],o=Tt(this._sideSize,this._sideSize,this._sideSize),a=Tt(this._sideSize,this._sideSize,this._sideSize),c=Tt(this._sideSize,this._sideSize,this._sideSize),l=Tt(this._sideSize,this._sideSize,this._sideSize),h=Tt(this._sideSize,this._sideSize,this._sideSize),u=Tt(this._sideSize,this._sideSize,this._sideSize);let p=0;const d=new dt(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let f=1;f<=this._alphaMaxSideIndex;++f){Ct(o,this._sideSize,this._sideSize,this._sideSize,0),Ct(a,this._sideSize,this._sideSize,this._sideSize,0),Ct(c,this._sideSize,this._sideSize,this._sideSize,0),Ct(l,this._sideSize,this._sideSize,this._sideSize,0),Ct(h,this._sideSize,this._sideSize,this._sideSize,0),Ct(u,this._sideSize,this._sideSize,this._sideSize,0);for(let m=1;m<=this._maxSideIndex;++m,++p){d.shouldNotify(p)&&(yield{progress:d.progress}),Ot(t,this._sideSize,0),Ot(e,this._sideSize,0),Ot(n,this._sideSize,0),Ot(i,this._sideSize,0),Ot(r,this._sideSize,0),Ot(s,this._sideSize,0);for(let p=1;p<=this._maxSideIndex;++p){let d=0,g=0,_=0,y=0,b=0,v=0;for(let w=1;w<=this._maxSideIndex;++w)d+=this._weights[f][m][p][w],g+=this._momentsRed[f][m][p][w],_+=this._momentsGreen[f][m][p][w],y+=this._momentsBlue[f][m][p][w],b+=this._momentsAlpha[f][m][p][w],v+=this._moments[f][m][p][w],t[w]+=d,e[w]+=g,n[w]+=_,i[w]+=y,r[w]+=b,s[w]+=v,o[m][p][w]=o[m-1][p][w]+t[w],a[m][p][w]=a[m-1][p][w]+e[w],c[m][p][w]=c[m-1][p][w]+n[w],l[m][p][w]=l[m-1][p][w]+i[w],h[m][p][w]=h[m-1][p][w]+r[w],u[m][p][w]=u[m-1][p][w]+s[w],this._weights[f][m][p][w]=this._weights[f-1][m][p][w]+o[m][p][w],this._momentsRed[f][m][p][w]=this._momentsRed[f-1][m][p][w]+a[m][p][w],this._momentsGreen[f][m][p][w]=this._momentsGreen[f-1][m][p][w]+c[m][p][w],this._momentsBlue[f][m][p][w]=this._momentsBlue[f-1][m][p][w]+l[m][p][w],this._momentsAlpha[f][m][p][w]=this._momentsAlpha[f-1][m][p][w]+h[m][p][w],this._moments[f][m][p][w]=this._moments[f-1][m][p][w]+u[m][p][w]}}}}static _volumeFloat(t,e){return e[t.alphaMaximum][t.redMaximum][t.greenMaximum][t.blueMaximum]-e[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMaximum]-e[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMaximum]+e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMaximum]-e[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMaximum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMaximum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMaximum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(e[t.alphaMaximum][t.redMaximum][t.greenMaximum][t.blueMinimum]-e[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMinimum]-e[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMinimum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]-e[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMinimum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]+e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum])}static _volume(t,e){return 0|At._volumeFloat(t,e)}static _top(t,e,n,i){let r;switch(e){case At._alpha:r=i[n][t.redMaximum][t.greenMaximum][t.blueMaximum]-i[n][t.redMaximum][t.greenMinimum][t.blueMaximum]-i[n][t.redMinimum][t.greenMaximum][t.blueMaximum]+i[n][t.redMinimum][t.greenMinimum][t.blueMaximum]-(i[n][t.redMaximum][t.greenMaximum][t.blueMinimum]-i[n][t.redMaximum][t.greenMinimum][t.blueMinimum]-i[n][t.redMinimum][t.greenMaximum][t.blueMinimum]+i[n][t.redMinimum][t.greenMinimum][t.blueMinimum]);break;case At._red:r=i[t.alphaMaximum][n][t.greenMaximum][t.blueMaximum]-i[t.alphaMaximum][n][t.greenMinimum][t.blueMaximum]-i[t.alphaMinimum][n][t.greenMaximum][t.blueMaximum]+i[t.alphaMinimum][n][t.greenMinimum][t.blueMaximum]-(i[t.alphaMaximum][n][t.greenMaximum][t.blueMinimum]-i[t.alphaMaximum][n][t.greenMinimum][t.blueMinimum]-i[t.alphaMinimum][n][t.greenMaximum][t.blueMinimum]+i[t.alphaMinimum][n][t.greenMinimum][t.blueMinimum]);break;case At._green:r=i[t.alphaMaximum][t.redMaximum][n][t.blueMaximum]-i[t.alphaMaximum][t.redMinimum][n][t.blueMaximum]-i[t.alphaMinimum][t.redMaximum][n][t.blueMaximum]+i[t.alphaMinimum][t.redMinimum][n][t.blueMaximum]-(i[t.alphaMaximum][t.redMaximum][n][t.blueMinimum]-i[t.alphaMaximum][t.redMinimum][n][t.blueMinimum]-i[t.alphaMinimum][t.redMaximum][n][t.blueMinimum]+i[t.alphaMinimum][t.redMinimum][n][t.blueMinimum]);break;case At._blue:r=i[t.alphaMaximum][t.redMaximum][t.greenMaximum][n]-i[t.alphaMaximum][t.redMaximum][t.greenMinimum][n]-i[t.alphaMaximum][t.redMinimum][t.greenMaximum][n]+i[t.alphaMaximum][t.redMinimum][t.greenMinimum][n]-(i[t.alphaMinimum][t.redMaximum][t.greenMaximum][n]-i[t.alphaMinimum][t.redMaximum][t.greenMinimum][n]-i[t.alphaMinimum][t.redMinimum][t.greenMaximum][n]+i[t.alphaMinimum][t.redMinimum][t.greenMinimum][n]);break;default:throw new Error("impossible")}return 0|r}static _bottom(t,e,n){switch(e){case At._alpha:return-n[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMaximum]+n[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMaximum]+n[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMaximum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(-n[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMinimum]+n[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]+n[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);case At._red:return-n[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMaximum]+n[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMaximum]+n[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMaximum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(-n[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMinimum]+n[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]+n[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);case At._green:return-n[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMaximum]+n[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMaximum]+n[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMaximum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(-n[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMinimum]+n[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]+n[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);case At._blue:return-n[t.alphaMaximum][t.redMaximum][t.greenMaximum][t.blueMinimum]+n[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMinimum]+n[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMinimum]-n[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]-(-n[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMinimum]+n[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]+n[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]-n[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);default:return 0}}_calculateVariance(t){const e=At._volume(t,this._momentsRed),n=At._volume(t,this._momentsGreen),i=At._volume(t,this._momentsBlue),r=At._volume(t,this._momentsAlpha);return At._volumeFloat(t,this._moments)-(e*e+n*n+i*i+r*r)/At._volume(t,this._weights)}_maximize(t,e,n,i,r,s,o,a,c){const l=0|At._bottom(t,e,this._momentsRed),h=0|At._bottom(t,e,this._momentsGreen),u=0|At._bottom(t,e,this._momentsBlue),p=0|At._bottom(t,e,this._momentsAlpha),d=0|At._bottom(t,e,this._weights);let f=0,m=-1;for(let g=n;g<i;++g){let n=l+At._top(t,e,g,this._momentsRed),i=h+At._top(t,e,g,this._momentsGreen),_=u+At._top(t,e,g,this._momentsBlue),y=p+At._top(t,e,g,this._momentsAlpha),b=d+At._top(t,e,g,this._weights);if(0!==b){let t=n*n+i*i+_*_+y*y,e=t/b;n=r-n,i=s-i,_=o-_,y=a-y,b=c-b,0!==b&&(t=n*n+i*i+_*_+y*y,e+=t/b,e>f&&(f=e,m=g))}}return{max:f,position:m}}_cut(t,e){let n;const i=At._volume(t,this._momentsRed),r=At._volume(t,this._momentsGreen),s=At._volume(t,this._momentsBlue),o=At._volume(t,this._momentsAlpha),a=At._volume(t,this._weights),c=this._maximize(t,At._red,t.redMinimum+1,t.redMaximum,i,r,s,o,a),l=this._maximize(t,At._green,t.greenMinimum+1,t.greenMaximum,i,r,s,o,a),h=this._maximize(t,At._blue,t.blueMinimum+1,t.blueMaximum,i,r,s,o,a),u=this._maximize(t,At._alpha,t.alphaMinimum+1,t.alphaMaximum,i,r,s,o,a);if(u.max>=c.max&&u.max>=l.max&&u.max>=h.max){if(n=At._alpha,u.position<0)return!1}else n=c.max>=u.max&&c.max>=l.max&&c.max>=h.max?At._red:l.max>=u.max&&l.max>=c.max&&l.max>=h.max?At._green:At._blue;switch(e.redMaximum=t.redMaximum,e.greenMaximum=t.greenMaximum,e.blueMaximum=t.blueMaximum,e.alphaMaximum=t.alphaMaximum,n){case At._red:e.redMinimum=t.redMaximum=c.position,e.greenMinimum=t.greenMinimum,e.blueMinimum=t.blueMinimum,e.alphaMinimum=t.alphaMinimum;break;case At._green:e.greenMinimum=t.greenMaximum=l.position,e.redMinimum=t.redMinimum,e.blueMinimum=t.blueMinimum,e.alphaMinimum=t.alphaMinimum;break;case At._blue:e.blueMinimum=t.blueMaximum=h.position,e.redMinimum=t.redMinimum,e.greenMinimum=t.greenMinimum,e.alphaMinimum=t.alphaMinimum;break;case At._alpha:e.alphaMinimum=t.alphaMaximum=u.position,e.blueMinimum=t.blueMinimum,e.redMinimum=t.redMinimum,e.greenMinimum=t.greenMinimum}return t.volume=(t.redMaximum-t.redMinimum)*(t.greenMaximum-t.greenMinimum)*(t.blueMaximum-t.blueMinimum)*(t.alphaMaximum-t.alphaMinimum),e.volume=(e.redMaximum-e.redMinimum)*(e.greenMaximum-e.greenMinimum)*(e.blueMaximum-e.blueMinimum)*(e.alphaMaximum-e.alphaMinimum),!0}_initialize(t){this._colors=t,this._cubes=[];for(let e=0;e<t;e++)this._cubes[e]=new It;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=kt(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=kt(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=kt(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=kt(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=kt(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=kt(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let t=0;t<256;++t)this._table[t]=t*t;this._pixels=[]}_setQuality(t=5){this._significantBitsPerChannel=t,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},Pt=At;a(Pt,"_alpha",3),a(Pt,"_red",2),a(Pt,"_green",1),a(Pt,"_blue",0);var Nt={};s(Nt,{AbstractImageQuantizer:()=>Mt,ErrorDiffusionArray:()=>Bt,ErrorDiffusionArrayKernel:()=>Rt,ErrorDiffusionRiemersma:()=>jt,NearestColor:()=>Dt});var Mt=class{quantizeSync(t,e){for(const n of this.quantize(t,e))if(n.pointContainer)return n.pointContainer;throw new Error("unreachable")}},Dt=class extends Mt{constructor(t){super(),a(this,"_distance"),this._distance=t}*quantize(t,e){const n=t.getPointArray(),i=t.getWidth(),r=t.getHeight(),s=new dt(r,99);for(let t=0;t<r;t++){s.shouldNotify(t)&&(yield{progress:s.progress});for(let r=0,s=t*i;r<i;r++,s++){const t=n[s];t.from(e.getNearestColor(this._distance,t))}}yield{pointContainer:t,progress:100}}},Rt=(t=>(t[t.FloydSteinberg=0]="FloydSteinberg",t[t.FalseFloydSteinberg=1]="FalseFloydSteinberg",t[t.Stucki=2]="Stucki",t[t.Atkinson=3]="Atkinson",t[t.Jarvis=4]="Jarvis",t[t.Burkes=5]="Burkes",t[t.Sierra=6]="Sierra",t[t.TwoSierra=7]="TwoSierra",t[t.SierraLite=8]="SierraLite",t))(Rt||{}),Bt=class extends Mt{constructor(t,e,n=!0,i=0,r=!1){super(),a(this,"_minColorDistance"),a(this,"_serpentine"),a(this,"_kernel"),a(this,"_calculateErrorLikeGIMP"),a(this,"_distance"),this._setKernel(e),this._distance=t,this._minColorDistance=i,this._serpentine=n,this._calculateErrorLikeGIMP=r}*quantize(t,e){const n=t.getPointArray(),i=new st,r=t.getWidth(),s=t.getHeight(),o=[];let a=1,c=1;for(const t of this._kernel){const e=t[2]+1;c<e&&(c=e)}for(let t=0;t<c;t++)this._fillErrorLine(o[t]=[],r);const l=new dt(s,99);for(let t=0;t<s;t++){l.shouldNotify(t)&&(yield{progress:l.progress}),this._serpentine&&(a*=-1);const c=t*r,h=1===a?0:r-1,u=1===a?r:-1;this._fillErrorLine(o[0],r),o.push(o.shift());const p=o[0];for(let l=h,d=c+h;l!==u;l+=a,d+=a){const c=n[d],h=p[l];i.from(c);const u=st.createByRGBA(x(c.r+h[0]),x(c.g+h[1]),x(c.b+h[2]),x(c.a+h[3])),f=e.getNearestColor(this._distance,u);if(c.from(f),this._minColorDistance&&this._distance.calculateNormalized(i,f)<this._minColorDistance)continue;let m,g,_,y;this._calculateErrorLikeGIMP?(m=u.r-f.r,g=u.g-f.g,_=u.b-f.b,y=u.a-f.a):(m=i.r-f.r,g=i.g-f.g,_=i.b-f.b,y=i.a-f.a);const b=1===a?0:this._kernel.length-1,v=1===a?this._kernel.length:-1;for(let e=b;e!==v;e+=a){const n=this._kernel[e][1]*a,i=this._kernel[e][2];if(n+l>=0&&n+l<r&&i+t>=0&&i+t<s){const t=this._kernel[e][0],r=o[i][n+l];r[0]+=m*t,r[1]+=g*t,r[2]+=_*t,r[3]+=y*t}}}}yield{pointContainer:t,progress:100}}_fillErrorLine(t,e){t.length>e&&(t.length=e);const n=t.length;for(let e=0;e<n;e++){const n=t[e];n[0]=n[1]=n[2]=n[3]=0}for(let i=n;i<e;i++)t[i]=[0,0,0,0]}_setKernel(t){switch(t){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${t}`)}}};function*Ft(t,e,n){const i=Math.max(t,e),r={width:t,height:e,level:Math.floor(Math.log(i)/Math.log(2)+1),callback:n,tracker:new dt(t*e,99),index:0,x:0,y:0};yield*Lt(r,1),Ut(r,0)}function*Lt(t,e){if(!(t.level<1)){switch(t.tracker.shouldNotify(t.index)&&(yield{progress:t.tracker.progress}),t.level--,e){case 2:yield*Lt(t,1),Ut(t,3),yield*Lt(t,2),Ut(t,4),yield*Lt(t,2),Ut(t,2),yield*Lt(t,4);break;case 3:yield*Lt(t,4),Ut(t,2),yield*Lt(t,3),Ut(t,1),yield*Lt(t,3),Ut(t,3),yield*Lt(t,1);break;case 1:yield*Lt(t,2),Ut(t,4),yield*Lt(t,1),Ut(t,3),yield*Lt(t,1),Ut(t,1),yield*Lt(t,3);break;case 4:yield*Lt(t,3),Ut(t,1),yield*Lt(t,4),Ut(t,2),yield*Lt(t,4),Ut(t,4),yield*Lt(t,2)}t.level++}}function Ut(t,e){switch(t.x>=0&&t.x<t.width&&t.y>=0&&t.y<t.height&&(t.callback(t.x,t.y),t.index++),e){case 2:t.x--;break;case 3:t.x++;break;case 1:t.y--;break;case 4:t.y++}}var jt=class extends Mt{constructor(t,e=16,n=1){super(),a(this,"_distance"),a(this,"_weights"),a(this,"_errorQueueSize"),this._distance=t,this._errorQueueSize=e,this._weights=jt._createWeights(n,e)}*quantize(t,e){const n=t.getPointArray(),i=t.getWidth(),r=t.getHeight(),s=[];let o=0;for(let t=0;t<this._errorQueueSize;t++)s[t]={r:0,g:0,b:0,a:0};yield*Ft(i,r,((t,r)=>{const a=n[t+r*i];let{r:c,g:l,b:h,a:u}=a;for(let t=0;t<this._errorQueueSize;t++){const e=this._weights[t],n=s[(t+o)%this._errorQueueSize];c+=n.r*e,l+=n.g*e,h+=n.b*e,u+=n.a*e}const p=st.createByRGBA(x(c),x(l),x(h),x(u)),d=e.getNearestColor(this._distance,p);o=(o+1)%this._errorQueueSize;const f=(o+this._errorQueueSize-1)%this._errorQueueSize;s[f].r=a.r-d.r,s[f].g=a.g-d.g,s[f].b=a.b-d.b,s[f].a=a.a-d.a,a.from(d)})),yield{pointContainer:t,progress:100}}static _createWeights(t,e){const n=[],i=Math.exp(Math.log(e)/(e-1));for(let r=0,s=1;r<e;r++)n[r]=(s+.5|0)/e*t,s*=i;return n}},zt={};s(zt,{ssim:()=>Ht});var Gt=.01,qt=.03;function Ht(t,e){if(t.getHeight()!==e.getHeight()||t.getWidth()!==e.getWidth())throw new Error("Images have different sizes!");const n=(255*Gt)**2,i=(255*qt)**2;let r=0,s=0;return function(t,e,n){const i=t.getWidth(),r=t.getHeight();for(let s=0;s<r;s+=8)for(let o=0;o<i;o+=8){const a=Math.min(8,i-o),c=Math.min(8,r-s),l=$t(t,o,s,a,c),h=$t(e,o,s,a,c);n(l,h,Yt(l),Yt(h))}}(t,e,((t,e,o,a)=>{let c=0,l=0,h=0;for(let n=0;n<t.length;n++)l+=(t[n]-o)**2,h+=(e[n]-a)**2,c+=(t[n]-o)*(e[n]-a);const u=t.length-1;l/=u,h/=u,c/=u,s+=(2*o*a+n)*(2*c+i)/((o**2+a**2+n)*(l+h+i)),r++})),s/r}function $t(t,e,n,i,r){const s=t.getPointArray(),o=[];let a=0;for(let c=n;c<n+r;c++){const n=c*t.getWidth();for(let t=e;t<e+i;t++){const e=s[n+t];o[a]=.2126*e.r+.7152*e.g+.0722*e.b,a++}}return o}function Yt(t){let e=0;for(const n of t)e+=n;return e/t.length}var Wt="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&"function"==typeof(null==process?void 0:process.nextTick)?t=>process.nextTick(t):t=>setTimeout(t,0);function Vt(t,{colorDistanceFormula:e,paletteQuantization:n,colors:i}={}){const r=te(Kt(e),n,i);return t.forEach((t=>r.sample(t))),r.quantizeSync()}async function Jt(t,{colorDistanceFormula:e,paletteQuantization:n,colors:i,onProgress:r}={}){return new Promise(((s,o)=>{const a=te(Kt(e),n,i);let c;t.forEach((t=>a.sample(t)));const l=a.quantize(),h=()=>{try{const t=l.next();t.done?s(c):(t.value.palette&&(c=t.value.palette),r&&r(t.value.progress),Wt(h))}catch(t){o(t)}};Wt(h)}))}function Xt(t,e,{colorDistanceFormula:n,imageQuantization:i}={}){return Zt(Kt(n),i).quantizeSync(t,e)}async function Qt(t,e,{colorDistanceFormula:n,imageQuantization:i,onProgress:r}={}){return new Promise(((s,o)=>{let a;const c=Zt(Kt(n),i).quantize(t,e),l=()=>{try{const t=c.next();t.done?s(a):(t.value.pointContainer&&(a=t.value.pointContainer),r&&r(t.value.progress),Wt(l))}catch(t){o(t)}};Wt(l)}))}function Kt(t="euclidean-bt709"){switch(t){case"cie94-graphic-arts":return new H;case"cie94-textiles":return new q;case"ciede2000":return new Y;case"color-metric":return new W;case"euclidean":return new J;case"euclidean-bt709":return new X;case"euclidean-bt709-noalpha":return new Q;case"manhattan":return new Z;case"manhattan-bt709":return new et;case"manhattan-nommyde":return new tt;case"pngquant":return new nt;default:throw new Error(`Unknown colorDistanceFormula ${t}`)}}function Zt(t,e="floyd-steinberg"){switch(e){case"nearest":return new Dt(t);case"riemersma":return new jt(t);case"floyd-steinberg":return new Bt(t,0);case"false-floyd-steinberg":return new Bt(t,1);case"stucki":return new Bt(t,2);case"atkinson":return new Bt(t,3);case"jarvis":return new Bt(t,4);case"burkes":return new Bt(t,5);case"sierra":return new Bt(t,6);case"two-sierra":return new Bt(t,7);case"sierra-lite":return new Bt(t,8);default:throw new Error(`Unknown imageQuantization ${e}`)}}function te(t,e="wuquant",n=256){switch(e){case"neuquant":return new gt(t,n);case"rgbquant":return new Et(t,n);case"wuquant":return new Pt(t,n);case"neuquant-float":return new bt(t,n);default:throw new Error(`Unknown paletteQuantization ${e}`)}}t.exports=o(c)},1154:(t,e,n)=>{let i,r,s=n(6982),{urlAlphabet:o}=n(7362),a=t=>{!i||i.length<t?(i=Buffer.allocUnsafe(128*t),s.randomFillSync(i),r=0):r+t>i.length&&(s.randomFillSync(i),r=0),r+=t},c=t=>(a(t|=0),i.subarray(r-t,r)),l=(t,e,n)=>{let i=(2<<31-Math.clz32(t.length-1|1))-1,r=Math.ceil(1.6*i*e/t.length);return(s=e)=>{let o="";for(;;){let e=n(r),a=r;for(;a--;)if(o+=t[e[a]&i]||"",o.length===s)return o}}};t.exports={nanoid:(t=21)=>{a(t|=0);let e="";for(let n=r-t;n<r;n++)e+=o[63&i[n]];return e},customAlphabet:(t,e=21)=>l(t,e,c),customRandom:l,urlAlphabet:o,random:c}},7362:t=>{t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}},6535:function(t){t.exports=function(){"use strict";const t=/^\s+/,e=/\s+$/;function n(i,r){if(r=r||{},(i=i||"")instanceof n)return i;if(!(this instanceof n))return new n(i,r);var s=function(n){var i={r:0,g:0,b:0},r=1,s=null,o=null,a=null,c=!1,l=!1;return"string"==typeof n&&(n=function(n){n=n.replace(t,"").replace(e,"").toLowerCase();var i,r=!1;if(b[n])n=b[n],r=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};return(i=N.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=N.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=N.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=N.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=N.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=N.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=N.hex8.exec(n))?{r:S(i[1]),g:S(i[2]),b:S(i[3]),a:O(i[4]),format:r?"name":"hex8"}:(i=N.hex6.exec(n))?{r:S(i[1]),g:S(i[2]),b:S(i[3]),format:r?"name":"hex"}:(i=N.hex4.exec(n))?{r:S(i[1]+""+i[1]),g:S(i[2]+""+i[2]),b:S(i[3]+""+i[3]),a:O(i[4]+""+i[4]),format:r?"name":"hex8"}:!!(i=N.hex3.exec(n))&&{r:S(i[1]+""+i[1]),g:S(i[2]+""+i[2]),b:S(i[3]+""+i[3]),format:r?"name":"hex"}}(n)),"object"==typeof n&&(M(n.r)&&M(n.g)&&M(n.b)?(h=n.r,u=n.g,p=n.b,i={r:255*x(h,255),g:255*x(u,255),b:255*x(p,255)},c=!0,l="%"===String(n.r).substr(-1)?"prgb":"rgb"):M(n.h)&&M(n.s)&&M(n.v)?(s=T(n.s),o=T(n.v),i=function(t,e,n){t=6*x(t,360),e=x(e,100),n=x(n,100);var i=Math.floor(t),r=t-i,s=n*(1-e),o=n*(1-r*e),a=n*(1-(1-r)*e),c=i%6;return{r:255*[n,o,s,s,a,n][c],g:255*[a,n,n,o,s,s][c],b:255*[s,s,a,n,n,o][c]}}(n.h,s,o),c=!0,l="hsv"):M(n.h)&&M(n.s)&&M(n.l)&&(s=T(n.s),a=T(n.l),i=function(t,e,n){var i,r,s;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=x(t,360),e=x(e,100),n=x(n,100),0===e)i=r=s=n;else{var a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=o(c,a,t+1/3),r=o(c,a,t),s=o(c,a,t-1/3)}return{r:255*i,g:255*r,b:255*s}}(n.h,s,a),c=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=w(r),{ok:c,format:n.format||l,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:r};var h,u,p}(i);this._originalInput=i,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||s.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=s.ok}function i(t,e,n){t=x(t,255),e=x(e,255),n=x(n,255);var i,r,s=Math.max(t,e,n),o=Math.min(t,e,n),a=(s+o)/2;if(s==o)i=r=0;else{var c=s-o;switch(r=a>.5?c/(2-s-o):c/(s+o),s){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return{h:i,s:r,l:a}}function r(t,e,n){t=x(t,255),e=x(e,255),n=x(n,255);var i,r,s=Math.max(t,e,n),o=Math.min(t,e,n),a=s,c=s-o;if(r=0===s?0:c/s,s==o)i=0;else{switch(s){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return{h:i,s:r,v:a}}function s(t,e,n,i){var r=[k(Math.round(t).toString(16)),k(Math.round(e).toString(16)),k(Math.round(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function o(t,e,n,i){return[k(C(i)),k(Math.round(t).toString(16)),k(Math.round(e).toString(16)),k(Math.round(n).toString(16))].join("")}function a(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.s-=e/100,i.s=E(i.s),n(i)}function c(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.s+=e/100,i.s=E(i.s),n(i)}function l(t){return n(t).desaturate(100)}function h(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.l+=e/100,i.l=E(i.l),n(i)}function u(t,e){e=0===e?0:e||10;var i=n(t).toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-e/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-e/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-e/100*255))),n(i)}function p(t,e){e=0===e?0:e||10;var i=n(t).toHsl();return i.l-=e/100,i.l=E(i.l),n(i)}function d(t,e){var i=n(t).toHsl(),r=(i.h+e)%360;return i.h=r<0?360+r:r,n(i)}function f(t){var e=n(t).toHsl();return e.h=(e.h+180)%360,n(e)}function m(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var i=n(t).toHsl(),r=[n(t)],s=360/e,o=1;o<e;o++)r.push(n({h:(i.h+o*s)%360,s:i.s,l:i.l}));return r}function g(t){var e=n(t).toHsl(),i=e.h;return[n(t),n({h:(i+72)%360,s:e.s,l:e.l}),n({h:(i+216)%360,s:e.s,l:e.l})]}function _(t,e,i){e=e||6,i=i||30;var r=n(t).toHsl(),s=360/i,o=[n(t)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,o.push(n(r));return o}function y(t,e){e=e||6;for(var i=n(t).toHsv(),r=i.h,s=i.s,o=i.v,a=[],c=1/e;e--;)a.push(n({h:r,s,v:o})),o=(o+c)%1;return a}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=w(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=r(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=i(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var s=[k(Math.round(t).toString(16)),k(Math.round(e).toString(16)),k(Math.round(n).toString(16)),k(C(i))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*x(this._r,255))+"%",g:Math.round(100*x(this._g,255))+"%",b:Math.round(100*x(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*x(this._r,255))+"%, "+Math.round(100*x(this._g,255))+"%, "+Math.round(100*x(this._b,255))+"%)":"rgba("+Math.round(100*x(this._r,255))+"%, "+Math.round(100*x(this._g,255))+"%, "+Math.round(100*x(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(v[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+o(this._r,this._g,this._b,this._a),i=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var s=n(t);i="#"+o(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(a,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(l,arguments)},spin:function(){return this._applyModification(d,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(f,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(g,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},n.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]="a"===r?t[r]:T(t[r]));t=i}return n(t,e)},n.equals=function(t,e){return!(!t||!e)&&n(t).toRgbString()==n(e).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(t,e,i){i=0===i?0:i||50;var r=n(t).toRgb(),s=n(e).toRgb(),o=i/100;return n({r:(s.r-r.r)*o+r.r,g:(s.g-r.g)*o+r.g,b:(s.b-r.b)*o+r.b,a:(s.a-r.a)*o+r.a})},n.readability=function(t,e){var i=n(t),r=n(e);return(Math.max(i.getLuminance(),r.getLuminance())+.05)/(Math.min(i.getLuminance(),r.getLuminance())+.05)},n.isReadable=function(t,e,i){var r,s,o,a,c,l=n.readability(t,e);switch(s=!1,(o=i,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(c=(o.size||"small").toLowerCase())&&"large"!==c&&(c="small"),r={level:a,size:c}).level+r.size){case"AAsmall":case"AAAlarge":s=l>=4.5;break;case"AAlarge":s=l>=3;break;case"AAAsmall":s=l>=7}return s},n.mostReadable=function(t,e,i){var r,s,o,a,c=null,l=0;s=(i=i||{}).includeFallbackColors,o=i.level,a=i.size;for(var h=0;h<e.length;h++)(r=n.readability(t,e[h]))>l&&(l=r,c=n(e[h]));return n.isReadable(t,c,{level:o,size:a})||!s?c:(i.includeFallbackColors=!1,n.mostReadable(t,["#fff","#000"],i))};var b=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},v=n.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(b);function w(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function x(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function E(t){return Math.min(1,Math.max(0,t))}function S(t){return parseInt(t,16)}function k(t){return 1==t.length?"0"+t:""+t}function T(t){return t<=1&&(t=100*t+"%"),t}function C(t){return Math.round(255*parseFloat(t)).toString(16)}function O(t){return S(t)/255}var I,A,P,N=(A="[\\s|\\(]+("+(I="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+I+")[,|\\s]+("+I+")\\s*\\)?",P="[\\s|\\(]+("+I+")[,|\\s]+("+I+")[,|\\s]+("+I+")[,|\\s]+("+I+")\\s*\\)?",{CSS_UNIT:new RegExp(I),rgb:new RegExp("rgb"+A),rgba:new RegExp("rgba"+P),hsl:new RegExp("hsl"+A),hsla:new RegExp("hsla"+P),hsv:new RegExp("hsv"+A),hsva:new RegExp("hsva"+P),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function M(t){return!!N.CSS_UNIT.exec(t)}return n}()},9990:(t,e,n)=>{"use strict";var i=n(7698);const r=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],s=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...r],o=["null","undefined","string","number","bigint","boolean","symbol"];function a(t){return e=>typeof e===t}const{toString:c}=Object.prototype,l=t=>{const e=c.call(t).slice(8,-1);return/HTML\w+Element/.test(e)&&u.domElement(t)?"HTMLElement":(n=e,s.includes(n)?e:void 0);var n},h=t=>e=>l(e)===t;function u(t){if(null===t)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(u.observable(t))return"Observable";if(u.array(t))return"Array";if(u.buffer(t))return"Buffer";const e=l(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}u.undefined=a("undefined"),u.string=a("string");const p=a("number");u.number=t=>p(t)&&!u.nan(t),u.bigint=a("bigint"),u.function_=a("function"),u.null_=t=>null===t,u.class_=t=>u.function_(t)&&t.toString().startsWith("class "),u.boolean=t=>!0===t||!1===t,u.symbol=a("symbol"),u.numericString=t=>u.string(t)&&!u.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t)),u.array=(t,e)=>!!Array.isArray(t)&&(!u.function_(e)||t.every((t=>e(t)))),u.buffer=t=>t?.constructor?.isBuffer?.(t)??!1,u.blob=t=>h("Blob")(t),u.nullOrUndefined=t=>u.null_(t)||u.undefined(t),u.object=t=>!u.null_(t)&&("object"==typeof t||u.function_(t)),u.iterable=t=>u.function_(t?.[Symbol.iterator]),u.asyncIterable=t=>u.function_(t?.[Symbol.asyncIterator]),u.generator=t=>u.iterable(t)&&u.function_(t?.next)&&u.function_(t?.throw),u.asyncGenerator=t=>u.asyncIterable(t)&&u.function_(t.next)&&u.function_(t.throw),u.nativePromise=t=>h("Promise")(t),u.promise=t=>u.nativePromise(t)||(t=>u.function_(t?.then)&&u.function_(t?.catch))(t),u.generatorFunction=h("GeneratorFunction"),u.asyncGeneratorFunction=t=>"AsyncGeneratorFunction"===l(t),u.asyncFunction=t=>"AsyncFunction"===l(t),u.boundFunction=t=>u.function_(t)&&!t.hasOwnProperty("prototype"),u.regExp=h("RegExp"),u.date=h("Date"),u.error=h("Error"),u.map=t=>h("Map")(t),u.set=t=>h("Set")(t),u.weakMap=t=>h("WeakMap")(t),u.weakSet=t=>h("WeakSet")(t),u.weakRef=t=>h("WeakRef")(t),u.int8Array=h("Int8Array"),u.uint8Array=h("Uint8Array"),u.uint8ClampedArray=h("Uint8ClampedArray"),u.int16Array=h("Int16Array"),u.uint16Array=h("Uint16Array"),u.int32Array=h("Int32Array"),u.uint32Array=h("Uint32Array"),u.float32Array=h("Float32Array"),u.float64Array=h("Float64Array"),u.bigInt64Array=h("BigInt64Array"),u.bigUint64Array=h("BigUint64Array"),u.arrayBuffer=h("ArrayBuffer"),u.sharedArrayBuffer=h("SharedArrayBuffer"),u.dataView=h("DataView"),u.enumCase=(t,e)=>Object.values(e).includes(t),u.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype,u.urlInstance=t=>h("URL")(t),u.urlString=t=>{if(!u.string(t))return!1;try{return new URL(t),!0}catch{return!1}},u.truthy=t=>Boolean(t),u.falsy=t=>!t,u.nan=t=>Number.isNaN(t),u.primitive=t=>{return u.null_(t)||(e=typeof t,o.includes(e));var e},u.integer=t=>Number.isInteger(t),u.safeInteger=t=>Number.isSafeInteger(t),u.plainObject=t=>{if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},u.typedArray=t=>{return e=l(t),r.includes(e);var e},u.arrayLike=t=>!u.nullOrUndefined(t)&&!u.function_(t)&&(t=>u.safeInteger(t)&&t>=0)(t.length),u.inRange=(t,e)=>{if(u.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(u.array(e)&&2===e.length)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};const d=["innerHTML","ownerDocument","style","attributes","nodeValue"];u.domElement=t=>u.object(t)&&1===t.nodeType&&u.string(t.nodeName)&&!u.plainObject(t)&&d.every((e=>e in t)),u.observable=t=>!!t&&(t===t[Symbol.observable]?.()||t===t["@@observable"]?.()),u.nodeStream=t=>u.object(t)&&u.function_(t.pipe)&&!u.observable(t),u.infinite=t=>t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY;const f=t=>e=>u.integer(e)&&Math.abs(e%2)===t;u.evenInteger=f(0),u.oddInteger=f(1),u.emptyArray=t=>u.array(t)&&0===t.length,u.nonEmptyArray=t=>u.array(t)&&t.length>0,u.emptyString=t=>u.string(t)&&0===t.length,u.emptyStringOrWhitespace=t=>u.emptyString(t)||(t=>u.string(t)&&!/\S/.test(t))(t),u.nonEmptyString=t=>u.string(t)&&t.length>0,u.nonEmptyStringAndNotWhitespace=t=>u.string(t)&&!u.emptyStringOrWhitespace(t),u.emptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&0===Object.keys(t).length,u.nonEmptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&Object.keys(t).length>0,u.emptySet=t=>u.set(t)&&0===t.size,u.nonEmptySet=t=>u.set(t)&&t.size>0,u.emptyMap=t=>u.map(t)&&0===t.size,u.nonEmptyMap=t=>u.map(t)&&t.size>0,u.propertyKey=t=>u.any([u.string,u.number,u.symbol],t),u.formData=t=>h("FormData")(t),u.urlSearchParams=t=>h("URLSearchParams")(t);const m=(t,e,n)=>{if(!u.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(0===n.length)throw new TypeError("Invalid number of values");return t.call(n,e)};u.any=(t,...e)=>(u.array(t)?t:[t]).some((t=>m(Array.prototype.some,t,e))),u.all=(t,...e)=>m(Array.prototype.every,t,e);const g=(t,e,n,i={})=>{if(!t){const{multipleValues:t}=i,r=t?`received values of types ${[...new Set(n.map((t=>`\`${u(t)}\``)))].join(", ")}`:`received value of type \`${u(n)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${r}.`)}},_={undefined:t=>g(u.undefined(t),"undefined",t),string:t=>g(u.string(t),"string",t),number:t=>g(u.number(t),"number",t),bigint:t=>g(u.bigint(t),"bigint",t),function_:t=>g(u.function_(t),"Function",t),null_:t=>g(u.null_(t),"null",t),class_:t=>g(u.class_(t),"Class",t),boolean:t=>g(u.boolean(t),"boolean",t),symbol:t=>g(u.symbol(t),"symbol",t),numericString:t=>g(u.numericString(t),"string with a number",t),array:(t,e)=>{g(u.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>g(u.buffer(t),"Buffer",t),blob:t=>g(u.blob(t),"Blob",t),nullOrUndefined:t=>g(u.nullOrUndefined(t),"null or undefined",t),object:t=>g(u.object(t),"Object",t),iterable:t=>g(u.iterable(t),"Iterable",t),asyncIterable:t=>g(u.asyncIterable(t),"AsyncIterable",t),generator:t=>g(u.generator(t),"Generator",t),asyncGenerator:t=>g(u.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>g(u.nativePromise(t),"native Promise",t),promise:t=>g(u.promise(t),"Promise",t),generatorFunction:t=>g(u.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>g(u.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>g(u.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>g(u.boundFunction(t),"Function",t),regExp:t=>g(u.regExp(t),"RegExp",t),date:t=>g(u.date(t),"Date",t),error:t=>g(u.error(t),"Error",t),map:t=>g(u.map(t),"Map",t),set:t=>g(u.set(t),"Set",t),weakMap:t=>g(u.weakMap(t),"WeakMap",t),weakSet:t=>g(u.weakSet(t),"WeakSet",t),weakRef:t=>g(u.weakRef(t),"WeakRef",t),int8Array:t=>g(u.int8Array(t),"Int8Array",t),uint8Array:t=>g(u.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>g(u.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>g(u.int16Array(t),"Int16Array",t),uint16Array:t=>g(u.uint16Array(t),"Uint16Array",t),int32Array:t=>g(u.int32Array(t),"Int32Array",t),uint32Array:t=>g(u.uint32Array(t),"Uint32Array",t),float32Array:t=>g(u.float32Array(t),"Float32Array",t),float64Array:t=>g(u.float64Array(t),"Float64Array",t),bigInt64Array:t=>g(u.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>g(u.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>g(u.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>g(u.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>g(u.dataView(t),"DataView",t),enumCase:(t,e)=>g(u.enumCase(t,e),"EnumCase",t),urlInstance:t=>g(u.urlInstance(t),"URL",t),urlString:t=>g(u.urlString(t),"string with a URL",t),truthy:t=>g(u.truthy(t),"truthy",t),falsy:t=>g(u.falsy(t),"falsy",t),nan:t=>g(u.nan(t),"NaN",t),primitive:t=>g(u.primitive(t),"primitive",t),integer:t=>g(u.integer(t),"integer",t),safeInteger:t=>g(u.safeInteger(t),"integer",t),plainObject:t=>g(u.plainObject(t),"plain object",t),typedArray:t=>g(u.typedArray(t),"TypedArray",t),arrayLike:t=>g(u.arrayLike(t),"array-like",t),domElement:t=>g(u.domElement(t),"HTMLElement",t),observable:t=>g(u.observable(t),"Observable",t),nodeStream:t=>g(u.nodeStream(t),"Node.js Stream",t),infinite:t=>g(u.infinite(t),"infinite number",t),emptyArray:t=>g(u.emptyArray(t),"empty array",t),nonEmptyArray:t=>g(u.nonEmptyArray(t),"non-empty array",t),emptyString:t=>g(u.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>g(u.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>g(u.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>g(u.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>g(u.emptyObject(t),"empty object",t),nonEmptyObject:t=>g(u.nonEmptyObject(t),"non-empty object",t),emptySet:t=>g(u.emptySet(t),"empty set",t),nonEmptySet:t=>g(u.nonEmptySet(t),"non-empty set",t),emptyMap:t=>g(u.emptyMap(t),"empty map",t),nonEmptyMap:t=>g(u.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>g(u.propertyKey(t),"PropertyKey",t),formData:t=>g(u.formData(t),"FormData",t),urlSearchParams:t=>g(u.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>g(u.evenInteger(t),"even integer",t),oddInteger:t=>g(u.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>g(u.directInstanceOf(t,e),"T",t),inRange:(t,e)=>g(u.inRange(t,e),"in range",t),any:(t,...e)=>g(u.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>g(u.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}}),Object.defineProperties(_,{class:{value:_.class_},function:{value:_.function_},null:{value:_.null_}});const y=u,b=require("node:events");class v extends Error{constructor(t){super(t||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class w{static fn(t){return(...e)=>new w(((n,i,r)=>{e.push(r),t(...e).then(n,i)}))}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((e,n)=>{this._reject=n;const i=t=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(t)};Object.defineProperties(i,{shouldReject:{get:()=>this._rejectOnCancel,set:t=>{this._rejectOnCancel=t}}}),t((t=>{this._isCanceled&&i.shouldReject||(this._isPending=!1,e(t))}),(t=>{this._isPending=!1,n(t)}),i)}))}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const t of this._cancelHandlers)t()}catch(t){return void this._reject(t)}this._rejectOnCancel&&this._reject(new v(t))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(w.prototype,Promise.prototype);class x extends Error{constructor(t,e,n){var i;if(super(t),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=e.code??"ERR_GOT_REQUEST_ERROR",this.input=e.input,i=n,y.object(i)&&"_onResponse"in i?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),this.options=n.options):this.options=n,this.timings=this.request?.timings,y.string(e.stack)&&y.string(this.stack)){const t=this.stack.indexOf(this.message)+this.message.length,n=this.stack.slice(t).split("\n").reverse(),i=e.stack.slice(e.stack.indexOf(e.message)+e.message.length).split("\n").reverse();for(;i.length>0&&i[0]===n[0];)n.shift();this.stack=`${this.stack.slice(0,t)}${n.reverse().join("\n")}${i.reverse().join("\n")}`}}}class E extends x{constructor(t){super(`Redirected ${t.options.maxRedirects} times. Aborting.`,{},t),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class S extends x{constructor(t){super(`Response code ${t.statusCode} (${t.statusMessage})`,{},t.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class k extends x{constructor(t,e){super(t.message,t,e),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class T extends x{constructor(t,e){super(t.message,t,e),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class C extends x{constructor(t,e,n){super(t.message,t,n),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=t.event,this.timings=e}}class O extends x{constructor(t,e){super(t.message,t,e),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class I extends x{constructor(t){super("Retrying",{},t),this.name="RetryError",this.code="ERR_RETRYING"}}class A extends x{constructor(t){super("This operation was aborted.",{},t),this.code="ERR_ABORTED",this.name="AbortError"}}const P=require("node:process"),N=require("node:buffer"),M=require("node:stream"),D=require("node:url"),R=require("node:http");var B=n(4434),F=n(9023),L=n(687);const U=require("node:crypto"),j=(t,e)=>e.some((e=>e instanceof RegExp?e.test(t):e===t)),z=new Set(["https:","http:","file:"]);var G=n(4594),q=n(7234);function H(t){return Object.fromEntries(Object.entries(t).map((([t,e])=>[t.toLowerCase(),e])))}class $ extends M.Readable{statusCode;headers;body;url;constructor({statusCode:t,headers:e,body:n,url:i}){if("number"!=typeof t)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof e)throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof i)throw new TypeError("Argument `url` should be a string");super({read(){this.push(n),this.push(null)}}),this.statusCode=t,this.headers=H(e),this.body=n,this.url=i}}var Y=n(8387);const W=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class V extends Error{constructor(t){super(t.message),Object.assign(this,t)}}class J extends Error{constructor(t){super(t.message),Object.assign(this,t)}}const X=Object.entries,Q=t=>{const e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e},K=t=>({protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}),Z=t=>{const e=[];for(const n of Object.keys(t))e[n.toLowerCase()]=t[n];return e},tt=class{constructor(t,e){this.hooks=new Map,this.request=()=>(t,e)=>{let n;if("string"==typeof t)n=K(D.parse(t)),t={};else if(t instanceof D.URL)n=K(D.parse(t.toString())),t={};else{const[e,...i]=(t.path??"").split("?"),r=i.length>0?`?${i.join("?")}`:"";n=K({...t,pathname:e,search:r})}(t={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...t,...Q(n)}).headers=Object.fromEntries(X(t.headers).map((([t,e])=>[t.toLowerCase(),e])));const i=new b,r=function(t,e){if("string"!=typeof(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e}).defaultProtocol||e.defaultProtocol.endsWith(":")||(e.defaultProtocol=`${e.defaultProtocol}:`),t=t.trim(),/^data:/i.test(t))return((t,{stripHash:e})=>{const n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:i,data:r,hash:s}=n.groups;const o=i.split(";");s=e?"":s;let a=!1;"base64"===o[o.length-1]&&(o.pop(),a=!0);const c=o.shift()?.toLowerCase()??"",l=[...o.map((t=>{let[e,n=""]=t.split("=").map((t=>t.trim()));return"charset"===e&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${e}${n?`=${n}`:""}`})).filter(Boolean)];return a&&l.push("base64"),(l.length>0||c&&"text/plain"!==c)&&l.unshift(c),`data:${l.join(";")},${a?r.trim():r}${s?`#${s}`:""}`})(t,e);if((t=>{try{const{protocol:e}=new URL(t);return e.endsWith(":")&&!z.has(e)}catch{return!1}})(t))return t;const n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));const i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&"https:"===i.protocol&&(i.protocol="http:"),e.forceHttps&&"http:"===i.protocol&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){const t=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let e=0,n="";for(;;){const r=t.exec(i.pathname);if(!r)break;const s=r[0],o=r.index;n+=i.pathname.slice(e,o).replace(/\/{2,}/g,"/"),n+=s,e=o+s.length}n+=i.pathname.slice(e,i.pathname.length).replace(/\/{2,}/g,"/"),i.pathname=n}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(!0===e.removeDirectoryIndex&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let t=i.pathname.split("/");const n=t[t.length-1];j(n,e.removeDirectoryIndex)&&(t=t.slice(0,-1),i.pathname=t.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(const t of[...i.searchParams.keys()])j(t,e.removeQueryParameters)&&i.searchParams.delete(t);if(Array.isArray(e.keepQueryParameters)||!0!==e.removeQueryParameters||(i.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(const t of[...i.searchParams.keys()])j(t,e.keepQueryParameters)||i.searchParams.delete(t);if(e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,"")),e.removeExplicitPort&&i.port&&(i.port="");const r=t;return t=i.toString(),e.removeSingleSlash||"/"!==i.pathname||r.endsWith("/")||""!==i.hash||(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||"/"===i.pathname)&&""===i.hash&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}(D.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1});let s=`${t.method}:${r}`;t.body&&void 0!==t.method&&["POST","PATCH","PUT"].includes(t.method)&&(t.body instanceof M.Readable?t.cache=!1:s+=`:${U.createHash("md5").update(t.body).digest("hex")}`);let o=!1,a=!1;const c=t=>{a=!0;let n=!1,r=()=>{};const c=new Promise((t=>{r=()=>{n||(n=!0,t())}})),l=async n=>{if(o){n.status=n.statusCode;const e=q.fromObject(o.cachePolicy).revalidatedPolicy(t,n);if(!e.modified){n.resume(),await new Promise((t=>{n.once("end",t)}));const t=Z(e.policy.responseHeaders());(n=new $({statusCode:o.statusCode,headers:t,body:o.body,url:o.url})).cachePolicy=e.policy,n.fromCache=!0}}let r;n.fromCache||(n.cachePolicy=new q(t,n,t),n.fromCache=!1),t.cache&&n.cachePolicy.storable()?(r=(t=>{const e=new M.PassThrough({autoDestroy:!1});return function(t,e){if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const n=new Set([...Object.keys(t),...W]),i={};for(const r of n)r in e||(i[r]={get(){const e=t[r];return"function"==typeof e?e.bind(t):e},set(e){t[r]=e},enumerable:!0,configurable:!1});Object.defineProperties(e,i),t.once("aborted",(()=>{e.destroy(),e.emit("aborted")})),t.once("close",(()=>{t.complete&&e.readable?e.once("end",(()=>{e.emit("close")})):e.emit("close")}))}(t,e),t.pipe(e)})(n),(async()=>{try{const e=G.buffer(n);await Promise.race([c,new Promise((t=>n.once("end",t))),new Promise((t=>n.once("close",t)))]);const i=await e;let r={url:n.url,statusCode:n.fromCache?o.statusCode:n.statusCode,body:i,cachePolicy:n.cachePolicy.toObject()},a=t.strictTtl?n.cachePolicy.timeToLive():void 0;if(t.maxTtl&&(a=a?Math.min(a,t.maxTtl):t.maxTtl),this.hooks.size>0)for(const t of this.hooks.keys())r=await this.runHook(t,r,n);await this.cache.set(s,r,a)}catch(t){i.emit("error",new J(t))}})()):t.cache&&o&&(async()=>{try{await this.cache.delete(s)}catch(t){i.emit("error",new J(t))}})(),i.emit("response",r??n),"function"==typeof e&&e(r??n)};try{const e=this.cacheRequest(t,l);e.once("error",r),e.once("abort",r),e.once("destroy",r),i.emit("request",e)}catch(t){i.emit("error",new V(t))}};return(async()=>{const n=async t=>{await Promise.resolve();const n=t.cache?await this.cache.get(s):void 0;if(void 0===n&&!t.forceRefresh)return void c(t);const r=q.fromObject(n.cachePolicy);if(r.satisfiesWithoutRevalidation(t)&&!t.forceRefresh){const t=Z(r.responseHeaders()),s=new $({statusCode:n.statusCode,headers:t,body:n.body,url:n.url});s.cachePolicy=r,s.fromCache=!0,i.emit("response",s),"function"==typeof e&&e(s)}else r.satisfiesWithoutRevalidation(t)&&Date.now()>=r.timeToLive()&&t.forceRefresh?(await this.cache.delete(s),t.headers=r.revalidationHeaders(t),c(t)):(o=n,t.headers=r.revalidationHeaders(t),c(t))},r=t=>i.emit("error",new J(t));if(this.cache instanceof Y){const t=this.cache;t.once("error",r),i.on("error",(()=>t.removeListener("error",r))),i.on("response",(()=>t.removeListener("error",r)))}try{await n(t)}catch(e){t.automaticFailover&&!a&&c(t),i.emit("error",new J(e))}})(),i},this.addHook=(t,e)=>{this.hooks.has(t)||this.hooks.set(t,e)},this.removeHook=t=>this.hooks.delete(t),this.getHook=t=>this.hooks.get(t),this.runHook=async(t,...e)=>this.hooks.get(t)?.(...e),this.cache=e instanceof Y?e:new Y("string"==typeof e?{uri:e,namespace:"cacheable-request"}:{store:e,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=t}};var et=n(602);const nt=t=>"function"==typeof t,it=t=>Boolean(t&&nt(t.constructor)&&"FormData"===t[Symbol.toStringTag]&&nt(t.append)&&nt(t.getAll)&&nt(t.entries)&&nt(t[Symbol.iterator])),rt=t=>{if(nt(t[Symbol.asyncIterator]))return t;if(nt(t.getReader))return async function*(t){const e=t.getReader();for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}(t);throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},st=t=>String(t).replace(/\r|\n/g,((t,e,n)=>"\r"===t&&"\n"!==n[e+1]||"\n"===t&&"\r"!==n[e-1]?"\r\n":t));function ot(t){if("object"!==(t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase())(t))return!1;const e=Object.getPrototypeOf(t);return null==e||(e.constructor&&e.constructor.toString())===Object.toString()}function at(t,e){if("string"==typeof e)for(const[n,i]of Object.entries(t))if(e.toLowerCase()===n.toLowerCase())return i}const ct=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),lt=t=>Boolean(t&&"object"==typeof t&&nt(t.constructor)&&"File"===t[Symbol.toStringTag]&&nt(t.stream)&&null!=t.name);var ht,ut,pt,dt,ft,mt,gt,_t,yt,bt,vt,wt=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},xt=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const Et={enableAdditionalHeaders:!1},St={writable:!1,configurable:!1};class kt{constructor(t,e,n){if(ht.add(this),ut.set(this,"\r\n"),pt.set(this,void 0),dt.set(this,void 0),ft.set(this,"-".repeat(2)),mt.set(this,new TextEncoder),gt.set(this,void 0),_t.set(this,void 0),yt.set(this,void 0),!it(t))throw new TypeError("Expected first argument to be a FormData instance.");let i;if(ot(e)?n=e:i=e,i||(i=function(){let t=16,e="";for(;t--;)e+="abcdefghijklmnopqrstuvwxyz0123456789"[36*Math.random()|0];return e}()),"string"!=typeof i)throw new TypeError("Expected boundary argument to be a string.");if(n&&!ot(n))throw new TypeError("Expected options argument to be an object.");wt(this,_t,Array.from(t.entries()),"f"),wt(this,yt,{...Et,...n},"f"),wt(this,pt,xt(this,mt,"f").encode(xt(this,ut,"f")),"f"),wt(this,dt,xt(this,pt,"f").byteLength,"f"),this.boundary=`form-data-boundary-${i}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,wt(this,gt,xt(this,mt,"f").encode(`${xt(this,ft,"f")}${this.boundary}${xt(this,ft,"f")}${xt(this,ut,"f").repeat(2)}`),"f");const r={"Content-Type":this.contentType},s=xt(this,ht,"m",vt).call(this);var o;s&&(this.contentLength=s,r["Content-Length"]=s),this.headers=(o=Object.freeze(r),new Proxy(o,{get:(t,e)=>at(t,e),has:(t,e)=>void 0!==at(t,e)})),Object.defineProperties(this,{boundary:St,contentType:St,contentLength:St,headers:St})}getContentLength(){return null==this.contentLength?void 0:Number(this.contentLength)}*values(){for(const[t,e]of xt(this,_t,"f")){const n=lt(e)?e:xt(this,mt,"f").encode(st(e));yield xt(this,ht,"m",bt).call(this,t,n),yield n,yield xt(this,pt,"f")}yield xt(this,gt,"f")}async*encode(){for(const t of this.values())lt(t)?yield*rt(t.stream()):yield t}[(ut=new WeakMap,pt=new WeakMap,dt=new WeakMap,ft=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,ht=new WeakSet,bt=function(t,e){let n="";n+=`${xt(this,ft,"f")}${this.boundary}${xt(this,ut,"f")}`,n+=`Content-Disposition: form-data; name="${ct(t)}"`,lt(e)&&(n+=`; filename="${ct(e.name)}"${xt(this,ut,"f")}`,n+=`Content-Type: ${e.type||"application/octet-stream"}`);const i=lt(e)?e.size:e.byteLength;return!0!==xt(this,yt,"f").enableAdditionalHeaders||null==i||isNaN(i)||(n+=`${xt(this,ut,"f")}Content-Length: ${lt(e)?e.size:e.byteLength}`),xt(this,mt,"f").encode(`${n}${xt(this,ut,"f").repeat(2)}`)},vt=function(){let t=0;for(const[e,n]of xt(this,_t,"f")){const i=lt(n)?n:xt(this,mt,"f").encode(st(n)),r=lt(i)?i.size:i.byteLength;if(null==r||isNaN(r))return;t+=xt(this,ht,"m",bt).call(this,e,i).byteLength,t+=r,t+=xt(this,dt,"f")}return String(t+xt(this,gt,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}const Tt=require("node:util");function Ct(t){return y.nodeStream(t)&&y.function_(t.getBoundary)}function Ot(t,e,n){const i={};for(const r of n){const n=(...t)=>{e.emit(r,...t)};i[r]=n,t.on(r,n)}return()=>{for(const[e,n]of Object.entries(i))t.off(e,n)}}const It=require("node:net"),At=Symbol("reentry"),Pt=()=>{};class Nt extends Error{constructor(t,e){super(`Timeout awaiting '${e}' for ${t}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}}const Mt=({attemptCount:t,retryOptions:e,error:n,retryAfter:i,computedValue:r})=>{if("RetryError"===n.name)return 1;if(t>e.limit)return 0;const s=e.methods.includes(n.options.method),o=e.errorCodes.includes(n.code),a=n.response&&e.statusCodes.includes(n.response.statusCode);if(!s||!o&&!a)return 0;if(n.response){if(i)return i>r?0:i;if(413===n.response.statusCode)return 0}const c=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+c},Dt=require("node:tls"),Rt=require("node:https"),Bt=require("node:dns"),Ft=require("node:os"),{Resolver:Lt}=Bt.promises,Ut=Symbol("cacheableLookupCreateConnection"),jt=Symbol("cacheableLookupInstance"),zt=Symbol("expires"),Gt="number"==typeof Bt.ALL,qt=t=>{if(!t||"function"!=typeof t.createConnection)throw new Error("Expected an Agent instance as the first argument")},Ht=()=>{let t=!1,e=!1;for(const n of Object.values(Ft.networkInterfaces()))for(const i of n)if(!i.internal&&("IPv6"===i.family?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},$t=t=>t.catch((t=>{if("ENODATA"===t.code||"ENOTFOUND"===t.code||"ENOENT"===t.code)return[];throw t})),Yt={ttl:!0},Wt={all:!0},Vt={all:!0,family:4},Jt={all:!0,family:6};class Xt{constructor({cache:t=new Map,maxTtl:e=1/0,fallbackDuration:n=3600,errorTtl:i=.15,resolver:r=new Lt,lookup:s=Bt.lookup}={}){if(this.maxTtl=e,this.errorTtl=i,this._cache=t,this._resolver=r,this._dnsLookup=s&&(0,Tt.promisify)(s),this.stats={cache:0,query:0},this._resolver instanceof Lt?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Tt.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Tt.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=Ht(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=n,n>0){const t=setInterval((()=>{this._hostnamesToFallback.clear()}),1e3*n);t.unref&&t.unref(),this._fallbackInterval=t}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(t){this.clear(),this._resolver.setServers(t)}get servers(){return this._resolver.getServers()}lookup(t,e,n){if("function"==typeof e?(n=e,e={}):"number"==typeof e&&(e={family:e}),!n)throw new Error("Callback must be a function.");this.lookupAsync(t,e).then((t=>{e.all?n(null,t):n(null,t.address,t.family,t.expires,t.ttl,t.source)}),n)}async lookupAsync(t,e={}){"number"==typeof e&&(e={family:e});let n=await this.query(t);if(6===e.family){const t=n.filter((t=>6===t.family));e.hints&Bt.V4MAPPED&&(Gt&&e.hints&Bt.ALL||0===t.length)?(t=>{for(const e of t)6!==e.family&&(e.address=`::ffff:${e.address}`,e.family=6)})(n):n=t}else 4===e.family&&(n=n.filter((t=>4===t.family)));if(e.hints&Bt.ADDRCONFIG){const{_iface:t}=this;n=n.filter((e=>6===e.family?t.has6:t.has4))}if(0===n.length){const e=new Error(`cacheableLookup ENOTFOUND ${t}`);throw e.code="ENOTFOUND",e.hostname=t,e}return e.all?n:n[0]}async query(t){let e="cache",n=await this._cache.get(t);if(n&&this.stats.cache++,!n){const i=this._pending[t];if(i)this.stats.cache++,n=await i;else{e="query";const i=this.queryAndCache(t);this._pending[t]=i,this.stats.query++;try{n=await i}finally{delete this._pending[t]}}}return n=n.map((t=>({...t,source:e}))),n}async _resolve(t){const[e,n]=await Promise.all([$t(this._resolve4(t,Yt)),$t(this._resolve6(t,Yt))]);let i=0,r=0,s=0;const o=Date.now();for(const t of e)t.family=4,t.expires=o+1e3*t.ttl,i=Math.max(i,t.ttl);for(const t of n)t.family=6,t.expires=o+1e3*t.ttl,r=Math.max(r,t.ttl);return s=e.length>0?n.length>0?Math.min(i,r):i:r,{entries:[...e,...n],cacheTtl:s}}async _lookup(t){try{const[e,n]=await Promise.all([$t(this._dnsLookup(t,Vt)),$t(this._dnsLookup(t,Jt))]);return{entries:[...e,...n],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(t,e,n){if(this.maxTtl>0&&n>0){n=1e3*Math.min(n,this.maxTtl),e[zt]=Date.now()+n;try{await this._cache.set(t,e,n)}catch(t){this.lookupAsync=async()=>{const e=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw e.cause=t,e}}i=this._cache,Symbol.iterator in i&&this._tick(n)}var i}async queryAndCache(t){if(this._hostnamesToFallback.has(t))return this._dnsLookup(t,Wt);let e=await this._resolve(t);0===e.entries.length&&this._dnsLookup&&(e=await this._lookup(t),0!==e.entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(t));const n=0===e.entries.length?this.errorTtl:e.cacheTtl;return await this._set(t,e.entries,n),e.entries}_tick(t){const e=this._nextRemovalTime;(!e||t<e)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=t,this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=!1;let t=1/0;const e=Date.now();for(const[n,i]of this._cache){const r=i[zt];e>=r?this._cache.delete(n):r<t&&(t=r)}t!==1/0&&this._tick(t-e)}),t),this._removalTimeout.unref&&this._removalTimeout.unref())}install(t){if(qt(t),Ut in t)throw new Error("CacheableLookup has been already installed");t[Ut]=t.createConnection,t[jt]=this,t.createConnection=(e,n)=>("lookup"in e||(e.lookup=this.lookup),t[Ut](e,n))}uninstall(t){if(qt(t),t[Ut]){if(t[jt]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");t.createConnection=t[Ut],delete t[Ut],delete t[jt]}}updateInterfaceInfo(){const{_iface:t}=this;this._iface=Ht(),(t.has4&&!this._iface.has4||t.has6&&!this._iface.has6)&&this._cache.clear()}clear(t){t?this._cache.delete(t):this._cache.clear()}}var Qt=n(5769);const[Kt,Zt]=P.versions.node.split(".").map(Number),te=new Map;let ee;const ne={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:t=>"json"===t.request.options.responseType?t.body:JSON.parse(t.body),paginate({response:t}){const e=t.headers.link;if("string"!=typeof e||""===e.trim())return!1;const n=function(t){const e=[],n=t.split(",");for(const i of n){const[n,...r]=i.split(";"),s=n.trim();if("<"!==s[0]||">"!==s[s.length-1])throw new Error(`Invalid format of the Link header reference: ${s}`);const o=s.slice(1,-1),a={};if(0===r.length)throw new Error(`Unexpected end of Link header parameters: ${r.join(";")}`);for(const e of r){const n=e.trim(),i=n.indexOf("=");if(-1===i)throw new Error(`Failed to parse Link header: ${t}`);const r=n.slice(0,i).trim(),s=n.slice(i+1).trim();a[r]=s}e.push({reference:o,parameters:a})}return e}(e).find((t=>"next"===t.parameters.rel||'"next"'===t.parameters.rel));return!!n&&{url:new D.URL(n.reference,t.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},ie=t=>{const e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter((t=>"number"==typeof t));if(e.length>0)return Math.min(...e)},re=(t,e,n)=>{const i=t.hooks?.init;if(i)for(const t of i)t(e,n)};class se{constructor(t,e,n){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),_.any([y.string,y.urlInstance,y.object,y.undefined],t),_.any([y.object,y.undefined],e),_.any([y.object,y.undefined],n),t instanceof se||e instanceof se)throw new TypeError("The defaults must be passed as the third argument");this._internals=(t=>{const{hooks:e,retry:n}=t,i={...t,context:{...t.context},cacheOptions:{...t.cacheOptions},https:{...t.https},agent:{...t.agent},headers:{...t.headers},retry:{...n,errorCodes:[...n.errorCodes],methods:[...n.methods],statusCodes:[...n.statusCodes]},timeout:{...t.timeout},hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new D.URLSearchParams(t.searchParams):void 0,pagination:{...t.pagination}};return void 0!==i.url&&(i.prefixUrl=""),i})(n?._internals??n??ne),this._init=[...n?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(y.plainObject(t))try{this.merge(t),this.merge(e)}finally{this.url=t.url}else try{this.merge(e)}finally{if(void 0!==e?.url){if(void 0!==t)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");this.url=e.url}else void 0!==t&&(this.url=t)}}catch(t){throw t.options=this,t}}merge(t){if(t)if(t instanceof se)for(const e of t._init)this.merge(e);else{t=(t=>{const{hooks:e,retry:n}=t,i={...t};return y.object(t.context)&&(i.context={...t.context}),y.object(t.cacheOptions)&&(i.cacheOptions={...t.cacheOptions}),y.object(t.https)&&(i.https={...t.https}),y.object(t.cacheOptions)&&(i.cacheOptions={...i.cacheOptions}),y.object(t.agent)&&(i.agent={...t.agent}),y.object(t.headers)&&(i.headers={...t.headers}),y.object(n)&&(i.retry={...n},y.array(n.errorCodes)&&(i.retry.errorCodes=[...n.errorCodes]),y.array(n.methods)&&(i.retry.methods=[...n.methods]),y.array(n.statusCodes)&&(i.retry.statusCodes=[...n.statusCodes])),y.object(t.timeout)&&(i.timeout={...t.timeout}),y.object(e)&&(i.hooks={...e},y.array(e.init)&&(i.hooks.init=[...e.init]),y.array(e.beforeRequest)&&(i.hooks.beforeRequest=[...e.beforeRequest]),y.array(e.beforeError)&&(i.hooks.beforeError=[...e.beforeError]),y.array(e.beforeRedirect)&&(i.hooks.beforeRedirect=[...e.beforeRedirect]),y.array(e.beforeRetry)&&(i.hooks.beforeRetry=[...e.beforeRetry]),y.array(e.afterResponse)&&(i.hooks.afterResponse=[...e.afterResponse])),y.object(t.pagination)&&(i.pagination={...t.pagination}),i})(t),re(this,t,this),re(t,t,this),this._merging=!0,"isStream"in t&&(this.isStream=t.isStream);try{let e=!1;for(const n in t)if("mutableDefaults"!==n&&"handlers"!==n&&"url"!==n){if(!(n in this))throw new Error(`Unexpected option: ${n}`);this[n]=t[n],e=!0}e&&this._init.push(t)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(t){_.any([y.function_,y.undefined],t),this._internals.request=t}get agent(){return this._internals.agent}set agent(t){_.plainObject(t);for(const e in t){if(!(e in this._internals.agent))throw new TypeError(`Unexpected agent option: ${e}`);_.any([y.object,y.undefined],t[e])}this._merging?Object.assign(this._internals.agent,t):this._internals.agent={...t}}get h2session(){return this._internals.h2session}set h2session(t){this._internals.h2session=t}get decompress(){return this._internals.decompress}set decompress(t){_.boolean(t),this._internals.decompress=t}get timeout(){return this._internals.timeout}set timeout(t){_.plainObject(t);for(const e in t){if(!(e in this._internals.timeout))throw new Error(`Unexpected timeout option: ${e}`);_.any([y.number,y.undefined],t[e])}this._merging?Object.assign(this._internals.timeout,t):this._internals.timeout={...t}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(t){if(_.any([y.string,y.urlInstance],t),""!==t){if((t=t.toString()).endsWith("/")||(t+="/"),this._internals.prefixUrl&&this._internals.url){const{href:e}=this._internals.url;this._internals.url.href=t+e.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=t}else this._internals.prefixUrl=""}get body(){return this._internals.body}set body(t){_.any([y.string,y.buffer,y.nodeStream,y.generator,y.asyncGenerator,it,y.undefined],t),y.nodeStream(t)&&_.truthy(t.readable),void 0!==t&&(_.undefined(this._internals.form),_.undefined(this._internals.json)),this._internals.body=t}get form(){return this._internals.form}set form(t){_.any([y.plainObject,y.undefined],t),void 0!==t&&(_.undefined(this._internals.body),_.undefined(this._internals.json)),this._internals.form=t}get json(){return this._internals.json}set json(t){void 0!==t&&(_.undefined(this._internals.body),_.undefined(this._internals.form)),this._internals.json=t}get url(){return this._internals.url}set url(t){if(_.any([y.string,y.urlInstance,y.undefined],t),void 0===t)return void(this._internals.url=void 0);if(y.string(t)&&t.startsWith("/"))throw new Error("`url` must not start with a slash");const e=`${this.prefixUrl}${t.toString()}`,n=new D.URL(e);if(this._internals.url=n,decodeURI(e),"unix:"===n.protocol&&(n.href=`http://unix${n.pathname}${n.search}`),"http:"!==n.protocol&&"https:"!==n.protocol){const t=new Error(`Unsupported protocol: ${n.protocol}`);throw t.code="ERR_UNSUPPORTED_PROTOCOL",t}if(this._internals.username&&(n.username=this._internals.username,this._internals.username=""),this._internals.password&&(n.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(n.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"!==n.hostname)this._unixOptions=void 0;else{if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");const t=/(?<socketPath>.+?):(?<path>.+)/.exec(`${n.pathname}${n.search}`);if(t?.groups){const{socketPath:e,path:n}=t.groups;this._unixOptions={socketPath:e,path:n,host:""}}else this._unixOptions=void 0}}get cookieJar(){return this._internals.cookieJar}set cookieJar(t){if(_.any([y.object,y.undefined],t),void 0===t)return void(this._internals.cookieJar=void 0);let{setCookie:e,getCookieString:n}=t;_.function_(e),_.function_(n),4===e.length&&0===n.length?(e=(0,Tt.promisify)(e.bind(t)),n=(0,Tt.promisify)(n.bind(t)),this._internals.cookieJar={setCookie:e,getCookieString:n}):this._internals.cookieJar=t}get signal(){return this._internals.signal}set signal(t){_.object(t),this._internals.signal=t}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(t){_.boolean(t),this._internals.ignoreInvalidCookies=t}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new D.URLSearchParams),this._internals.searchParams)}set searchParams(t){_.any([y.string,y.object,y.undefined],t);const e=this._internals.url;if(void 0===t)return this._internals.searchParams=void 0,void(e&&(e.search=""));const n=this.searchParams;let i;if(y.string(t))i=new D.URLSearchParams(t);else if(t instanceof D.URLSearchParams)i=t;else{!function(t){for(const e in t){const n=t[e];_.any([y.string,y.number,y.boolean,y.null_,y.undefined],n)}}(t),i=new D.URLSearchParams;for(const e in t){const r=t[e];null===r?i.append(e,""):void 0===r?n.delete(e):i.append(e,r)}}if(this._merging){for(const t of i.keys())n.delete(t);for(const[t,e]of i)n.append(t,e)}else e?e.search=n.toString():this._internals.searchParams=n}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(t){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(t){_.any([y.function_,y.undefined],t),this._internals.dnsLookup=t}get dnsCache(){return this._internals.dnsCache}set dnsCache(t){_.any([y.object,y.boolean,y.undefined],t),this._internals.dnsCache=!0===t?ee||(ee=new Xt,ee):!1===t?void 0:t}get context(){return this._internals.context}set context(t){_.object(t),this._merging?Object.assign(this._internals.context,t):this._internals.context={...t}}get hooks(){return this._internals.hooks}set hooks(t){_.object(t);for(const e in t){if(!(e in this._internals.hooks))throw new Error(`Unexpected hook event: ${e}`);const n=e,i=t[n];if(_.any([y.array,y.undefined],i),i)for(const t of i)_.function_(t);if(this._merging)i&&this._internals.hooks[n].push(...i);else{if(!i)throw new Error(`Missing hook event: ${e}`);this._internals.hooks[e]=[...i]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(t){_.boolean(t),this._internals.followRedirect=t}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(t){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(t){_.number(t),this._internals.maxRedirects=t}get cache(){return this._internals.cache}set cache(t){_.any([y.object,y.string,y.boolean,y.undefined],t),this._internals.cache=!0===t?te:!1===t?void 0:t}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(t){_.boolean(t),this._internals.throwHttpErrors=t}get username(){const t=this._internals.url,e=t?t.username:this._internals.username;return decodeURIComponent(e)}set username(t){_.string(t);const e=this._internals.url,n=encodeURIComponent(t);e?e.username=n:this._internals.username=n}get password(){const t=this._internals.url,e=t?t.password:this._internals.password;return decodeURIComponent(e)}set password(t){_.string(t);const e=this._internals.url,n=encodeURIComponent(t);e?e.password=n:this._internals.password=n}get http2(){return this._internals.http2}set http2(t){_.boolean(t),this._internals.http2=t}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(t){_.boolean(t),this._internals.allowGetBody=t}get headers(){return this._internals.headers}set headers(t){_.plainObject(t),this._merging?Object.assign(this._internals.headers,H(t)):this._internals.headers=H(t)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(t){_.boolean(t),this._internals.methodRewriting=t}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(t){if(void 0!==t&&4!==t&&6!==t)throw new TypeError(`Invalid DNS lookup IP version: ${t}`);this._internals.dnsLookupIpVersion=t}get parseJson(){return this._internals.parseJson}set parseJson(t){_.function_(t),this._internals.parseJson=t}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(t){_.function_(t),this._internals.stringifyJson=t}get retry(){return this._internals.retry}set retry(t){if(_.plainObject(t),_.any([y.function_,y.undefined],t.calculateDelay),_.any([y.number,y.undefined],t.maxRetryAfter),_.any([y.number,y.undefined],t.limit),_.any([y.array,y.undefined],t.methods),_.any([y.array,y.undefined],t.statusCodes),_.any([y.array,y.undefined],t.errorCodes),_.any([y.number,y.undefined],t.noise),t.noise&&Math.abs(t.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${t.noise}`);for(const e in t)if(!(e in this._internals.retry))throw new Error(`Unexpected retry option: ${e}`);this._merging?Object.assign(this._internals.retry,t):this._internals.retry={...t};const{retry:e}=this._internals;e.methods=[...new Set(e.methods.map((t=>t.toUpperCase())))],e.statusCodes=[...new Set(e.statusCodes)],e.errorCodes=[...new Set(e.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(t){_.any([y.string,y.undefined],t),this._internals.localAddress=t}get method(){return this._internals.method}set method(t){_.string(t),this._internals.method=t.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(t){_.any([y.function_,y.undefined],t),this._internals.createConnection=t}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(t){_.plainObject(t),_.any([y.boolean,y.undefined],t.shared),_.any([y.number,y.undefined],t.cacheHeuristic),_.any([y.number,y.undefined],t.immutableMinTimeToLive),_.any([y.boolean,y.undefined],t.ignoreCargoCult);for(const e in t)if(!(e in this._internals.cacheOptions))throw new Error(`Cache option \`${e}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,t):this._internals.cacheOptions={...t}}get https(){return this._internals.https}set https(t){_.plainObject(t),_.any([y.boolean,y.undefined],t.rejectUnauthorized),_.any([y.function_,y.undefined],t.checkServerIdentity),_.any([y.string,y.object,y.array,y.undefined],t.certificateAuthority),_.any([y.string,y.object,y.array,y.undefined],t.key),_.any([y.string,y.object,y.array,y.undefined],t.certificate),_.any([y.string,y.undefined],t.passphrase),_.any([y.string,y.buffer,y.array,y.undefined],t.pfx),_.any([y.array,y.undefined],t.alpnProtocols),_.any([y.string,y.undefined],t.ciphers),_.any([y.string,y.buffer,y.undefined],t.dhparam),_.any([y.string,y.undefined],t.signatureAlgorithms),_.any([y.string,y.undefined],t.minVersion),_.any([y.string,y.undefined],t.maxVersion),_.any([y.boolean,y.undefined],t.honorCipherOrder),_.any([y.number,y.undefined],t.tlsSessionLifetime),_.any([y.string,y.undefined],t.ecdhCurve),_.any([y.string,y.buffer,y.array,y.undefined],t.certificateRevocationLists);for(const e in t)if(!(e in this._internals.https))throw new Error(`HTTPS option \`${e}\` does not exist`);this._merging?Object.assign(this._internals.https,t):this._internals.https={...t}}get encoding(){return this._internals.encoding}set encoding(t){if(null===t)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");_.any([y.string,y.undefined],t),this._internals.encoding=t}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(t){_.boolean(t),this._internals.resolveBodyOnly=t}get isStream(){return this._internals.isStream}set isStream(t){_.boolean(t),this._internals.isStream=t}get responseType(){return this._internals.responseType}set responseType(t){if(void 0!==t){if("text"!==t&&"buffer"!==t&&"json"!==t)throw new Error(`Invalid \`responseType\` option: ${t}`);this._internals.responseType=t}else this._internals.responseType="text"}get pagination(){return this._internals.pagination}set pagination(t){_.object(t),this._merging?Object.assign(this._internals.pagination,t):this._internals.pagination=t}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(t){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(t){_.boolean(t),this._internals.setHost=t}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(t){_.any([y.number,y.undefined],t),this._internals.maxHeaderSize=t}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(t){_.boolean(t),this._internals.enableUnixSockets=t}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](t,e){return(0,Tt.inspect)(this._internals,e)}createNativeRequestOptions(){const t=this._internals;let e;e="https:"===t.url.protocol?t.http2?t.agent:t.agent.https:t.agent.http;const{https:n}=t;let{pfx:i}=n;return y.array(i)&&y.plainObject(i[0])&&(i=i.map((t=>({buf:t.buffer,passphrase:t.passphrase})))),{...t.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??Dt.checkServerIdentity,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:t.dnsLookup??t.dnsCache?.lookup,family:t.dnsLookupIpVersion,agent:e,setHost:t.setHost,method:t.method,maxHeaderSize:t.maxHeaderSize,localAddress:t.localAddress,headers:t.headers,createConnection:t.createConnection,timeout:t.http2?ie(t):void 0,h2session:t.h2session}}getRequestFunction(){const t=this._internals.url,{request:e}=this._internals;return!e&&t?this.getFallbackRequestFunction():e}getFallbackRequestFunction(){const t=this._internals.url;if(t){if("https:"===t.protocol){if(this._internals.http2){if(Kt<15||15===Kt&&Zt<10){const t=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw t.code="EUNSUPPORTED",t}return Qt.auto}return Rt.request}return R.request}}freeze(){const t=this._internals;Object.freeze(t),Object.freeze(t.hooks),Object.freeze(t.hooks.afterResponse),Object.freeze(t.hooks.beforeError),Object.freeze(t.hooks.beforeRedirect),Object.freeze(t.hooks.beforeRequest),Object.freeze(t.hooks.beforeRetry),Object.freeze(t.hooks.init),Object.freeze(t.https),Object.freeze(t.cacheOptions),Object.freeze(t.agent),Object.freeze(t.headers),Object.freeze(t.timeout),Object.freeze(t.retry),Object.freeze(t.retry.errorCodes),Object.freeze(t.retry.methods),Object.freeze(t.retry.statusCodes)}}const oe=t=>{const{statusCode:e}=t,n=t.request.options.followRedirect?299:399;return e>=200&&e<=n||304===e};class ae extends x{constructor(t,e){const{options:n}=e.request;super(`${t.message} in "${n.url.toString()}"`,t,e.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}const ce=(t,e,n,i)=>{const{rawBody:r}=t;try{if("text"===e)return r.toString(i);if("json"===e)return 0===r.length?"":n(r.toString(i));if("buffer"===e)return r}catch(e){throw new ae(e,t)}throw new ae({message:`Unknown body type '${e}'`,name:"Error"},t)};function le(t){return"unix:"===t.protocol||"unix"===t.hostname}const he=y.string(P.versions.brotli),ue=new Set(["GET","HEAD"]),pe=new class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(t,e){"object"==typeof t?this.weakMap.set(t,e):this.map.set(t,e)}get(t){return"object"==typeof t?this.weakMap.get(t):this.map.get(t)}has(t){return"object"==typeof t?this.weakMap.has(t):this.map.has(t)}},de=new Set([300,301,302,303,304,307,308]),fe=["socket","connect","continue","information","upgrade"],me=()=>{};class ge extends M.Duplex{constructor(t,e,n){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=me,this._triggerRead=!1,this._cancelTimeouts=me,this._removeListeners=me,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=me,this.on("pipe",(t=>{t.headers&&Object.assign(this.options.headers,t.headers)})),this.on("newListener",(t=>{if("retry"===t&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")}));try{if(this.options=new se(t,e,n),!this.options.url){if(""===this.options.prefixUrl)throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(t){const{options:e}=t;return e&&(this.options=e),void(this.flush=async()=>{this.flush=async()=>{},this.destroy(t)})}const{body:i}=this.options;if(y.nodeStream(i)&&i.once("error",(t=>{this._flushed?this._beforeError(new T(t,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new T(t,this))}})),this.options.signal){const t=()=>{this.destroy(new A(this))};this.options.signal.aborted?t():(this.options.signal.addEventListener("abort",t),this._removeListeners=()=>{this.options.signal.removeEventListener("abort",t)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed)return void this._request?.destroy();for(const t of this._jobs)t();this._jobs.length=0,this._requestInitialized=!0}catch(t){this._beforeError(t)}}}_beforeError(t){if(this._stopReading)return;const{response:e,options:n}=this,i=this.retryCount+("RetryError"===t.name?0:1);this._stopReading=!0,t instanceof x||(t=new x(t.message,t,this));const r=t;(async()=>{if(!e?.readable||e.rawBody||this._request?.socket?.destroyed||(e.setEncoding(this.readableEncoding),await this._setRawBody(e)&&(e.body=e.rawBody.toString())),0!==this.listenerCount("retry")){let s;try{let t;e&&"retry-after"in e.headers&&(t=Number(e.headers["retry-after"]),Number.isNaN(t)?(t=Date.parse(e.headers["retry-after"])-Date.now(),t<=0&&(t=1)):t*=1e3);const o=n.retry;s=await o.calculateDelay({attemptCount:i,retryOptions:o,error:r,retryAfter:t,computedValue:Mt({attemptCount:i,retryOptions:o,error:r,retryAfter:t,computedValue:o.maxRetryAfter??n.timeout.request??Number.POSITIVE_INFINITY})})}catch(t){return void this._error(new x(t.message,t,this))}if(s){if(await new Promise((t=>{const e=setTimeout(t,s);this._stopRetry=()=>{clearTimeout(e),t()}})),this.destroyed)return;try{for(const t of this.options.hooks.beforeRetry)await t(r,this.retryCount+1)}catch(e){return void this._error(new x(e.message,t,this))}if(this.destroyed)return;return this.destroy(),void this.emit("retry",this.retryCount+1,t,(t=>{const e=new ge(n.url,t,n);return e.retryCount=this.retryCount+1,P.nextTick((()=>{e.flush()})),e}))}}this._error(r)})()}_read(){this._triggerRead=!0;const{response:t}=this;if(t&&!this._stopReading){let e;for(t.readableLength&&(this._triggerRead=!1);null!==(e=t.read());){this._downloadedSize+=e.length;const t=this.downloadProgress;t.percent<1&&this.emit("downloadProgress",t),this.push(e)}}}_write(t,e,n){const i=()=>{this._writeRequest(t,e,n)};this._requestInitialized?i():this._jobs.push(i)}_final(t){const e=()=>{this._request&&!this._request.destroyed?this._request.end((e=>{this._request._writableState?.errored||(e||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),t(e))})):t()};this._requestInitialized?e():this._jobs.push(e)}_destroy(t,e){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){const{body:t}=this.options;y.nodeStream(t)&&t.destroy()}this._request&&this._request.destroy(),null===t||y.undefined(t)||t instanceof x||(t=new x(t.message,t,this)),e(t)}pipe(t,e){return t instanceof R.ServerResponse&&this._pipedServerResponses.add(t),super.pipe(t,e)}unpipe(t){return t instanceof R.ServerResponse&&this._pipedServerResponses.delete(t),super.unpipe(t),this}async _finalizeBody(){const{options:t}=this,{headers:e}=t,n=!y.undefined(t.form),i=!y.undefined(t.json),r=!y.undefined(t.body),s=ue.has(t.method)&&!("GET"===t.method&&t.allowGetBody);if(this._cannotHaveBody=s,n||i||r){if(s)throw new TypeError(`The \`${t.method}\` method cannot be used with a body`);const i=!y.string(e["content-type"]);if(r){if(it(t.body)){const n=new kt(t.body);i&&(e["content-type"]=n.headers["Content-Type"]),"Content-Length"in n.headers&&(e["content-length"]=n.headers["Content-Length"]),t.body=n.encode()}Ct(t.body)&&i&&(e["content-type"]=`multipart/form-data; boundary=${t.body.getBoundary()}`)}else if(n){i&&(e["content-type"]="application/x-www-form-urlencoded");const{form:n}=t;t.form=void 0,t.body=new D.URLSearchParams(n).toString()}else{i&&(e["content-type"]="application/json");const{json:n}=t;t.json=void 0,t.body=t.stringifyJson(n)}const o=await async function(t,e){return e&&"content-length"in e?Number(e["content-length"]):t?y.string(t)?N.Buffer.byteLength(t):y.buffer(t)?t.length:Ct(t)?(0,Tt.promisify)(t.getLength.bind(t))():void 0:0}(t.body,t.headers);y.undefined(e["content-length"])&&y.undefined(e["transfer-encoding"])&&!s&&!y.undefined(o)&&(e["content-length"]=String(o))}"json"!==t.responseType||"accept"in t.headers||(t.headers.accept="application/json"),this._bodySize=Number(e["content-length"])||void 0}async _onResponseBase(t){if(this.isAborted)return;const{options:e}=this,{url:n}=e;this._nativeResponse=t,e.decompress&&(t=et(t));const i=t.statusCode,r=t;r.statusMessage=r.statusMessage?r.statusMessage:R.STATUS_CODES[i],r.url=e.url.toString(),r.requestUrl=this.requestUrl,r.redirectUrls=this.redirectUrls,r.request=this,r.isFromCache=this._nativeResponse.fromCache??!1,r.ip=this.ip,r.retryCount=this.retryCount,r.ok=oe(r),this._isFromCache=r.isFromCache,this._responseSize=Number(t.headers["content-length"])||void 0,this.response=r,t.once("end",(()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)})),t.once("error",(e=>{this._aborted=!0,t.destroy(),this._beforeError(new O(e,this))})),t.once("aborted",(()=>{this._aborted=!0,this._beforeError(new O({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))})),this.emit("downloadProgress",this.downloadProgress);const s=t.headers["set-cookie"];if(y.object(e.cookieJar)&&s){let t=s.map((async t=>e.cookieJar.setCookie(t,n.toString())));e.ignoreInvalidCookies&&(t=t.map((async t=>{try{await t}catch{}})));try{await Promise.all(t)}catch(t){return void this._beforeError(t)}}if(!this.isAborted)if(e.followRedirect&&t.headers.location&&de.has(i)){if(t.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=e.maxRedirects)return void this._beforeError(new E(this));this._request=void 0;const s=new se(void 0,void 0,this.options),o=303===i&&"GET"!==s.method&&"HEAD"!==s.method,a=307!==i&&308!==i,c=s.methodRewriting&&a;(o||c)&&(s.method="GET",s.body=void 0,s.json=void 0,s.form=void 0,delete s.headers["content-length"]);try{const e=N.Buffer.from(t.headers.location,"binary").toString(),i=new D.URL(e,n);if(!le(n)&&le(i))return void this._beforeError(new x("Cannot redirect to UNIX socket",{},this));i.hostname!==n.hostname||i.port!==n.port?("host"in s.headers&&delete s.headers.host,"cookie"in s.headers&&delete s.headers.cookie,"authorization"in s.headers&&delete s.headers.authorization,(s.username||s.password)&&(s.username="",s.password="")):(i.username=s.username,i.password=s.password),this.redirectUrls.push(i),s.prefixUrl="",s.url=i;for(const t of s.hooks.beforeRedirect)await t(s,r);this.emit("redirect",s,r),this.options=s,await this._makeRequest()}catch(t){return void this._beforeError(t)}}else if(e.isStream&&e.throwHttpErrors&&!oe(r))this._beforeError(new S(r));else if(t.on("readable",(()=>{this._triggerRead&&this._read()})),this.on("resume",(()=>{t.resume()})),this.on("pause",(()=>{t.pause()})),t.once("end",(()=>{this.push(null)})),this._noPipe)await this._setRawBody()&&this.emit("response",t);else{this.emit("response",t);for(const n of this._pipedServerResponses)if(!n.headersSent){for(const i in t.headers){const r=!e.decompress||"content-encoding"!==i,s=t.headers[i];r&&n.setHeader(i,s)}n.statusCode=i}}}async _setRawBody(t=this){if(t.readableEnded)return!1;try{const e=await(0,G.buffer)(t);if(!this.isAborted)return this.response.rawBody=e,!0}catch{}return!1}async _onResponse(t){try{await this._onResponseBase(t)}catch(t){this._beforeError(t)}}_onRequest(t){const{options:e}=this,{timeout:n,url:i}=e;(t=>{if(t.timings)return t.timings;const e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;const n=t=>{t.once(B.errorMonitor,(()=>{e.error=Date.now(),e.phases.total=e.error-e.start}))};n(t);const i=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",i);const r=t=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,F.types.isProxy(t))return;const n=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};t.prependOnceListener("lookup",n),L(t,{connect:()=>{e.connect=Date.now(),void 0===e.lookup&&(t.removeListener("lookup",n),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?r(t.socket):t.prependOnceListener("socket",r);const s=()=>{e.upload=Date.now(),e.phases.request=e.upload-(e.secureConnect??e.connect)};t.writableFinished?s():t.prependOnceListener("finish",s),t.prependOnceListener("response",(r=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,r.timings=e,n(r),r.prependOnceListener("end",(()=>{t.off("abort",i),r.off("aborted",i),e.phases.total||(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)})),r.prependOnceListener("aborted",i)}))})(t),this.options.http2&&t.setTimeout(0),this._cancelTimeouts=function(t,e,n){if(At in t)return Pt;t[At]=!0;const i=[],{once:r,unhandleAll:s}=function(){const t=[];return{once(e,n,i){e.once(n,i),t.push({origin:e,event:n,fn:i})},unhandleAll(){for(const e of t){const{origin:t,event:n,fn:i}=e;t.removeListener(n,i)}t.length=0}}}(),o=(t,e,n)=>{const r=setTimeout(e,t,t,n);r.unref?.();const s=()=>{clearTimeout(r)};return i.push(s),s},{host:a,hostname:c}=n,l=(e,n)=>{t.destroy(new Nt(e,n))},h=()=>{for(const t of i)t();s()};if(t.once("error",(e=>{if(h(),0===t.listenerCount("error"))throw e})),void 0!==e.request){const n=o(e.request,l,"request");r(t,"response",(t=>{r(t,"end",n)}))}if(void 0!==e.socket){const{socket:n}=e,r=()=>{l(n,"socket")};t.setTimeout(n,r),i.push((()=>{t.removeListener("timeout",r)}))}const u=void 0!==e.lookup,p=void 0!==e.connect,d=void 0!==e.secureConnect,f=void 0!==e.send;return(u||p||d||f)&&r(t,"socket",(i=>{const{socketPath:s}=t;if(i.connecting){const t=Boolean(s??0!==It.isIP(c??a??""));if(u&&!t&&void 0===i.address().address){const t=o(e.lookup,l,"lookup");r(i,"lookup",t)}if(p){const n=()=>o(e.connect,l,"connect");t?r(i,"connect",n()):r(i,"lookup",(t=>{null===t&&r(i,"connect",n())}))}d&&"https:"===n.protocol&&r(i,"connect",(()=>{const t=o(e.secureConnect,l,"secureConnect");r(i,"secureConnect",t)}))}if(f){const n=()=>o(e.send,l,"send");i.connecting?r(i,"connect",(()=>{r(t,"upload-complete",n())})):r(t,"upload-complete",n())}})),void 0!==e.response&&r(t,"upload-complete",(()=>{const n=o(e.response,l,"response");r(t,"response",n)})),void 0!==e.read&&r(t,"response",(t=>{const n=o(e.read,l,"read");r(t,"end",n)})),h}(t,n,i);const r=e.cache?"cacheableResponse":"response";t.once(r,(t=>{this._onResponse(t)})),t.once("error",(e=>{this._aborted=!0,t.destroy(),e=e instanceof Nt?new C(e,this.timings,this):new x(e.message,e,this),this._beforeError(e)})),this._unproxyEvents=Ot(t,this,fe),this._request=t,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",t)}async _asyncWrite(t){return new Promise(((e,n)=>{super.write(t,(t=>{t?n(t):e()}))}))}_sendBody(){const{body:t}=this.options,e=0===this.redirectUrls.length?this:this._request??this;y.nodeStream(t)?t.pipe(e):y.generator(t)||y.asyncGenerator(t)?(async()=>{try{for await(const e of t)await this._asyncWrite(e);super.end()}catch(t){this._beforeError(t)}})():y.undefined(t)?(this._cannotHaveBody||this._noPipe)&&e.end():(this._writeRequest(t,void 0,(()=>{})),e.end())}_prepareCache(t){if(!pe.has(t)){const e=new tt(((t,e)=>{const n=t._request(t,e);return y.promise(n)&&(n.once=(t,e)=>{if("error"===t)(async()=>{try{await n}catch(t){e(t)}})();else{if("abort"!==t)throw new Error(`Unknown HTTP2 promise event: ${t}`);(async()=>{try{(await n).once("abort",e)}catch{}})()}return n}),n}),t);pe.set(t,e.request())}}async _createCacheableRequest(t,e){return new Promise(((n,i)=>{let r;Object.assign(e,function(t){const e={protocol:t.protocol,hostname:y.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return y.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}(t));const s=pe.get(e.cache)(e,(async t=>{if(t._readableState.autoDestroy=!1,r){const e=()=>{t.req&&(t.complete=t.req.res.complete)};t.prependOnceListener("end",e),e(),(await r).emit("cacheableResponse",t)}n(t)}));s.once("error",i),s.once("request",(async t=>{r=t,n(r)}))}))}async _makeRequest(){const{options:t}=this,{headers:e,username:n,password:i}=t,r=t.cookieJar;for(const t in e)if(y.undefined(e[t]))delete e[t];else if(y.null_(e[t]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${t}\` header`);if(t.decompress&&y.undefined(e["accept-encoding"])&&(e["accept-encoding"]=he?"gzip, deflate, br":"gzip, deflate"),n||i){const t=N.Buffer.from(`${n}:${i}`).toString("base64");e.authorization=`Basic ${t}`}if(r){const n=await r.getCookieString(t.url.toString());y.nonEmptyString(n)&&(e.cookie=n)}let s;t.prefixUrl="";for(const e of t.hooks.beforeRequest){const n=await e(t);if(!y.undefined(n)){s=()=>n;break}}s||(s=t.getRequestFunction());const o=t.url;this._requestOptions=t.createNativeRequestOptions(),t.cache&&(this._requestOptions._request=s,this._requestOptions.cache=t.cache,this._requestOptions.body=t.body,this._prepareCache(t.cache));const a=t.cache?this._createCacheableRequest:s;try{let e=a(o,this._requestOptions);y.promise(e)&&(e=await e),y.undefined(e)&&(e=t.getFallbackRequestFunction()(o,this._requestOptions),y.promise(e)&&(e=await e)),(c=e).writable&&!c.writableEnded?this._onRequest(e):this.writable?(this.once("finish",(()=>{this._onResponse(e)})),this._sendBody()):this._onResponse(e)}catch(t){if(t instanceof J)throw new k(t,this);throw t}var c}async _error(t){try{if(t instanceof S&&!this.options.throwHttpErrors);else for(const e of this.options.hooks.beforeError)t=await e(t)}catch(e){t=new x(e.message,e,this)}this.destroy(t)}_writeRequest(t,e,n){this._request&&!this._request.destroyed&&this._request.write(t,e,(i=>{if(!i&&!this._request.destroyed){this._uploadedSize+=N.Buffer.byteLength(t,e);const n=this.uploadProgress;n.percent<1&&this.emit("uploadProgress",n)}n(i)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let t;return t=this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,{percent:t,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let t;return t=this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,{percent:t,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class _e extends x{constructor(t){super("Promise was canceled",{},t),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}const ye=["request","response","redirect","uploadProgress","downloadProgress"];function be(t){let e,n,i;const r=new b.EventEmitter,s=new w(((o,a,c)=>{c((()=>{e.destroy()})),c.shouldReject=!1,c((()=>{a(new _e(e))}));const l=h=>{c((()=>{}));const u=t??new ge(void 0,void 0,i);u.retryCount=h,u._noPipe=!0,e=u,u.once("response",(async t=>{const e=(t.headers["content-encoding"]??"").toLowerCase(),i="gzip"===e||"deflate"===e||"br"===e,{options:r}=u;if(i&&!r.decompress)t.body=t.rawBody;else try{t.body=ce(t,r.responseType,r.parseJson,r.encoding)}catch(e){if(t.body=t.rawBody.toString(),oe(t))return void u._beforeError(e)}try{const e=r.hooks.afterResponse;for(const[n,i]of e.entries())if(t=await i(t,(async t=>{throw r.merge(t),r.prefixUrl="",t.url&&(r.url=t.url),r.hooks.afterResponse=r.hooks.afterResponse.slice(0,n),new I(u)})),!y.object(t)||!y.number(t.statusCode)||y.nullOrUndefined(t.body))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(t){return void u._beforeError(t)}n=t,oe(t)?(u.destroy(),o(u.options.resolveBodyOnly?t.body:t)):u._beforeError(new S(t))}));const p=t=>{if(s.isCanceled)return;const{options:e}=u;if(t instanceof S&&!e.throwHttpErrors){const{response:e}=t;return u.destroy(),void o(u.options.resolveBodyOnly?e.body:e)}a(t)};u.once("error",p);const d=u.options?.body;u.once("retry",((e,n)=>{t=void 0;const r=u.options.body;if(d===r&&y.nodeStream(r))return n.message="Cannot retry with consumed body stream",void p(n);i=u.options,l(e)})),Ot(u,r,ye),y.undefined(t)&&u.flush()};l(0)}));s.on=(t,e)=>(r.on(t,e),s),s.off=(t,e)=>(r.off(t,e),s);const o=t=>{const e=(async()=>{await s;const{options:e}=n.request;return ce(n,t,e.parseJson,e.encoding)})();return Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)),e};return s.json=()=>{if(e.options){const{headers:t}=e.options;e.writableFinished||"accept"in t||(t.accept="application/json")}return o("json")},s.buffer=()=>o("buffer"),s.text=()=>o("text"),s}const ve=async t=>new Promise((e=>{setTimeout(e,t)})),we=t=>y.function_(t),xe=["get","post","put","patch","head","delete"],Ee=t=>{t={options:new se(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});const e=(e,n,i=t.options)=>{const r=new ge(e,n,i);let s;const o=t=>(r.options=t,r._noPipe=!t.isStream,r.flush(),t.isStream?r:(s||(s=be(r)),s));let a=0;const c=e=>{const n=(t.handlers[a++]??o)(e,c);if(y.promise(n)&&!r.options.isStream&&(s||(s=be(r)),n!==s)){const t=Object.getOwnPropertyDescriptors(s);for(const e in t)e in n&&delete t[e];Object.defineProperties(n,t),n.cancel=s.cancel}return n};return c(r.options)};e.extend=(...e)=>{const n=new se(void 0,void 0,t.options),i=[...t.handlers];let r;for(const t of e)we(t)?(n.merge(t.defaults.options),i.push(...t.defaults.handlers),r=t.defaults.mutableDefaults):(n.merge(t),t.handlers&&i.push(...t.handlers),r=t.mutableDefaults);return Ee({options:n,handlers:i,mutableDefaults:Boolean(r)})};const n=async function*(n,i){let r=new se(n,i,t.options);r.resolveBodyOnly=!1;const{pagination:s}=r;_.function_(s.transform),_.function_(s.shouldContinue),_.function_(s.filter),_.function_(s.paginate),_.number(s.countLimit),_.number(s.requestLimit),_.number(s.backoff);const o=[];let{countLimit:a}=s,c=0;for(;c<s.requestLimit;){0!==c&&await ve(s.backoff);const t=await e(void 0,void 0,r),n=await s.transform(t),i=[];_.array(n);for(const t of n)if(s.filter({item:t,currentItems:i,allItems:o})){if(!s.shouldContinue({item:t,currentItems:i,allItems:o}))return;if(yield t,s.stackAllItems&&o.push(t),i.push(t),--a<=0)return}const l=s.paginate({response:t,currentItems:i,allItems:o});if(!1===l)return;l===t.request.options?r=t.request.options:(r.merge(l),_.any([y.urlInstance,y.undefined],l.url),void 0!==l.url&&(r.prefixUrl="",r.url=l.url)),c++}};(e.paginate=n).all=async(t,e)=>{const i=[];for await(const r of n(t,e))i.push(r);return i},e.paginate.each=n,e.stream=(t,n)=>e(t,{...n,isStream:!0});for(const t of xe)e[t]=(n,i)=>e(n,{...i,method:t}),e.stream[t]=(n,i)=>e(n,{...i,method:t,isStream:!0});return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},Se=Ee({options:new se,handlers:[],mutableDefaults:!1});n(9001);var ke=n(6278);class Te extends ke.InstanceBase{async init(t){this.config=t,this.MIN_BUFFER_TIME=25,this.RECONNECT_TIMEOUT=10,this.REBOOT_WAIT_TIME=210,this.PREVIEW_REFRESH=1500,this.LOGIN_TIMEOUT=5e3,this.reconnecting=null,this.channels={},this.player_status={},this.cur_channel=null,this.session_id=null,this.cur_time=null,this.stream_cache_feedback=null,this.cuepoints={},this._image_refresh=null,this.initVariables(),this.config.host&&this.login(!0)}initVariables(){this.setVariableDefinitions([{name:"Current playing time of video (HH:MM:SS format).",variableId:"time"},{name:"Current duration of playing video (HH:MM:SS format).",variableId:"duration"},{name:"Remaining time in playing video (HH:MM:SS format).",variableId:"remaining"}]),this.setVariableValues({time:"00:00:00",duration:"00:00:00",remaining:"00:00:00"})}async configUpdated(t){this.session_id&&this.logout(),this.config=t,this.config.host&&this.config.username&&this.config.password&&this.login(!0)}initSocket(){this.updateStatus("connecting","Connecting to socket"),this.socket=i("https://"+this.config.host,{path:"/transport/socket.io/",rejectUnauthorized:!1,forceNode:!0,transports:["websocket"],transportOptions:{websocket:{extraHeaders:{Cookie:"io=rj-zrxObRlXCYjP7AACx; sessionID="+this.session_id}}}}),this.socket.on("connect",(()=>{this.updateStatus("ok")})).on("connect_error",this._reconnect.bind(this)).on("logout",(()=>this._reconnect({message:"Session logged out..."},!0))).on("model:delta",((t,e)=>{"player"===t?this._player_updates(e):t in this.channels&&this._channel_updates(t,e)})).on("data:init",this.device_init.bind(this))}_channel_updates(t,e){"duration"in e&&this.channels[t].duration!==e.duration&&(e.last_duration_change=new Date),this.channels[t]={...this.channels[t],...e},t===this.cur_channel&&this.setVariableValues({duration:this._userFriendlyTime(this.channels[this.cur_channel].duration),remaining:"time"in this.player_status?this._userFriendlyTime(this.channels[this.cur_channel].duration-this.player_status.time):"00:00:00"}),"cloud_duration"in e&&e.cloud_duration>0&&this.checkFeedbacks("streaming")}_player_updates(t){t&&(this.player_status={...this.player_status,...t},"time"in t&&this._set_cur_time(t.time),"active_channel_id"in t&&(this.log("debug","Setting active channel to "+t.active_channel_id),this.set_live_channel(t.active_channel_id)),"playing"in t&&(this.get_latest_image(),this.checkFeedbacks("playing","stopped","previewpic")))}_set_cur_time(t){return this.cur_time=parseFloat(t),this.setVariableValues({time:this._userFriendlyTime(this.cur_time)}),this.cur_time}_reconnect(t,e=!1){this.log("warn",`Connection to server ended. Will attempt to reconnect. Error ${t?.message}`),this.updateStatus("disconnected","Disconnected and will attempt to reconnect..."),this._endConnection(),e?this.login(!0):this.keep_login_retry(this.RECONNECT_TIMEOUT)}keep_login_retry(t){this.reconnecting||(this.log("info","Attempting to reconnect in "+t+" seconds."),this.reconnecting=setTimeout(this.login.bind(this,!0),1e3*t))}_stopOldLogin(){this.reconnecting&&(clearTimeout(this.reconnecting),this.reconnecting=null)}async login(t=!1){this.updateStatus("connecting","Logging in"),this._stopOldLogin();const e=await Se.post(`https://${this.config.host}/api/session`,{json:{username:this.config.username,password:this.config.password},timeout:{request:this.LOGIN_TIMEOUT},https:{rejectUnauthorized:!1}}).json().catch((e=>{this.log("debug",`Could not connect to ${this.config.host}: ${e.message}`),this.updateStatus("connection_failure",e.message),t&&this.keep_login_retry(this.RECONNECT_TIMEOUT)}));return!!e&&(this.session_id=e.response.sessionID,this.log("info","Successfully connected. Session ID is "+this.session_id+"."),this.initSocket(),!0)}device_init(t){this.channels={},this.player_status=t.player,"active_channel_id"in t.player&&this.set_live_channel(t.player.active_channel_id),"time"in t.player&&this._set_cur_time(t.player.time),t.channel.forEach((e=>{this.channels[e]=t[e]})),this.actions(),this.initFeedbacks(),this.get_latest_image()}set_live_channel(t){this.cur_channel=t,this.checkFeedbacks("active")}getConfigFields(){return[{type:"static-text",id:"info",width:12,label:"Information",value:"This will connect with Haivision Connect DVR. If you are using the operator account you will not be able to use the reboot functionality."},{type:"textinput",id:"host",label:"Target IP",width:12,regex:ke.Regex.IP,useVariables:!0},{type:"textinput",id:"username",label:"Username",value:"haioperator",width:6,useVariables:!0},{type:"textinput",id:"password",label:"Password",width:6,useVariables:!0}]}_get_channel_choices(t=!1){var e=[];for(var n in t&&e.push({id:"",label:""}),this.channels)e.push({id:this.channels[n].id,label:this.channels[n].name});return e}actions(){this.setActionDefinitions({playpause:{name:"Play/Pause Toggle",options:[],callback:this.play_pause.bind(this)},channel:{name:"Load Channel",options:[{type:"dropdown",label:"Channel ID",id:"channel",choices:this._get_channel_choices(!0)},{type:"textinput",label:"Start time in seconds or HH:MM:SS format (empty for end, if live, or start if not live)",id:"initial_time",default:"",useVariables:!0}],callback:async t=>{const e=await this.parseVariablesInString(t.options.initial_time);this.load_channel(t.options.channel,this._toSeconds(e))}},reboot:{name:"Reboot Device",options:[],callback:this.reboot.bind(this)},play:{name:"Play",options:[],callback:this.play.bind(this)},pause:{name:"Pause",options:[],callback:this.pause.bind(this)},skip:{name:"Skip backward or forward",description:"Time, in seconds, to skip backward or forward. Use negative numbers to skip backwards.",options:[{type:"textinput",label:"Skip Time",id:"skip_time",default:5,regex:ke.Regex.SIGNED_NUMBER}],callback:this.skip_live.bind(this)},goto:{name:"Go to time in current channel",options:[{type:"textinput",label:"Time",id:"time",default:"",tooltip:"Time to go to in seconds or HH:MM:SS format.",useVariables:!0}],callback:async t=>{if(null===this.cur_channel)this.log("warn","Cannot go to time when channel not loaded.");else{const e=await this.parseVariablesInString(t.options.time);this.load_channel(this.cur_channel,this._toSeconds(e))}}},set_cuepoint:{name:"Set Cue Point",options:[{type:"dropdown",label:"Slot Number",id:"cuepoint_id",default:1,tooltip:"Select a slot to store the current elapsed time and channel as a cuepoint for later recall. Set points do not survive a server restart.",choices:this._get_allowed_cuepoints()}],callback:this.set_cuepoint.bind(this)},recall_cuepoint:{name:"Recall Cue Point",options:[{type:"dropdown",label:"Slot Number",id:"cuepoint_id",default:1,tooltip:"Select a slot to recall. If there is not a cuepoint saved, nothing will happen. Use feedbacks to change colors if a cuepoint is set for a slot.",choices:this._get_allowed_cuepoints()},{type:"dropdown",label:"Play State",id:"play_state",default:"pause",tooltip:"Should the clip start in a playing or paused state.",choices:[{id:"play",label:"Playing"},{id:"pause",label:"Paused"}]}],callback:this.recall_cuepoint.bind(this)}})}_get_allowed_cuepoints(){return[{id:"1",label:"Slot 1"},{id:"2",label:"Slot 2"},{id:"3",label:"Slot 3"},{id:"4",label:"Slot 4"},{id:"5",label:"Slot 5"}]}play_pause(){return!!this._isConnected()&&(this.log("info","Sending pause/play command."),this.socket.emit("sendAndCallback2","playback:togglePlayState"),!0)}_is_valid_channel(t){return t in this.channels&&!1===(this.channels[t].error?.message??!1)}_isConnected(){return void 0!==this.socket||(this.log("warn","Attempted to send command when not connected."),!1)}load_channel(t,e,n=null){return!!this._isConnected()&&(this._is_valid_channel(t)?(e=this._get_new_init_time(t,e),this.log("info","Loading channel "+t+" at "+e+"."),this.socket.emit("sendAndCallback2","playback:loadChannel",t,e,!1,-1,!1,null,n),this.set_live_channel(t),!0):(this.log("warn",`Cannot load invalid channel ${t}`),!1))}is_live(t){return!!(this._is_valid_channel(t)&&"last_duration_change"in this.channels[t]&&new Date-this.channels[t].last_duration_change<=15e3)}_userFriendlyTime(t){return new Date(1e3*t).toISOString().substr(11,8)}_toSeconds(t){if(""===t)return"";const e=String(t).split(":").reverse();let n=parseInt(e[0]);switch(e.length){case 3:n+=3600*parseInt(e[2]);case 2:n+=60*parseInt(e[1])}return n}_get_new_init_time(t,e){return""===e&&(e=this.is_live(t)?this.channels[t].duration:0),e>this.channels[t].duration-this.MIN_BUFFER_TIME&&(e=this.channels[t].duration-this.MIN_BUFFER_TIME)<=0&&(e=0),this._set_cur_time(e)}is_currently_active(){return!(!this.cur_channel||!this.cur_time)}skip_live(t){if(!this.is_currently_active())return!1;const e=parseFloat(t.options.skip_time);return this.log("info","Skipping time by "+e+". From "+this.cur_time+" -> "+(this.cur_time+e)+"."),this.load_channel(this.cur_channel,this.cur_time+e),!0}async reboot(){this._isConnected()&&(this.log("info","Ending connecting and rebooting..."),await Se.put(`https://${this.config.host}/api/settings/reboot`,{json:{id:0},headers:{Cookie:"sessionID="+this.session_id},https:{rejectUnauthorized:!1}}).then((t=>{this.updateStatus("disconnected","Rebooting..."),this._endConnection(),this.session_id=null,this.keep_login_retry(this.REBOOT_WAIT_TIME)})).catch((t=>{this.log("error","Could not reboot")})))}set_cuepoint(t){const e=t.options.cuepoint_id;if(!this.is_currently_active())return this.log("info","No active channel to save cuepoint."),!1;this.log("info","Setting cuepoint for slot "+e),this.cuepoints[e]={channel:this.cur_channel,time:this.cur_time,image:this.image},this.checkFeedbacks("cuepoint")}recall_cuepoint(t){const e=t.options.cuepoint_id,n=t.options.play_state;if(!(e in this.cuepoints))return this.log("info","No cuepoint saved in slot "+e),!1;this.log("info","Recalling cuepoint for slot "+e);const i=this.cuepoints[e];this.load_channel(i.channel,i.time,"pause"===n?this.play_pause.bind(this):null)}play(){this.is_playing()||null===this.cur_channel||this.play_pause()}pause(){this.is_playing()&&null!==this.cur_channel&&this.play_pause()}is_playing(){return"playing"in this.player_status&&this.player_status.playing}initFeedbacks(){const t=this._get_channel_choices(!0),e={streaming:{type:"boolean",name:"Channel is Streaming",description:"Indicates this channel is currently live streaming.",defaultStyle:{color:(0,ke.combineRgb)(255,255,255),bgcolor:(0,ke.combineRgb)(51,102,0)},options:[{type:"dropdown",label:"Channel ID",id:"channel",choices:t}],callback:t=>this.is_live(t.options.channel)},active:{type:"boolean",name:"Channel is Active",description:"Indicates this channel is currently active (playing/paused).",defaultStyle:{color:(0,ke.combineRgb)(255,255,255),bgcolor:(0,ke.combineRgb)(51,102,0)},options:[{type:"dropdown",label:"Channel ID",id:"channel",choices:t}],callback:t=>t.options.channel==this.cur_channel},playing:{type:"boolean",name:"Output playing",description:"Indicates a channel is currently playing.",options:[],defaultStyle:{color:(0,ke.combineRgb)(255,255,255),bgcolor:(0,ke.combineRgb)(51,102,0)},callback:t=>this.is_playing()},stopped:{type:"boolean",name:"Output stopped",description:"Indicates a channel is currently stopped.",options:[],defaultStyle:{color:(0,ke.combineRgb)(255,255,255),bgcolor:(0,ke.combineRgb)(128,0,0)},callback:t=>!this.is_playing()},cuepoint:{type:"advanced",name:"Cue Point Slot Saved",description:"Indicates a cue point is saved.",options:[{type:"colorpicker",label:"Foreground color",id:"fg",default:(0,ke.combineRgb)(255,255,255)},{type:"colorpicker",label:"Background color",id:"bg",default:(0,ke.combineRgb)(128,0,0)},{type:"dropdown",label:"Use preview image if available?",id:"use_preview",choices:[{id:"",label:"No"},{id:"image",label:"Yes"}]},{type:"dropdown",label:"Cuepoint Slot",id:"cuepoint_id",choices:this._get_allowed_cuepoints()}],callback:t=>{if(t.options.cuepoint_id in this.cuepoints){let e={color:t.options.fg,bgcolor:t.options.bg};return this.log("debug",t.options.use_preview),t.options.use_preview&&"image"===t.options.use_preview&&this.cuepoints[t.options.cuepoint_id].image&&(e.png64=this.cuepoints[t.options.cuepoint_id].image),e}return{}}},previewpic:{type:"advanced",name:"Preview",description:"Preview output image",options:[],callback:t=>this.image?{png64:this.image}:{}}};this.setFeedbackDefinitions(e),this.checkFeedbacks(...Object.keys(e))}async get_latest_image(){this._image_refresh&&clearTimeout(this._image_refresh),this._isConnected()}setImage(t){return this.image=t,this.is_playing()&&(this._image_refresh=setTimeout(this.get_latest_image.bind(this),this.PREVIEW_REFRESH)),this}async logout(){this._endConnection(),this.session_id&&(await Se.delete(`https://${this.config.host}/api/session`,{https:{rejectUnauthorized:!1},headers:{Cookie:"sessionID="+this.session_id},json:{}}).then((t=>{this.log("info","Session logged out.")})).catch((t=>{this.log("warn","Could not logout: "+t.message)})),this.session_id=null,this.updateStatus("disconnected"))}_endConnection(){this._image_refresh&&clearTimeout(this._image_refresh),void 0!==this.socket&&(this.socket.close(),delete this.socket)}async destroy(){this._stopOldLogin(),await this.logout()}}(0,ke.runEntrypoint)(Te,[(0,ke.CreateConvertToBooleanFeedbackUpgradeScript)({streaming:{bg:"bgcolor",fg:"color",text:"text"},active:!0,playing:!0,stopped:!0})])},9415:t=>{"use strict";t.exports=JSON.parse('{"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":[],"application/font-woff2":[],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":[],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":[],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":[],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":[],"application/x-msdownload":["com","bat"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":[],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":[],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":[],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":[],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":[],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":[],"audio/x-wav":[],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":[],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":[],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":[],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":[],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":[],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}')}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.c=e,n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(n.s=9990)})();