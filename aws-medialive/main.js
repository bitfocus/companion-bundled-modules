(()=>{var e,t={5122:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});let r=!1;const i=e=>{e&&!r&&parseInt(e.substring(1,e.indexOf(".")))<18&&(r=!0,process.emitWarning("NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will\nno longer support Node.js 16.x on January 6, 2025.\n\nTo continue receiving updates to AWS services, bug fixes, and security\nupdates please upgrade to a supported Node.js LTS version.\n\nMore information can be found at: https://a.co/74kJMmI"))}},6228:(e,t,n)=>{"use strict";n.d(t,{f2:()=>c});var r=n(5479);const i=e=>new Date(Date.now()+e),s=e=>r.cS.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,o=(e,t)=>{const n=Date.parse(e);return((e,t)=>Math.abs(i(t).getTime()-e)>=3e5)(n,t)?n-Date.now():t},a=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t};class c{async sign(e,t,n){if(!r.Kd.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:s,signer:o,signingRegion:c,signingName:l}=await(async e=>{const t=a("context",e.context),n=a("config",e.config),r=t.endpointV2?.properties?.authSchemes?.[0],i=a("signer",n.signer),s=await i(r),o=e?.signingRegion,c=e?.signingRegionSet,l=e?.signingName;return{config:n,signer:s,signingRegion:o,signingRegionSet:c,signingName:l}})(n);return await o.sign(e,{signingDate:i(s.systemClockOffset),signingRegion:c,signingService:l})}errorHandler(e){return t=>{const n=t.ServerTime??s(t.$response);if(n){const r=a("config",e.config),i=r.systemClockOffset;r.systemClockOffset=o(n,r.systemClockOffset),r.systemClockOffset!==i&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){const n=s(e);if(n){const e=a("config",t.config);e.systemClockOffset=o(n,e.systemClockOffset)}}}},3448:(e,t,n)=>{"use strict";n.d(t,{h:()=>L});var r=n(7503),i=n(8004),s=n(7135),o=n(2531),a=n(3197);const c="X-Amz-Date",l="X-Amz-Signature",u="X-Amz-Security-Token",d="authorization",p=c.toLowerCase(),h=[d,p,"date"],f=l.toLowerCase(),g="x-amz-content-sha256",m=u.toLowerCase(),y={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},b=/^proxy-/,v=/^sec-/,S="AWS4-HMAC-SHA256",w="AWS4-HMAC-SHA256-PAYLOAD",I="aws4_request",E={},k=[],C=(e,t,n)=>`${e}/${t}/${n}/${I}`,T=(e,t,n)=>{const r=new e(t);return r.update((0,a.Fo)(n)),r.digest()},P=({headers:e},t,n)=>{const r={};for(const i of Object.keys(e).sort()){if(null==e[i])continue;const s=i.toLowerCase();(s in y||t?.has(s)||b.test(s)||v.test(s))&&(!n||n&&!n.has(s))||(r[s]=e[i].trim().replace(/\s+/g," "))}return r};var A=n(3695);const _=async({headers:e,body:t},n)=>{for(const t of Object.keys(e))if(t.toLowerCase()===g)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(0,A.m)(t)){const e=new n;return e.update((0,a.Fo)(t)),(0,i.n)(await e.digest())}return"UNSIGNED-PAYLOAD"};class O{format(e){const t=[];for(const n of Object.keys(e)){const r=(0,a.ar)(n);t.push(Uint8Array.from([r.byteLength]),r,this.formatHeaderValue(e[n]))}const n=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let r=0;for(const e of t)n.set(e,r),r+=e.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":const s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(s.buffer);return o.set(e.value,3),o;case"string":const c=(0,a.ar)(e.value),l=new DataView(new ArrayBuffer(3+c.byteLength));l.setUint8(0,7),l.setUint16(1,c.byteLength,!1);const u=new Uint8Array(l.buffer);return u.set(c,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(R.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!M.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const p=new Uint8Array(17);return p[0]=9,p.set((0,i.a)(e.value.replace(/\-/g,"")),1),p}}}var x;!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(x||(x={}));const M=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class R{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let n=7,r=Math.abs(Math.round(e));n>-1&&r>0;n--,r/=256)t[n]=r;return e<0&&N(t),new R(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&N(e),parseInt((0,i.n)(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function N(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}var D=n(5479);const j=e=>{e=D.Kd.clone(e);for(const t of Object.keys(e.headers))h.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};class K{constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:o=!0}){this.headerFormatter=new O,this.service=r,this.sha256=i,this.uriEscapePath=o,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=(0,s.t)(n),this.credentialProvider=(0,s.t)(t)}async presign(e,t={}){const{signingDate:n=new Date,expiresIn:r=3600,unsignableHeaders:i,unhoistableHeaders:s,signableHeaders:o,signingRegion:a,signingService:d}=t,p=await this.credentialProvider();this.validateResolvedCredentials(p);const h=a??await this.regionProvider(),{longDate:f,shortDate:g}=$(n);if(r>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const m=C(g,h,d??this.service),y=((e,t={})=>{const{headers:n,query:r={}}=D.Kd.clone(e);for(const e of Object.keys(n)){const i=e.toLowerCase();"x-amz-"!==i.slice(0,6)||t.unhoistableHeaders?.has(i)||(r[e]=n[e],delete n[e])}return{...e,headers:n,query:r}})(j(e),{unhoistableHeaders:s});p.sessionToken&&(y.query[u]=p.sessionToken),y.query["X-Amz-Algorithm"]=S,y.query["X-Amz-Credential"]=`${p.accessKeyId}/${m}`,y.query[c]=f,y.query["X-Amz-Expires"]=r.toString(10);const b=P(y,i,o);return y.query["X-Amz-SignedHeaders"]=F(b),y.query[l]=await this.getSignature(f,m,this.getSigningKey(p,h,g,d),this.createCanonicalRequest(y,b,await _(e,this.sha256))),y}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:n=new Date,priorSignature:r,signingRegion:s,signingService:o}){const a=s??await this.regionProvider(),{shortDate:c,longDate:l}=$(n),u=C(c,a,o??this.service),d=await _({headers:{},body:t},this.sha256),p=new this.sha256;p.update(e);const h=(0,i.n)(await p.digest()),f=[w,l,u,r,h,d].join("\n");return this.signString(f,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:n,signingService:r}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:n,signingService:r,priorSignature:e.priorSignature}).then((t=>({message:e.message,signature:t})))}async signString(e,{signingDate:t=new Date,signingRegion:n,signingService:r}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const o=n??await this.regionProvider(),{shortDate:c}=$(t),l=new this.sha256(await this.getSigningKey(s,o,c,r));return l.update((0,a.Fo)(e)),(0,i.n)(await l.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:r,signingRegion:i,signingService:s}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=i??await this.regionProvider(),c=j(e),{longDate:l,shortDate:u}=$(t),h=C(u,a,s??this.service);c.headers[p]=l,o.sessionToken&&(c.headers[m]=o.sessionToken);const f=await _(c,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1})(g,c.headers)&&this.applyChecksum&&(c.headers[g]=f);const y=P(c,r,n),b=await this.getSignature(l,h,this.getSigningKey(o,a,u,s),this.createCanonicalRequest(c,y,f));return c.headers[d]=`${S} Credential=${o.accessKeyId}/${h}, SignedHeaders=${F(y)}, Signature=${b}`,c}createCanonicalRequest(e,t,n){const r=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(({query:e={}})=>{const t=[],n={};for(const r of Object.keys(e).sort()){if(r.toLowerCase()===f)continue;t.push(r);const i=e[r];"string"==typeof i?n[r]=`${(0,o.o)(r)}=${(0,o.o)(i)}`:Array.isArray(i)&&(n[r]=i.slice(0).reduce(((e,t)=>e.concat([`${(0,o.o)(r)}=${(0,o.o)(t)}`])),[]).sort().join("&"))}return t.map((e=>n[e])).filter((e=>e)).join("&")})(e)}\n${r.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${r.join(";")}\n${n}`}async createStringToSign(e,t,n){const r=new this.sha256;r.update((0,a.Fo)(n));const s=await r.digest();return`${S}\n${e}\n${t}\n${(0,i.n)(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const n of e.split("/"))0!==n?.length&&"."!==n&&(".."===n?t.pop():t.push(n));const n=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return(0,o.o)(n).replace(/%2F/g,"/")}return e}async getSignature(e,t,n,r){const s=await this.createStringToSign(e,t,r),o=new this.sha256(await n);return o.update((0,a.Fo)(s)),(0,i.n)(await o.digest())}getSigningKey(e,t,n,r){return(async(e,t,n,r,s)=>{const o=await T(e,t.secretAccessKey,t.accessKeyId),a=`${n}:${r}:${s}:${(0,i.n)(o)}:${t.sessionToken}`;if(a in E)return E[a];for(k.push(a);k.length>50;)delete E[k.shift()];let c=`AWS4${t.secretAccessKey}`;for(const t of[n,r,s,I])c=await T(e,c,t);return E[a]=c})(this.sha256,e,n,t,r||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const $=e=>{const t=(n=e,(e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e)(n).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var n;return{longDate:t,shortDate:t.slice(0,8)}},F=e=>Object.keys(e).sort().join(";"),L=e=>{let t;e.credentials&&(t=(0,r.K4)(e.credentials,r.OC,r.e)),t||(t=e.credentialDefaultProvider?(0,r.te)(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath:n=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:s}=e;let o;return o=e.signer?(0,r.te)(e.signer):e.regionInfoProvider?()=>(0,r.te)(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([r,i])=>{const{signingRegion:o,signingService:a}=r;e.signingRegion=e.signingRegion||o||i,e.signingName=e.signingName||a||e.serviceId;const c={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n};return new(e.signerConstructor||K)(c)})):async i=>{const o=(i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,r.te)(e.region)(),properties:{}},i)).signingRegion,a=i.signingName;e.signingRegion=e.signingRegion||o,e.signingName=e.signingName||a||e.serviceId;const c={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n};return new(e.signerConstructor||K)(c)},{...e,systemClockOffset:i,signingEscapePath:n,credentials:t,signer:o}}},8218:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=n(7385);const i=(e,t)=>(0,r.Px)(e,t).then((e=>t.utf8Encoder(e)))},1919:(e,t,n)=>{"use strict";n.d(t,{CG:()=>s,Y2:()=>i,cJ:()=>o});var r=n(8218);const i=(e,t)=>(0,r.w)(e,t).then((e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw"SyntaxError"===t?.name&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}return{}})),s=async(e,t)=>{const n=await i(e,t);return n.message=n.message??n.Message,n},o=(e,t)=>{const n=e=>{let t=e;return"number"==typeof t&&(t=t.toString()),t.indexOf(",")>=0&&(t=t.split(",")[0]),t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},r=(i=e.headers,Object.keys(i).find((e=>e.toLowerCase()==="x-amzn-errortype".toLowerCase())));var i;return void 0!==r?n(e.headers[r]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):void 0}},904:(e,t,n)=>{"use strict";n.d(t,{yG:()=>i,pi:()=>s,fromEnv:()=>o});var r=n(8112);const i="AWS_ACCESS_KEY_ID",s="AWS_SECRET_ACCESS_KEY",o=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");const t=process.env[i],n=process.env[s],o=process.env.AWS_SESSION_TOKEN,a=process.env.AWS_CREDENTIAL_EXPIRATION,c=process.env.AWS_CREDENTIAL_SCOPE,l=process.env.AWS_ACCOUNT_ID;if(t&&n)return{accessKeyId:t,secretAccessKey:n,...o&&{sessionToken:o},...a&&{expiration:new Date(a)},...c&&{credentialScope:c},...l&&{accountId:l}};throw new r.C1("Unable to find environment variable credentials.",{logger:e?.logger})}},8257:(e,t,n)=>{"use strict";n.d(t,{v6:()=>a});var r=n(904),i=n(8112),s=n(3054);let o=!1;const a=(e={})=>(0,i.Bj)((0,i.cy)((async()=>{if(e.profile??process.env[s.Ch])throw process.env[r.yG]&&process.env[r.pi]&&!o&&((e.logger?.warn&&"NoOpLogger"!==e.logger?.constructor?.name?e.logger.warn:console.warn)("@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:\n    Multiple credential sources detected: \n    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.\n    This SDK will proceed with the AWS_PROFILE value.\n    \n    However, a future version may change this behavior to prefer the ENV static credentials.\n    Please ensure that your environment only sets either the AWS_PROFILE or the\n    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.\n"),o=!0),new i.C1("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,r.fromEnv)(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");const{ssoStartUrl:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:o,ssoSession:a}=e;if(!(t||r||s||o||a))throw new i.C1("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});const{fromSSO:c}=await n.e(791).then(n.bind(n,9791));return c(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");const{fromIni:t}=await n.e(789).then(n.bind(n,2789));return t(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");const{fromProcess:t}=await n.e(109).then(n.bind(n,5109));return t(e)()}),(async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");const{fromTokenFile:t}=await n.e(819).then(n.bind(n,7819));return t(e)()}),(async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await(async e=>{const{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:o}=await n.e(897).then(n.bind(n,7897));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");const{fromHttp:t}=await n.e(610).then(n.bind(n,3610));return(0,i.cy)(t(e),s(e))}return process.env.AWS_EC2_METADATA_DISABLED?async()=>{throw new i.C1("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))})(e))())),(async()=>{throw new i.C1("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})})),l,c),c=e=>void 0!==e?.expiration,l=e=>void 0!==e?.expiration&&e.expiration.getTime()-Date.now()<3e5},1095:(e,t,n)=>{"use strict";n.d(t,{OV:()=>i,TC:()=>o});var r=n(5479);function i(e){return e}const s={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},o=e=>({applyToStack:t=>{t.add((e=>t=>async n=>{if(!r.Kd.isInstance(n.request))return t(n);const{request:i}=n,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!i.headers[":authority"])delete i.headers.host,i.headers[":authority"]=i.hostname+(i.port?":"+i.port:"");else if(!i.headers.host){let e=i.hostname;null!=i.port&&(e+=`:${i.port}`),i.headers.host=e}return t(n)})(e),s)}})},9359:(e,t,n)=>{"use strict";n.d(t,{Y7:()=>i});const r={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},i=e=>({applyToStack:e=>{e.add(((e,t)=>async n=>{try{const r=await e(n),{clientName:i,commandName:s,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=a,u=c??t.inputFilterSensitiveLog,d=l??t.outputFilterSensitiveLog,{$metadata:p,...h}=r.output;return o?.info?.({clientName:i,commandName:s,input:u(n.input),output:d(h),metadata:p}),r}catch(e){const{clientName:r,commandName:i,logger:s,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:a}=o,c=a??t.inputFilterSensitiveLog;throw s?.error?.({clientName:r,commandName:i,input:c(n.input),error:e,metadata:e.$metadata}),e}}),r)}})},8377:(e,t,n)=>{"use strict";n.d(t,{n4:()=>o});var r=n(5479);const i="X-Amzn-Trace-Id",s={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},o=e=>({applyToStack:t=>{t.add((e=>t=>async n=>{const{request:s}=n;if(!r.Kd.isInstance(s)||"node"!==e.runtime||s.headers.hasOwnProperty(i))return t(n);const o=process.env.AWS_LAMBDA_FUNCTION_NAME,a=process.env._X_AMZN_TRACE_ID,c=e=>"string"==typeof e&&e.length>0;return c(o)&&c(a)&&(s.headers[i]=a),t({...n,request:s})})(e),s)}})},499:(e,t,n)=>{"use strict";function r(e){return{...e,customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent}}n.d(t,{sM:()=>p,Dc:()=>r});var i=n(6652),s=n(5479);const o="user-agent",a="x-amz-user-agent",c=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,l=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,u=e=>{const t=e[0].split("/").map((e=>e.replace(c,"-"))).join("/"),n=e[1]?.replace(l,"-"),r=t.indexOf("/"),i=t.substring(0,r);let s=t.substring(r+1);return"api"===i&&(s=s.toLowerCase()),[i,s,n].filter((e=>e&&e.length>0)).reduce(((e,t,n)=>{switch(n){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}}),"")},d={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},p=e=>({applyToStack:t=>{var n;t.add((n=e,(e,t)=>async r=>{const{request:c}=r;if(!s.Kd.isInstance(c))return e(r);const{headers:l}=c,d=t?.userAgent?.map(u)||[],p=(await n.defaultUserAgentProvider()).map(u),h=n?.customUserAgent?.map(u)||[],f=(0,i.vL)(),g=(f?[f]:[]).concat([...p,...d,...h]).join(" "),m=[...p.filter((e=>e.startsWith("aws-sdk-"))),...h].join(" ");return"browser"!==n.runtime?(m&&(l[a]=l[a]?`${l[o]} ${m}`:m),l[o]=g):l[a]=g,e({...r,request:c})}),d)}})},4547:(e,t,n)=>{"use strict";n.d(t,{Rq:()=>r,$3:()=>i});const r=e=>{let t=async()=>{if(void 0===e.region)throw new Error("Region is missing from runtimeConfig");const t=e.region;return"string"==typeof t?t:t()};return{setRegion(e){t=e},region:()=>t}},i=e=>({region:e.region()})},6652:(e,t,n)=>{"use strict";n.d(t,{UF:()=>a,vL:()=>o});var r=n(3875);const i=(e,t=!1)=>{if(t){for(const t of e.split("."))if(!i(t))return!1;return!0}return!(!(0,r.X8)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,r.oX)(e))};let s=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}');const o=()=>"",a={isVirtualHostableS3Bucket:i,parseArn:e=>{const t=e.split(":");if(t.length<6)return null;const[n,r,i,s,o,...a]=t;return"arn"!==n||""===r||""===i||""===a[0]?null:{partition:r,service:i,region:s,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}},partition:e=>{const{partitions:t}=s;for(const n of t){const{regions:t,outputs:r}=n;for(const[n,i]of Object.entries(t))if(n===e)return{...r,...i}}for(const n of t){const{regionRegex:t,outputs:r}=n;if(new RegExp(t).test(e))return{...r}}const n=t.find((e=>"aws"===e.id));if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}}};r.mw.aws=a},3058:(e,t,n)=>{"use strict";n.d(t,{mJ:()=>o});var r=n(9987),i=n(857);const s=require("process"),o=({serviceId:e,clientVersion:t})=>{const n=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,i.platform)()}`,(0,i.release)()],["lang/js"],["md/nodejs",`${s.versions.node}`]];e&&n.push([`api/${e}`,t]),s.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${s.env.AWS_EXECUTION_ENV}`]);const o=(0,r.Z)({environmentVariableSelector:e=>e.AWS_SDK_UA_APP_ID,configFileSelector:e=>e["sdk-ua-app-id"],default:void 0})();let a;return async()=>{if(!a){const e=await o;a=e?[...n,[`app/${e}`]]:[...n]}return a}}},7169:(e,t,n)=>{"use strict";const r=n(2017);r.code='require("ajv/dist/runtime/equal").default',t.A=r},1487:(e,t,n)=>{"use strict";n.d(t,{zH:()=>c,GG:()=>a,e$:()=>s,Ko:()=>o,TD:()=>d});const r=(e,t,n)=>{if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var i;!function(e){e.ENV="env",e.CONFIG="shared config entry"}(i||(i={}));const s={environmentVariableSelector:e=>r(e,"AWS_USE_DUALSTACK_ENDPOINT",i.ENV),configFileSelector:e=>r(e,"use_dualstack_endpoint",i.CONFIG),default:!1},o={environmentVariableSelector:e=>r(e,"AWS_USE_FIPS_ENDPOINT",i.ENV),configFileSelector:e=>r(e,"use_fips_endpoint",i.CONFIG),default:!1};n(7135);const a={environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw new Error("Region is missing")}},c={preferredFile:"credentials"},l=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),u=e=>l(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,d=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"==typeof t)return u(t);const e=await t();return u(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!l(e)||("function"!=typeof n?Promise.resolve(!!n):n())}}}},7503:(e,t,n)=>{"use strict";n.d(t,{h$:()=>d,mR:()=>p,e:()=>f,wB:()=>s,lW:()=>u,OC:()=>h,K4:()=>g,te:()=>m,lI:()=>b}),n(7523);var r=n(7135);const i={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:n(9389).ko.name},s=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:s=>{s.addRelativeTo(((e,t)=>(n,i)=>async s=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,i,s.input)),a=function(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}(e.httpAuthSchemes),c=(0,r.u)(i),l=[];for(const n of o){const r=a.get(n.schemeId);if(!r){l.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}const s=r.identityProvider(await t.identityProviderConfigProvider(e));if(!s){l.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:o={},signingProperties:u={}}=n.propertiesExtractor?.(e,i)||{};n.identityProperties=Object.assign(n.identityProperties||{},o),n.signingProperties=Object.assign(n.signingProperties||{},u),c.selectedHttpAuthScheme={httpAuthOption:n,identity:await s(n.identityProperties),signer:r.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(l.join("\n"));return n(s)})(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),i)}});n(1208).Ou.name;var o=n(5479);const a=e=>e=>{throw e},c=(e,t)=>{},l={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:n(4171).j7.name},u=e=>({applyToStack:e=>{e.addRelativeTo(((e,t)=>async n=>{if(!o.Kd.isInstance(n.request))return e(n);const i=(0,r.u)(t).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:s={}},identity:l,signer:u}=i,d=await e({...n,request:await u.sign(n.request,l,s)}).catch((u.errorHandler||a)(s));return(u.successHandler||c)(d.response,s),d}),l)}});class d{constructor(e){this.authSchemes=new Map;for(const[t,n]of Object.entries(e))void 0!==n&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}class p{async sign(e,t,n){return e}}const h=e=>f(e)&&e.expiration.getTime()-Date.now()<3e5;const f=e=>void 0!==e.expiration,g=(e,t,n)=>{if(void 0===e)return;const r="function"!=typeof e?async()=>Promise.resolve(e):e;let i,s,o,a=!1;const c=async e=>{s||(s=r(e));try{i=await s,o=!0,a=!1}finally{s=void 0}return i};return void 0===t?async e=>(o&&!e?.forceRefresh||(i=await c(e)),i):async e=>(o&&!e?.forceRefresh||(i=await c(e)),a?i:n(i)?t(i)?(await c(e),i):i:(a=!0,i))},m=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t};var y=n(7385);function b(e,t){return new v(e,t)}class v{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:t="https",port:n,path:r}=await this.context.endpoint();this.path=r;for(const e of this.resolvePathStack)e(this.path);return new o.Kd({protocol:t,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push((t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e})),this}p(e,t,n,r){return this.resolvePathStack.push((i=>{this.path=(0,y.un)(i,this.input,e,t,n,r)})),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}},1701:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var r=n(9290),i=n(3197),s=n(181),o=n(6982);class a{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update((0,i.Fo)(c(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,o.createHmac)(this.algorithmIdentifier,c(this.secret)):(0,o.createHash)(this.algorithmIdentifier)}}function c(e,t){return s.Buffer.isBuffer(e)?e:"string"==typeof e?(0,r.s)(e,t):ArrayBuffer.isView(e)?(0,r.Q)(e.buffer,e.byteOffset,e.byteLength):(0,r.Q)(e)}},3695:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});const r=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},649:(e,t,n)=>{"use strict";n.d(t,{vK:()=>o});var r=n(5479);const i="content-length",s={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},o=e=>({applyToStack:t=>{var n;t.add((n=e.bodyLengthChecker,e=>async t=>{const s=t.request;if(r.Kd.isInstance(s)){const{body:e,headers:t}=s;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(i))try{const t=n(e);s.headers={...s.headers,[i]:String(t)}}catch(e){}}return e({...t,request:s})}),s)}})},9389:(e,t,n)=>{"use strict";n.d(t,{ko:()=>m,rD:()=>y,Co:()=>b});const r=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,i=/(\d+\.){3}\d+/,s=/\.\./,o=(e,t,n)=>{const r=async()=>{const r=n[e]??n[t];return"function"==typeof r?r():r};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{const e=await r();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:n,port:r,path:i}=e;return`${t}//${n}${r?":"+r:""}${i}`}}return e}:r};var a=n(9987),c=n(3054);const l="AWS_ENDPOINT_URL",u="endpoint_url";var d=n(2641);const p=e=>"object"==typeof e?"url"in e?(0,d.D)(e.url):e:(0,d.D)(e),h=async(e,t,n)=>{const a={},c=t?.getEndpointParameterInstructions?.()||{};for(const[t,r]of Object.entries(c))switch(r.type){case"staticContextParams":a[t]=r.value;break;case"contextParams":a[t]=e[r.name];break;case"clientContextParams":case"builtInParams":a[t]=await o(r.name,t,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(r))}return 0===Object.keys(c).length&&Object.assign(a,n),"s3"===String(n.serviceId).toLowerCase()&&await(async e=>{const t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(e=>{const[t,n,r,,,i]=e.split(":"),s="arn"===t&&e.split(":").length>=6,o=Boolean(s&&n&&r&&i);if(s&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o})(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else n=t,(!r.test(n)||i.test(n)||s.test(n)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);var n;return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(a),a};var f=n(7135);const g=({config:e,instructions:t})=>(n,r)=>async i=>{const s=await(async(e,t,n,r)=>{if(!n.endpoint){const e=await(async e=>(0,a.Z)((e=>({environmentVariableSelector:t=>{const n=e.split(" ").map((e=>e.toUpperCase()));return t[[l,...n].join("_")]||t[l]||void 0},configFileSelector:(t,n)=>{if(n&&t.services){const r=n[["services",t.services].join(c.QD)];if(r){const t=r[[e.split(" ").map((e=>e.toLowerCase())).join("_"),u].join(c.QD)];if(t)return t}}const r=t[u];if(r)return r},default:void 0}))(e))())(n.serviceId||"");e&&(n.endpoint=()=>Promise.resolve(p(e)))}const i=await h(e,t,n);if("function"!=typeof n.endpointProvider)throw new Error("config.endpointProvider is not set.");return n.endpointProvider(i,r)})(i.input,{getEndpointParameterInstructions:()=>t},{...e},r);r.endpointV2=s,r.authSchemes=s.properties?.authSchemes;const o=r.authSchemes?.[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const e=(0,f.u)(r),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...i})},m={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:n(1208).Ou.name},y=(e,t)=>({applyToStack:n=>{n.addRelativeTo(g({config:e,instructions:t}),m)}}),b=e=>{const t=e.tls??!0,{endpoint:n}=e,r=null!=n?async()=>p(await(0,f.t)(n)()):void 0,i=!!n;return{...e,endpoint:r,tls:t,isCustomEndpoint:i,useDualstackEndpoint:(0,f.t)(e.useDualstackEndpoint??!1),useFipsEndpoint:(0,f.t)(e.useFipsEndpoint??!1)}}},4171:(e,t,n)=>{"use strict";n.d(t,{qs:()=>y,kN:()=>v,ey:()=>T,$z:()=>b,j7:()=>C});var r=n(3323),i=n(5479),s=n(4542),o=n(6982),a=n.n(o);const c={randomUUID:a().randomUUID},l=new Uint8Array(256);let u=l.length;function d(){return u>l.length-16&&(a().randomFillSync(l),u=0),l.slice(u,u+=16)}const p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));const h=function(e,t,n){if(c.randomUUID&&!t&&!e)return c.randomUUID();const r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]}(r)};var f=n(7135);const g="AWS_MAX_ATTEMPTS",m="max_attempts",y={environmentVariableSelector:e=>{const t=e[g];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${g} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[m];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${m} mast be a number, got "${t}"`);return n},default:r.Gz},b=e=>{const{retryStrategy:t}=e,n=(0,f.t)(e.maxAttempts??r.Gz);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await(0,f.t)(e.retryMode)()===r.cm.ADAPTIVE?new r.Y(n):new r.ru(n))}},v={environmentVariableSelector:e=>e.AWS_RETRY_MODE,configFileSelector:e=>e.retry_mode,default:r.L0};var S=n(7385),w=n(2203);const I=e=>e?.body instanceof w.Readable||"undefined"!=typeof ReadableStream&&e?.body instanceof ReadableStream,E=e=>{const t={error:e,errorType:k(e)},n=P(e.$response);return n&&(t.retryAfterHint=n),t},k=e=>(0,s.Qb)(e)?"THROTTLING":(0,s.bV)(e)?"TRANSIENT":(0,s.GQ)(e)?"SERVER_ERROR":"CLIENT_ERROR",C={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},T=e=>({applyToStack:t=>{t.add((e=>(t,n)=>async s=>{let o=await e.retryStrategy();const a=await e.maxAttempts();if(!(e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess)(o))return o?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,s);{let e=await o.acquireInitialRetryToken(n.partition_id),l=new Error,u=0,d=0;const{request:p}=s,f=i.Kd.isInstance(p);for(f&&(p.headers[r.l5]=h());;)try{f&&(p.headers[r.ok]=`attempt=${u+1}; max=${a}`);const{response:n,output:i}=await t(s);return o.recordSuccess(e),i.$metadata.attempts=u+1,i.$metadata.totalRetryDelay=d,{response:n,output:i}}catch(t){const r=E(t);if(l=(c=t)instanceof Error?c:c instanceof Object?Object.assign(new Error,c):"string"==typeof c?new Error(c):new Error(`AWS SDK error wrapper for ${c}`),f&&I(p))throw(n.logger instanceof S.N4?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),l;try{e=await o.refreshRetryTokenForRetry(e,r)}catch(e){throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=u+1,l.$metadata.totalRetryDelay=d,l}u=e.getRetryCount();const i=e.getRetryDelay();d+=i,await new Promise((e=>setTimeout(e,i)))}}var c})(e),C)}}),P=e=>{if(!i.cS.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(1e3*r)}},1208:(e,t,n)=>{"use strict";n.d(t,{TM:()=>a,Ou:()=>o});const r=(e,t)=>n=>async r=>{const{response:i}=await n(r);try{return{response:i,output:await t(i,e)}}catch(e){if(Object.defineProperty(e,"$response",{value:i}),!("$metadata"in e)){const t="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";e.message+="\n  "+t,void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)}throw e}},i=(e,t)=>(n,r)=>async i=>{const s=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");const o=await t(i.input,{...e,endpoint:s});return n({...i,request:o})},s={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},o={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function a(e,t,n){return{applyToStack:a=>{a.add(r(e,n),s),a.add(i(e,t),o)}}}},9987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8112);function i(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch(t){return e}}var s=n(3054);const o=({environmentVariableSelector:e,configFileSelector:t,default:n},o={})=>{return(0,r.Bj)((0,r.cy)((a=e,async()=>{try{const e=a(process.env);if(void 0===e)throw new Error;return e}catch(e){throw new r.C1(e.message||`Not found in ENV: ${i(a.toString())}`,{logger:undefined})}}),((e,{preferredFile:t="config",...n}={})=>async()=>{const o=(0,s.Bz)(n),{configFile:a,credentialsFile:c}=await(0,s.p6)(n),l=c[o]||{},u=a[o]||{},d="config"===t?{...l,...u}:{...u,...l};try{const n=e(d,"config"===t?a:c);if(void 0===n)throw new Error;return n}catch(t){throw new r.C1(t.message||`Not found in config files w/ profile [${o}]: ${i(e.toString())}`,{logger:n.logger})}})(t,o),(e=>"function"==typeof e?async()=>await e():(0,r.VR)(e))(n)));var a}},4029:(e,t,n)=>{"use strict";n.d(t,{$c:()=>u,kv:()=>p});var r=n(5479),i=n(2531),s=n(8611);const o=require("https"),a=["ECONNRESET","EPIPE","ETIMEDOUT"],c=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=Array.isArray(r)?r.join(","):r}return t};var l=n(2203);class u{static create(e){return"function"==typeof e?.handle?e:new u(e)}static checkSocketUsage(e,t,n=console){const{sockets:r,requests:i,maxSockets:s}=e;if("number"!=typeof s||s===1/0)return t;if(Date.now()-15e3<t)return t;if(r&&i)for(const e in r){const t=r[e]?.length??0,o=i[e]?.length??0;if(t>=s&&o>=2*s)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${o} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise(((t,n)=>{"function"==typeof e?e().then((e=>{t(this.resolveDefaultConfig(e))})).catch(n):t(this.resolveDefaultConfig(e))}))}resolveDefaultConfig(e){const{requestTimeout:t,connectionTimeout:n,socketTimeout:r,httpAgent:i,httpsAgent:a}=e||{},c=!0;return{connectionTimeout:n,requestTimeout:t??r,httpAgent:i instanceof s.Agent||"function"==typeof i?.destroy?i:new s.Agent({keepAlive:c,maxSockets:50,...i}),httpsAgent:a instanceof o.Agent||"function"==typeof a?.destroy?a:new o.Agent({keepAlive:c,maxSockets:50,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){let n;return this.config||(this.config=await this.configProvider),new Promise(((d,p)=>{let h;const f=async e=>{await h,clearTimeout(n),p(e)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",void f(e)}const g="https:"===e.protocol,m=g?this.config.httpsAgent:this.config.httpAgent;n=setTimeout((()=>{this.socketWarningTimestamp=u.checkSocketUsage(m,this.socketWarningTimestamp,this.config.logger)}),this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));const y=function(e){const t=[];for(let n of Object.keys(e).sort()){const r=e[n];if(n=(0,i.o)(n),Array.isArray(r))for(let e=0,s=r.length;e<s;e++)t.push(`${n}=${(0,i.o)(r[e])}`);else{let e=n;(r||"string"==typeof r)&&(e+=`=${(0,i.o)(r)}`),t.push(e)}}return t.join("&")}(e.query||{});let b;null==e.username&&null==e.password||(b=`${e.username??""}:${e.password??""}`);let v=e.path;y&&(v+=`?${y}`),e.fragment&&(v+=`#${e.fragment}`);const S={headers:e.headers,host:e.hostname,method:e.method,path:v,port:e.port,agent:m,auth:b},w=(g?o.request:s.request)(S,(e=>{(async e=>{await h,clearTimeout(n),d(e)})({response:new r.cS({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:c(e.headers),body:e})})}));if(w.on("error",(e=>{a.includes(e.code)?f(Object.assign(e,{name:"TimeoutError"})):f(e)})),((e,t,n=0)=>{if(!n)return;const r=setTimeout((()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${n} ms`),{name:"TimeoutError"}))}),n);e.on("socket",(e=>{e.connecting?e.on("connect",(()=>{clearTimeout(r)})):clearTimeout(r)}))})(w,f,this.config.connectionTimeout),((e,t,n=0)=>{e.setTimeout(n,(()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${n} ms`),{name:"TimeoutError"}))}))})(w,f,this.config.requestTimeout),t){const e=()=>{w.destroy();const e=new Error("Request aborted");e.name="AbortError",f(e)};if("function"==typeof t.addEventListener){const n=t;n.addEventListener("abort",e,{once:!0}),w.once("close",(()=>n.removeEventListener("abort",e)))}else t.onabort=e}const I=S.agent;"object"==typeof I&&"keepAlive"in I&&((e,{keepAlive:t,keepAliveMsecs:n})=>{!0===t&&e.on("socket",(e=>{e.setKeepAlive(t,n||0)}))})(w,{keepAlive:I.keepAlive,keepAliveMsecs:I.keepAliveMsecs}),h=async function(e,t,n=1e3){const r=t.headers??{},i=r.Expect||r.expect;let s=-1,o=!1;"100-continue"===i&&await Promise.race([new Promise((e=>{s=Number(setTimeout(e,Math.max(1e3,n)))})),new Promise((t=>{e.on("continue",(()=>{clearTimeout(s),t()})),e.on("error",(()=>{o=!0,clearTimeout(s),t()}))}))]),o||function(e,t){if(t instanceof l.Readable)t.pipe(e);else{if(t){if(Buffer.isBuffer(t)||"string"==typeof t)return void e.end(t);const n=t;return"object"==typeof n&&n.buffer&&"number"==typeof n.byteOffset&&"number"==typeof n.byteLength?void e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength)):void e.end(Buffer.from(t))}e.end()}}(e,t.body)}(w,e,this.config.requestTimeout).catch((e=>(clearTimeout(n),p(e))))}))}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((n=>({...n,[e]:t})))}httpHandlerConfigs(){return this.config??{}}}require("http2"),Symbol.iterator;class d extends l.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,t,n){this.bufferedBytes.push(e),n()}}const p=e=>h(e)?async function(e){const t=[],n=e.getReader();let r=!1,i=0;for(;!r;){const{done:e,value:s}=await n.read();s&&(t.push(s),i+=s.length),r=e}const s=new Uint8Array(i);let o=0;for(const e of t)s.set(e,o),o+=e.length;return s}(e):new Promise(((t,n)=>{const r=new d;e.pipe(r),e.on("error",(e=>{r.end(),n(e)})),r.on("error",n),r.on("finish",(function(){const e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))})),h=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream},8112:(e,t,n)=>{"use strict";n.d(t,{C1:()=>i,mZ:()=>r,Jh:()=>s,cy:()=>o,VR:()=>a,Bj:()=>c});class r extends Error{constructor(e,t=!0){let n,i=!0;"boolean"==typeof t?(n=void 0,i=t):null!=t&&"object"==typeof t&&(n=t.logger,i=t.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=i,Object.setPrototypeOf(this,r.prototype),n?.debug?.(`@smithy/property-provider ${i?"->":"(!)"} ${e}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class i extends r{constructor(e,t=!0){super(e,t),this.name="CredentialsProviderError",Object.setPrototypeOf(this,i.prototype)}}class s extends r{constructor(e,t=!0){super(e,t),this.name="TokenProviderError",Object.setPrototypeOf(this,s.prototype)}}const o=(...e)=>async()=>{if(0===e.length)throw new r("No providers in chain");let t;for(const n of e)try{return await n()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t},a=e=>()=>Promise.resolve(e),c=(e,t,n)=>{let r,i,s,o=!1;const a=async()=>{i||(i=e());try{r=await i,s=!0,o=!1}finally{i=void 0}return r};return void 0===t?async e=>(s&&!e?.forceRefresh||(r=await a()),r):async e=>(s&&!e?.forceRefresh||(r=await a()),o?r:n&&!n(r)?(o=!0,r):t(r)?(await a(),r):r)}},5479:(e,t,n)=>{"use strict";n.d(t,{Kd:()=>s,cS:()=>o,eS:()=>r,jt:()=>i});const r=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,n){t.updateHttpClientConfig(e,n)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}},i=e=>({httpHandler:e.httpHandler()});n(7523);class s{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new s({...e,headers:{...e.headers}});var n;return t.query&&(t.query=(n=t.query,Object.keys(n).reduce(((e,t)=>{const r=n[t];return{...e,[t]:Array.isArray(r)?[...r]:r}}),{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return s.clone(this)}}class o{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}},4542:(e,t,n)=>{"use strict";n.d(t,{h5:()=>l,S0:()=>c,GQ:()=>p,Qb:()=>u,bV:()=>d});const r=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],i=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],s=["TimeoutError","RequestTimeout","RequestTimeoutException"],o=[500,502,503,504],a=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],c=e=>void 0!==e.$retryable,l=e=>r.includes(e.name),u=e=>429===e.$metadata?.httpStatusCode||i.includes(e.name)||1==e.$retryable?.throttling,d=e=>(e=>e.$metadata?.clockSkewCorrected)(e)||s.includes(e.name)||a.includes(e?.code||"")||o.includes(e.$metadata?.httpStatusCode||0),p=e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!d(e)}return!1}},3054:(e,t,n)=>{"use strict";n.d(t,{QD:()=>C,Ch:()=>a,Bz:()=>c,C9:()=>u,vf:()=>h,p6:()=>T,qw:()=>_,YU:()=>O});var r=n(857),i=n(6928);const s={},o=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:o=`C:${i.sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${o}${n}`;const a=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return s[a]||(s[a]=(0,r.homedir)()),s[a]},a="AWS_PROFILE",c=e=>e.profile||process.env[a]||"default";var l=n(6982);const u=e=>{const t=(0,l.createHash)("sha1").update(e).digest("hex");return(0,i.join)(o(),".aws","sso","cache",`${t}.json`)};var d=n(9896);const{readFile:p}=d.promises,h=async e=>{const t=u(e),n=await p(t,"utf8");return JSON.parse(n)};var f=n(7523);const g=e=>Object.entries(e).filter((([e])=>{const t=e.indexOf(C);return-1!==t&&Object.values(f.Ip).includes(e.substring(0,t))})).reduce(((e,[t,n])=>{const r=t.indexOf(C);return e[t.substring(0,r)===f.Ip.PROFILE?t.substring(r+1):t]=n,e}),{...e.default&&{default:e.default}}),m=()=>process.env.AWS_CONFIG_FILE||(0,i.join)(o(),".aws","config"),y=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,i.join)(o(),".aws","credentials"),b=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,v=["__proto__","profile __proto__"],S=e=>{const t={};let n,r;for(const i of e.split(/\r?\n/)){const e=i.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){n=void 0,r=void 0;const t=e.substring(1,e.length-1),i=b.exec(t);if(i){const[,e,,t]=i;Object.values(f.Ip).includes(e)&&(n=[e,t].join(C))}else n=t;if(v.includes(t))throw new Error(`Found invalid profile name "${t}"`)}else if(n){const s=e.indexOf("=");if(![0,-1].includes(s)){const[o,a]=[e.substring(0,s).trim(),e.substring(s+1).trim()];if(""===a)r=o;else{r&&i.trimStart()===i&&(r=void 0),t[n]=t[n]||{};const e=r?[r,o].join(C):o;t[n][e]=a}}}}return t},{readFile:w}=d.promises,I={},E=(e,t)=>(I[e]&&!t?.ignoreCache||(I[e]=w(e,"utf8")),I[e]),k=()=>({}),C=".",T=async(e={})=>{const{filepath:t=y(),configFilepath:n=m()}=e,r=o();let s=t;t.startsWith("~/")&&(s=(0,i.join)(r,t.slice(2)));let a=n;n.startsWith("~/")&&(a=(0,i.join)(r,n.slice(2)));const c=await Promise.all([E(a,{ignoreCache:e.ignoreCache}).then(S).then(g).catch(k),E(s,{ignoreCache:e.ignoreCache}).then(S).catch(k)]);return{configFile:c[0],credentialsFile:c[1]}},P=e=>Object.entries(e).filter((([e])=>e.startsWith(f.Ip.SSO_SESSION+C))).reduce(((e,[t,n])=>({...e,[t.substring(t.indexOf(C)+1)]:n})),{}),A=()=>({}),_=async(e={})=>E(e.configFilepath??m()).then(S).then(P).catch(A),O=async e=>{const t=await T(e);return((...e)=>{const t={};for(const n of e)for(const[e,r]of Object.entries(n))void 0!==t[e]?Object.assign(t[e],r):t[e]=r;return t})(t.configFile,t.credentialsFile)}},7385:(e,t,n)=>{"use strict";n.d(t,{Kj:()=>l,uB:()=>h,N4:()=>r,$H:()=>g,TJ:()=>H,Ss:()=>fe,Px:()=>d,Mw:()=>W,I9:()=>Y,ET:()=>b,Y0:()=>w,Xk:()=>I,lK:()=>E,$6:()=>ie,xA:()=>ne,rm:()=>se,JW:()=>T,lT:()=>J,Tj:()=>ae,EI:()=>N,t_:()=>j,uv:()=>re,un:()=>he,xW:()=>A,s:()=>ce,jr:()=>z});class r{trace(){}debug(){}info(){}warn(){}error(){}}const i=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const e of t)n.push(e);return n},s=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,o=()=>{let e=[],t=[],n=!1;const r=new Set,l=n=>(e.forEach((e=>{n.add(e.middleware,{...e})})),t.forEach((e=>{n.addRelativeTo(e.middleware,{...e})})),n.identifyOnResolve?.(p.identifyOnResolve()),n),u=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...u(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...u(e))})),t},d=(n=!1)=>{const r=[],o=[],l={};var d;return e.forEach((e=>{const t={...e,before:[],after:[]};for(const e of i(t.name,t.aliases))l[e]=t;r.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};for(const e of i(t.name,t.aliases))l[e]=t;o.push(t)})),o.forEach((e=>{if(e.toMiddleware){const t=l[e.toMiddleware];if(void 0===t){if(n)return;throw new Error(`${e.toMiddleware} is not found when adding ${s(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(d=r,d.sort(((e,t)=>a[t.step]-a[e.step]||c[t.priority||"normal"]-c[e.priority||"normal"]))).map(u).reduce(((e,t)=>(e.push(...t),e)),[])},p={add:(t,n={})=>{const{name:o,override:a,aliases:c}=n,l={step:"initialize",priority:"normal",middleware:t,...n},u=i(o,c);if(u.length>0){if(u.some((e=>r.has(e)))){if(!a)throw new Error(`Duplicate middleware name '${s(o,c)}'`);for(const t of u){const n=e.findIndex((e=>e.name===t||e.aliases?.some((e=>e===t))));if(-1===n)continue;const r=e[n];if(r.step!==l.step||l.priority!==r.priority)throw new Error(`"${s(r.name,r.aliases)}" middleware with ${r.priority} priority in ${r.step} step cannot be overridden by "${s(o,c)}" middleware with ${l.priority} priority in ${l.step} step.`);e.splice(n,1)}}for(const e of u)r.add(e)}e.push(l)},addRelativeTo:(e,n)=>{const{name:o,override:a,aliases:c}=n,l={middleware:e,...n},u=i(o,c);if(u.length>0){if(u.some((e=>r.has(e)))){if(!a)throw new Error(`Duplicate middleware name '${s(o,c)}'`);for(const e of u){const n=t.findIndex((t=>t.name===e||t.aliases?.some((t=>t===e))));if(-1===n)continue;const r=t[n];if(r.toMiddleware!==l.toMiddleware||r.relation!==l.relation)throw new Error(`"${s(r.name,r.aliases)}" middleware ${r.relation} "${r.toMiddleware}" middleware cannot be overridden by "${s(o,c)}" middleware ${l.relation} "${l.toMiddleware}" middleware.`);t.splice(n,1)}}for(const e of u)r.add(e)}t.push(l)},clone:()=>l(o()),use:e=>{e.applyToStack(p)},remove:n=>"string"==typeof n?(n=>{let s=!1;const o=e=>{const t=i(e.name,e.aliases);if(t.includes(n)){s=!0;for(const e of t)r.delete(e);return!1}return!0};return e=e.filter(o),t=t.filter(o),s})(n):(n=>{let s=!1;const o=e=>{if(e.middleware===n){s=!0;for(const t of i(e.name,e.aliases))r.delete(t);return!1}return!0};return e=e.filter(o),t=t.filter(o),s})(n),removeByTag:n=>{let s=!1;const o=e=>{const{tags:t,name:o,aliases:a}=e;if(t&&t.includes(n)){const e=i(o,a);for(const t of e)r.delete(t);return s=!0,!1}return!0};return e=e.filter(o),t=t.filter(o),s},concat:e=>{const t=l(o());return t.use(e),t.identifyOnResolve(n||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:l,identify:()=>d(!0).map((e=>{const t=e.step??e.relation+" "+e.toMiddleware;return s(e.name,e.aliases)+" - "+t})),identifyOnResolve:e=>("boolean"==typeof e&&(n=e),n),resolve:(e,t)=>{for(const n of d().map((e=>e.middleware)).reverse())e=n(e,t);return n&&console.log(p.identify()),e}};return p},a={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},c={high:3,normal:2,low:1};class l{constructor(e){this.middlewareStack=o(),this.config=e}send(e,t,n){const r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,s=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return s(e).then((e=>e.output));s(e).then((e=>i(null,e.output)),(e=>i(e))).catch((()=>{}))}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}var u=n(7509);const d=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return u.Mu.mutate(e);if(!e)return u.Mu.mutate(new Uint8Array);const n=t.streamCollector(e);return u.Mu.mutate(await n)};var p=n(7523);class h{constructor(){this.middlewareStack=o()}static classBuilder(){return new f}resolveMiddlewareWithContext(e,t,n,{middlewareFn:r,clientName:i,commandName:s,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,smithyContext:c,additionalContext:l,CommandCtor:u}){for(const i of r.bind(this)(u,e,t,n))this.middlewareStack.use(i);const d=e.concat(this.middlewareStack),{logger:h}=t,f={logger:h,clientName:i,commandName:s,inputFilterSensitiveLog:o,outputFilterSensitiveLog:a,[p.Vf]:{commandInstance:this,...c},...l},{requestHandler:g}=t;return d.resolve((e=>g.handle(e.request,n||{})),f)}}class f{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let t;return t=class extends h{static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=t??{},e._init(this)}resolveMiddleware(n,r,i){return this.resolveMiddlewareWithContext(n,r,i,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const g="***SensitiveInformation***",m=e=>{if(null!=e){if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&x.warn(O(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},y=Math.ceil(2**127*(2-2**-23)),b=e=>v(e,32),v=(e,t)=>{const n=(e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}})(e);if(void 0!==n&&S(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},S=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},w=(e,t)=>{if(null==e){if(t)throw new TypeError(`Expected a non-null value for ${t}`);throw new TypeError("Expected a non-null value")}return e},I=e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},E=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return x.warn(O(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},k=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,C=e=>{const t=e.match(k);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},T=e=>"string"==typeof e?P(e):m(e),P=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},A=e=>b("string"==typeof e?C(e):e),_=e=>(e=>v(e,16))("string"==typeof e?C(e):e),O=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),x={warn:console.warn},M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),N=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=R.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,i,s,o,a,c,l]=t,u=_(V(r)),d=B(i,"month",1,12),p=B(s,"day",1,31);return K(u,d,p,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l})},D=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),j=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=D.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,i,s,o,a,c,l,u]=t,d=_(V(r)),p=B(i,"month",1,12),h=B(s,"day",1,31),f=K(d,p,h,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l});return"Z"!=u.toUpperCase()&&f.setTime(f.getTime()-q(u)),f},K=(e,t,n,r)=>{const i=t-1;return F(e,i,n),new Date(Date.UTC(e,i,n,B(r.hours,"hour",0,23),B(r.minutes,"minute",0,59),B(r.seconds,"seconds",0,60),U(r.fractionalMilliseconds)))},$=[31,28,31,30,31,30,31,31,30,31,30,31],F=(e,t,n)=>{let r=$[t];if(1===t&&L(e)&&(r=29),n>r)throw new TypeError(`Invalid day for ${M[t]} in ${e}: ${n}`)},L=e=>e%4==0&&(e%100!=0||e%400==0),B=(e,t,n,r)=>{const i=(e=>(e=>v(e,8))("string"==typeof e?C(e):e))(V(e));if(i<n||i>r)throw new TypeError(`${t} must be between ${n} and ${r}, inclusive`);return i},U=e=>null==e?0:1e3*(e=>(e=>{const t=m(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>y)throw new TypeError(`Expected 32-bit float, got ${e}`);return t})("string"==typeof e?C(e):e))("0."+e),q=e=>{const t=e[0];let n=1;if("+"==t)n=1;else{if("-"!=t)throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);n=-1}return n*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*60*1e3},V=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class H extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,H.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const W=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,n])=>{null!=e[t]&&""!==e[t]||(e[t]=n)}));const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},z=e=>({output:t,parsedBody:n,errorCode:r})=>{(({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const i=G(e),s=i.httpStatusCode?i.httpStatusCode+"":void 0,o=new n({name:t?.code||t?.Code||r||s||"UnknownError",$fault:"client",$metadata:i});throw W(o,t)})({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},G=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),J=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let Q=!1;const Y=e=>{e&&!Q&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Q=!0)},Z=e=>{const t=[];for(const n in p.dB){const r=p.dB[n];void 0!==e[r]&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},X=e=>{const t={};return e.checksumAlgorithms().forEach((e=>{t[e.algorithmId()]=e.checksumConstructor()})),t},ee=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},te=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},ne=e=>({...Z(e),...ee(e)}),re=e=>({...X(e),...te(e)});function ie(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}const se=e=>{const t="#text";for(const n in e)e.hasOwnProperty(n)&&void 0!==e[n][t]?e[n]=e[n][t]:"object"==typeof e[n]&&null!==e[n]&&(e[n]=se(e[n]));return e},oe=function(){const e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,[null,...arguments]));return Object.setPrototypeOf(t,e.prototype),t};function ae(e,t,n){let r,i,s;if(void 0===t&&void 0===n)r={},s=e;else{if(r=e,"function"==typeof t)return i=t,s=n,le(r,i,s);s=t}for(const e of Object.keys(s))Array.isArray(s[e])?ue(r,null,s,e):r[e]=s[e];return r}oe.prototype=Object.create(String.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(oe,String);const ce=(e,t)=>{const n={};for(const r in t)ue(n,e,t,r);return n},le=(e,t,n)=>ae(e,Object.entries(n).reduce(((e,[n,r])=>(Array.isArray(r)?e[n]=r:e[n]="function"==typeof r?[t,r()]:[t,r],e)),{})),ue=(e,t,n,r)=>{if(null!==t){let i=n[r];"function"==typeof i&&(i=[,i]);const[s=de,o=pe,a=r]=i;return void(("function"==typeof s&&s(t[a])||"function"!=typeof s&&s)&&(e[r]=o(t[a])))}let[i,s]=n[r];if("function"==typeof s){let t;const n=void 0===i&&null!=(t=s()),o="function"==typeof i&&!!i(void 0)||"function"!=typeof i&&!!i;n?e[r]=t:o&&(e[r]=s())}else{const t=void 0===i&&null!=s,n="function"==typeof i&&!!i(s)||"function"!=typeof i&&!!i;(t||n)&&(e[r]=s)}},de=e=>null!=e,pe=e=>e,he=(e,t,n,r,i,s)=>{if(null==t||void 0===t[n])throw new Error("No value provided for input HTTP label: "+n+".");{const t=r();if(t.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");e=e.replace(i,s?t.split("/").map((e=>ie(e))).join("/"):ie(t))}return e},fe=e=>{if(null==e)return{};if(Array.isArray(e))return e.filter((e=>null!=e)).map(fe);if("object"==typeof e){const t={};for(const n of Object.keys(e))null!=e[n]&&(t[n]=fe(e[n]));return t}return e}},7523:(e,t,n)=>{"use strict";var r,i,s,o,a;n.d(t,{dB:()=>o,Ue:()=>s,Ip:()=>l,Vf:()=>c}),function(e){e.HEADER="header",e.QUERY="query"}(r||(r={})),function(e){e.HEADER="header",e.QUERY="query"}(i||(i={})),function(e){e.HTTP="http",e.HTTPS="https"}(s||(s={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(o||(o={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(a||(a={}));const c="__smithy_context";var l,u;!function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"}(l||(l={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(u||(u={}))},2641:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});const r=e=>{if("string"==typeof e)return r(new URL(e));const{hostname:t,pathname:n,port:i,protocol:s,search:o}=e;let a;return o&&(a=function(e){const t={};if(e=e.replace(/^\?/,""))for(const n of e.split("&")){let[e,r=null]=n.split("=");e=decodeURIComponent(e),r&&(r=decodeURIComponent(r)),e in t?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:t[e]=r}return t}(o)),{hostname:t,port:i?parseInt(i):void 0,protocol:s,path:n,query:a}}},4572:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,n:()=>a});var r=n(9290);const i=/^[A-Za-z0-9+/]*={0,2}$/,s=e=>{if(3*e.length%4!=0)throw new TypeError("Incorrect padding on base64 string.");if(!i.exec(e))throw new TypeError("Invalid base64 string.");const t=(0,r.s)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var o=n(3197);const a=e=>{let t;if(t="string"==typeof e?(0,o.ar)(e):e,"object"!=typeof t||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,r.Q)(t.buffer,t.byteOffset,t.byteLength).toString("base64")}},7809:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(9896);const i=e=>{if(!e)return 0;if("string"==typeof e)return Buffer.byteLength(e);if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;if("number"==typeof e.start&&"number"==typeof e.end)return e.end+1-e.start;if("string"==typeof e.path||Buffer.isBuffer(e.path))return(0,r.lstatSync)(e.path).size;if("number"==typeof e.fd)return(0,r.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)}},9290:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s,s:()=>o});var r=n(3695),i=n(181);const s=(e,t=0,n=e.byteLength-t)=>{if(!(0,r.m)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return i.Buffer.from(e,t,n)},o=(e,t)=>{if("string"!=typeof e)throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?i.Buffer.from(e,t):i.Buffer.from(e)}},4321:(e,t,n)=>{"use strict";n.d(t,{I:()=>u});var r=n(1487),i=n(9987),s=n(8112);const o="AWS_REGION",a="AWS_DEFAULT_REGION",c=["in-region","cross-region","mobile","standard","legacy"],l={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:"legacy"},u=({region:e=(0,i.Z)(r.GG),defaultsMode:t=(0,i.Z)(l)}={})=>(0,s.Bj)((async()=>{const n="function"==typeof t?await t():t;switch(n?.toLowerCase()){case"auto":return d(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${c.join(", ")}, got ${n}`)}})),d=async e=>{if(e){const t="function"==typeof e?await e():e,n=await p();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},p=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[o]||process.env[a]))return process.env[o]??process.env[a];if(!process.env.AWS_EC2_METADATA_DISABLED)try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await n.e(897).then(n.bind(n,7897)),r=await e();return(await t({...r,path:"/latest/meta-data/placement/region"})).toString()}catch(e){}}},3875:(e,t,n)=>{"use strict";n.d(t,{mw:()=>a,oX:()=>i,X8:()=>o,sO:()=>A});const r=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),i=e=>r.test(e)||e.startsWith("[")&&e.endsWith("]"),s=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),o=(e,t=!1)=>{if(!t)return s.test(e);const n=e.split(".");for(const e of n)if(!o(e))return!1;return!0},a={},c="endpoints";function l(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${l(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(l).join(", ")})`:JSON.stringify(e,null,2)}class u extends Error{constructor(e){super(e),this.name="EndpointError"}}const d=(e,t)=>(e=>{const t=e.split("."),n=[];for(const r of t){const t=r.indexOf("[");if(-1!==t){if(r.indexOf("]")!==r.length-1)throw new u(`Path: '${e}' does not end with ']'`);const i=r.slice(t+1,-1);if(Number.isNaN(parseInt(i)))throw new u(`Invalid array index: '${i}' in path: '${e}'`);0!==t&&n.push(r.slice(0,t)),n.push(i)}else n.push(r)}return n})(t).reduce(((n,r)=>{if("object"!=typeof n)throw new u(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]}),e);var p=n(7523);const h={[p.Ue.HTTP]:80,[p.Ue.HTTPS]:443},f={booleanEquals:(e,t)=>e===t,getAttr:d,isSet:e=>null!=e,isValidHostLabel:o,not:e=>!e,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:n,protocol:r="",path:i="",query:s={}}=e,o=new URL(`${r}//${t}${n?`:${n}`:""}${i}`);return o.search=Object.entries(s).map((([e,t])=>`${e}=${t}`)).join("&"),o}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:r,hostname:s,pathname:o,protocol:a,search:c}=t;if(c)return null;const l=a.slice(0,-1);if(!Object.values(p.Ue).includes(l))return null;const u=i(s);return{scheme:l,authority:`${r}${n.includes(`${r}:${h[l]}`)||"string"==typeof e&&e.includes(`${r}:${h[l]}`)?`:${h[l]}`:""}`,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},g=(e,t)=>{const n=[],r={...t.endpointParams,...t.referenceRecord};let i=0;for(;i<e.length;){const t=e.indexOf("{",i);if(-1===t){n.push(e.slice(i));break}n.push(e.slice(i,t));const s=e.indexOf("}",t);if(-1===s){n.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[s+1]&&(n.push(e.slice(t+1,s)),i=s+2);const o=e.substring(t+1,s);if(o.includes("#")){const[e,t]=o.split("#");n.push(d(r[e],t))}else n.push(r[o]);i=s+1}return n.join("")},m=(e,t,n)=>{if("string"==typeof e)return g(e,n);if(e.fn)return y(e,n);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,n);throw new u(`'${t}': ${String(e)} is not a string, function or reference.`)},y=({fn:e,argv:t},n)=>{const r=t.map((e=>["boolean","number"].includes(typeof e)?e:m(e,"arg",n))),i=e.split(".");return i[0]in a&&null!=i[1]?a[i[0]][i[1]](...r):f[e](...r)},b=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new u(`'${e}' is already defined in Reference Record.`);const r=y(t,n);return n.logger?.debug?.(`${c} evaluateCondition: ${l(t)} = ${l(r)}`),{result:""===r||!!r,...null!=e&&{toAssign:{name:e,value:r}}}},v=(e=[],t)=>{const n={};for(const r of e){const{result:e,toAssign:i}=b(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};i&&(n[i.name]=i.value,t.logger?.debug?.(`${c} assign: ${i.name} := ${l(i.value)}`))}return{result:!0,referenceRecord:n}},S=(e,t)=>Object.entries(e).reduce(((e,[n,r])=>({...e,[n]:r.map((e=>{const r=m(e,"Header value entry",t);if("string"!=typeof r)throw new u(`Header '${n}' value '${r}' is not a string`);return r}))})),{}),w=(e,t)=>{if(Array.isArray(e))return e.map((e=>w(e,t)));switch(typeof e){case"string":return g(e,t);case"object":if(null===e)throw new u(`Unexpected endpoint property: ${e}`);return I(e,t);case"boolean":return e;default:throw new u("Unexpected endpoint property type: "+typeof e)}},I=(e,t)=>Object.entries(e).reduce(((e,[n,r])=>({...e,[n]:w(r,t)})),{}),E=(e,t)=>{const n=m(e,"Endpoint URL",t);if("string"==typeof n)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new u("Endpoint URL must be a string, got "+typeof n)},k=(e,t)=>{const{conditions:n,endpoint:r}=e,{result:i,referenceRecord:s}=v(n,t);if(!i)return;const o={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:u,headers:d}=r;return t.logger?.debug?.(`${c} Resolving endpoint from template: ${l(r)}`),{...null!=d&&{headers:S(d,o)},...null!=u&&{properties:I(u,o)},url:E(a,o)}},C=(e,t)=>{const{conditions:n,error:r}=e,{result:i,referenceRecord:s}=v(n,t);if(i)throw new u(m(r,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},T=(e,t)=>{const{conditions:n,rules:r}=e,{result:i,referenceRecord:s}=v(n,t);if(i)return P(r,{...t,referenceRecord:{...t.referenceRecord,...s}})},P=(e,t)=>{for(const n of e)if("endpoint"===n.type){const e=k(n,t);if(e)return e}else if("error"===n.type)C(n,t);else{if("tree"!==n.type)throw new u(`Unknown endpoint rule: ${n}`);{const e=T(n,t);if(e)return e}}throw new u("Rules evaluation failed")},A=(e,t)=>{const{endpointParams:n,logger:r}=t,{parameters:i,rules:s}=e;t.logger?.debug?.(`${c} Initial EndpointParams: ${l(n)}`);const o=Object.entries(i).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(o.length>0)for(const[e,t]of o)n[e]=n[e]??t;const a=Object.entries(i).filter((([,e])=>e.required)).map((([e])=>e));for(const e of a)if(null==n[e])throw new u(`Missing required parameter: '${e}'`);const d=P(s,{endpointParams:n,logger:r,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{const e=new URL(t.endpointParams.Endpoint),{protocol:n,port:r}=e;d.url.protocol=n,d.url.port=r}catch(e){}return t.logger?.debug?.(`${c} Resolved endpoint: ${l(d)}`),d}},8004:(e,t,n)=>{"use strict";n.d(t,{a:()=>s,n:()=>o});const r={},i={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),r[e]=t,i[t]=e}function s(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(!(r in i))throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`);t[n/2]=i[r]}return t}function o(e){let t="";for(let n=0;n<e.byteLength;n++)t+=r[e[n]];return t}},7135:(e,t,n)=>{"use strict";n.d(t,{u:()=>i,t:()=>s});var r=n(7523);const i=e=>e[r.Vf]||(e[r.Vf]={}),s=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t}},3323:(e,t,n)=>{"use strict";var r;n.d(t,{Y:()=>v,Gz:()=>i,bp:()=>c,L0:()=>s,QJ:()=>a,Df:()=>d,l5:()=>g,G8:()=>l,XP:()=>f,ok:()=>m,XS:()=>p,cm:()=>r,ru:()=>b,jh:()=>u,Rn:()=>h}),function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(r||(r={}));const i=3,s=r.STANDARD;var o=n(4542);class a{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>setTimeout(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),(0,o.Qb)(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}const c=100,l=2e4,u=500,d=500,p=5,h=10,f=1,g="amz-sdk-invocation-id",m="amz-sdk-request",y=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(l,e),getRetryCost:()=>n});class b{constructor(e){this.maxAttempts=e,this.mode=r.STANDARD,this.capacity=d,this.retryBackoffStrategy=(()=>{let e=c;return{computeNextBackoffDelay:t=>Math.floor(Math.min(l,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return y({retryDelay:c,retryCount:0})}async refreshRetryTokenForRetry(e,t){const n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){const n=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===n?u:c);const r=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,r):r,s=this.getCapacityCost(n);return this.capacity-=s,y({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:s})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(d,this.capacity+(e.getRetryCost()??f))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn(`Max attempts provider could not resolve. Using default of ${i}`),i}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?h:p}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class v{constructor(e,t){this.maxAttemptsProvider=e,this.mode=r.ADAPTIVE;const{rateLimiter:n}=t??{};this.rateLimiter=n??new a,this.standardRetryStrategy=new b(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}},7509:(e,t,n)=>{"use strict";n.d(t,{Mu:()=>s,c9:()=>m});var r=n(4572),i=n(3197);class s extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return function(e,t){return"base64"===t?s.mutate((0,r.E)(e)):s.mutate((0,i.ar)(e))}(e,t);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,s.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?(0,r.n)(e):(0,i.Pq)(e)}(this,e)}}var o=n(2203),a=n(4029),c=n(9290),l=n(9023);n(5479);var u=n(8004);const d=e=>"function"==typeof ReadableStream&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),p="The stream has already been transformed.",h=e=>{if(!f(e)&&!d(e))throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${e?.__proto__?.constructor?.name||e}`);let t=!1;const n=async()=>{if(t)throw new Error(p);return t=!0,await(e=>"function"==typeof Blob&&e instanceof Blob?async function(e){const t=await function(e){return new Promise(((t,n)=>{const r=new FileReader;r.onloadend=()=>{if(2!==r.readyState)return n(new Error("Reader aborted too early"));const e=r.result??"",i=e.indexOf(","),s=i>-1?i+1:e.length;t(e.substring(s))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(e)}))}(e),n=(0,r.E)(t);return new Uint8Array(n)}(e):async function(e){const t=[],n=e.getReader();let r=!1,i=0;for(;!r;){const{done:e,value:s}=await n.read();s&&(t.push(s),i+=s.length),r=e}const s=new Uint8Array(i);let o=0;for(const e of t)s.set(e,o),o+=e.length;return s}(e))(e)};return Object.assign(e,{transformToByteArray:n,transformToString:async e=>{const t=await n();if("base64"===e)return(0,r.n)(t);if("hex"===e)return(0,u.n)(t);if(void 0===e||"utf8"===e||"utf-8"===e)return(0,i.Pq)(t);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(t);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(p);if(t=!0,f(e))return(e=>{if("function"!=typeof e.stream)throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()})(e);if(d(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},f=e=>"function"==typeof Blob&&e instanceof Blob,g="The stream has already been transformed.",m=e=>{if(!(e instanceof o.Readable))try{return h(e)}catch(t){throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${e?.__proto__?.constructor?.name||e}`)}let t=!1;const n=async()=>{if(t)throw new Error(g);return t=!0,await(0,a.kv)(e)};return Object.assign(e,{transformToByteArray:n,transformToString:async e=>{const t=await n();return void 0===e||Buffer.isEncoding(e)?(0,c.Q)(t.buffer,t.byteOffset,t.byteLength).toString(e):new l.TextDecoder(e).decode(t)},transformToWebStream:()=>{if(t)throw new Error(g);if(null!==e.readableFlowing)throw new Error("The stream has been consumed by other callbacks.");if("function"!=typeof o.Readable.toWeb)throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,o.Readable.toWeb(e)}})};o.Writable},2531:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});const r=e=>encodeURIComponent(e).replace(/[!'()*]/g,i),i=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`},3197:(e,t,n)=>{"use strict";n.d(t,{ar:()=>i,Fo:()=>s,Pq:()=>o});var r=n(9290);const i=e=>{const t=(0,r.s)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},s=e=>"string"==typeof e?i(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),o=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,r.Q)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},r=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},i=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},s=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},o=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:s(e.r,0,255),g:s(e.g,0,255),b:s(e.b,0,255),a:s(e.a)}},c=function(e){return{r:i(e.r),g:i(e.g),b:i(e.b),a:i(e.a,3)}},l=/^#([0-9a-f]{3,8})$/i,u=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=Math.max(t,n,r),o=s-Math.min(t,n,r),a=o?s===t?(n-r)/o:s===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},p=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),o=r*(1-n),a=r*(1-(t-s)*n),c=r*(1-(1-t+s)*n),l=s%6;return{r:255*[r,a,o,o,c,r][l],g:255*[c,r,r,a,o,o][l],b:255*[o,o,c,r,r,a][l],a:i}},h=function(e){return{h:o(e.h),s:s(e.s,0,100),l:s(e.l,0,100),a:s(e.a)}},f=function(e){return{h:i(e.h),s:i(e.s),l:i(e.l),a:i(e.a,3)}},g=function(e){return p((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},m=function(e){return{h:(t=d(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w={string:[[function(e){var t=l.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?i(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?i(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v.exec(e)||S.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=y.exec(e)||b.exec(e);if(!t)return null;var r,i,s=h({h:(r=t[1],i=t[2],void 0===i&&(i="deg"),Number(r)*(n[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return g(s)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,i=e.b,s=e.a,o=void 0===s?1:s;return r(t)&&r(n)&&r(i)?a({r:Number(t),g:Number(n),b:Number(i),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,i=e.l,s=e.a,o=void 0===s?1:s;if(!r(t)||!r(n)||!r(i))return null;var a=h({h:Number(t),s:Number(n),l:Number(i),a:Number(o)});return g(a)},"hsl"],[function(e){var t=e.h,n=e.s,i=e.v,a=e.a,c=void 0===a?1:a;if(!r(t)||!r(n)||!r(i))return null;var l=function(e){return{h:o(e.h),s:s(e.s,0,100),v:s(e.v,0,100),a:s(e.a)}}({h:Number(t),s:Number(n),v:Number(i),a:Number(c)});return p(l)},"hsv"]]},I=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},E=function(e){return"string"==typeof e?I(e.trim(),w.string):"object"==typeof e&&null!==e?I(e,w.object):[null,void 0]},k=function(e,t){var n=m(e);return{h:n.h,s:s(n.s+100*t,0,100),l:n.l,a:n.a}},C=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},T=function(e,t){var n=m(e);return{h:n.h,s:n.s,l:s(n.l+100*t,0,100),a:n.a}},P=function(){function e(e){this.parsed=E(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return i(C(this.rgba),2)},e.prototype.isDark=function(){return C(this.rgba)<.5},e.prototype.isLight=function(){return C(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,o=(s=e.a)<1?u(i(255*s)):"","#"+u(t)+u(n)+u(r)+o;var e,t,n,r,s,o},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return f(m(this.rgba))},e.prototype.toHslString=function(){return t=(e=f(m(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=d(this.rgba),{h:i(e.h),s:i(e.s),v:i(e.v),a:i(e.a,3)};var e},e.prototype.invert=function(){return A({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),A(k(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),A(k(this.rgba,-e))},e.prototype.grayscale=function(){return A(k(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),A(T(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),A(T(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?A({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):i(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=m(this.rgba);return"number"==typeof e?A({h:e,s:t.s,l:t.l,a:t.a}):i(t.h)},e.prototype.isEqual=function(e){return this.toHex()===A(e).toHex()},e}(),A=function(e){return e instanceof P?e:new P(e)},_=[];t.Colord=P,t.colord=A,t.extend=function(e){e.forEach((function(e){_.indexOf(e)<0&&(e(P,w),_.push(e))}))},t.getFormat=function(e){return E(e)[1]},t.random=function(){return new P({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},6022:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===r(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=i,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var r,i,s=(i=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(r,i)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[0],a=s[1];return e[o]=a,e}),{})},t.isArguments=function(e){return null!=e&&i(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var s={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=s,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(s.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),r=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},i=0;i<64;i++)n[r(i)]=i;var s=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},o={encode:function(e){if("string"==typeof e){var t=e;e=s(t.length);for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=i}}for(var o=[],a=null,c=null,l=null,u=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,l=(15&e[d])<<2;break;case 2:l|=e[d]>>6&3,u=63&e[d],o.push(r(a)),o.push(r(c)),o.push(r(l)),o.push(r(u)),a=null,c=null,l=null,u=null}return null!=a&&(o.push(r(a)),o.push(r(c)),null==l?o.push("="):o.push(r(l)),null==u&&o.push("=")),o.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var r,i=s(t),o=null,a=null,c=null,l=0,u=0;u<e.length;u++){var d="="===(r=e.charAt(u))?-1:n[r];switch(u%4){case 0:if(d<0)throw new Error("invalid base64 string");o=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");o|=d>>4,i[l++]=o,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,i[l++]=a,c=(3&d)<<6);break;case 3:d>=0&&(i[l++]=c|d)}}return i},newBinary:s};t.Base64=o},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,i,s,o,a){var c=i[t];switch(n(c)){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var l,u=o+s,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,h=0;h<p;h+=1)d[h]=e(h,c,s,u,a)||"null";return l=0===d.length?"[]":u?"[\n"+u+d.join(",\n"+u)+"\n"+o+"]":"["+d.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach((function(t){(l=e(t,c,s,u,a))&&d.push(r(t)+(u?": ":":")+l)})),l=0===d.length?"{}":u?"{\n"+u+d.join(",\n"+u)+"\n"+o+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var r="",s=0;s<n.indent;s++)r+=" ";n.indent=r}return i("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}var i={};!function(){var e=i,t=r(2).Base64,n=r(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var s=r(1),o={};e.EJSON=o;var a=new Map;o.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$date")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$regexp")&&(0,s.hasOwn)(e,"$flags")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$InfNaN")&&1===(0,s.lengthOf)(e)},matchObject:s.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$binary")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,s.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$escape")&&1===(0,s.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,s.lengthOf)(e);1!==n&&2!==n||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,s.keysOf)(e).forEach((function(n){t[n]=o.toJSONValue(e[n])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,s.keysOf)(e.$escape).forEach((function(n){t[n]=o.fromJSONValue(e.$escape[n])})),t}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$type")&&(0,s.hasOwn)(e,"$value")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var r=a.get(t);return n._noYieldsAllowed((function(){return r(e.$value)}))}}];o._isCustomType=function(e){return e&&(0,s.isFunction)(e.toJSONValue)&&(0,s.isFunction)(e.typeName)&&a.has(e.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,s.convertMapToObject)(a)},o._getConverters=function(){return c};var l=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}},u=function e(t){if(null===t)return null;var n=l(t);return void 0!==n?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var r=t[n];if((0,s.isObject)(r)||void 0===r||(0,s.isInfOrNaN)(r)){var i=l(r);i?t[n]=i:e(r)}})),t):t};o._adjustTypesToJSONValue=u,o.toJSONValue=function(e){var t=l(e);if(void 0!==t)return t;var n=e;return(0,s.isObject)(e)&&(n=o.clone(e),u(n)),n};var d=function(e){if((0,s.isObject)(e)&&null!==e){var t=(0,s.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var n=0;n<c.length;n++){var r=c[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var n=d(t);return n!==t?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var r=t[n];if((0,s.isObject)(r)){var i=d(r);if(r!==i)return void(t[n]=i);e(r)}})),t):t};o._adjustTypesFromJSONValue=p,o.fromJSONValue=function(e){var t=d(e);return t===e&&(0,s.isObject)(e)&&(t=o.clone(e),p(t)),t},o.stringify=(0,s.handleError)((function(e,t){var n=o.toJSONValue(e);return t&&(t.canonical||t.indent)?r(4)(n,t):JSON.stringify(n)})),o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,t,n){var r,i=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,s.isObject)(e)||!(0,s.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(o.isBinary(e)&&o.isBinary(t)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if((0,s.isFunction)(e.equals))return e.equals(t,n);if((0,s.isFunction)(t.equals))return t.equals(e,n);var a,c=Array.isArray(e),l=Array.isArray(t);if(c!==l)return!1;if(c&&l){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!o.equals(e[r],t[r],n))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(t)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(t))}var u=(0,s.keysOf)(e),d=(0,s.keysOf)(t);return i?(r=0,a=u.every((function(i){return!(r>=d.length||i!==d[r]||!o.equals(e[i],t[d[r]],n)||(r++,0))}))):(r=0,a=u.every((function(i){return!!(0,s.hasOwn)(t,i)&&!!o.equals(e[i],t[i],n)&&(r++,!0)}))),a&&r===d.length},o.clone=function(e){var t;if(!(0,s.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){t=o.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(o.clone):(0,s.isArguments)(e)?Array.from(e).map(o.clone):(0,s.isFunction)(e.clone)?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(t={},(0,s.keysOf)(e).forEach((function(n){t[n]=o.clone(e[n])})),t)},o.newBinary=t.newBinary}(),e.exports=i.EJSON}()},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,s,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},2017:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!=i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},4865:e=>{"use strict";const t=(e,t,r,i)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!n(s,o)&&i||Object.defineProperty(e,r,o)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},r=(e,t)=>`/* Wrapped ${e}*/\n${t}`,i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),s=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:o=!1}={})=>{const{name:a}=e;for(const r of Reflect.ownKeys(n))t(e,n,r,o);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const o=""===n?"":`with ${n.trim()}() `,a=r.bind(null,o,t.toString());Object.defineProperty(a,"name",s),Object.defineProperty(e,"toString",{...i,value:a})})(e,n,a),e}},4617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},3290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(228),i=n(7685),s=n(4774),o=()=>{},a=new i.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)}));n(await s)}catch(e){r(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},9998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,i=e.length;for(;i>0;){const s=i/2|0;let o=r+s;n(e[o],t)<=0?(r=++o,i-=s+1):i=s}return r}},4774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const i=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},7685:(e,t,n)=>{"use strict";const r=n(4617);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,n)=>new Promise(((s,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const a=setTimeout((()=>{if("function"==typeof n){try{s(n())}catch(e){o(e)}return}const r=n instanceof Error?n:new i("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(r)}),t);r(e.then(s,o),(()=>{clearTimeout(a)}))}));e.exports=s,e.exports.default=s,e.exports.TimeoutError=i},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},6982:e=>{"use strict";e.exports=require("crypto")},7194:e=>{"use strict";e.exports=require("dgram")},9896:e=>{"use strict";e.exports=require("fs")},1943:e=>{"use strict";e.exports=require("fs/promises")},8611:e=>{"use strict";e.exports=require("http")},9278:e=>{"use strict";e.exports=require("net")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},4581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=void 0;const r=n(1635),i=n(9967),s=r.__importDefault(n(1943)),o=n(360),a=n(4044),c=r.__importDefault(n(6928));let l,u=!1;t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(u)throw new Error("runEntrypoint can only be called once");u=!0;const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const r=await s.default.readFile(n),d=JSON.parse(r.toString());if(d.runtime?.api!==i.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let p=d.runtime.apiVersion;if("0.0.0"===p)try{const e=await s.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(p=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const h=process.env.CONNECTION_ID;if("string"!=typeof h||!h)throw new Error("Module initialise is missing CONNECTION_ID");const f=process.env.VERIFICATION_TOKEN;if("string"!=typeof f||!f)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const g=new a.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{g.receivedMessage(e)})),l=new e((0,o.literal)({id:h,upgradeScripts:t,_isInstanceBaseProps:!0})),g.sendWithCb("register",{apiVersion:p,connectionId:h,verificationToken:f}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))}},6160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var r=n(8895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return r.TCPHelper}});var i=n(1118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return i.TelnetHelper}});var s=n(6259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return s.UDPHelper}})},8895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const r=n(1635).__importDefault(n(9278)),i=n(228),s=n(1400);class o extends i.EventEmitter{#e;#t;_socket;#n;#r=!1;#i=!1;#s=!1;#o;#a;#c;get isConnected(){return this.#r}get isConnecting(){return this.#i}get isDestroyed(){return this.#s}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new r.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#i=!1,this.#r=!1,this.#n.reconnect&&this.#l(),this.#u(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#r=!0,this.#i=!1,this.#u(s.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#r=!1,this.#u(s.InstanceStatus.Disconnected),!this.#i&&this.#n.reconnect&&this.#l(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>{this.#s||this.connect()})),this.#c=setTimeout((()=>{this.#c=void 0,this.#s||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#s)throw new Error("Cannot connect destroyed socket");return!this.#i&&(this.#i=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#s||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#r)return!1;try{return new Promise(((t,n)=>{this._socket.write(e,(e=>{e?n(e):t(!0)}))}))}catch(e){this.#r=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#u(s.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#s=!0,void 0!==this.#a&&(clearTimeout(this.#a),this.#a=void 0),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#l(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#u(s.InstanceStatus.Connecting),this.connect()}),this.#n.reconnect_interval)}#u(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.TCPHelper=o},1118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const r=n(1635).__importDefault(n(228)),i=n(2203),s=n(8895);class o extends r.default{#d;#p;#c;get isConnected(){return this.#d.isConnected}get isConnecting(){return this.#d.isConnecting}get isDestroyed(){return this.#d.isDestroyed}constructor(e,t,n){super(),this.#d=new s.TCPHelper(e,t,n),this.#p=new a,this.#d._socket.pipe(this.#p),this.#d.on("connect",(()=>this.emit("connect"))),this.#d.on("end",(()=>this.emit("end"))),this.#d.on("error",(e=>this.emit("error",e))),this.#d.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#p.on("iac",((e,t)=>this.emit("iac",e,t))),this.#p.on("sb",(e=>this.emit("sb",e))),this.#p.on("data",(e=>this.emit("data",e))),this.#p.on("drain",(()=>this.emit("drain"))),this.#c=setTimeout((()=>{this.#c=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#d.connect()}async send(e){return this.#d.send(e)}destroy(){this.#d.destroy(),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#p.removeAllListeners(),this.#p.destroy()}}t.TelnetHelper=o;class a extends i.Transform{#h;#f;#g;constructor(e){super(e),this.#h=Buffer.alloc(0),this.#f=Buffer.alloc(0),this.#g=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#m(e[t]);const r=this.#y();r.length&&this.push(r),n()}#m(e){if(0===this.#g){if(255===e)return void(this.#g=255);this.#h=Buffer.concat([this.#h,Buffer.from([e])])}else if(255===this.#g)switch(e){case 250:case 251:case 252:case 253:case 254:this.#g=e;break;default:this.#g=0}else{if(this.#g>=251&&this.#g<=254){let t;switch(this.#g){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#g=0)}if(250===this.#g){if(240===e)return this.emit("sb",this.#f),this.#g=0,void(this.#f=Buffer.alloc(0));this.#f=Buffer.concat([this.#f,Buffer.from([e])])}}}#y(){const e=this.#h;return this.#h=Buffer.alloc(0),e}}},6259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const r=n(1635).__importDefault(n(7194)),i=n(228),s=n(1400);class o extends i.EventEmitter{#e;#t;#b;#n;#s=!1;#o;#c;get isDestroyed(){return this.#s}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={...n},this.#b=r.default.createSocket("udp4");try{this.#b.bind(this.#n.bind_port||0,this.#n.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#n.bind_ip||"0.0.0.0"}:${this.#n.bind_port||0}`)}this.#n.broadcast&&this.#b.setBroadcast(!0),void 0!==this.#n.ttl&&this.#b.setTTL(this.#n.ttl),void 0!==this.#n.multicast_ttl&&this.#b.setMulticastTTL(this.#n.multicast_ttl),this.#b.on("error",(e=>{this.#u(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#b.on("listening",(()=>{this.#n.multicast_interface&&this.#b.setMulticastInterface(this.#n.multicast_interface),this.#u(s.InstanceStatus.Ok),this.emit("listening")})),this.#b.on("message",(e=>this.emit("data",e))),this.#c=setTimeout((()=>{this.#s||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#s)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,n)=>{this.#b.send(e,this.#t,this.#e,(e=>{e?n(e):t()}))}))}destroy(){this.#s=!0,void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#b.removeAllListeners(),this.#b.close(),this.removeAllListeners()}#u(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.UDPHelper=o},4044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const r=n(1635),i=n(360),s=r.__importDefault(n(6022));t.IpcWrapper=class{#v;#S;#w;#I=1;#E=new Map;constructor(e,t,n){this.#v=e,this.#S=t,this.#w=n}async sendWithCb(e,t,n,r=0){r<=0&&(r=this.#w);const i={timeout:void 0,resolve:()=>null,reject:()=>null},o=new Promise(((e,t)=>{i.resolve=e,i.reject=t}));this.#I>268435456&&(this.#I=1);const a=this.#I++;this.#E.set(a,i),this.#S({direction:"call",name:String(e),payload:s.default.stringify(t),callbackId:a});const c=new Error("Call timed out");return i.timeout=setTimeout((()=>{i.reject(n?n():c),this.#E.delete(a)}),r),o}sendWithNoCb(e,t){this.#S({direction:"call",name:String(e),payload:s.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#v[e.name];if(!t)return void(e.callbackId&&this.#S({direction:"response",callbackId:e.callbackId,success:!1,payload:s.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?s.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#S({direction:"response",callbackId:e.callbackId,success:!0,payload:s.default.stringify(t)})}),(t=>{e.callbackId&&this.#S({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):s.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#E.get(e.callbackId);if(this.#E.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const n=e.payload?s.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"object"==typeof n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,i.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},9967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},6278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const r=n(1635);r.__exportStar(n(9077),t),r.__exportStar(n(2018),t),r.__exportStar(n(4581),t);var i=n(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return i.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return i.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return i.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return i.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return i.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return i.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return i.assertNever}}),r.__exportStar(n(6160),t);var s=n(4326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return s.runEntrypoint}})},4289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const r=n(2593);function i(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#k;#C;#T;#P=new Map;#A=new Map;constructor(e,t,n){this.#k=e,this.#C=t,this.#T=n}async handleExecuteAction(e){const t=this.#P.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#A.get(t);if(e){const t=this.#P.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch((t=>{this.#T("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#A.delete(t);else{this.#A.set(t,n);const e=this.#P.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#k({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(i(n),t)).catch((e=>{this.#T("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#P.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#P.clear();for(const[n,i]of Object.entries(e))i&&(t.push({id:n,name:i.name,description:i.description,options:(0,r.serializeIsVisibleFn)(i.options),hasLearn:!!i.learn,learnTimeout:i.learnTimeout}),this.#P.set(n,i));this.#C({actions:t})}_getAllActions(){return Array.from(this.#A.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#A.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#P.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(i(e),n)).catch((t=>{this.#T("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#A.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#P.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch((t=>{this.#T("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},2593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceBaseProps=t.serializeIsVisibleFn=void 0,t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},8039:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const r=n(1635),i=n(2593),s=r.__importDefault(n(7e3));function o(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#k;#_;#O;#T;#x=new Map;#M=new Map;#R=new Map;#N=new Map;#D;get parseVariablesContext(){return this.#D}constructor(e,t,n,r){this.#k=e,this.#_=t,this.#O=n,this.#T=r}getDefinitionIds(){return Array.from(this.#x.keys())}getInstanceIds(){return Array.from(this.#M.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#M.get(t);if(e){const t=this.#x.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),n)).catch((t=>{this.#T("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#M.delete(t);else{this.#M.set(t,{...n,referencedVariables:null});const e=this.#x.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#k({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(o(e.type,n),t)).catch((e=>{this.#T("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}this.#j(t)}}}async handleLearnFeedback(e){const t=this.#x.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#N.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#M.values())if(!this.#N.has(e.id)&&e.referencedVariables)for(const r of e.referencedVariables)if(t.has(r)){n.add(e.id);break}for(const e of n)setImmediate((()=>{this.#j(e)}))}#j(e){const t=this.#N.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#M.get(e);if(!n)return;const r=n,i={needsRecheck:!1,changedVariables:new Set};this.#N.set(e,i),Promise.resolve().then((async()=>{const t=this.#x.get(r.feedbackId);let n;const i=new Set;if(t){this.#D=`Feedback ${r.feedbackId} (${e})`;const s={parseVariablesInString:async t=>{const n=await this.#k({text:t,controlId:r.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)i.add(e);return n.text}};n="boolean"===t.type?t.callback({...o("boolean",r),type:"boolean"},s):t.callback({...o("advanced",r),type:"advanced",image:r.image},s),this.#D=void 0}const s=await n;this.#R.set(e,{id:e,controlId:r.controlId,value:s}),this.#K(),r.referencedVariables=i.size>0?Array.from(i):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#D=void 0,this.#N.delete(e);let t=!1;if(r.referencedVariables)for(const e of r.referencedVariables)if(i.changedVariables.has(e)){t=!0;break}(t||i.needsRecheck)&&setImmediate((()=>{this.#j(e)}))}))}#K=(0,s.default)((()=>{const e=this.#R;this.#R=new Map,e.size>0&&this.#_({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#x.clear();for(const[n,r]of Object.entries(e))r&&(t.push({id:n,name:r.name,description:r.description,options:(0,i.serializeIsVisibleFn)(r.options),type:r.type,defaultStyle:"boolean"===r.type?r.defaultStyle:void 0,hasLearn:!!r.learn,learnTimeout:r.learnTimeout,showInvert:"boolean"===r.type&&r.showInvert}),this.#x.set(n,r));this.#O({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#M.entries())this.#x.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#j(e)}checkFeedbacksById(e){for(const t of e)this.#j(t)}_getAllFeedbacks(){return Array.from(this.#M.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#M.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#x.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(o(t.type,e),n)).catch((t=>{this.#T("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#M.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#x.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),n)).catch((t=>{this.#T("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},1706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=void 0;const r=n(360);function i(e){return JSON.parse(JSON.stringify(e))}t.runThroughUpgradeScripts=function(e,t,n,s,o,a){const c=new Map,l=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&l(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&l(t).feedbacks.push(e.id)}if(!a)for(let e=n??-1;e<s.length;e++)l(e).config=!0;const u={},d={};let p;if(c.size>0){const a=Array.from(c.keys()).sort(),l=Math.min(...a,n??-1)+1,h=[],f=[],g=s.length;for(let n=l;n<g;n++){const a=c.get(n-1);a&&(h.push(...a.actions),f.push(...a.feedbacks));const l=!!a?.config;if(!l&&0===h.length&&0===f.length)continue;const g=p??o,m=(0,s[n])({currentConfig:i(g)},{config:l?g:null,actions:h.map((t=>{const n=e[t];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?i(n.options):{}})})).filter((e=>!!e)),feedbacks:f.map((e=>{const n=t[e];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?i(n.options):{},isInverted:n.isInverted})})).filter((e=>!!e))});l&&m.updatedConfig&&(p=m.updatedConfig);for(const t of m.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,d[t.id]=n)}for(const e of m.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,u[e.id]={...n,style:u[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,n]of Object.entries(e))d[t]||"number"!=typeof n?.upgradeIndex||(d[t]=n);for(const[e,n]of Object.entries(t))u[e]||"number"!=typeof n?.upgradeIndex||(u[e]=n)}return{updatedActions:d,updatedFeedbacks:u,updatedConfig:p}}},9077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=void 0;const r=n(1635).__importDefault(n(7281));t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,r.default)(e)){const e=r.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}}},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const r=n(1635),i=n(360),s=r.__importDefault(n(3290)),o=n(2593),a=n(1706),c=n(8039),l=n(4044),u=n(4289),d=n(2365);t.InstanceBase=class{#$;#F;id;#L=new s.default({concurrency:1});#B=!1;#U=!1;#q={};#V;#H;#W=new Map;#z=new Map;#G=new Map;#n;#J;get instanceOptions(){return this.#n}get label(){return this.#J}constructor(e){if(!(0,o.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#n={disableVariableValidation:!1},this.#$=new l.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#$.receivedMessage(e)})),this.#V=new u.ActionManager((async e=>this.#$.sendWithCb("parseVariablesInString",e)),(e=>this.#$.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#H=new c.FeedbackManager((async e=>this.#$.sendWithCb("parseVariablesInString",e)),(e=>this.#$.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#$.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#F=e.upgradeScripts,this.id=e.id,this.#J=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#L.add((async()=>{if(this.#B)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#q=e.config,this.#J=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#q=t,this.saveConfig(this.#q),e.lastUpgradeIndex=this.#F.length-1}const{updatedActions:r,updatedFeedbacks:i,updatedConfig:s}=(0,a.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#F,this.#q,!1);this.#q=s??this.#q;const o=this.#$.sendWithCb("upgradedItems",{updatedActions:r,updatedFeedbacks:i});try{await this.init(this.#q,!!e.isFirstInit),this.#B=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await o}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:n},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#F.length-1,updatedConfig:this.#q}}))}async _handleDestroy(){await this.#L.add((async()=>{if(!this.#B)throw new Error("Not initialized");await this.destroy(),this.#B=!1}))}async _handleConfigUpdateAndLabel(e){await this.#L.add((async()=>{if(!this.#B)throw new Error("Not initialized");this.#J=e.label,this.#q=e.config,await this.configUpdated(this.#q)}))}async _handleExecuteAction(e){return this.#V.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#F,this.#q,!0);this.#$.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#H.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#F,this.#q,!0);this.#$.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#V.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#V.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#H.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#U)return}else if(!this.#U)return;if(!this.handleStartStopRecordActions)throw this.#U=!1,new Error("Recording actions is not supported by this module!");this.#U=e.recording,this.handleStartStopRecordActions(this.#U)}async _handleVariablesChanged(e){this.#H.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#W.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#W.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#q=e,this.#$.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#V.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#H.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,r]of Object.entries(e))r&&t.push({...r,id:n});this.#$.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],n=[];this.#z.clear();for(const r of e)t.push({id:r.variableId,name:r.name}),this.#z.set(r.variableId,r),this.#G.has(r.variableId)||(this.#G.set(r.variableId,""),n.push({id:r.variableId,value:""}));if(!this.#n.disableVariableValidation){const e=new Set(this.#z.keys());for(const t of this.#G.keys())e.has(t)||(this.#G.delete(t),n.push({id:t,value:void 0}))}this.#$.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:n})}setVariableValues(e){const t=[];for(const[n,r]of Object.entries(e))this.#n.disableVariableValidation?(void 0===r?this.#G.delete(n):this.#G.set(n,r),t.push({id:n,value:r})):this.#z.has(n)?(this.#G.set(n,r??""),t.push({id:n,value:r??""})):t.push({id:n,value:void 0});this.#$.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#G.get(e)}async parseVariablesInString(e){const t=this.#H.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#$.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#H.checkFeedbacks(e)}checkFeedbacksById(...e){this.#H.checkFeedbacksById(e)}_getAllActions(){return this.#V._getAllActions()}subscribeActions(...e){this.#V.subscribeActions(e)}unsubscribeActions(...e){this.#V.unsubscribeActions(e)}_getAllFeedbacks(){return this.#H._getAllFeedbacks()}subscribeFeedbacks(...e){this.#H.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#H.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#U)throw new Error("Not currently recording actions");this.#$.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}setCustomVariableValue(e,t){this.#$.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,n,r){this.#$.sendWithNoCb("send-osc",(0,i.literal)({host:e,port:t,path:n,args:r}))}updateStatus(e,t){this.#$.sendWithNoCb("set-status",(0,i.literal)({status:e,message:t??null}))}log(e,t){this.#$.sendWithNoCb("log-message",(0,i.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const n="string"==typeof e?{type:e}:e,r=new d.SharedUdpSocketImpl(this.#$,this.#W,n);return t&&r.on("message",t),r}}},7386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1400:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(n||(t.InstanceStatus=n={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(r||(t.Regex=r={}))},8983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1635);r.__exportStar(n(3730),t),r.__exportStar(n(1649),t),r.__exportStar(n(7386),t),r.__exportStar(n(1400),t),r.__exportStar(n(8983),t),r.__exportStar(n(8104),t),r.__exportStar(n(3258),t),r.__exportStar(n(131),t),r.__exportStar(n(3371),t),r.__exportStar(n(9786),t),r.__exportStar(n(6132),t)},3258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const r=n(1635).__importDefault(n(228)),i=n(360);class s extends r.default{#$;#Q;#n;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#g&&"object"==typeof this.#g?this.#g:void 0}#g="pending";constructor(e,t,n){super(),this.#$=e,this.#Q=t,this.#n={...n}}bind(e,t,n){if(this.#g&&"object"==typeof this.#g)throw new Error("Socket is already bound");switch(this.#g){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,i.assertNever)(this.#g),new Error("Invalid socket state")}this.#g="binding",n&&this.on("listening",n),this.#$.sendWithCb("sharedUdpSocketJoin",{family:this.#n.type,portNumber:e}).then((t=>{this.#g={portNumber:e,handleId:t},this.#Q.set(t,this),this.emit("listening")}),(e=>{this.#g="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#g&&"object"==typeof this.#g);else switch(this.#g){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,i.assertNever)(this.#g),new Error("Invalid socket state")}const t=this.#g.handleId;this.#g="closed",e&&this.on("close",e),this.#$.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#Q.delete(t),this.emit("close")}),(e=>{this.#Q.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,n,r,i,s){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof n){if("number"!=typeof r||"string"!=typeof i)throw new Error("Invalid arguments");if(void 0!==s&&"number"!=typeof s)throw new Error("Invalid arguments");const o=this.#Y(e,t,n);this.#Z(o,r,i,s)}else{if("string"!=typeof n)throw new Error("Invalid arguments");{if(void 0!==r&&"function"!=typeof r)throw new Error("Invalid arguments");const i=this.#Y(e,0,void 0);this.#Z(i,t,n,r)}}}#Y(e,t,n){let r;if("string"==typeof e)r=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))r=e;else{if(Array.isArray(e))return Buffer.from(e);r=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return r.subarray(t,void 0!==n?n+t:void 0)}#Z(e,t,n,r){if(!this.#g||"object"!=typeof this.#g)throw new Error("Socket is not open");this.#$.sendWithCb("sharedUdpSocketSend",{handleId:this.#g.handleId,message:e,address:n,port:t}).then((()=>{r?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#g="fatalError";const t=this.boundState;t&&this.#Q.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=s},3371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=t.CreateConvertToBooleanFeedbackUpgradeScript=t.EmptyUpgradeScript=void 0,t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}),t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,i]of Object.entries(n))void 0!==t.options[e]&&(t.style[i]=t.options[e],delete t.options[e],r.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){const n=e[t.feedbackId];if("string"!=typeof n)continue;const i=t.options[n];void 0!==i&&(delete t.options[n],t.isInverted="true"===i||!0===i||Number(i)>0,r.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}}},6132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.assertNever=t.literal=void 0;const r=n(6284);function i(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,r.colord)(e).isValid()){const t=(0,r.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n,r){let i=(255&e)<<16|(255&t)<<8|255&n;return r&&r>=0&&r<1&&(i+=16777216*Math.round(255*(1-r))),i},t.splitRgb=i,t.splitHsl=function(e){const t=i(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=i(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=i(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()}},7281:(e,t,n)=>{"use strict";e.exports=c,e.exports.default=c;const r={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18"},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}}},i={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1},s=Object.prototype.hasOwnProperty,o=n(7169).A,a=new RegExp("","u");function c(e,{instancePath:t="",parentData:n,parentDataProperty:l,rootData:u=e}={}){let d=null,p=0;if(0===p){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return c.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=p;for(const n in e)if(!s.call(r.properties,n))return c.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===p){if(void 0!==e.$schema){const n=p;if("string"!=typeof e.$schema)return c.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=n===p}else h=!0;if(h){if(void 0!==e.id){const n=p;if("string"!=typeof e.id)return c.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.name){const n=p;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.shortname){const n=p;if("string"!=typeof e.shortname)return c.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.description){const n=p;if("string"!=typeof e.description)return c.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.version){const n=p;if("string"!=typeof e.version)return c.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.license){const n=p;if("string"!=typeof e.license)return c.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.repository){const n=p;if("string"!=typeof e.repository)return c.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.bugs){const n=p;if("string"!=typeof e.bugs)return c.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.maintainers){let n=e.maintainers;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const e=n.length;for(let r=0;r<e;r++){let e=n[r];const i=p;if(p===i){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return c.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.name){const n=p;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/maintainers/"+r+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=n===p}else g=!0;if(g){if(void 0!==e.email){const n=p;if("string"!=typeof e.email)return c.errors=[{instancePath:t+"/maintainers/"+r+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=n===p}else g=!0;if(g)if(void 0!==e.github){const n=p;if("string"!=typeof e.github)return c.errors=[{instancePath:t+"/maintainers/"+r+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=n===p}else g=!0}}}if(!(f=i===p))break}if(f){let e,r=n.length;if(r>1)for(;r--;)for(e=r;e--;)if(o(n[r],n[e]))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1}}}h=r===p}else h=!0;if(h){if(void 0!==e.legacyIds){let n=e.legacyIds;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var m=!0;const e=n.length;for(let r=0;r<e;r++){const e=p;if("string"!=typeof n[r])return c.errors=[{instancePath:t+"/legacyIds/"+r,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m=e===p))break}if(m){let e,r=n.length;if(r>1){const i={};for(;r--;){let s=n[r];if("string"==typeof s){if("number"==typeof i[s])return e=i[s],c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;i[s]=r}}}}}}h=r===p}else h=!0;if(h){if(void 0!==e.runtime){let n=e.runtime;const i=p;if(p===i){if(!n||"object"!=typeof n||Array.isArray(n))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){const e=p;if("string"!=typeof n.type)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=e===p}else y=!0;if(y){if(void 0!==n.api){let e=n.api;const i=p;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;y=i===p}else y=!0;if(y){if(void 0!==n.apiVersion){const e=p;if("string"!=typeof n.apiVersion)return c.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=e===p}else y=!0;if(y)if(void 0!==n.entrypoint){const e=p;if("string"!=typeof n.entrypoint)return c.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=e===p}else y=!0}}}}h=i===p}else h=!0;if(h){if(void 0!==e.manufacturer){const n=p;if("string"!=typeof e.manufacturer)return c.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===p}else h=!0;if(h){if(void 0!==e.products){let n=e.products;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(n.length<1)return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var b=!0;const e=n.length;for(let r=0;r<e;r++){const e=p;if("string"!=typeof n[r])return c.errors=[{instancePath:t+"/products/"+r,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b=e===p))break}if(b){let e,r=n.length;if(r>1){const i={};for(;r--;){let s=n[r];if("string"==typeof s){if("number"==typeof i[s])return e=i[s],c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;i[s]=r}}}}}}h=r===p}else h=!0;if(h){if(void 0!==e.keywords){let n=e.keywords;const r=p;if(p===r){if(!Array.isArray(n))return c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var v=!0;const e=n.length;for(let r=0;r<e;r++){const e=p;if("string"!=typeof n[r])return c.errors=[{instancePath:t+"/keywords/"+r,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v=e===p))break}if(v){let e,r=n.length;if(r>1){const i={};for(;r--;){let s=n[r];if("string"==typeof s){if("number"==typeof i[s])return e=i[s],c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;i[s]=r}}}}}}h=r===p}else h=!0;if(h)if(void 0!==e.bonjourQueries){let n=e.bonjourQueries;const r=p;if(p===r){if(!n||"object"!=typeof n||Array.isArray(n))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=p;for(const e in n)if(!a.test(e))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===p)for(const e in n)if(a.test(e)){let r=n[e];const s=p,o=p;let l=!1,u=null;const h=p;if(p==p)if(r&&"object"==typeof r&&!Array.isArray(r)){let n;if(void 0===r.type&&(n="type")||void 0===r.protocol&&(n="protocol")){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===d?d=[r]:d.push(r),p++}else{const n=p;for(const n in r)if("type"!==n&&"protocol"!==n&&"txt"!==n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===d?d=[r]:d.push(r),p++;break}if(n===p){if(void 0!==r.type){const n=p;if("string"!=typeof r.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}var S=n===p}else S=!0;if(S){if(void 0!==r.protocol){let n=r.protocol;const s=p;if("string"!=typeof n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if("tcp"!==n&&"udp"!==n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:i.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[n]:d.push(n),p++}S=s===p}else S=!0;if(S)if(void 0!==r.txt){let n=r.txt;const i=p;if(p===i)if(n&&"object"==typeof n&&!Array.isArray(n)){const r=p;for(const r in n)if(!a.test(r)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===d?d=[n]:d.push(n),p++;break}if(r===p)for(const r in n)if(a.test(r)){const i=p;if("string"!=typeof n[r]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if(i!==p)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}S=i===p}else S=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}h===p&&(l=!0,u=0);const f=p;if(p===f)if(Array.isArray(r)){const n=r.length;for(let s=0;s<n;s++){let n=r[s];const o=p;if(p==p)if(n&&"object"==typeof n&&!Array.isArray(n)){let r;if(void 0===n.type&&(r="type")||void 0===n.protocol&&(r="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===d?d=[n]:d.push(n),p++}else{const r=p;for(const r in n)if("type"!==r&&"protocol"!==r&&"txt"!==r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s,schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===d?d=[n]:d.push(n),p++;break}if(r===p){if(void 0!==n.type){const r=p;if("string"!=typeof n.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}var w=r===p}else w=!0;if(w){if(void 0!==n.protocol){let r=n.protocol;const o=p;if("string"!=typeof r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[n]:d.push(n),p++}if("tcp"!==r&&"udp"!==r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:i.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[n]:d.push(n),p++}w=o===p}else w=!0;if(w)if(void 0!==n.txt){let r=n.txt;const i=p;if(p===i)if(r&&"object"==typeof r&&!Array.isArray(r)){const n=p;for(const n in r)if(!a.test(n)){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"};null===d?d=[r]:d.push(r),p++;break}if(n===p)for(const n in r)if(a.test(n)){const i=p;if("string"!=typeof r[n]){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[r]:d.push(r),p++}if(i!==p)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}w=i===p}else w=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[n]:d.push(n),p++}if(o!==p)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===d?d=[n]:d.push(n),p++}var I;if((I=f===p)&&l?(l=!1,u=[u,1]):I&&(l=!0,u=1),!l){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return null===d?d=[n]:d.push(n),p++,c.errors=d,!1}if(p=o,null!==d&&(o?d.length=o:d=null),s!==p)break}}}h=r===p}else h=!0}}}}}}}}}}}}}}}}}}return c.errors=d,0===p}},7e3:(e,t,n)=>{"use strict";const r=n(4865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:i=0,before:s=!1,after:o=!0}=t;if(!s&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,l;const u=function(...t){const r=this,u=s&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),o&&(l=e.apply(r,t))}),n),i>0&&!c&&o&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),l=e.apply(r,t)}),i)),u&&(l=e.apply(r,t)),l};return r(u,e),u.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},u}},2349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearIntervalAsync=void 0;const r=n(5376);t.clearIntervalAsync=async function(e){if(!(e instanceof r.SetIntervalAsyncTimer))throw new TypeError("First argument is not an instance of SetIntervalAsyncTimer");await r.SetIntervalAsyncTimer.stopTimer(e)}},3998:(e,t,n)=>{"use strict";t.EQ=void 0;n(2349);const r=n(5376);t.EQ=function(e,t,...n){if("function"!=typeof e)throw new TypeError("First argument is not a function");if("number"!=typeof t)throw new TypeError("Second argument is not a number");return r.SetIntervalAsyncTimer.startTimer("dynamic",e,t,...n)}},5376:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetIntervalAsyncTimer=void 0;class n{#X=void 0;#ee=void 0;#te=!1;static startTimer(e,t,r,...i){r=Math.min(Math.max(Math.trunc(r),10),2147483647);const s=new n;return s.#ne(e,t,r,r,...i),s}static async stopTimer(e){e.#te=!0,e.#X&&clearTimeout(e.#X),e.#ee&&await e.#ee}#ne(e,t,n,r,...i){this.#X=setTimeout((async()=>{this.#X=void 0,this.#ee=this.#re(e,t,n,...i),await this.#ee,this.#ee=void 0}),r)}async#re(e,t,n,...r){const i=(new Date).getTime();try{await t(...r)}finally{if(!this.#te){const s=(new Date).getTime()-i,o="dynamic"===e?n>s?n-s:0:n;this.#ne(e,t,n,o,...r)}}}}t.SetIntervalAsyncTimer=n},1635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>N,__assign:()=>s,__asyncDelegator:()=>C,__asyncGenerator:()=>k,__asyncValues:()=>T,__await:()=>E,__awaiter:()=>f,__classPrivateFieldGet:()=>x,__classPrivateFieldIn:()=>R,__classPrivateFieldSet:()=>M,__createBinding:()=>m,__decorate:()=>a,__disposeResources:()=>j,__esDecorate:()=>l,__exportStar:()=>y,__extends:()=>i,__generator:()=>g,__importDefault:()=>O,__importStar:()=>_,__makeTemplateObject:()=>P,__metadata:()=>h,__param:()=>c,__propKey:()=>d,__read:()=>v,__rest:()=>o,__runInitializers:()=>u,__setFunctionName:()=>p,__spread:()=>S,__spreadArray:()=>I,__spreadArrays:()=>w,__values:()=>b,default:()=>K});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t,n,r,i,s){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),p=!1,h=n.length-1;h>=0;h--){var f={};for(var g in r)f[g]="access"===g?{}:r[g];for(var g in r.access)f.access[g]=r.access[g];f.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(e||null))};var m=(0,n[h])("accessor"===c?{get:d.get,set:d.set}:d[l],f);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(d.get=a),(a=o(m.set))&&(d.set=a),(a=o(m.init))&&i.unshift(a)}else(a=o(m))&&("field"===c?i.unshift(a):d[l]=a)}u&&Object.defineProperty(u,r.name,d),p=!0}function u(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var m=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||m(t,e,n)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function S(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function I(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function k(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=i[e](t)).value instanceof E?Promise.resolve(n.value.v).then(c,l):u(s[0][2],n)}catch(e){u(s[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function C(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:E(e[r](t)),done:!1}:i?i(t):t}:i}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function P(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var A=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&m(t,e,n);return A(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function M(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function R(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var D="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function j(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function i(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,(function(e){return t(e),i()}))}else r|=1}catch(e){t(e)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}const K={__extends:i,__assign:s,__rest:o,__decorate:a,__param:c,__metadata:h,__awaiter:f,__generator:g,__createBinding:m,__exportStar:y,__values:b,__read:v,__spread:S,__spreadArrays:w,__spreadArray:I,__await:E,__asyncGenerator:k,__asyncDelegator:C,__asyncValues:T,__makeTemplateObject:P,__importStar:_,__importDefault:O,__classPrivateFieldGet:x,__classPrivateFieldSet:M,__classPrivateFieldIn:R,__addDisposableResource:N,__disposeResources:j}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.m=t,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".js",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={792:1},r.f.require=(t,n)=>{e[t]||(t=>{var n=t.modules,i=t.ids,s=t.runtime;for(var o in n)r.o(n,o)&&(r.m[o]=n[o]);s&&s(r);for(var a=0;a<i.length;a++)e[i[a]]=1})(require("./"+r.u(t)))},(()=>{"use strict";var e=r(6278),t=r(9389),n=r(1208),i=r(7385);const s={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var o=r(1919),a=r(7503);class c extends i.TJ{constructor(e){super(e),Object.setPrototypeOf(this,c.prototype)}}class l extends c{constructor(e){super({name:"BadGatewayException",$fault:"server",...e}),this.name="BadGatewayException",this.$fault="server",Object.setPrototypeOf(this,l.prototype),this.Message=e.Message}}class u extends c{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,u.prototype),this.Message=e.Message}}class d extends c{constructor(e){super({name:"ConflictException",$fault:"client",...e}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,d.prototype),this.Message=e.Message}}class p extends c{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,p.prototype),this.Message=e.Message}}class h extends c{constructor(e){super({name:"GatewayTimeoutException",$fault:"server",...e}),this.name="GatewayTimeoutException",this.$fault="server",Object.setPrototypeOf(this,h.prototype),this.Message=e.Message}}class f extends c{constructor(e){super({name:"InternalServerErrorException",$fault:"server",...e}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,f.prototype),this.Message=e.Message}}class g extends c{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,g.prototype),this.Message=e.Message}}class m extends c{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,m.prototype),this.Message=e.Message}}class y extends c{constructor(e){super({name:"UnprocessableEntityException",$fault:"client",...e}),this.name="UnprocessableEntityException",this.$fault="client",Object.setPrototypeOf(this,y.prototype),this.Message=e.Message,this.ValidationErrors=e.ValidationErrors}}const b=async(e,t)=>{const n=(0,a.lI)(e,t);n.bp("/prod/channels");const r=(0,i.Tj)({[yt]:[()=>void 0!==e.MaxResults,()=>e[gt].toString()],[bt]:[,e[mt]]});return n.m("GET").h({}).q(r).b(void 0),n.build()},v=async(e,t)=>{const n=(0,a.lI)(e,t);return n.bp("/prod/channels/{ChannelId}/start"),n.p("ChannelId",(()=>e.ChannelId),"{ChannelId}",!1),n.m("POST").h({}).b(void 0),n.build()},S=async(e,t)=>{const n=(0,a.lI)(e,t);return n.bp("/prod/channels/{ChannelId}/stop"),n.p("ChannelId",(()=>e.ChannelId),"{ChannelId}",!1),n.m("POST").h({}).b(void 0),n.build()},w=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return k(e,t);const n=(0,i.Tj)({$metadata:ft(e)}),r=(0,i.Y0)((0,i.Xk)(await(0,o.Y2)(e.body,t)),"body"),s=(0,i.s)(r,{Channels:[,e=>j(e,t),"channels"],NextToken:[,i.lK,"nextToken"]});return Object.assign(n,s),n},I=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return k(e,t);const n=(0,i.Tj)({$metadata:ft(e)}),r=(0,i.Y0)((0,i.Xk)(await(0,o.Y2)(e.body,t)),"body"),s=(0,i.s)(r,{Arn:[,i.lK,"arn"],CdiInputSpecification:[,e=>J(e,t),"cdiInputSpecification"],ChannelClass:[,i.lK,"channelClass"],Destinations:[,e=>$(e,t),"destinations"],EgressEndpoints:[,e=>D(e,t),"egressEndpoints"],EncoderSettings:[,e=>se(e,t),"encoderSettings"],Id:[,i.lK,"id"],InputAttachments:[,e=>K(e,t),"inputAttachments"],InputSpecification:[,e=>Ee(e,t),"inputSpecification"],LogLevel:[,i.lK,"logLevel"],Maintenance:[,e=>Te(e,t),"maintenance"],Name:[,i.lK,"name"],PipelineDetails:[,e=>F(e,t),"pipelineDetails"],PipelinesRunningCount:[,i.ET,"pipelinesRunningCount"],RoleArn:[,i.lK,"roleArn"],State:[,i.lK,"state"],Tags:[,i.Ss,"tags"],Vpc:[,e=>dt(e,t),"vpc"]});return Object.assign(n,s),n},E=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return k(e,t);const n=(0,i.Tj)({$metadata:ft(e)}),r=(0,i.Y0)((0,i.Xk)(await(0,o.Y2)(e.body,t)),"body"),s=(0,i.s)(r,{Arn:[,i.lK,"arn"],CdiInputSpecification:[,e=>J(e,t),"cdiInputSpecification"],ChannelClass:[,i.lK,"channelClass"],Destinations:[,e=>$(e,t),"destinations"],EgressEndpoints:[,e=>D(e,t),"egressEndpoints"],EncoderSettings:[,e=>se(e,t),"encoderSettings"],Id:[,i.lK,"id"],InputAttachments:[,e=>K(e,t),"inputAttachments"],InputSpecification:[,e=>Ee(e,t),"inputSpecification"],LogLevel:[,i.lK,"logLevel"],Maintenance:[,e=>Te(e,t),"maintenance"],Name:[,i.lK,"name"],PipelineDetails:[,e=>F(e,t),"pipelineDetails"],PipelinesRunningCount:[,i.ET,"pipelinesRunningCount"],RoleArn:[,i.lK,"roleArn"],State:[,i.lK,"state"],Tags:[,i.Ss,"tags"],Vpc:[,e=>dt(e,t),"vpc"]});return Object.assign(n,s),n},k=async(e,t)=>{const n={...e,body:await(0,o.CG)(e.body,t)},r=(0,o.cJ)(e,n.body);switch(r){case"BadGatewayException":case"com.amazonaws.medialive#BadGatewayException":throw await T(n,t);case"BadRequestException":case"com.amazonaws.medialive#BadRequestException":throw await P(n,t);case"ConflictException":case"com.amazonaws.medialive#ConflictException":throw await A(n,t);case"ForbiddenException":case"com.amazonaws.medialive#ForbiddenException":throw await _(n,t);case"GatewayTimeoutException":case"com.amazonaws.medialive#GatewayTimeoutException":throw await O(n,t);case"InternalServerErrorException":case"com.amazonaws.medialive#InternalServerErrorException":throw await x(n,t);case"NotFoundException":case"com.amazonaws.medialive#NotFoundException":throw await M(n,t);case"TooManyRequestsException":case"com.amazonaws.medialive#TooManyRequestsException":throw await R(n,t);case"UnprocessableEntityException":case"com.amazonaws.medialive#UnprocessableEntityException":throw await N(n,t);default:const i=n.body;return C({output:e,parsedBody:i,errorCode:r})}},C=(0,i.jr)(c),T=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new l({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},P=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new u({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},A=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new d({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},_=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new p({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},O=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new h({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},x=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new f({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},M=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new g({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},R=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"]});Object.assign(n,s);const o=new m({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},N=async(e,t)=>{const n=(0,i.Tj)({}),r=e.body,s=(0,i.s)(r,{Message:[,i.lK,"message"],ValidationErrors:[,e=>L(e,t),"validationErrors"]});Object.assign(n,s);const o=new y({$metadata:ft(e),...n});return(0,i.Mw)(o,e.body)},D=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>Q(e,t)));return n},j=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>Y(e,t)));return n},K=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>ye(e,t)));return n},$=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>Re(e,t)));return n},F=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>Le(e,t)));return n},L=(e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>it(e,t)));return n},B=(e,t)=>(0,i.s)(e,{CannedAcl:[,i.lK,"cannedAcl"]}),U=(e,t)=>(0,i.s)(e,{AudioDashRoles:[,i.Ss,"audioDashRoles"],AudioNormalizationSettings:[,e=>q(e,t),"audioNormalizationSettings"],AudioSelectorName:[,i.lK,"audioSelectorName"],AudioType:[,i.lK,"audioType"],AudioTypeControl:[,i.lK,"audioTypeControl"],AudioWatermarkingSettings:[,e=>W(e,t),"audioWatermarkingSettings"],CodecSettings:[,e=>((e,t)=>(0,i.s)(e,{AacSettings:[,e=>(e=>(0,i.s)(e,{Bitrate:[,i.JW,"bitrate"],CodingMode:[,i.lK,"codingMode"],InputType:[,i.lK,"inputType"],Profile:[,i.lK,"profile"],RateControlMode:[,i.lK,"rateControlMode"],RawFormat:[,i.lK,"rawFormat"],SampleRate:[,i.JW,"sampleRate"],Spec:[,i.lK,"spec"],VbrQuality:[,i.lK,"vbrQuality"]}))(e),"aacSettings"],Ac3Settings:[,e=>(e=>(0,i.s)(e,{AttenuationControl:[,i.lK,"attenuationControl"],Bitrate:[,i.JW,"bitrate"],BitstreamMode:[,i.lK,"bitstreamMode"],CodingMode:[,i.lK,"codingMode"],Dialnorm:[,i.ET,"dialnorm"],DrcProfile:[,i.lK,"drcProfile"],LfeFilter:[,i.lK,"lfeFilter"],MetadataControl:[,i.lK,"metadataControl"]}))(e),"ac3Settings"],Eac3AtmosSettings:[,e=>te(e,t),"eac3AtmosSettings"],Eac3Settings:[,e=>ne(e,t),"eac3Settings"],Mp2Settings:[,e=>_e(e,t),"mp2Settings"],PassThroughSettings:[,i.Ss,"passThroughSettings"],WavSettings:[,e=>pt(e,t),"wavSettings"]}))(e,t),"codecSettings"],DvbDashAccessibility:[,i.lK,"dvbDashAccessibility"],LanguageCode:[,i.lK,"languageCode"],LanguageCodeControl:[,i.lK,"languageCodeControl"],Name:[,i.lK,"name"],RemixSettings:[,e=>Be(e,t),"remixSettings"],StreamName:[,i.lK,"streamName"]}),q=(e,t)=>(0,i.s)(e,{Algorithm:[,i.lK,"algorithm"],AlgorithmControl:[,i.lK,"algorithmControl"],TargetLkfs:[,i.JW,"targetLkfs"]}),V=(e,t)=>(0,i.s)(e,{AudioHlsRenditionSelection:[,e=>(e=>(0,i.s)(e,{GroupId:[,i.lK,"groupId"],Name:[,i.lK,"name"]}))(e),"audioHlsRenditionSelection"],AudioLanguageSelection:[,e=>(e=>(0,i.s)(e,{LanguageCode:[,i.lK,"languageCode"],LanguageSelectionPolicy:[,i.lK,"languageSelectionPolicy"]}))(e),"audioLanguageSelection"],AudioPidSelection:[,e=>(e=>(0,i.s)(e,{Pid:[,i.ET,"pid"]}))(e),"audioPidSelection"],AudioTrackSelection:[,e=>H(e,t),"audioTrackSelection"]}),H=(e,t)=>(0,i.s)(e,{DolbyEDecode:[,e=>(e=>(0,i.s)(e,{ProgramSelection:[,i.lK,"programSelection"]}))(e),"dolbyEDecode"],Tracks:[,e=>(e=>{const t=(e||[]).filter((e=>null!=e)).map((e=>(e=>(0,i.s)(e,{Track:[,i.ET,"track"]}))(e)));return t})(e),"tracks"]}),W=(e,t)=>(0,i.s)(e,{NielsenWatermarksSettings:[,e=>Me(e,t),"nielsenWatermarksSettings"]}),z=(e,t)=>(0,i.s)(e,{AribDestinationSettings:[,i.Ss,"aribDestinationSettings"],BurnInDestinationSettings:[,e=>((e,t)=>(0,i.s)(e,{Alignment:[,i.lK,"alignment"],BackgroundColor:[,i.lK,"backgroundColor"],BackgroundOpacity:[,i.ET,"backgroundOpacity"],Font:[,e=>ve(e,t),"font"],FontColor:[,i.lK,"fontColor"],FontOpacity:[,i.ET,"fontOpacity"],FontResolution:[,i.ET,"fontResolution"],FontSize:[,i.lK,"fontSize"],OutlineColor:[,i.lK,"outlineColor"],OutlineSize:[,i.ET,"outlineSize"],ShadowColor:[,i.lK,"shadowColor"],ShadowOpacity:[,i.ET,"shadowOpacity"],ShadowXOffset:[,i.ET,"shadowXOffset"],ShadowYOffset:[,i.ET,"shadowYOffset"],TeletextGridControl:[,i.lK,"teletextGridControl"],XPosition:[,i.ET,"xPosition"],YPosition:[,i.ET,"yPosition"]}))(e,t),"burnInDestinationSettings"],DvbSubDestinationSettings:[,e=>X(e,t),"dvbSubDestinationSettings"],EbuTtDDestinationSettings:[,e=>re(e,t),"ebuTtDDestinationSettings"],EmbeddedDestinationSettings:[,i.Ss,"embeddedDestinationSettings"],EmbeddedPlusScte20DestinationSettings:[,i.Ss,"embeddedPlusScte20DestinationSettings"],RtmpCaptionInfoDestinationSettings:[,i.Ss,"rtmpCaptionInfoDestinationSettings"],Scte20PlusEmbeddedDestinationSettings:[,i.Ss,"scte20PlusEmbeddedDestinationSettings"],Scte27DestinationSettings:[,i.Ss,"scte27DestinationSettings"],SmpteTtDestinationSettings:[,i.Ss,"smpteTtDestinationSettings"],TeletextDestinationSettings:[,i.Ss,"teletextDestinationSettings"],TtmlDestinationSettings:[,e=>tt(e,t),"ttmlDestinationSettings"],WebvttDestinationSettings:[,e=>ht(e,t),"webvttDestinationSettings"]}),G=(e,t)=>(0,i.s)(e,{AncillarySourceSettings:[,e=>(e=>(0,i.s)(e,{SourceAncillaryChannelNumber:[,i.ET,"sourceAncillaryChannelNumber"]}))(e),"ancillarySourceSettings"],AribSourceSettings:[,i.Ss,"aribSourceSettings"],DvbSubSourceSettings:[,e=>ee(e,t),"dvbSubSourceSettings"],EmbeddedSourceSettings:[,e=>ie(e,t),"embeddedSourceSettings"],Scte20SourceSettings:[,e=>Ve(e,t),"scte20SourceSettings"],Scte27SourceSettings:[,e=>He(e,t),"scte27SourceSettings"],TeletextSourceSettings:[,e=>Qe(e,t),"teletextSourceSettings"]}),J=(e,t)=>(0,i.s)(e,{Resolution:[,i.lK,"resolution"]}),Q=(e,t)=>(0,i.s)(e,{SourceIp:[,i.lK,"sourceIp"]}),Y=(e,t)=>(0,i.s)(e,{Arn:[,i.lK,"arn"],CdiInputSpecification:[,e=>J(e,t),"cdiInputSpecification"],ChannelClass:[,i.lK,"channelClass"],Destinations:[,e=>$(e,t),"destinations"],EgressEndpoints:[,e=>D(e,t),"egressEndpoints"],Id:[,i.lK,"id"],InputAttachments:[,e=>K(e,t),"inputAttachments"],InputSpecification:[,e=>Ee(e,t),"inputSpecification"],LogLevel:[,i.lK,"logLevel"],Maintenance:[,e=>Te(e,t),"maintenance"],Name:[,i.lK,"name"],PipelinesRunningCount:[,i.ET,"pipelinesRunningCount"],RoleArn:[,i.lK,"roleArn"],State:[,i.lK,"state"],Tags:[,i.Ss,"tags"],Vpc:[,e=>dt(e,t),"vpc"]}),Z=(e,t)=>(0,i.s)(e,{GlobalColorCorrections:[,e=>(e=>{const t=(e||[]).filter((e=>null!=e)).map((e=>(e=>(0,i.s)(e,{InputColorSpace:[,i.lK,"inputColorSpace"],OutputColorSpace:[,i.lK,"outputColorSpace"],Uri:[,i.lK,"uri"]}))(e)));return t})(e),"globalColorCorrections"]}),X=(e,t)=>(0,i.s)(e,{Alignment:[,i.lK,"alignment"],BackgroundColor:[,i.lK,"backgroundColor"],BackgroundOpacity:[,i.ET,"backgroundOpacity"],Font:[,e=>ve(e,t),"font"],FontColor:[,i.lK,"fontColor"],FontOpacity:[,i.ET,"fontOpacity"],FontResolution:[,i.ET,"fontResolution"],FontSize:[,i.lK,"fontSize"],OutlineColor:[,i.lK,"outlineColor"],OutlineSize:[,i.ET,"outlineSize"],ShadowColor:[,i.lK,"shadowColor"],ShadowOpacity:[,i.ET,"shadowOpacity"],ShadowXOffset:[,i.ET,"shadowXOffset"],ShadowYOffset:[,i.ET,"shadowYOffset"],TeletextGridControl:[,i.lK,"teletextGridControl"],XPosition:[,i.ET,"xPosition"],YPosition:[,i.ET,"yPosition"]}),ee=(e,t)=>(0,i.s)(e,{OcrLanguage:[,i.lK,"ocrLanguage"],Pid:[,i.ET,"pid"]}),te=(e,t)=>(0,i.s)(e,{Bitrate:[,i.JW,"bitrate"],CodingMode:[,i.lK,"codingMode"],Dialnorm:[,i.ET,"dialnorm"],DrcLine:[,i.lK,"drcLine"],DrcRf:[,i.lK,"drcRf"],HeightTrim:[,i.JW,"heightTrim"],SurroundTrim:[,i.JW,"surroundTrim"]}),ne=(e,t)=>(0,i.s)(e,{AttenuationControl:[,i.lK,"attenuationControl"],Bitrate:[,i.JW,"bitrate"],BitstreamMode:[,i.lK,"bitstreamMode"],CodingMode:[,i.lK,"codingMode"],DcFilter:[,i.lK,"dcFilter"],Dialnorm:[,i.ET,"dialnorm"],DrcLine:[,i.lK,"drcLine"],DrcRf:[,i.lK,"drcRf"],LfeControl:[,i.lK,"lfeControl"],LfeFilter:[,i.lK,"lfeFilter"],LoRoCenterMixLevel:[,i.JW,"loRoCenterMixLevel"],LoRoSurroundMixLevel:[,i.JW,"loRoSurroundMixLevel"],LtRtCenterMixLevel:[,i.JW,"ltRtCenterMixLevel"],LtRtSurroundMixLevel:[,i.JW,"ltRtSurroundMixLevel"],MetadataControl:[,i.lK,"metadataControl"],PassthroughControl:[,i.lK,"passthroughControl"],PhaseControl:[,i.lK,"phaseControl"],StereoDownmix:[,i.lK,"stereoDownmix"],SurroundExMode:[,i.lK,"surroundExMode"],SurroundMode:[,i.lK,"surroundMode"]}),re=(e,t)=>(0,i.s)(e,{CopyrightHolder:[,i.lK,"copyrightHolder"],FillLineGap:[,i.lK,"fillLineGap"],FontFamily:[,i.lK,"fontFamily"],StyleControl:[,i.lK,"styleControl"]}),ie=(e,t)=>(0,i.s)(e,{Convert608To708:[,i.lK,"convert608To708"],Scte20Detection:[,i.lK,"scte20Detection"],Source608ChannelNumber:[,i.ET,"source608ChannelNumber"],Source608TrackNumber:[,i.ET,"source608TrackNumber"]}),se=(e,t)=>(0,i.s)(e,{AudioDescriptions:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>U(e,t)));return n})(e,t),"audioDescriptions"],AvailBlanking:[,e=>((e,t)=>(0,i.s)(e,{AvailBlankingImage:[,e=>ve(e,t),"availBlankingImage"],State:[,i.lK,"state"]}))(e,t),"availBlanking"],AvailConfiguration:[,e=>((e,t)=>(0,i.s)(e,{AvailSettings:[,e=>((e,t)=>(0,i.s)(e,{Esam:[,e=>oe(e,t),"esam"],Scte35SpliceInsert:[,e=>We(e,t),"scte35SpliceInsert"],Scte35TimeSignalApos:[,e=>ze(e,t),"scte35TimeSignalApos"]}))(e,t),"availSettings"],Scte35SegmentationScope:[,i.lK,"scte35SegmentationScope"]}))(e,t),"availConfiguration"],BlackoutSlate:[,e=>((e,t)=>(0,i.s)(e,{BlackoutSlateImage:[,e=>ve(e,t),"blackoutSlateImage"],NetworkEndBlackout:[,i.lK,"networkEndBlackout"],NetworkEndBlackoutImage:[,e=>ve(e,t),"networkEndBlackoutImage"],NetworkId:[,i.lK,"networkId"],State:[,i.lK,"state"]}))(e,t),"blackoutSlate"],CaptionDescriptions:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>(0,i.s)(e,{Accessibility:[,i.lK,"accessibility"],CaptionDashRoles:[,i.Ss,"captionDashRoles"],CaptionSelectorName:[,i.lK,"captionSelectorName"],DestinationSettings:[,e=>z(e,t),"destinationSettings"],DvbDashAccessibility:[,i.lK,"dvbDashAccessibility"],LanguageCode:[,i.lK,"languageCode"],LanguageDescription:[,i.lK,"languageDescription"],Name:[,i.lK,"name"]}))(e,t)));return n})(e,t),"captionDescriptions"],ColorCorrectionSettings:[,e=>Z(e),"colorCorrectionSettings"],FeatureActivations:[,e=>le(e,t),"featureActivations"],GlobalConfiguration:[,e=>de(e,t),"globalConfiguration"],MotionGraphicsConfiguration:[,e=>Pe(e,t),"motionGraphicsConfiguration"],NielsenConfiguration:[,e=>xe(e,t),"nielsenConfiguration"],OutputGroups:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>De(e,t)));return n})(e,t),"outputGroups"],ThumbnailConfiguration:[,e=>Ze(e,t),"thumbnailConfiguration"],TimecodeConfig:[,e=>et(e,t),"timecodeConfig"],VideoDescriptions:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>at(e,t)));return n})(e,t),"videoDescriptions"]}),oe=(e,t)=>(0,i.s)(e,{AcquisitionPointId:[,i.lK,"acquisitionPointId"],AdAvailOffset:[,i.ET,"adAvailOffset"],PasswordParam:[,i.lK,"passwordParam"],PoisEndpoint:[,i.lK,"poisEndpoint"],Username:[,i.lK,"username"],ZoneIdentity:[,i.lK,"zoneIdentity"]}),ae=(e,t)=>(0,i.s)(e,{FailoverConditionSettings:[,e=>ce(e,t),"failoverConditionSettings"]}),ce=(e,t)=>(0,i.s)(e,{AudioSilenceSettings:[,e=>(e=>(0,i.s)(e,{AudioSelectorName:[,i.lK,"audioSelectorName"],AudioSilenceThresholdMsec:[,i.ET,"audioSilenceThresholdMsec"]}))(e),"audioSilenceSettings"],InputLossSettings:[,e=>we(e,t),"inputLossSettings"],VideoBlackSettings:[,e=>st(e,t),"videoBlackSettings"]}),le=(e,t)=>(0,i.s)(e,{InputPrepareScheduleActions:[,i.lK,"inputPrepareScheduleActions"],OutputStaticImageOverlayScheduleActions:[,i.lK,"outputStaticImageOverlayScheduleActions"]}),ue=(e,t)=>(0,i.s)(e,{CannedAcl:[,i.lK,"cannedAcl"]}),de=(e,t)=>(0,i.s)(e,{InitialAudioGain:[,i.ET,"initialAudioGain"],InputEndAction:[,i.lK,"inputEndAction"],InputLossBehavior:[,e=>Se(e,t),"inputLossBehavior"],OutputLockingMode:[,i.lK,"outputLockingMode"],OutputLockingSettings:[,e=>$e(e,t),"outputLockingSettings"],OutputTimingSource:[,i.lK,"outputTimingSource"],SupportLowFramerateInputs:[,i.lK,"supportLowFramerateInputs"]}),pe=(e,t)=>(0,i.s)(e,{MaxCll:[,i.ET,"maxCll"],MaxFall:[,i.ET,"maxFall"]}),he=(e,t)=>(0,i.s)(e,{AdMarkers:[,i.Ss,"adMarkers"],BaseUrlContent:[,i.lK,"baseUrlContent"],BaseUrlContent1:[,i.lK,"baseUrlContent1"],BaseUrlManifest:[,i.lK,"baseUrlManifest"],BaseUrlManifest1:[,i.lK,"baseUrlManifest1"],CaptionLanguageMappings:[,e=>(e=>{const t=(e||[]).filter((e=>null!=e)).map((e=>(e=>(0,i.s)(e,{CaptionChannel:[,i.ET,"captionChannel"],LanguageCode:[,i.lK,"languageCode"],LanguageDescription:[,i.lK,"languageDescription"]}))(e)));return t})(e),"captionLanguageMappings"],CaptionLanguageSetting:[,i.lK,"captionLanguageSetting"],ClientCache:[,i.lK,"clientCache"],CodecSpecification:[,i.lK,"codecSpecification"],ConstantIv:[,i.lK,"constantIv"],Destination:[,e=>Ke(e,t),"destination"],DirectoryStructure:[,i.lK,"directoryStructure"],DiscontinuityTags:[,i.lK,"discontinuityTags"],EncryptionType:[,i.lK,"encryptionType"],HlsCdnSettings:[,e=>((e,t)=>(0,i.s)(e,{HlsAkamaiSettings:[,e=>(e=>(0,i.s)(e,{ConnectionRetryInterval:[,i.ET,"connectionRetryInterval"],FilecacheDuration:[,i.ET,"filecacheDuration"],HttpTransferMode:[,i.lK,"httpTransferMode"],NumRetries:[,i.ET,"numRetries"],RestartDelay:[,i.ET,"restartDelay"],Salt:[,i.lK,"salt"],Token:[,i.lK,"token"]}))(e),"hlsAkamaiSettings"],HlsBasicPutSettings:[,e=>(e=>(0,i.s)(e,{ConnectionRetryInterval:[,i.ET,"connectionRetryInterval"],FilecacheDuration:[,i.ET,"filecacheDuration"],NumRetries:[,i.ET,"numRetries"],RestartDelay:[,i.ET,"restartDelay"]}))(e),"hlsBasicPutSettings"],HlsMediaStoreSettings:[,e=>fe(e,t),"hlsMediaStoreSettings"],HlsS3Settings:[,e=>ge(e,t),"hlsS3Settings"],HlsWebdavSettings:[,e=>me(e,t),"hlsWebdavSettings"]}))(e,t),"hlsCdnSettings"],HlsId3SegmentTagging:[,i.lK,"hlsId3SegmentTagging"],IFrameOnlyPlaylists:[,i.lK,"iFrameOnlyPlaylists"],IncompleteSegmentBehavior:[,i.lK,"incompleteSegmentBehavior"],IndexNSegments:[,i.ET,"indexNSegments"],InputLossAction:[,i.lK,"inputLossAction"],IvInManifest:[,i.lK,"ivInManifest"],IvSource:[,i.lK,"ivSource"],KeepSegments:[,i.ET,"keepSegments"],KeyFormat:[,i.lK,"keyFormat"],KeyFormatVersions:[,i.lK,"keyFormatVersions"],KeyProviderSettings:[,e=>ke(e,t),"keyProviderSettings"],ManifestCompression:[,i.lK,"manifestCompression"],ManifestDurationFormat:[,i.lK,"manifestDurationFormat"],MinSegmentLength:[,i.ET,"minSegmentLength"],Mode:[,i.lK,"mode"],OutputSelection:[,i.lK,"outputSelection"],ProgramDateTime:[,i.lK,"programDateTime"],ProgramDateTimeClock:[,i.lK,"programDateTimeClock"],ProgramDateTimePeriod:[,i.ET,"programDateTimePeriod"],RedundantManifest:[,i.lK,"redundantManifest"],SegmentLength:[,i.ET,"segmentLength"],SegmentationMode:[,i.lK,"segmentationMode"],SegmentsPerSubdirectory:[,i.ET,"segmentsPerSubdirectory"],StreamInfResolution:[,i.lK,"streamInfResolution"],TimedMetadataId3Frame:[,i.lK,"timedMetadataId3Frame"],TimedMetadataId3Period:[,i.ET,"timedMetadataId3Period"],TimestampDeltaMilliseconds:[,i.ET,"timestampDeltaMilliseconds"],TsFileMode:[,i.lK,"tsFileMode"]}),fe=(e,t)=>(0,i.s)(e,{ConnectionRetryInterval:[,i.ET,"connectionRetryInterval"],FilecacheDuration:[,i.ET,"filecacheDuration"],MediaStoreStorageClass:[,i.lK,"mediaStoreStorageClass"],NumRetries:[,i.ET,"numRetries"],RestartDelay:[,i.ET,"restartDelay"]}),ge=(e,t)=>(0,i.s)(e,{CannedAcl:[,i.lK,"cannedAcl"]}),me=(e,t)=>(0,i.s)(e,{ConnectionRetryInterval:[,i.ET,"connectionRetryInterval"],FilecacheDuration:[,i.ET,"filecacheDuration"],HttpTransferMode:[,i.lK,"httpTransferMode"],NumRetries:[,i.ET,"numRetries"],RestartDelay:[,i.ET,"restartDelay"]}),ye=(e,t)=>(0,i.s)(e,{AutomaticInputFailoverSettings:[,e=>((e,t)=>(0,i.s)(e,{ErrorClearTimeMsec:[,i.ET,"errorClearTimeMsec"],FailoverConditions:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>ae(e,t)));return n})(e,t),"failoverConditions"],InputPreference:[,i.lK,"inputPreference"],SecondaryInputId:[,i.lK,"secondaryInputId"]}))(e,t),"automaticInputFailoverSettings"],InputAttachmentName:[,i.lK,"inputAttachmentName"],InputId:[,i.lK,"inputId"],InputSettings:[,e=>Ie(e,t),"inputSettings"]}),be=(e,t)=>(0,i.s)(e,{Gain:[,i.ET,"gain"],InputChannel:[,i.ET,"inputChannel"]}),ve=(e,t)=>(0,i.s)(e,{PasswordParam:[,i.lK,"passwordParam"],Uri:[,i.lK,"uri"],Username:[,i.lK,"username"]}),Se=(e,t)=>(0,i.s)(e,{BlackFrameMsec:[,i.ET,"blackFrameMsec"],InputLossImageColor:[,i.lK,"inputLossImageColor"],InputLossImageSlate:[,e=>ve(e,t),"inputLossImageSlate"],InputLossImageType:[,i.lK,"inputLossImageType"],RepeatFrameMsec:[,i.ET,"repeatFrameMsec"]}),we=(e,t)=>(0,i.s)(e,{InputLossThresholdMsec:[,i.ET,"inputLossThresholdMsec"]}),Ie=(e,t)=>(0,i.s)(e,{AudioSelectors:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>(0,i.s)(e,{Name:[,i.lK,"name"],SelectorSettings:[,e=>V(e,t),"selectorSettings"]}))(e,t)));return n})(e,t),"audioSelectors"],CaptionSelectors:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>(0,i.s)(e,{LanguageCode:[,i.lK,"languageCode"],Name:[,i.lK,"name"],SelectorSettings:[,e=>G(e,t),"selectorSettings"]}))(e,t)));return n})(e,t),"captionSelectors"],DeblockFilter:[,i.lK,"deblockFilter"],DenoiseFilter:[,i.lK,"denoiseFilter"],FilterStrength:[,i.ET,"filterStrength"],InputFilter:[,i.lK,"inputFilter"],NetworkInputSettings:[,e=>Oe(e,t),"networkInputSettings"],Scte35Pid:[,i.ET,"scte35Pid"],Smpte2038DataPreference:[,i.lK,"smpte2038DataPreference"],SourceEndBehavior:[,i.lK,"sourceEndBehavior"],VideoSelector:[,e=>ct(e,t),"videoSelector"]}),Ee=(e,t)=>(0,i.s)(e,{Codec:[,i.lK,"codec"],MaximumBitrate:[,i.lK,"maximumBitrate"],Resolution:[,i.lK,"resolution"]}),ke=(e,t)=>(0,i.s)(e,{StaticKeySettings:[,e=>Je(e,t),"staticKeySettings"]}),Ce=(e,t)=>(0,i.s)(e,{AbsentInputAudioBehavior:[,i.lK,"absentInputAudioBehavior"],Arib:[,i.lK,"arib"],AribCaptionsPid:[,i.lK,"aribCaptionsPid"],AribCaptionsPidControl:[,i.lK,"aribCaptionsPidControl"],AudioBufferModel:[,i.lK,"audioBufferModel"],AudioFramesPerPes:[,i.ET,"audioFramesPerPes"],AudioPids:[,i.lK,"audioPids"],AudioStreamType:[,i.lK,"audioStreamType"],Bitrate:[,i.ET,"bitrate"],BufferModel:[,i.lK,"bufferModel"],CcDescriptor:[,i.lK,"ccDescriptor"],DvbNitSettings:[,e=>(e=>(0,i.s)(e,{NetworkId:[,i.ET,"networkId"],NetworkName:[,i.lK,"networkName"],RepInterval:[,i.ET,"repInterval"]}))(e),"dvbNitSettings"],DvbSdtSettings:[,e=>(e=>(0,i.s)(e,{OutputSdt:[,i.lK,"outputSdt"],RepInterval:[,i.ET,"repInterval"],ServiceName:[,i.lK,"serviceName"],ServiceProviderName:[,i.lK,"serviceProviderName"]}))(e),"dvbSdtSettings"],DvbSubPids:[,i.lK,"dvbSubPids"],DvbTdtSettings:[,e=>(e=>(0,i.s)(e,{RepInterval:[,i.ET,"repInterval"]}))(e),"dvbTdtSettings"],DvbTeletextPid:[,i.lK,"dvbTeletextPid"],Ebif:[,i.lK,"ebif"],EbpAudioInterval:[,i.lK,"ebpAudioInterval"],EbpLookaheadMs:[,i.ET,"ebpLookaheadMs"],EbpPlacement:[,i.lK,"ebpPlacement"],EcmPid:[,i.lK,"ecmPid"],EsRateInPes:[,i.lK,"esRateInPes"],EtvPlatformPid:[,i.lK,"etvPlatformPid"],EtvSignalPid:[,i.lK,"etvSignalPid"],FragmentTime:[,i.JW,"fragmentTime"],Klv:[,i.lK,"klv"],KlvDataPids:[,i.lK,"klvDataPids"],NielsenId3Behavior:[,i.lK,"nielsenId3Behavior"],NullPacketBitrate:[,i.JW,"nullPacketBitrate"],PatInterval:[,i.ET,"patInterval"],PcrControl:[,i.lK,"pcrControl"],PcrPeriod:[,i.ET,"pcrPeriod"],PcrPid:[,i.lK,"pcrPid"],PmtInterval:[,i.ET,"pmtInterval"],PmtPid:[,i.lK,"pmtPid"],ProgramNum:[,i.ET,"programNum"],RateMode:[,i.lK,"rateMode"],Scte27Pids:[,i.lK,"scte27Pids"],Scte35Control:[,i.lK,"scte35Control"],Scte35Pid:[,i.lK,"scte35Pid"],Scte35PrerollPullupMilliseconds:[,i.JW,"scte35PrerollPullupMilliseconds"],SegmentationMarkers:[,i.lK,"segmentationMarkers"],SegmentationStyle:[,i.lK,"segmentationStyle"],SegmentationTime:[,i.JW,"segmentationTime"],TimedMetadataBehavior:[,i.lK,"timedMetadataBehavior"],TimedMetadataPid:[,i.lK,"timedMetadataPid"],TransportStreamId:[,i.ET,"transportStreamId"],VideoPid:[,i.lK,"videoPid"]}),Te=(e,t)=>(0,i.s)(e,{MaintenanceDay:[,i.lK,"maintenanceDay"],MaintenanceDeadline:[,i.lK,"maintenanceDeadline"],MaintenanceScheduledDate:[,i.lK,"maintenanceScheduledDate"],MaintenanceStartTime:[,i.lK,"maintenanceStartTime"]}),Pe=(e,t)=>(0,i.s)(e,{MotionGraphicsInsertion:[,i.lK,"motionGraphicsInsertion"],MotionGraphicsSettings:[,e=>Ae(e,t),"motionGraphicsSettings"]}),Ae=(e,t)=>(0,i.s)(e,{HtmlMotionGraphicsSettings:[,i.Ss,"htmlMotionGraphicsSettings"]}),_e=(e,t)=>(0,i.s)(e,{Bitrate:[,i.JW,"bitrate"],CodingMode:[,i.lK,"codingMode"],SampleRate:[,i.JW,"sampleRate"]}),Oe=(e,t)=>(0,i.s)(e,{HlsInputSettings:[,e=>(e=>(0,i.s)(e,{Bandwidth:[,i.ET,"bandwidth"],BufferSegments:[,i.ET,"bufferSegments"],Retries:[,i.ET,"retries"],RetryInterval:[,i.ET,"retryInterval"],Scte35Source:[,i.lK,"scte35Source"]}))(e),"hlsInputSettings"],ServerValidation:[,i.lK,"serverValidation"]}),xe=(e,t)=>(0,i.s)(e,{DistributorId:[,i.lK,"distributorId"],NielsenPcmToId3Tagging:[,i.lK,"nielsenPcmToId3Tagging"]}),Me=(e,t)=>(0,i.s)(e,{NielsenCbetSettings:[,e=>(e=>(0,i.s)(e,{CbetCheckDigitString:[,i.lK,"cbetCheckDigitString"],CbetStepaside:[,i.lK,"cbetStepaside"],Csid:[,i.lK,"csid"]}))(e),"nielsenCbetSettings"],NielsenDistributionType:[,i.lK,"nielsenDistributionType"],NielsenNaesIiNwSettings:[,e=>(e=>(0,i.s)(e,{CheckDigitString:[,i.lK,"checkDigitString"],Sid:[,i.JW,"sid"],Timezone:[,i.lK,"timezone"]}))(e),"nielsenNaesIiNwSettings"]}),Re=(e,t)=>(0,i.s)(e,{Id:[,i.lK,"id"],MediaPackageSettings:[,e=>(e=>{const t=(e||[]).filter((e=>null!=e)).map((e=>(e=>(0,i.s)(e,{ChannelId:[,i.lK,"channelId"]}))(e)));return t})(e),"mediaPackageSettings"],MultiplexSettings:[,e=>(e=>(0,i.s)(e,{MultiplexId:[,i.lK,"multiplexId"],ProgramName:[,i.lK,"programName"]}))(e),"multiplexSettings"],Settings:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>Ne(e,t)));return n})(e,t),"settings"]}),Ne=(e,t)=>(0,i.s)(e,{PasswordParam:[,i.lK,"passwordParam"],StreamName:[,i.lK,"streamName"],Url:[,i.lK,"url"],Username:[,i.lK,"username"]}),De=(e,t)=>(0,i.s)(e,{Name:[,i.lK,"name"],OutputGroupSettings:[,e=>je(e,t),"outputGroupSettings"],Outputs:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>(0,i.s)(e,{AudioDescriptionNames:[,i.Ss,"audioDescriptionNames"],CaptionDescriptionNames:[,i.Ss,"captionDescriptionNames"],OutputName:[,i.lK,"outputName"],OutputSettings:[,e=>Fe(e,t),"outputSettings"],VideoDescriptionName:[,i.lK,"videoDescriptionName"]}))(e,t)));return n})(e,t),"outputs"]}),je=(e,t)=>(0,i.s)(e,{ArchiveGroupSettings:[,e=>((e,t)=>(0,i.s)(e,{ArchiveCdnSettings:[,e=>((e,t)=>(0,i.s)(e,{ArchiveS3Settings:[,e=>B(e,t),"archiveS3Settings"]}))(e,t),"archiveCdnSettings"],Destination:[,e=>Ke(e,t),"destination"],RolloverInterval:[,i.ET,"rolloverInterval"]}))(e,t),"archiveGroupSettings"],CmafIngestGroupSettings:[,e=>((e,t)=>(0,i.s)(e,{Destination:[,e=>Ke(e,t),"destination"],NielsenId3Behavior:[,i.lK,"nielsenId3Behavior"],Scte35Type:[,i.lK,"scte35Type"],SegmentLength:[,i.ET,"segmentLength"],SegmentLengthUnits:[,i.lK,"segmentLengthUnits"],SendDelayMs:[,i.ET,"sendDelayMs"]}))(e,t),"cmafIngestGroupSettings"],FrameCaptureGroupSettings:[,e=>((e,t)=>(0,i.s)(e,{Destination:[,e=>Ke(e,t),"destination"],FrameCaptureCdnSettings:[,e=>((e,t)=>(0,i.s)(e,{FrameCaptureS3Settings:[,e=>ue(e,t),"frameCaptureS3Settings"]}))(e,t),"frameCaptureCdnSettings"]}))(e,t),"frameCaptureGroupSettings"],HlsGroupSettings:[,e=>he(e,t),"hlsGroupSettings"],MediaPackageGroupSettings:[,e=>((e,t)=>(0,i.s)(e,{Destination:[,e=>Ke(e,t),"destination"]}))(e,t),"mediaPackageGroupSettings"],MsSmoothGroupSettings:[,e=>((e,t)=>(0,i.s)(e,{AcquisitionPointId:[,i.lK,"acquisitionPointId"],AudioOnlyTimecodeControl:[,i.lK,"audioOnlyTimecodeControl"],CertificateMode:[,i.lK,"certificateMode"],ConnectionRetryInterval:[,i.ET,"connectionRetryInterval"],Destination:[,e=>Ke(e,t),"destination"],EventId:[,i.lK,"eventId"],EventIdMode:[,i.lK,"eventIdMode"],EventStopBehavior:[,i.lK,"eventStopBehavior"],FilecacheDuration:[,i.ET,"filecacheDuration"],FragmentLength:[,i.ET,"fragmentLength"],InputLossAction:[,i.lK,"inputLossAction"],NumRetries:[,i.ET,"numRetries"],RestartDelay:[,i.ET,"restartDelay"],SegmentationMode:[,i.lK,"segmentationMode"],SendDelayMs:[,i.ET,"sendDelayMs"],SparseTrackType:[,i.lK,"sparseTrackType"],StreamManifestBehavior:[,i.lK,"streamManifestBehavior"],TimestampOffset:[,i.lK,"timestampOffset"],TimestampOffsetMode:[,i.lK,"timestampOffsetMode"]}))(e,t),"msSmoothGroupSettings"],MultiplexGroupSettings:[,i.Ss,"multiplexGroupSettings"],RtmpGroupSettings:[,e=>Ue(e,t),"rtmpGroupSettings"],UdpGroupSettings:[,e=>nt(e,t),"udpGroupSettings"]}),Ke=(e,t)=>(0,i.s)(e,{DestinationRefId:[,i.lK,"destinationRefId"]}),$e=(e,t)=>(0,i.s)(e,{EpochLockingSettings:[,e=>(e=>(0,i.s)(e,{CustomEpoch:[,i.lK,"customEpoch"],JamSyncTime:[,i.lK,"jamSyncTime"]}))(e),"epochLockingSettings"],PipelineLockingSettings:[,i.Ss,"pipelineLockingSettings"]}),Fe=(e,t)=>(0,i.s)(e,{ArchiveOutputSettings:[,e=>((e,t)=>(0,i.s)(e,{ContainerSettings:[,e=>((e,t)=>(0,i.s)(e,{M2tsSettings:[,e=>Ce(e,t),"m2tsSettings"],RawSettings:[,i.Ss,"rawSettings"]}))(e,t),"containerSettings"],Extension:[,i.lK,"extension"],NameModifier:[,i.lK,"nameModifier"]}))(e,t),"archiveOutputSettings"],CmafIngestOutputSettings:[,e=>(e=>(0,i.s)(e,{NameModifier:[,i.lK,"nameModifier"]}))(e),"cmafIngestOutputSettings"],FrameCaptureOutputSettings:[,e=>(e=>(0,i.s)(e,{NameModifier:[,i.lK,"nameModifier"]}))(e),"frameCaptureOutputSettings"],HlsOutputSettings:[,e=>((e,t)=>(0,i.s)(e,{H265PackagingType:[,i.lK,"h265PackagingType"],HlsSettings:[,e=>((e,t)=>(0,i.s)(e,{AudioOnlyHlsSettings:[,e=>((e,t)=>(0,i.s)(e,{AudioGroupId:[,i.lK,"audioGroupId"],AudioOnlyImage:[,e=>ve(e,t),"audioOnlyImage"],AudioTrackType:[,i.lK,"audioTrackType"],SegmentType:[,i.lK,"segmentType"]}))(e,t),"audioOnlyHlsSettings"],Fmp4HlsSettings:[,e=>(e=>(0,i.s)(e,{AudioRenditionSets:[,i.lK,"audioRenditionSets"],NielsenId3Behavior:[,i.lK,"nielsenId3Behavior"],TimedMetadataBehavior:[,i.lK,"timedMetadataBehavior"]}))(e),"fmp4HlsSettings"],FrameCaptureHlsSettings:[,i.Ss,"frameCaptureHlsSettings"],StandardHlsSettings:[,e=>Ge(e,t),"standardHlsSettings"]}))(e,t),"hlsSettings"],NameModifier:[,i.lK,"nameModifier"],SegmentModifier:[,i.lK,"segmentModifier"]}))(e,t),"hlsOutputSettings"],MediaPackageOutputSettings:[,i.Ss,"mediaPackageOutputSettings"],MsSmoothOutputSettings:[,e=>(e=>(0,i.s)(e,{H265PackagingType:[,i.lK,"h265PackagingType"],NameModifier:[,i.lK,"nameModifier"]}))(e),"msSmoothOutputSettings"],MultiplexOutputSettings:[,e=>((e,t)=>(0,i.s)(e,{Destination:[,e=>Ke(e,t),"destination"]}))(e,t),"multiplexOutputSettings"],RtmpOutputSettings:[,e=>qe(e,t),"rtmpOutputSettings"],UdpOutputSettings:[,e=>rt(e,t),"udpOutputSettings"]}),Le=(e,t)=>(0,i.s)(e,{ActiveInputAttachmentName:[,i.lK,"activeInputAttachmentName"],ActiveInputSwitchActionName:[,i.lK,"activeInputSwitchActionName"],ActiveMotionGraphicsActionName:[,i.lK,"activeMotionGraphicsActionName"],ActiveMotionGraphicsUri:[,i.lK,"activeMotionGraphicsUri"],PipelineId:[,i.lK,"pipelineId"]}),Be=(e,t)=>(0,i.s)(e,{ChannelMappings:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>((e,t)=>(0,i.s)(e,{InputChannelLevels:[,e=>((e,t)=>{const n=(e||[]).filter((e=>null!=e)).map((e=>be(e,t)));return n})(e,t),"inputChannelLevels"],OutputChannel:[,i.ET,"outputChannel"]}))(e,t)));return n})(e,t),"channelMappings"],ChannelsIn:[,i.ET,"channelsIn"],ChannelsOut:[,i.ET,"channelsOut"]}),Ue=(e,t)=>(0,i.s)(e,{AdMarkers:[,i.Ss,"adMarkers"],AuthenticationScheme:[,i.lK,"authenticationScheme"],CacheFullBehavior:[,i.lK,"cacheFullBehavior"],CacheLength:[,i.ET,"cacheLength"],CaptionData:[,i.lK,"captionData"],IncludeFillerNalUnits:[,i.lK,"includeFillerNalUnits"],InputLossAction:[,i.lK,"inputLossAction"],RestartDelay:[,i.ET,"restartDelay"]}),qe=(e,t)=>(0,i.s)(e,{CertificateMode:[,i.lK,"certificateMode"],ConnectionRetryInterval:[,i.ET,"connectionRetryInterval"],Destination:[,e=>Ke(e,t),"destination"],NumRetries:[,i.ET,"numRetries"]}),Ve=(e,t)=>(0,i.s)(e,{Convert608To708:[,i.lK,"convert608To708"],Source608ChannelNumber:[,i.ET,"source608ChannelNumber"]}),He=(e,t)=>(0,i.s)(e,{OcrLanguage:[,i.lK,"ocrLanguage"],Pid:[,i.ET,"pid"]}),We=(e,t)=>(0,i.s)(e,{AdAvailOffset:[,i.ET,"adAvailOffset"],NoRegionalBlackoutFlag:[,i.lK,"noRegionalBlackoutFlag"],WebDeliveryAllowedFlag:[,i.lK,"webDeliveryAllowedFlag"]}),ze=(e,t)=>(0,i.s)(e,{AdAvailOffset:[,i.ET,"adAvailOffset"],NoRegionalBlackoutFlag:[,i.lK,"noRegionalBlackoutFlag"],WebDeliveryAllowedFlag:[,i.lK,"webDeliveryAllowedFlag"]}),Ge=(e,t)=>(0,i.s)(e,{AudioRenditionSets:[,i.lK,"audioRenditionSets"],M3u8Settings:[,e=>(e=>(0,i.s)(e,{AudioFramesPerPes:[,i.ET,"audioFramesPerPes"],AudioPids:[,i.lK,"audioPids"],EcmPid:[,i.lK,"ecmPid"],KlvBehavior:[,i.lK,"klvBehavior"],KlvDataPids:[,i.lK,"klvDataPids"],NielsenId3Behavior:[,i.lK,"nielsenId3Behavior"],PatInterval:[,i.ET,"patInterval"],PcrControl:[,i.lK,"pcrControl"],PcrPeriod:[,i.ET,"pcrPeriod"],PcrPid:[,i.lK,"pcrPid"],PmtInterval:[,i.ET,"pmtInterval"],PmtPid:[,i.lK,"pmtPid"],ProgramNum:[,i.ET,"programNum"],Scte35Behavior:[,i.lK,"scte35Behavior"],Scte35Pid:[,i.lK,"scte35Pid"],TimedMetadataBehavior:[,i.lK,"timedMetadataBehavior"],TimedMetadataPid:[,i.lK,"timedMetadataPid"],TransportStreamId:[,i.ET,"transportStreamId"],VideoPid:[,i.lK,"videoPid"]}))(e),"m3u8Settings"]}),Je=(e,t)=>(0,i.s)(e,{KeyProviderServer:[,e=>ve(e,t),"keyProviderServer"],StaticKeyValue:[,i.lK,"staticKeyValue"]}),Qe=(e,t)=>(0,i.s)(e,{OutputRectangle:[,e=>(e=>(0,i.s)(e,{Height:[,i.JW,"height"],LeftOffset:[,i.JW,"leftOffset"],TopOffset:[,i.JW,"topOffset"],Width:[,i.JW,"width"]}))(e),"outputRectangle"],PageNumber:[,i.lK,"pageNumber"]}),Ye=(e,t)=>(0,i.s)(e,{PostFilterSharpening:[,i.lK,"postFilterSharpening"],Strength:[,i.lK,"strength"]}),Ze=(e,t)=>(0,i.s)(e,{State:[,i.lK,"state"]}),Xe=(e,t)=>(0,i.s)(e,{FontSize:[,i.lK,"fontSize"],Position:[,i.lK,"position"],Prefix:[,i.lK,"prefix"]}),et=(e,t)=>(0,i.s)(e,{Source:[,i.lK,"source"],SyncThreshold:[,i.ET,"syncThreshold"]}),tt=(e,t)=>(0,i.s)(e,{StyleControl:[,i.lK,"styleControl"]}),nt=(e,t)=>(0,i.s)(e,{InputLossAction:[,i.lK,"inputLossAction"],TimedMetadataId3Frame:[,i.lK,"timedMetadataId3Frame"],TimedMetadataId3Period:[,i.ET,"timedMetadataId3Period"]}),rt=(e,t)=>(0,i.s)(e,{BufferMsec:[,i.ET,"bufferMsec"],ContainerSettings:[,e=>((e,t)=>(0,i.s)(e,{M2tsSettings:[,e=>Ce(e,t),"m2tsSettings"]}))(e,t),"containerSettings"],Destination:[,e=>Ke(e,t),"destination"],FecOutputSettings:[,e=>(e=>(0,i.s)(e,{ColumnDepth:[,i.ET,"columnDepth"],IncludeFec:[,i.lK,"includeFec"],RowLength:[,i.ET,"rowLength"]}))(e),"fecOutputSettings"]}),it=(e,t)=>(0,i.s)(e,{ElementPath:[,i.lK,"elementPath"],ErrorMessage:[,i.lK,"errorMessage"]}),st=(e,t)=>(0,i.s)(e,{BlackDetectThreshold:[,i.JW,"blackDetectThreshold"],VideoBlackThresholdMsec:[,i.ET,"videoBlackThresholdMsec"]}),ot=(e,t)=>(0,i.s)(e,{FrameCaptureSettings:[,e=>((e,t)=>(0,i.s)(e,{CaptureInterval:[,i.ET,"captureInterval"],CaptureIntervalUnits:[,i.lK,"captureIntervalUnits"],TimecodeBurninSettings:[,e=>Xe(e,t),"timecodeBurninSettings"]}))(e,t),"frameCaptureSettings"],H264Settings:[,e=>((e,t)=>(0,i.s)(e,{AdaptiveQuantization:[,i.lK,"adaptiveQuantization"],AfdSignaling:[,i.lK,"afdSignaling"],Bitrate:[,i.ET,"bitrate"],BufFillPct:[,i.ET,"bufFillPct"],BufSize:[,i.ET,"bufSize"],ColorMetadata:[,i.lK,"colorMetadata"],ColorSpaceSettings:[,e=>(e=>(0,i.s)(e,{ColorSpacePassthroughSettings:[,i.Ss,"colorSpacePassthroughSettings"],Rec601Settings:[,i.Ss,"rec601Settings"],Rec709Settings:[,i.Ss,"rec709Settings"]}))(e),"colorSpaceSettings"],EntropyEncoding:[,i.lK,"entropyEncoding"],FilterSettings:[,e=>((e,t)=>(0,i.s)(e,{TemporalFilterSettings:[,e=>Ye(e,t),"temporalFilterSettings"]}))(e,t),"filterSettings"],FixedAfd:[,i.lK,"fixedAfd"],FlickerAq:[,i.lK,"flickerAq"],ForceFieldPictures:[,i.lK,"forceFieldPictures"],FramerateControl:[,i.lK,"framerateControl"],FramerateDenominator:[,i.ET,"framerateDenominator"],FramerateNumerator:[,i.ET,"framerateNumerator"],GopBReference:[,i.lK,"gopBReference"],GopClosedCadence:[,i.ET,"gopClosedCadence"],GopNumBFrames:[,i.ET,"gopNumBFrames"],GopSize:[,i.JW,"gopSize"],GopSizeUnits:[,i.lK,"gopSizeUnits"],Level:[,i.lK,"level"],LookAheadRateControl:[,i.lK,"lookAheadRateControl"],MaxBitrate:[,i.ET,"maxBitrate"],MinIInterval:[,i.ET,"minIInterval"],NumRefFrames:[,i.ET,"numRefFrames"],ParControl:[,i.lK,"parControl"],ParDenominator:[,i.ET,"parDenominator"],ParNumerator:[,i.ET,"parNumerator"],Profile:[,i.lK,"profile"],QualityLevel:[,i.lK,"qualityLevel"],QvbrQualityLevel:[,i.ET,"qvbrQualityLevel"],RateControlMode:[,i.lK,"rateControlMode"],ScanType:[,i.lK,"scanType"],SceneChangeDetect:[,i.lK,"sceneChangeDetect"],Slices:[,i.ET,"slices"],Softness:[,i.ET,"softness"],SpatialAq:[,i.lK,"spatialAq"],SubgopLength:[,i.lK,"subgopLength"],Syntax:[,i.lK,"syntax"],TemporalAq:[,i.lK,"temporalAq"],TimecodeBurninSettings:[,e=>Xe(e,t),"timecodeBurninSettings"],TimecodeInsertion:[,i.lK,"timecodeInsertion"]}))(e,t),"h264Settings"],H265Settings:[,e=>((e,t)=>(0,i.s)(e,{AdaptiveQuantization:[,i.lK,"adaptiveQuantization"],AfdSignaling:[,i.lK,"afdSignaling"],AlternativeTransferFunction:[,i.lK,"alternativeTransferFunction"],Bitrate:[,i.ET,"bitrate"],BufSize:[,i.ET,"bufSize"],ColorMetadata:[,i.lK,"colorMetadata"],ColorSpaceSettings:[,e=>((e,t)=>(0,i.s)(e,{ColorSpacePassthroughSettings:[,i.Ss,"colorSpacePassthroughSettings"],DolbyVision81Settings:[,i.Ss,"dolbyVision81Settings"],Hdr10Settings:[,e=>pe(e,t),"hdr10Settings"],Rec601Settings:[,i.Ss,"rec601Settings"],Rec709Settings:[,i.Ss,"rec709Settings"]}))(e,t),"colorSpaceSettings"],FilterSettings:[,e=>((e,t)=>(0,i.s)(e,{TemporalFilterSettings:[,e=>Ye(e,t),"temporalFilterSettings"]}))(e,t),"filterSettings"],FixedAfd:[,i.lK,"fixedAfd"],FlickerAq:[,i.lK,"flickerAq"],FramerateDenominator:[,i.ET,"framerateDenominator"],FramerateNumerator:[,i.ET,"framerateNumerator"],GopClosedCadence:[,i.ET,"gopClosedCadence"],GopSize:[,i.JW,"gopSize"],GopSizeUnits:[,i.lK,"gopSizeUnits"],Level:[,i.lK,"level"],LookAheadRateControl:[,i.lK,"lookAheadRateControl"],MaxBitrate:[,i.ET,"maxBitrate"],MinIInterval:[,i.ET,"minIInterval"],MvOverPictureBoundaries:[,i.lK,"mvOverPictureBoundaries"],MvTemporalPredictor:[,i.lK,"mvTemporalPredictor"],ParDenominator:[,i.ET,"parDenominator"],ParNumerator:[,i.ET,"parNumerator"],Profile:[,i.lK,"profile"],QvbrQualityLevel:[,i.ET,"qvbrQualityLevel"],RateControlMode:[,i.lK,"rateControlMode"],ScanType:[,i.lK,"scanType"],SceneChangeDetect:[,i.lK,"sceneChangeDetect"],Slices:[,i.ET,"slices"],Tier:[,i.lK,"tier"],TileHeight:[,i.ET,"tileHeight"],TilePadding:[,i.lK,"tilePadding"],TileWidth:[,i.ET,"tileWidth"],TimecodeBurninSettings:[,e=>Xe(e,t),"timecodeBurninSettings"],TimecodeInsertion:[,i.lK,"timecodeInsertion"],TreeblockSize:[,i.lK,"treeblockSize"]}))(e,t),"h265Settings"],Mpeg2Settings:[,e=>((e,t)=>(0,i.s)(e,{AdaptiveQuantization:[,i.lK,"adaptiveQuantization"],AfdSignaling:[,i.lK,"afdSignaling"],ColorMetadata:[,i.lK,"colorMetadata"],ColorSpace:[,i.lK,"colorSpace"],DisplayAspectRatio:[,i.lK,"displayAspectRatio"],FilterSettings:[,e=>((e,t)=>(0,i.s)(e,{TemporalFilterSettings:[,e=>Ye(e,t),"temporalFilterSettings"]}))(e,t),"filterSettings"],FixedAfd:[,i.lK,"fixedAfd"],FramerateDenominator:[,i.ET,"framerateDenominator"],FramerateNumerator:[,i.ET,"framerateNumerator"],GopClosedCadence:[,i.ET,"gopClosedCadence"],GopNumBFrames:[,i.ET,"gopNumBFrames"],GopSize:[,i.JW,"gopSize"],GopSizeUnits:[,i.lK,"gopSizeUnits"],ScanType:[,i.lK,"scanType"],SubgopLength:[,i.lK,"subgopLength"],TimecodeBurninSettings:[,e=>Xe(e,t),"timecodeBurninSettings"],TimecodeInsertion:[,i.lK,"timecodeInsertion"]}))(e,t),"mpeg2Settings"]}),at=(e,t)=>(0,i.s)(e,{CodecSettings:[,e=>ot(e,t),"codecSettings"],Height:[,i.ET,"height"],Name:[,i.lK,"name"],RespondToAfd:[,i.lK,"respondToAfd"],ScalingBehavior:[,i.lK,"scalingBehavior"],Sharpness:[,i.ET,"sharpness"],Width:[,i.ET,"width"]}),ct=(e,t)=>(0,i.s)(e,{ColorSpace:[,i.lK,"colorSpace"],ColorSpaceSettings:[,e=>lt(e,t),"colorSpaceSettings"],ColorSpaceUsage:[,i.lK,"colorSpaceUsage"],SelectorSettings:[,e=>ut(e,t),"selectorSettings"]}),lt=(e,t)=>(0,i.s)(e,{Hdr10Settings:[,e=>pe(e,t),"hdr10Settings"]}),ut=(e,t)=>(0,i.s)(e,{VideoSelectorPid:[,e=>(e=>(0,i.s)(e,{Pid:[,i.ET,"pid"]}))(e),"videoSelectorPid"],VideoSelectorProgramId:[,e=>(e=>(0,i.s)(e,{ProgramId:[,i.ET,"programId"]}))(e),"videoSelectorProgramId"]}),dt=(e,t)=>(0,i.s)(e,{AvailabilityZones:[,i.Ss,"availabilityZones"],NetworkInterfaceIds:[,i.Ss,"networkInterfaceIds"],SecurityGroupIds:[,i.Ss,"securityGroupIds"],SubnetIds:[,i.Ss,"subnetIds"]}),pt=(e,t)=>(0,i.s)(e,{BitDepth:[,i.JW,"bitDepth"],CodingMode:[,i.lK,"codingMode"],SampleRate:[,i.JW,"sampleRate"]}),ht=(e,t)=>(0,i.s)(e,{StyleControl:[,i.lK,"styleControl"]}),ft=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),gt="MaxResults",mt="NextToken",yt="maxResults",bt="nextToken";class vt extends(i.uB.classBuilder().ep({...s}).m((function(e,r,i,s){return[(0,n.TM)(i,this.serialize,this.deserialize),(0,t.rD)(i,e.getEndpointParameterInstructions())]})).s("MediaLive","StartChannel",{}).n("MediaLiveClient","StartChannelCommand").f(void 0,void 0).ser(v).de(I).build()){}class St extends(i.uB.classBuilder().ep({...s}).m((function(e,r,i,s){return[(0,n.TM)(i,this.serialize,this.deserialize),(0,t.rD)(i,e.getEndpointParameterInstructions())]})).s("MediaLive","StopChannel",{}).n("MediaLiveClient","StopChannelCommand").f(void 0,void 0).ser(S).de(E).build()){}var wt=r(1095),It=r(9359),Et=r(8377),kt=r(499),Ct=r(1487),Tt=r(649),Pt=r(4171),At=r(3448),_t=r(7135);const Ot=async(e,t,n)=>({operation:(0,_t.u)(t).operation,region:await(0,_t.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),xt=e=>{const t=[];return e.operation,t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"medialive",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e)),t};var Mt=r(5122),Rt=r(8257),Nt=r(3058),Dt=r(1701),jt=r(9987),Kt=r(4029),$t=r(7809),Ft=r(3323),Lt=r(6228),Bt=r(2641),Ut=r(4572),qt=r(7509),Vt=r(3197),Ht=r(6652),Wt=r(3875);const zt="required",Gt="fn",Jt="argv",Qt="ref",Yt=!0,Zt="isSet",Xt="booleanEquals",en="error",tn="endpoint",nn="tree",rn="PartitionResult",sn={[zt]:!1,type:"String"},on={[zt]:!0,default:!1,type:"Boolean"},an={[Qt]:"Endpoint"},cn={[Gt]:Xt,[Jt]:[{[Qt]:"UseFIPS"},!0]},ln={[Gt]:Xt,[Jt]:[{[Qt]:"UseDualStack"},!0]},un={},dn={[Gt]:"getAttr",[Jt]:[{[Qt]:rn},"supportsFIPS"]},pn={[Gt]:Xt,[Jt]:[!0,{[Gt]:"getAttr",[Jt]:[{[Qt]:rn},"supportsDualStack"]}]},hn=[cn],fn=[ln],gn=[{[Qt]:"Region"}],mn={version:"1.0",parameters:{Region:sn,UseDualStack:on,UseFIPS:on,Endpoint:sn},rules:[{conditions:[{[Gt]:Zt,[Jt]:[an]}],rules:[{conditions:hn,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:en},{conditions:fn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:en},{endpoint:{url:an,properties:un,headers:un},type:tn}],type:nn},{conditions:[{[Gt]:Zt,[Jt]:gn}],rules:[{conditions:[{[Gt]:"aws.partition",[Jt]:gn,assign:rn}],rules:[{conditions:[cn,ln],rules:[{conditions:[{[Gt]:Xt,[Jt]:[Yt,dn]},pn],rules:[{endpoint:{url:"https://medialive-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:un,headers:un},type:tn}],type:nn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:en}],type:nn},{conditions:hn,rules:[{conditions:[{[Gt]:Xt,[Jt]:[dn,Yt]}],rules:[{endpoint:{url:"https://medialive-fips.{Region}.{PartitionResult#dnsSuffix}",properties:un,headers:un},type:tn}],type:nn},{error:"FIPS is enabled but this partition does not support FIPS",type:en}],type:nn},{conditions:fn,rules:[{conditions:[pn],rules:[{endpoint:{url:"https://medialive.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:un,headers:un},type:tn}],type:nn},{error:"DualStack is enabled but this partition does not support DualStack",type:en}],type:nn},{endpoint:{url:"https://medialive.{Region}.{PartitionResult#dnsSuffix}",properties:un,headers:un},type:tn}],type:nn}],type:nn},{error:"Invalid Configuration: Missing Region",type:en}]},yn=(e,t={})=>(0,Wt.sO)(mn,{endpointParams:e,logger:t.logger});Wt.mw.aws=Ht.UF;var bn=r(4321);var vn=r(4547),Sn=r(5479);const wn=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){r=e},credentials:()=>r}};class In extends i.Kj{constructor(...[e]){const n=(e=>{(0,i.I9)(process.version);const t=(0,bn.I)(e),n=()=>t().then(i.lT),r=(e=>({apiVersion:"2017-10-14",base64Decoder:e?.base64Decoder??Ut.E,base64Encoder:e?.base64Encoder??Ut.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??yn,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??xt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Lt.f2}],logger:e?.logger??new i.N4,sdkStreamMixin:e?.sdkStreamMixin??qt.c9,serviceId:e?.serviceId??"MediaLive",urlParser:e?.urlParser??Bt.D,utf8Decoder:e?.utf8Decoder??Vt.ar,utf8Encoder:e?.utf8Encoder??Vt.Pq}))(e);return(0,Mt.I)(process.version),{...r,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??$t.n,credentialDefaultProvider:e?.credentialDefaultProvider??Rt.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Nt.mJ)({serviceId:r.serviceId,clientVersion:"3.623.0"}),maxAttempts:e?.maxAttempts??(0,jt.Z)(Pt.qs),region:e?.region??(0,jt.Z)(Ct.GG,Ct.zH),requestHandler:Kt.$c.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,jt.Z)({...Pt.kN,default:async()=>(await n()).retryMode||Ft.L0}),sha256:e?.sha256??Dt.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Kt.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,jt.Z)(Ct.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,jt.Z)(Ct.Ko)}})(e||{}),r=(s=n,{...s,useDualstackEndpoint:s.useDualstackEndpoint??!1,useFipsEndpoint:s.useFipsEndpoint??!1,defaultSigningName:"medialive"});var s;const o=(0,kt.Dc)(r),c=(0,Pt.$z)(o),l=(0,Ct.TD)(c),u=(0,wt.OV)(l);var d;const p=((e,t)=>{const n={...(0,vn.Rq)(e),...(0,i.xA)(e),...(0,Sn.eS)(e),...wn(e)};return t.forEach((e=>e.configure(n))),{...e,...(0,vn.$3)(n),...(0,i.uv)(n),...(0,Sn.jt)(n),...(r=n,{httpAuthSchemes:r.httpAuthSchemes(),httpAuthSchemeProvider:r.httpAuthSchemeProvider(),credentials:r.credentials()})};var r})((d=(0,t.Co)(u),{...(0,At.h)(d)}),e?.extensions||[]);super(p),this.config=p,this.middlewareStack.use((0,kt.sM)(this.config)),this.middlewareStack.use((0,Pt.ey)(this.config)),this.middlewareStack.use((0,Tt.vK)(this.config)),this.middlewareStack.use((0,wt.TC)(this.config)),this.middlewareStack.use((0,It.Y7)(this.config)),this.middlewareStack.use((0,Et.n4)(this.config)),this.middlewareStack.use((0,a.wB)(this.config,{httpAuthSchemeParametersProvider:Ot,identityProviderConfigProvider:async e=>new a.h$({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,a.lW)(this.config))}destroy(){super.destroy()}}class En extends(i.uB.classBuilder().ep({...s}).m((function(e,r,i,s){return[(0,n.TM)(i,this.serialize,this.deserialize),(0,t.rD)(i,e.getEndpointParameterInstructions())]})).s("MediaLive","ListChannels",{}).n("MediaLiveClient","ListChannelsCommand").f(void 0,void 0).ser(b).de(w).build()){}var kn=r(2349),Cn=r(3998);class Tn extends e.InstanceBase{config;awsClient=new In;channels=[];poll=null;constructor(e){super(e)}async init(t){this.config=t,this.updateStatus(e.InstanceStatus.Connecting),await this.initConnection(),this.updateActions(),this.updateFeedbacks(),this.updateVariableDefinitions()}async destroy(){await this.stopPolling(),this.awsClient.destroy(),this.log("debug","AWS MediaLive module destroyed")}async configUpdated(e){this.config=e,this.log("info","Reconnecting to AWS MediaLive with new config"),await this.stopPolling(),this.awsClient&&this.awsClient.destroy(),await this.initConnection()}getConfigFields(){return[{type:"dropdown",id:"region",label:"AWS Region",default:"eu-north-1",width:5,choices:[{id:"us-east-1",label:"US East (N. Virginia)"},{id:"us-east-2",label:"US East (Ohio)"},{id:"us-west-1",label:"US West (N. California)"},{id:"us-west-2",label:"US West (Oregon)"},{id:"af-south-1",label:"Africa (Cape Town)"},{id:"ap-east-1",label:"Asia Pacific (Hong Kong)"},{id:"ap-south-2",label:"Asia Pacific (Hyderabad)"},{id:"ap-southeast-3",label:"Asia Pacific (Jakarta)"},{id:"ap-southeast-4",label:"Asia Pacific (Melbourne)"},{id:"ap-south-1",label:"Asia Pacific (Mumbai)"},{id:"ap-northeast-3",label:"Asia Pacific (Osaka)"},{id:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{id:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{id:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{id:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{id:"ca-central-1",label:"Canada (Central)"},{id:"ca-west-1",label:"Canada West (Calgary)"},{id:"eu-central-1",label:"Europe (Frankfurt)"},{id:"eu-west-1",label:"Europe (Ireland)"},{id:"eu-west-2",label:"Europe (London)"},{id:"eu-south-1",label:"Europe (Milan)"},{id:"eu-west-3",label:"Europe (Paris)"},{id:"eu-south-2",label:"Europe (Spain)"},{id:"eu-north-1",label:"Europe (Stockholm)"},{id:"eu-central-2",label:"Europe (Zurich)"},{id:"il-central-1",label:"Israel (Tel Aviv)"},{id:"me-south-1",label:"Middle East (Bahrain)"},{id:"me-central-1",label:"Middle East (UAE)"},{id:"sa-east-1",label:"South America (So Paulo)"},{id:"us-gov-east-1",label:"AWS GovCloud (US-East)"},{id:"us-gov-west-1",label:"AWS GovCloud (US-West)"}]},{type:"static-text",id:"warning",label:"LIMIT YOUR AWS ACCESS TO THE BARE MINIMUM REQUIRED",value:"See the Readme for permissions needed",width:8},{type:"textinput",id:"awsId",label:"AWS Access Key ID",width:12,regex:"/^AKIA[0-9A-Z]{16}$/",required:!0},{type:"textinput",id:"awsSecret",label:"AWS Access Key Secret",width:12,regex:"/^[0-9a-zA-Z/+]{40}$/",required:!0}]}updateActions(){!function(e){const t=0===(n=e.channels).length?[]:n.map((e=>({id:e.id,label:e.name})));var n;e.setActionDefinitions({startChannel:{name:"Start channel",options:[{id:"channelName",type:"dropdown",label:"Channel",choices:t,default:""}],callback:async t=>{e.log("debug",`Starting channel ID: ${t.options.channelName}`),e.channels.find((e=>e.id===t.options.channelName))?await e.awsClient.send(new vt({ChannelId:t.options.channelName?.toString()})).catch((t=>{e.log("error",`Failed to start channel: ${t}`)})):e.log("warn",`Failed to start. Channel ID not found: ${t.options.channelName}`)}},stopChannel:{name:"Stop channel",options:[{id:"channelName",type:"dropdown",label:"Channel",choices:t,default:""}],callback:async t=>{e.log("debug",`Stopping channel ID: ${t.options.channelName}`);const n=e.channels.find((e=>e.id===t.options.channelName));n?await e.awsClient.send(new St({ChannelId:n.id})).catch((t=>{e.log("error",`Failed to start channel: ${t}`)})):e.log("warn",`Failed to stop. Channel ID not found: ${t.options.channelName}`)}},toggleChannel:{name:"Toggle channel",options:[{id:"channelName",type:"dropdown",label:"Channel",choices:t,default:""}],callback:async t=>{const n=e.channels.find((e=>e.id===t.options.channelName));n?"IDLE"===n.state||"STOPPING"===n.state?(e.log("debug",`Starting channel ID: ${n.id}`),await e.awsClient.send(new vt({ChannelId:n.id})).catch((t=>{e.log("error",`Failed to start channel: ${t}`)}))):(e.log("debug",`Stopping channel ID: ${n.id}`),await e.awsClient.send(new St({ChannelId:n.id})).catch((t=>{e.log("error",`Failed to stop channel: ${t}`)}))):e.log("warn",`Failed to toggle. Channel ID not found: ${t.options.channelName}`)}}})}(this)}updateFeedbacks(){var t;(t=this).setFeedbackDefinitions({ChannelState:{name:"Channel state",type:"advanced",options:[{id:"bgColorIdle",type:"colorpicker",label:"Background color when idle",default:(0,e.combineRgb)(0,0,0),returnType:"number"},{id:"bgColorStarting",type:"colorpicker",label:"Background color when starting",default:(0,e.combineRgb)(255,128,128),returnType:"number"},{id:"bgColorRunning",type:"colorpicker",label:"Background color when running",default:(0,e.combineRgb)(255,0,0),returnType:"number"},{id:"bgColorStopping",type:"colorpicker",label:"Background color when stopping",default:(0,e.combineRgb)(255,191,128),returnType:"number"},{id:"channelName",type:"dropdown",label:"Channel name",choices:t.channels.map((e=>({id:e.id,label:e.name}))),default:""}],callback:n=>{switch(t.channels.find((e=>e.id===n.options.channelName))?.state){case"IDLE":return{bgcolor:n.options.bgColorIdle};case"RUNNING":return{bgcolor:n.options.bgColorRunning};case"STARTING":return{bgcolor:n.options.bgColorStarting};case"STOPPING":return{bgcolor:n.options.bgColorStopping};default:return{bgcolor:(0,e.combineRgb)(0,0,0)}}}}})}updateVariableDefinitions(){var e;(e=this).setVariableDefinitions(function(e){if(0===e.channels.length)return[];const t=[];return e.channels.map((e=>{t.push({variableId:`channel_${e.id}_name`,name:`Channel ${e.name} - Name`},{variableId:`channel_${e.id}_state`,name:`Channel ${e.name} - State`})})),t}(e))}async initConnection(){this.log("info","Connecting to AWS MediaLive");try{this.awsClient=new In({region:this.config.region,credentials:{accessKeyId:this.config.awsId,secretAccessKey:this.config.awsSecret}})}catch(t){return this.log("error",`Error connecting to AWS: ${t}`),void this.updateStatus(e.InstanceStatus.ConnectionFailure)}await this.pollStatus().then((async()=>{this.log("info","Successfully connected to AWS MediaLive"),this.updateStatus(e.InstanceStatus.Ok),0===this.channels.length&&(this.log("warn","No channels found. Is this the right region?"),this.updateStatus(e.InstanceStatus.BadConfig,"No channels found. Is this the right region?")),await this.startPolling()})).catch((t=>{this.log("error",`Failed to connect to AWS MediaLive: ${t}`),"UnrecognizedClientException"===t.name?this.updateStatus(e.InstanceStatus.AuthenticationFailure):this.updateStatus(e.InstanceStatus.ConnectionFailure)}))}async startPolling(){await this.stopPolling(),this.poll=(0,Cn.EQ)((async()=>{await this.pollStatus().catch((t=>{this.log("error",`Error getting channel status: ${t}`),this.updateStatus(e.InstanceStatus.ConnectionFailure)}))}),5e3)}async stopPolling(){this.poll&&(await(0,kn.clearIntervalAsync)(this.poll),this.poll=null)}async pollStatus(){await this.awsClient.send(new En({})).then((e=>{this.populateChannels(e.Channels||[]),this.updateActions(),this.updateFeedbacks(),this.updateVariableDefinitions(),this.setVariableValues(this.getVariableValues()),this.checkFeedbacks("ChannelState")}))}populateChannels(t){this.channels=[],0!==t.length?(t.forEach((e=>{this.channels.push({id:e.Id||"",name:e.Name||"",state:e.State||""})})),this.log("debug",`Populated channels: ${JSON.stringify(this.channels)}`),this.updateStatus(e.InstanceStatus.Ok)):this.log("debug","No channels available to populate")}getVariableValues(){const e={};return 0===this.channels.length||this.channels.forEach((t=>{e[`channel_${t.id}_state`]=t.state,e[`channel_${t.id}_name`]=t.name})),e}}(0,e.runEntrypoint)(Tn,[])})()})();