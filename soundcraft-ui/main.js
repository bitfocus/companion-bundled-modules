(()=>{var e={37(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowTime=void 0;var n=r(6808),i=r(2326),o=r(9879),s=r(5212),a=r(7214),c=r(4830),u=r(6404),l=r(8619);t.windowTime=function(e){for(var t,r,d=[],p=1;p<arguments.length;p++)d[p-1]=arguments[p];var f=null!==(t=u.popScheduler(d))&&void 0!==t?t:i.asyncScheduler,h=null!==(r=d[0])&&void 0!==r?r:null,b=d[1]||1/0;return s.operate((function(t,r){var i=[],s=!1,u=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),c.arrRemove(i,e),s&&d()},d=function(){if(i){var t=new o.Subscription;r.add(t);var s=new n.Subject,a={window:s,subs:t,seen:0};i.push(a),r.next(s.asObservable()),l.executeSchedule(t,f,(function(){return u(a)}),e)}};null!==h&&h>=0?l.executeSchedule(r,f,d,h,!0):s=!0,d();var p=function(e){return i.slice().forEach(e)},m=function(e){p((function(t){var r=t.window;return e(r)})),e(r),r.unsubscribe()};return t.subscribe(a.createOperatorSubscriber(r,(function(e){p((function(t){t.window.next(e),b<=++t.seen&&u(t)}))}),(function(){return m((function(e){return e.complete()}))}),(function(e){return m((function(t){return t.error(e)}))}))),function(){i=null}}))}},80(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},96(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.max=void 0;var n=r(2070),i=r(281);t.max=function(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}},131(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},142(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.min=void 0;var n=r(2070),i=r(281);t.min=function(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t})}},181(e){"use strict";e.exports=require("buffer")},201(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatAll=void 0;var n=r(8087);t.concatAll=function(){return n.mergeAll(1)}},228(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},281(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=void 0,t.isFunction=function(e){return"function"==typeof e}},360(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,r,n){let i=(255&e)<<16|(255&t)<<8|255&r;return n&&n>=0&&n<1&&(i+=16777216*Math.round(255*(1-n))),i},t.splitRgb=i,t.splitHsl=function(e){const t=i(e);return(0,n.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=i(e);return(0,n.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=i(e);return(0,n.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()},t.parseEscapeCharacters=function(e){return e.replaceAll("\\n","\n").replaceAll("\\r","\r").replaceAll("\\t","\t").replaceAll("\\f","\f").replaceAll("\\v","\v").replaceAll("\\b","\b").replaceAll("\\\\","\\").replaceAll("\\x00","\0").replaceAll("\\x01","").replaceAll("\\x02","").replaceAll("\\x03","")},t.substituteEscapeCharacters=function(e){return e.replaceAll("\n","\\n").replaceAll("\r","\\r").replaceAll("\t","\\t").replaceAll("\f","\\f").replaceAll("\v","\\v").replaceAll("\b","\\b").replaceAll("\\","\\\\").replaceAll("\0","\\x00").replaceAll("","\\x01").replaceAll("","\\x02").replaceAll("","\\x03")};const n=r(6284);function i(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,n.colord)(e).isValid()){const t=(0,n.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},380(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleReadableStreamLike=void 0;var n=r(7873),i=r(5462);t.scheduleReadableStreamLike=function(e,t){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(e),t)}},381(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ReplaySubject=void 0;var o=r(6808),s=r(3275),a=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=s.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return i(t,e),t.prototype.next=function(t){var r=this,n=r.isStopped,i=r._buffer,o=r._infiniteTimeWindow,s=r._timestampProvider,a=r._windowTime;n||(i.push(t),!o&&i.push(s.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,n=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!i){for(var s=r.now(),a=0,c=1;c<n.length&&n[c]<=s;c+=2)a=c;a&&n.splice(0,a+1)}},t}(o.Subject);t.ReplaySubject=a},432(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsapAction=void 0;var o=r(4772),s=r(6002),a=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=s.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,r,n){var i;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var o=t.actions;null!=r&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(s.immediateProvider.clearImmediate(r),t._scheduled===r&&(t._scheduled=void 0))},t}(o.AsyncAction);t.AsapAction=a},439(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsArgArrayOrObject=void 0;var r=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;t.argsArgArrayOrObject=function(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if((a=t)&&"object"==typeof a&&n(a)===i){var s=o(t);return{args:s.map((function(e){return t[e]})),keys:s}}}var a;return{args:e,keys:null}}},597(e,t,r){"use strict";const{kForOnEventAttribute:n,kListener:i}=r(2614),o=Symbol("kCode"),s=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),u=Symbol("kReason"),l=Symbol("kTarget"),d=Symbol("kType"),p=Symbol("kWasClean");class f{constructor(e){this[l]=null,this[d]=e}get target(){return this[l]}get type(){return this[d]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class h extends f{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[u]=void 0===t.reason?"":t.reason,this[p]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[u]}get wasClean(){return this[p]}}Object.defineProperty(h.prototype,"code",{enumerable:!0}),Object.defineProperty(h.prototype,"reason",{enumerable:!0}),Object.defineProperty(h.prototype,"wasClean",{enumerable:!0});class b extends f{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(b.prototype,"error",{enumerable:!0}),Object.defineProperty(b.prototype,"message",{enumerable:!0});class m extends f{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const v={addEventListener(e,t,r={}){for(const o of this.listeners(e))if(!r[n]&&o[i]===t&&!o[n])return;let o;if("message"===e)o=function(e,r){const n=new m("message",{data:r?e:e.toString()});n[l]=this,y(t,this,n)};else if("close"===e)o=function(e,r){const n=new h("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[l]=this,y(t,this,n)};else if("error"===e)o=function(e){const r=new b("error",{error:e,message:e.message});r[l]=this,y(t,this,r)};else{if("open"!==e)return;o=function(){const e=new f("open");e[l]=this,y(t,this,e)}}o[n]=!!r[n],o[i]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}};function y(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:h,ErrorEvent:b,Event:f,EventTarget:v,MessageEvent:m}},598(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeWhile=void 0;var n=r(5212),i=r(7214);t.takeWhile=function(e,t){return void 0===t&&(t=!1),n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){var i=e(r,o++);(i||t)&&n.next(r),!i&&n.complete()})))}))}},629(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteropObservable=void 0;var n=r(2884),i=r(281);t.isInteropObservable=function(e){return i.isFunction(e[n.observable])}},632(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfEmpty=void 0;var n=r(9328),i=r(5212),o=r(7214);function s(){return new n.EmptyError}t.throwIfEmpty=function(e){return void 0===e&&(e=s),i.operate((function(t,r){var n=!1;t.subscribe(o.createOperatorSubscriber(r,(function(e){n=!0,r.next(e)}),(function(){return n?r.complete():r.error(e())})))}))}},680(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMap=void 0;var n=r(9724),i=r(5212),o=r(7214);t.switchMap=function(e,t){return i.operate((function(r,i){var s=null,a=0,c=!1,u=function(){return c&&!s&&i.complete()};r.subscribe(o.createOperatorSubscriber(i,(function(r){null==s||s.unsubscribe();var c=0,l=a++;n.innerFrom(e(r,l)).subscribe(s=o.createOperatorSubscriber(i,(function(e){return i.next(t?t(r,e,l,c++):e)}),(function(){s=null,u()})))}),(function(){c=!0,u()})))}))}},706(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=void 0;var n=r(5212),i=r(5717),o=r(7214),s=r(9724);t.buffer=function(e){return n.operate((function(t,r){var n=[];return t.subscribe(o.createOperatorSubscriber(r,(function(e){return n.push(e)}),(function(){r.next(n),r.complete()}))),s.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){var e=n;n=[],r.next(e)}),i.noop)),function(){n=null}}))}},719(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinAllInternals=void 0;var n=r(80),i=r(3916),o=r(1898),s=r(7478),a=r(3484);t.joinAllInternals=function(e,t){return o.pipe(a.toArray(),s.mergeMap((function(t){return e(t)})),t?i.mapOneOrManyArgs(t):n.identity)}},761(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMapTo=void 0;var n=r(680),i=r(281);t.switchMapTo=function(e,t){return i.isFunction(t)?n.switchMap((function(){return e}),t):n.switchMap((function(){return e}))}},839(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUnsubscribedError=void 0;var n=r(9619);t.ObjectUnsubscribedError=n.createErrorClass((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},841(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstValueFrom=void 0;var n=r(9328),i=r(2708);t.firstValueFrom=function(e,t){var r="object"==typeof t;return new Promise((function(o,s){var a=new i.SafeSubscriber({next:function(e){o(e),a.unsubscribe()},error:s,complete:function(){r?o(t.defaultValue):s(new n.EmptyError)}});e.subscribe(a)}))}},857(e){"use strict";e.exports=require("os")},875(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualAction=t.VirtualTimeScheduler=void 0;var o=r(4772),s=r(9879),a=function(e){function t(t,r){void 0===t&&(t=c),void 0===r&&(r=1/0);var n=e.call(this,t,(function(){return n.frame}))||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return i(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(r(9533).AsyncScheduler);t.VirtualTimeScheduler=a;var c=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return i(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}return s.Subscription.EMPTY},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(o.AsyncAction);t.VirtualAction=c},914(e,t,r){"use strict";const{Duplex:n}=r(2203),{randomFillSync:i}=r(6982),o=r(2971),{EMPTY_BUFFER:s,kWebSocket:a,NOOP:c}=r(2614),{isBlob:u,isValidStatusCode:l}=r(5880),{mask:d,toBuffer:p}=r(3338),f=Symbol("kByteLength"),h=Buffer.alloc(4),b=8192;let m,v=b;class y{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let r,n,o=!1,s=2,a=!1;t.mask&&(r=t.maskBuffer||h,t.generateMask?t.generateMask(r):(v===b&&(void 0===m&&(m=Buffer.alloc(b)),i(m,0,b),v=0),r[0]=m[v++],r[1]=m[v++],r[2]=m[v++],r[3]=m[v++]),a=0===(r[0]|r[1]|r[2]|r[3]),s=6),"string"==typeof e?n=t.mask&&!a||void 0===t[f]?(e=Buffer.from(e)).length:t[f]:(n=e.length,o=t.mask&&t.readOnly&&!a);let c=n;n>=65536?(s+=8,c=127):n>125&&(s+=2,c=126);const u=Buffer.allocUnsafe(o?n+s:s);return u[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(u[0]|=64),u[1]=c,126===c?u.writeUInt16BE(n,2):127===c&&(u[2]=u[3]=0,u.writeUIntBE(n,4,6)),t.mask?(u[1]|=128,u[s-4]=r[0],u[s-3]=r[1],u[s-2]=r[2],u[s-1]=r[3],a?[u,e]:o?(d(e,r,u,s,n),[u]):(d(e,r,e,0,n),[u,e])):[u,e]}close(e,t,r,n){let i;if(void 0===e)i=s;else{if("number"!=typeof e||!l(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0)}const o={[f]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(y.frame(i,o),n)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):u(e)?(n=e.size,i=!1):(n=(e=p(e)).length,i=p.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):u(e)?(n=e.size,i=!1):(n=(e=p(e)).length,i=p.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}send(e,t,r){const n=this._extensions[o.extensionName];let i,s,a=t.binary?2:1,c=t.compress;"string"==typeof e?(i=Buffer.byteLength(e),s=!1):u(e)?(i=e.size,s=!1):(i=(e=p(e)).length,s=p.readOnly),this._firstFragment?(this._firstFragment=!1,c&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=i>=n._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const l={[f]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:c};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,l,r]):this.getBlobData(e,this._compress,l,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,l,r]):this.dispatch(e,this._compress,l,r)}getBlobData(e,t,r,n){this._bufferedBytes+=r[f],this._state=2,e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(g,this,e,n)}this._bufferedBytes-=r[f];const i=p(e);t?this.dispatch(i,t,r,n):(this._state=0,this.sendFrame(y.frame(i,r),n),this.dequeue())})).catch((e=>{process.nextTick(_,this,e,n)}))}dispatch(e,t,r,n){if(!t)return void this.sendFrame(y.frame(e,r),n);const i=this._extensions[o.extensionName];this._bufferedBytes+=r[f],this._state=1,i.compress(e,r.fin,((e,t)=>{this._socket.destroyed?g(this,new Error("The socket was closed while data was being compressed"),n):(this._bufferedBytes-=r[f],this._state=0,r.readOnly=!1,this.sendFrame(y.frame(t,r),n),this.dequeue())}))}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][f],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][f],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function g(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const n=e._queue[r],i=n[n.length-1];"function"==typeof i&&i(t)}}function _(e,t,r){g(e,t,r),e.onerror(t)}e.exports=y},1060(e,t,r){"use strict";const n=r(4434),i=r(5692),o=r(8611),s=r(9278),a=r(4756),{randomBytes:c,createHash:u}=r(6982),{Duplex:l,Readable:d}=r(2203),{URL:p}=r(7016),f=r(2971),h=r(6286),b=r(914),{isBlob:m}=r(5880),{BINARY_TYPES:v,EMPTY_BUFFER:y,GUID:g,kForOnEventAttribute:_,kListener:S,kStatusCode:w,kWebSocket:O,NOOP:P}=r(2614),{EventTarget:{addEventListener:x,removeEventListener:k}}=r(597),{format:E,parse:M}=r(5926),{toBuffer:j}=r(3338),T=Symbol("kAborted"),I=[8,13],C=["CONNECTING","OPEN","CLOSING","CLOSED"],A=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class $ extends n{constructor(e,t,r){super(),this._binaryType=v[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=$.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),N(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){v.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new h({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),i=new b(e,this._extensions,r.generateMask);this._receiver=n,this._sender=i,this._socket=e,n[O]=this,i[O]=this,e[O]=this,n.on("conclude",B),n.on("drain",V),n.on("error",W),n.on("message",z),n.on("ping",H),n.on("pong",G),i.onerror=J,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Q),e.on("data",K),e.on("end",Z),e.on("error",ee),this._readyState=$.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=$.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=$.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==$.CLOSED)if(this.readyState!==$.CONNECTING)this.readyState!==$.CLOSING?(this._readyState=$.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),Y(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";D(this,this._req,e)}}pause(){this.readyState!==$.CONNECTING&&this.readyState!==$.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===$.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,r)):U(this,e,r)}pong(e,t,r){if(this.readyState===$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===$.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,r)):U(this,e,r)}resume(){this.readyState!==$.CONNECTING&&this.readyState!==$.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==$.OPEN)return void U(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(n.compress=!1),this._sender.send(e||y,n,r)}terminate(){if(this.readyState!==$.CLOSED)if(this.readyState!==$.CONNECTING)this._socket&&(this._readyState=$.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";D(this,this._req,e)}}}function N(e,t,r,n){const s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:I[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=s.autoPong,!I.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${I.join(", ")})`);let a;if(t instanceof p)a=t;else try{a=new p(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const l="wss:"===a.protocol,d="ws+unix:"===a.protocol;let h;if("ws:"===a.protocol||l||d?d&&!a.pathname?h="The URL's pathname is empty":a.hash&&(h="The URL contains a fragment identifier"):h='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',h){const t=new SyntaxError(h);if(0===e._redirects)throw t;return void F(e,t)}const b=l?443:80,m=c(16).toString("base64"),v=l?i.request:o.request,y=new Set;let _,S;if(s.createConnection=s.createConnection||(l?R:L),s.defaultPort=s.defaultPort||b,s.port=a.port||b,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(_=new f(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=E({[f.extensionName]:_.offer()})),r.length){for(const e of r){if("string"!=typeof e||!A.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),d){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}if(s.followRedirects){if(0===e._redirects){e._originalIpc=d,e._originalSecure=l,e._originalHostOrSocketPath=d?s.socketPath:a.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=d?!!e._originalIpc&&s.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!l)&&(delete s.headers.authorization,delete s.headers.cookie,t||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),S=e._req=v(s),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=v(s);s.timeout&&S.on("timeout",(()=>{D(e,S,"Opening handshake has timed out")})),S.on("error",(t=>{null===S||S[T]||(S=e._req=null,F(e,t))})),S.on("response",(i=>{const o=i.headers.location,a=i.statusCode;if(o&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void D(e,S,"Maximum redirects exceeded");let i;S.abort();try{i=new p(o,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${o}`);return void F(e,r)}N(e,i,r,n)}else e.emit("unexpected-response",S,i)||D(e,S,`Unexpected server response: ${i.statusCode}`)})),S.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==$.CONNECTING)return;S=e._req=null;const i=t.headers.upgrade;if(void 0===i||"websocket"!==i.toLowerCase())return void D(e,r,"Invalid Upgrade header");const o=u("sha1").update(m+g).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void D(e,r,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?y.size?y.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void D(e,r,c);a&&(e._protocol=a);const l=t.headers["sec-websocket-extensions"];if(void 0!==l){if(!_)return void D(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=M(l)}catch(t){return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==f.extensionName)return void D(e,r,"Server indicated an extension that was not requested");try{_.accept(t[f.extensionName])}catch(t){return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=_}e.setSocket(r,n,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})})),s.finishRequest?s.finishRequest(S,e):S.end()}function F(e,t){e._readyState=$.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function L(e){return e.path=e.socketPath,s.connect(e)}function R(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function D(e,t,r){e._readyState=$.CLOSING;const n=new Error(r);Error.captureStackTrace(n,D),t.setHeader?(t[T]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(F,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function U(e,t,r){if(t){const r=m(t)?t.size:j(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${C[e.readyState]})`);process.nextTick(r,t)}}function B(e,t){const r=this[O];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[O]&&(r._socket.removeListener("data",K),process.nextTick(X,r._socket),1005===e?r.close():r.close(e,t))}function V(){const e=this[O];e.isPaused||e._socket.resume()}function W(e){const t=this[O];void 0!==t._socket[O]&&(t._socket.removeListener("data",K),process.nextTick(X,t._socket),t.close(e[w])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function q(){this[O].emitClose()}function z(e,t){this[O].emit("message",e,t)}function H(e){const t=this[O];t._autoPong&&t.pong(e,!this._isServer,P),t.emit("ping",e)}function G(e){this[O].emit("pong",e)}function X(e){e.resume()}function J(e){const t=this[O];t.readyState!==$.CLOSED&&(t.readyState===$.OPEN&&(t._readyState=$.CLOSING,Y(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function Y(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function Q(){const e=this[O];let t;this.removeListener("close",Q),this.removeListener("data",K),this.removeListener("end",Z),e._readyState=$.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[O]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",q),e._receiver.on("finish",q))}function K(e){this[O]._receiver.write(e)||this.pause()}function Z(){const e=this[O];e._readyState=$.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[O];this.removeListener("error",ee),this.on("error",P),e&&(e._readyState=$.CLOSING,this.destroy())}Object.defineProperty($,"CONNECTING",{enumerable:!0,value:C.indexOf("CONNECTING")}),Object.defineProperty($.prototype,"CONNECTING",{enumerable:!0,value:C.indexOf("CONNECTING")}),Object.defineProperty($,"OPEN",{enumerable:!0,value:C.indexOf("OPEN")}),Object.defineProperty($.prototype,"OPEN",{enumerable:!0,value:C.indexOf("OPEN")}),Object.defineProperty($,"CLOSING",{enumerable:!0,value:C.indexOf("CLOSING")}),Object.defineProperty($.prototype,"CLOSING",{enumerable:!0,value:C.indexOf("CLOSING")}),Object.defineProperty($,"CLOSED",{enumerable:!0,value:C.indexOf("CLOSED")}),Object.defineProperty($.prototype,"CLOSED",{enumerable:!0,value:C.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty($.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty($.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[_])return t[S];return null},set(t){for(const t of this.listeners(e))if(t[_]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[_]:!0})}})})),$.prototype.addEventListener=x,$.prototype.removeEventListener=k,e.exports=$},1071(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromSubscribable=void 0;var n=r(8051);t.fromSubscribable=function(e){return new n.Observable((function(t){return e.subscribe(t)}))}},1118(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const n=r(1635).__importDefault(r(228)),i=r(2203),o=r(8895);class s extends n.default{#e;#t;#r;get isConnected(){return this.#e.isConnected}get isConnecting(){return this.#e.isConnecting}get isDestroyed(){return this.#e.isDestroyed}constructor(e,t,r){super(),this.#e=new o.TCPHelper(e,t,r),this.#t=new a,this.#e._socket.pipe(this.#t),this.#e.on("connect",(()=>this.emit("connect"))),this.#e.on("end",(()=>this.emit("end"))),this.#e.on("error",(e=>this.emit("error",e))),this.#e.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#t.on("iac",((e,t)=>this.emit("iac",e,t))),this.#t.on("sb",(e=>this.emit("sb",e))),this.#t.on("data",(e=>this.emit("data",e))),this.#t.on("drain",(()=>this.emit("drain"))),this.#r=setTimeout((()=>{this.#r=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#e.connect()}async send(e){return this.#e.send(e)}destroy(){this.#e.destroy(),void 0!==this.#r&&(clearTimeout(this.#r),this.#r=void 0),this.#t.removeAllListeners(),this.#t.destroy()}}t.TelnetHelper=s;class a extends i.Transform{#n;#i;#o;constructor(e){super(e),this.#n=Buffer.alloc(0),this.#i=Buffer.alloc(0),this.#o=0}_transform(e,t,r){for(let t=0;t<e.length;++t)this.#s(e[t]);const n=this.#a();n.length&&this.push(n),r()}#s(e){if(0===this.#o){if(255===e)return void(this.#o=255);this.#n=Buffer.concat([this.#n,Buffer.from([e])])}else if(255===this.#o)switch(e){case 250:case 251:case 252:case 253:case 254:this.#o=e;break;default:this.#o=0}else{if(this.#o>=251&&this.#o<=254){let t;switch(this.#o){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#o=0)}if(250===this.#o){if(240===e)return this.emit("sb",this.#i),this.#o=0,void(this.#i=Buffer.alloc(0));this.#i=Buffer.concat([this.#i,Buffer.from([e])])}}}#a(){const e=this.#n;return this.#n=Buffer.alloc(0),e}}},1245(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeNotification=t.Notification=t.NotificationKind=void 0;var n,i=r(4885),o=r(1587),s=r(6680),a=r(281);(n=t.NotificationKind||(t.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var c=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return u(this,e)},e.prototype.do=function(e,t,r){var n=this,i=n.kind,o=n.value,s=n.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(s):null==r?void 0:r()},e.prototype.accept=function(e,t,r){var n;return a.isFunction(null===(n=e)||void 0===n?void 0:n.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this,t=e.kind,r=e.value,n=e.error,a="N"===t?o.of(r):"E"===t?s.throwError((function(){return n})):"C"===t?i.EMPTY:0;if(!a)throw new TypeError("Unexpected notification kind "+t);return a},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function u(e,t){var r,n,i,o=e,s=o.kind,a=o.value,c=o.error;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(r=t.next)||void 0===r||r.call(t,a):"E"===s?null===(n=t.error)||void 0===n||n.call(t,c):null===(i=t.complete)||void 0===i||i.call(t)}t.Notification=c,t.observeNotification=u},1279(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementAt=void 0;var n=r(7024),i=r(5934),o=r(632),s=r(8799),a=r(4383);t.elementAt=function(e,t){if(e<0)throw new n.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(c){return c.pipe(i.filter((function(t,r){return r===e})),a.take(1),r?s.defaultIfEmpty(t):o.throwIfEmpty((function(){return new n.ArgumentOutOfRangeError})))}}},1361(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=void 0;var n=r(5212),i=r(7214);t.every=function(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(i){e.call(t,i,o++,r)||(n.next(!1),n.complete())}),(function(){n.next(!0),n.complete()})))}))}},1381(e,t,r){var n=r(9896),i=r(6928),o=r(857),s=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,u=process.versions.modules,l=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",d=process.env.npm_config_arch||o.arch(),p=process.env.npm_config_platform||o.platform(),f=process.env.LIBC||(function(e){return"linux"===e&&n.existsSync("/etc/alpine-release")}(p)?"musl":"glibc"),h=process.env.ARM_VERSION||("arm64"===d?"8":a.arm_version)||"",b=(process.versions.uv||"").split(".")[0];function m(e){return s(m.resolve(e))}function v(e){try{return n.readdirSync(e)}catch(e){return[]}}function y(e,t){var r=v(e).filter(t);return r[0]&&i.join(e,r[0])}function g(e){return/\.node$/.test(e)}function _(e){var t=e.split("-");if(2===t.length){var r=t[0],n=t[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:e,platform:r,architectures:n}}}function S(e,t){return function(r){return null!=r&&r.platform===e&&r.architectures.includes(t)}}function w(e,t){return e.architectures.length-t.architectures.length}function O(e){var t=e.split("."),r={file:e,specificity:0};if("node"===t.pop()){for(var n=0;n<t.length;n++){var i=t[n];if("node"===i||"electron"===i||"node-webkit"===i)r.runtime=i;else if("napi"===i)r.napi=!0;else if("abi"===i.slice(0,3))r.abi=i.slice(3);else if("uv"===i.slice(0,2))r.uv=i.slice(2);else if("armv"===i.slice(0,4))r.armv=i.slice(4);else{if("glibc"!==i&&"musl"!==i)continue;r.libc=i}r.specificity++}return r}}function P(e,t){return function(r){return!(null==r||r.runtime&&r.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(r)||r.abi&&r.abi!==t&&!r.napi||r.uv&&r.uv!==b||r.armv&&r.armv!==h||r.libc&&r.libc!==f)}}function x(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}e.exports=m,m.resolve=m.path=function(e){e=i.resolve(e||".");try{var t=s(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var r=y(i.join(e,"build/Release"),g);if(r)return r;var n=y(i.join(e,"build/Debug"),g);if(n)return n}var o=k(e);if(o)return o;var a=k(i.dirname(process.execPath));if(a)return a;var m=["platform="+p,"arch="+d,"runtime="+l,"abi="+u,"uv="+b,h?"armv="+h:"","libc="+f,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+m+"\n    loaded from: "+e+"\n");function k(e){var t=v(i.join(e,"prebuilds")).map(_).filter(S(p,d)).sort(w)[0];if(t){var r=i.join(e,"prebuilds",t.name),n=v(r).map(O).filter(P(l,u)).sort(x(l))[0];return n?i.join(r,n.file):void 0}}},m.parseTags=O,m.matchTags=P,m.compareTags=x,m.parseTuple=_,m.matchTuple=S,m.compareTuples=w},1400(e,t){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(r||(t.InstanceStatus=r={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(n||(t.Regex=n={}))},1415(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var o=r(8051),s=r(9724),a=r(7652),c=r(4885),u=r(7214),l=r(6404);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.popResultSelector(e),d=a.argsOrArgArray(e);return d.length?new o.Observable((function(e){var t=d.map((function(){return[]})),o=d.map((function(){return!1}));e.add((function(){t=o=null}));for(var a=function(a){s.innerFrom(d[a]).subscribe(u.createOperatorSubscriber(e,(function(s){if(t[a].push(s),t.every((function(e){return e.length}))){var c=t.map((function(e){return e.shift()}));e.next(r?r.apply(void 0,i([],n(c))):c),t.some((function(e,t){return!e.length&&o[t]}))&&e.complete()}}),(function(){o[a]=!0,!t[a].length&&e.complete()})))},c=0;!e.closed&&c<d.length;c++)a(c);return function(){t=o=null}})):c.EMPTY}},1464(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaust=void 0;var n=r(7977);t.exhaust=n.exhaustAll},1587(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=void 0;var n=r(6404),i=r(7058);t.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.popScheduler(e);return i.from(e,r)}},1608(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auditTime=void 0;var n=r(2326),i=r(8877),o=r(5825);t.auditTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.audit((function(){return o.timer(e,t)}))}},1621(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9710);var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function a(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function l(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function d(e){return this instanceof d?(this.v=e,this):new d(e)}function p(e){return"function"==typeof e}function f(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var h=f((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function b(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var m=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,n,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=c(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(p(d))try{d()}catch(e){i=e instanceof h?e.errors:[e]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var b=c(f),m=b.next();!m.done;m=b.next()){var v=m.value;try{g(v)}catch(e){i=i??[],e instanceof h?i=l(l([],u(i)),u(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{m&&!m.done&&(n=b.return)&&n.call(b)}finally{if(r)throw r.error}}}if(i)throw new h(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)g(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&b(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&b(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),v=m.EMPTY;function y(e){return e instanceof m||e&&"closed"in e&&p(e.remove)&&p(e.add)&&p(e.unsubscribe)}function g(e){p(e)?e():e.unsubscribe()}function _(e){!function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];setTimeout.apply(void 0,l([e,t],u(r)))}((function(){throw e}))}function S(){}function w(e){e()}var O=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,y(t)&&t.add(r)):r.destination=E,r}return o(t,e),t.create=function(e,t,r){return new x(e,t,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(m),P=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){k(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){k(e)}else k(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){k(e)}},e}(),x=function(e){function t(t,r,n){var i,o=e.call(this)||this;return i=p(t)||!t?{next:t??void 0,error:r??void 0,complete:n??void 0}:t,o.destination=new P(i),o}return o(t,e),t}(O);function k(e){_(e)}var E={closed:!0,next:S,error:function(e){throw e},complete:S},M="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(e){return e}function T(e){return 0===e.length?j:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var I=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this,i=function(e){return e&&e instanceof O||function(e){return e&&p(e.next)&&p(e.error)&&p(e.complete)}(e)&&y(e)}(e)?e:new x(e,t,r);return w((function(){var e=n,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?n._subscribe(i):n._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=C(t))((function(t,n){var i=new x({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[M]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return T(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=C(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function C(e){var t;return null!==(t=e??undefined)&&void 0!==t?t:Promise}function A(e){return function(t){if(function(e){return p(e?.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function $(e,t,r,n,i){return new N(e,t,r,n,i)}var N=function(e){function t(t,r,n,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return o(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(O),F=f((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),L=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return o(t,e),t.prototype.lift=function(e){var t=new R(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new F},t.prototype.next=function(e){var t=this;w((function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=c(t.currentObservers),o=i.next();!o.done;o=i.next())o.value.next(e)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;w((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;w((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?v:(this.currentObservers=null,o.push(e),new m((function(){t.currentObservers=null,b(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},t.prototype.asObservable=function(){var e=new I;return e.source=this,e},t.create=function(e,t){return new R(e,t)},t}(I),R=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return o(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:v},t}(L),D={now:function(){return(D.delegate||Date).now()},delegate:void 0},U=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=D);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return o(t,e),t.prototype.next=function(t){var r=this,n=r.isStopped,i=r._buffer,o=r._infiniteTimeWindow,s=r._timestampProvider,a=r._windowTime;n||(i.push(t),!o&&i.push(s.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,n=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!i){for(var s=r.now(),a=0,c=1;c<n.length&&n[c]<=s;c+=2)a=c;a&&n.splice(0,a+1)}},t}(L),B=function(e){function t(t,r){return e.call(this)||this}return o(t,e),t.prototype.schedule=function(e,t){return this},t}(m),V=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return o(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,l([e,t],u(r)))}(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&function(e){clearInterval(e)}(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,b(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(B),W=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=D.now,e}(),q=function(e){function t(t,r){void 0===r&&(r=W.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return o(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(W),z=new q(V),H=z,G=new I((function(e){return e.complete()}));function X(e){return e&&p(e.schedule)}function J(e){return e[e.length-1]}function Y(e){return p(J(e))?e.pop():void 0}function Q(e){return X(J(e))?e.pop():void 0}var K=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Z(e){return p(e?.then)}function ee(e){return p(e[M])}function te(e){return Symbol.asyncIterator&&p(e?.[Symbol.asyncIterator])}function re(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ie(e){return p(e?.[ne])}function oe(e){return function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{!function(e){e.value instanceof d?Promise.resolve(e.value.v).then(c,u):l(o[0][2],e)}(i[e](t))}catch(e){l(o[0][3],e)}}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,(function(){var t,r,n;return a(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,d(t.read())];case 3:return r=i.sent(),n=r.value,r.done?[4,d(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,d(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function se(e){return p(e?.getReader)}function ae(e){if(e instanceof I)return e;if(null!=e){if(ee(e))return function(e){return new I((function(t){var r=e[M]();if(p(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(K(e))return function(e){return new I((function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()}))}(e);if(Z(e))return function(e){return new I((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,_)}))}(e);if(te(e))return ce(e);if(ie(e))return function(e){return new I((function(t){var r,n;try{for(var i=c(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()}))}(e);if(se(e))return function(e){return ce(oe(e))}(e)}throw re(e)}function ce(e){return new I((function(t){(function(e,t){var r,n,i,o;return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var s,u;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=c(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}(e),a.label=1;case 1:return[4,r.next()];case 2:if((n=a.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=a.sent(),i={error:u},[3,11];case 6:return a.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function ue(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule((function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()}),n);if(e.add(o),!i)return o}function le(e,t){return void 0===t&&(t=0),A((function(r,n){r.subscribe($(n,(function(r){return ue(n,e,(function(){return n.next(r)}),t)}),(function(){return ue(n,e,(function(){return n.complete()}),t)}),(function(r){return ue(n,e,(function(){return n.error(r)}),t)})))}))}function de(e,t){return void 0===t&&(t=0),A((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}function pe(e,t){if(!e)throw new Error("Iterable cannot be null");return new I((function(r){ue(r,t,(function(){var n=e[Symbol.asyncIterator]();ue(r,t,(function(){n.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}function fe(e,t){return t?function(e,t){if(null!=e){if(ee(e))return function(e,t){return ae(e).pipe(de(t),le(t))}(e,t);if(K(e))return function(e,t){return new I((function(r){var n=0;return t.schedule((function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())}))}))}(e,t);if(Z(e))return function(e,t){return ae(e).pipe(de(t),le(t))}(e,t);if(te(e))return pe(e,t);if(ie(e))return function(e,t){return new I((function(r){var n;return ue(r,t,(function(){n=e[ne](),ue(r,t,(function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){return void r.error(e)}i?r.complete():r.next(t)}),0,!0)})),function(){return p(n?.return)&&n.return()}}))}(e,t);if(se(e))return function(e,t){return pe(oe(e),t)}(e,t)}throw re(e)}(e,t):ae(e)}function he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fe(e,Q(e))}var be=f((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function me(e,t){return new Promise((function(t,r){var n=new x({next:function(e){t(e),n.unsubscribe()},error:r,complete:function(){r(new be)}});e.subscribe(n)}))}function ve(e,t){return A((function(r,n){var i=0;r.subscribe($(n,(function(r){n.next(e.call(t,r,i++))})))}))}var ye=Array.isArray;var ge=Array.isArray,_e=Object.getPrototypeOf,Se=Object.prototype,we=Object.keys;function Oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Q(e),n=Y(e),i=function(e){if(1===e.length){var t=e[0];if(ge(t))return{args:t,keys:null};if(function(e){return e&&"object"==typeof e&&_e(e)===Se}(t)){var r=we(t);return{args:r.map((function(e){return t[e]})),keys:r}}}return{args:e,keys:null}}(e),o=i.args,s=i.keys;if(0===o.length)return fe([],r);var a=new I(function(e,t,r){return void 0===r&&(r=j),function(n){Pe(t,(function(){for(var i=e.length,o=new Array(i),s=i,a=i,c=function(i){Pe(t,(function(){var c=fe(e[i],t),u=!1;c.subscribe($(n,(function(e){o[i]=e,u||(u=!0,a--),a||n.next(r(o.slice()))}),(function(){--s||n.complete()})))}),n)},u=0;u<i;u++)c(u)}),n)}}(o,r,s?function(e){return function(e,t){return e.reduce((function(e,r,n){return e[r]=t[n],e}),{})}(s,e)}:j));return n?a.pipe(function(e){return ve((function(t){return function(e,t){return ye(t)?e.apply(void 0,l([],u(t))):e(t)}(e,t)}))}(n)):a}function Pe(e,t,r){e?ue(r,e,t):t()}function xe(e,t,r){return void 0===r&&(r=1/0),p(t)?xe((function(r,n){return ve((function(e,i){return t(r,e,n,i)}))(ae(e(r,n)))}),r):("number"==typeof t&&(r=t),A((function(t,n){return function(e,t,r,n){var i=[],o=0,s=0,a=!1,c=function(){a&&!i.length&&!o&&t.complete()},u=function(e){o++;var a=!1;ae(r(e,s++)).subscribe($(t,(function(e){t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{for(o--;i.length&&o<n;)void 0,e=i.shift(),u(e);c()}catch(e){t.error(e)}var e})))};return e.subscribe($(t,(function(e){return o<n?u(e):i.push(e)}),(function(){a=!0,c()}))),function(){}}(t,n,e,r)})))}var ke={connector:function(){return new L},resetOnDisconnect:!0};function Ee(e,t){void 0===t&&(t=ke);var r=null,n=t.connector,i=t.resetOnDisconnect,o=void 0===i||i,s=n(),a=new I((function(e){return s.subscribe(e)}));return a.connect=function(){return(!r||r.closed)&&(r=function(e){return new I((function(t){ae(e()).subscribe(t)}))}((function(){return e})).subscribe(s),o&&r.add((function(){return s=n()}))),r},a}function Me(e,t,r){void 0===e&&(e=0),void 0===r&&(r=H);var n=-1;return null!=t&&(X(t)?r=t:n=t),new I((function(t){var i=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-r.now():e;i<0&&(i=0);var o=0;return r.schedule((function(){t.closed||(t.next(o++),0<=n?this.schedule(void 0,n):t.complete())}),i)}))}function je(e,t){return void 0===e&&(e=0),void 0===t&&(t=z),e<0&&(e=0),Me(e,e,t)}var Te=Array.isArray;function Ie(e,t){return A((function(r,n){var i=0;r.subscribe($(n,(function(r){return e.call(t,r,i++)&&n.next(r)})))}))}function Ce(e){return e<=0?function(){return G}:A((function(t,r){var n=0;t.subscribe($(r,(function(t){++n<=e&&(r.next(t),e<=n&&r.complete())})))}))}function Ae(e,t){return void 0===t&&(t=j),e=e??$e,A((function(r,n){var i,o=!0;r.subscribe($(n,(function(r){var s=t(r);(o||!e(i,s))&&(o=!1,i=s,n.next(r))})))}))}function $e(e,t){return e===t}function Ne(e,t){return A(function(e,t,r){return function(n,i){var o=r,s=t,a=0;n.subscribe($(i,(function(t){var r=a++;s=o?e(s,t,r):(o=!0,t),i.next(s)}),undefined))}}(e,t,arguments.length>=2))}function Fe(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new L}:t,n=e.resetOnError,i=void 0===n||n,o=e.resetOnComplete,s=void 0===o||o,a=e.resetOnRefCountZero,c=void 0===a||a;return function(e){var t,n,o,a=0,u=!1,l=!1,d=function(){n?.unsubscribe(),n=void 0},p=function(){d(),t=o=void 0,u=l=!1},f=function(){var e=t;p(),e?.unsubscribe()};return A((function(e,h){a++,!l&&!u&&d();var b=o=o??r();h.add((function(){0===--a&&!l&&!u&&(n=Le(f,c))})),b.subscribe(h),!t&&a>0&&(t=new x({next:function(e){return b.next(e)},error:function(e){l=!0,d(),n=Le(p,i,e),b.error(e)},complete:function(){u=!0,d(),n=Le(p,s),b.complete()}}),ae(e).subscribe(t))}))(e)}}function Le(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!0!==t){if(!1!==t){var i=new x({next:function(){i.unsubscribe(),e()}});return ae(t.apply(void 0,l([],u(r)))).subscribe(i)}}else e()}function Re(e,t){return A((function(r,n){var i=null,o=0,s=!1,a=function(){return s&&!i&&n.complete()};r.subscribe($(n,(function(r){i?.unsubscribe();var s=0,c=o++;ae(e(r,c)).subscribe(i=$(n,(function(e){return n.next(t?t(r,e,c,s++):e)}),(function(){i=null,a()})))}),(function(){s=!0,a()})))}))}function De(e){return A((function(t,r){ae(e).subscribe($(r,(function(){return r.complete()}),S)),!r.closed&&t.subscribe(r)}))}function Ue(e,t,r){var n=p(e)||t||r?{next:e,error:t,complete:r}:e;return n?A((function(e,t){var r;null===(r=n.subscribe)||void 0===r||r.call(n);var i=!0;e.subscribe($(t,(function(e){var r;null===(r=n.next)||void 0===r||r.call(n,e),t.next(e)}),(function(){var e;i=!1,null===(e=n.complete)||void 0===e||e.call(n),t.complete()}),(function(e){var r;i=!1,null===(r=n.error)||void 0===r||r.call(n,e),t.error(e)}),(function(){var e,t;i&&(null===(e=n.unsubscribe)||void 0===e||e.call(n)),null===(t=n.finalize)||void 0===t||t.call(n)})))})):j}function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Y(e);return A((function(t,n){for(var i=e.length,o=new Array(i),s=e.map((function(){return!1})),a=!1,c=function(t){ae(e[t]).subscribe($(n,(function(e){o[t]=e,!a&&!s[t]&&(s[t]=!0,(a=s.every(j))&&(s=null))}),S))},d=0;d<i;d++)c(d);t.subscribe($(n,(function(e){if(a){var t=l([e],u(o));n.next(r?r.apply(void 0,l([],u(t))):t)}})))}))}function Ve(e,t,r){return e[t]??r}function We(...e){return e.join(".")}const qe=e=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return T(e)}(ve((t=>e(t))),Ae(),Ie((e=>void 0!==e))),ze=(e,t)=>qe((r=>Ve(r,e,t))),He=(e,t,r,n,i,o=1)=>{switch(i){case"master":{const i=We(r,n-1,e);return e=>Ve(e,i,t)}case"aux":case"fx":return s=>Ve(s,We(r,n-1,i,o-1,e),t)}},Ge=e=>t=>1e3*Ve(t,`m.delay${e}`,0),Xe=(e,t,r,n)=>He("pan",0,e,t,r,n),Je=(e,t)=>{const r=We(e,t-1,"stereoIndex");return t=>["i","l","p","a"].includes(e)?Ve(t,r,-1):-1},Ye=(e,t)=>{const r=We(t,e-1,"phantom");return e=>Ve(e,r)},Qe=(e,t)=>{const r=We(t,e-1,"gain");return e=>Ve(e,r)},Ke=()=>e=>Ve(e,"var.currentLength",-1),Ze=()=>e=>Ve(e,"var.currentTrackPos",0),et=(e,t)=>Math.max(0,Math.floor(e*t)),tt=(e,t)=>Math.max(0,Math.floor(t-et(e,t))),rt=()=>e=>Ve(e,"var.mtk.currentLength",-1),nt=()=>e=>Ve(e,"var.mtk.currentTrackPos",0);var it,ot=((it=ot||{}).Opening="OPENING",it.Open="OPEN",it.Close="CLOSE",it.Closing="CLOSING",it.Error="ERROR",it.Reconnecting="RECONNECTING",it),st=(e=>(e[e.Stopped=0]="Stopped",e[e.Playing=2]="Playing",e[e.Paused=3]="Paused",e))(st||{}),at=(e=>(e[e.Stopped=0]="Stopped",e[e.Paused=1]="Paused",e[e.Playing=2]="Playing",e))(at||{}),ct=(e=>(e[e.None=-1]="None",e[e.Reverb=0]="Reverb",e[e.Delay=1]="Delay",e[e.Chorus=2]="Chorus",e[e.Room=3]="Room",e))(ct||{});function ut(e,t,r){return Math.min(r,Math.max(t,e))}function lt(e){return Math.round(1e3*(e+Number.EPSILON))/1e3}function dt(e){return e.match(/^-?\d+$/)?parseInt(e,10):e.match(/^\d+\.\d+$/)?parseFloat(e):e}function pt(e,t){switch(t){case 1:return e-1;case 0:return e+1;default:return e}}function ft(e){switch(e){case 1:return"L";case 2:return"R";default:return""}}function ht(e,t){switch(e){case"i":return"CH "+t;case"a":return"AUX "+t;case"f":return"FX "+t;case"s":return"SUB "+t;case"v":return"VCA "+t;case"l":return"LINE IN "+ft(t);case"p":return"PLAYER "+ft(t);case"solovol":return"SOLO LEVEL";case"hpvol":return`HEADPHONE ${t} LEVEL`}}function bt(e){return me(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=function(e){return 1===e.length&&Te(e[0])?e[0]:e}(e)).length?ae(e[0]):new I(function(e){return function(t){for(var r=[],n=function(n){r.push(ae(e[n]).subscribe($(t,(function(e){if(r){for(var i=0;i<r.length;i++)i!==n&&r[i].unsubscribe();r=null}t.next(e)}))))},i=0;r&&!t.closed&&i<e.length;i++)n(i)}}(e))}(e.state$.pipe((void 0===t&&(t=z),A((function(e,r){var n=null,i=null,o=null,s=function(){if(n){n.unsubscribe(),n=null;var e=i;i=null,r.next(e)}};function a(){var e=o+25,i=t.now();if(i<e)return n=this.schedule(void 0,e-i),void r.add(n);s()}e.subscribe($(r,(function(e){i=e,o=t.now(),n||(n=t.schedule(a,25),r.add(n))}),(function(){s(),r.complete()}),void 0,(function(){i=n=null})))})))),Me(250)));var t}const mt=[[-1/0,0],[-100,.00126941502],[-99,.0014193058],[-98,.00158625841],[-97,.00177210569],[-96,.0019787848],[-95,.00220842659],[-94,.00246331096],[-93,.00274592638],[-92,.00305891037],[-91,.00340510905],[-90,.00378751755],[-89,.00420932472],[-88,.00467389822],[-87,.00518476963],[-86,.00574563444],[-85,.00636033714],[-84,.00703287125],[-83,.00776734948],[-82,.00856804848],[-81,.00943937898],[-80,.01038584113],[-79,.01141215861],[-78,.01252317429],[-77,.01372399926],[-76,.01501996815],[-75,.0164167881],[-74,.01792064309],[-73,.01953828335],[-72,.02127727866],[-71,.02314623445],[-70,.02515518665],[-69,.02731607854],[-68,.02964346856],[-67,.03215561062],[-66,.03487607837],[-65,.0378363952],[-64,.04108065367],[-63,.04467409104],[-62,.04872117192],[-61,.05341050774],[-60,.05882352591],[-59,.06435465068],[-58,.06995738298],[-57,.07563393563],[-56,.08138664067],[-55,.08721791208],[-54,.09313031286],[-53,.09912653267],[-52,.10520938411],[-51,.11138185114],[-50,.11764705926],[-49,.12400831282],[-48,.13046910241],[-47,.13703311235],[-46,.14370423928],[-45,.15048661083],[-44,.15738460608],[-43,.16440286487],[-42,.17154632322],[-41,.17882022634],[-40,.18623016588],[-39,.19378209766],[-38,.20148238726],[-37,.20933783613],[-36,.21735573001],[-35,.22554387664],[-34,.23391066305],[-33,.24246510724],[-32,.25121692196],[-31,.26017658552],[-30,.26935542002],[-29.9,.27028582105],[-29.8,.27121854806],[-29.7,.27215361455],[-29.6,.2730910331],[-29.5,.27403081628],[-29.4,.27497297851],[-29.3,.27591753239],[-29.2,.2768644914],[-29.1,.27781386906],[-29,.27876567934],[-28.9,.27971993526],[-28.8,.28067665175],[-28.7,.28163584229],[-28.6,.28259752039],[-28.5,.28356170142],[-28.4,.28452839889],[-28.3,.28549762792],[-28.2,.28646940272],[-28.1,.2874437375],[-28,.28842064831],[-27.9,.28940014914],[-27.8,.29038225533],[-27.7,.29136698227],[-27.6,.29235434486],[-27.5,.29334435938],[-27.4,.29433704074],[-27.3,.29533240478],[-27.2,.2963304678],[-27.1,.29733124515],[-27,.29833475361],[-26.9,.29934100923],[-26.8,.30035002832],[-26.7,.30136182765],[-26.6,.3023764235],[-26.5,.30339383334],[-26.4,.30441407394],[-26.3,.30543716229],[-26.2,.30646311585],[-26.1,.30749195209],[-26,.30852368847],[-25.9,.30955834268],[-25.8,.31059593312],[-25.7,.31163647724],[-25.6,.31267999392],[-25.5,.31372650107],[-25.4,.31477601733],[-25.3,.31582856132],[-25.2,.31688415236],[-25.1,.31794280931],[-25,.31900455104],[-24.9,.32006939733],[-24.8,.32113736775],[-24.7,.32220848184],[-24.6,.32328275964],[-24.5,.32436022116],[-24.4,.32544088666],[-24.3,.32652477687],[-24.2,.32761191227],[-24.1,.32870231359],[-24,.32979600201],[-23.9,.33089299873],[-23.8,.33199332491],[-23.7,.33309700247],[-23.6,.33420405304],[-23.5,.33531449875],[-23.4,.33642836171],[-23.3,.33754566452],[-23.2,.33866642928],[-23.1,.33979067928],[-23,.34091843711],[-22.9,.34204972652],[-22.8,.34318457078],[-22.7,.34432299319],[-22.6,.34546501818],[-22.5,.34661066951],[-22.4,.3477599714],[-22.3,.34891294874],[-22.2,.35006962623],[-22.1,.35123002878],[-22,.35239418154],[-21.9,.35356211034],[-21.8,.35473384033],[-21.7,.35590939806],[-21.6,.35708880937],[-21.5,.35827210057],[-21.4,.35945929866],[-21.3,.36065043067],[-21.2,.36184552335],[-21.1,.36304460443],[-21,.3642477016],[-20.9,.36545484257],[-20.8,.36666605598],[-20.7,.36788136989],[-20.6,.36910081329],[-20.5,.37032441515],[-20.4,.37155220495],[-20.3,.37278421177],[-20.2,.37402046612],[-20.1,.37526099756],[-20,.37650583661],[-19.9,.37775501423],[-19.8,.37900856114],[-19.7,.38026650855],[-19.6,.38152888836],[-19.5,.38279573224],[-19.4,.38406707242],[-19.3,.38534294115],[-19.2,.38662337163],[-19.1,.38790839631],[-19,.3891980492],[-18.9,.3904923636],[-18.8,.39179137361],[-18.7,.39309511357],[-18.6,.39440361829],[-18.5,.39571692259],[-18.4,.39703506161],[-18.3,.39835807122],[-18.2,.39968598739],[-18.1,.40101884631],[-18,.40235668444],[-17.9,.40369953902],[-17.8,.40504744719],[-17.7,.40640044678],[-17.6,.4077585754],[-17.5,.40912187181],[-17.4,.41049037443],[-17.3,.41186412238],[-17.2,.413243155],[-17.1,.41462751222],[-17,.41601723386],[-16.9,.41741236055],[-16.8,.41881293315],[-16.7,.42021899263],[-16.6,.42163058079],[-16.5,.42304773943],[-16.4,.4244705108],[-16.3,.42589893762],[-16.2,.42733306286],[-16.1,.42877293006],[-16,.43021858274],[-15.9,.43167006527],[-15.8,.433127422],[-15.7,.43459069787],[-15.6,.43605993828],[-15.5,.43753518863],[-15.4,.43901649513],[-15.3,.44050390413],[-15.2,.4419974623],[-15.1,.44349721679],[-15,.44500321534],[-14.9,.44651550555],[-14.8,.44803413586],[-14.7,.4495591548],[-14.6,.4510906114],[-14.5,.45262855513],[-14.4,.45417303545],[-14.3,.45572410279],[-14.2,.45728180732],[-14.1,.45884620002],[-14,.46041733201],[-13.9,.46199525474],[-13.8,.46358002012],[-13.7,.46517168032],[-13.6,.46677028784],[-13.5,.46837589552],[-13.4,.46998855658],[-13.3,.47160832456],[-13.2,.47323525313],[-13.1,.47486939642],[-13,.47651080892],[-12.9,.47815954522],[-12.8,.47981566039],[-12.7,.4814792095],[-12.6,.48315024807],[-12.5,.48482883186],[-12.4,.48651501676],[-12.3,.48820885899],[-12.2,.48991041491],[-12.1,.49161974108],[-12,.49333689432],[-11.9,.49506193132],[-11.8,.49679490936],[-11.7,.49853588548],[-11.6,.50028491695],[-11.5,.5020420613],[-11.4,.50380737579],[-11.3,.50558091793],[-11.2,.50736274524],[-11.1,.50915291533],[-11,.51095148548],[-10.9,.51275851321],[-10.8,.51457405591],[-10.7,.51639817073],[-10.6,.51823091484],[-10.5,.52007234516],[-10.4,.52192251827],[-10.3,.52378149075],[-10.2,.52564931882],[-10.1,.52752605826],[-10,.5294117647],[-9.9,.53130649327],[-9.8,.53321029863],[-9.7,.53512323508],[-9.6,.53704535618],[-9.5,.53897671518],[-9.4,.54091736441],[-9.3,.54286735586],[-9.2,.54482674052],[-9.1,.54679556866],[-9,.54877388978],[-8.9,.5507617523],[-8.8,.55275920394],[-8.7,.55476629105],[-8.6,.55678305926],[-8.5,.55880955269],[-8.4,.56084581441],[-8.3,.5628918861],[-8.2,.56494780804],[-8.1,.56701361912],[-8,.56908935658],[-7.9,.57117505604],[-7.8,.57327075163],[-7.7,.57537647523],[-7.6,.57749225723],[-7.5,.5796181258],[-7.4,.58175410703],[-7.3,.58390022506],[-7.2,.58605650149],[-7.1,.58822295559],[-7,.59039960429],[-6.9,.59258646169],[-6.8,.59478353942],[-6.7,.59699084621],[-6.6,.59920838778],[-6.5,.60143616702],[-6.4,.60367418348],[-6.3,.60592243349],[-6.2,.60818091012],[-6.1,.61044960283],[-6,.61272849748],[-5.9,.6150175762],[-5.8,.61731681728],[-5.7,.61962619505],[-5.6,.62194567965],[-5.5,.62427523721],[-5.4,.62661482923],[-5.3,.62896441302],[-5.2,.63132394117],[-5.1,.63369336171],[-5,.63607261766],[-4.9,.63846164738],[-4.8,.64086038404],[-4.7,.64326875575],[-4.6,.6456866854],[-4.5,.64811409055],[-4.4,.65055088326],[-4.3,.65299697022],[-4.2,.65545225237],[-4.1,.6579166252],[-4,.66038997821],[-3.9,.6628721953],[-3.8,.66536315437],[-3.7,.66786272742],[-3.6,.67037078051],[-3.5,.67288717377],[-3.4,.67541176116],[-3.3,.67794439074],[-3.2,.68048490444],[-3.1,.68303313828],[-3,.685588922],[-2.9,.68815207965],[-2.8,.69072242902],[-2.7,.69329978223],[-2.6,.69588394539],[-2.5,.69847471884],[-2.4,.70107189735],[-2.3,.70367526991],[-2.2,.70628462004],[-2.1,.7088997261],[-2,.7115203609],[-1.9,.71414629236],[-1.8,.71677728344],[-1.7,.71941309224],[-1.6,.72205347242],[-1.5,.72469817317],[-1.4,.7273469395],[-1.3,.72999951243],[-1.2,.73265562946],[-1.1,.7353150243],[-1,.73797742761],[-.9,.74064256705],[-.8,.74331016751],[-.7,.7459799514],[-.6,.74865163909],[-.5,.75132494903],[-.4,.75399959798],[-.3,.75667530153],[-.2,.75935177424],[-.1,.76202873001],[0,.76470588235],[.1,.7673829447],[.2,.77005963068],[.3,.77273565461],[.4,.77541073144],[.5,.77808457747],[.6,.78075691027],[.7,.78342744932],[.8,.78609591597],[.9,.788762034],[1,.79142552969],[1.1,.79408613226],[1.2,.79674357391],[1.3,.79939759037],[1.4,.80204792085],[1.5,.80469430843],[1.6,.80733650032],[1.7,.80997424785],[1.8,.81260730696],[1.9,.81523543815],[2,.81785840681],[2.1,.82047598323],[2.2,.82308794296],[2.3,.82569406676],[2.4,.82829414081],[2.5,.83088795675],[2.6,.8334753119],[2.7,.83605600931],[2.8,.83862985772],[2.9,.84119667177],[3,.84375627202],[3.1,.84630848491],[3.2,.84885314284],[3.3,.85139008425],[3.4,.85391915357],[3.5,.85644020114],[3.6,.85895308337],[3.7,.86145766254],[3.8,.86395380691],[3.9,.86644139059],[4,.86892029358],[4.1,.87139040159],[4.2,.87385160607],[4.3,.87630380417],[4.4,.87874689855],[4.5,.8811807974],[4.6,.8836054143],[4.7,.88602066817],[4.8,.88842648314],[4.9,.89082278844],[5,.89320951837],[5.1,.89558661211],[5.2,.89795401365],[5.3,.90031167166],[5.4,.90265953944],[5.5,.9049975747],[5.6,.90732573954],[5.7,.90964400026],[5.8,.91195232733],[5.9,.91425069513],[6,.91653908203],[6.1,.91881747005],[6.2,.92108584497],[6.3,.92334419597],[6.4,.92559251573],[6.5,.92783080021],[6.6,.93005904852],[6.7,.93227726285],[6.8,.93448544835],[6.9,.93668361302],[7,.93887176758],[7.1,.94104992537],[7.2,.9432181023],[7.3,.94537631667],[7.4,.94752458909],[7.5,.94966294241],[7.6,.9517914016],[7.7,.95390999367],[7.8,.95601874754],[7.9,.95811769404],[8,.96020686568],[8.1,.96228629674],[8.2,.96435602299],[8.3,.96641608179],[8.4,.96846651193],[8.5,.97050735351],[8.6,.97253864795],[8.7,.9745604379],[8.8,.9765727671],[8.9,.97857568043],[9,.98056922374],[9.1,.98255344384],[9.2,.98452838843],[9.3,.98649410604],[9.4,.98845064599],[9.5,.99039805829],[9.6,.99233639364],[9.7,.99426570335],[9.8,.9961860393],[9.9,.99809745389],[10,1],[1/0,1]];function vt(e,t){return ut(e,0,t)/1e3}function yt(e,t,r,n){for(let i=0;i<e.length;i++)if(!(e[i][r]<t))return 0===i||1===i||t===e[i][r]?e[i][n]:e[i-1][n]+(e[i][n]-e[i-1][n])*(t-e[i-1][r])/(e[i][r]-e[i-1][r]);return e[0][n]}function gt(e){return yt(mt,e,0,1)}function _t(e){const t=yt(mt,e,1,0);return Math.round(10*t)/10}function St(e,t,r){return ut((e-t)/(r-t),0,1)}function wt(e,t,r){return ut(Math.round(10*(e*(r-t)+t))/10,t,r)}class Ot{constructor(e,t,r){this.conn=e,this.store=t,this.group=r,this.state$=this.store.state$.pipe(ze(`automix.${this.group}.on`))}setState(e){this.conn.sendMessage(`SETD^automix.${this.group}.on^${e}`)}enable(){this.setState(1)}disable(){this.setState(0)}toggle(){this.state$.pipe(Ce(1)).subscribe((e=>this.setState(1^e)))}}class Pt{constructor(e,t){this.conn=e,this.store=t,this.responseTime$=this.store.state$.pipe(ze("automix.time")),this.responseTimeMs$=this.responseTime$.pipe(ve((e=>function(e){return Math.round(3980*Math.pow(e,3.0517)+20)}(e)))),this.groups={a:new Ot(this.conn,this.store,"a"),b:new Ot(this.conn,this.store,"b")}}setResponseTime(e){this.conn.sendMessage(`SETD^automix.time^${e}`)}setResponseTimeMs(e){this.setResponseTime(function(e){const t=ut(e,20,4e3),r=Math.pow((t-20)/3980,.32768620768751844);return Math.floor(1e7*r)/1e7}(e))}}var xt=(e=>(e[e.Linear=0]="Linear",e[e.EaseIn=1]="EaseIn",e[e.EaseOut=2]="EaseOut",e[e.EaseInOut=3]="EaseInOut",e))(xt||{});const kt={0:e=>e,1:e=>e*e,2:e=>e*(2-e),3:e=>e*(2-e)};function Et(e,t,r){return e.pipe(Be(t),Re((([{targetValue:e,fadeTime:t,easing:n,fps:i},o])=>function(e,t,r,n,i){r=Math.max(r,i);const o=Math.round(1e3/i),s=Math.round(r/o);n=n||xt.Linear;const a=kt[n]||kt[xt.Linear];return je(o).pipe(Ce(s),ve((r=>a((r+1)/s)*(t-e)+e)),Ae())}(o,e,t,n,i).pipe(De(r.status$.pipe(Ie((e=>e.type===ot.Close))))))))}function Mt(e){return new Promise((t=>setTimeout((()=>t()),e)))}class jt{constructor(e,t,r,n,i="master",o=0){this.conn=e,this.store=t,this.channelType=r,this.channel=n,this.busType=i,this.bus=o,this.fullChannelId=`${this.channelType}.${this.channel-1}`,this.faderLevelCommand="mix",this.linkedChannelIds=[],this.transitionSources$=new L,this.stereoIndex$=this.store.state$.pipe(qe(Je(this.channelType,this.channel))),this.faderLevel$=this.store.state$.pipe(qe(((e,t,r,n=1)=>{switch(r){case"master":{const r=We(e,t-1,"mix");return e=>Ve(e,r)}case"aux":case"fx":{const i=We(e,t-1,r,n-1,"value");return e=>Ve(e,i)}}})(this.channelType,this.channel,this.busType,this.bus))),this.faderLevelDB$=this.faderLevel$.pipe(ve((e=>_t(e)))),this.mute$=this.store.state$.pipe(qe(((e,t,r,n)=>He("mute",0,e,t,r,n))(this.channelType,this.channel,this.busType,this.bus))),this.name$=this.store.state$.pipe(ze(We(this.channelType,this.channel-1,"name")),ve((e=>e||ht(this.channelType,this.channel))));const s=i+o+r+n,a=this.store.objectStore.get(s);if(a)return a;this.store.objectStore.set(s,this),Et(this.transitionSources$,this.faderLevel$,e).subscribe((e=>this.setFaderLevelRaw(e)))}fadeTo(e,t,r=xt.Linear,n=25){return e=ut(e,0,1),this.transitionSources$.next({targetValue:e,fadeTime:t,easing:r,fps:n}),Mt(t)}fadeToDB(e,t,r=xt.Linear,n=25){const i=gt(e);return this.fadeTo(i,t,r,n)}setFaderLevel(e){e=ut(e,0,1),this.setFaderLevelRaw(e)}setFaderLevelRaw(e){[...this.linkedChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.${this.faderLevelCommand}^${e}`;this.conn.sendMessage(r)}))}setFaderLevelDB(e){this.setFaderLevel(gt(e))}changeFaderLevelDB(e){this.faderLevelDB$.pipe(Ce(1)).subscribe((t=>this.setFaderLevelDB(Math.max(t,-100)+e)))}setMute(e){[...this.linkedChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.mute^${e}`;this.conn.sendMessage(r)}))}mute(){this.setMute(1)}unmute(){this.setMute(0)}toggleMute(){this.mute$.pipe(Ce(1)).subscribe((e=>this.setMute(1^e)))}setName(e){e=e.replace(/[\^]/gi,"").substring(0,20).toUpperCase();const t=We(this.channelType,this.channel-1,"name");this.conn.sendMessage(`SETS^${t}^${e}`)}}class Tt extends jt{constructor(e,t,r,n,i,o){super(e,t,r,n,i,o),this.fullChannelId=this.constructChannelId(this.channelType,this.channel,this.busType,this.bus),this.faderLevelCommand="value",this.post$=this.store.state$.pipe(qe((()=>{const e=We(this.channelType,this.channel-1,this.busType,this.bus-1,"post");return t=>Ve(t,e,0)})()))}constructChannelId(e,t,r,n){return`${e}.${t-1}.${r}.${n-1}`}setPost(e){[...this.linkedChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.post^${e}`;this.conn.sendMessage(r)}))}post(){this.setPost(1)}pre(){this.setPost(0)}togglePost(){this.post$.pipe(Ce(1)).subscribe((e=>this.setPost(1^e)))}}class It extends Tt{constructor(e,t,r,n,i){super(e,t,r,n,"aux",i),this.auxLinkChannelIds=[],this.pan$=this.store.state$.pipe(qe(Xe(this.channelType,this.channel,this.busType,this.bus))),Oe([this.store.state$.pipe(qe(Je("a",i))),this.stereoIndex$]).pipe(ve((([e,t])=>{const o=pt(i,e),s=pt(n,t),a=[],c=[];if(void 0!==s&&a.push(this.constructChannelId(r,s,this.busType,i)),void 0!==o){const e=this.constructChannelId(r,n,this.busType,o);a.push(e),c.push(e)}return void 0!==o&&void 0!==s&&a.push(this.constructChannelId(r,s,this.busType,o)),{allChannelIds:a,auxLinkChannelIds:c}}))).subscribe((e=>{this.linkedChannelIds=e.allChannelIds,this.auxLinkChannelIds=e.auxLinkChannelIds}))}setPan(e){e=lt(e=ut(e,0,1)),[...this.auxLinkChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.pan^${e}`;this.conn.sendMessage(r)}))}changePan(e){this.pan$.pipe(Ce(1)).subscribe((t=>this.setPan(t+e)))}setPostProc(e){[...this.linkedChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.postproc^${e}`;this.conn.sendMessage(r)}))}postProc(){this.setPostProc(1)}preProc(){this.setPostProc(0)}}class Ct{constructor(e,t,r){this.conn=e,this.store=t,this.bus=r}input(e){return new It(this.conn,this.store,"i",e,this.bus)}line(e){return new It(this.conn,this.store,"l",e,this.bus)}player(e){return new It(this.conn,this.store,"p",e,this.bus)}fx(e){return new It(this.conn,this.store,"f",e,this.bus)}}const At={ui12:{model:"ui12",input:8,line:2,player:2,fx:4,sub:4,aux:4,vca:0,multitrack:!1,masterDim:!1},ui16:{model:"ui16",input:12,line:2,player:2,fx:4,sub:4,aux:6,vca:0,multitrack:!1,masterDim:!1},ui24:{model:"ui24",input:24,line:2,player:2,fx:4,sub:6,aux:10,vca:6,multitrack:!0,masterDim:!0}};class $t{constructor(e){this.store=e,this.model$=this.store.state$.pipe(ze("model")),this.capabilities$=this.model$.pipe(ve((e=>At[e]))),this.firmware$=this.store.state$.pipe(ze("firmware")),this.model$.subscribe((e=>this.model=e))}}class Nt{constructor(e,t){this.conn=e,this.store=t,this.recording$=this.store.state$.pipe(ze("var.isRecording",0)),this.busy$=this.store.state$.pipe(ze("var.recBusy",0))}recordToggle(){this.conn.sendMessage("RECTOGGLE")}recordStart(){this.recording$.pipe(Ce(1)).subscribe((e=>{e||this.recordToggle()}))}recordStop(){this.recording$.pipe(Ce(1)).subscribe((e=>{e&&this.recordToggle()}))}}class Ft extends Tt{constructor(e,t,r,n,i){super(e,t,r,n,"fx",i),this.stereoIndex$.pipe(ve((e=>{const t=pt(n,e);return void 0!==t?[this.constructChannelId(this.channelType,t,this.busType,this.bus)]:[]}))).subscribe((e=>this.linkedChannelIds=e))}}class Lt{constructor(e,t,r){this.conn=e,this.store=t,this.bus=r,this.fxType$=this.store.state$.pipe(qe(((e=1)=>{const t=We("f",e-1,"fxtype");return e=>Ve(e,t)})(this.bus))),this.bpm$=this.store.state$.pipe(qe(((e=1)=>{const t=We("f",e-1,"bpm");return e=>Ve(e,t)})(this.bus)));const n="fxbus"+r,i=this.store.objectStore.get(n);if(i)return i;this.store.objectStore.set(n,this)}input(e){return new Ft(this.conn,this.store,"i",e,this.bus)}line(e){return new Ft(this.conn,this.store,"l",e,this.bus)}player(e){return new Ft(this.conn,this.store,"p",e,this.bus)}sub(e){return new Ft(this.conn,this.store,"s",e,this.bus)}setBpm(e){e=ut(e,20,400),e=Math.round(e),this.conn.sendMessage(`SETD^f.${this.bus-1}.bpm^${e}`)}assertFxParamInRange(e){if(e<1||e>6)throw new Error("FX Parameter must be between 1 and 6.")}makeFxParamPath(e){return`f.${this.bus-1}.par${e}`}getParam(e){return this.assertFxParamInRange(e),this.store.state$.pipe(ze(this.makeFxParamPath(e)))}setParam(e,t){this.assertFxParamInRange(e),t=ut(t,0,1),this.conn.sendMessage(`SETD^${this.makeFxParamPath(e)}^${t}`)}}class Rt{constructor(e,t,r,n){this.conn=e,this.store=t,this.deviceInfo=r,this.channel=n,this.fullChannelId="hw."+(this.channel-1),this.phantom$=this.deviceInfo.model$.pipe(Re((e=>{switch(e){case"ui24":return this.store.state$.pipe(qe(Ye(this.channel,"hw")));case"ui16":case"ui12":return this.store.state$.pipe(qe(Ye(this.channel,"i")))}}))),this.gain$=this.deviceInfo.model$.pipe(Re((e=>{switch(e){case"ui24":return this.store.state$.pipe(qe(Qe(this.channel,"hw")));case"ui16":case"ui12":return this.store.state$.pipe(qe(Qe(this.channel,"i")))}}))),this.gainDB$=this.deviceInfo.model$.pipe(Re((e=>{switch(e){case"ui24":return this.gain$.pipe(ve((e=>wt(e,-6,57))));case"ui16":case"ui12":return this.gain$.pipe(ve((e=>wt(e,-40,50))))}})));const i="hw"+n,o=this.store.objectStore.get(i);if(o)return o;this.store.objectStore.set(i,this),this.deviceInfo.model$.subscribe((e=>{switch(e){case"ui24":return void(this.fullChannelId="hw."+(this.channel-1));case"ui16":case"ui12":return void(this.fullChannelId="i."+(this.channel-1))}}))}setPhantom(e){const t=`SETD^${this.fullChannelId}.phantom^${e}`;this.conn.sendMessage(t)}phantomOn(){this.setPhantom(1)}phantomOff(){this.setPhantom(0)}togglePhantom(){this.phantom$.pipe(Ce(1)).subscribe((e=>this.setPhantom(1^e)))}setGain(e){e=ut(e,0,1);const t=`SETD^${this.fullChannelId}.gain^${e}`;this.conn.sendMessage(t)}setGainDB(e){switch(this.deviceInfo.model){case"ui24":return void this.setGain(St(e,-6,57));case"ui16":case"ui12":return void this.setGain(St(e,-40,50))}}changeGainDB(e){this.gainDB$.pipe(Ce(1)).subscribe((t=>this.setGainDB(t+e)))}}class Dt extends jt{constructor(e,t,r,n){super(e,t,r,n),this.fullChannelId=this.constructChannelId(this.channelType,this.channel),this.faderLevelCommand="mix",this.solo$=this.store.state$.pipe(qe((()=>{const e=We(this.channelType,this.channel-1,"solo");return t=>Ve(t,e)})())),this.pan$=this.store.state$.pipe(qe(Xe(this.channelType,this.channel,this.busType,this.bus))),this.automixGroup$=this.store.state$.pipe(ze(`${this.fullChannelId}.amixgroup`),ve((e=>{switch(e){case 0:return"a";case 1:return"b";default:return"none"}}))),this.automixWeight$=this.store.state$.pipe(ze(`${this.fullChannelId}.amix`)),this.automixWeightDB$=this.automixWeight$.pipe(ve((e=>wt(e,-12,12)))),this.multiTrackSelected$=this.store.state$.pipe(ze(`${this.fullChannelId}.mtkrec`)),this.stereoIndex$.pipe(ve((e=>{const t=pt(n,e);return void 0!==t?[this.constructChannelId(this.channelType,t)]:[]}))).subscribe((e=>this.linkedChannelIds=e))}constructChannelId(e,t){return`${e}.${t-1}`}setPan(e){e=lt(e=ut(e,0,1));const t=`SETD^${this.fullChannelId}.pan^${e}`;this.conn.sendMessage(t)}changePan(e){this.pan$.pipe(Ce(1)).subscribe((t=>this.setPan(t+e)))}setSolo(e){[...this.linkedChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.solo^${e}`;this.conn.sendMessage(r)}))}solo(){this.setSolo(1)}unsolo(){this.setSolo(0)}toggleSolo(){this.solo$.pipe(Ce(1)).subscribe((e=>this.setSolo(1^e)))}multiTrackAssertChannelType(){if("i"!==this.channelType&&"l"!==this.channelType)throw new Error("Multitrack recording can only be used with input and line channels")}multiTrackSetSelection(e){this.multiTrackAssertChannelType();const t=`SETD^${this.fullChannelId}.mtkrec^${e}`;this.conn.sendMessage(t)}multiTrackSelect(){this.multiTrackSetSelection(1)}multiTrackUnselect(){this.multiTrackSetSelection(0)}multiTrackToggle(){this.multiTrackAssertChannelType(),this.multiTrackSelected$.pipe(Ce(1)).subscribe((e=>this.multiTrackSetSelection(1^e)))}automixAssignGroup(e){if("i"!==this.channelType)throw new Error("Automix can only be used with input channels");let t=-1;switch(e){case"a":t=0;break;case"b":t=1;break;case"none":t=-1}[...this.linkedChannelIds,this.fullChannelId].forEach((e=>{const r=`SETD^${e}.amixgroup^${t}`;this.conn.sendMessage(r)}))}automixRemove(){this.automixAssignGroup("none")}automixSetWeight(e){e=ut(e,0,1),[...this.linkedChannelIds,this.fullChannelId].forEach((t=>{const r=`SETD^${t}.amix^${e}`;this.conn.sendMessage(r)}))}automixSetWeightDB(e){this.automixSetWeight(St(e,-12,12))}automixChangeWeightDB(e){this.automixWeightDB$.pipe(Ce(1)).subscribe((t=>this.automixSetWeightDB(t+e)))}}class Ut extends Dt{constructor(e,t,r,n){super(e,t,r,n),this.delay$=this.store.state$.pipe(qe((()=>{const e=We(this.channelType,this.channel-1,"delay");return t=>1e3*Ve(t,e,0)})())),this.delayMaxValueMs=250,"a"===r&&(this.delayMaxValueMs=500)}setDelay(e){const t=vt(e,this.delayMaxValueMs),r=`SETD^${this.fullChannelId}.delay^${t}`;this.conn.sendMessage(r)}changeDelay(e){this.delay$.pipe(Ce(1)).subscribe((t=>this.setDelay(t+e)))}}class Bt{constructor(e,t){this.conn=e,this.store=t,this.name$=he("MASTER"),this.faderLevel$=this.store.state$.pipe(qe((e=>Ve(e,"m.mix")))),this.faderLevelDB$=this.faderLevel$.pipe(ve((e=>_t(e)))),this.pan$=this.store.state$.pipe(qe((e=>Ve(e,"m.pan")))),this.dim$=this.store.state$.pipe(qe((e=>Ve(e,"m.dim")))),this.delayL$=this.store.state$.pipe(qe(Ge("L"))),this.delayR$=this.store.state$.pipe(qe(Ge("R"))),this.transitionSources$=new L,Et(this.transitionSources$,this.faderLevel$,e).subscribe((e=>this.setFaderLevelRaw(e)))}input(e){return new Ut(this.conn,this.store,"i",e)}line(e){return new Ut(this.conn,this.store,"l",e)}player(e){return new Dt(this.conn,this.store,"p",e)}aux(e){return new Ut(this.conn,this.store,"a",e)}fx(e){return new Dt(this.conn,this.store,"f",e)}sub(e){return new Dt(this.conn,this.store,"s",e)}vca(e){return new Dt(this.conn,this.store,"v",e)}fadeTo(e,t,r=xt.Linear,n=25){return e=ut(e,0,1),this.transitionSources$.next({targetValue:e,fadeTime:t,easing:r,fps:n}),Mt(t)}fadeToDB(e,t,r=xt.Linear,n=25){const i=gt(e);return this.fadeTo(i,t,r,n)}setFaderLevel(e){e=ut(e,0,1),this.setFaderLevelRaw(e)}setFaderLevelRaw(e){const t=`SETD^m.mix^${e}`;this.conn.sendMessage(t)}setFaderLevelDB(e){this.setFaderLevel(gt(e))}changeFaderLevelDB(e){this.faderLevelDB$.pipe(Ce(1)).subscribe((t=>this.setFaderLevelDB(Math.max(t,-100)+e)))}setPan(e){const t=`SETD^m.pan^${e=lt(e=ut(e,0,1))}`;this.conn.sendMessage(t)}changePan(e){this.pan$.pipe(Ce(1)).subscribe((t=>this.setPan(t+e)))}setDim(e){const t=`SETD^m.dim^${e}`;this.conn.sendMessage(t)}dim(){this.setDim(1)}undim(){this.setDim(0)}toggleDim(){this.dim$.pipe(Ce(1)).subscribe((e=>this.setDim(1^e)))}setDelayL(e){this.setDelay(e,"L")}setDelayR(e){this.setDelay(e,"R")}changeDelayL(e){this.delayL$.pipe(Ce(1)).subscribe((t=>this.setDelayL(t+e)))}changeDelayR(e){this.delayR$.pipe(Ce(1)).subscribe((t=>this.setDelayR(t+e)))}setDelay(e,t){const r=vt(e,500);this.conn.sendMessage(`SETD^m.delay${t}^${r}`)}}class Vt{constructor(e,t){this.conn=e,this.store=t,this.state$=this.store.state$.pipe(ze("var.mtk.currentState",at.Stopped)),this.session$=this.store.state$.pipe(ze("var.mtk.session"),ve((e=>"number"==typeof e?e.toString().padStart(4,"0"):e))),this.length$=this.store.state$.pipe(qe(rt())),this.elapsedTime$=this.store.state$.pipe(qe((e=>{const t=nt()(e),r=rt()(e);return et(t,r)}))),this.remainingTime$=this.store.state$.pipe(qe((e=>{const t=nt()(e),r=rt()(e);return tt(t,r)}))),this.recording$=this.store.state$.pipe(ze("var.mtk.rec.currentState",0)),this.busy$=this.store.state$.pipe(ze("var.mtk.rec.busy",0)),this.recordingTime$=this.store.state$.pipe(ze("var.mtk.rec.time",0),Be(this.recording$),ve((([e,t])=>t?e:0))),this.soundcheck$=this.store.state$.pipe(ze("var.mtk.soundcheck",0))}play(){this.conn.sendMessage("MTK_PLAY")}pause(){this.conn.sendMessage("MTK_PAUSE")}stop(){this.conn.sendMessage("MTK_STOP")}recordToggle(){this.conn.sendMessage("MTK_REC_TOGGLE")}recordStart(){this.recording$.pipe(Ce(1)).subscribe((e=>{e||this.recordToggle()}))}recordStop(){this.recording$.pipe(Ce(1)).subscribe((e=>{e&&this.recordToggle()}))}setSoundcheck(e){const t=`SETD^var.mtk.soundcheck^${e}`;this.conn.sendMessage(t)}activateSoundcheck(){this.setSoundcheck(1)}deactivateSoundcheck(){this.setSoundcheck(0)}toggleSoundcheck(){this.soundcheck$.pipe(Ce(1)).subscribe((e=>this.setSoundcheck(1^e)))}}class Wt{constructor(e,t,r){this.conn=e,this.store=t,this.id=r,this.mgMask$=this.store.state$.pipe(ze("mgmask")),this.state$=this.mgMask$.pipe(ve((e=>function(e,t){return t<0?e:e&1<<t?1:0}(e,this.groupIndex)))),this.groupIndex=function(e){switch(e){case"all":return 23;case"fx":return 22;default:return e-1}}(r);const n="mutegroup"+r,i=this.store.objectStore.get(n);if(i)return i;this.store.objectStore.set(n,this)}mute(){this.mgMask$.pipe(Ce(1)).subscribe((e=>this.setMgMask(function(e,t){return t<0?e:e|1<<t}(e,this.groupIndex))))}unmute(){this.mgMask$.pipe(Ce(1)).subscribe((e=>this.setMgMask(function(e,t){return t<0?e:e&~(1<<t)}(e,this.groupIndex))))}toggle(){this.mgMask$.pipe(Ce(1)).subscribe((e=>this.setMgMask(function(e,t){return t<0?e:e^1<<t}(e,this.groupIndex))))}setMgMask(e){const t=`SETD^mgmask^${e}`;this.conn.sendMessage(t)}}class qt{constructor(e,t){this.conn=e,this.store=t,this.state$=this.store.state$.pipe(ze("var.currentState",st.Stopped)),this.playlist$=this.store.state$.pipe(ze("var.currentPlaylist")),this.track$=this.store.state$.pipe(ze("var.currentTrack")),this.length$=this.store.state$.pipe(qe(Ke())),this.elapsedTime$=this.store.state$.pipe(qe((e=>{const t=Ze()(e),r=Ke()(e);return et(t,r)}))),this.remainingTime$=this.store.state$.pipe(qe((e=>{const t=Ze()(e),r=Ke()(e);return tt(t,r)}))),this.shuffle$=this.store.state$.pipe(ze("settings.shuffle",0))}play(){this.conn.sendMessage("MEDIA_PLAY")}pause(){this.conn.sendMessage("MEDIA_PAUSE")}stop(){this.conn.sendMessage("MEDIA_STOP")}next(){this.conn.sendMessage("MEDIA_NEXT")}prev(){this.conn.sendMessage("MEDIA_PREV")}loadPlaylist(e){this.conn.sendMessage(`MEDIA_SWITCH_PLIST^${e}`)}loadTrack(e,t){this.conn.sendMessage(`MEDIA_SWITCH_TRACK^${e}^${t}`)}setShuffle(e){this.conn.sendMessage(`SETD^settings.shuffle^${e}`)}toggleShuffle(){this.shuffle$.pipe(Ce(1)).subscribe((e=>this.setShuffle(1^e)))}setPlayMode(e){this.conn.sendMessage(`SETD^settings.playMode^${e}`)}setManual(){this.setPlayMode(0)}setAuto(){this.setPlayMode(3)}}class zt{constructor(e,t){this.conn=e,this.store=t,this.currentShow$=this.store.state$.pipe(ze("var.currentShow")),this.currentSnapshot$=this.store.state$.pipe(ze("var.currentSnapshot")),this.currentCue$=this.store.state$.pipe(ze("var.currentCue"))}loadShow(e){this.conn.sendMessage(`LOADSHOW^${e}`)}loadSnapshot(e,t){this.conn.sendMessage(`LOADSNAPSHOT^${e}^${t}`)}loadCue(e,t){this.conn.sendMessage(`LOADCUE^${e}^${t}`)}saveSnapshot(e,t){this.conn.sendMessage(`SAVESNAPSHOT^${e}^${t}`)}saveCue(e,t){this.conn.sendMessage(`SAVECUE^${e}^${t}`)}updateCurrentSnapshot(){Oe([this.currentShow$,this.currentSnapshot$]).pipe(Ce(1),Ie((([e,t])=>!!e&&!!t))).subscribe((([e,t])=>this.saveSnapshot(e,t)))}updateCurrentCue(){Oe([this.currentShow$,this.currentCue$]).pipe(Ce(1),Ie((([e,t])=>!!e&&!!t))).subscribe((([e,t])=>this.saveCue(e,t)))}}class Ht{constructor(e,t,r,n){this.conn=e,this.store=t,this.busName=r,this.busId=n,this.transitionSources$=new L,this.faderLevel$=this.store.state$.pipe(qe(((e,t)=>{const r=We("settings",e,...void 0!==t&&t>=0?[t]:[]);return e=>Ve(e,r)})(this.busName,this.busId?this.busId-1:void 0))),this.faderLevelDB$=this.faderLevel$.pipe(ve((e=>_t(e)))),this.name$=he(ht(this.busName,this.busId||-1));const i="volume-"+this.busName+this.busId,o=this.store.objectStore.get(i);if(o)return o;this.store.objectStore.set(i,this),Et(this.transitionSources$,this.faderLevel$,e).subscribe((e=>this.setFaderLevelRaw(e)))}fadeTo(e,t,r=xt.Linear,n=25){return e=ut(e,0,1),this.transitionSources$.next({targetValue:e,fadeTime:t,easing:r,fps:n}),Mt(t)}fadeToDB(e,t,r=xt.Linear,n=25){const i=gt(e);return this.fadeTo(i,t,r,n)}setFaderLevel(e){e=ut(e,0,1),this.setFaderLevelRaw(e)}setFaderLevelRaw(e){const t=`SETD^settings.${this.busName}${this.busId?"."+(this.busId-1):""}^${e}`;this.conn.sendMessage(t)}setFaderLevelDB(e){this.setFaderLevel(gt(e))}changeFaderLevelDB(e){this.faderLevelDB$.pipe(Ce(1)).subscribe((t=>this.setFaderLevelDB(Math.max(t,-100)+e)))}}var Gt={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},Xt=function(e){function t(t,r){var n=e.call(this)||this;if(n._socket=null,t instanceof I)n.destination=r,n.source=t;else{var i=n._config=s({},Gt);if(n._output=new L,"string"==typeof t)i.url=t;else for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");n.destination=new U}return n}return o(t,e),t.prototype.lift=function(e){var r=new t(this._config,this.destination);return r.operator=e,r.source=this,r},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new U),this._output=new L},t.prototype.multiplex=function(e,t,r){var n=this;return new I((function(i){try{n.next(e())}catch(e){i.error(e)}var o=n.subscribe({next:function(e){try{r(e)&&i.next(e)}catch(e){i.error(e)}},error:function(e){return i.error(e)},complete:function(){return i.complete()}});return function(){try{n.next(t())}catch(e){i.error(e)}o.unsubscribe()}}))},t.prototype._connectSocket=function(){var e=this,t=this._config,r=t.WebSocketCtor,n=t.protocol,i=t.url,o=t.binaryType,s=this._output,a=null;try{a=n?new r(i,n):new r(i),this._socket=a,o&&(this._socket.binaryType=o)}catch(e){return void s.error(e)}var c=new m((function(){e._socket=null,a&&1===a.readyState&&a.close()}));a.onopen=function(t){if(!e._socket)return a.close(),void e._resetState();var r=e._config.openObserver;r&&r.next(t);var n=e.destination;e.destination=O.create((function(t){if(1===a.readyState)try{var r=e._config.serializer;a.send(r(t))}catch(t){e.destination.error(t)}}),(function(t){var r=e._config.closingObserver;r&&r.next(void 0),t&&t.code?a.close(t.code,t.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e._config.closingObserver;t&&t.next(void 0),a.close(),e._resetState()})),n&&n instanceof U&&c.add(n.subscribe(e.destination))},a.onerror=function(t){e._resetState(),s.error(t)},a.onclose=function(t){a===e._socket&&e._resetState();var r=e._config.closeObserver;r&&r.next(t),t.wasClean?s.complete():s.error(t)},a.onmessage=function(t){try{var r=e._config.deserializer;s.next(r(t))}catch(e){s.error(e)}}},t.prototype._subscribe=function(e){var t=this,r=this.source;return r?r.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add((function(){var e=t._socket;0===t._output.observers.length&&(e&&(1===e.readyState||0===e.readyState)&&e.close(),t._resetState())})),e)},t.prototype.unsubscribe=function(){var t=this._socket;t&&(1===t.readyState||0===t.readyState)&&t.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(R);class Jt{constructor(e){this.reconnectTime=2e3,this.keepaliveTime=1e3,this.forceClose$=new L,this.statusSubject$=new L,this.outboundSubject$=new L,this.inboundSubject$=new L,this._status=ot.Close,this.status$=this.statusSubject$.asObservable(),this.outbound$=this.outboundSubject$.asObservable(),this.inbound$=this.inboundSubject$.asObservable(),this.allMessages$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Q(e),n=function(e){return"number"==typeof J(e)?e.pop():1/0}(e),i=e;return i.length?1===i.length?ae(i[0]):function(e){return void 0===e&&(e=1/0),xe(j,e)}(n)(fe(i,r)):G}(this.outbound$,this.inbound$),this.statusSubject$.subscribe((e=>{this._status=e.type})),this.socket$=function(e){return new Xt(e)}({url:`ws://${e.targetIP}`,WebSocketCtor:e.webSocketCtor||n,serializer:e=>`3:::${e}`,deserializer:({data:e})=>e,openObserver:{next:()=>this.statusSubject$.next({type:ot.Open})},closingObserver:{next:()=>this.statusSubject$.next({type:ot.Closing})},closeObserver:{next:()=>this.statusSubject$.next({type:ot.Close})}});const t=this.status$.pipe(Ie((e=>e.type===ot.Open))),r=this.status$.pipe(Ie((e=>e.type===ot.Close)));t.pipe(Re((()=>je(this.keepaliveTime).pipe(De(r)))),ve((()=>"ALIVE"))).subscribe((e=>this.outboundSubject$.next(e))),this.outbound$.subscribe(this.socket$)}get status(){return this._status}connect(){return this.statusSubject$.next({type:ot.Opening}),this.socket$.pipe(Ue({error:e=>this.statusSubject$.next({type:ot.Error,payload:e})}),function(e){var t;void 0===e&&(e=1/0);var r=(t=e&&"object"==typeof e?e:{count:e}).count,n=void 0===r?1/0:r,i=t.delay,o=t.resetOnSuccess,s=void 0!==o&&o;return n<=0?j:A((function(e,t){var r,o=0,a=function(){var c=!1;r=e.subscribe($(t,(function(e){s&&(o=0),t.next(e)}),void 0,(function(e){if(o++<n){var s=function(){r?(r.unsubscribe(),r=null,a()):c=!0};if(null!=i){var u="number"==typeof i?Me(i):ae(i(e,o)),l=$(t,(function(){l.unsubscribe(),s()}),(function(){t.complete()}));u.subscribe(l)}else s()}else t.error(e)}))),c&&(r.unsubscribe(),r=null,a())};a()}))}({delay:()=>Me(this.reconnectTime).pipe(De(this.forceClose$),Ue((()=>this.statusSubject$.next({type:ot.Reconnecting}))))}),ve((e=>{const t=e.match(/^(3:::)([\s\S]*)/);return t&&t[2]})),Ie((e=>null!==e)),xe((e=>e.split("\n")))).subscribe((e=>this.inboundSubject$.next(e))),me(this.status$.pipe(Ie((e=>e.type===ot.Open)),ve((()=>{}))))}disconnect(){return this.socket$.complete(),this.forceClose$.next(),me(this.status$.pipe(Ie((e=>e.type===ot.Close)),ve((()=>{}))))}reconnect(){return this.status$.pipe(Ie((e=>e.type===ot.Close)),Ce(1),function(e,t){void 0===t&&(t=z);var r=Me(1e3,t);return function(e){return xe((function(t,r){return ae(e(t,r)).pipe(Ce(1),function(e){return ve((function(){return e}))}(t))}))}((function(){return r}))}()).subscribe((()=>this.connect())),this.disconnect(),me(this.status$.pipe(Ie((e=>e.type===ot.Open)),ve((()=>{}))))}sendMessage(e){this.outboundSubject$.next(e)}}class Yt{constructor(){this.store=new Map}get(e){return this.store.get(e)}set(e,t){this.store.set(e,t)}}class Qt{constructor(e){this.conn=e,this.setdSetsMessageMatches$=this.conn.allMessages$.pipe(ve((e=>e.match(/(SETD|SETS)\^([a-zA-Z0-9.]+)\^(.*)/))),Ie((e=>null!==e)),Fe()),this.messages$=this.setdSetsMessageMatches$.pipe(ve((([e])=>e))),this.state$=Ee(this.setdSetsMessageMatches$.pipe(Ne(((e,[,,t,r])=>(e[t]=dt(r),e)),{})),{connector:()=>new U(1)}),this.syncState$=Ee(this.conn.allMessages$.pipe(Ie((e=>e.startsWith("BMSG^SYNC^"))),ve((e=>e.slice(10).split("^"))),Ne(((e,[t,r])=>({...e,[t]:parseInt(r,10)})),{})),{connector:()=>new U(1)}),this.objectStore=new Yt,this.state$.connect(),this.syncState$.connect()}}class Kt{constructor(e){this.conn=e,this.vuData$=this.conn.inbound$.pipe(Ie((e=>e.startsWith("VU2^"))),ve((e=>e.slice(4))),ve((e=>function(e){const t=[{key:"input",amount:e[0],blockSize:6},{key:"player",amount:e[1],blockSize:6},{key:"sub",amount:e[2],blockSize:7},{key:"fx",amount:e[3],blockSize:7},{key:"aux",amount:e[4],blockSize:5},{key:"master",amount:e[5],blockSize:5},{key:"line",amount:e[6],blockSize:6}],r={input:[],player:[],sub:[],fx:[],aux:[],master:[],line:[]},n=.004167508166392142;let i=8;return t.forEach((t=>{for(let o=0;o<(t.amount||0);o++){switch(t.key){case"input":case"player":case"line":r[t.key].push({vuPre:e[i+0]*n,vuPost:e[i+1]*n,vuPostFader:e[i+2]*n});break;case"aux":case"master":r[t.key].push({vuPost:e[i+0]*n,vuPostFader:e[i+1]*n});break;case"fx":case"sub":r[t.key].push({vuPostL:e[i+0]*n,vuPostR:e[i+1]*n,vuPostFaderL:e[i+2]*n,vuPostFaderR:e[i+3]*n})}i+=t.blockSize}})),r}(function(e){const t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return n}(e)))),Fe())}input(e){return this.vuData$.pipe(ve((t=>t.input[e-1])))}line(e){return this.vuData$.pipe(ve((t=>t.line[e-1])))}player(e){return this.vuData$.pipe(ve((t=>t.player[e-1])))}aux(e){return this.vuData$.pipe(ve((t=>t.aux[e-1])))}fx(e){return this.vuData$.pipe(ve((t=>t.fx[e-1])))}sub(e){return this.vuData$.pipe(ve((t=>t.sub[e-1])))}master(){return this.vuData$.pipe(ve((e=>{if(e.master.length<2)throw new Error("Master VU data has less than 2 channels.");return{vuPostL:e.master[0].vuPost,vuPostR:e.master[1].vuPost,vuPostFaderL:e.master[0].vuPostFader,vuPostFaderR:e.master[1].vuPostFader}})))}}const Zt={ui24:{0:["i",1],1:["i",2],2:["i",3],3:["i",4],4:["i",5],5:["i",6],6:["i",7],7:["i",8],8:["i",9],9:["i",10],10:["i",11],11:["i",12],12:["i",13],13:["i",14],14:["i",15],15:["i",16],16:["i",17],17:["i",18],18:["i",19],19:["i",20],20:["i",21],21:["i",22],22:["i",23],23:["i",24],24:["l",1],25:["l",2],26:["p",1],27:["p",2],28:["f",1],29:["f",2],30:["f",3],31:["f",4],32:["s",1],33:["s",2],34:["s",3],35:["s",4],36:["s",5],37:["s",6],38:["a",1],39:["a",2],40:["a",3],41:["a",4],42:["a",5],43:["a",6],44:["a",7],45:["a",8],46:["a",9],47:["a",10],48:["v",1],49:["v",2],50:["v",3],51:["v",4],52:["v",5],53:["v",6]},ui16:{0:["i",1],1:["i",2],2:["i",3],3:["i",4],4:["i",5],5:["i",6],6:["i",7],7:["i",8],8:["i",9],9:["i",10],10:["i",11],11:["i",12],12:["l",1],13:["l",2],14:["p",1],15:["p",2],16:["f",1],17:["f",2],18:["f",3],19:["f",4],20:["s",1],21:["s",2],22:["s",3],23:["s",4],24:["a",1],25:["a",2],26:["a",3],27:["a",4],28:["a",5],29:["a",6]},ui12:{0:["i",1],1:["i",2],2:["i",3],3:["i",4],4:["i",5],5:["i",6],6:["i",7],7:["i",8],8:["l",1],9:["l",2],10:["p",1],11:["p",2],12:["f",1],13:["f",2],14:["f",3],15:["f",4],16:["s",1],17:["s",2],18:["s",3],19:["s",4],20:["a",1],21:["a",2],22:["a",3],23:["a",4]}};function er(e,t,r){if("master"!==t&&void 0===r)throw new Error("Channel number is required");const n=Zt[e];if("master"===t)return-1;for(const[e,[i,o]]of Object.entries(n))if(i===t&&o===r)return+e;return null}class tr{constructor(e){this.sui=e,this.defaultSyncId="SYNC_ID"}getSelectedChannelIndex(e){const t=e||this.defaultSyncId;return this.sui.store.syncState$.pipe(ve((e=>e[t])),Ie((e=>void 0!==e)))}getSelectedChannel(e){return this.getSelectedChannelIndex(e).pipe(Be(this.sui.deviceInfo.model$),ve((([e,t])=>function(e,t,r){const n=function(e){return Zt[e]}(t);if(-1===r)return e.master;if(void 0!==n[r]){const[t,i]=n[r];switch(t){case"i":return e.master.input(i);case"l":return e.master.line(i);case"p":return e.master.player(i);case"f":return e.master.fx(i);case"s":return e.master.sub(i);case"a":return e.master.aux(i);case"v":return e.master.vca(i)}}return null}(this.sui,t,e))))}selectChannelIndex(e,t){const r=`BMSG^SYNC^${t||this.defaultSyncId}^${e}`;this.sui.conn.sendMessage(r)}selectChannel(e,t,r){const n=this.sui.deviceInfo.model;if(n){if("master"===e&&"number"!=typeof t&&void 0===r){const e=er(n,"master");if(null!==e)return void this.selectChannelIndex(e,t)}if("master"!==e&&"number"==typeof t){const i=er(n,e,t);if(null!==i)return void this.selectChannelIndex(i,r)}throw new Error("Invalid arguments or channel not found")}}}t.AutomixController=Pt,t.AutomixGroup=Ot,t.AuxBus=Ct,t.AuxChannel=It,t.Channel=jt,t.ChannelSync=tr,t.ConnectionStatus=ot,t.DBToFaderValue=gt,t.DEVICE_CAPABILITIES=At,t.DelayableMasterChannel=Ut,t.DeviceInfo=$t,t.DualTrackRecorder=Nt,t.Easings=xt,t.FxBus=Lt,t.FxChannel=Ft,t.FxType=ct,t.HwChannel=Rt,t.MasterBus=Bt,t.MasterChannel=Dt,t.MtkState=at,t.MultiTrackRecorder=Vt,t.MuteGroup=Wt,t.Player=qt,t.PlayerState=st,t.SendChannel=Tt,t.ShowController=zt,t.SoundcraftUI=class{get options(){return Object.freeze({...this._options})}constructor(e){this._options="string"==typeof e?{targetIP:e}:e,this.conn=new Jt(this._options),this.store=new Qt(this.conn),this.deviceInfo=new $t(this.store),this.status$=this.conn.status$,this.vuProcessor=new Kt(this.conn),this.master=new Bt(this.conn,this.store),this.player=new qt(this.conn,this.store),this.recorderDualTrack=new Nt(this.conn,this.store),this.recorderMultiTrack=new Vt(this.conn,this.store),this.volume={solo:new Ht(this.conn,this.store,"solovol"),headphone:e=>new Ht(this.conn,this.store,"hpvol",e)},this.shows=new zt(this.conn,this.store),this.automix=new Pt(this.conn,this.store),this.channelSync=new tr(this)}aux(e){return new Ct(this.conn,this.store,e)}fx(e){return new Lt(this.conn,this.store,e)}muteGroup(e){return new Wt(this.conn,this.store,e)}clearMuteGroups(){this.conn.sendMessage("SETD^mgmask^0")}hw(e){return new Rt(this.conn,this.store,this.deviceInfo,e)}async connect(){await this.conn.connect(),await bt(this.store)}disconnect(){return this.conn.disconnect()}async reconnect(){await this.conn.reconnect(),await bt(this.store)}},t.VolumeBus=Ht,t.VuProcessor=Kt,t.clamp=ut,t.constructReadableChannelName=ht,t.faderValueToDB=_t,t.fxTypeToString=function(e){switch(e){case ct.None:return"None";case ct.Chorus:return"Chorus";case ct.Reverb:return"Reverb";case ct.Delay:return"Delay";case ct.Room:return"Room"}},t.getLinkedChannelNumber=pt,t.isChannel=function(e){return e instanceof jt},t.isDelayableMasterChannel=function(e){return e instanceof Ut},t.isMaster=function(e){return e instanceof Bt},t.isMasterChannel=function(e){return e instanceof Dt},t.playerTimeToString=function(e){if(e<0)return"";const t=Math.floor(e),r=t%60;return`${Math.floor(t/60)}:${1===r.toString().length?"0":""}${r}`},t.roundToThreeDecimals=lt,t.transformStringValue=dt,t.vuValueToDB=function(e){return wt(e,-80,0)},t.waitForInitParams=bt},1635(e,t,r){"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>N,__assign:()=>o,__asyncDelegator:()=>x,__asyncGenerator:()=>P,__asyncValues:()=>k,__await:()=>O,__awaiter:()=>h,__classPrivateFieldGet:()=>C,__classPrivateFieldIn:()=>$,__classPrivateFieldSet:()=>A,__createBinding:()=>m,__decorate:()=>a,__disposeResources:()=>L,__esDecorate:()=>u,__exportStar:()=>v,__extends:()=>i,__generator:()=>b,__importDefault:()=>I,__importStar:()=>T,__makeTemplateObject:()=>E,__metadata:()=>f,__param:()=>c,__propKey:()=>d,__read:()=>g,__rest:()=>s,__rewriteRelativeImportExtension:()=>R,__runInitializers:()=>l,__setFunctionName:()=>p,__spread:()=>_,__spreadArray:()=>w,__spreadArrays:()=>S,__values:()=>y,default:()=>D});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var b in n)h[b]="access"===b?{}:n[b];for(var b in n.access)h.access[b]=n.access[b];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,r[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(d.get=a),(a=s(m.set))&&(d.set=a),(a=s(m.init))&&i.unshift(a)}else(a=s(m))&&("field"===c?i.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0}function l(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function b(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var m=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function v(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||m(t,e,r)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function S(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function w(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function P(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{(r=i[e](t)).value instanceof O?Promise.resolve(r.value.v).then(c,u):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function x(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:O(e[n](t)),done:!1}:i?i(t):t}:i}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var M=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},j=function(e){return j=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},j(e)};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=j(e),n=0;n<r.length;n++)"default"!==r[n]&&m(t,e,r[n]);return M(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function C(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function A(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function $(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var F="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function L(e){function t(t){e.error=e.hasError?new F(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,(function(e){return t(e),i()}))}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function R(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,r,n,i,o){return r?t?".jsx":".js":!n||i&&o?n+i+"."+o.toLowerCase()+"js":e})):e}const D={__extends:i,__assign:o,__rest:s,__decorate:a,__param:c,__esDecorate:u,__runInitializers:l,__propKey:d,__setFunctionName:p,__metadata:f,__awaiter:h,__generator:b,__createBinding:m,__exportStar:v,__values:y,__read:g,__spread:_,__spreadArrays:S,__spreadArray:w,__await:O,__asyncGenerator:P,__asyncDelegator:x,__asyncValues:k,__makeTemplateObject:E,__importStar:T,__importDefault:I,__classPrivateFieldGet:C,__classPrivateFieldSet:A,__classPrivateFieldIn:$,__addDisposableResource:N,__disposeResources:L,__rewriteRelativeImportExtension:R}},1649(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const n=r(1635),i=r(360),o=n.__importDefault(r(3290)),s=r(2593),a=r(1706),c=r(8039),u=r(4044),l=r(4289),d=r(2365);t.InstanceBase=class{#c;#u;id;#l=new o.default({concurrency:1});#d=!1;#p=!1;#f={};#h={};#b;#m;#v=new Map;#y=new Map;#g=new Map;#_;#S;get instanceOptions(){return this.#_}get label(){return this.#S}constructor(e){if(!(0,s.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#_={disableVariableValidation:!1},this.#c=new u.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),upgradeActionsAndFeedbacks:this._handleUpgradeActionsAndFeedbacks.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:async()=>{},sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#c.receivedMessage(e)}));const t=async e=>e.text.includes("$(")?this.#c.sendWithCb("parseVariablesInString",e):{text:e.text,variableIds:void 0};this.#b=new l.ActionManager(t,(e=>this.#c.sendWithNoCb("setActionDefinitions",e)),(e=>this.#c.sendWithNoCb("setCustomVariable",e)),this.log.bind(this)),this.#m=new c.FeedbackManager(t,(e=>this.#c.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#c.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#u=e.upgradeScripts,this.id=e.id,this.#S=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#l.add((async()=>{if(this.#d)throw new Error("Already initialized");if(this.#f=e.config,this.#h=e.secrets,this.#S=e.label,process.title=e.label,e.isFirstInit){const t={},r={},n=this.getConfigFields();for(const e of n)"default"in e&&(e.type.startsWith("secret")?r[e.id]=e.default:t[e.id]=e.default);this.#f=t,this.#h=r,this.saveConfig(this.#f,this.#h),e.lastUpgradeIndex=this.#u.length-1}const{updatedConfig:t,updatedSecrets:r}=(0,a.runThroughUpgradeScripts)([],[],e.lastUpgradeIndex,this.#u,this.#f,this.#h,!1);this.#f=t??this.#f,this.#h=r??this.#h;try{await this.init(this.#f,!!e.isFirstInit,this.#h),this.#d=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}return{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#u.length-1,updatedConfig:this.#f,updatedSecrets:this.#h}}))}async _handleDestroy(){await this.#l.add((async()=>{if(!this.#d)throw new Error("Not initialized");await this.destroy(),this.#d=!1}))}async _handleConfigUpdateAndLabel(e){await this.#l.add((async()=>{if(!this.#d)throw new Error("Not initialized");this.#S=e.label,process.title=e.label,this.#f=e.config,this.#h=e.secrets,await this.configUpdated(this.#f,this.#h)}))}async _handleExecuteAction(e){return this.#b.handleExecuteAction(e)}async _handleUpdateFeedbacks(e){this.#m.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e){this.#b.handleUpdateActions(e.actions)}async _handleUpgradeActionsAndFeedbacks(e){return(0,a.runThroughUpgradeScripts)(e.actions,e.feedbacks,null,this.#u,this.#f,this.#h,!0)}async _handleGetConfigFields(e){return{fields:(0,s.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#b.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#m.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#p)return}else if(!this.#p)return;if(!this.handleStartStopRecordActions)throw this.#p=!1,new Error("Recording actions is not supported by this module!");this.#p=e.recording,this.handleStartStopRecordActions(this.#p)}async _handleSharedUdpSocketMessage(e){for(const t of this.#v.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#v.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e,t){e&&(this.#f=e),t&&(this.#h=t),this.#c.sendWithNoCb("saveConfig",{config:e,secrets:t})}setActionDefinitions(e){this.#b.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#m.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[r,n]of Object.entries(e))n&&t.push({...n,id:r});this.#c.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],r=[];this.#y.clear();for(const n of e)t.push({id:n.variableId,name:n.name}),this.#y.set(n.variableId,n),this.#g.has(n.variableId)||(this.#g.set(n.variableId,""),r.push({id:n.variableId,value:""}));if(!this.#_.disableVariableValidation){const e=new Set(this.#y.keys());for(const t of this.#g.keys())e.has(t)||(this.#g.delete(t),r.push({id:t,value:void 0}))}this.#c.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:r})}setVariableValues(e){const t=[];for(const[r,n]of Object.entries(e))this.#_.disableVariableValidation?(void 0===n?this.#g.delete(r):this.#g.set(r,n),t.push({id:r,value:n})):this.#y.has(r)?(this.#g.set(r,n??""),t.push({id:r,value:n??""})):t.push({id:r,value:void 0});this.#c.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#g.get(e)}async parseVariablesInString(e){const t=this.#m.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),e.includes("$(")?(await this.#c.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text:e}checkFeedbacks(...e){this.#m.checkFeedbacks(e)}checkFeedbacksById(...e){this.#m.checkFeedbacksById(e)}subscribeActions(...e){this.#b.subscribeActions(e)}unsubscribeActions(...e){this.#b.unsubscribeActions(e)}subscribeFeedbacks(...e){this.#m.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#m.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#p)throw new Error("Not currently recording actions");this.#c.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}oscSend(e,t,r,n){this.#c.sendWithNoCb("send-osc",(0,i.literal)({host:e,port:t,path:r,args:n}))}updateStatus(e,t){this.#c.sendWithNoCb("set-status",(0,i.literal)({status:e,message:t??null}))}log(e,t){this.#c.sendWithNoCb("log-message",(0,i.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const r="string"==typeof e?{type:e}:e,n=new d.SharedUdpSocketImpl(this.#c,this.#v,r);return t&&n.on("message",t),n}}},1666(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var o=function(e){function t(t,r){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(9879).Subscription);t.Action=o},1706(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,r,o,s,a,c){const u=new Map,l=e=>{let t=u.get(e);return t||(t={actions:[],feedbacks:[],config:!1},u.set(e,t)),t};for(const t of e){const e=t?.upgradeIndex??r;t&&"number"==typeof e&&l(e).actions.push(t.id)}for(const e of t){const t=e?.upgradeIndex??r;e&&"number"==typeof t&&l(t).feedbacks.push(e.id)}if(!c)for(let e=r??-1;e<o.length;e++)l(e).config=!0;const d=Object.fromEntries(e.map((e=>[e.id,e]))),p=Object.fromEntries(t.map((e=>[e.id,e]))),f={},h={};let b,m;if(u.size>0){const e=Array.from(u.keys()).sort(),t=Math.min(...e,r??-1)+1,c=[],l=[],v=o.length;for(let e=t;e<v;e++){const t=u.get(e-1);t&&(c.push(...t.actions),l.push(...t.feedbacks));const r=!!t?.config;if(!r&&0===c.length&&0===l.length)continue;const v=b??s,y=m??a,g=(0,o[e])({currentConfig:i(v)},{config:r?v:null,secrets:r?y:null,actions:c.map((e=>{const t=d[e];if(t)return(0,n.literal)({id:t.id,controlId:t.controlId,actionId:t.actionId,options:void 0!==t.options?i(t.options):{}})})).filter((e=>!!e)),feedbacks:l.map((e=>{const t=p[e];if(t)return(0,n.literal)({id:t.id,controlId:t.controlId,feedbackId:t.feedbackId,options:void 0!==t.options?i(t.options):{},isInverted:t.isInverted})})).filter((e=>!!e))});r&&g.updatedConfig&&(b=g.updatedConfig),r&&g.updatedSecrets&&(m=g.updatedSecrets);for(const t of g.updatedActions)if(t){const r=d[t.id];r&&(r.actionId=t.actionId,r.options=t.options,r.upgradeIndex=e,h[t.id]=r)}for(const t of g.updatedFeedbacks)if(t){const r=p[t.id];r&&(r.feedbackId=t.feedbackId,r.options=t.options,r.upgradeIndex=e,f[t.id]={...r,style:f[t.id]?.style??t.style,isInverted:t.isInverted??!1})}}for(const[e,t]of Object.entries(d))h[e]||"number"!=typeof t?.upgradeIndex||(h[e]=t);for(const[e,t]of Object.entries(p))f[e]||"number"!=typeof t?.upgradeIndex||(f[e]=t)}return{updatedActions:Object.values(h),updatedFeedbacks:Object.values(f),updatedConfig:b,updatedSecrets:m,latestUpgradeIndex:o.length-1}};const n=r(360);function i(e){return JSON.parse(JSON.stringify(e))}},1713(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=t.TimeoutError=void 0;var n=r(2326),i=r(5345),o=r(5212),s=r(9724),a=r(9619),c=r(7214),u=r(8619);function l(e){throw new t.TimeoutError(e)}t.TimeoutError=a.createErrorClass((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}})),t.timeout=function(e,t){var r=i.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e,a=r.first,d=r.each,p=r.with,f=void 0===p?l:p,h=r.scheduler,b=void 0===h?null!=t?t:n.asyncScheduler:h,m=r.meta,v=void 0===m?null:m;if(null==a&&null==d)throw new TypeError("No timeout provided.");return o.operate((function(e,t){var r,n,i=null,o=0,l=function(e){n=u.executeSchedule(t,b,(function(){try{r.unsubscribe(),s.innerFrom(f({meta:v,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(c.createOperatorSubscriber(t,(function(e){null==n||n.unsubscribe(),o++,t.next(i=e),d>0&&l(d)}),void 0,void 0,(function(){(null==n?void 0:n.closed)||null==n||n.unsubscribe(),i=null}))),!o&&l(null!=a?"number"==typeof a?a:+a-b.now():d)}))}},1719(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferTime=void 0;var i=r(9879),o=r(5212),s=r(7214),a=r(4830),c=r(2326),u=r(6404),l=r(8619);t.bufferTime=function(e){for(var t,r,d=[],p=1;p<arguments.length;p++)d[p-1]=arguments[p];var f=null!==(t=u.popScheduler(d))&&void 0!==t?t:c.asyncScheduler,h=null!==(r=d[0])&&void 0!==r?r:null,b=d[1]||1/0;return o.operate((function(t,r){var o=[],c=!1,u=function(e){var t=e.buffer;e.subs.unsubscribe(),a.arrRemove(o,e),r.next(t),c&&d()},d=function(){if(o){var t=new i.Subscription;r.add(t);var n={buffer:[],subs:t};o.push(n),l.executeSchedule(t,f,(function(){return u(n)}),e)}};null!==h&&h>=0?l.executeSchedule(r,f,d,h,!0):c=!0,d();var p=s.createOperatorSubscriber(r,(function(e){var t,r,i=o.slice();try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var c=a.value,l=c.buffer;l.push(e),b<=l.length&&u(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}),(function(){for(;null==o?void 0:o.length;)r.next(o.shift().buffer);null==p||p.unsubscribe(),r.complete(),r.unsubscribe()}),void 0,(function(){return o=null}));t.subscribe(p)}))}},1722(e,t,r){"use strict";const n=r(4434),i=r(8611),{Duplex:o}=r(2203),{createHash:s}=r(6982),a=r(5926),c=r(2971),u=r(8237),l=r(1060),{GUID:d,kWebSocket:p}=r(2614),f=/^[+/0-9A-Za-z]{22}==$/;function h(e){e._state=2,e.emit("close")}function b(){this.destroy()}function m(e,t,r,n){r=r||i.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function v(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,v),e.emit("wsClientError",n,r,t)}else m(r,n,i)}e.exports=class extends n{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:l,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(h,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(h,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{h(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",b);const i=e.headers["sec-websocket-key"],o=e.headers.upgrade,s=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void v(this,e,t,405,"Invalid HTTP method");if(void 0===o||"websocket"!==o.toLowerCase())return void v(this,e,t,400,"Invalid Upgrade header");if(void 0===i||!f.test(i))return void v(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==s&&13!==s)return void v(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void m(t,400);const l=e.headers["sec-websocket-protocol"];let d=new Set;if(void 0!==l)try{d=u.parse(l)}catch(r){return void v(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const p=e.headers["sec-websocket-extensions"],h={};if(this.options.perMessageDeflate&&void 0!==p){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(p);e[c.extensionName]&&(r.accept(e[c.extensionName]),h[c.extensionName]=r)}catch(r){return void v(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const o={origin:e.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((o,s,a,c)=>{if(!o)return m(t,s||401,a,c);this.completeUpgrade(h,i,d,e,t,r,n)}));if(!this.options.verifyClient(o))return m(t,401)}this.completeUpgrade(h,i,d,e,t,r,n)}completeUpgrade(e,t,r,n,i,o,u){if(!i.readable||!i.writable)return i.destroy();if(i[p])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(i,503);const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+d).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(l.push(`Sec-WebSocket-Protocol: ${e}`),f._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=a.format({[c.extensionName]:[t]});l.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=e}this.emit("headers",l,n),i.write(l.concat("\r\n").join("\r\n")),i.removeListener("error",b),f.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",(()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(h,this)}))),u(f,n)}}},1762(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounceTime=void 0;var n=r(2326),i=r(5212),o=r(7214);t.debounceTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.operate((function(r,n){var i=null,s=null,a=null,c=function(){if(i){i.unsubscribe(),i=null;var e=s;s=null,n.next(e)}};function u(){var r=a+e,o=t.now();if(o<r)return i=this.schedule(void 0,r-o),void n.add(i);c()}r.subscribe(o.createOperatorSubscriber(n,(function(r){s=r,a=t.now(),i||(i=t.schedule(u,e),n.add(i))}),(function(){c(),n.complete()}),void 0,(function(){s=i=null})))}))}},1778(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToggle=void 0;var i=r(9879),o=r(5212),s=r(9724),a=r(7214),c=r(5717),u=r(4830);t.bufferToggle=function(e,t){return o.operate((function(r,o){var l=[];s.innerFrom(e).subscribe(a.createOperatorSubscriber(o,(function(e){var r=[];l.push(r);var n=new i.Subscription;n.add(s.innerFrom(t(e)).subscribe(a.createOperatorSubscriber(o,(function(){u.arrRemove(l,r),o.next(r),n.unsubscribe()}),c.noop)))}),c.noop)),r.subscribe(a.createOperatorSubscriber(o,(function(e){var t,r;try{for(var i=n(l),o=i.next();!o.done;o=i.next())o.value.push(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}),(function(){for(;l.length>0;)o.next(l.shift());o.complete()})))}))}},1875(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationFrames=void 0;var n=r(8051),i=r(2931),o=r(5726);function s(e){return new n.Observable((function(t){var r=e||i.performanceTimestampProvider,n=r.now(),s=0,a=function(){t.closed||(s=o.animationFrameProvider.requestAnimationFrame((function(i){s=0;var o=r.now();t.next({timestamp:e?o:i,elapsed:o-n}),a()})))};return a(),function(){s&&o.animationFrameProvider.cancelAnimationFrame(s)}}))}t.animationFrames=function(e){return e?s(e):a};var a=s()},1898(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeFromArray=t.pipe=void 0;var n=r(80);function i(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},t.pipeFromArray=i},1903(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=void 0;var n=r(8051),i=r(7652),o=r(7214),s=r(5717),a=r(9724);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.argsOrArgArray(e);return new n.Observable((function(e){var t=0,n=function(){if(t<r.length){var i=void 0;try{i=a.innerFrom(r[t++])}catch(e){return void n()}var c=new o.OperatorSubscriber(e,void 0,s.noop,s.noop);i.subscribe(c),c.add(n)}else e.complete()};n()}))}},1934(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.never=t.NEVER=void 0;var n=r(8051),i=r(5717);t.NEVER=new n.Observable(i.noop),t.never=function(){return t.NEVER}},1943(e){"use strict";e.exports=require("fs/promises")},1946(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindNodeCallback=void 0;var n=r(7474);t.bindNodeCallback=function(e,t,r){return n.bindCallbackInternals(!0,e,t,r)}},1983(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.QueueAction=void 0;var o=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!=n&&n>0||null==n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.flush(this),0)},t}(r(4772).AsyncAction);t.QueueAction=o},2017(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},2018(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1635);n.__exportStar(r(3730),t),n.__exportStar(r(1649),t),n.__exportStar(r(7386),t),n.__exportStar(r(1400),t),n.__exportStar(r(8983),t),n.__exportStar(r(8104),t),n.__exportStar(r(3258),t),n.__exportStar(r(131),t),n.__exportStar(r(3371),t),n.__exportStar(r(9786),t),n.__exportStar(r(6132),t)},2036(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.QueueScheduler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(r(9533).AsyncScheduler);t.QueueScheduler=o},2044(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestWith=void 0;var o=r(4948);t.combineLatestWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combineLatest.apply(void 0,i([],n(e)))}},2052(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestTools=t.Immediate=void 0;var r,n=1,i={};function o(e){return e in i&&(delete i[e],!0)}t.Immediate={setImmediate:function(e){var t=n++;return i[t]=!0,r||(r=Promise.resolve()),r.then((function(){return o(t)&&e()})),t},clearImmediate:function(e){o(e)}},t.TestTools={pending:function(){return Object.keys(i).length}}},2070(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduce=void 0;var n=r(8531),i=r(5212);t.reduce=function(e,t){return i.operate(n.scanInternals(e,t,arguments.length>=2,!1,!0))}},2071(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeOn=void 0;var n=r(8619),i=r(5212),o=r(7214);t.observeOn=function(e,t){return void 0===t&&(t=0),i.operate((function(r,i){r.subscribe(o.createOperatorSubscriber(i,(function(r){return n.executeSchedule(i,e,(function(){return i.next(r)}),t)}),(function(){return n.executeSchedule(i,e,(function(){return i.complete()}),t)}),(function(r){return n.executeSchedule(i,e,(function(){return i.error(r)}),t)})))}))}},2105(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asap=t.asapScheduler=void 0;var n=r(432),i=r(3952);t.asapScheduler=new i.AsapScheduler(n.AsapAction),t.asap=t.asapScheduler},2139(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeatWhen=void 0;var n=r(9724),i=r(6808),o=r(5212),s=r(7214);t.repeatWhen=function(e){return o.operate((function(t,r){var o,a,c=!1,u=!1,l=!1,d=function(){return l&&u&&(r.complete(),!0)},p=function(){l=!1,o=t.subscribe(s.createOperatorSubscriber(r,void 0,(function(){l=!0,!d()&&(a||(a=new i.Subject,n.innerFrom(e(a)).subscribe(s.createOperatorSubscriber(r,(function(){o?p():c=!0}),(function(){u=!0,d()})))),a).next()}))),c&&(o.unsubscribe(),o=null,c=!1,p())};p()}))}},2187(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIterable=void 0;var n=r(4891),i=r(281);t.isIterable=function(e){return i.isFunction(null==e?void 0:e[n.iterator])}},2203(e){"use strict";e.exports=require("stream")},2275(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interval=void 0;var n=r(2326),i=r(5825);t.interval=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=n.asyncScheduler),e<0&&(e=0),i.timer(e,e,t)}},2326(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.async=t.asyncScheduler=void 0;var n=r(4772),i=r(9533);t.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),t.async=t.asyncScheduler},2359(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipLast=void 0;var n=r(80),i=r(5212),o=r(7214);t.skipLast=function(e){return e<=0?n.identity:i.operate((function(t,r){var n=new Array(e),i=0;return t.subscribe(o.createOperatorSubscriber(r,(function(t){var o=i++;if(o<e)n[o]=t;else{var s=o%e,a=n[s];n[s]=t,r.next(a)}}))),function(){n=null}}))}},2365(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const n=r(1635).__importDefault(r(228)),i=r(360);class o extends n.default{#c;#w;#_;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#o&&"object"==typeof this.#o?this.#o:void 0}#o="pending";constructor(e,t,r){super(),this.#c=e,this.#w=t,this.#_={...r}}bind(e,t,r){if(this.#o&&"object"==typeof this.#o)throw new Error("Socket is already bound");switch(this.#o){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,i.assertNever)(this.#o),new Error("Invalid socket state")}this.#o="binding",r&&this.on("listening",r),this.#c.sendWithCb("sharedUdpSocketJoin",{family:this.#_.type,portNumber:e}).then((t=>{this.#o={portNumber:e,handleId:t},this.#w.set(t,this),this.emit("listening")}),(e=>{this.#o="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#o&&"object"==typeof this.#o);else switch(this.#o){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,i.assertNever)(this.#o),new Error("Invalid socket state")}const t=this.#o.handleId;this.#o="closed",e&&this.on("close",e),this.#c.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#w.delete(t),this.emit("close")}),(e=>{this.#w.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,r,n,i,o){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof r){if("number"!=typeof n||"string"!=typeof i)throw new Error("Invalid arguments");if(void 0!==o&&"function"!=typeof o)throw new Error("Invalid arguments");const s=this.#O(e,t,r);this.#P(s,n,i,o)}else{if("string"!=typeof r)throw new Error("Invalid arguments");{if(void 0!==n&&"function"!=typeof n)throw new Error("Invalid arguments");const i=this.#O(e,0,void 0);this.#P(i,t,r,n)}}}#O(e,t,r){let n;if("string"==typeof e)n=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))n=e;else{if(Array.isArray(e))return Buffer.from(e);n=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return n.subarray(t,void 0!==r?r+t:void 0)}#P(e,t,r,n){if(!this.#o||"object"!=typeof this.#o)throw new Error("Socket is not open");this.#c.sendWithCb("sharedUdpSocketSend",{handleId:this.#o.handleId,message:e,address:r,port:t}).then((()=>{n?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#o="fatalError";const t=this.boundState;t&&this.#w.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=o},2508(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeInterval=t.timeInterval=void 0;var n=r(2326),i=r(5212),o=r(7214);t.timeInterval=function(e){return void 0===e&&(e=n.asyncScheduler),i.operate((function(t,r){var n=e.now();t.subscribe(o.createOperatorSubscriber(r,(function(t){var i=e.now(),o=i-n;n=i,r.next(new s(t,o))})))}))};var s=function(e,t){this.value=e,this.interval=t};t.TimeInterval=s},2512(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduled=void 0;var n=r(5650),i=r(4530),o=r(4950),s=r(6805),a=r(7873),c=r(629),u=r(7552),l=r(4975),d=r(2187),p=r(8263),f=r(6297),h=r(5462),b=r(380);t.scheduled=function(e,t){if(null!=e){if(c.isInteropObservable(e))return n.scheduleObservable(e,t);if(l.isArrayLike(e))return o.scheduleArray(e,t);if(u.isPromise(e))return i.schedulePromise(e,t);if(p.isAsyncIterable(e))return a.scheduleAsyncIterable(e,t);if(d.isIterable(e))return s.scheduleIterable(e,t);if(h.isReadableStreamLike(e))return b.scheduleReadableStreamLike(e,t)}throw f.createInvalidObservableTypeError(e)}},2560(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObservable=void 0;var n=r(8051),i=r(281);t.isObservable=function(e){return!!e&&(e instanceof n.Observable||i.isFunction(e.lift)&&i.isFunction(e.subscribe))}},2568(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.last=void 0;var n=r(9328),i=r(5934),o=r(5279),s=r(632),a=r(8799),c=r(80);t.last=function(e,t){var r=arguments.length>=2;return function(u){return u.pipe(e?i.filter((function(t,r){return e(t,r,u)})):c.identity,o.takeLast(1),r?a.defaultIfEmpty(t):s.throwIfEmpty((function(){return new n.EmptyError})))}}},2574(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeInternals=void 0;var n=r(9724),i=r(8619),o=r(7214);t.mergeInternals=function(e,t,r,s,a,c,u,l){var d=[],p=0,f=0,h=!1,b=function(){!h||d.length||p||t.complete()},m=function(e){return p<s?v(e):d.push(e)},v=function(e){c&&t.next(e),p++;var l=!1;n.innerFrom(r(e,f++)).subscribe(o.createOperatorSubscriber(t,(function(e){null==a||a(e),c?m(e):t.next(e)}),(function(){l=!0}),void 0,(function(){if(l)try{p--;for(var e=function(){var e=d.shift();u?i.executeSchedule(t,u,(function(){return v(e)})):v(e)};d.length&&p<s;)e();b()}catch(e){t.error(e)}})))};return e.subscribe(o.createOperatorSubscriber(t,m,(function(){h=!0,b()}))),function(){null==l||l()}}},2593(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisibleExpression"in e&&"string"==typeof e.isVisibleExpression?{...e,isVisibleFnType:"expression",isVisibleFn:e.isVisibleExpression,isVisible:void 0,isVisibleExpression:void 0}:"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisibleFnType:"function",isVisible:void 0,isVisibleExpression:void 0}:{...e,isVisible:void 0,isVisibleFn:void 0,isVisibleFnType:void 0,isVisibleExpression:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},2614(e){"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},2627(e,t,r){"use strict";try{e.exports=r(8169)(__dirname)}catch(t){e.exports=r(6489)}},2688(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureError=t.errorContext=void 0;var n=r(3728),i=null;t.errorContext=function(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var r=i,o=r.errorThrown,s=r.error;if(i=null,o)throw s}}else e()},t.captureError=function(e){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},2708(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_OBSERVER=t.SafeSubscriber=t.Subscriber=void 0;var o=r(281),s=r(9879),a=r(3728),c=r(2980),u=r(5717),l=r(2767),d=r(4808),p=r(2688),f=function(e){function r(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,s.isSubscription(r)&&r.add(n)):n.destination=t.EMPTY_OBSERVER,n}return i(r,e),r.create=function(e,t,r){return new v(e,t,r)},r.prototype.next=function(e){this.isStopped?g(l.nextNotification(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?g(l.errorNotification(e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?g(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(s.Subscription);t.Subscriber=f;var h=Function.prototype.bind;function b(e,t){return h.call(e,t)}var m=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){y(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){y(e)}else y(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){y(e)}},e}(),v=function(e){function t(t,r,n){var i,s,c=e.call(this)||this;return o.isFunction(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:c&&a.config.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},i={next:t.next&&b(t.next,s),error:t.error&&b(t.error,s),complete:t.complete&&b(t.complete,s)}):i=t,c.destination=new m(i),c}return i(t,e),t}(f);function y(e){a.config.useDeprecatedSynchronousErrorHandling?p.captureError(e):c.reportUnhandledError(e)}function g(e,t){var r=a.config.onStoppedNotification;r&&d.timeoutProvider.setTimeout((function(){return r(e,t)}))}t.SafeSubscriber=v,t.EMPTY_OBSERVER={closed:!0,next:u.noop,error:function(e){throw e},complete:u.noop}},2719(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.catchError=void 0;var n=r(9724),i=r(7214),o=r(5212);t.catchError=function e(t){return o.operate((function(r,o){var s,a=null,c=!1;a=r.subscribe(i.createOperatorSubscriber(o,void 0,void 0,(function(i){s=n.innerFrom(t(i,e(t)(r))),a?(a.unsubscribe(),a=null,s.subscribe(o)):c=!0}))),c&&(a.unsubscribe(),a=null,s.subscribe(o))}))}},2767(e,t){"use strict";function r(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=t.nextNotification=t.errorNotification=t.COMPLETE_NOTIFICATION=void 0,t.COMPLETE_NOTIFICATION=r("C",void 0,void 0),t.errorNotification=function(e){return r("E",void 0,e)},t.nextNotification=function(e){return r("N",e,void 0)},t.createNotification=r},2884(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable=void 0,t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},2885(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayWhen=void 0;var n=r(9546),i=r(4383),o=r(2959),s=r(3337),a=r(7478),c=r(9724);t.delayWhen=function e(t,r){return r?function(s){return n.concat(r.pipe(i.take(1),o.ignoreElements()),s.pipe(e(t)))}:a.mergeMap((function(e,r){return c.innerFrom(t(e,r)).pipe(i.take(1),s.mapTo(e))}))}},2893(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowCount=void 0;var i=r(6808),o=r(5212),s=r(7214);t.windowCount=function(e,t){void 0===t&&(t=0);var r=t>0?t:e;return o.operate((function(t,o){var a=[new i.Subject],c=0;o.next(a[0].asObservable()),t.subscribe(s.createOperatorSubscriber(o,(function(t){var s,u;try{for(var l=n(a),d=l.next();!d.done;d=l.next())d.value.next(t)}catch(e){s={error:e}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}var p=c-e+1;if(p>=0&&p%r===0&&a.shift().complete(),++c%r===0){var f=new i.Subject;a.push(f),o.next(f.asObservable())}}),(function(){for(;a.length>0;)a.shift().complete();o.complete()}),(function(e){for(;a.length>0;)a.shift().error(e);o.error(e)}),(function(){a=null})))}))}},2931(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceTimestampProvider=void 0,t.performanceTimestampProvider={now:function(){return(t.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},2955(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishBehavior=void 0;var n=r(7314),i=r(4359);t.publishBehavior=function(e){return function(t){var r=new n.BehaviorSubject(e);return new i.ConnectableObservable(t,(function(){return r}))}}},2959(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ignoreElements=void 0;var n=r(5212),i=r(7214),o=r(5717);t.ignoreElements=function(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,o.noop))}))}},2971(e,t,r){"use strict";const n=r(3106),i=r(3338),o=r(4759),{kStatusCode:s}=r(2614),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),l=Symbol("total-length"),d=Symbol("callback"),p=Symbol("buffers"),f=Symbol("error");let h;function b(e){this[p].push(e),this[l]+=e.length}function m(e){this[l]+=e.length,this[u]._maxPayload<1||this[l]<=this[u]._maxPayload?this[p].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][s]=1009,this.removeListener("data",m),this.reset())}function v(e){this[u]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!h){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;h=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){h.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){h.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[l]=0,this._inflate[p]=[],this._inflate.on("error",v),this._inflate.on("data",m)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=i.concat(this._inflate[p],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[p]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[p]=[],this._deflate.on("data",b)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=i.concat(this._deflate[p],this._deflate[l]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[d]=null,this._deflate[l]=0,this._deflate[p]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},2978(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutWith=void 0;var n=r(2326),i=r(5345),o=r(1713);t.timeoutWith=function(e,t,r){var s,a,c;if(r=null!=r?r:n.async,i.isValidDate(e)?s=e:"number"==typeof e&&(a=e),!t)throw new TypeError("No observable provided to switch to");if(c=function(){return t},null==s&&null==a)throw new TypeError("No timeout provided.");return o.timeout({first:s,each:a,scheduler:r,with:c})}},2980(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportUnhandledError=void 0;var n=r(3728),i=r(4808);t.reportUnhandledError=function(e){i.timeoutProvider.setTimeout((function(){var t=n.config.onUnhandledError;if(!t)throw e;t(e)}))}},3079(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skip=void 0;var n=r(5934);t.skip=function(e){return n.filter((function(t,r){return e<=r}))}},3106(e){"use strict";e.exports=require("zlib")},3143(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var n=r(5212),i=r(5717),o=r(7214),s=r(9724);t.debounce=function(e){return n.operate((function(t,r){var n=!1,a=null,c=null,u=function(){if(null==c||c.unsubscribe(),c=null,n){n=!1;var e=a;a=null,r.next(e)}};t.subscribe(o.createOperatorSubscriber(r,(function(t){null==c||c.unsubscribe(),n=!0,a=t,c=o.createOperatorSubscriber(r,u,i.noop),s.innerFrom(e(t)).subscribe(c)}),(function(){u(),r.complete()}),void 0,(function(){a=c=null})))}))}},3148(e,t,r){"use strict";try{e.exports=r(8169)(__dirname)}catch(t){e.exports=r(6556)}},3197(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publish=void 0;var n=r(6808),i=r(8464),o=r(7812);t.publish=function(e){return e?function(t){return o.connect(e)(t)}:function(e){return i.multicast(new n.Subject)(e)}}},3258(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3275(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateTimestampProvider=void 0,t.dateTimestampProvider={now:function(){return(t.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},3290(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6368),i=r(6641),o=r(4774),s=()=>{},a=new i.TimeoutError;t.default=class extends n{constructor(e){var t,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((r,n)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(a)}));r(await o)}catch(e){n(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},3337(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapTo=void 0;var n=r(6872);t.mapTo=function(e){return n.map((function(){return e}))}},3338(e,t,r){"use strict";const{EMPTY_BUFFER:n}=r(2614),i=Buffer[Symbol.species];function o(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function s(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,o),o+=n.length}return o<t?new i(r.buffer,r.byteOffset,o):r},mask:o,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new i(t):ArrayBuffer.isView(t)?r=new i(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:s},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(2627);e.exports.mask=function(e,r,n,i,s){s<48?o(e,r,n,i,s):t.mask(e,r,n,i,s)},e.exports.unmask=function(e,r){e.length<32?s(e,r):t.unmask(e,r)}}catch(e){}},3352(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retry=void 0;var n=r(5212),i=r(7214),o=r(80),s=r(5825),a=r(9724);t.retry=function(e){var t;void 0===e&&(e=1/0);var r=(t=e&&"object"==typeof e?e:{count:e}).count,c=void 0===r?1/0:r,u=t.delay,l=t.resetOnSuccess,d=void 0!==l&&l;return c<=0?o.identity:n.operate((function(e,t){var r,n=0,o=function(){var l=!1;r=e.subscribe(i.createOperatorSubscriber(t,(function(e){d&&(n=0),t.next(e)}),void 0,(function(e){if(n++<c){var d=function(){r?(r.unsubscribe(),r=null,o()):l=!0};if(null!=u){var p="number"==typeof u?s.timer(u):a.innerFrom(u(e,n)),f=i.createOperatorSubscriber(t,(function(){f.unsubscribe(),d()}),(function(){t.complete()}));p.subscribe(f)}else d()}else t.error(e)}))),l&&(r.unsubscribe(),r=null,o())};o()}))}},3371(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3405(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.share=void 0;var o=r(9724),s=r(6808),a=r(2708),c=r(5212);function u(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(!0!==t){if(!1!==t){var c=new a.SafeSubscriber({next:function(){c.unsubscribe(),e()}});return o.innerFrom(t.apply(void 0,i([],n(r)))).subscribe(c)}}else e()}t.share=function(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new s.Subject}:t,n=e.resetOnError,i=void 0===n||n,l=e.resetOnComplete,d=void 0===l||l,p=e.resetOnRefCountZero,f=void 0===p||p;return function(e){var t,n,s,l=0,p=!1,h=!1,b=function(){null==n||n.unsubscribe(),n=void 0},m=function(){b(),t=s=void 0,p=h=!1},v=function(){var e=t;m(),null==e||e.unsubscribe()};return c.operate((function(e,c){l++,h||p||b();var y=s=null!=s?s:r();c.add((function(){0!==--l||h||p||(n=u(v,f))})),y.subscribe(c),!t&&l>0&&(t=new a.SafeSubscriber({next:function(e){return y.next(e)},error:function(e){h=!0,b(),n=u(m,i,e),y.error(e)},complete:function(){p=!0,b(),n=u(m,d),y.complete()}}),o.innerFrom(e).subscribe(t))}))(e)}}},3434(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sample=void 0;var n=r(9724),i=r(5212),o=r(5717),s=r(7214);t.sample=function(e){return i.operate((function(t,r){var i=!1,a=null;t.subscribe(s.createOperatorSubscriber(r,(function(e){i=!0,a=e}))),n.innerFrom(e).subscribe(s.createOperatorSubscriber(r,(function(){if(i){i=!1;var e=a;a=null,r.next(e)}}),o.noop))}))}},3484(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=void 0;var n=r(2070),i=r(5212),o=function(e,t){return e.push(t),e};t.toArray=function(){return i.operate((function(e,t){n.reduce(o,[])(e).subscribe(t)}))}},3506(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=void 0;var n=r(9619);t.NotFoundError=n.createErrorClass((function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}}))},3719(e,t,r){"use strict";const{Duplex:n}=r(2203);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const a=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,r){const n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()})),e.once("error",(function(e){a.destroyed||(r=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(i,a);let o=!1;e.once("error",(function(e){o=!0,n(e)})),e.once("close",(function(){o||n(t),process.nextTick(i,a)})),r&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){a._write(t,r,n)}))},a.on("end",o),a.on("error",s),a}},3728(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3730(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3866(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=void 0;var n=r(3275),i=r(6872);t.timestamp=function(e){return void 0===e&&(e=n.dateTimestampProvider),i.map((function(t){return{value:t,timestamp:e.now()}}))}},3916(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mapOneOrManyArgs=void 0;var o=r(6872),s=Array.isArray;t.mapOneOrManyArgs=function(e){return o.map((function(t){return function(e,t){return s(t)?e.apply(void 0,i([],n(t))):e(t)}(e,t)}))}},3929(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sequenceEqual=void 0;var n=r(5212),i=r(7214),o=r(9724);t.sequenceEqual=function(e,t){return void 0===t&&(t=function(e,t){return e===t}),n.operate((function(r,n){var s={buffer:[],complete:!1},a={buffer:[],complete:!1},c=function(e){n.next(e),n.complete()},u=function(e,r){var o=i.createOperatorSubscriber(n,(function(n){var i=r.buffer,o=r.complete;0===i.length?o?c(!1):e.buffer.push(n):!t(n,i.shift())&&c(!1)}),(function(){e.complete=!0;var t=r.complete,n=r.buffer;t&&c(0===n.length),null==o||o.unsubscribe()}));return o};r.subscribe(u(s,a)),o.innerFrom(e).subscribe(u(a,s))}))}},3952(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsapScheduler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},t}(r(9533).AsyncScheduler);t.AsapScheduler=o},3956(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryWhen=void 0;var n=r(9724),i=r(6808),o=r(5212),s=r(7214);t.retryWhen=function(e){return o.operate((function(t,r){var o,a,c=!1,u=function(){o=t.subscribe(s.createOperatorSubscriber(r,void 0,void 0,(function(t){a||(a=new i.Subject,n.innerFrom(e(a)).subscribe(s.createOperatorSubscriber(r,(function(){return o?u():c=!0})))),a&&a.next(t)}))),c&&(o.unsubscribe(),o=null,c=!1,u())};u()}))}},4044(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const n=r(1635),i=r(360),o=n.__importDefault(r(6022));t.IpcWrapper=class{#x;#k;#E;#M=1;#j=new Map;constructor(e,t,r){this.#x=e,this.#k=t,this.#E=r}async sendWithCb(e,t,r,n=0){n<=0&&(n=this.#E);const i={timeout:void 0,resolve:()=>null,reject:()=>null},s=new Promise(((e,t)=>{i.resolve=e,i.reject=t}));this.#M>268435456&&(this.#M=1);const a=this.#M++;this.#j.set(a,i),this.#k({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:a});const c=new Error("Call timed out");return i.timeout=setTimeout((()=>{i.reject(r?r():c),this.#j.delete(a)}),n),s}sendWithNoCb(e,t){this.#k({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#x[e.name];if(!t)return void(e.callbackId&&this.#k({direction:"response",callbackId:e.callbackId,success:!1,payload:o.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?o.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#k({direction:"response",callbackId:e.callbackId,success:!0,payload:o.default.stringify(t)})}),(t=>{e.callbackId&&this.#k({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):o.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#j.get(e.callbackId);if(this.#j.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const r=e.payload?o.default.parse(e.payload):void 0;if(e.success)t.resolve(r);else{let e=r;r&&"object"==typeof r&&"message"in r&&(e=new Error(r.message),r.stack&&(e.stack=r.stack)),t.reject(e)}break}default:(0,i.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},4120(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.not=void 0,t.not=function(e,t){return function(r,n){return!e.call(t,r,n)}}},4143(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleTime=void 0;var n=r(2326),i=r(3434),o=r(2275);t.sampleTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.sample(o.interval(e,t))}},4289(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const n=r(2593);function i(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#T;#I;#C;#A;#$=new Map;#N=new Map;constructor(e,t,r,n){this.#T=e,this.#I=t,this.#C=r,this.#A=n}async handleExecuteAction(e){const t=this.#$.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const r={parseVariablesInString:async t=>(await this.#T({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:(t,r)=>{this.#C({customVariableId:t,value:r,controlId:e.action.controlId})}};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},r)}handleUpdateActions(e){for(const[t,r]of Object.entries(e)){const e=this.#N.get(t);if(e){const t=this.#$.get(e.actionId);if(t?.unsubscribe&&!t.skipUnsubscribeOnOptionsChange){const r={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(t.unsubscribe(i(e),r)).catch((t=>{this.#A("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!r||r.disabled)this.#N.delete(t);else{this.#N.set(t,r);const e=this.#$.get(r.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during subscribe")}};Promise.resolve(e.subscribe(i(r),t)).catch((e=>{this.#A("error",`Action subscribe failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#$.get(e.action.actionId);if(t&&t.learn){const r={parseVariablesInString:async t=>(await this.#T({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during learn")}};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},r)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#$.clear();for(const[r,i]of Object.entries(e))i&&(t.push({id:r,name:i.name,description:i.description,options:(0,n.serializeIsVisibleFn)(i.options),optionsToIgnoreForSubscribe:i.optionsToIgnoreForSubscribe,hasLearn:!!i.learn,learnTimeout:i.learnTimeout,hasLifecycleFunctions:!!i.subscribe||!!i.unsubscribe}),this.#$.set(r,i));this.#I({actions:t})}subscribeActions(e){let t=Array.from(this.#N.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.actionId))));for(const e of t){const t=this.#$.get(e.actionId);if(t?.subscribe){const r={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during subscribe")}};Promise.resolve(t.subscribe(i(e),r)).catch((t=>{this.#A("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#N.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.actionId))));for(const e of t){const t=this.#$.get(e.actionId);if(t&&t.unsubscribe){const r={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(t.unsubscribe(i(e),r)).catch((t=>{this.#A("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},4326(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(l)throw new Error("runEntrypoint can only be called once");if(l=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const r=process.env.MODULE_MANIFEST;if(!r)throw new Error("Module initialise is missing MODULE_MANIFEST");const n=await o.default.readFile(r),d=JSON.parse(n.toString());if(d.runtime?.api!==i.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let p=d.runtime.apiVersion;if("0.0.0"===p)try{const e=await o.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(p=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const f=process.env.CONNECTION_ID;if("string"!=typeof f||!f)throw new Error("Module initialise is missing CONNECTION_ID");const h=process.env.VERIFICATION_TOKEN;if("string"!=typeof h||!h)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const b=new a.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{b.receivedMessage(e)})),u=new e((0,s.literal)({id:f,upgradeScripts:t,_isInstanceBaseProps:!0})),b.sendWithCb("register",{apiVersion:p,connectionId:f,verificationToken:h}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))};const n=r(1635),i=r(9967),o=n.__importDefault(r(1943)),s=r(360),a=r(4044),c=n.__importDefault(r(6928));let u,l=!1},4359(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectableObservable=void 0;var o=r(8051),s=r(9879),a=r(9224),c=r(7214),u=r(5212),l=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,u.hasLift(t)&&(n.lift=t.lift),n}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new s.Subscription;var r=this.getSubject();t.add(this.source.subscribe(c.createOperatorSubscriber(r,void 0,(function(){e._teardown(),r.complete()}),(function(t){e._teardown(),r.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=s.Subscription.EMPTY)}return t},t.prototype.refCount=function(){return a.refCount()(this)},t}(o.Observable);t.ConnectableObservable=l},4383(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.take=void 0;var n=r(4885),i=r(5212),o=r(7214);t.take=function(e){return e<=0?function(){return n.EMPTY}:i.operate((function(t,r){var n=0;t.subscribe(o.createOperatorSubscriber(r,(function(t){++n<=e&&(r.next(t),e<=n&&r.complete())})))}))}},4385(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.range=void 0;var n=r(8051),i=r(4885);t.range=function(e,t,r){if(null==t&&(t=e,e=0),t<=0)return i.EMPTY;var o=t+e;return new n.Observable(r?function(t){var n=e;return r.schedule((function(){n<o?(t.next(n++),this.schedule()):t.complete()}))}:function(t){for(var r=e;r<o&&!t.closed;)t.next(r++);t.complete()})}},4434(e){"use strict";e.exports=require("events")},4478(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameScheduler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){var t;this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);var r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},t}(r(9533).AsyncScheduler);t.AnimationFrameScheduler=o},4530(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schedulePromise=void 0;var n=r(9724),i=r(2071),o=r(5455);t.schedulePromise=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},4581(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4613(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;var n=r(7478);t.flatMap=n.mergeMap},4617(e){"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},4708(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceError=void 0;var n=r(9619);t.SequenceError=n.createErrorClass((function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}))},4756(e){"use strict";e.exports=require("tls")},4759(e){"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},4772(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAction=void 0;var o=r(1666),s=r(8284),a=r(4830),c=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return i(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),s.intervalProvider.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&s.intervalProvider.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,a.arrRemove(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(o.Action);t.AsyncAction=c},4774(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const i=n.default(this._queue,r,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},4808(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutProvider=void 0,t.timeoutProvider={setTimeout:function(e,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=t.timeoutProvider.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,n([e,i],r(o))):setTimeout.apply(void 0,n([e,i],r(o)))},clearTimeout:function(e){var r=t.timeoutProvider.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0}},4830(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrRemove=void 0,t.arrRemove=function(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}},4865(e){"use strict";const t=(e,t,n,i)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const o=Object.getOwnPropertyDescriptor(e,n),s=Object.getOwnPropertyDescriptor(t,n);!r(o,s)&&i||Object.defineProperty(e,n,s)},r=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},n=(e,t)=>`/* Wrapped ${e}*/\n${t}`,i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),o=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,r,{ignoreNonConfigurable:s=!1}={})=>{const{name:a}=e;for(const n of Reflect.ownKeys(r))t(e,r,n,s);return((e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)})(e,r),((e,t,r)=>{const s=""===r?"":`with ${r.trim()}() `,a=n.bind(null,s,t.toString());Object.defineProperty(a,"name",o),Object.defineProperty(e,"toString",{...i,value:a})})(e,r,a),e}},4880(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0;var n=r(5212),i=r(7214),o=r(9724);t.throttle=function(e,t){return n.operate((function(r,n){var s=null!=t?t:{},a=s.leading,c=void 0===a||a,u=s.trailing,l=void 0!==u&&u,d=!1,p=null,f=null,h=!1,b=function(){null==f||f.unsubscribe(),f=null,l&&(y(),h&&n.complete())},m=function(){f=null,h&&n.complete()},v=function(t){return f=o.innerFrom(e(t)).subscribe(i.createOperatorSubscriber(n,b,m))},y=function(){if(d){d=!1;var e=p;p=null,n.next(e),!h&&v(e)}};r.subscribe(i.createOperatorSubscriber(n,(function(e){d=!0,p=e,(!f||f.closed)&&(c?y():v(e))}),(function(){h=!0,(!(l&&d&&f)||f.closed)&&n.complete()})))}))}},4885(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.empty=t.EMPTY=void 0;var n=r(8051);t.EMPTY=new n.Observable((function(e){return e.complete()})),t.empty=function(e){return e?function(e){return new n.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}(e):t.EMPTY}},4891(e,t){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(t,"__esModule",{value:!0}),t.iterator=t.getSymbolIterator=void 0,t.getSymbolIterator=r,t.iterator=r()},4948(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatest=void 0;var o=r(8246),s=r(5212),a=r(7652),c=r(3916),u=r(1898),l=r(6404);t.combineLatest=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var d=l.popResultSelector(t);return d?u.pipe(e.apply(void 0,i([],n(t))),c.mapOneOrManyArgs(d)):s.operate((function(e,r){o.combineLatestInit(i([e],n(a.argsOrArgArray(t))))(r)}))}},4950(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleArray=void 0;var n=r(8051);t.scheduleArray=function(e,t){return new n.Observable((function(r){var n=0;return t.schedule((function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())}))}))}},4975(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayLike=void 0,t.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},5019(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materialize=void 0;var n=r(1245),i=r(5212),o=r(7214);t.materialize=function(){return i.operate((function(e,t){e.subscribe(o.createOperatorSubscriber(t,(function(e){t.next(n.Notification.createNext(e))}),(function(){t.next(n.Notification.createComplete()),t.complete()}),(function(e){t.next(n.Notification.createError(e)),t.complete()})))}))}},5128(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=void 0;var n=r(8051),i=r(9724),o=r(6808),s=r(5212),a=r(7214);t.groupBy=function(e,t,r,c){return s.operate((function(s,u){var l;t&&"function"!=typeof t?(r=t.duration,l=t.element,c=t.connector):l=t;var d=new Map,p=function(e){d.forEach(e),e(u)},f=function(e){return p((function(t){return t.error(e)}))},h=0,b=!1,m=new a.OperatorSubscriber(u,(function(t){try{var s=e(t),p=d.get(s);if(!p){d.set(s,p=c?c():new o.Subject);var v=(g=s,_=p,(S=new n.Observable((function(e){h++;var t=_.subscribe(e);return function(){t.unsubscribe(),0===--h&&b&&m.unsubscribe()}}))).key=g,S);if(u.next(v),r){var y=a.createOperatorSubscriber(p,(function(){p.complete(),null==y||y.unsubscribe()}),void 0,void 0,(function(){return d.delete(s)}));m.add(i.innerFrom(r(v)).subscribe(y))}}p.next(l?l(t):t)}catch(e){f(e)}var g,_,S}),(function(){return p((function(e){return e.complete()}))}),f,(function(){return d.clear()}),(function(){return b=!0,0===h}));s.subscribe(m)}))}},5130(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncSubject=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return i(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t._hasValue,i=t._value,o=t.thrownError,s=t.isStopped,a=t._isComplete;r?e.error(o):(s||a)&&(n&&e.next(i),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this,r=t._hasValue,n=t._value;t._isComplete||(this._isComplete=!0,r&&e.prototype.next.call(this,n),e.prototype.complete.call(this))},t}(r(6808).Subject);t.AsyncSubject=o},5156(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowWhen=void 0;var n=r(6808),i=r(5212),o=r(7214),s=r(9724);t.windowWhen=function(e){return i.operate((function(t,r){var i,a,c=function(e){i.error(e),r.error(e)},u=function(){var t;null==a||a.unsubscribe(),null==i||i.complete(),i=new n.Subject,r.next(i.asObservable());try{t=s.innerFrom(e())}catch(e){return void c(e)}t.subscribe(a=o.createOperatorSubscriber(r,u,u,c))};u(),t.subscribe(o.createOperatorSubscriber(r,(function(e){return i.next(e)}),(function(){i.complete(),r.complete()}),c,(function(){null==a||a.unsubscribe(),i=null})))}))}},5158(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5212(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operate=t.hasLift=void 0;var n=r(281);function i(e){return n.isFunction(null==e?void 0:e.lift)}t.hasLift=i,t.operate=function(e){return function(t){if(i(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5266(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forkJoin=void 0;var n=r(8051),i=r(439),o=r(9724),s=r(6404),a=r(7214),c=r(3916),u=r(5810);t.forkJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.popResultSelector(e),l=i.argsArgArrayOrObject(e),d=l.args,p=l.keys,f=new n.Observable((function(e){var t=d.length;if(t)for(var r=new Array(t),n=t,i=t,s=function(t){var s=!1;o.innerFrom(d[t]).subscribe(a.createOperatorSubscriber(e,(function(e){s||(s=!0,i--),r[t]=e}),(function(){return n--}),void 0,(function(){n&&s||(i||e.next(p?u.createObject(p,r):r),e.complete())})))},c=0;c<t;c++)s(c);else e.complete()}));return r?f.pipe(c.mapOneOrManyArgs(r)):f}},5279(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.takeLast=void 0;var i=r(4885),o=r(5212),s=r(7214);t.takeLast=function(e){return e<=0?function(){return i.EMPTY}:o.operate((function(t,r){var i=[];t.subscribe(s.createOperatorSubscriber(r,(function(t){i.push(t),e<i.length&&i.shift()}),(function(){var e,t;try{for(var o=n(i),s=o.next();!s.done;s=o.next()){var a=s.value;r.next(a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}r.complete()}),void 0,(function(){i=null})))}))}},5345(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=void 0,t.isValidDate=function(e){return e instanceof Date&&!isNaN(e)}},5362(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zipAll=void 0;var n=r(1415),i=r(719);t.zipAll=function(e){return i.joinAllInternals(n.zip,e)}},5440(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var n=r(9328),i=r(4708),o=r(3506),s=r(5212),a=r(7214);t.single=function(e){return s.operate((function(t,r){var s,c=!1,u=!1,l=0;t.subscribe(a.createOperatorSubscriber(r,(function(n){u=!0,e&&!e(n,l++,t)||(c&&r.error(new i.SequenceError("Too many matching values")),c=!0,s=n)}),(function(){c?(r.next(s),r.complete()):r.error(u?new o.NotFoundError("No matching values"):new n.EmptyError)})))}))}},5455(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeOn=void 0;var n=r(5212);t.subscribeOn=function(e,t){return void 0===t&&(t=0),n.operate((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}},5462(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)},o=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=o[e](t)).value instanceof i?Promise.resolve(r.value.v).then(u,l):d(s[0][2],r)}catch(e){d(s[0][3],e)}var r}function u(e){c("next",e)}function l(e){c("throw",e)}function d(e,t){e(t),s.shift(),s.length&&c(s[0][0],s[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.isReadableStreamLike=t.readableStreamLikeToAsyncGenerator=void 0;var s=r(281);t.readableStreamLikeToAsyncGenerator=function(e){return o(this,arguments,(function(){var t,r,o;return n(this,(function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,i(t.read())];case 3:return r=n.sent(),o=r.value,r.done?[4,i(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,i(o)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))},t.isReadableStreamLike=function(e){return s.isFunction(null==e?void 0:e.getReader)}},5513(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=t.onErrorResumeNextWith=void 0;var o=r(7652),s=r(1903);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.argsOrArgArray(e);return function(e){return s.onErrorResumeNext.apply(void 0,i([e],n(r)))}}t.onErrorResumeNextWith=a,t.onErrorResumeNext=a},5544(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand=void 0;var n=r(5212),i=r(2574);t.expand=function(e,t,r){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,n.operate((function(n,o){return i.mergeInternals(n,o,e,t,void 0,!0,r)}))}},5565(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scan=void 0;var n=r(5212),i=r(8531);t.scan=function(e,t){return n.operate(i.scanInternals(e,t,arguments.length>=2,!0))}},5650(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleObservable=void 0;var n=r(9724),i=r(2071),o=r(5455);t.scheduleObservable=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},5692(e){"use strict";e.exports=require("https")},5717(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0,t.noop=function(){}},5726(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.animationFrameProvider=void 0;var o=r(9879);t.animationFrameProvider={schedule:function(e){var r=requestAnimationFrame,n=cancelAnimationFrame,i=t.animationFrameProvider.delegate;i&&(r=i.requestAnimationFrame,n=i.cancelAnimationFrame);var s=r((function(t){n=void 0,e(t)}));return new o.Subscription((function(){return null==n?void 0:n(s)}))},requestAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.animationFrameProvider.delegate;return((null==o?void 0:o.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(e)))},cancelAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.animationFrameProvider.delegate;return((null==o?void 0:o.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(e)))},delegate:void 0}},5761(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastValueFrom=void 0;var n=r(9328);t.lastValueFrom=function(e,t){var r="object"==typeof t;return new Promise((function(i,o){var s,a=!1;e.subscribe({next:function(e){s=e,a=!0},error:o,complete:function(){a?i(s):r?i(t.defaultValue):o(new n.EmptyError)}})}))}},5774(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipWhile=void 0;var n=r(5212),i=r(7214);t.skipWhile=function(e){return n.operate((function(t,r){var n=!1,o=0;t.subscribe(i.createOperatorSubscriber(r,(function(t){return(n||(n=!e(t,o++)))&&r.next(t)})))}))}},5797(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0;var n=r(2326),i=r(2885),o=r(5825);t.delay=function(e,t){void 0===t&&(t=n.asyncScheduler);var r=o.timer(e,t);return i.delayWhen((function(){return r}))}},5810(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createObject=void 0,t.createObject=function(e,t){return e.reduce((function(e,r,n){return e[r]=t[n],e}),{})}},5825(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timer=void 0;var n=r(8051),i=r(2326),o=r(8596),s=r(5345);t.timer=function(e,t,r){void 0===e&&(e=0),void 0===r&&(r=i.async);var a=-1;return null!=t&&(o.isScheduler(t)?r=t:a=t),new n.Observable((function(t){var n=s.isValidDate(e)?+e-r.now():e;n<0&&(n=0);var i=0;return r.schedule((function(){t.closed||(t.next(i++),0<=a?this.schedule(void 0,a):t.complete())}),n)}))}},5880(e,t,r){"use strict";const{isUtf8:n}=r(181),{hasBlob:i}=r(2614);function o(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function(e){return i&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:o,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},n)e.exports.isValidUTF8=function(e){return e.length<24?o(e):n(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(3148);e.exports.isValidUTF8=function(e){return e.length<32?o(e):t(e)}}catch(e){}},5881(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;var n=r(3275),i=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=n.dateTimestampProvider.now,e}();t.Scheduler=i},5884(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defer=void 0;var n=r(8051),i=r(9724);t.defer=function(e){return new n.Observable((function(t){i.innerFrom(e()).subscribe(t)}))}},5887(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationFrame=t.animationFrameScheduler=void 0;var n=r(6757),i=r(4478);t.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),t.animationFrame=t.animationFrameScheduler},5904(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.using=void 0;var n=r(8051),i=r(9724),o=r(4885);t.using=function(e,t){return new n.Observable((function(r){var n=e(),s=t(n);return(s?i.innerFrom(s):o.EMPTY).subscribe(r),function(){n&&n.unsubscribe()}}))}},5926(e,t,r){"use strict";const{tokenChars:n}=r(5880);function i(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,o,s=Object.create(null),a=!1,c=!1,u=!1,l=-1,d=-1,p=-1,f=0;for(;f<e.length;f++)if(d=e.charCodeAt(f),void 0===r)if(-1===p&&1===n[d])-1===l&&(l=f);else if(0===f||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===p&&(p=f);const n=e.slice(l,p);44===d?(i(t,n,s),s=Object.create(null)):r=n,l=p=-1}}else-1===p&&-1!==l&&(p=f);else if(void 0===o)if(-1===p&&1===n[d])-1===l&&(l=f);else if(32===d||9===d)-1===p&&-1!==l&&(p=f);else if(59===d||44===d){if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===p&&(p=f),i(s,e.slice(l,p),!0),44===d&&(i(t,r,s),s=Object.create(null),r=void 0),l=p=-1}else{if(61!==d||-1===l||-1!==p)throw new SyntaxError(`Unexpected character at index ${f}`);o=e.slice(l,f),l=p=-1}else if(c){if(1!==n[d])throw new SyntaxError(`Unexpected character at index ${f}`);-1===l?l=f:a||(a=!0),c=!1}else if(u)if(1===n[d])-1===l&&(l=f);else if(34===d&&-1!==l)u=!1,p=f;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===d&&61===e.charCodeAt(f-1))u=!0;else if(-1===p&&1===n[d])-1===l&&(l=f);else if(-1===l||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===p&&(p=f);let n=e.slice(l,p);a&&(n=n.replace(/\\/g,""),a=!1),i(s,o,n),44===d&&(i(t,r,s),s=Object.create(null),r=void 0),o=void 0,l=p=-1}}else-1===p&&(p=f);if(-1===l||u||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===p&&(p=f);const h=e.slice(l,p);return void 0===r?i(t,h,s):(void 0===o?i(s,h,!0):i(s,o,a?h.replace(/\\/g,""):h),i(t,r,s)),t}}},5934(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=void 0;var n=r(5212),i=r(7214);t.filter=function(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){return e.call(t,r,o++)&&n.next(r)})))}))}},5936(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var n=r(8087),i=r(9724),o=r(4885),s=r(6404),a=r(7058);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.popScheduler(e),c=s.popNumber(e,1/0),u=e;return u.length?1===u.length?i.innerFrom(u[0]):n.mergeAll(c)(a.from(u,r)):o.EMPTY}},6002(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.immediateProvider=void 0;var o=r(2052),s=o.Immediate.setImmediate,a=o.Immediate.clearImmediate;t.immediateProvider={setImmediate:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.immediateProvider.delegate;return((null==o?void 0:o.setImmediate)||s).apply(void 0,i([],n(e)))},clearImmediate:function(e){var r=t.immediateProvider.delegate;return((null==r?void 0:r.clearImmediate)||a)(e)},delegate:void 0}},6022(e){!function(){"use strict";var t=[,function(e,t){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===n(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=i,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var n,i,o=(i=2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}return o}}(n,i)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[0],a=o[1];return e[s]=a,e}),{})},t.isArguments=function(e){return null!=e&&i(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var o={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=o,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(o.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var r=Object.create(null),n=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},i=0;i<64;i++)r[n(i)]=i;var o=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],r=0;r<e;r++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},s={encode:function(e){if("string"==typeof e){var t=e;e=o(t.length);for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[r]=i}}for(var s=[],a=null,c=null,u=null,l=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,u=(15&e[d])<<2;break;case 2:u|=e[d]>>6&3,l=63&e[d],s.push(n(a)),s.push(n(c)),s.push(n(u)),s.push(n(l)),a=null,c=null,u=null,l=null}return null!=a&&(s.push(n(a)),s.push(n(c)),null==u?s.push("="):s.push(n(u)),null==l&&s.push("=")),s.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var n,i=o(t),s=null,a=null,c=null,u=0,l=0;l<e.length;l++){var d="="===(n=e.charAt(l))?-1:r[n];switch(l%4){case 0:if(d<0)throw new Error("invalid base64 string");s=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");s|=d>>4,i[u++]=s,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,i[u++]=a,c=(3&d)<<6);break;case 3:d>=0&&(i[u++]=c|d)}}return i},newBinary:o};t.Base64=s},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,i,o,s,a){var c=i[t];switch(r(c)){case"string":return n(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var u,l=s+o,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,f=0;f<p;f+=1)d[f]=e(f,c,o,l,a)||"null";return u=0===d.length?"[]":l?"[\n"+l+d.join(",\n"+l)+"\n"+s+"]":"["+d.join(",")+"]"}var h=Object.keys(c);return a&&(h=h.sort()),h.forEach((function(t){(u=e(t,c,o,l,a))&&d.push(n(t)+(l?": ":":")+u)})),u=0===d.length?"{}":l?"{\n"+l+d.join(",\n"+l)+"\n"+s+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var r=Object.assign({indent:"",canonical:!1},t);if(!0===r.indent)r.indent="  ";else if("number"==typeof r.indent){for(var n="",o=0;o<r.indent;o++)n+=" ";r.indent=n}return i("",{"":e},r.indent,"",r.canonical)},e.exports=t.default}],r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}var i={};!function(){var e=i,t=n(2).Base64,r=n(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var o=n(1),s={};e.EJSON=s;var a=new Map;s.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$date")&&1===(0,o.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$regexp")&&(0,o.hasOwn)(e,"$flags")&&2===(0,o.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$InfNaN")&&1===(0,o.lengthOf)(e)},matchObject:o.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$binary")&&1===(0,o.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,o.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$escape")&&1===(0,o.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var r=(0,o.lengthOf)(e);1!==r&&2!==r||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,o.keysOf)(e).forEach((function(r){t[r]=s.toJSONValue(e[r])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,o.keysOf)(e.$escape).forEach((function(r){t[r]=s.fromJSONValue(e.$escape[r])})),t}},{matchJSONValue:function(e){return(0,o.hasOwn)(e,"$type")&&(0,o.hasOwn)(e,"$value")&&2===(0,o.lengthOf)(e)},matchObject:function(e){return s._isCustomType(e)},toJSONValue:function(e){var t=r._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var n=a.get(t);return r._noYieldsAllowed((function(){return n(e.$value)}))}}];s._isCustomType=function(e){return e&&(0,o.isFunction)(e.toJSONValue)&&(0,o.isFunction)(e.typeName)&&a.has(e.typeName())},s._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,o.convertMapToObject)(a)},s._getConverters=function(){return c};var u=function(e){for(var t=0;t<c.length;t++){var r=c[t];if(r.matchObject(e))return r.toJSONValue(e)}},l=function e(t){if(null===t)return null;var r=u(t);return void 0!==r?r:(0,o.isObject)(t)?((0,o.keysOf)(t).forEach((function(r){var n=t[r];if((0,o.isObject)(n)||void 0===n||(0,o.isInfOrNaN)(n)){var i=u(n);i?t[r]=i:e(n)}})),t):t};s._adjustTypesToJSONValue=l,s.toJSONValue=function(e){var t=u(e);if(void 0!==t)return t;var r=e;return(0,o.isObject)(e)&&(r=s.clone(e),l(r)),r};var d=function(e){if((0,o.isObject)(e)&&null!==e){var t=(0,o.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var r=0;r<c.length;r++){var n=c[r];if(n.matchJSONValue(e))return n.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var r=d(t);return r!==t?r:(0,o.isObject)(t)?((0,o.keysOf)(t).forEach((function(r){var n=t[r];if((0,o.isObject)(n)){var i=d(n);if(n!==i)return void(t[r]=i);e(n)}})),t):t};s._adjustTypesFromJSONValue=p,s.fromJSONValue=function(e){var t=d(e);return t===e&&(0,o.isObject)(e)&&(t=s.clone(e),p(t)),t},s.stringify=(0,o.handleError)((function(e,t){var r=s.toJSONValue(e);return t&&(t.canonical||t.indent)?n(4)(r,t):JSON.stringify(r)})),s.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return s.fromJSONValue(JSON.parse(e))},s.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},s.equals=function(e,t,r){var n,i=!(!r||!r.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,o.isObject)(e)||!(0,o.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(s.isBinary(e)&&s.isBinary(t)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if((0,o.isFunction)(e.equals))return e.equals(t,r);if((0,o.isFunction)(t.equals))return t.equals(e,r);var a,c=Array.isArray(e),u=Array.isArray(t);if(c!==u)return!1;if(c&&u){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!s.equals(e[n],t[n],r))return!1;return!0}switch(s._isCustomType(e)+s._isCustomType(t)){case 1:return!1;case 2:return s.equals(s.toJSONValue(e),s.toJSONValue(t))}var l=(0,o.keysOf)(e),d=(0,o.keysOf)(t);return i?(n=0,a=l.every((function(i){return!(n>=d.length||i!==d[n]||!s.equals(e[i],t[d[n]],r)||(n++,0))}))):(n=0,a=l.every((function(i){return!!(0,o.hasOwn)(t,i)&&!!s.equals(e[i],t[i],r)&&(n++,!0)}))),a&&n===d.length},s.clone=function(e){var t;if(!(0,o.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(s.isBinary(e)){t=s.newBinary(e.length);for(var r=0;r<e.length;r++)t[r]=e[r];return t}return Array.isArray(e)?e.map(s.clone):(0,o.isArguments)(e)?Array.from(e).map(s.clone):(0,o.isFunction)(e.clone)?e.clone():s._isCustomType(e)?s.fromJSONValue(s.clone(s.toJSONValue(e)),!0):(t={},(0,o.keysOf)(e).forEach((function(r){t[r]=s.clone(e[r])})),t)},s.newBinary=t.newBinary}(),e.exports=i.EJSON}()},6035(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilKeyChanged=void 0;var n=r(9663);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilChanged((function(r,n){return t?t(r[e],n[e]):r[e]===n[e]}))}},6075(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMapTo=void 0;var n=r(7478),i=r(281);t.mergeMapTo=function(e,t,r){return void 0===r&&(r=1/0),i.isFunction(t)?n.mergeMap((function(){return e}),t,r):("number"==typeof t&&(r=t),n.mergeMap((function(){return e}),r))}},6131(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeat=void 0;var n=r(4885),i=r(5212),o=r(7214),s=r(9724),a=r(5825);t.repeat=function(e){var t,r,c=1/0;return null!=e&&("object"==typeof e?(t=e.count,c=void 0===t?1/0:t,r=e.delay):c=e),c<=0?function(){return n.EMPTY}:i.operate((function(e,t){var n,i=0,u=function(){if(null==n||n.unsubscribe(),n=null,null!=r){var e="number"==typeof r?a.timer(r):s.innerFrom(r(i)),c=o.createOperatorSubscriber(t,(function(){c.unsubscribe(),l()}));e.subscribe(c)}else l()},l=function(){var r=!1;n=e.subscribe(o.createOperatorSubscriber(t,void 0,(function(){++i<c?n?u():r=!0:t.complete()}))),r&&u()};l()}))}},6132(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6153(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6160(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var n=r(8895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return n.TCPHelper}});var i=r(1118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return i.TelnetHelper}});var o=r(6259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return o.UDPHelper}})},6201(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchAll=void 0;var n=r(680),i=r(80);t.switchAll=function(){return n.switchMap(i.identity)}},6250(e,t,r){"use strict";const n=r(2017);n.code='require("ajv/dist/runtime/equal").default',t.A=n},6259(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const n=r(1635).__importDefault(r(7194)),i=r(228),o=r(1400);class s extends i.EventEmitter{#F;#L;#R;#_;#D=!1;#U;#r;get isDestroyed(){return this.#D}constructor(e,t,r){super(),this.#F=e,this.#L=t,this.#_={...r},this.#R=n.default.createSocket("udp4");try{this.#R.bind(this.#_.bind_port||0,this.#_.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#_.bind_ip||"0.0.0.0"}:${this.#_.bind_port||0}`)}void 0!==this.#_.ttl&&this.#R.setTTL(this.#_.ttl),void 0!==this.#_.multicast_ttl&&this.#R.setMulticastTTL(this.#_.multicast_ttl),this.#R.on("error",(e=>{this.#B(o.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#R.on("listening",(()=>{this.#_.broadcast&&this.#R.setBroadcast(!0),this.#_.multicast_interface&&this.#R.setMulticastInterface(this.#_.multicast_interface),this.#B(o.InstanceStatus.Ok),this.emit("listening")})),this.#R.on("message",((e,t)=>this.emit("data",e,t))),this.#r=setTimeout((()=>{this.#D||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#F}:${this.#L} is missing an error handler!`)}),5e3)}async send(e){if(this.#D)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,r)=>{this.#R.send(e,this.#L,this.#F,(e=>{e?r(e):t()}))}))}destroy(){this.#D=!0,void 0!==this.#r&&(clearTimeout(this.#r),this.#r=void 0),this.#R.removeAllListeners(),this.#R.close(),this.removeAllListeners()}#B(e,t){this.#U!=e&&(this.#U=e,this.emit("status_change",e,t))}}t.UDPHelper=s},6278(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.substituteEscapeCharacters=t.parseEscapeCharacters=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const n=r(1635);n.__exportStar(r(9077),t),n.__exportStar(r(2018),t),n.__exportStar(r(4581),t),n.__exportStar(r(5158),t);var i=r(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return i.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return i.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return i.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return i.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return i.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return i.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return i.assertNever}}),Object.defineProperty(t,"parseEscapeCharacters",{enumerable:!0,get:function(){return i.parseEscapeCharacters}}),Object.defineProperty(t,"substituteEscapeCharacters",{enumerable:!0,get:function(){return i.substituteEscapeCharacters}}),n.__exportStar(r(6160),t);var o=r(4326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return o.runEntrypoint}})},6284(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={grad:.9,turn:360,rad:360/(2*Math.PI)},n=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},i=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},o=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t},s=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:o(e.r,0,255),g:o(e.g,0,255),b:o(e.b,0,255),a:o(e.a)}},c=function(e){return{r:i(e.r),g:i(e.g),b:i(e.b),a:i(e.a,3)}},u=/^#([0-9a-f]{3,8})$/i,l=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=Math.max(t,r,n),s=o-Math.min(t,r,n),a=s?o===t?(r-n)/s:o===r?2+(n-t)/s:4+(t-r)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},p=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),s=n*(1-r),a=n*(1-(t-o)*r),c=n*(1-(1-t+o)*r),u=o%6;return{r:255*[n,a,s,s,c,n][u],g:255*[c,n,n,a,s,s][u],b:255*[s,s,c,n,n,a][u],a:i}},f=function(e){return{h:s(e.h),s:o(e.s,0,100),l:o(e.l,0,100),a:o(e.a)}},h=function(e){return{h:i(e.h),s:i(e.s),l:i(e.l),a:i(e.a,3)}},b=function(e){return p((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},m=function(e){return{h:(t=d(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},v=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,g=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S={string:[[function(e){var t=u.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?i(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?i(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=g.exec(e)||_.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=v.exec(e)||y.exec(e);if(!t)return null;var n,i,o=f({h:(n=t[1],i=t[2],void 0===i&&(i="deg"),Number(n)*(r[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return b(o)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,i=e.b,o=e.a,s=void 0===o?1:o;return n(t)&&n(r)&&n(i)?a({r:Number(t),g:Number(r),b:Number(i),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,r=e.s,i=e.l,o=e.a,s=void 0===o?1:o;if(!n(t)||!n(r)||!n(i))return null;var a=f({h:Number(t),s:Number(r),l:Number(i),a:Number(s)});return b(a)},"hsl"],[function(e){var t=e.h,r=e.s,i=e.v,a=e.a,c=void 0===a?1:a;if(!n(t)||!n(r)||!n(i))return null;var u=function(e){return{h:s(e.h),s:o(e.s,0,100),v:o(e.v,0,100),a:o(e.a)}}({h:Number(t),s:Number(r),v:Number(i),a:Number(c)});return p(u)},"hsv"]]},w=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},O=function(e){return"string"==typeof e?w(e.trim(),S.string):"object"==typeof e&&null!==e?w(e,S.object):[null,void 0]},P=function(e,t){var r=m(e);return{h:r.h,s:o(r.s+100*t,0,100),l:r.l,a:r.a}},x=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},k=function(e,t){var r=m(e);return{h:r.h,s:r.s,l:o(r.l+100*t,0,100),a:r.a}},E=function(){function e(e){this.parsed=O(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return i(x(this.rgba),2)},e.prototype.isDark=function(){return x(this.rgba)<.5},e.prototype.isLight=function(){return x(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,r=e.g,n=e.b,s=(o=e.a)<1?l(i(255*o)):"","#"+l(t)+l(r)+l(n)+s;var e,t,r,n,o,s},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,r=e.g,n=e.b,(i=e.a)<1?"rgba("+t+", "+r+", "+n+", "+i+")":"rgb("+t+", "+r+", "+n+")";var e,t,r,n,i},e.prototype.toHsl=function(){return h(m(this.rgba))},e.prototype.toHslString=function(){return t=(e=h(m(this.rgba))).h,r=e.s,n=e.l,(i=e.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+i+")":"hsl("+t+", "+r+"%, "+n+"%)";var e,t,r,n,i},e.prototype.toHsv=function(){return e=d(this.rgba),{h:i(e.h),s:i(e.s),v:i(e.v),a:i(e.a,3)};var e},e.prototype.invert=function(){return M({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),M(P(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),M(P(this.rgba,-e))},e.prototype.grayscale=function(){return M(P(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),M(k(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),M(k(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?M({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):i(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=m(this.rgba);return"number"==typeof e?M({h:e,s:t.s,l:t.l,a:t.a}):i(t.h)},e.prototype.isEqual=function(e){return this.toHex()===M(e).toHex()},e}(),M=function(e){return e instanceof E?e:new E(e)},j=[];t.Colord=E,t.colord=M,t.extend=function(e){e.forEach((function(e){j.indexOf(e)<0&&(e(E,S),j.push(e))}))},t.getFormat=function(e){return O(e)[1]},t.random=function(){return new E({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},6286(e,t,r){"use strict";const{Writable:n}=r(2203),i=r(2971),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(2614),{concat:u,toArrayBuffer:l,unmask:d}=r(3338),{isValidStatusCode:p,isValidUTF8:f}=r(5880),h=Buffer[Symbol.species];e.exports=class extends n{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new h(t.buffer,t.byteOffset+e,t.length-e),new h(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new h(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const r=!(64&~t[0]);if(!r||this._extensions[i.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);r>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!==(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&d(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?u(r,t):"arraybuffer"===this._binaryType?l(u(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!0),this._state=0,this.startLoop(e)})))}else{const n=u(r,t);if(!this._skipUTF8Validation&&!f(n)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,s),this.end();else{const r=e.readUInt16BE(0);if(!p(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const n=new h(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(n)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,n),this.end()}this._state=0}}createError(e,t,r,n,i){this._loop=!1,this._errored=!0;const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=i,o[a]=n,o}}},6297(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInvalidObservableTypeError=void 0,t.createInvalidObservableTypeError=function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},6328(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var o=r(5212),s=r(201),a=r(6404),c=r(7058);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=a.popScheduler(e);return o.operate((function(t,o){s.concatAll()(c.from(i([t],n(e)),r)).subscribe(o)}))}},6355(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluck=void 0;var n=r(6872);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return n.map((function(t){for(var n=t,i=0;i<r;i++){var o=null==n?void 0:n[e[i]];if(void 0===o)return;n=o}return n}))}},6368(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},6404(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.popNumber=t.popScheduler=t.popResultSelector=void 0;var n=r(281),i=r(8596);function o(e){return e[e.length-1]}t.popResultSelector=function(e){return n.isFunction(o(e))?e.pop():void 0},t.popScheduler=function(e){return i.isScheduler(o(e))?e.pop():void 0},t.popNumber=function(e,t){return"number"==typeof o(e)?e.pop():t}},6489(e){"use strict";e.exports={mask:(e,t,r,n,i)=>{for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]},unmask:(e,t)=>{const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}}},6556(e){"use strict";e.exports=function(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}},6569(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishLast=void 0;var n=r(5130),i=r(4359);t.publishLast=function(){return function(e){var t=new n.AsyncSubject;return new i.ConnectableObservable(e,(function(){return t}))}}},6606(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferWhen=void 0;var n=r(5212),i=r(5717),o=r(7214),s=r(9724);t.bufferWhen=function(e){return n.operate((function(t,r){var n=null,a=null,c=function(){null==a||a.unsubscribe();var t=n;n=[],t&&r.next(t),s.innerFrom(e()).subscribe(a=o.createOperatorSubscriber(r,c,i.noop))};c(),t.subscribe(o.createOperatorSubscriber(r,(function(e){return null==n?void 0:n.push(e)}),(function(){n&&r.next(n),r.complete()}),void 0,(function(){return n=a=null})))}))}},6632(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustMap=void 0;var n=r(6872),i=r(9724),o=r(5212),s=r(7214);t.exhaustMap=function e(t,r){return r?function(o){return o.pipe(e((function(e,o){return i.innerFrom(t(e,o)).pipe(n.map((function(t,n){return r(e,t,o,n)})))})))}:o.operate((function(e,r){var n=0,o=null,a=!1;e.subscribe(s.createOperatorSubscriber(r,(function(e){o||(o=s.createOperatorSubscriber(r,void 0,(function(){o=null,a&&r.complete()})),i.innerFrom(t(e,n++)).subscribe(o))}),(function(){a=!0,!o&&r.complete()})))}))}},6641(e,t,r){"use strict";const n=r(4617);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const o=(e,t,r)=>new Promise(((o,s)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void o(e);const a=setTimeout((()=>{if("function"==typeof r){try{o(r())}catch(e){s(e)}return}const n=r instanceof Error?r:new i("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(n)}),t);n(e.then(o,s),(()=>{clearTimeout(a)}))}));e.exports=o,e.exports.default=o,e.exports.TimeoutError=i},6677(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.raceWith=void 0;var o=r(9795),s=r(5212),a=r(80);t.raceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?s.operate((function(t,r){o.raceInit(i([t],n(e)))(r)})):a.identity}},6680(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwError=void 0;var n=r(8051),i=r(281);t.throwError=function(e,t){var r=i.isFunction(e)?e:function(){return e},o=function(e){return e.error(r())};return new n.Observable(t?function(e){return t.schedule(o,0,e)}:o)}},6707(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeScan=void 0;var n=r(5212),i=r(2574);t.mergeScan=function(e,t,r){return void 0===r&&(r=1/0),n.operate((function(n,o){var s=t;return i.mergeInternals(n,o,(function(t,r){return e(s,t,r)}),r,(function(e){s=e}),!1,void 0,(function(){return s=null}))}))}},6744(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairwise=void 0;var n=r(5212),i=r(7214);t.pairwise=function(){return n.operate((function(e,t){var r,n=!1;e.subscribe(i.createOperatorSubscriber(t,(function(e){var i=r;r=e,n&&t.next([i,e]),n=!0})))}))}},6749(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var o=r(1415),s=r(5212);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.operate((function(t,r){o.zip.apply(void 0,i([t],n(e))).subscribe(r)}))}},6757(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameAction=void 0;var o=r(4772),s=r(5726),a=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=s.animationFrameProvider.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,r,n){var i;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var o=t.actions;null!=r&&r===t._scheduled&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(s.animationFrameProvider.cancelAnimationFrame(r),t._scheduled=void 0)},t}(o.AsyncAction);t.AnimationFrameAction=a},6791(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.endWith=void 0;var o=r(9546),s=r(1587);t.endWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return o.concat(t,s.of.apply(void 0,i([],n(e))))}}},6805(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleIterable=void 0;var n=r(8051),i=r(4891),o=r(281),s=r(8619);t.scheduleIterable=function(e,t){return new n.Observable((function(r){var n;return s.executeSchedule(r,t,(function(){n=e[i.iterator](),s.executeSchedule(r,t,(function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){return void r.error(e)}i?r.complete():r.next(t)}),0,!0)})),function(){return o.isFunction(null==n?void 0:n.return)&&n.return()}}))}},6808(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AnonymousSubject=t.Subject=void 0;var s=r(8051),a=r(9879),c=r(839),u=r(4830),l=r(2688),d=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new c.ObjectUnsubscribedError},t.prototype.next=function(e){var t=this;l.errorContext((function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=o(t.currentObservers),s=i.next();!s.done;s=i.next())s.value.next(e)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;l.errorContext((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;l.errorContext((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?a.EMPTY_SUBSCRIPTION:(this.currentObservers=null,o.push(e),new a.Subscription((function(){t.currentObservers=null,u.arrRemove(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},t.prototype.asObservable=function(){var e=new s.Observable;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(s.Observable);t.Subject=d;var p=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return i(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:a.EMPTY_SUBSCRIPTION},t}(d);t.AnonymousSubject=p},6872(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0;var n=r(5212),i=r(7214);t.map=function(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){n.next(e.call(t,r,o++))})))}))}},6911(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeUntil=void 0;var n=r(5212),i=r(7214),o=r(9724),s=r(5717);t.takeUntil=function(e){return n.operate((function(t,r){o.innerFrom(e).subscribe(i.createOperatorSubscriber(r,(function(){return r.complete()}),s.noop)),!r.closed&&t.subscribe(r)}))}},6920(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromEventPattern=void 0;var n=r(8051),i=r(281),o=r(3916);t.fromEventPattern=function e(t,r,s){return s?e(t,r).pipe(o.mapOneOrManyArgs(s)):new n.Observable((function(e){var n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1===t.length?t[0]:t)},o=t(n);return i.isFunction(r)?function(){return r(n,o)}:void 0}))}},6928(e){"use strict";e.exports=require("path")},6975(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.withLatestFrom=void 0;var o=r(5212),s=r(7214),a=r(9724),c=r(80),u=r(5717),l=r(6404);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.popResultSelector(e);return o.operate((function(t,o){for(var l=e.length,d=new Array(l),p=e.map((function(){return!1})),f=!1,h=function(t){a.innerFrom(e[t]).subscribe(s.createOperatorSubscriber(o,(function(e){d[t]=e,f||p[t]||(p[t]=!0,(f=p.every(c.identity))&&(p=null))}),u.noop))},b=0;b<l;b++)h(b);t.subscribe(s.createOperatorSubscriber(o,(function(e){if(f){var t=i([e],n(d));o.next(r?r.apply(void 0,i([],n(t))):t)}})))}))}},6977(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zipWith=void 0;var o=r(6749);t.zipWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.zip.apply(void 0,i([],n(e)))}},6982(e){"use strict";e.exports=require("crypto")},7e3(e,t,r){"use strict";const n=r(4865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:r=0,maxWait:i=0,before:o=!1,after:s=!0}=t;if(!o&&!s)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,u;const l=function(...t){const n=this,l=o&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),s&&(u=e.apply(n,t))}),r),i>0&&!c&&s&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),u=e.apply(n,t)}),i)),l&&(u=e.apply(n,t)),u};return n(l,e),l.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},l}},7016(e){"use strict";e.exports=require("url")},7024(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentOutOfRangeError=void 0;var n=r(9619);t.ArgumentOutOfRangeError=n.createErrorClass((function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}))},7058(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.from=void 0;var n=r(2512),i=r(9724);t.from=function(e,t){return t?n.scheduled(e,t):i.innerFrom(e)}},7194(e){"use strict";e.exports=require("dgram")},7214(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorSubscriber=t.createOperatorSubscriber=void 0;var o=r(2708);t.createOperatorSubscriber=function(e,t,r,n,i){return new s(e,t,r,n,i)};var s=function(e){function t(t,r,n,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return i(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(o.Subscriber);t.OperatorSubscriber=s},7245(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttleTime=void 0;var n=r(2326),i=r(4880),o=r(5825);t.throttleTime=function(e,t,r){void 0===t&&(t=n.asyncScheduler);var s=o.timer(e,t);return i.throttle((function(){return s}),r)}},7281(e,t,r){"use strict";e.exports=a,e.exports.default=a;const n={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},isPrerelease:{type:"boolean",description:"Is this a pre-release version"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"},url:{type:"string"}},required:["name"],additionalProperties:!1}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"},permissions:{type:"object",description:"Permissions required by the module. This is used to inform the user of the permissions required by the module.\nNote: this requires the node22 or newer runtime",properties:{"worker-threads":{type:"boolean",description:"Enable if the module uses worker threads"},"child-process":{type:"boolean",description:"Enable if the module uses child processes"},"native-addons":{type:"boolean",description:"Enable if the module uses native addons"},filesystem:{type:"boolean",description:"Enable if the module requires read/write access to the filesystem"}},additionalProperties:!1}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}}}},required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},port:{type:"number"},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}}}},required:["type","protocol"]}}},i={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},port:{type:"number"},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}}}},required:["type","protocol"]},o=r(6250).A,s=new RegExp("","u");function a(e,{instancePath:t="",parentData:r,parentDataProperty:c,rootData:u=e}={}){let l=null,d=0;if(0===d){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.id&&(r="id")||void 0===e.name&&(r="name")||void 0===e.shortname&&(r="shortname")||void 0===e.description&&(r="description")||void 0===e.version&&(r="version")||void 0===e.license&&(r="license")||void 0===e.repository&&(r="repository")||void 0===e.bugs&&(r="bugs")||void 0===e.maintainers&&(r="maintainers")||void 0===e.legacyIds&&(r="legacyIds")||void 0===e.runtime&&(r="runtime")||void 0===e.manufacturer&&(r="manufacturer")||void 0===e.products&&(r="products")||void 0===e.keywords&&(r="keywords"))return a.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;if(void 0!==e.$schema){const r=d;if("string"!=typeof e.$schema)return a.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=r===d}else p=!0;if(p){if(void 0!==e.id){const r=d;if("string"!=typeof e.id)return a.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.name){const r=d;if("string"!=typeof e.name)return a.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.shortname){const r=d;if("string"!=typeof e.shortname)return a.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.description){const r=d;if("string"!=typeof e.description)return a.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.version){const r=d;if("string"!=typeof e.version)return a.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.isPrerelease){const r=d;if("boolean"!=typeof e.isPrerelease)return a.errors=[{instancePath:t+"/isPrerelease",schemaPath:"#/properties/isPrerelease/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.license){const r=d;if("string"!=typeof e.license)return a.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.repository){const r=d;if("string"!=typeof e.repository)return a.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.bugs){const r=d;if("string"!=typeof e.bugs)return a.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.maintainers){let r=e.maintainers;const n=d;if(d===n){if(!Array.isArray(r))return a.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const e=r.length;for(let n=0;n<e;n++){let e=r[n];const i=d;if(d===i){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t+"/maintainers/"+n,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.name&&(r="name"))return a.errors=[{instancePath:t+"/maintainers/"+n,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;{const r=d;for(const r in e)if("name"!==r&&"email"!==r&&"github"!==r&&"url"!==r)return a.errors=[{instancePath:t+"/maintainers/"+n,schemaPath:"#/properties/maintainers/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===d){if(void 0!==e.name){const r=d;if("string"!=typeof e.name)return a.errors=[{instancePath:t+"/maintainers/"+n+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=r===d}else h=!0;if(h){if(void 0!==e.email){const r=d;if("string"!=typeof e.email)return a.errors=[{instancePath:t+"/maintainers/"+n+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=r===d}else h=!0;if(h){if(void 0!==e.github){const r=d;if("string"!=typeof e.github)return a.errors=[{instancePath:t+"/maintainers/"+n+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=r===d}else h=!0;if(h)if(void 0!==e.url){const r=d;if("string"!=typeof e.url)return a.errors=[{instancePath:t+"/maintainers/"+n+"/url",schemaPath:"#/properties/maintainers/items/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=r===d}else h=!0}}}}}}if(!(f=i===d))break}if(f){let e,n=r.length;if(n>1)for(;n--;)for(e=n;e--;)if(o(r[n],r[e]))return a.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1}}}p=n===d}else p=!0;if(p){if(void 0!==e.legacyIds){let r=e.legacyIds;const n=d;if(d===n){if(!Array.isArray(r))return a.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var b=!0;const e=r.length;for(let n=0;n<e;n++){const e=d;if("string"!=typeof r[n])return a.errors=[{instancePath:t+"/legacyIds/"+n,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b=e===d))break}if(b){let e,n=r.length;if(n>1){const i={};for(;n--;){let o=r[n];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],a.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1;i[o]=n}}}}}}p=n===d}else p=!0;if(p){if(void 0!==e.runtime){let r=e.runtime;const i=d;if(d===i){if(!r||"object"!=typeof r||Array.isArray(r))return a.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===r.type&&(e="type")||void 0===r.api&&(e="api")||void 0===r.apiVersion&&(e="apiVersion")||void 0===r.entrypoint&&(e="entrypoint"))return a.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==r.type){let e=r.type;const i=d;if("string"!=typeof e)return a.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return a.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:n.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var m=i===d}else m=!0;if(m){if(void 0!==r.api){let e=r.api;const i=d;if("string"!=typeof e)return a.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return a.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:n.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;m=i===d}else m=!0;if(m){if(void 0!==r.apiVersion){const e=d;if("string"!=typeof r.apiVersion)return a.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=e===d}else m=!0;if(m){if(void 0!==r.entrypoint){const e=d;if("string"!=typeof r.entrypoint)return a.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=e===d}else m=!0;if(m)if(void 0!==r.permissions){let e=r.permissions;const n=d;if(d===n){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t+"/runtime/permissions",schemaPath:"#/properties/runtime/properties/permissions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const r=d;for(const r in e)if("worker-threads"!==r&&"child-process"!==r&&"native-addons"!==r&&"filesystem"!==r)return a.errors=[{instancePath:t+"/runtime/permissions",schemaPath:"#/properties/runtime/properties/permissions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===d){if(void 0!==e["worker-threads"]){const r=d;if("boolean"!=typeof e["worker-threads"])return a.errors=[{instancePath:t+"/runtime/permissions/worker-threads",schemaPath:"#/properties/runtime/properties/permissions/properties/worker-threads/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var v=r===d}else v=!0;if(v){if(void 0!==e["child-process"]){const r=d;if("boolean"!=typeof e["child-process"])return a.errors=[{instancePath:t+"/runtime/permissions/child-process",schemaPath:"#/properties/runtime/properties/permissions/properties/child-process/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;v=r===d}else v=!0;if(v){if(void 0!==e["native-addons"]){const r=d;if("boolean"!=typeof e["native-addons"])return a.errors=[{instancePath:t+"/runtime/permissions/native-addons",schemaPath:"#/properties/runtime/properties/permissions/properties/native-addons/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;v=r===d}else v=!0;if(v)if(void 0!==e.filesystem){const r=d;if("boolean"!=typeof e.filesystem)return a.errors=[{instancePath:t+"/runtime/permissions/filesystem",schemaPath:"#/properties/runtime/properties/permissions/properties/filesystem/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;v=r===d}else v=!0}}}}}m=n===d}else m=!0}}}}}p=i===d}else p=!0;if(p){if(void 0!==e.manufacturer){const r=d;if("string"!=typeof e.manufacturer)return a.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=r===d}else p=!0;if(p){if(void 0!==e.products){let r=e.products;const n=d;if(d===n){if(!Array.isArray(r))return a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length<1)return a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var y=!0;const e=r.length;for(let n=0;n<e;n++){const e=d;if("string"!=typeof r[n])return a.errors=[{instancePath:t+"/products/"+n,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(y=e===d))break}if(y){let e,n=r.length;if(n>1){const i={};for(;n--;){let o=r[n];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1;i[o]=n}}}}}}p=n===d}else p=!0;if(p){if(void 0!==e.keywords){let r=e.keywords;const n=d;if(d===n){if(!Array.isArray(r))return a.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var g=!0;const e=r.length;for(let n=0;n<e;n++){const e=d;if("string"!=typeof r[n])return a.errors=[{instancePath:t+"/keywords/"+n,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(g=e===d))break}if(g){let e,n=r.length;if(n>1){const i={};for(;n--;){let o=r[n];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],a.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:n,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+n+" are identical)"}],!1;i[o]=n}}}}}}p=n===d}else p=!0;if(p)if(void 0!==e.bonjourQueries){let r=e.bonjourQueries;const n=d;if(d===n){if(!r||"object"!=typeof r||Array.isArray(r))return a.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in r)if(s.test(e)){let n=r[e];const o=d,c=d;let u=!1,p=null;const f=d;if(d==d)if(n&&"object"==typeof n&&!Array.isArray(n)){let r;if(void 0===n.type&&(r="type")||void 0===n.protocol&&(r="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===l?l=[n]:l.push(n),d++}else{if(void 0!==n.type){const r=d;if("string"!=typeof n.type){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===l?l=[r]:l.push(r),d++}var _=r===d}else _=!0;if(_){if(void 0!==n.protocol){let r=n.protocol;const o=d;if("string"!=typeof r){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===l?l=[r]:l.push(r),d++}if("tcp"!==r&&"udp"!==r){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:i.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===l?l=[r]:l.push(r),d++}_=o===d}else _=!0;if(_){if(void 0!==n.port){let r=n.port;const i=d;if("number"!=typeof r||!isFinite(r)){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/port",schemaPath:"#/definitions/bonjourQuery/properties/port/type",keyword:"type",params:{type:"number"},message:"must be number"};null===l?l=[r]:l.push(r),d++}_=i===d}else _=!0;if(_)if(void 0!==n.txt){let r=n.txt;const i=d;if(d===i)if(r&&"object"==typeof r&&!Array.isArray(r)){for(const n in r)if(s.test(n)){const i=d;if("string"!=typeof r[n]){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===l?l=[r]:l.push(r),d++}if(i!==d)break}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===l?l=[r]:l.push(r),d++}_=i===d}else _=!0}}}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===l?l=[r]:l.push(r),d++}f===d&&(u=!0,p=0);const h=d;if(d===h)if(Array.isArray(n)){const r=n.length;for(let o=0;o<r;o++){let r=n[o];const a=d;if(d==d)if(r&&"object"==typeof r&&!Array.isArray(r)){let n;if(void 0===r.type&&(n="type")||void 0===r.protocol&&(n="protocol")){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===l?l=[r]:l.push(r),d++}else{if(void 0!==r.type){const n=d;if("string"!=typeof r.type){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===l?l=[r]:l.push(r),d++}var S=n===d}else S=!0;if(S){if(void 0!==r.protocol){let n=r.protocol;const s=d;if("string"!=typeof n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===l?l=[r]:l.push(r),d++}if("tcp"!==n&&"udp"!==n){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:i.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===l?l=[r]:l.push(r),d++}S=s===d}else S=!0;if(S){if(void 0!==r.port){let n=r.port;const i=d;if("number"!=typeof n||!isFinite(n)){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/port",schemaPath:"#/definitions/bonjourQuery/properties/port/type",keyword:"type",params:{type:"number"},message:"must be number"};null===l?l=[r]:l.push(r),d++}S=i===d}else S=!0;if(S)if(void 0!==r.txt){let n=r.txt;const i=d;if(d===i)if(n&&"object"==typeof n&&!Array.isArray(n)){for(const r in n)if(s.test(r)){const i=d;if("string"!=typeof n[r]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/txt/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===l?l=[n]:l.push(n),d++}if(i!==d)break}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===l?l=[r]:l.push(r),d++}S=i===d}else S=!0}}}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+o,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===l?l=[r]:l.push(r),d++}if(a!==d)break}}else{const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===l?l=[r]:l.push(r),d++}var w;if((w=h===d)&&u?(u=!1,p=[p,1]):w&&(u=!0,p=1),!u){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};return null===l?l=[r]:l.push(r),d++,a.errors=l,!1}if(d=c,null!==l&&(c?l.length=c:l=null),o!==d)break}}p=n===d}else p=!0}}}}}}}}}}}}}}}}}return a.errors=l,0===d}},7314(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BehaviorSubject=void 0;var o=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,n=e._value;if(t)throw r;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r(6808).Subject);t.BehaviorSubject=o},7386(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7400(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tap=void 0;var n=r(281),i=r(5212),o=r(7214),s=r(80);t.tap=function(e,t,r){var a=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return a?i.operate((function(e,t){var r;null===(r=a.subscribe)||void 0===r||r.call(a);var n=!0;e.subscribe(o.createOperatorSubscriber(t,(function(e){var r;null===(r=a.next)||void 0===r||r.call(a,e),t.next(e)}),(function(){var e;n=!1,null===(e=a.complete)||void 0===e||e.call(a),t.complete()}),(function(e){var r;n=!1,null===(r=a.error)||void 0===r||r.call(a,e),t.error(e)}),(function(){var e,t;n&&(null===(e=a.unsubscribe)||void 0===e||e.call(a)),null===(t=a.finalize)||void 0===t||t.call(a)})))})):s.identity}},7406(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partition=void 0;var n=r(4120),i=r(5934),o=r(9724);t.partition=function(e,t,r){return[i.filter(t,r)(o.innerFrom(e)),i.filter(n.not(t,r))(o.innerFrom(e))]}},7474(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.bindCallbackInternals=void 0;var o=r(8596),s=r(8051),a=r(5455),c=r(3916),u=r(2071),l=r(5130);t.bindCallbackInternals=function e(t,r,d,p){if(d){if(!o.isScheduler(d))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t,r,p).apply(this,n).pipe(c.mapOneOrManyArgs(d))};p=d}return p?function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t,r).apply(this,n).pipe(a.subscribeOn(p),u.observeOn(p))}:function(){for(var e=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=new l.AsyncSubject,u=!0;return new s.Observable((function(s){var a=c.subscribe(s);if(u){u=!1;var l=!1,d=!1;r.apply(e,i(i([],n(o)),[function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(t){var n=e.shift();if(null!=n)return void c.error(n)}c.next(1<e.length?e:e[0]),d=!0,l&&c.complete()}])),d&&c.complete(),l=!0}return a}))}}},7478(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMap=void 0;var n=r(6872),i=r(9724),o=r(5212),s=r(2574),a=r(281);t.mergeMap=function e(t,r,c){return void 0===c&&(c=1/0),a.isFunction(r)?e((function(e,o){return n.map((function(t,n){return r(e,t,o,n)}))(i.innerFrom(t(e,o)))}),c):("number"==typeof r&&(c=r),o.operate((function(e,r){return s.mergeInternals(e,r,t,c)})))}},7552(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=void 0;var n=r(281);t.isPromise=function(e){return n.isFunction(null==e?void 0:e.then)}},7652(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsOrArgArray=void 0;var r=Array.isArray;t.argsOrArgArray=function(e){return 1===e.length&&r(e[0])?e[0]:e}},7699(e,t,r){"use strict";const n=r(1060);n.createWebSocketStream=r(3719),n.Server=r(1722),n.Receiver=r(6286),n.Sender=r(914),n.WebSocket=n,n.WebSocketServer=n.Server,e.exports=n},7782(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shareReplay=void 0;var n=r(381),i=r(3405);t.shareReplay=function(e,t,r){var o,s,a,c,u=!1;return e&&"object"==typeof e?(o=e.bufferSize,c=void 0===o?1/0:o,s=e.windowTime,t=void 0===s?1/0:s,u=void 0!==(a=e.refCount)&&a,r=e.scheduler):c=null!=e?e:1/0,i.share({connector:function(){return new n.ReplaySubject(c,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}},7783(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipUntil=void 0;var n=r(5212),i=r(7214),o=r(9724),s=r(5717);t.skipUntil=function(e){return n.operate((function(t,r){var n=!1,a=i.createOperatorSubscriber(r,(function(){null==a||a.unsubscribe(),n=!0}),s.noop);o.innerFrom(e).subscribe(a),t.subscribe(i.createOperatorSubscriber(r,(function(e){return n&&r.next(e)})))}))}},7802(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalize=void 0;var n=r(5212);t.finalize=function(e){return n.operate((function(t,r){try{t.subscribe(r)}finally{r.add(e)}}))}},7812(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var n=r(6808),i=r(9724),o=r(5212),s=r(1071),a={connector:function(){return new n.Subject}};t.connect=function(e,t){void 0===t&&(t=a);var r=t.connector;return o.operate((function(t,n){var o=r();i.innerFrom(e(s.fromSubscribable(o))).subscribe(n),n.add(t.subscribe(o))}))}},7873(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleAsyncIterable=void 0;var n=r(8051),i=r(8619);t.scheduleAsyncIterable=function(e,t){if(!e)throw new Error("Iterable cannot be null");return new n.Observable((function(r){i.executeSchedule(r,t,(function(){var n=e[Symbol.asyncIterator]();i.executeSchedule(r,t,(function(){n.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}},7876(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinct=void 0;var n=r(5212),i=r(7214),o=r(5717),s=r(9724);t.distinct=function(e,t){return n.operate((function(r,n){var a=new Set;r.subscribe(i.createOperatorSubscriber(n,(function(t){var r=e?e(t):t;a.has(r)||(a.add(r),n.next(t))}))),t&&s.innerFrom(t).subscribe(i.createOperatorSubscriber(n,(function(){return a.clear()}),o.noop))}))}},7933(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestAll=void 0;var n=r(8246),i=r(719);t.combineLatestAll=function(e){return i.joinAllInternals(n.combineLatest,e)}},7977(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustAll=void 0;var n=r(6632),i=r(80);t.exhaustAll=function(){return n.exhaustMap(i.identity)}},8032(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concatWith=void 0;var o=r(6328);t.concatWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.concat.apply(void 0,i([],n(e)))}},8039(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const n=r(1635),i=r(2593),o=n.__importDefault(r(7e3)),s=r(360);function a(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#T;#V;#W;#A;#q=new Map;#z=new Map;#H=new Map;#G=new Map;#X;get parseVariablesContext(){return this.#X}constructor(e,t,r,n){this.#T=e,this.#V=t,this.#W=r,this.#A=n}getDefinitionIds(){return Array.from(this.#q.keys())}getInstanceIds(){return Array.from(this.#z.keys())}handleUpdateFeedbacks(e){for(const[t,r]of Object.entries(e)){const e=this.#z.get(t);if(e&&!r){const t=this.#q.get(e.feedbackId);if(t?.unsubscribe){const r={parseVariablesInString:async e=>e};Promise.resolve(t.unsubscribe(a(t.type,e),r)).catch((t=>{this.#A("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!r||r.disabled)this.#z.delete(t);else{if(this.#z.set(t,{...r}),!e){const e=this.#q.get(r.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>e};Promise.resolve(e.subscribe(a(e.type,r),t)).catch((e=>{this.#A("error",`Feedback subscribe failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)}))}}this.#J(t)}}}async handleLearnFeedback(e){const t=this.#q.get(e.feedback.feedbackId);if(t&&t.learn){const r={parseVariablesInString:async t=>(await this.#T({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},r)}}return{options:void 0}}#J(e){const t=this.#G.get(e);if(t)return void(t.needsRecheck=!0);const r=this.#z.get(e);if(!r)return;const n=r,i={needsRecheck:!1};this.#G.set(e,i),Promise.resolve().then((async()=>{const t=this.#q.get(n.feedbackId);let r;if(t){this.#X=`Feedback ${n.feedbackId} (${e})`;const i={parseVariablesInString:async t=>(await this.#T({text:t,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:e})).text};switch(t.type){case"boolean":r=t.callback({...a("boolean",n),type:"boolean"},i);break;case"value":r=t.callback({...a("value",n),type:"value"},i);break;case"advanced":r=t.callback({...a("advanced",n),type:"advanced",image:n.image},i);break;default:(0,s.assertNever)(t)}this.#X=void 0}const i=await r;this.#H.set(e,{id:e,controlId:n.controlId,value:i}),this.#Y()})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#X=void 0,this.#G.delete(e),i.needsRecheck&&setImmediate((()=>{this.#J(e)}))}))}#Y=(0,o.default)((()=>{const e=this.#H;this.#H=new Map,e.size>0&&this.#V({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#q.clear();for(const[r,n]of Object.entries(e))n&&(t.push({id:r,name:n.name,description:n.description,options:(0,i.serializeIsVisibleFn)(n.options),type:n.type,defaultStyle:"boolean"===n.type?n.defaultStyle:void 0,hasLearn:!!n.learn,learnTimeout:n.learnTimeout,showInvert:"boolean"===n.type&&n.showInvert}),this.#q.set(r,n));this.#W({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,r]of this.#z.entries())this.#q.get(r.feedbackId)&&(0===t.size||t.has(r.feedbackId))&&this.#J(e)}checkFeedbacksById(e){for(const t of e)this.#J(t)}subscribeFeedbacks(e){let t=Array.from(this.#z.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.feedbackId))));for(const e of t){const t=this.#q.get(e.feedbackId);if(t?.subscribe){const r={parseVariablesInString:async e=>e};Promise.resolve(t.subscribe(a(t.type,e),r)).catch((t=>{this.#A("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#z.values());const r=new Set(e);r.size&&(t=t.filter((e=>r.has(e.feedbackId))));for(const e of t){const t=this.#q.get(e.feedbackId);if(t&&t.unsubscribe){const r={parseVariablesInString:async e=>e};Promise.resolve(t.unsubscribe(a(t.type,e),r)).catch((t=>{this.#A("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},8051(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var n=r(2708),i=r(9879),o=r(2884),s=r(1898),a=r(3728),c=r(281),u=r(2688),l=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var o,s=this,a=(o=e)&&o instanceof n.Subscriber||function(e){return e&&c.isFunction(e.next)&&c.isFunction(e.error)&&c.isFunction(e.complete)}(o)&&i.isSubscription(o)?e:new n.SafeSubscriber(e,t,r);return u.errorContext((function(){var e=s,t=e.operator,r=e.source;a.add(t?t.call(a,r):r?s._subscribe(a):s._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=d(t))((function(t,i){var o=new n.SafeSubscriber({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function d(e){var t;return null!==(t=null!=e?e:a.config.Promise)&&void 0!==t?t:Promise}t.Observable=l},8072(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=void 0;var n=r(6808),i=r(5212),o=r(7214),s=r(5717),a=r(9724);t.window=function(e){return i.operate((function(t,r){var i=new n.Subject;r.next(i.asObservable());var c=function(e){i.error(e),r.error(e)};return t.subscribe(o.createOperatorSubscriber(r,(function(e){return null==i?void 0:i.next(e)}),(function(){i.complete(),r.complete()}),c)),a.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){i.complete(),r.next(i=new n.Subject)}),s.noop,c)),function(){null==i||i.unsubscribe(),i=null}}))}},8087(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAll=void 0;var n=r(7478),i=r(80);t.mergeAll=function(e){return void 0===e&&(e=1/0),n.mergeMap(i.identity,e)}},8104(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8169(e,t,r){const n=require;"function"==typeof n.addon?e.exports=n.addon.bind(n):e.exports=r(1381)},8183(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFind=t.find=void 0;var n=r(5212),i=r(7214);function o(e,t,r){var n="index"===r;return function(r,o){var s=0;r.subscribe(i.createOperatorSubscriber(o,(function(i){var a=s++;e.call(t,i,a,r)&&(o.next(n?a:i),o.complete())}),(function(){o.next(n?-1:void 0),o.complete()})))}}t.find=function(e,t){return n.operate(o(e,t,"value"))},t.createFind=o},8237(e,t,r){"use strict";const{tokenChars:n}=r(5880);e.exports={parse:function(e){const t=new Set;let r=-1,i=-1,o=0;for(;o<e.length;o++){const s=e.charCodeAt(o);if(-1===i&&1===n[s])-1===r&&(r=o);else if(0===o||32!==s&&9!==s){if(44!==s)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const n=e.slice(r,i);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=i=-1}}else-1===i&&-1!==r&&(i=o)}if(-1===r||-1!==i)throw new SyntaxError("Unexpected end of input");const s=e.slice(r,o);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}}},8246(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestInit=t.combineLatest=void 0;var n=r(8051),i=r(439),o=r(7058),s=r(80),a=r(3916),c=r(6404),u=r(5810),l=r(7214),d=r(8619);function p(e,t,r){return void 0===r&&(r=s.identity),function(n){f(t,(function(){for(var i=e.length,s=new Array(i),a=i,c=i,u=function(i){f(t,(function(){var u=o.from(e[i],t),d=!1;u.subscribe(l.createOperatorSubscriber(n,(function(e){s[i]=e,d||(d=!0,c--),c||n.next(r(s.slice()))}),(function(){--a||n.complete()})))}),n)},d=0;d<i;d++)u(d)}),n)}}function f(e,t,r){e?d.executeSchedule(r,e,t):t()}t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popScheduler(e),l=c.popResultSelector(e),d=i.argsArgArrayOrObject(e),f=d.args,h=d.keys;if(0===f.length)return o.from([],r);var b=new n.Observable(p(f,r,h?function(e){return u.createObject(h,e)}:s.identity));return l?b.pipe(a.mapOneOrManyArgs(l)):b},t.combineLatestInit=p},8263(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=void 0;var n=r(281);t.isAsyncIterable=function(e){return Symbol.asyncIterator&&n.isFunction(null==e?void 0:e[Symbol.asyncIterator])}},8269(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairs=void 0;var n=r(7058);t.pairs=function(e,t){return n.from(Object.entries(e),t)}},8284(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.intervalProvider=void 0,t.intervalProvider={setInterval:function(e,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=t.intervalProvider.delegate;return(null==a?void 0:a.setInterval)?a.setInterval.apply(a,n([e,i],r(o))):setInterval.apply(void 0,n([e,i],r(o)))},clearInterval:function(e){var r=t.intervalProvider.delegate;return((null==r?void 0:r.clearInterval)||clearInterval)(e)},delegate:void 0}},8461(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchScan=void 0;var n=r(680),i=r(5212);t.switchScan=function(e,t){return i.operate((function(r,i){var o=t;return n.switchMap((function(t,r){return e(o,t,r)}),(function(e,t){return o=t,t}))(r).subscribe(i),function(){o=null}}))}},8464(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multicast=void 0;var n=r(4359),i=r(281),o=r(7812);t.multicast=function(e,t){var r=i.isFunction(e)?e:function(){return e};return i.isFunction(t)?o.connect(t,{connector:r}):function(e){return new n.ConnectableObservable(e,r)}}},8531(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanInternals=void 0;var n=r(7214);t.scanInternals=function(e,t,r,i,o){return function(s,a){var c=r,u=t,l=0;s.subscribe(n.createOperatorSubscriber(a,(function(t){var r=l++;u=c?e(u,t,r):(c=!0,t),i&&a.next(u)}),o&&function(){c&&a.next(u),a.complete()}))}}},8589(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.count=void 0;var n=r(2070);t.count=function(e){return n.reduce((function(t,r,n){return!e||e(r,n)?t+1:t}),0)}},8590(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectable=void 0;var n=r(6808),i=r(8051),o=r(5884),s={connector:function(){return new n.Subject},resetOnDisconnect:!0};t.connectable=function(e,t){void 0===t&&(t=s);var r=null,n=t.connector,a=t.resetOnDisconnect,c=void 0===a||a,u=n(),l=new i.Observable((function(e){return u.subscribe(e)}));return l.connect=function(){return r&&!r.closed||(r=o.defer((function(){return e})).subscribe(u),c&&r.add((function(){return u=n()}))),r},l}},8596(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduler=void 0;var n=r(281);t.isScheduler=function(e){return e&&n.isFunction(e.schedule)}},8611(e){"use strict";e.exports=require("http")},8616(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.fromEvent=void 0;var i=r(9724),o=r(8051),s=r(7478),a=r(4975),c=r(281),u=r(3916),l=["addListener","removeListener"],d=["addEventListener","removeEventListener"],p=["on","off"];function f(e,t){return function(r){return function(n){return e[r](t,n)}}}t.fromEvent=function e(t,r,h,b){if(c.isFunction(h)&&(b=h,h=void 0),b)return e(t,r,h).pipe(u.mapOneOrManyArgs(b));var m=n(function(e){return c.isFunction(e.addEventListener)&&c.isFunction(e.removeEventListener)}(t)?d.map((function(e){return function(n){return t[e](r,n,h)}})):function(e){return c.isFunction(e.addListener)&&c.isFunction(e.removeListener)}(t)?l.map(f(t,r)):function(e){return c.isFunction(e.on)&&c.isFunction(e.off)}(t)?p.map(f(t,r)):[],2),v=m[0],y=m[1];if(!v&&a.isArrayLike(t))return s.mergeMap((function(t){return e(t,r,h)}))(i.innerFrom(t));if(!v)throw new TypeError("Invalid event target");return new o.Observable((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return v(t),function(){return y(t)}}))}},8619(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeSchedule=void 0,t.executeSchedule=function(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule((function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()}),n);if(e.add(o),!i)return o}},8710(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishReplay=void 0;var n=r(381),i=r(8464),o=r(281);t.publishReplay=function(e,t,r,s){r&&!o.isFunction(r)&&(s=r);var a=o.isFunction(r)?r:void 0;return function(r){return i.multicast(new n.ReplaySubject(e,t,s),a)(r)}}},8799(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIfEmpty=void 0;var n=r(5212),i=r(7214);t.defaultIfEmpty=function(e){return n.operate((function(t,r){var n=!1;t.subscribe(i.createOperatorSubscriber(r,(function(e){n=!0,r.next(e)}),(function(){n||r.next(e),r.complete()})))}))}},8877(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audit=void 0;var n=r(5212),i=r(9724),o=r(7214);t.audit=function(e){return n.operate((function(t,r){var n=!1,s=null,a=null,c=!1,u=function(){if(null==a||a.unsubscribe(),a=null,n){n=!1;var e=s;s=null,r.next(e)}c&&r.complete()},l=function(){a=null,c&&r.complete()};t.subscribe(o.createOperatorSubscriber(r,(function(t){n=!0,s=t,a||i.innerFrom(e(t)).subscribe(a=o.createOperatorSubscriber(r,u,l))}),(function(){c=!0,(!n||!a||a.closed)&&r.complete()})))}))}},8895(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const n=r(1635).__importDefault(r(9278)),i=r(228),o=r(1400);class s extends i.EventEmitter{#F;#L;_socket;#_;#Q=!1;#K=!1;#D=!1;#U;#Z;#r;get isConnected(){return this.#Q}get isConnecting(){return this.#K}get isDestroyed(){return this.#D}constructor(e,t,r){super(),this.#F=e,this.#L=t,this.#_={reconnect_interval:2e3,reconnect:!0,...r},this._socket=new n.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#K=!1,this.#Q=!1,this.#_.reconnect&&this.#ee(),this.#B(o.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#Q=!0,this.#K=!1,this.#B(o.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#Q=!1,this.#B(o.InstanceStatus.Disconnected),!this.#K&&this.#_.reconnect&&this.#ee(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>{this.#D||this.connect()})),this.#r=setTimeout((()=>{this.#r=void 0,this.#D||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#F}:${this.#L} is missing an error handler!`)}),5e3)}connect(){if(this.#D)throw new Error("Cannot connect destroyed socket");return!this.#K&&(this.#K=!0,this._socket.connect(this.#L,this.#F),!0)}async send(e){if(this.#D||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#Q)return!1;try{return new Promise(((t,r)=>{this._socket.write(e,(e=>{e?r(e):t(!0)}))}))}catch(e){this.#Q=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#B(o.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#D=!0,void 0!==this.#Z&&(clearTimeout(this.#Z),this.#Z=void 0),void 0!==this.#r&&(clearTimeout(this.#r),this.#r=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#ee(){void 0!==this.#Z&&clearTimeout(this.#Z),this.#Z=setTimeout((()=>{this.#Z=void 0,this.#B(o.InstanceStatus.Connecting),this.connect()}),this.#_.reconnect_interval)}#B(e,t){this.#U!=e&&(this.#U=e,this.emit("status_change",e,t))}}t.TCPHelper=s},8983(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8996(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowToggle=void 0;var i=r(6808),o=r(9879),s=r(5212),a=r(9724),c=r(7214),u=r(5717),l=r(4830);t.windowToggle=function(e,t){return s.operate((function(r,s){var d=[],p=function(e){for(;0<d.length;)d.shift().error(e);s.error(e)};a.innerFrom(e).subscribe(c.createOperatorSubscriber(s,(function(e){var r=new i.Subject;d.push(r);var n,f=new o.Subscription;try{n=a.innerFrom(t(e))}catch(e){return void p(e)}s.next(r.asObservable()),f.add(n.subscribe(c.createOperatorSubscriber(s,(function(){l.arrRemove(d,r),r.complete(),f.unsubscribe()}),u.noop,p)))}),u.noop)),r.subscribe(c.createOperatorSubscriber(s,(function(e){var t,r,i=d.slice();try{for(var o=n(i),s=o.next();!s.done;s=o.next())s.value.next(e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<d.length;)d.shift().complete();s.complete()}),p,(function(){for(;0<d.length;)d.shift().unsubscribe()})))}))}},9035(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=void 0;var n=r(5212),i=r(8183);t.findIndex=function(e,t){return n.operate(i.createFind(e,t,"index"))}},9054(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startWith=void 0;var n=r(9546),i=r(6404),o=r(5212);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.popScheduler(e);return o.operate((function(t,i){(r?n.concat(e,t,r):n.concat(e,t)).subscribe(i)}))}},9077(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e,t){if(!t){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'")}if(e.legacyIds.includes(e.id))throw new Error(`Manifest contains itself '${e.id}' in legacyIds`);if(!(0,n.default)(e)){const e=n.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const n=r(1635).__importDefault(r(7281))},9224(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refCount=void 0;var n=r(5212),i=r(7214);t.refCount=function(){return n.operate((function(e,t){var r=null;e._refCount++;var n=i.createOperatorSubscriber(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)r=null;else{var n=e._connection,i=r;r=null,!n||i&&n!==i||n.unsubscribe(),t.unsubscribe()}}));e.subscribe(n),n.closed||(r=e.connect())}))}},9244(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineAll=void 0;var n=r(7933);t.combineAll=n.combineLatestAll},9245(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queue=t.queueScheduler=void 0;var n=r(1983),i=r(2036);t.queueScheduler=new i.QueueScheduler(n.QueueAction),t.queue=t.queueScheduler},9278(e){"use strict";e.exports=require("net")},9287(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferCount=void 0;var i=r(5212),o=r(7214),s=r(4830);t.bufferCount=function(e,t){return void 0===t&&(t=null),t=null!=t?t:e,i.operate((function(r,i){var a=[],c=0;r.subscribe(o.createOperatorSubscriber(i,(function(r){var o,u,l,d,p=null;c++%t===0&&a.push([]);try{for(var f=n(a),h=f.next();!h.done;h=f.next())(v=h.value).push(r),e<=v.length&&(p=null!=p?p:[]).push(v)}catch(e){o={error:e}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(o)throw o.error}}if(p)try{for(var b=n(p),m=b.next();!m.done;m=b.next()){var v=m.value;s.arrRemove(a,v),i.next(v)}}catch(e){l={error:e}}finally{try{m&&!m.done&&(d=b.return)&&d.call(b)}finally{if(l)throw l.error}}}),(function(){var e,t;try{for(var r=n(a),o=r.next();!o.done;o=r.next()){var s=o.value;i.next(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}i.complete()}),void 0,(function(){a=null})))}))}},9328(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyError=void 0;var n=r(9619);t.EmptyError=n.createErrorClass((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}))},9330(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var o=r(5212),s=r(8087),a=r(6404),c=r(7058);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=a.popScheduler(e),u=a.popNumber(e,1/0);return o.operate((function(t,o){s.mergeAll(u)(c.from(i([t],n(e)),r)).subscribe(o)}))}},9364(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.interval=t.iif=t.generate=t.fromEventPattern=t.fromEvent=t.from=t.forkJoin=t.empty=t.defer=t.connectable=t.concat=t.combineLatest=t.bindNodeCallback=t.bindCallback=t.UnsubscriptionError=t.TimeoutError=t.SequenceError=t.ObjectUnsubscribedError=t.NotFoundError=t.EmptyError=t.ArgumentOutOfRangeError=t.firstValueFrom=t.lastValueFrom=t.isObservable=t.identity=t.noop=t.pipe=t.NotificationKind=t.Notification=t.Subscriber=t.Subscription=t.Scheduler=t.VirtualAction=t.VirtualTimeScheduler=t.animationFrameScheduler=t.animationFrame=t.queueScheduler=t.queue=t.asyncScheduler=t.async=t.asapScheduler=t.asap=t.AsyncSubject=t.ReplaySubject=t.BehaviorSubject=t.Subject=t.animationFrames=t.observable=t.ConnectableObservable=t.Observable=void 0,t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.combineLatestWith=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=t.config=t.NEVER=t.EMPTY=t.scheduled=t.zip=t.using=t.timer=t.throwError=t.range=t.race=t.partition=t.pairs=t.onErrorResumeNext=t.of=t.never=t.merge=void 0,t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.pairwise=t.onErrorResumeNextWith=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=t.mergeAll=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=void 0,t.zipWith=t.zipAll=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=void 0;var o=r(8051);Object.defineProperty(t,"Observable",{enumerable:!0,get:function(){return o.Observable}});var s=r(4359);Object.defineProperty(t,"ConnectableObservable",{enumerable:!0,get:function(){return s.ConnectableObservable}});var a=r(2884);Object.defineProperty(t,"observable",{enumerable:!0,get:function(){return a.observable}});var c=r(1875);Object.defineProperty(t,"animationFrames",{enumerable:!0,get:function(){return c.animationFrames}});var u=r(6808);Object.defineProperty(t,"Subject",{enumerable:!0,get:function(){return u.Subject}});var l=r(7314);Object.defineProperty(t,"BehaviorSubject",{enumerable:!0,get:function(){return l.BehaviorSubject}});var d=r(381);Object.defineProperty(t,"ReplaySubject",{enumerable:!0,get:function(){return d.ReplaySubject}});var p=r(5130);Object.defineProperty(t,"AsyncSubject",{enumerable:!0,get:function(){return p.AsyncSubject}});var f=r(2105);Object.defineProperty(t,"asap",{enumerable:!0,get:function(){return f.asap}}),Object.defineProperty(t,"asapScheduler",{enumerable:!0,get:function(){return f.asapScheduler}});var h=r(2326);Object.defineProperty(t,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(t,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var b=r(9245);Object.defineProperty(t,"queue",{enumerable:!0,get:function(){return b.queue}}),Object.defineProperty(t,"queueScheduler",{enumerable:!0,get:function(){return b.queueScheduler}});var m=r(5887);Object.defineProperty(t,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(t,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}});var v=r(875);Object.defineProperty(t,"VirtualTimeScheduler",{enumerable:!0,get:function(){return v.VirtualTimeScheduler}}),Object.defineProperty(t,"VirtualAction",{enumerable:!0,get:function(){return v.VirtualAction}});var y=r(5881);Object.defineProperty(t,"Scheduler",{enumerable:!0,get:function(){return y.Scheduler}});var g=r(9879);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return g.Subscription}});var _=r(2708);Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return _.Subscriber}});var S=r(1245);Object.defineProperty(t,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(t,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var w=r(1898);Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return w.pipe}});var O=r(5717);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return O.noop}});var P=r(80);Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return P.identity}});var x=r(2560);Object.defineProperty(t,"isObservable",{enumerable:!0,get:function(){return x.isObservable}});var k=r(5761);Object.defineProperty(t,"lastValueFrom",{enumerable:!0,get:function(){return k.lastValueFrom}});var E=r(841);Object.defineProperty(t,"firstValueFrom",{enumerable:!0,get:function(){return E.firstValueFrom}});var M=r(7024);Object.defineProperty(t,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return M.ArgumentOutOfRangeError}});var j=r(9328);Object.defineProperty(t,"EmptyError",{enumerable:!0,get:function(){return j.EmptyError}});var T=r(3506);Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return T.NotFoundError}});var I=r(839);Object.defineProperty(t,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return I.ObjectUnsubscribedError}});var C=r(4708);Object.defineProperty(t,"SequenceError",{enumerable:!0,get:function(){return C.SequenceError}});var A=r(1713);Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return A.TimeoutError}});var $=r(9517);Object.defineProperty(t,"UnsubscriptionError",{enumerable:!0,get:function(){return $.UnsubscriptionError}});var N=r(9750);Object.defineProperty(t,"bindCallback",{enumerable:!0,get:function(){return N.bindCallback}});var F=r(1946);Object.defineProperty(t,"bindNodeCallback",{enumerable:!0,get:function(){return F.bindNodeCallback}});var L=r(8246);Object.defineProperty(t,"combineLatest",{enumerable:!0,get:function(){return L.combineLatest}});var R=r(9546);Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return R.concat}});var D=r(8590);Object.defineProperty(t,"connectable",{enumerable:!0,get:function(){return D.connectable}});var U=r(5884);Object.defineProperty(t,"defer",{enumerable:!0,get:function(){return U.defer}});var B=r(4885);Object.defineProperty(t,"empty",{enumerable:!0,get:function(){return B.empty}});var V=r(5266);Object.defineProperty(t,"forkJoin",{enumerable:!0,get:function(){return V.forkJoin}});var W=r(7058);Object.defineProperty(t,"from",{enumerable:!0,get:function(){return W.from}});var q=r(8616);Object.defineProperty(t,"fromEvent",{enumerable:!0,get:function(){return q.fromEvent}});var z=r(6920);Object.defineProperty(t,"fromEventPattern",{enumerable:!0,get:function(){return z.fromEventPattern}});var H=r(9662);Object.defineProperty(t,"generate",{enumerable:!0,get:function(){return H.generate}});var G=r(9380);Object.defineProperty(t,"iif",{enumerable:!0,get:function(){return G.iif}});var X=r(2275);Object.defineProperty(t,"interval",{enumerable:!0,get:function(){return X.interval}});var J=r(5936);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return J.merge}});var Y=r(1934);Object.defineProperty(t,"never",{enumerable:!0,get:function(){return Y.never}});var Q=r(1587);Object.defineProperty(t,"of",{enumerable:!0,get:function(){return Q.of}});var K=r(1903);Object.defineProperty(t,"onErrorResumeNext",{enumerable:!0,get:function(){return K.onErrorResumeNext}});var Z=r(8269);Object.defineProperty(t,"pairs",{enumerable:!0,get:function(){return Z.pairs}});var ee=r(7406);Object.defineProperty(t,"partition",{enumerable:!0,get:function(){return ee.partition}});var te=r(9795);Object.defineProperty(t,"race",{enumerable:!0,get:function(){return te.race}});var re=r(4385);Object.defineProperty(t,"range",{enumerable:!0,get:function(){return re.range}});var ne=r(6680);Object.defineProperty(t,"throwError",{enumerable:!0,get:function(){return ne.throwError}});var ie=r(5825);Object.defineProperty(t,"timer",{enumerable:!0,get:function(){return ie.timer}});var oe=r(5904);Object.defineProperty(t,"using",{enumerable:!0,get:function(){return oe.using}});var se=r(1415);Object.defineProperty(t,"zip",{enumerable:!0,get:function(){return se.zip}});var ae=r(2512);Object.defineProperty(t,"scheduled",{enumerable:!0,get:function(){return ae.scheduled}});var ce=r(4885);Object.defineProperty(t,"EMPTY",{enumerable:!0,get:function(){return ce.EMPTY}});var ue=r(1934);Object.defineProperty(t,"NEVER",{enumerable:!0,get:function(){return ue.NEVER}}),i(r(6153),t);var le=r(3728);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return le.config}});var de=r(8877);Object.defineProperty(t,"audit",{enumerable:!0,get:function(){return de.audit}});var pe=r(1608);Object.defineProperty(t,"auditTime",{enumerable:!0,get:function(){return pe.auditTime}});var fe=r(706);Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return fe.buffer}});var he=r(9287);Object.defineProperty(t,"bufferCount",{enumerable:!0,get:function(){return he.bufferCount}});var be=r(1719);Object.defineProperty(t,"bufferTime",{enumerable:!0,get:function(){return be.bufferTime}});var me=r(1778);Object.defineProperty(t,"bufferToggle",{enumerable:!0,get:function(){return me.bufferToggle}});var ve=r(6606);Object.defineProperty(t,"bufferWhen",{enumerable:!0,get:function(){return ve.bufferWhen}});var ye=r(2719);Object.defineProperty(t,"catchError",{enumerable:!0,get:function(){return ye.catchError}});var ge=r(9244);Object.defineProperty(t,"combineAll",{enumerable:!0,get:function(){return ge.combineAll}});var _e=r(7933);Object.defineProperty(t,"combineLatestAll",{enumerable:!0,get:function(){return _e.combineLatestAll}});var Se=r(2044);Object.defineProperty(t,"combineLatestWith",{enumerable:!0,get:function(){return Se.combineLatestWith}});var we=r(201);Object.defineProperty(t,"concatAll",{enumerable:!0,get:function(){return we.concatAll}});var Oe=r(9512);Object.defineProperty(t,"concatMap",{enumerable:!0,get:function(){return Oe.concatMap}});var Pe=r(9913);Object.defineProperty(t,"concatMapTo",{enumerable:!0,get:function(){return Pe.concatMapTo}});var xe=r(8032);Object.defineProperty(t,"concatWith",{enumerable:!0,get:function(){return xe.concatWith}});var ke=r(7812);Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return ke.connect}});var Ee=r(8589);Object.defineProperty(t,"count",{enumerable:!0,get:function(){return Ee.count}});var Me=r(3143);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return Me.debounce}});var je=r(1762);Object.defineProperty(t,"debounceTime",{enumerable:!0,get:function(){return je.debounceTime}});var Te=r(8799);Object.defineProperty(t,"defaultIfEmpty",{enumerable:!0,get:function(){return Te.defaultIfEmpty}});var Ie=r(5797);Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return Ie.delay}});var Ce=r(2885);Object.defineProperty(t,"delayWhen",{enumerable:!0,get:function(){return Ce.delayWhen}});var Ae=r(9818);Object.defineProperty(t,"dematerialize",{enumerable:!0,get:function(){return Ae.dematerialize}});var $e=r(7876);Object.defineProperty(t,"distinct",{enumerable:!0,get:function(){return $e.distinct}});var Ne=r(9663);Object.defineProperty(t,"distinctUntilChanged",{enumerable:!0,get:function(){return Ne.distinctUntilChanged}});var Fe=r(6035);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Fe.distinctUntilKeyChanged}});var Le=r(1279);Object.defineProperty(t,"elementAt",{enumerable:!0,get:function(){return Le.elementAt}});var Re=r(6791);Object.defineProperty(t,"endWith",{enumerable:!0,get:function(){return Re.endWith}});var De=r(1361);Object.defineProperty(t,"every",{enumerable:!0,get:function(){return De.every}});var Ue=r(1464);Object.defineProperty(t,"exhaust",{enumerable:!0,get:function(){return Ue.exhaust}});var Be=r(7977);Object.defineProperty(t,"exhaustAll",{enumerable:!0,get:function(){return Be.exhaustAll}});var Ve=r(6632);Object.defineProperty(t,"exhaustMap",{enumerable:!0,get:function(){return Ve.exhaustMap}});var We=r(5544);Object.defineProperty(t,"expand",{enumerable:!0,get:function(){return We.expand}});var qe=r(5934);Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return qe.filter}});var ze=r(7802);Object.defineProperty(t,"finalize",{enumerable:!0,get:function(){return ze.finalize}});var He=r(8183);Object.defineProperty(t,"find",{enumerable:!0,get:function(){return He.find}});var Ge=r(9035);Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return Ge.findIndex}});var Xe=r(9980);Object.defineProperty(t,"first",{enumerable:!0,get:function(){return Xe.first}});var Je=r(5128);Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return Je.groupBy}});var Ye=r(2959);Object.defineProperty(t,"ignoreElements",{enumerable:!0,get:function(){return Ye.ignoreElements}});var Qe=r(9915);Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return Qe.isEmpty}});var Ke=r(2568);Object.defineProperty(t,"last",{enumerable:!0,get:function(){return Ke.last}});var Ze=r(6872);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return Ze.map}});var et=r(3337);Object.defineProperty(t,"mapTo",{enumerable:!0,get:function(){return et.mapTo}});var tt=r(5019);Object.defineProperty(t,"materialize",{enumerable:!0,get:function(){return tt.materialize}});var rt=r(96);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return rt.max}});var nt=r(8087);Object.defineProperty(t,"mergeAll",{enumerable:!0,get:function(){return nt.mergeAll}});var it=r(4613);Object.defineProperty(t,"flatMap",{enumerable:!0,get:function(){return it.flatMap}});var ot=r(7478);Object.defineProperty(t,"mergeMap",{enumerable:!0,get:function(){return ot.mergeMap}});var st=r(6075);Object.defineProperty(t,"mergeMapTo",{enumerable:!0,get:function(){return st.mergeMapTo}});var at=r(6707);Object.defineProperty(t,"mergeScan",{enumerable:!0,get:function(){return at.mergeScan}});var ct=r(9694);Object.defineProperty(t,"mergeWith",{enumerable:!0,get:function(){return ct.mergeWith}});var ut=r(142);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return ut.min}});var lt=r(8464);Object.defineProperty(t,"multicast",{enumerable:!0,get:function(){return lt.multicast}});var dt=r(2071);Object.defineProperty(t,"observeOn",{enumerable:!0,get:function(){return dt.observeOn}});var pt=r(5513);Object.defineProperty(t,"onErrorResumeNextWith",{enumerable:!0,get:function(){return pt.onErrorResumeNextWith}});var ft=r(6744);Object.defineProperty(t,"pairwise",{enumerable:!0,get:function(){return ft.pairwise}});var ht=r(6355);Object.defineProperty(t,"pluck",{enumerable:!0,get:function(){return ht.pluck}});var bt=r(3197);Object.defineProperty(t,"publish",{enumerable:!0,get:function(){return bt.publish}});var mt=r(2955);Object.defineProperty(t,"publishBehavior",{enumerable:!0,get:function(){return mt.publishBehavior}});var vt=r(6569);Object.defineProperty(t,"publishLast",{enumerable:!0,get:function(){return vt.publishLast}});var yt=r(8710);Object.defineProperty(t,"publishReplay",{enumerable:!0,get:function(){return yt.publishReplay}});var gt=r(6677);Object.defineProperty(t,"raceWith",{enumerable:!0,get:function(){return gt.raceWith}});var _t=r(2070);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return _t.reduce}});var St=r(6131);Object.defineProperty(t,"repeat",{enumerable:!0,get:function(){return St.repeat}});var wt=r(2139);Object.defineProperty(t,"repeatWhen",{enumerable:!0,get:function(){return wt.repeatWhen}});var Ot=r(3352);Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return Ot.retry}});var Pt=r(3956);Object.defineProperty(t,"retryWhen",{enumerable:!0,get:function(){return Pt.retryWhen}});var xt=r(9224);Object.defineProperty(t,"refCount",{enumerable:!0,get:function(){return xt.refCount}});var kt=r(3434);Object.defineProperty(t,"sample",{enumerable:!0,get:function(){return kt.sample}});var Et=r(4143);Object.defineProperty(t,"sampleTime",{enumerable:!0,get:function(){return Et.sampleTime}});var Mt=r(5565);Object.defineProperty(t,"scan",{enumerable:!0,get:function(){return Mt.scan}});var jt=r(3929);Object.defineProperty(t,"sequenceEqual",{enumerable:!0,get:function(){return jt.sequenceEqual}});var Tt=r(3405);Object.defineProperty(t,"share",{enumerable:!0,get:function(){return Tt.share}});var It=r(7782);Object.defineProperty(t,"shareReplay",{enumerable:!0,get:function(){return It.shareReplay}});var Ct=r(5440);Object.defineProperty(t,"single",{enumerable:!0,get:function(){return Ct.single}});var At=r(3079);Object.defineProperty(t,"skip",{enumerable:!0,get:function(){return At.skip}});var $t=r(2359);Object.defineProperty(t,"skipLast",{enumerable:!0,get:function(){return $t.skipLast}});var Nt=r(7783);Object.defineProperty(t,"skipUntil",{enumerable:!0,get:function(){return Nt.skipUntil}});var Ft=r(5774);Object.defineProperty(t,"skipWhile",{enumerable:!0,get:function(){return Ft.skipWhile}});var Lt=r(9054);Object.defineProperty(t,"startWith",{enumerable:!0,get:function(){return Lt.startWith}});var Rt=r(5455);Object.defineProperty(t,"subscribeOn",{enumerable:!0,get:function(){return Rt.subscribeOn}});var Dt=r(6201);Object.defineProperty(t,"switchAll",{enumerable:!0,get:function(){return Dt.switchAll}});var Ut=r(680);Object.defineProperty(t,"switchMap",{enumerable:!0,get:function(){return Ut.switchMap}});var Bt=r(761);Object.defineProperty(t,"switchMapTo",{enumerable:!0,get:function(){return Bt.switchMapTo}});var Vt=r(8461);Object.defineProperty(t,"switchScan",{enumerable:!0,get:function(){return Vt.switchScan}});var Wt=r(4383);Object.defineProperty(t,"take",{enumerable:!0,get:function(){return Wt.take}});var qt=r(5279);Object.defineProperty(t,"takeLast",{enumerable:!0,get:function(){return qt.takeLast}});var zt=r(6911);Object.defineProperty(t,"takeUntil",{enumerable:!0,get:function(){return zt.takeUntil}});var Ht=r(598);Object.defineProperty(t,"takeWhile",{enumerable:!0,get:function(){return Ht.takeWhile}});var Gt=r(7400);Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return Gt.tap}});var Xt=r(4880);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return Xt.throttle}});var Jt=r(7245);Object.defineProperty(t,"throttleTime",{enumerable:!0,get:function(){return Jt.throttleTime}});var Yt=r(632);Object.defineProperty(t,"throwIfEmpty",{enumerable:!0,get:function(){return Yt.throwIfEmpty}});var Qt=r(2508);Object.defineProperty(t,"timeInterval",{enumerable:!0,get:function(){return Qt.timeInterval}});var Kt=r(1713);Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return Kt.timeout}});var Zt=r(2978);Object.defineProperty(t,"timeoutWith",{enumerable:!0,get:function(){return Zt.timeoutWith}});var er=r(3866);Object.defineProperty(t,"timestamp",{enumerable:!0,get:function(){return er.timestamp}});var tr=r(3484);Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return tr.toArray}});var rr=r(8072);Object.defineProperty(t,"window",{enumerable:!0,get:function(){return rr.window}});var nr=r(2893);Object.defineProperty(t,"windowCount",{enumerable:!0,get:function(){return nr.windowCount}});var ir=r(37);Object.defineProperty(t,"windowTime",{enumerable:!0,get:function(){return ir.windowTime}});var or=r(8996);Object.defineProperty(t,"windowToggle",{enumerable:!0,get:function(){return or.windowToggle}});var sr=r(5156);Object.defineProperty(t,"windowWhen",{enumerable:!0,get:function(){return sr.windowWhen}});var ar=r(6975);Object.defineProperty(t,"withLatestFrom",{enumerable:!0,get:function(){return ar.withLatestFrom}});var cr=r(5362);Object.defineProperty(t,"zipAll",{enumerable:!0,get:function(){return cr.zipAll}});var ur=r(6977);Object.defineProperty(t,"zipWith",{enumerable:!0,get:function(){return ur.zipWith}})},9380(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iif=void 0;var n=r(5884);t.iif=function(e,t,r){return n.defer((function(){return e()?t:r}))}},9512(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMap=void 0;var n=r(7478),i=r(281);t.concatMap=function(e,t){return i.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}},9517(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsubscriptionError=void 0;var n=r(9619);t.UnsubscriptionError=n.createErrorClass((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}))},9533(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScheduler=void 0;var o=r(5881),s=function(e){function t(t,r){void 0===r&&(r=o.Scheduler.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return i(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(o.Scheduler);t.AsyncScheduler=s},9546(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var n=r(201),i=r(6404),o=r(7058);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.concatAll()(o.from(e,i.popScheduler(e)))}},9619(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createErrorClass=void 0,t.createErrorClass=function(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}},9662(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.generate=void 0;var i=r(80),o=r(8596),s=r(5884),a=r(6805);t.generate=function(e,t,r,c,u){var l,d,p,f;function h(){var e;return n(this,(function(n){switch(n.label){case 0:e=f,n.label=1;case 1:return t&&!t(e)?[3,4]:[4,p(e)];case 2:n.sent(),n.label=3;case 3:return e=r(e),[3,1];case 4:return[2]}}))}return 1===arguments.length?(f=(l=e).initialState,t=l.condition,r=l.iterate,d=l.resultSelector,p=void 0===d?i.identity:d,u=l.scheduler):(f=e,!c||o.isScheduler(c)?(p=i.identity,u=c):p=c),s.defer(u?function(){return a.scheduleIterable(h(),u)}:h)}},9663(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilChanged=void 0;var n=r(80),i=r(5212),o=r(7214);function s(e,t){return e===t}t.distinctUntilChanged=function(e,t){return void 0===t&&(t=n.identity),e=null!=e?e:s,i.operate((function(r,n){var i,s=!0;r.subscribe(o.createOperatorSubscriber(n,(function(r){var o=t(r);!s&&e(i,o)||(s=!1,i=o,n.next(r))})))}))}},9694(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeWith=void 0;var o=r(9330);t.mergeWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.merge.apply(void 0,i([],n(e)))}},9710(e,t,r){e.exports=r(7699)},9724(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof s?s(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.fromReadableStreamLike=t.fromAsyncIterable=t.fromIterable=t.fromPromise=t.fromArrayLike=t.fromInteropObservable=t.innerFrom=void 0;var a=r(4975),c=r(7552),u=r(8051),l=r(629),d=r(8263),p=r(6297),f=r(2187),h=r(5462),b=r(281),m=r(2980),v=r(2884);function y(e){return new u.Observable((function(t){var r=e[v.observable]();if(b.isFunction(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}function g(e){return new u.Observable((function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()}))}function _(e){return new u.Observable((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,m.reportUnhandledError)}))}function S(e){return new u.Observable((function(t){var r,n;try{for(var i=s(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()}))}function w(e){return new u.Observable((function(t){(function(e,t){var r,s,a,c;return n(this,void 0,void 0,(function(){var n,u;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]),r=o(e),i.label=1;case 1:return[4,r.next()];case 2:if((s=i.sent()).done)return[3,4];if(n=s.value,t.next(n),t.closed)return[2];i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=i.sent(),a={error:u},[3,11];case 6:return i.trys.push([6,,9,10]),s&&!s.done&&(c=r.return)?[4,c.call(r)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function O(e){return w(h.readableStreamLikeToAsyncGenerator(e))}t.innerFrom=function(e){if(e instanceof u.Observable)return e;if(null!=e){if(l.isInteropObservable(e))return y(e);if(a.isArrayLike(e))return g(e);if(c.isPromise(e))return _(e);if(d.isAsyncIterable(e))return w(e);if(f.isIterable(e))return S(e);if(h.isReadableStreamLike(e))return O(e)}throw p.createInvalidObservableTypeError(e)},t.fromInteropObservable=y,t.fromArrayLike=g,t.fromPromise=_,t.fromIterable=S,t.fromAsyncIterable=w,t.fromReadableStreamLike=O},9750(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindCallback=void 0;var n=r(7474);t.bindCallback=function(e,t,r){return n.bindCallbackInternals(!1,e,t,r)}},9786(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,r)=>{const n=[];for(const t of r.feedbacks){let r=e[t.feedbackId];if(!0===r&&(r={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),r){t.style||(t.style={});for(const[e,i]of Object.entries(r))void 0!==t.options[e]&&(t.style[i]=t.options[e],delete t.options[e],n.push(t))}}return{updatedConfig:null,updatedSecrets:null,updatedActions:[],updatedFeedbacks:n}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,r)=>{const n=[];for(const t of r.feedbacks){const r=e[t.feedbackId];if("string"!=typeof r)continue;const i=t.options[r];void 0!==i&&(delete t.options[r],t.isInverted="true"===i||!0===Boolean(i)||Number(i)>0,n.push(t))}return{updatedConfig:null,updatedSecrets:null,updatedActions:[],updatedFeedbacks:n}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedSecrets:null,updatedActions:[],updatedFeedbacks:[]})},9795(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceInit=t.race=void 0;var n=r(8051),i=r(9724),o=r(7652),s=r(7214);function a(e){return function(t){for(var r=[],n=function(n){r.push(i.innerFrom(e[n]).subscribe(s.createOperatorSubscriber(t,(function(e){if(r){for(var i=0;i<r.length;i++)i!==n&&r[i].unsubscribe();r=null}t.next(e)}))))},o=0;r&&!t.closed&&o<e.length;o++)n(o)}}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=o.argsOrArgArray(e)).length?i.innerFrom(e[0]):new n.Observable(a(e))},t.raceInit=a},9818(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dematerialize=void 0;var n=r(1245),i=r(5212),o=r(7214);t.dematerialize=function(){return i.operate((function(e,t){e.subscribe(o.createOperatorSubscriber(t,(function(e){return n.observeNotification(e,t)})))}))}},9879(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.isSubscription=t.EMPTY_SUBSCRIPTION=t.Subscription=void 0;var s=r(281),a=r(9517),c=r(4830),u=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,c,u;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var p=n(d),f=p.next();!f.done;f=p.next())f.value.remove(this)}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}else d.remove(this);var h=this.initialTeardown;if(s.isFunction(h))try{h()}catch(e){u=e instanceof a.UnsubscriptionError?e.errors:[e]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var m=n(b),v=m.next();!v.done;v=m.next()){var y=v.value;try{l(y)}catch(e){u=null!=u?u:[],e instanceof a.UnsubscriptionError?u=o(o([],i(u)),i(e.errors)):u.push(e)}}}catch(e){r={error:e}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(r)throw r.error}}}if(u)throw new a.UnsubscriptionError(u)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)l(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&c.arrRemove(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&c.arrRemove(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function l(e){s.isFunction(e)?e():e.unsubscribe()}t.Subscription=u,t.EMPTY_SUBSCRIPTION=u.EMPTY,t.isSubscription=function(e){return e instanceof u||e&&"closed"in e&&s.isFunction(e.remove)&&s.isFunction(e.add)&&s.isFunction(e.unsubscribe)}},9896(e){"use strict";e.exports=require("fs")},9913(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMapTo=void 0;var n=r(9512),i=r(281);t.concatMapTo=function(e,t){return i.isFunction(t)?n.concatMap((function(){return e}),t):n.concatMap((function(){return e}))}},9915(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var n=r(5212),i=r(7214);t.isEmpty=function(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}},9967(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},9980(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.first=void 0;var n=r(9328),i=r(5934),o=r(4383),s=r(8799),a=r(632),c=r(80);t.first=function(e,t){var r=arguments.length>=2;return function(u){return u.pipe(e?i.filter((function(t,r){return e(t,r,u)})):c.identity,o.take(1),r?s.defaultIfEmpty(t):a.throwIfEmpty((function(){return new n.EmptyError})))}}},9998(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){const o=i/2|0;let s=n+o;r(e[s],t)<=0?(n=++s,i-=o+1):i=o}return n}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=r(6278),t=r(1621);const n={i:{id:"i",label:"Input"},l:{id:"l",label:"Line Input"},p:{id:"p",label:"Player"},f:{id:"f",label:"FX"},s:{id:"s",label:"Sub Group"},a:{id:"a",label:"AUX Master"},v:{id:"v",label:"VCA"}},i={choices:[{id:2,label:"Toggle"},{id:1,label:"On"},{id:0,label:"Off"}],default:2},o={choices:[{id:1,label:"On"},{id:0,label:"Off"}],default:1},s={choices:[n.i,n.l,n.p,n.f,n.s],default:"i"},a={choices:[n.i,n.l,n.a],default:"i"},c={masterChannelTypeDropdown:{type:"dropdown",label:"Channel Type",id:"channelType",choices:[n.i,n.l,n.p,n.f,n.s,n.a,n.v],default:"i"},auxChannelTypeDropdown:{type:"dropdown",label:"Channel Type",id:"channelType",choices:[n.i,n.l,n.p,n.f],default:"i"},fxChannelTypeDropdown:{type:"dropdown",label:"Channel Type",id:"channelType",choices:[n.i,n.l,n.p,n.s],default:"i"},busNumberField:{type:"number",label:"Bus number",id:"bus",min:1,max:10,default:1},channelNumberField:{type:"number",label:"Channel number",id:"channel",min:1,max:24,default:1},hwChannelNumberField:{type:"number",label:"HW Channel number",id:"hwchannel",min:1,max:20,default:1},muteDropdown:{type:"dropdown",label:"Mute",id:"mute",choices:[{id:2,label:"Toggle"},{id:1,label:"Mute"},{id:0,label:"Unmute"}],default:2},muteGroupDropdown:{type:"dropdown",label:"Group",id:"group",choices:[{id:1,label:"MUTE Group 1"},{id:2,label:"MUTE Group 2"},{id:3,label:"MUTE Group 3"},{id:4,label:"MUTE Group 4"},{id:5,label:"MUTE Group 5"},{id:6,label:"MUTE Group 6"},{id:"all",label:"MUTE ALL"},{id:"fx",label:"MUTE FX"}],default:1},soloDropdown:{type:"dropdown",label:"Solo",id:"solo",...i},faderValuesSlider:{type:"number",label:"Fader Level dB (-100 = -)",id:"value",range:!0,required:!0,default:0,step:.1,min:-100,max:10},prepostDropdown:{type:"dropdown",label:"PRE/POST",id:"post",choices:[{id:0,label:"PRE"},{id:1,label:"POST"},{id:2,label:"Toggle"}],default:2},easingsDropdown:{type:"dropdown",label:"Easing",id:"easing",choices:[{id:t.Easings.Linear,label:"Linear / None"},{id:t.Easings.EaseIn,label:"Ease In"},{id:t.Easings.EaseOut,label:"Ease Out"},{id:t.Easings.EaseInOut,label:"Ease In Out"}],default:t.Easings.Linear},fadeTimeField:{type:"number",label:"Fade time (ms)",id:"fadeTime",min:100,max:6e4,default:2e3},faderChangeField:{type:"number",label:"Change value (dB)",id:"value",min:-100,max:100,default:3},volumeBusesDropdown:{type:"dropdown",label:"Bus",id:"bus",choices:[{id:"solo",label:"SOLO"},{id:"hp1",label:"Headphone 1"},{id:"hp2",label:"Headphone 2"}],default:"solo"},masterDelayDropdown:{type:"dropdown",label:"Delay side",id:"side",choices:[{id:"both",label:"Left and right"},{id:"left",label:"Left"},{id:"right",label:"Right"}],default:"both"},delayTimeField:(e,t)=>({type:"number",label:"Delay time (ms)",id:"time",min:e,max:t,default:0}),panValueSlider:{type:"number",label:"Pan (L = -100, Center = 0, R = 100)",id:"value",range:!0,required:!0,default:0,step:1,min:-100,max:100},panChangeField:{type:"number",label:"Change value",id:"value",required:!0,min:-200,max:200,default:10}},u={masterChannel:[c.masterChannelTypeDropdown,c.channelNumberField],auxChannel:[c.busNumberField,c.auxChannelTypeDropdown,c.channelNumberField],fxChannel:[c.busNumberField,c.fxChannelTypeDropdown,c.channelNumberField],fadeTransition:[c.faderValuesSlider,c.fadeTimeField,c.easingsDropdown],delayableMasterChannel:(e,t)=>[{type:"dropdown",label:"Channel Type",id:"channelType",...a},c.channelNumberField,c.delayTimeField(e,t)],pannableMasterChannel:[{type:"dropdown",label:"Channel Type",id:"channelType",...s},c.channelNumberField],multiTrackMasterChannel:[{type:"dropdown",label:"Channel Type",id:"channelType",choices:[n.i,n.l],default:"i"},c.channelNumberField]};function l(e){return"string"==typeof e&&function(e){return!!n[e]}(e)?e:"i"}function d(e){return e===Number.NEGATIVE_INFINITY?-100:e}function p(e){return Math.round((e+100)/200)}function f(e){return Math.round(200*e-100)}function h(e){return e/200}function b(e,t){return new Array(Math.max(e,1)).fill(void 0).map(((e,r)=>t(r)))}function m(e,t,r){switch(t){case"l":return e.line(r);case"p":return e.player(r);case"a":return e.aux(r);case"s":return e.sub(r);case"v":return e.vca(r);case"f":return e.fx(r);default:return e.input(r)}}function v(e,t){const r=l(e.channelType),n=Number(e.channel);return m(t.master,r,n)}function y(e,t){const r=Number(e.bus),n=Number(e.channel),i=l(e.channelType);return function(e,t,r){switch(t){case"l":return e.line(r);case"p":return e.player(r);case"f":return e.fx(r);default:return e.input(r)}}(t.aux(r),i,n)}function g(e,t){const r=Number(e.bus),n=Number(e.channel),i=l(e.channelType);return function(e,t,r){switch(t){case"l":return e.line(r);case"p":return e.player(r);case"s":return e.sub(r);default:return e.input(r)}}(t.fx(r),i,n)}function _(e){const t=e.group;if("all"===t||"fx"===t)return t;return Number(t)||"all"}function S(e,t){switch(e.bus){case"solo":return t.volume.solo;case"hp1":return t.volume.headphone(1);case"hp2":return t.volume.headphone(2);default:return}}const w=[{id:"none",label:"None"},...b(20,(e=>({id:`hw.${e}`,label:`HW INS: ${e+1}`}))),{id:"li.0",label:"HW INS: LI L"},{id:"li.1",label:"HW INS: LI R"},...b(22,(e=>({id:`ua.${e}`,label:`USB-A: ${e+1}`}))),...b(32,(e=>({id:`ub.${e}`,label:`USB-DAW: ${e+1}`}))),...b(32,(e=>({id:`cs.${e}`,label:`CASCADE INS: ${e+1}`}))),{id:"m.0",label:"MASTERS: ML"},{id:"m.1",label:"MASTERS: MR"},...b(10,(e=>({id:`a.${e}`,label:`MASTERS: A${e+1}`}))),{id:"hp.0",label:"MASTERS: HD1L"},{id:"hp.1",label:"MASTERS: HD1R"},{id:"hp.2",label:"MASTERS: HD2L"},{id:"hp.3",label:"MASTERS: HD2R"}],O=[...b(24,(e=>({id:`i.${e}.src`,label:`CHANNELS: ${e+1}`}))),{id:"l.0.src",label:"CHANNELS: LINE IN L"},{id:"l.1.src",label:"CHANNELS: LINE IN R"},{id:"hwoutm.0.src",label:"HW OUTS: MASTER L"},{id:"hwoutm.1.src",label:"HW OUTS: MASTER R"},...b(8,(e=>({id:`hwoutaux.${e}.src`,label:`HW OUTS: AUX ${e+1}`}))),{id:"hwouthp.0.src",label:"HW OUTS: H1L"},{id:"hwouthp.1.src",label:"HW OUTS: H1R"},{id:"hwouthp.2.src",label:"HW OUTS: H2L"},{id:"hwouthp.3.src",label:"HW OUTS: H2R"},...b(32,(e=>({id:`casc.${e}.src`,label:`CASCADE OUTS: SLOT ${e+1}`}))),...b(24,(e=>({id:`i.${e}.scsrc`,label:`SOUNDCHECK: CH ${e+1}`}))),{id:"l.0.scsrc",label:"SOUNDCHECK: LINE IN L"},{id:"l.1.scsrc",label:"SOUNDCHECK: LINE IN R"}];var P;!function(e){e.SetMasterValue="setmastervalue",e.ChangeMasterValue="changemastervalue",e.FadeMaster="fademaster",e.DimMaster="dimmaster",e.SetMasterDelay="setmasterdelay",e.ChangeMasterDelay="changemasterdelay",e.MuteMasterChannel="mutemasterchannel",e.SoloMasterChannel="solomasterchannel",e.SetMasterChannelPan="setmasterchannelpan",e.ChangeMasterChannelPan="changemasterchannelpan",e.SetMasterChannelValue="setmasterchannelvalue",e.ChangeMasterChannelValue="changemasterchannelvalue",e.FadeMasterChannel="fademasterchannel",e.SetMasterChannelDelay="setmasterchanneldelay",e.ChangeMasterChannelDelay="changemasterchanneldelay",e.MasterChannelSelectMTK="masterchannelselectmtk",e.MuteAuxChannel="muteauxchannel",e.SetAuxChannelValue="setauxchannelvalue",e.ChangeAuxChannelValue="changeauxchannelvalue",e.FadeAuxChannel="fadeauxchannel",e.SetAuxChannelPost="setauxchannelpost",e.SetAuxChannelPostProc="setauxchannelpostproc",e.SetAuxChannelPan="setauxchannelpan",e.ChangeAuxChannelPan="changeauxchannelpan",e.MuteFxChannel="mutefxchannel",e.SetFxChannelPost="setfxchannelpost",e.SetFxChannelValue="setfxchannelvalue",e.ChangeFxChannelValue="changefxchannelvalue",e.FadeFxChannel="fadefxchannel",e.SetFxBPM="setfxbpm",e.SetFxParam="setfxparam",e.SetVolumeBusValue="setvolumebusvalue",e.ChangeVolumeBusValue="changevolumebusvalue",e.MediaPlay="mediaplay",e.MediaStop="mediastop",e.MediaPause="mediapause",e.MediaNext="medianext",e.MediaPrev="mediaprev",e.MediaSwitchPlist="mediaswitchplist",e.MediaSwitchTrack="mediaswitchtrack",e.MediaSetPlayMode="mediasetplaymode",e.MediaSetShuffle="mediasetshuffle",e.DTRecordToggle="dualtrackrecordtoggle",e.DTRecordStart="dualtrackrecordstart",e.DTRecordStop="dualtrackrecordstop",e.MTKPlay="mtkplay",e.MTKPause="mtkstop",e.MTKStop="mtkpause",e.MTKRecordToggle="mtkrecordtoggle",e.MTKRecordStart="mtkrecordstart",e.MTKRecordStop="mtkrecordstop",e.MTKSoundcheck="mtksoundcheck",e.MuteGroupMute="mutegroupmute",e.MuteGroupClear="mutegroupclear",e.LoadShow="loadshow",e.LoadSnapshot="loadsnapshot",e.LoadCue="loadcue",e.SaveSnapshot="savesnapshot",e.UpdateCurrentSnapshot="updatecurrentsnapshot",e.SaveCue="savecue",e.UpdateCurrentCue="updatecurrentcue",e.HwSetPhantomPower="hwsetphantompower",e.AutomixAssignGroupToChannel="automixassigngrouptochannel",e.AutomixEnableGroup="automixenablegroup",e.PatchingSetRoute="patchingsetroute"}(P||(P={}));const x=[{type:"textinput",id:"host",label:"Target IP",width:12,regex:e.Regex.IP,required:!0},{type:"static-text",id:"info",width:12,label:"IP address change",value:"After changing the IP address of the mixer, it might be necessary to disable and re-enable the module or to restart Companion."},{type:"checkbox",id:"enableFaderLevelVars",label:"Enable Fader Level variables",width:12,default:!1},{type:"checkbox",id:"enablePanVars",label:"Enable PAN variables",width:12,default:!1}];var k,E=r(9364);class M{instance;feedbackUnsubscribe$=new E.Subject;subscriptions=new Map;feedbackStreamMap=new Map;constructor(e){this.instance=e}connect(e,t,r){if(!this.subscriptions.get(r)){const e={state:null,feedbacks:new Map};this.subscriptions.set(r,e);const n=this.feedbackUnsubscribe$.pipe((0,E.filter)((e=>e===r||!e)));t.pipe((0,E.takeUntil)(n)).subscribe((e=>this.handleStateUpdate(r,e)))}this.addFeedbackSubscription(r,e.id,e.feedbackId)}get(e){const t=this.feedbackStreamMap.get(e);return t&&this.subscriptions.get(t)?.state}unsubscribe(e){const t=this.feedbackStreamMap.get(e);if(!t)return;const r=this.subscriptions.get(t);r&&(r.feedbacks.delete(e),this.feedbackStreamMap.delete(e),0===r.feedbacks.size&&(this.feedbackUnsubscribe$.next(t),this.subscriptions.delete(t)))}unsubscribeAll(){this.feedbackUnsubscribe$.next(),this.subscriptions.clear(),this.feedbackStreamMap.clear(),this.instance.log("debug","Unsubscribing all feedback streams")}handleStateUpdate(e,t){this.setState(e,t),this.getFeedbackIds(e).forEach((e=>{this.instance.checkFeedbacks(e)}))}getFeedbackIds(e){const t=this.subscriptions.get(e)?.feedbacks;return t?Array.from(new Set(t.values())):[]}setState(e,t){const r=this.subscriptions.get(e);r&&(r.state=t)}addFeedbackSubscription(e,t,r){const n=this.subscriptions.get(e);n&&(n.feedbacks.set(t,r),this.feedbackStreamMap.set(t,e))}}function j(e){return{id:"state",type:"checkbox",label:e,default:!0}}function T(e,t){const r=1===Number(e.get(t.id));return t.options.state===r}!function(e){e.MuteMasterChannel="mutemasterchannel",e.SoloMasterChannel="solomasterchannel",e.MasterChannelMTKSelection="masterchannelmtkselection",e.DimMaster="dimmaster",e.MuteAuxChannel="muteauxchannel",e.PostAuxChannel="postauxchannel",e.MuteFxChannel="mutefxchannel",e.PostFxChannel="postfxchannel",e.MediaPlayerState="mediaplayerstate",e.MediaPlayerShuffle="mediaplayershuffle",e.DTRecordState="dualtrackrecordstate",e.MTKPlayerState="mtkplayerstate",e.MTKRecordState="mtkrecordstate",e.MTKSoundcheckState="mtksoundcheckstate",e.MuteMuteGroup="mutemutegroup",e.HwPhantomPower="hwphantompower",e.AutomixGroupState="automixgroupstate",e.PatchingRouteState="patchingroutestate"}(k||(k={}));const I={mute:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(255,0,0)},post:{bgcolor:(0,e.combineRgb)(0,120,0),color:(0,e.combineRgb)(255,255,255)},solo:{bgcolor:(0,e.combineRgb)(255,255,0),color:(0,e.combineRgb)(0,0,0)},dim:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,150,255)}},C=(0,e.CreateConvertToBooleanFeedbackUpgradeScript)({[k.MuteMasterChannel]:!0,[k.SoloMasterChannel]:!0,[k.DimMaster]:!0,[k.MuteAuxChannel]:!0,[k.PostAuxChannel]:!0,[k.MuteFxChannel]:!0,[k.PostFxChannel]:!0,[k.MediaPlayerState]:!0,[k.MediaPlayerShuffle]:!0,[k.DTRecordState]:!0,[k.MuteMuteGroup]:!0});function A(t,r,n,i){return{type:"button",category:"Master Channels: MUTE",name:`Master Bus: ${i} MUTE`,style:{text:`MUTE\\n$(module:m_${n}_name)`,size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MuteMasterChannel,options:{channelType:t,channel:r,mute:2}}],up:[]}],feedbacks:[{feedbackId:k.MuteMasterChannel,options:{channelType:t,channel:r,state:!0},style:I.mute}]}}function $(t,r,n,i){return{type:"button",category:"Master Channels: SOLO",name:`Master Bus: ${i} SOLO`,style:{text:`SOLO\\n$(module:m_${n}_name)`,size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.SoloMasterChannel,options:{channelType:t,channel:r,mute:2}}],up:[]}],feedbacks:[{feedbackId:k.SoloMasterChannel,options:{channelType:t,channel:r,state:!0},style:I.solo}]}}function N(t,r,n,i,o){return{type:"button",category:`AUX Bus ${t}`,name:`AUX Bus ${t}: ${o} MUTE`,style:{text:`AUX ${t}\\nMUTE\\n$(module:m_${i}_name)`,size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MuteAuxChannel,options:{bus:t,channelType:r,channel:n,mute:2}}],up:[]}],feedbacks:[{feedbackId:k.MuteAuxChannel,options:{bus:t,channelType:r,channel:n,state:!0},style:I.mute}]}}function F(t,r,n,i,o){return{type:"button",category:`AUX Bus ${t}`,name:`AUX Bus ${t}: ${o} PRE/POST`,style:{text:`AUX ${t}\\nPRE\\n$(module:m_${i}_name)`,size:"14",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.SetAuxChannelPost,options:{bus:t,channelType:r,channel:n,post:2}}],up:[]}],feedbacks:[{feedbackId:k.PostAuxChannel,options:{bus:t,channelType:r,channel:n,state:!0},style:{...I.post,text:`AUX ${t}\\nPOST\\n$(module:m_${i}_name)`}}]}}class L{instance;variableStreams$=new E.Subject;destroyVariableStreams$=new E.Subject;destroy$=new E.Subject;constructor(e){this.instance=e,this.variableStreams$.pipe((0,E.mergeMap)((({variableId:e,stream$:t})=>t.pipe((0,E.map)((t=>({variableId:e,value:t}))),(0,E.takeUntil)(this.destroyVariableStreams$)))),(0,E.bufferTime)(100),(0,E.filter)((e=>e.length>0)),(0,E.map)((e=>e.reduce(((e,t)=>(e[t.variableId]=t.value,e)),{}))),(0,E.takeUntil)(this.destroy$)).subscribe((t=>e.setVariableValues(t)))}connect(e,t){this.variableStreams$.next({variableId:e,stream$:t})}unsubscribeAll(){this.instance.log("debug","Unsubscribing all variable streams"),this.destroyVariableStreams$.next()}destroy(){this.destroy$.next()}}class R extends e.InstanceBase{feedbackStore=new M(this);variablesStore=new L(this);conn;constructor(e){super(e)}async init(t){this.updateStatus(e.InstanceStatus.Disconnected),this.createConnection(t)}async createConnection(r){if(this.log("debug","Creating connection instance"),r.host){this.conn=new t.SoundcraftUI(r.host),this.subscribeConnectionStatus();try{await this.conn.connect()}catch(t){this.updateStatus(e.InstanceStatus.ConnectionFailure,JSON.stringify(t))}await this.updateCompanionBits(r)}}subscribeConnectionStatus(){this.conn&&this.conn.status$.subscribe((r=>{switch(r.type){case t.ConnectionStatus.Opening:this.updateStatus(e.InstanceStatus.Connecting);break;case t.ConnectionStatus.Error:this.updateStatus(e.InstanceStatus.ConnectionFailure,JSON.stringify(r.payload));break;case t.ConnectionStatus.Open:this.updateStatus(e.InstanceStatus.Ok);break;case t.ConnectionStatus.Close:this.updateStatus(e.InstanceStatus.Disconnected)}}))}async updateCompanionBits(r){if(!this.conn)return void this.updateStatus(e.InstanceStatus.ConnectionFailure);var n;this.setActionDefinitions((n=this.conn,{[P.SetMasterValue]:{name:"Master: Set fader value",description:"Set the fader value (dB) for the master fader",options:[c.faderValuesSlider],callback:e=>{const t=Number(e.options.value);return n.master.setFaderLevelDB(t)}},[P.FadeMaster]:{name:"Master: Fade transition",description:"Perform a timed fade transition on the master fader",options:[...u.fadeTransition],callback:async e=>n.master.fadeToDB(Number(e.options.value),Number(e.options.fadeTime),Number(e.options.easing))},[P.ChangeMasterValue]:{name:"Master: Change fader value (relative)",description:"Relatively change the fader value (dB) for the master fader",options:[c.faderChangeField],callback:e=>{const t=Number(e.options.value);return n.master.changeFaderLevelDB(t)}},[P.DimMaster]:{name:"Master: Dim",description:"Dim the master fader (Ui24R only)",options:[{type:"dropdown",label:"Dim",id:"dim",...i}],callback:e=>{switch(Number(e.options.dim)){case 0:return n.master.undim();case 1:return n.master.dim();case 2:return n.master.toggleDim()}}},[P.SetMasterDelay]:{name:"Master: Set output delay",description:"Set delay for the master output (left, right or both)",options:[c.delayTimeField(0,500),c.masterDelayDropdown],callback:e=>{const t=Number(e.options.time);switch(e.options.side){case"left":return n.master.setDelayL(t);case"right":return n.master.setDelayR(t);default:return n.master.setDelayL(t),void n.master.setDelayR(t)}}},[P.ChangeMasterDelay]:{name:"Master: Change output delay (relative)",description:"Relatively change delay for the master output (left, right or both)",options:[c.delayTimeField(-500,500),c.masterDelayDropdown],callback:e=>{const t=Number(e.options.time);switch(e.options.side){case"left":return n.master.changeDelayL(t);case"right":return n.master.changeDelayR(t);default:return n.master.changeDelayL(t),void n.master.changeDelayR(t)}}},[P.MuteMasterChannel]:{name:"Master channels: Mute",description:"Set or toggle MUTE for a channel on the master bus",options:[...u.masterChannel,c.muteDropdown],callback:e=>{const t=v(e.options,n);switch(Number(e.options.mute)){case 0:return t.unmute();case 1:return t.mute();case 2:return t.toggleMute()}}},[P.SetMasterChannelValue]:{name:"Master channels: Set fader value",description:"Set the fader value (dB) for a channel on the master bus",options:[...u.masterChannel,c.faderValuesSlider],callback:e=>{const t=v(e.options,n),r=Number(e.options.value);return t.setFaderLevelDB(r)}},[P.FadeMasterChannel]:{name:"Master channels: Fade transition",description:"Perform a timed fade transition for a channel on the master bus",options:[...u.masterChannel,...u.fadeTransition],callback:async e=>v(e.options,n).fadeToDB(Number(e.options.value),Number(e.options.fadeTime),Number(e.options.easing))},[P.ChangeMasterChannelValue]:{name:"Master channels: Change fader value (relative)",description:"Relatively change the fader value (dB) for a channel on the master bus",options:[...u.masterChannel,c.faderChangeField],callback:e=>{const t=v(e.options,n),r=Number(e.options.value);return t.changeFaderLevelDB(r)}},[P.SoloMasterChannel]:{name:"Master channels: Solo",description:"Set or toggle SOLO for a channel on the master bus",options:[...u.masterChannel,c.soloDropdown],callback:e=>{const t=v(e.options,n);switch(Number(e.options.solo)){case 0:return t.unsolo();case 1:return t.solo();case 2:return t.toggleSolo()}}},[P.SetMasterChannelPan]:{name:"Master channels: Set PAN",description:"Set PAN value for a channel on the master bus",options:[...u.pannableMasterChannel,c.panValueSlider],callback:e=>{const t=v(e.options,n),r=Number(e.options.value);t.setPan(p(r))}},[P.ChangeMasterChannelPan]:{name:"Master channels: Change PAN (relative)",description:"Relatively change PAN value for a channel on the master bus (PAN Range: -100 to 100)",options:[...u.pannableMasterChannel,c.panChangeField],callback:e=>{const t=v(e.options,n),r=Number(e.options.value);t.changePan(h(r))}},[P.SetMasterChannelDelay]:{name:"Master channels: Set output delay",description:"Set output delay for a channel on the master bus. Input and Line channels allow for max. 250 ms, AUX master faders can be delayed by max. 500ms.",options:[...u.delayableMasterChannel(0,500)],callback:e=>{const t=v(e.options,n),r=Number(e.options.time);t.setDelay(r)}},[P.ChangeMasterChannelDelay]:{name:"Master channels: Change output delay (relative)",description:"Relatively change output delay for a channel on the master bus. Input and Line channels allow for max. 250 ms, AUX master faders can be delayed by max. 500ms.",options:[...u.delayableMasterChannel(-500,500)],callback:e=>{const t=v(e.options,n),r=Number(e.options.time);t.changeDelay(r)}},[P.MasterChannelSelectMTK]:{name:"Master channels: Select for multitrack recording",description:"Include or remove an input or line channel for multitrack recording",options:[...u.multiTrackMasterChannel,{type:"dropdown",label:"Select Channel",id:"select",...i}],callback:e=>{const t=v(e.options,n);switch(Number(e.options.select)){case 0:return t.multiTrackUnselect();case 1:return t.multiTrackSelect();case 2:return t.multiTrackToggle()}}},[P.MuteAuxChannel]:{name:"AUX channels: Mute",description:"Set or toggle MUTE for a channel on an AUX bus",options:[...u.auxChannel,c.muteDropdown],callback:e=>{const t=y(e.options,n);switch(Number(e.options.mute)){case 0:return t.unmute();case 1:return t.mute();case 2:return t.toggleMute()}}},[P.SetAuxChannelValue]:{name:"AUX channels: Set fader value",description:"Set the fader value (dB) for a channel on an AUX bus",options:[...u.auxChannel,c.faderValuesSlider],callback:e=>{const t=y(e.options,n),r=Number(e.options.value);return t.setFaderLevelDB(r)}},[P.FadeAuxChannel]:{name:"AUX channels: Fade transition",description:"Perform a timed fade transition for a channel on an AUX bus",options:[...u.auxChannel,...u.fadeTransition],callback:async e=>y(e.options,n).fadeToDB(Number(e.options.value),Number(e.options.fadeTime),Number(e.options.easing))},[P.ChangeAuxChannelValue]:{name:"AUX channels: Change fader value (relative)",description:"Relatively change the fader value (dB) for a channel on an AUX bus",options:[...u.auxChannel,c.faderChangeField],callback:e=>{const t=y(e.options,n),r=Number(e.options.value);return t.changeFaderLevelDB(r)}},[P.SetAuxChannelPost]:{name:"AUX channels: Set PRE/POST",description:"Set or toggle PRE/POST for a channel on an AUX bus",options:[...u.auxChannel,c.prepostDropdown],callback:e=>{const t=y(e.options,n);switch(Number(e.options.post)){case 0:return t.pre();case 1:return t.post();case 2:return t.togglePost()}}},[P.SetAuxChannelPostProc]:{name:"AUX channels: Set POST PROC",description:"Set POST PROC/PRE PROC for a channel on an AUX bus (Ui24R only)",options:[...u.auxChannel,{type:"dropdown",label:"POST PROC",id:"postproc",...o}],callback:e=>{const t=y(e.options,n),r=Number(e.options.postproc);return t.setPostProc(r)}},[P.SetAuxChannelPan]:{name:"AUX channels: Set PAN",description:"Set PAN value for a channel on a AUX bus. Not possible for mono AUX!",options:[...u.auxChannel,c.panValueSlider],callback:e=>{const t=y(e.options,n),r=Number(e.options.value);t.setPan(p(r))}},[P.ChangeAuxChannelPan]:{name:"AUX channels: Change PAN (relative)",description:"Relatively change PAN value for a channel on a AUX bus (PAN Range: -100 to 100). Not possible for mono AUX!",options:[...u.auxChannel,c.panChangeField],callback:e=>{const t=y(e.options,n),r=Number(e.options.value);t.changePan(h(r))}},[P.SetVolumeBusValue]:{name:"SOLO/Headphone Bus: Set volume",description:"Set the fader value (dB) for a SOLO or headphone bus (Ui24R only)",options:[c.volumeBusesDropdown,c.faderValuesSlider],callback:e=>{const t=S(e.options,n),r=Number(e.options.value);return t&&t.setFaderLevelDB(r)}},[P.ChangeVolumeBusValue]:{name:"SOLO/Headphone Bus: Change volume (relative)",description:"Relatively change the fader value (dB) for a SOLO or headphone bus (Ui24R only)",options:[c.volumeBusesDropdown,c.faderChangeField],callback:e=>{const t=S(e.options,n),r=Number(e.options.value);return t&&t.changeFaderLevelDB(r)}},[P.MuteFxChannel]:{name:"FX channels: Mute",description:"Mute/unmute a channel on an FX bus",options:[...u.fxChannel,c.muteDropdown],callback:e=>{const t=g(e.options,n);switch(Number(e.options.mute)){case 0:return t.unmute();case 1:return t.mute();case 2:return t.toggleMute()}}},[P.SetFxChannelValue]:{name:"FX channels: Set fader value",description:"Set the fader value (dB) for a channel on an FX bus",options:[...u.fxChannel,c.faderValuesSlider],callback:e=>{const t=g(e.options,n),r=Number(e.options.value);return t.setFaderLevelDB(r)}},[P.FadeFxChannel]:{name:"FX channels: Fade transition",description:"Perform a timed fade transition for a channel on an FX bus",options:[...u.fxChannel,...u.fadeTransition],callback:async e=>g(e.options,n).fadeToDB(Number(e.options.value),Number(e.options.fadeTime),Number(e.options.easing))},[P.ChangeFxChannelValue]:{name:"FX channels: Change fader value (relative)",description:"Relatively change the fader value (dB) for a channel on an FX bus",options:[...u.fxChannel,c.faderChangeField],callback:e=>{const t=g(e.options,n),r=Number(e.options.value);return t.changeFaderLevelDB(r)}},[P.SetFxChannelPost]:{name:"FX channels: Set PRE/POST",description:"Set or toggle PRE/POST for a channel on an FX bus",options:[...u.fxChannel,c.prepostDropdown],callback:e=>{const t=g(e.options,n);switch(Number(e.options.post)){case 0:return t.pre();case 1:return t.post();case 2:return t.togglePost()}}},[P.SetFxBPM]:{name:"FX: Set BPM",description:"Set BPM value for FX processors",options:[{type:"multidropdown",label:"FX",id:"fx",choices:[{id:1,label:"FX 1"},{id:2,label:"FX 2"},{id:3,label:"FX 3"},{id:4,label:"FX 4"}],default:[2,3,4],minSelection:1},{type:"number",label:"BPM",id:"bpm",min:20,max:400,default:120}],callback:e=>{const t=Number(e.options.bpm);e.options.fx.forEach((e=>{n.fx(e).setBpm(t)}))}},[P.SetFxParam]:{name:"FX: Set FX Parameter",description:"Set parameter for an FX processor. Not every FX uses all of the 6 available parameters. There are no units and number conversion available: The value represents the fader range in percent.",options:[{type:"dropdown",label:"FX",id:"fx",choices:[{id:1,label:"FX 1"},{id:2,label:"FX 2"},{id:3,label:"FX 3"},{id:4,label:"FX 4"}],default:1},{type:"dropdown",label:"Parameter",id:"param",choices:[{id:1,label:"1"},{id:2,label:"2"},{id:3,label:"3"},{id:4,label:"4"},{id:5,label:"5"},{id:6,label:"6"}],default:1},{type:"number",label:"Parameter Fader Level (%)",id:"value",range:!0,required:!0,default:0,step:1,min:0,max:100}],callback:e=>{const t=Number(e.options.value)/100;n.fx(Number(e.options.fx)).setParam(Number(e.options.param),t)}},[P.MediaPlay]:{name:"Media Player: Play/Stop",options:[],callback:()=>n.player.play()},[P.MediaStop]:{name:"Media Player: Stop",options:[],callback:()=>n.player.stop()},[P.MediaPause]:{name:"Media Player: Pause",options:[],callback:()=>n.player.pause()},[P.MediaNext]:{name:"Media Player: Next track",options:[],callback:()=>n.player.next()},[P.MediaPrev]:{name:"Media Player: Previous track",options:[],callback:()=>n.player.prev()},[P.MediaSwitchPlist]:{name:"Media Player: Switch Playlist",options:[{type:"textinput",label:"Playlist",id:"playlist",default:"~all~",regex:e.Regex.SOMETHING}],callback:e=>{n.player.loadPlaylist(e.options.playlist)}},[P.MediaSwitchTrack]:{name:"Media Player: Switch Track",options:[{type:"textinput",label:"Playlist",id:"playlist",default:"~all~",regex:e.Regex.SOMETHING},{type:"textinput",label:"Track/File",id:"track",regex:e.Regex.SOMETHING}],callback:e=>{n.player.loadTrack(e.options.playlist,e.options.track)}},[P.MediaSetPlayMode]:{name:"Media Player: Set play mode (MANUAL/AUTO)",options:[{type:"dropdown",label:"Mode",id:"mode",choices:[{id:"manual",label:"MANUAL"},{id:"auto",label:"AUTO"}],default:"manual"}],callback:e=>{switch(e.options.mode){case"manual":return n.player.setManual();case"auto":return n.player.setAuto()}}},[P.MediaSetShuffle]:{name:"Media Player: Set shuffle",options:[{type:"dropdown",label:"Shuffle",id:"shuffle",...i}],callback:e=>{switch(Number(e.options.shuffle)){case 0:return n.player.setShuffle(0);case 1:return n.player.setShuffle(1);case 2:return n.player.toggleShuffle()}}},[P.DTRecordStart]:{name:"2-Track Recording: Record Start",options:[],callback:()=>n.recorderDualTrack.recordStart()},[P.DTRecordStop]:{name:"2-Track Recording: Record Stop",options:[],callback:()=>n.recorderDualTrack.recordStop()},[P.DTRecordToggle]:{name:"2-Track Recording: Record Toggle",options:[],callback:()=>n.recorderDualTrack.recordToggle()},[P.MTKPlay]:{name:"Multitrack: Play/Pause Playback",description:"Play or pause playback in the multitrack recorder. If playback is running, it will be paused. If playback is stopped or paused, it will be started.",options:[],callback:()=>n.recorderMultiTrack.play()},[P.MTKStop]:{name:"Multitrack: Stop Playback",description:'Stop playback in the multitrack recorder. This will not stop recording, please use the "Multitrack: Stop Recording" action for this use-case.',options:[],callback:()=>n.recorderMultiTrack.stop()},[P.MTKPause]:{name:"Multitrack: Pause Playback",options:[],callback:()=>n.recorderMultiTrack.pause()},[P.MTKRecordStart]:{name:"Multitrack: Start Recording",options:[],callback:()=>n.recorderMultiTrack.recordStart()},[P.MTKRecordStop]:{name:"Multitrack: Stop Recording",options:[],callback:()=>n.recorderMultiTrack.recordStop()},[P.MTKRecordToggle]:{name:"Multitrack: Toggle Recording",options:[],callback:()=>n.recorderMultiTrack.recordToggle()},[P.MTKSoundcheck]:{name:"Multitrack: Activate/deactivate soundcheck",description:"Activate, deactivate or toggle soundcheck in the multitrack recorder",options:[{type:"dropdown",label:"Activate/deactivate",id:"state",...i}],callback:e=>{const t=n.recorderMultiTrack;switch(Number(e.options.state)){case 0:return t.deactivateSoundcheck();case 1:return t.activateSoundcheck();case 2:return t.toggleSoundcheck()}}},[P.MuteGroupMute]:{name:"MUTE Groups/ALL/FX: Mute",description:"Mute/unmute a mute group or ALL/FX",options:[c.muteGroupDropdown,c.muteDropdown],callback:e=>{const t=_(e.options);if(-1===t)return;const r=n.muteGroup(t);switch(Number(e.options.mute)){case 0:return r.unmute();case 1:return r.mute();case 2:return r.toggle()}}},[P.MuteGroupClear]:{name:"MUTE Groups/ALL/FX: Clear",description:"Unmute all mute groups",options:[],callback:()=>n.clearMuteGroups()},[P.LoadShow]:{name:"Shows: Load Show",options:[{type:"textinput",label:"Show Name",id:"show",default:"Default",regex:e.Regex.SOMETHING}],callback:e=>{e.options.show&&n.shows.loadShow(e.options.show)}},[P.LoadSnapshot]:{name:"Shows: Load Snapshot",options:[{type:"textinput",label:"Show Name",id:"show",default:"Default",regex:e.Regex.SOMETHING},{type:"textinput",label:"Snapshot Name",id:"snapshot",default:"* Init *",regex:e.Regex.SOMETHING}],callback:e=>{e.options.show&&e.options.snapshot&&n.shows.loadSnapshot(e.options.show,e.options.snapshot)}},[P.LoadCue]:{name:"Shows: Load Cue",options:[{type:"textinput",label:"Show Name",id:"show",default:"Default",regex:e.Regex.SOMETHING},{type:"textinput",label:"Cue Name",id:"cue",default:"",regex:e.Regex.SOMETHING}],callback:e=>{e.options.show&&e.options.cue&&n.shows.loadCue(e.options.show,e.options.cue)}},[P.SaveSnapshot]:{name:"Shows: Save Snapshot",description:"Save or overwrite a snapshot in a show. This action will not ask for confirmation!",options:[{type:"textinput",label:"Show Name",id:"show",default:"",regex:e.Regex.SOMETHING},{type:"textinput",label:"Snapshot Name",id:"snapshot",default:"",regex:e.Regex.SOMETHING}],callback:e=>{e.options.show&&e.options.snapshot&&n.shows.saveSnapshot(e.options.show,e.options.snapshot)}},[P.UpdateCurrentSnapshot]:{name:"Shows: Update Current Snapshot",description:"Update the currently loaded show snapshot. This action will not ask for confirmation!",options:[],callback:()=>n.shows.updateCurrentSnapshot()},[P.SaveCue]:{name:"Shows: Save Cue",description:"Save or overwrite a cue in a show. This action will not ask for confirmation!",options:[{type:"textinput",label:"Show Name",id:"show",default:"",regex:e.Regex.SOMETHING},{type:"textinput",label:"Cue Name",id:"cue",default:"",regex:e.Regex.SOMETHING}],callback:e=>{e.options.show&&e.options.cue&&n.shows.saveCue(e.options.show,e.options.cue)}},[P.UpdateCurrentCue]:{name:"Shows: Update Current Cue",description:"Update the currently loaded show cue. This action will not ask for confirmation!",options:[],callback:()=>n.shows.updateCurrentCue()},[P.HwSetPhantomPower]:{name:"HW Channel: Set Phantom Power",description:"Set or toggle phantom power for a physical input. Be aware that input and HW channel numbers can be different when patching is enabled (Ui24R only). Use with care! Phantom power can destroy some microphones.",options:[c.hwChannelNumberField,{type:"dropdown",label:"Phantom Power",id:"power",...i}],callback:e=>{const t=Number(e.options.hwchannel),r=n.hw(t);switch(Number(e.options.power)){case 0:return r.phantomOff();case 1:return r.phantomOn();case 2:return r.togglePhantom()}}},[P.AutomixAssignGroupToChannel]:{name:"Automix: Assign channel to automix group",description:"Assign a master input channel to an automix group",options:[c.channelNumberField,{type:"dropdown",label:"Automix Group",id:"group",choices:[{id:"a",label:"A"},{id:"b",label:"B"},{id:"none",label:"None / Remove"}],default:"none"}],callback:e=>{const t=m(n.master,"i",Number(e.options.channel));let r="none";switch(e.options.group){case"a":r="a";break;case"b":r="b";break;default:r="none"}t.automixAssignGroup(r)}},[P.AutomixEnableGroup]:{name:"Automix: Enable/disable automix group",description:"Enable, disable or toggle an automix group",options:[{type:"dropdown",label:"Automix Group",id:"group",choices:[{id:"a",label:"A"},{id:"b",label:"B"}],default:"a"},{type:"dropdown",label:"Enable/disable",id:"state",...i}],callback:e=>{let t=n.automix.groups.a;switch("b"===e.options.group&&(t=n.automix.groups.b),Number(e.options.state)){case 0:return t.disable();case 1:return t.enable();case 2:return t.toggle()}}},[P.PatchingSetRoute]:{name:"Patching: Configure patch route (Ui24R only)",description:"Configure patch from source to destination. USB-A inputs cannot be patched to HW OUTS and CASCADE OUTS.",options:[{type:"dropdown",label:"Source (from)",id:"source",choices:w,default:"none"},{type:"dropdown",label:"Destination (to)",id:"destination",choices:O,default:"i.0.src"}],callback:e=>{const t=e.options.source,r=e.options.destination;t.startsWith("ua")&&(r.startsWith("hwout")||r.startsWith("casc"))||n.conn.sendMessage(`SETS^${r}^${t}`)}}})),this.setFeedbackDefinitions(function(r,n){return{[k.MuteMasterChannel]:{type:"boolean",name:"Master channel: MUTE",description:"If the specified master channel is muted",defaultStyle:I.mute,options:[...u.masterChannel,j("Muted")],callback:e=>T(r,e),subscribe:e=>{const t=v(e.options,n),i=t.fullChannelId+"-mute";r.connect(e,t.mute$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.SoloMasterChannel]:{type:"boolean",name:"Master channel: SOLO",description:"If the specified master channel has SOLO active",defaultStyle:I.solo,options:[...u.masterChannel,j("Solo")],callback:e=>T(r,e),subscribe:e=>{const t=v(e.options,n),i=t.fullChannelId+"-solo";r.connect(e,t.solo$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.MasterChannelMTKSelection]:{type:"boolean",name:"Master channel: Multitrack Selection State",description:"If the specified master channel is selected for multitrack recording",defaultStyle:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(153,153,0)},options:[...u.multiTrackMasterChannel,j("Selected")],callback:e=>T(r,e),subscribe:e=>{const t=v(e.options,n),i=t.fullChannelId+"-mtkrec";r.connect(e,t.multiTrackSelected$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.DimMaster]:{type:"boolean",name:"Master: DIM",description:"If the master is dimmed",defaultStyle:I.dim,options:[j("Dimmed")],callback:e=>T(r,e),subscribe:e=>r.connect(e,n.master.dim$,"masterdim"),unsubscribe:e=>r.unsubscribe(e.id)},[k.MuteAuxChannel]:{type:"boolean",name:"AUX bus channel: MUTE",description:"If the specified channel on the AUX bus is muted",defaultStyle:I.mute,options:[...u.auxChannel,j("Muted")],callback:e=>T(r,e),subscribe:e=>{const t=y(e.options,n),i=t.fullChannelId+"-mute";r.connect(e,t.mute$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.PostAuxChannel]:{type:"boolean",name:"AUX bus channel: POST",description:"If the specified channel on the AUX bus has POST enabled",defaultStyle:I.post,options:[...u.auxChannel,j("POST")],callback:e=>T(r,e),subscribe:e=>{const t=y(e.options,n),i=t.fullChannelId+"-post";r.connect(e,t.post$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.MuteFxChannel]:{type:"boolean",name:"FX bus channel: MUTE",description:"If the specified channel on the FX bus is muted",defaultStyle:I.mute,options:[...u.fxChannel,j("Muted")],callback:e=>T(r,e),subscribe:e=>{const t=g(e.options,n),i=t.fullChannelId+"-mute";r.connect(e,t.mute$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.PostFxChannel]:{type:"boolean",name:"FX bus channel: POST",description:"If the specified channel on the FX bus has POST enabled",defaultStyle:I.post,options:[...u.auxChannel,j("POST")],callback:e=>T(r,e),subscribe:e=>{const t=g(e.options,n),i=t.fullChannelId+"-post";r.connect(e,t.post$,i)},unsubscribe:e=>r.unsubscribe(e.id)},[k.MediaPlayerState]:{type:"boolean",name:"Media Player: Player State",description:"If the media player has the specified state (playing, paused, stopped)",defaultStyle:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,255,0)},options:[{type:"dropdown",label:"State",id:"state",choices:[{id:t.PlayerState.Stopped,label:"Stopped"},{id:t.PlayerState.Playing,label:"Playing"},{id:t.PlayerState.Paused,label:"Paused"}],default:t.PlayerState.Playing}],callback:e=>!!r.get(e.id),subscribe:e=>{const t=Number(e.options.state),i=n.player.state$.pipe((0,E.map)((e=>e===t?1:0)),(0,E.distinctUntilChanged)()),o="playerstate"+t;r.connect(e,i,o)},unsubscribe:e=>r.unsubscribe(e.id)},[k.MediaPlayerShuffle]:{type:"boolean",name:"Media Player: Shuffle",description:"If the shuffle setting of the media player has the specified state",defaultStyle:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(156,22,69)},options:[j("Shuffle")],callback:e=>T(r,e),subscribe:e=>r.connect(e,n.player.shuffle$,"playershuffle"),unsubscribe:e=>r.unsubscribe(e.id)},[k.DTRecordState]:{type:"boolean",name:"2-track USB recording: Recording State",description:"If the 2-track USB recorder has the specified state (recording, busy)",defaultStyle:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(255,0,0)},options:[{type:"dropdown",label:"State",id:"state",choices:[{id:"rec",label:"Recording"},{id:"busy",label:"Busy"}],default:"rec"}],callback:e=>!!r.get(e.id),subscribe:e=>{const t=n.recorderDualTrack;switch(e.options.state){case"rec":return r.connect(e,t.recording$,"dtrec-rec");case"busy":return r.connect(e,t.busy$,"dtrec-busy")}},unsubscribe:e=>r.unsubscribe(e.id)},[k.MTKPlayerState]:{type:"boolean",name:"Multitrack Recording: Player State",description:"If the multitrack player has the specified state (playing, paused, stopped)",defaultStyle:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,255,0)},options:[{type:"dropdown",label:"State",id:"state",choices:[{id:t.MtkState.Stopped,label:"Stopped"},{id:t.MtkState.Playing,label:"Playing"},{id:t.MtkState.Paused,label:"Paused"}],default:t.PlayerState.Playing}],callback:e=>!!r.get(e.id),subscribe:e=>{const t=Number(e.options.state),i=n.recorderMultiTrack.state$.pipe((0,E.map)((e=>e===t?1:0)),(0,E.distinctUntilChanged)()),o="mtkstate"+t;r.connect(e,i,o)},unsubscribe:e=>r.unsubscribe(e.id)},[k.MTKRecordState]:{type:"boolean",name:"Multitrack Recording: Recording State",description:"If the multitrack recorder has the specified state (recording, busy)",defaultStyle:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(255,0,0)},options:[{type:"dropdown",label:"State",id:"state",choices:[{id:"rec",label:"Recording"},{id:"busy",label:"Busy"}],default:"rec"}],callback:e=>!!r.get(e.id),subscribe:e=>{const t=n.recorderMultiTrack;switch(e.options.state){case"rec":return r.connect(e,t.recording$,"mtk-rec");case"busy":return r.connect(e,t.busy$,"mtk-busy")}},unsubscribe:e=>r.unsubscribe(e.id)},[k.MTKSoundcheckState]:{type:"boolean",name:"Multitrack Recording: Soundcheck State",description:"If soundcheck in the multitrack recorder has the specified state",defaultStyle:{bgcolor:(0,e.combineRgb)(0,255,0),color:(0,e.combineRgb)(255,255,255)},options:[j("Active")],callback:e=>T(r,e),subscribe:e=>r.connect(e,n.recorderMultiTrack.soundcheck$,"mtksoundcheck"),unsubscribe:e=>r.unsubscribe(e.id)},[k.MuteMuteGroup]:{type:"boolean",name:"MUTE group/ALL/FX state",description:"If the specified group is muted",defaultStyle:I.mute,options:[c.muteGroupDropdown,j("Muted")],callback:e=>T(r,e),subscribe:e=>{const t=_(e.options);if(-1===t)return;const i=n.muteGroup(t),o="mgstate"+t;r.connect(e,i.state$,o)},unsubscribe:e=>r.unsubscribe(e.id)},[k.HwPhantomPower]:{type:"boolean",name:"HW Channel: Phantom power",description:"If Phantom Power is enabled for an input",defaultStyle:{bgcolor:(0,e.combineRgb)(51,102,255),color:(0,e.combineRgb)(255,255,255)},options:[c.hwChannelNumberField,j("Phantom Power enabled")],callback:e=>T(r,e),subscribe:e=>{const t=Number(e.options.hwchannel),i=n.hw(t),o="hw"+t+"phantom";r.connect(e,i.phantom$,o)},unsubscribe:e=>r.unsubscribe(e.id)},[k.AutomixGroupState]:{type:"boolean",name:"Automix: Group State",description:"If an automix group is enabled/disabled",defaultStyle:{bgcolor:(0,e.combineRgb)(30,150,50),color:(0,e.combineRgb)(255,255,255)},options:[{type:"dropdown",label:"Automix Group",id:"group",choices:[{id:"a",label:"A"},{id:"b",label:"B"}],default:"a"},j("Group enabled")],callback:e=>T(r,e),subscribe:e=>{const t=e.options.group;let i=n.automix.groups.a;"b"===t&&(i=n.automix.groups.b);const o="amixgroupstate"+t;r.connect(e,i.state$,o)},unsubscribe:e=>r.unsubscribe(e.id)},[k.PatchingRouteState]:{type:"boolean",name:"Patching: Route config state (Ui24R only)",description:"If the specified source is patched to the specified destination",defaultStyle:{bgcolor:(0,e.combineRgb)(0,128,0),color:(0,e.combineRgb)(255,255,255)},options:[{type:"dropdown",label:"Source (from)",id:"source",choices:w,default:"none"},{type:"dropdown",label:"Destination (to)",id:"destination",choices:O,default:"i.0.src"}],callback:e=>!!r.get(e.id),subscribe:e=>{const t=e.options.source,i=e.options.destination,o=n.store.state$.pipe((0,E.map)((e=>e[i]===t)),(0,E.distinctUntilChanged)()),s=`patchroute-${t}-${i}`;r.connect(e,o,s)},unsubscribe:e=>r.unsubscribe(e.id)}}}(this.feedbackStore,this.conn)),this.subscribeFeedbacks();const s=await async function(e,r,n){const i=[];function o(t,r){i.push({variableId:t.id,name:t.name}),e.connect(t.id,r)}const s=await(0,E.firstValueFrom)(r.deviceInfo.capabilities$);o({id:"m_level",name:"Master: Fader Level (dB)"},r.master.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:"show_show",name:"Shows: Current Show"},r.shows.currentShow$),o({id:"show_snapshot",name:"Shows: Current Snapshot"},r.shows.currentSnapshot$),o({id:"show_cue",name:"Shows: Current Cue"},r.shows.currentCue$),o({id:"player_track",name:"Player: Track"},r.player.track$),o({id:"player_playlist",name:"Player: Playlist"},r.player.playlist$);const a=r.player.elapsedTime$.pipe((0,E.share)());o({id:"player_elapsed_sec",name:"Player: Time Elapsed (seconds)"},a),o({id:"player_elapsed",name:"Player: Time Elapsed"},a.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e)))));const c=r.player.length$.pipe((0,E.share)());o({id:"player_length_sec",name:"Player: Track Length (seconds)"},c),o({id:"player_length",name:"Player: Track Length"},c.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e)))));const u=r.player.remainingTime$.pipe((0,E.share)());if(o({id:"player_remaining_sec",name:"Player: Time Remaining (seconds)"},u),o({id:"player_remaining",name:"Player: Time Remaining"},u.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e))))),s.multitrack){o({id:"mtk_session",name:"Multitrack: Session"},r.recorderMultiTrack.session$);const e=r.recorderMultiTrack.length$.pipe((0,E.share)());o({id:"mtk_length_sec",name:"Multitrack: Session Length (seconds)"},e),o({id:"mtk_length",name:"Multitrack: Session Length"},e.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e)))));const n=r.recorderMultiTrack.elapsedTime$.pipe((0,E.share)());o({id:"mtk_elapsed_sec",name:"Multitrack: Time Elapsed (seconds)"},n),o({id:"mtk_elapsed",name:"Multitrack: Time Elapsed"},n.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e)))));const i=r.recorderMultiTrack.remainingTime$.pipe((0,E.share)());o({id:"mtk_remaining_sec",name:"Multitrack: Time Remaining (seconds)"},i),o({id:"mtk_remaining",name:"Multitrack: Time Remaining"},i.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e)))));const s=r.recorderMultiTrack.recordingTime$.pipe((0,E.share)());o({id:"mtk_rectime_sec",name:"Multitrack: Time Recording (seconds)"},s),o({id:"mtk_rectime",name:"Multitrack: Time Recording"},s.pipe((0,E.map)((e=>(0,t.playerTimeToString)(e)))))}for(let e=1;e<=s.input;e++){const t=r.master.input(e);n.enableFaderLevelVars&&o({id:`m_input${e}_level`,name:`[Master Bus] Input ${e}: Fader Level (dB)`},t.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_input${e}_name`,name:`[Master Bus] Input ${e}: Name`},t.name$),n.enablePanVars&&o({id:`m_input${e}_pan`,name:`[Master Bus] Input ${e}: PAN`},t.pan$.pipe((0,E.map)((e=>f(e)))))}for(let e=1;e<=s.line;e++){const t=r.master.line(e);n.enableFaderLevelVars&&o({id:`m_line${e}_level`,name:`[Master Bus] Line ${e}: Fader Level (dB)`},t.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_line${e}_name`,name:`[Master Bus] Line ${e}: Name`},t.name$),n.enablePanVars&&o({id:`m_line${e}_pan`,name:`[Master Bus] Line ${e}: PAN`},t.pan$.pipe((0,E.map)((e=>f(e)))))}for(let e=1;e<=s.player;e++){const t=r.master.player(e);n.enableFaderLevelVars&&o({id:`m_player${e}_level`,name:`[Master Bus] Player ${e}: Fader Level (dB)`},t.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_player${e}_name`,name:`[Master Bus] Player ${e}: Name`},t.name$),n.enablePanVars&&o({id:`m_player${e}_pan`,name:`[Master Bus] Player ${e}: PAN`},t.pan$.pipe((0,E.map)((e=>f(e)))))}for(let e=1;e<=s.sub;e++){const t=r.master.sub(e);n.enableFaderLevelVars&&o({id:`m_sub${e}_level`,name:`[Master Bus] Subgroup ${e}: Fader Level (dB)`},t.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_sub${e}_name`,name:`[Master Bus] Subgroup ${e}: Name`},t.name$),n.enablePanVars&&o({id:`m_sub${e}_pan`,name:`[Master Bus] Subgroup ${e}: PAN`},t.pan$.pipe((0,E.map)((e=>f(e)))))}for(let e=1;e<=s.vca;e++)n.enableFaderLevelVars&&o({id:`m_vca${e}_level`,name:`[Master Bus] VCA ${e}: Fader Level (dB)`},r.master.vca(e).faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_vca${e}_name`,name:`[Master Bus] VCA ${e}: Name`},r.master.vca(e).name$);for(let e=1;e<=s.fx;e++){const t=r.master.fx(e);if(n.enableFaderLevelVars&&o({id:`m_fx${e}_level`,name:`[Master Bus] FX ${e}: Fader Level (dB)`},t.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_fx${e}_name`,name:`[Master Bus] FX ${e}: Name`},t.name$),n.enablePanVars&&o({id:`m_fx${e}_pan`,name:`[Master Bus] FX ${e}: PAN`},t.pan$.pipe((0,E.map)((e=>f(e))))),n.enableFaderLevelVars){const t=r.fx(e);for(let r=1;r<=s.input;r++)o({id:`fx${e}_input${r}_level`,name:`[FX ${e}] Input ${r}: Fader Level (dB)`},t.input(r).faderLevelDB$.pipe((0,E.map)((e=>d(e)))));for(let r=1;r<=s.line;r++)o({id:`fx${e}_line${r}_level`,name:`[FX ${e}] Line ${r}: Fader Level (dB)`},t.line(r).faderLevelDB$.pipe((0,E.map)((e=>d(e)))));for(let r=1;r<=s.player;r++)o({id:`fx${e}_player${r}_level`,name:`[FX ${e}] Player ${r}: Fader Level (dB)`},t.player(r).faderLevelDB$.pipe((0,E.map)((e=>d(e)))));for(let r=1;r<=s.sub;r++)o({id:`fx${e}_sub${r}_level`,name:`[FX ${e}] Subgroup ${r}: Fader Level (dB)`},t.sub(r).faderLevelDB$.pipe((0,E.map)((e=>d(e)))))}}for(let e=1;e<=s.aux;e++){const t=r.master.aux(e);n.enableFaderLevelVars&&o({id:`m_aux${e}_level`,name:`[Master Bus] AUX ${e}: Fader Level (dB)`},t.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),o({id:`m_aux${e}_name`,name:`[Master Bus] AUX ${e}: Name`},t.name$);const i=r.aux(e);for(let t=1;t<=s.input;t++){const r=i.input(t);n.enableFaderLevelVars&&o({id:`aux${e}_input${t}_level`,name:`[AUX ${e}] Input ${t}: Fader Level (dB)`},r.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),n.enablePanVars&&o({id:`aux${e}_input${t}_pan`,name:`[AUX ${e}] Input ${t}: PAN`},r.pan$.pipe((0,E.map)((e=>f(e)))))}for(let t=1;t<=s.line;t++){const r=i.line(t);n.enableFaderLevelVars&&o({id:`aux${e}_line${t}_level`,name:`[AUX ${e}] Line ${t}: Fader Level (dB)`},r.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),n.enablePanVars&&o({id:`aux${e}_line${t}_pan`,name:`[AUX ${e}] Line ${t}: PAN`},r.pan$.pipe((0,E.map)((e=>f(e)))))}for(let t=1;t<=s.player;t++){const r=i.player(t);n.enableFaderLevelVars&&o({id:`aux${e}_player${t}_level`,name:`[AUX ${e}] Player ${t}: Fader Level (dB)`},r.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),n.enablePanVars&&o({id:`aux${e}_player${t}_pan`,name:`[AUX ${e}] Player ${t}: PAN`},r.pan$.pipe((0,E.map)((e=>f(e)))))}for(let t=1;t<=s.fx;t++){const r=i.fx(t);n.enableFaderLevelVars&&o({id:`aux${e}_fx${t}_level`,name:`[AUX ${e}] FX ${t}: Fader Level (dB)`},r.faderLevelDB$.pipe((0,E.map)((e=>d(e))))),n.enablePanVars&&o({id:`aux${e}_fx${t}_pan`,name:`[AUX ${e}] FX ${t}: PAN`},r.pan$.pipe((0,E.map)((e=>f(e)))))}}return i}(this.variablesStore,this.conn,r);this.setVariableDefinitions(s);const a=await async function(r){const n={},i=await(0,E.firstValueFrom)(r.deviceInfo.capabilities$);for(let e=1;e<=i.input;e++)n[`m_input${e}_mute`]=A("i",e,`input${e}`,`Input ${e}`),n[`m_input${e}_solo`]=$("i",e,`input${e}`,`Input ${e}`);for(let e=1;e<=i.line;e++)n[`m_line${e}_mute`]=A("l",e,`line${e}`,`Line ${e}`),n[`m_line${e}_solo`]=$("l",e,`line${e}`,`Line ${e}`);for(let e=1;e<=i.player;e++)n[`m_player${e}_mute`]=A("p",e,`player${e}`,`Player ${e}`),n[`m_player${e}_solo`]=$("p",e,`player${e}`,`Player ${e}`);for(let e=1;e<=i.fx;e++)n[`m_fx${e}_mute`]=A("f",e,`fx${e}`,`FX ${e}`),n[`m_fx${e}_solo`]=$("f",e,`fx${e}`,`FX ${e}`);for(let e=1;e<=i.sub;e++)n[`m_sub${e}_mute`]=A("s",e,`sub${e}`,`Subgroup ${e}`),n[`m_sub${e}_solo`]=$("s",e,`sub${e}`,`Subgroup ${e}`);for(let e=1;e<=i.aux;e++){n[`m_aux${e}_mute`]=A("a",e,`aux${e}`,`AUX ${e}`),n[`m_aux${e}_solo`]=$("a",e,`aux${e}`,`AUX ${e}`);for(let t=1;t<=i.input;t++)n[`aux${e}_input${t}_mute`]=N(e,"i",t,`input${t}`,`Input ${t}`),n[`aux${e}_input${t}_prepost`]=F(e,"i",t,`input${t}`,`Input ${t}`);for(let t=1;t<=i.line;t++)n[`aux${e}_line${t}_mute`]=N(e,"l",t,`line${t}`,`Line ${t}`),n[`aux${e}_line${t}_prepost`]=F(e,"l",t,`line${t}`,`Line ${t}`);for(let t=1;t<=i.player;t++)n[`aux${e}_player${t}_mute`]=N(e,"p",t,`player${t}`,`Player ${t}`),n[`aux${e}_player${t}_prepost`]=F(e,"p",t,`player${t}`,`Player ${t}`);for(let t=1;t<=i.fx;t++)n[`aux${e}_fx${t}_mute`]=N(e,"f",t,`fx${t}`,`FX ${t}`),n[`aux${e}_fx${t}_prepost`]=F(e,"f",t,`fx${t}`,`FX ${t}`)}for(let e=1;e<=i.vca;e++)n[`m_vca${e}_mute`]=A("v",e,`vca${e}`,`VCA ${e}`),n[`m_vca${e}_solo`]=$("v",e,`vca${e}`,`VCA ${e}`);return n.player_elapsed={type:"button",category:"Media Player",name:"Player: Elapsed Time",style:{text:"Elapsed\\n$(module:player_elapsed)",size:"14",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[],feedbacks:[]},n.player_remaining={type:"button",category:"Media Player",name:"Player: Remaining Time",style:{text:"Remaining\\n$(module:player_remaining)",size:"14",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[],feedbacks:[]},n.player_previous={type:"button",category:"Media Player",name:"Player: Previous Track",style:{text:"|<<",size:"24",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MediaPrev,options:{}}],up:[]}],feedbacks:[]},n.player_next={type:"button",category:"Media Player",name:"Player: Next Track",style:{text:">>|",size:"24",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MediaNext,options:{}}],up:[]}],feedbacks:[]},n.player_playstop={type:"button",category:"Media Player",name:"Player: Play/Stop",style:{text:"Play/\\nStop",size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MediaPlay,options:{}}],up:[]}],feedbacks:[{feedbackId:k.MediaPlayerState,options:{state:t.PlayerState.Playing},style:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(255,0,0)}},{feedbackId:k.MediaPlayerState,options:{state:t.PlayerState.Stopped},style:{color:(0,e.combineRgb)(0,0,0),bgcolor:(0,e.combineRgb)(0,255,0)}}]},n.player_stop={type:"button",category:"Media Player",name:"Player: Stop",style:{text:"STOP",size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MediaStop,options:{}}],up:[]}],feedbacks:[{feedbackId:k.MediaPlayerState,options:{state:t.PlayerState.Playing},style:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(255,0,0)}}]},n.player_pause={type:"button",category:"Media Player",name:"Player: Pause",style:{text:"Pause",size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.MediaPause,options:{}}],up:[]}],feedbacks:[{feedbackId:k.MediaPlayerState,options:{state:t.PlayerState.Paused},style:{color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(255,153,51)}}]},i.masterDim&&(n.master_dim={type:"button",category:"Master",name:"Master: DIM",style:{text:"DIM Master",size:"18",color:(0,e.combineRgb)(255,255,255),bgcolor:(0,e.combineRgb)(0,0,0)},steps:[{down:[{actionId:P.DimMaster,options:{dim:2}}],up:[]}],feedbacks:[{feedbackId:k.DimMaster,options:{state:!0},style:I.dim}]}),n}(this.conn);this.setPresetDefinitions(a)}async configUpdated(e){this.log("debug","Config updated"),this.conn&&this.conn.disconnect(),this.feedbackStore.unsubscribeAll(),this.variablesStore.unsubscribeAll(),this.createConnection(e)}getConfigFields(){return x}async destroy(){this.log("debug","Destroying instance"),this.feedbackStore.unsubscribeAll(),this.variablesStore.destroy(),this.conn&&await this.conn.disconnect()}}(0,e.runEntrypoint)(R,[function(e,t){return{updatedActions:[],updatedConfig:null,updatedFeedbacks:[]}},C])})()})();