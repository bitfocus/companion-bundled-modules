exports.id=292,exports.ids=[292],exports.modules={201:(e,t,s)=>{"use strict";const r=s(4756),n=s(8611),o=s(5692),i=s(6559),{globalAgent:a}=s(7444),c=s(3305),h=s(4394),u=s(9350),l=(e,t,s)=>{(async()=>{try{const{proxyOptions:n}=e,{url:h,headers:l,raw:d}=n,p=await a.request(h,n,{...u(e),...l,":method":"CONNECT",":authority":`${t.host}:${t.port}`});p.once("error",s),p.once("response",n=>{const a=n[":status"];if(200!==a)return void s(new c(a,""));const h=e instanceof o.Agent;if(d&&h){t.socket=p;const e=r.connect(t);return e.once("close",()=>{p.destroy()}),void s(null,e)}const u=new i(p);u.encrypted=!1,u._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},s(null,u)})}catch(e){s(e)}})()};class d extends n.Agent{constructor(e){super(e),h(this,e.proxyOptions)}createConnection(e,t){l(this,e,t)}}class p extends o.Agent{constructor(e){super(e),h(this,e.proxyOptions)}createConnection(e,t){l(this,e,t)}}e.exports={HttpOverHttp2:d,HttpsOverHttp2:p}},312:(e,t,s)=>{"use strict";const{globalAgent:r}=s(7444),n=s(6538),o=s(9350);e.exports=class extends n{async _getProxyStream(e){const{proxyOptions:t}=this,s={...o(this),...t.headers,":method":"CONNECT",":authority":e},n=await r.request(t.url,t,s),i=await(e=>new Promise((t,s)=>{e.once("error",s),e.once("response",r=>{e.off("error",s),t(r[":status"])})}))(n);return[n,i,""]}}},449:(e,t,s)=>{"use strict";const r=s(8611),n=s(5692),o=s(6538),i=s(9350);class a extends o{async _getProxyStream(e){const{proxyOptions:t}=this,{url:s,headers:o}=this.proxyOptions;return a=("https:"===s.protocol?n:r).request({...t,hostname:s.hostname,port:s.port,path:e,headers:{...i(this),...o,host:e},method:"CONNECT"}).end(),new Promise((e,t)=>{a.once("error",t),a.once("connect",(s,r,n)=>{r.unshift(n),a.off("error",t),e([r,s.statusCode,s.statusMessage])})});var a}}e.exports={Http2OverHttp:a,Http2OverHttps:a}},491:(e,t,s)=>{"use strict";const{isIP:r}=s(9278),n=s(2613);e.exports=e=>{const t=(e=>{if("["===e[0]){const t=e.indexOf("]");return n(-1!==t),e.slice(1,t)}const t=e.indexOf(":");return-1===t?e:e.slice(0,t)})(e);return r(t)?"":t}},602:(e,t,s)=>{"use strict";const{Transform:r,PassThrough:n}=s(2203),o=s(3106),i=s(7157);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const s="br"===t;if(s&&"function"!=typeof o.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new r({transform(e,t,s){a=!1,s(null,e)},flush(e){e()}}),h=new n({autoDestroy:!1,destroy(t,s){e.destroy(),s(t)}}),u=s?o.createBrotliDecompress():o.createUnzip();return u.once("error",t=>{!a||e.readable?h.destroy(t):h.end()}),i(e,h),e.pipe(c).pipe(u).pipe(h),h}},687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=(e,t)=>{let s;s="function"==typeof t?{connect:t}:t;const r="function"==typeof s.connect,n="function"==typeof s.secureConnect,o="function"==typeof s.close,i=()=>{r&&s.connect(),function(e){return e.encrypted}(e)&&n&&(e.authorized?s.secureConnect():e.authorizationError||e.once("secureConnect",s.secureConnect)),o&&e.once("close",s.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&o&&s.close(e._hadError)};t.default=s,e.exports=s,e.exports.default=s},1125:e=>{"use strict";e.exports=(e,t,s)=>{for(const r of s)e.on(r,(...e)=>t.emit(r,...e))}},1169:(e,t,s)=>{"use strict";const r=s(4756);e.exports=(e={},t=r.connect)=>new Promise((s,r)=>{let n,o=!1;const i=async()=>{await c,n.off("timeout",a),n.off("error",r),e.resolveSocket?(s({alpnProtocol:n.alpnProtocol,socket:n,timeout:o}),o&&(await Promise.resolve(),n.emit("timeout"))):(n.destroy(),s({alpnProtocol:n.alpnProtocol,timeout:o}))},a=async()=>{o=!0,i()},c=(async()=>{try{n=await t(e,i),n.on("error",r),n.once("timeout",a)}catch(e){r(e)}})()})},2094:(e,t,s)=>{"use strict";const{URL:r,urlToHttpOptions:n}=s(7016),o=s(8611),i=s(5692),a=s(1169),c=s(7392),{Agent:h,globalAgent:u}=s(7444),l=s(2734),d=s(491),p=s(2822),f=new c({maxSize:100}),m=(e,t=new Map,s=void 0)=>async r=>{const n=`${r.host}:${r.port}:${r.ALPNProtocols.sort()}`;if(!e.has(n)){if(t.has(n))return{alpnProtocol:(await t.get(n)).alpnProtocol};const{path:o}=r;r.path=r.socketPath;const i=a(r,s);t.set(n,i);try{const s=await i;return e.set(n,s.alpnProtocol),t.delete(n),r.path=o,s}catch(e){throw t.delete(n),r.path=o,e}}return{alpnProtocol:e.get(n)}},y=m(f,new Map);e.exports=async(e,t,s)=>{if(e="string"==typeof e?n(new r(e)):e instanceof r?n(e):{...e},"function"==typeof t||void 0===t?(s=t,t=e):t=Object.assign(e,t),t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"],!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const a="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||d(t.headers&&t.headers.host||t.host),t.port=t.port||(a?443:80),t._defaultAgent=a?i.globalAgent:o.globalAgent;const c=t.resolveProtocol||y;let{agent:f}=t;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){t.resolveSocket=!0;let{socket:e,alpnProtocol:r,timeout:n}=await c(t);if(n){e&&e.destroy();const s=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);throw s.code="ETIMEDOUT",s.ms=t.timeout,s}e&&t.createConnection&&(e.destroy(),e=void 0),delete t.resolveSocket;const o="h2"===r;if(f&&(f=o?f.http2:f.https,t.agent=f),void 0===f&&(f=o?u:i.globalAgent),e)if(!1===f)e.destroy();else{const s=(o?h:i.Agent).prototype.createConnection;f.createConnection===s?o?t._reuseSocket=e:((e,t,s)=>{t._httpMessage={shouldKeepAlive:!0};const r=()=>{e.emit("free",t,s)};t.on("free",r);const n=()=>{e.removeSocket(t,s)};t.on("close",n);const o=()=>{const{freeSockets:s}=e;for(const e of Object.values(s))if(e.includes(t))return void t.destroy()};t.on("timeout",o);const i=()=>{e.removeSocket(t,s),t.off("close",n),t.off("free",r),t.off("timeout",o),t.off("agentRemove",i)};t.on("agentRemove",i),e.emit("free",t,s)})(f,e,t):e.destroy()}if(o)return p(new l(t,s))}else f&&(t.agent=f.http);return t.headers&&(t.headers={...t.headers},t.headers[":authority"]&&(t.headers.host||(t.headers.host=t.headers[":authority"]),delete t.headers[":authority"]),delete t.headers[":method"],delete t.headers[":scheme"],delete t.headers[":path"]),p(o.request(t,s))},e.exports.protocolCache=f,e.exports.resolveProtocol=y,e.exports.createResolveProtocol=m},2734:(e,t,s)=>{"use strict";const{URL:r,urlToHttpOptions:n}=s(7016),o=s(5675),{Writable:i}=s(2203),{Agent:a,globalAgent:c}=s(7444),h=s(7235),u=s(1125),{ERR_INVALID_ARG_TYPE:l,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:p}=s(3876),f=s(5711),m=s(9879),y=s(5332),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:b,HTTP2_HEADER_AUTHORITY:w,HTTP2_METHOD_CONNECT:v}=o.constants,S=Symbol("headers"),E=Symbol("origin"),k=Symbol("session"),x=Symbol("options"),C=Symbol("flushedHeaders"),T=Symbol("jobs"),R=Symbol("pendingAgentPromise");e.exports=class extends i{constructor(e,t,s){if(super({autoDestroy:!1,emitClose:!1}),e="string"==typeof e?n(new r(e)):e instanceof r?n(e):{...e},"function"==typeof t||void 0===t?(s=t,t=e):t=Object.assign(e,t),t.h2session){if(this[k]=t.h2session,this[k].destroyed)throw new Error("The session has been closed already");this.protocol=this[k].socket.encrypted?"https:":"http:"}else if(!1===t.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===t.agent||null===t.agent)this.agent=c;else{if("function"!=typeof t.agent.request)throw new l("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(this.agent&&(this.protocol=this.agent.protocol),t.protocol&&t.protocol!==this.protocol)throw new d(t.protocol,this.protocol);t.port||(t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443),t.host=t.hostname||t.host||"localhost",delete t.hostname;const{timeout:o}=t;t.timeout=void 0,this[S]=Object.create(null),this[T]=[],this[R]=void 0,this.socket=null,this.connection=null,this.method=t.method||"GET",("CONNECT"!==this.method||"/"!==t.path&&void 0!==t.path)&&(this.path=t.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;const{headers:i}=t;if(i)for(const e in i)this.setHeader(e,i[e]);t.auth&&!("authorization"in this[S])&&(this[S].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[x]=t,this[E]=new r(`${this.protocol}//${t.servername||t.host}:${t.port}`);const h=t._reuseSocket;h&&(t.createConnection=(...e)=>h.destroyed?this.agent.createConnection(...e):h,this.agent.getSession(this[E],this[x]).catch(()=>{})),o&&this.setTimeout(o),s&&this.once("response",s),this[C]=!1}get method(){return this[S][_]}set method(e){e&&(this[S][_]=e.toUpperCase())}get path(){const e="CONNECT"===this.method?w:b;return this[S][e]}set path(e){if(e){const t="CONNECT"===this.method?w:b;this[S][t]=e}}get host(){return this[E].hostname}set host(e){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,s){if(this._mustNotHaveABody)return void s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const r=()=>this._request.write(e,t,s);this._request?r():this[T].push(r)}_final(e){this.flushHeaders();const t=()=>{this._mustNotHaveABody||"CONNECT"===this.method?e():this._request.end(e)};this._request?t():this[T].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,t){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[R]}catch(t){this.aborted&&(e=t)}t(e)}async flushHeaders(){if(this[C]||this.destroyed)return;this[C]=!0;const e=this.method===v,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||u(t,this,["timeout","continue"]),t.once("error",e=>{this.destroy(e)}),t.once("aborted",()=>{const{res:e}=this;e?(e.aborted=!0,e.emit("aborted"),e.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});const s=(s,r,n)=>{const o=new h(this.socket,t.readableHighWaterMark);this.res=o,o.url=`${this[E].origin}${this.path}`,o.req=this,o.statusCode=s[g],o.headers=s,o.rawHeaders=n,o.once("end",()=>{o.complete=!0,o.socket=null,o.connection=null}),e?(o.upgrade=!0,this.emit("connect",o,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",e=>{o._dumped||o.push(e)||t.pause()}),t.once("end",()=>{this.aborted||o.push(null)}),this.emit("response",o)||o._dump())};t.once("response",s),t.once("headers",e=>this.emit("information",{statusCode:e[g]})),t.once("trailers",(e,t,r)=>{const{res:n}=this;null!==n?(n.trailers=e,n.rawTrailers=r):s(e,0,r)}),t.once("close",()=>{const{aborted:e,res:t}=this;if(t){e&&(t.aborted=!0,t.emit("aborted"),t.destroy());const s=()=>{t.emit("close"),this.destroy(),this.emit("close")};return void(t.readable?t.once("end",s):s())}if(!this.destroyed)return this.destroy(new Error("The HTTP/2 stream has been early terminated")),void this.emit("close");this.destroy(),this.emit("close")}),this.socket=new Proxy(t,y);for(const e of this[T])e();this[T].length=0,this.emit("socket",this.socket)};if(w in this[S]||e||(this[S][w]=this[E].host),this[k])try{t(this[k].request(this[S]))}catch(e){this.destroy(e)}else{this.reusedSocket=!0;try{const e=this.agent.request(this[E],this[x],this[S]);this[R]=e,t(await e),this[R]=!1}catch(e){this[R]=!1,this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[S])}hasHeader(e){if("string"!=typeof e)throw new l("name","string",e);return Boolean(this[S][e.toLowerCase()])}getHeader(e){if("string"!=typeof e)throw new l("name","string",e);return this[S][e.toLowerCase()]}get headersSent(){return this[C]}removeHeader(e){if("string"!=typeof e)throw new l("name","string",e);if(this.headersSent)throw new p("remove");delete this[S][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new p("set");f(e),m(e,t);const s=e.toLowerCase();if("connection"===s){if("keep-alive"===t.toLowerCase())return;throw new Error(`Invalid 'connection' header: ${t}`)}"host"===s&&"CONNECT"===this.method?this[S][w]=t:this[S][s]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const s=()=>this._request.setTimeout(e,t);return this._request?s():this[T].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},2822:e=>{"use strict";e.exports=e=>{if(0!==e.listenerCount("error"))return e;e.__destroy=e._destroy,e._destroy=(...t)=>{const s=t.pop();e.__destroy(...t,async e=>{await Promise.resolve(),s(e)})};const t=t=>{Promise.resolve().then(()=>{e.emit("error",t)})};return e.once("error",t),Promise.resolve().then(()=>{e.off("error",t)}),e}},3305:e=>{"use strict";class t extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`),this.statusCode=e,this.statusMessage=t}}e.exports=t},3610:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},3876:e=>{"use strict";const t=(t,s,r)=>{e.exports[s]=class extends t{constructor(...e){super("string"==typeof r?r:r(e)),this.name=`${super.name} [${s}]`,this.code=s}}};t(TypeError,"ERR_INVALID_ARG_TYPE",e=>{const t=e[0].includes(".")?"property":"argument";let s=e[1];const r=Array.isArray(s);return r&&(s=`${s.slice(0,-1).join(", ")} or ${s.slice(-1)}`),`The "${e[0]}" ${t} must be ${r?"one of":"of"} type ${s}. Received ${typeof e[2]}`}),t(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`),t(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`),t(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`),t(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`),t(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},4394:(e,t,s)=>{"use strict";const{URL:r}=s(7016),n=s(9420);e.exports=(e,t)=>{n("proxyOptions",t,["object"]),n("proxyOptions.headers",t.headers,["object","undefined"]),n("proxyOptions.raw",t.raw,["boolean","undefined"]),n("proxyOptions.url",t.url,[r,"string"]);const s=new r(t.url);e.proxyOptions={raw:!0,...t,headers:{...t.headers},url:s}}},5332:(e,t,s)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=s(3876),n={has(e,t){const s=void 0===e.session?e:e.session.socket;return t in e||t in s},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":return!e.destroyed&&e.readable;case"setTimeout":{const{session:t}=e;return void 0!==t?t.setTimeout.bind(t):e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new r;default:{const s=void 0===e.session?e:e.session.socket,r=s[t];return"function"==typeof r?r.bind(s):r}}},getPrototypeOf:e=>void 0!==e.session?Reflect.getPrototypeOf(e.session.socket):Reflect.getPrototypeOf(e),set(e,t,s){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return e[t]=s,!0;case"setTimeout":{const{session:t}=e;return void 0===t?e.setTimeout=s:t.setTimeout=s,!0}case"write":case"read":case"pause":case"resume":throw new r;default:return(void 0===e.session?e:e.session.socket)[t]=s,!0}}};e.exports=n},5516:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var s="",r=Array.isArray(t);s=r?"[":"{";var n=!0;for(var o in t){var i="function"==typeof t[o]||!r&&void 0===t[o];Object.hasOwnProperty.call(t,o)&&!i&&(n||(s+=","),n=!1,r?null==t[o]?s+="null":s+=e(t[o]):void 0!==t[o]&&(s+=e(o)+":"+e(t[o])))}return s+(r?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t})}},5711:(e,t,s)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:r}=s(3876),n=s(3610),o=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if("string"!=typeof e||!o.test(e)&&!n(e))throw new r("Header name",e)}},5769:(e,t,s)=>{"use strict";const r=s(5675),{Agent:n,globalAgent:o}=s(7444),i=s(2734),a=s(7235),c=s(2094),{HttpOverHttp2:h,HttpsOverHttp2:u}=s(201),l=s(312),{Http2OverHttp:d,Http2OverHttps:p}=s(449),f=s(5711),m=s(9879);e.exports={...r,ClientRequest:i,IncomingMessage:a,Agent:n,globalAgent:o,request:(e,t,s)=>new i(e,t,s),get:(e,t,s)=>{const r=new i(e,t,s);return r.end(),r},auto:c,proxies:{HttpOverHttp2:h,HttpsOverHttp2:u,Http2OverHttp2:l,Http2OverHttp:d,Http2OverHttps:p},validateHeaderName:f,validateHeaderValue:m}},6538:(e,t,s)=>{"use strict";const{Agent:r}=s(7444),n=s(6559),o=s(3305),i=s(4394);e.exports=class extends r{constructor(e){super(e),i(this,e.proxyOptions)}async createConnection(e,t){const s=`${e.hostname}:${e.port||443}`,[r,i,a]=await this._getProxyStream(s);if(200!==i)throw new o(i,a);if(!this.proxyOptions.raw){const e=new n(r);return e.encrypted=!1,e._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},e}return t.socket=r,super.createConnection(e,t)}}},6559:(e,t,s)=>{"use strict";const r=s(2203),n=new(s(4756).TLSSocket)(new r.PassThrough)._handle._parentWrap.constructor;e.exports=n},7157:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,s)=>{if(s._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set(Object.keys(e).concat(t)),n={};for(const t of r)t in s||(n[t]={get(){const s=e[t];return"function"==typeof s?s.bind(e):s},set(s){e[t]=s},enumerable:!0,configurable:!1});return Object.defineProperties(s,n),e.once("aborted",()=>{s.destroy(),s.emit("aborted")}),e.once("close",()=>{e.complete&&s.readable?s.once("end",()=>{s.emit("close")}):s.emit("close")}),s}},7234:e=>{"use strict";const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),s=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),r=new Set([500,502,503,504]),n={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},o={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(e){const t=parseInt(e,10);return isFinite(t)?t:0}function a(e){const t={};if(!e)return t;const s=e.trim().split(/,/);for(const e of s){const[s,r]=e.split(/=/,2);t[s.trim()]=void 0===r||r.trim().replace(/^"|"$/g,"")}return t}function c(e){let t=[];for(const s in e){const r=e[s];t.push(!0===r?s:s+"="+r)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:s,cacheHeuristic:r,immutableMinTimeToLive:n,ignoreCargoCult:o,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==s,this._ignoreCargoCult=!!o,this._cacheHeuristic=void 0!==r?r:.1,this._immutableMinTtl=void 0!==n?n:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),this._ignoreCargoCult&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!s.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return!!(this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires)}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){return!this.evaluateRequest(e).revalidation}_evaluateRequestHitResult(e){return{response:{headers:this.responseHeaders()},revalidation:e}}_evaluateRequestRevalidation(e,t){return{synchronous:t,headers:this.revalidationHeaders(e)}}_evaluateRequestMissResult(e){return{response:void 0,revalidation:this._evaluateRequestRevalidation(e,!0)}}evaluateRequest(e){if(this._assertRequestHasHeaders(e),this._rescc["must-revalidate"])return this._evaluateRequestMissResult(e);if(!this._requestMatches(e,!1))return this._evaluateRequestMissResult(e);const t=a(e.headers["cache-control"]);return t["no-cache"]||/no-cache/.test(e.headers.pragma)||t["max-age"]&&this.age()>i(t["max-age"])||t["min-fresh"]&&this.maxAge()-this.age()<i(t["min-fresh"])?this._evaluateRequestMissResult(e):this.stale()?"max-stale"in t&&(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())?this._evaluateRequestHitResult(void 0):this.useStaleWhileRevalidate()?this._evaluateRequestHitResult(this._evaluateRequestRevalidation(e,!1)):this._evaluateRequestMissResult(e):this._evaluateRequestHitResult(void 0)}_requestMatches(e,t){return!(this._url&&this._url!==e.url||this._host!==e.headers.host||e.method&&this._method!==e.method&&(!t||"HEAD"!==e.method)||!this._varyMatches(e))}_allowsStoringAuthenticated(){return!!(this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"])}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const s of t)if(e.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const s in e)n[s]||(t[s]=e[s]);if(e.connection){const s=e.connection.trim().split(/\s*,\s*/);for(const e of s)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter(e=>!/^\s*1[0-9][0-9]/.test(e));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<t?0:Math.max(e,(s-t)/1e3)}if(this._resHeaders["last-modified"]){const s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&t>s)return Math.max(e,(t-s)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+i(this._rescc["stale-if-error"]),s=e+i(this._rescc["stale-while-revalidate"]);return Math.round(1e3*Math.max(0,e,t,s))}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){const e=i(this._rescc["stale-while-revalidate"]);return e>0&&this.maxAge()+e>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._ignoreCargoCult=!!e.icc,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,icc:this._ignoreCargoCult,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter(e=>!/^\s*W\//.test(e));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||r.has(e.status)}(t))return{policy:this,modified:!1,matches:!0};if(!t||!t.headers)throw Error("Response headers missing");let s=!1;void 0!==t.status&&304!=t.status?s=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(s=!0);const n={shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl,ignoreCargoCult:this._ignoreCargoCult};if(!s)return{policy:new this.constructor(e,t,n),modified:304!=t.status,matches:!1};const i={};for(const e in this._resHeaders)i[e]=e in t.headers&&!o[e]?t.headers[e]:this._resHeaders[e];const a=Object.assign({},t,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,a,n),modified:!1,matches:!0}}}},7235:(e,t,s)=>{"use strict";const{Readable:r}=s(2203);e.exports=class extends r{constructor(e,t){super({emitClose:!1,autoDestroy:!0,highWaterMark:t}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){this.readableEnded||(this.aborted=!0),t(),this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},7392:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},7444:(e,t,s)=>{"use strict";const{URL:r}=s(7016),n=s(4434),o=s(4756),i=s(5675),a=s(7392),c=s(2822),h=Symbol("currentStreamCount"),u=Symbol("request"),l=Symbol("cachedOriginSet"),d=Symbol("gracefullyClosing"),p=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,y=(e,t)=>{for(let s=0;s<e.length;s++){const r=e[s];r[l].length>0&&r[l].length<t[l].length&&r[l].every(e=>t[l].includes(e))&&r[h]+t[h]<=t.remoteSettings.maxConcurrentStreams&&_(r)}},g=(e,t)=>{for(let s=0;s<e.length;s++){const r=e[s];if(t[l].length>0&&t[l].length<r[l].length&&t[l].every(e=>r[l].includes(e))&&t[h]+r[h]<=r.remoteSettings.maxConcurrentStreams)return _(t),!0}return!1},_=e=>{e[d]=!0,0===e[h]&&e.close()};class b extends n{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:s=10,maxCachedTlsSessions:r=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxEmptySessions=s,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:r})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let s=0;s<f.length;s++){const r=f[s];t+=":",e&&void 0!==e[r]&&(t+=e[r])}return t}_processQueue(){if(this._sessionCount>=this.maxSessions)this.closeEmptySessions(this.maxSessions-this._sessionCount+1);else for(const e in this.queue)for(const t in this.queue[e]){const s=this.queue[e][t];s.completed||(s.completed=!0,s())}}_isBetterSession(e,t){return e>t}_accept(e,t,s,r){let n=0;for(;n<t.length&&e[h]<e.remoteSettings.maxConcurrentStreams;)t[n].resolve(e),n++;t.splice(0,n),t.length>0&&(this.getSession(s,r,t),t.length=0)}getSession(e,t,s){return new Promise((n,o)=>{Array.isArray(s)&&s.length>0?(s=[...s],n()):s=[{resolve:n,reject:o}];try{if("string"==typeof e)e=new r(e);else if(!(e instanceof r))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(t){const{servername:s}=t,{hostname:r}=e;if(s&&r!==s)throw new Error(`Origin ${r} differs from servername ${s}`)}}catch(e){for(let t=0;t<s.length;t++)s[t].reject(e);return}const a=this.normalizeOptions(t),c=e.origin;if(a in this.sessions){const e=this.sessions[a];let r,n=-1,o=-1;for(let t=0;t<e.length;t++){const s=e[t],i=s.remoteSettings.maxConcurrentStreams;if(i<n)break;if(!s[l].includes(c))continue;const a=s[h];a>=i||s[d]||s.destroyed||(r||(n=i),this._isBetterSession(a,o)&&(r=s,o=a))}if(r)return void this._accept(r,s,c,t)}if(a in this.queue){if(c in this.queue[a])return void this.queue[a][c].listeners.push(...s)}else this.queue[a]={[p]:0};const f=()=>{a in this.queue&&this.queue[a][c]===_&&(delete this.queue[a][c],0===--this.queue[a][p]&&delete this.queue[a])},_=async()=>{this._sessionCount++;const r=`${c}:${a}`;let n,o=!1;try{const b={...t};void 0===b.settings&&(b.settings=this.settings),void 0===b.session&&(b.session=this.tlsSessionCache.get(r));const w=b.createConnection||this.createConnection;n=await w.call(this,e,b),b.createConnection=()=>n;const v=i.connect(e,b);v[h]=0,v[d]=!1;const S=()=>{const{socket:e}=v;let t;return!1===e.servername?(e.servername=e.remoteAddress,t=v.originSet,e.servername=!1):t=v.originSet,t},E=()=>v[h]<v.remoteSettings.maxConcurrentStreams;v.socket.once("session",e=>{this.tlsSessionCache.set(r,e)}),v.once("error",e=>{for(let t=0;t<s.length;t++)s[t].reject(e);this.tlsSessionCache.delete(r)}),v.setTimeout(this.timeout,()=>{v.destroy()}),v.once("close",()=>{if(this._sessionCount--,o){this._emptySessionCount--;const e=this.sessions[a];1===e.length?delete this.sessions[a]:e.splice(e.indexOf(v),1)}else{f();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<s.length;t++)s[t].reject(e)}this._processQueue()});const k=()=>{const e=this.queue[a];if(!e)return;const t=v[l];for(let s=0;s<t.length;s++){const r=t[s];if(r in e){const{listeners:t,completed:s}=e[r];let n=0;for(;n<t.length&&E();)t[n].resolve(v),n++;if(e[r].listeners.splice(0,n),0===e[r].listeners.length&&!s&&(delete e[r],0===--e[p])){delete this.queue[a];break}if(!E())break}}};v.on("origin",()=>{v[l]=S()||[],v[d]=!1,g(this.sessions[a],v),!v[d]&&E()&&(k(),E()&&y(this.sessions[a],v))}),v.once("remoteSettings",()=>{if(_.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<s.length;t++)s[t].reject(e);return void v.destroy()}if(v.setLocalWindowSize&&v.setLocalWindowSize(4194304),v[l]=S()||[],v.socket.encrypted){const e=v[l][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<s.length;e++)s[e].reject(t);return void v.destroy()}}f();{const e=this.sessions;if(a in e){const t=e[a];t.splice(((e,t,s)=>{let r=0,n=e.length;for(;r<n;){const o=r+n>>>1;s(e[o],t)?r=o+1:n=o}return r})(t,v,m),0,v)}else e[a]=[v]}o=!0,this._emptySessionCount++,this.emit("session",v),this._accept(v,s,c,t),0===v[h]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),v.on("remoteSettings",()=>{E()&&(k(),E()&&y(this.sessions[a],v))})}),v[u]=v.request,v.request=(e,t)=>{if(v[d])throw new Error("The session is gracefully closing. No new streams are allowed.");const s=v[u](e,t);return v.ref(),0===v[h]++&&this._emptySessionCount--,s.once("close",()=>{0===--v[h]&&(this._emptySessionCount++,v.unref(),this._emptySessionCount>this.maxEmptySessions||v[d])?v.close():v.destroyed||v.closed||E()&&!g(this.sessions[a],v)&&(y(this.sessions[a],v),k(),0===v[h]&&this._processQueue())}),s}}catch(e){f(),this._sessionCount--;for(let t=0;t<s.length;t++)s[t].reject(e)}};_.listeners=s,_.completed=!1,_.destroyed=!1,this.queue[a][c]=_,this.queue[a][p]++,this._processQueue()})}request(e,t,s,r){return new Promise((n,o)=>{this.getSession(e,t,[{reject:o,resolve:e=>{try{const t=e.request(s,r);c(t),n(t)}catch(e){o(e)}}}])})}async createConnection(e,t){return b.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const s=e.port||443,r=e.hostname;void 0===t.servername&&(t.servername=r);const n=o.connect(s,r,t);return t.socket&&(n._peername={family:void 0,address:void 0,port:s}),n}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:s}=this;for(const r in s){const n=s[r];for(let s=0;s<n.length;s++){const r=n[s];if(0===r[h]&&(t++,r.close(),t>=e))return t}}return t}destroy(e){const{sessions:t,queue:s}=this;for(const s in t){const r=t[s];for(let t=0;t<r.length;t++)r[t].destroy(e)}for(const e in s){const t=s[e];for(const e in t)t[e].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}b.kCurrentStreamCount=h,b.kGracefullyClosing=d,e.exports={Agent:b,globalAgent:new b}},8387:(e,t,s)=>{"use strict";const r=s(4434),n=s(5516),o=["sqlite","postgres","mysql","mongo","redis","tiered"];e.exports=class extends r{constructor(e,{emitErrors:t=!0,...r}={}){if(super(),this.opts={namespace:"keyv",serialize:n.stringify,deserialize:n.parse,..."string"==typeof e?{uri:e}:e,...r},!this.opts.store){const e={...this.opts};this.opts.store=(e=>{const t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){const r=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(s(6478)(t[r]))(e)}return new Map})(e)}if(this.opts.compression){const e=this.opts.compression;this.opts.serialize=e.serialize.bind(e),this.opts.deserialize=e.deserialize.bind(e)}"function"==typeof this.opts.store.on&&t&&this.opts.store.on("error",e=>this.emit("error",e)),this.opts.store.namespace=this.opts.namespace;const o=e=>async function*(){for await(const[t,s]of"function"==typeof e?e(this.opts.store.namespace):e){const e=await this.opts.deserialize(s);this.opts.store.namespace&&!t.includes(this.opts.store.namespace)||("number"==typeof e.expires&&Date.now()>e.expires?this.delete(t):yield[this._getKeyUnprefix(t),e.value])}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=o(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=o(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return o.includes(this.opts.store.opts.dialect)||o.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(e=>`${this.opts.namespace}:${e}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){const{store:s}=this.opts,r=Array.isArray(e),n=r?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(r&&void 0===s.getMany){const e=[];for(const r of n)e.push(Promise.resolve().then(()=>s.get(r)).then(e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e).then(e=>{if(null!=e)return"number"==typeof e.expires&&Date.now()>e.expires?this.delete(r).then(()=>{}):t&&t.raw?e:e.value}));return Promise.allSettled(e).then(e=>{const t=[];for(const s of e)t.push(s.value);return t})}return Promise.resolve().then(()=>r?s.getMany(n):s.get(n)).then(e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e).then(s=>{if(null!=s)return r?s.map((s,r)=>{if("string"==typeof s&&(s=this.opts.deserialize(s)),null!=s){if(!("number"==typeof s.expires&&Date.now()>s.expires))return t&&t.raw?s:s.value;this.delete(e[r]).then(()=>{})}}):"number"==typeof s.expires&&Date.now()>s.expires?this.delete(e).then(()=>{}):t&&t.raw?s:s.value})}set(e,t,s){const r=this._getKeyPrefix(e);void 0===s&&(s=this.opts.ttl),0===s&&(s=void 0);const{store:n}=this.opts;return Promise.resolve().then(()=>{const e="number"==typeof s?Date.now()+s:null;return"symbol"==typeof t&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:e},this.opts.serialize(t)}).then(e=>n.set(r,e,s)).then(()=>!0)}delete(e){const{store:t}=this.opts;if(Array.isArray(e)){const s=this._getKeyPrefixArray(e);if(void 0===t.deleteMany){const e=[];for(const r of s)e.push(t.delete(r));return Promise.allSettled(e).then(e=>e.every(e=>!0===e.value))}return Promise.resolve().then(()=>t.deleteMany(s))}const s=this._getKeyPrefix(e);return Promise.resolve().then(()=>t.delete(s))}clear(){const{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){const t=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then(async()=>"function"==typeof s.has?s.has(t):void 0!==await s.get(t))}disconnect(){const{store:e}=this.opts;if("function"==typeof e.disconnect)return e.disconnect()}}},9292:(e,t,s)=>{"use strict";s.d(t,{default:()=>Xr});var r=s(8500);const n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...n],i=["null","undefined","string","number","bigint","boolean","symbol"],a=e=>{const t=Object.prototype.toString.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&K(e)?"HTMLElement":(s=t,o.includes(s)?t:void 0);var s};function c(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(be(e))return"Observable";if(p(e))return"Array";if(C(e))return"Buffer";const t=a(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}const h=Object.assign(c,{all:l,any:d,array:p,arrayBuffer:f,arrayLike:m,asyncFunction:y,asyncGenerator:g,asyncGeneratorFunction:_,asyncIterable:b,bigint:w,bigInt64Array:v,bigUint64Array:S,blob:E,boolean:k,boundFunction:x,buffer:C,class:T,dataView:R,date:O,detect:c,directInstanceOf:A,emptyArray:P,emptyMap:j,emptyObject:H,emptySet:q,emptyString:I,emptyStringOrWhitespace:N,enumCase:L,error:U,evenInteger:z,falsy:$,float32Array:D,float64Array:M,formData:B,function:F,generator:W,generatorFunction:V,htmlElement:K,infinite:Q,inRange:Y,int16Array:X,int32Array:Z,int8Array:ee,integer:te,iterable:se,map:re,nan:ne,nativePromise:oe,negativeNumber:ie,nodeStream:ae,nonEmptyArray:ce,nonEmptyMap:he,nonEmptyObject:ue,nonEmptySet:le,nonEmptyString:de,nonEmptyStringAndNotWhitespace:pe,null:fe,nullOrUndefined:me,number:ye,numericString:ge,object:_e,observable:be,oddInteger:we,plainObject:ve,positiveNumber:Se,primitive:Ee,promise:ke,propertyKey:xe,regExp:Ce,safeInteger:Te,set:Re,sharedArrayBuffer:Oe,string:Ae,symbol:Pe,truthy:je,tupleLike:He,typedArray:qe,uint16Array:Ie,uint32Array:Ne,uint8Array:Le,uint8ClampedArray:Ue,undefined:ze,urlInstance:$e,urlSearchParams:De,urlString:Me,validDate:Be,validLength:Fe,weakMap:We,weakRef:Ve,weakSet:Ge,whitespaceString:Je});function u(e){return t=>te(t)&&Math.abs(t%2)===e}function l(e,...t){return Ke(Array.prototype.every,e,t)}function d(e,...t){return(p(e)?e:[e]).some(e=>Ke(Array.prototype.some,e,t))}function p(e,t){return!!Array.isArray(e)&&(!F(t)||e.every(e=>t(e)))}function f(e){return"ArrayBuffer"===a(e)}function m(e){return!me(e)&&!F(e)&&Fe(e.length)}function y(e){return"AsyncFunction"===a(e)}function g(e){return b(e)&&F(e.next)&&F(e.throw)}function _(e){return"AsyncGeneratorFunction"===a(e)}function b(e){return F(e?.[Symbol.asyncIterator])}function w(e){return"bigint"==typeof e}function v(e){return"BigInt64Array"===a(e)}function S(e){return"BigUint64Array"===a(e)}function E(e){return"Blob"===a(e)}function k(e){return!0===e||!1===e}function x(e){return F(e)&&!Object.hasOwn(e,"prototype")}function C(e){return e?.constructor?.isBuffer?.(e)??!1}function T(e){return F(e)&&e.toString().startsWith("class ")}function R(e){return"DataView"===a(e)}function O(e){return"Date"===a(e)}function A(e,t){return null!=e&&Object.getPrototypeOf(e)===t.prototype}function P(e){return p(e)&&0===e.length}function j(e){return re(e)&&0===e.size}function H(e){return _e(e)&&!re(e)&&!Re(e)&&0===Object.keys(e).length}function q(e){return Re(e)&&0===e.size}function I(e){return Ae(e)&&0===e.length}function N(e){return I(e)||Je(e)}function L(e,t){return Object.values(t).includes(e)}function U(e){return"Error"===a(e)}function z(e){return u(0)(e)}function $(e){return!e}function D(e){return"Float32Array"===a(e)}function M(e){return"Float64Array"===a(e)}function B(e){return"FormData"===a(e)}function F(e){return"function"==typeof e}function W(e){return se(e)&&F(e?.next)&&F(e?.throw)}function V(e){return"GeneratorFunction"===a(e)}const G=1,J=["innerHTML","ownerDocument","style","attributes","nodeValue"];function K(e){return _e(e)&&e.nodeType===G&&Ae(e.nodeName)&&!ve(e)&&J.every(t=>t in e)}function Q(e){return e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY}function Y(e,t){if(ye(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(p(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)}function X(e){return"Int16Array"===a(e)}function Z(e){return"Int32Array"===a(e)}function ee(e){return"Int8Array"===a(e)}function te(e){return Number.isInteger(e)}function se(e){return F(e?.[Symbol.iterator])}function re(e){return"Map"===a(e)}function ne(e){return Number.isNaN(e)}function oe(e){return"Promise"===a(e)}function ie(e){return ye(e)&&e<0}function ae(e){return _e(e)&&F(e.pipe)&&!be(e)}function ce(e){return p(e)&&e.length>0}function he(e){return re(e)&&e.size>0}function ue(e){return _e(e)&&!re(e)&&!Re(e)&&Object.keys(e).length>0}function le(e){return Re(e)&&e.size>0}function de(e){return Ae(e)&&e.length>0}function pe(e){return Ae(e)&&!N(e)}function fe(e){return null===e}function me(e){return fe(e)||ze(e)}function ye(e){return"number"==typeof e&&!Number.isNaN(e)}function ge(e){return Ae(e)&&!N(e)&&!Number.isNaN(Number(e))}function _e(e){return!fe(e)&&("object"==typeof e||F(e))}function be(e){return!!e&&(void 0!==Symbol.observable&&e===e[Symbol.observable]?.()||e===e["@@observable"]?.())}function we(e){return u(1)(e)}function ve(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function Se(e){return ye(e)&&e>0}function Ee(e){return fe(e)||(t=typeof e,i.includes(t));var t}function ke(e){return oe(e)||function(e){return F(e?.then)&&F(e?.catch)}(e)}function xe(e){return d([Ae,ye,Pe],e)}function Ce(e){return"RegExp"===a(e)}function Te(e){return Number.isSafeInteger(e)}function Re(e){return"Set"===a(e)}function Oe(e){return"SharedArrayBuffer"===a(e)}function Ae(e){return"string"==typeof e}function Pe(e){return"symbol"==typeof e}function je(e){return Boolean(e)}function He(e,t){return!(!p(t)||!p(e)||t.length!==e.length)&&t.every((t,s)=>t(e[s]))}function qe(e){return t=a(e),n.includes(t);var t}function Ie(e){return"Uint16Array"===a(e)}function Ne(e){return"Uint32Array"===a(e)}function Le(e){return"Uint8Array"===a(e)}function Ue(e){return"Uint8ClampedArray"===a(e)}function ze(e){return void 0===e}function $e(e){return"URL"===a(e)}function De(e){return"URLSearchParams"===a(e)}function Me(e){if(!Ae(e))return!1;try{return new URL(e),!0}catch{return!1}}function Be(e){return O(e)&&!ne(Number(e))}function Fe(e){return Te(e)&&e>=0}function We(e){return"WeakMap"===a(e)}function Ve(e){return"WeakRef"===a(e)}function Ge(e){return"WeakSet"===a(e)}function Je(e){return Ae(e)&&/^\s+$/.test(e)}function Ke(e,t,s){if(!F(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===s.length)throw new TypeError("Invalid number of values");return e.call(s,t)}function Qe(e,t){return`Expected value which is \`${e}\`, received value of type \`${h(t)}\`.`}function Ye(e){return Array.from(new Set(e))}const Xe=new Intl.ListFormat("en",{style:"long",type:"conjunction"}),Ze=new Intl.ListFormat("en",{style:"long",type:"disjunction"});function et(e,t){const s=Ye((p(e)?e:[e]).map(e=>`\`${e}\``)),r=Ye(t.map(e=>`\`${h(e)}\``));return`Expected values which are ${Ze.format(s)}. Received values of type${r.length>1?"s":""} ${Xe.format(r)}.`}const tt=function(e,...t){if(!d(e,...t)){const s=(p(e)?e:[e]).map(e=>ft(e.name)?lt[e.name]:"predicate returns truthy for any value");throw new TypeError(et(s,t))}},st=function(e,t,s){if(!p(e))throw new TypeError(s??Qe("Array",e));if(t)for(const r of e)t(r,s)},rt=function(e,t){if(!k(e))throw new TypeError(t??Qe("boolean",e))},nt=function(e,t){if(!F(e))throw new TypeError(t??Qe("Function",e))},ot=function(e,t){if(!ye(e))throw new TypeError(t??Qe("number",e))},it=function(e,t){if(!_e(e))throw new TypeError(t??Qe("Object",e))},at=function(e,t){if(!ve(e))throw new TypeError(t??Qe("plain object",e))},ct=function(e,t){if(!Ae(e))throw new TypeError(t??Qe("string",e))},ht=function(e,t){if(!je(e))throw new TypeError(t??Qe("truthy",e))},ut=function(e,t){if(!ze(e))throw new TypeError(t??Qe("undefined",e))},lt={isArray:"Array",isArrayBuffer:"ArrayBuffer",isArrayLike:"array-like",isAsyncFunction:"AsyncFunction",isAsyncGenerator:"AsyncGenerator",isAsyncGeneratorFunction:"AsyncGeneratorFunction",isAsyncIterable:"AsyncIterable",isBigint:"bigint",isBigInt64Array:"BigInt64Array",isBigUint64Array:"BigUint64Array",isBlob:"Blob",isBoolean:"boolean",isBoundFunction:"Function",isBuffer:"Buffer",isClass:"Class",isDataView:"DataView",isDate:"Date",isDirectInstanceOf:"T",isEmptyArray:"empty array",isEmptyMap:"empty map",isEmptyObject:"empty object",isEmptySet:"empty set",isEmptyString:"empty string",isEmptyStringOrWhitespace:"empty string or whitespace",isEnumCase:"EnumCase",isError:"Error",isEvenInteger:"even integer",isFalsy:"falsy",isFloat32Array:"Float32Array",isFloat64Array:"Float64Array",isFormData:"FormData",isFunction:"Function",isGenerator:"Generator",isGeneratorFunction:"GeneratorFunction",isHtmlElement:"HTMLElement",isInfinite:"infinite number",isInRange:"in range",isInt16Array:"Int16Array",isInt32Array:"Int32Array",isInt8Array:"Int8Array",isInteger:"integer",isIterable:"Iterable",isMap:"Map",isNan:"NaN",isNativePromise:"native Promise",isNegativeNumber:"negative number",isNodeStream:"Node.js Stream",isNonEmptyArray:"non-empty array",isNonEmptyMap:"non-empty map",isNonEmptyObject:"non-empty object",isNonEmptySet:"non-empty set",isNonEmptyString:"non-empty string",isNonEmptyStringAndNotWhitespace:"non-empty string and not whitespace",isNull:"null",isNullOrUndefined:"null or undefined",isNumber:"number",isNumericString:"string with a number",isObject:"Object",isObservable:"Observable",isOddInteger:"odd integer",isPlainObject:"plain object",isPositiveNumber:"positive number",isPrimitive:"primitive",isPromise:"Promise",isPropertyKey:"PropertyKey",isRegExp:"RegExp",isSafeInteger:"integer",isSet:"Set",isSharedArrayBuffer:"SharedArrayBuffer",isString:"string",isSymbol:"symbol",isTruthy:"truthy",isTupleLike:"tuple-like",isTypedArray:"TypedArray",isUint16Array:"Uint16Array",isUint32Array:"Uint32Array",isUint8Array:"Uint8Array",isUint8ClampedArray:"Uint8ClampedArray",isUndefined:"undefined",isUrlInstance:"URL",isUrlSearchParams:"URLSearchParams",isUrlString:"string with a URL",isValidDate:"valid Date",isValidLength:"valid length",isWeakMap:"WeakMap",isWeakRef:"WeakRef",isWeakSet:"WeakSet",isWhitespaceString:"whitespace string"},dt=(pt=lt,Object.keys(pt));var pt;function ft(e){return dt.includes(e)}const mt=h;var yt=s(8474);class gt extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}const _t=Object.freeze({pending:Symbol("pending"),canceled:Symbol("canceled"),resolved:Symbol("resolved"),rejected:Symbol("rejected")});class bt{static fn(e){return(...t)=>new bt((s,r,n)=>{t.push(n),e(...t).then(s,r)})}#e=[];#t=!0;#s=_t.pending;#r;#n;constructor(e){this.#r=new Promise((t,s)=>{this.#n=s;const r=e=>{if(this.#s!==_t.pending)throw new Error(`The \`onCancel\` handler was attached after the promise ${this.#s.description}.`);this.#e.push(e)};Object.defineProperties(r,{shouldReject:{get:()=>this.#t,set:e=>{this.#t=e}}}),e(e=>{this.#s===_t.canceled&&r.shouldReject||(t(e),this.#o(_t.resolved))},e=>{this.#s===_t.canceled&&r.shouldReject||(s(e),this.#o(_t.rejected))},r)})}then(e,t){return this.#r.then(e,t)}catch(e){return this.#r.catch(e)}finally(e){return this.#r.finally(e)}cancel(e){if(this.#s===_t.pending){if(this.#o(_t.canceled),this.#e.length>0)try{for(const e of this.#e)e()}catch(e){return void this.#n(e)}this.#t&&this.#n(new gt(e))}}get isCanceled(){return this.#s===_t.canceled}#o(e){this.#s===_t.pending&&(this.#s=e)}}Object.setPrototypeOf(bt.prototype,Promise.prototype);class wt extends Error{input;code;stack;response;request;timings;constructor(e,t,s){var r;if(super(e,{cause:t}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,r=s,mt.object(r)&&"_onResponse"in r?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s.response}),this.options=s.options):this.options=s,this.timings=this.request?.timings,mt.string(t.stack)&&mt.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,s=this.stack.slice(e).split("\n").reverse(),r=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;r.length>0&&r[0]===s[0];)s.shift();this.stack=`${this.stack.slice(0,e)}${s.reverse().join("\n")}${r.reverse().join("\n")}`}}}class vt extends wt{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class St extends wt{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class Et extends wt{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class kt extends wt{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class xt extends wt{timings;event;constructor(e,t,s){super(e.message,e,s),this.name="TimeoutError",this.event=e.event,this.timings=t}}class Ct extends wt{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class Tt extends wt{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}}class Rt extends wt{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}}var Ot=s(1708),At=s(4573),Pt=s(7075),jt=s(7067),Ht=s(4434),qt=s(9023),It=s(687);var Nt=s(3136),Lt=s(7598);const Ut=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e),zt=new Set(["https:","http:","file:"]);const $t=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Dt{#i;#a;#c=!1;#h=void 0;constructor(e,t){this.#i=e,this.#a=t}next(){const e=()=>this.#u();return this.#h=this.#h?this.#h.then(e,e):e(),this.#h}return(e){const t=()=>this.#l(e);return this.#h?this.#h.then(t,t):t()}async#u(){if(this.#c)return{done:!0,value:void 0};let e;try{e=await this.#i.read()}catch(e){throw this.#h=void 0,this.#c=!0,this.#i.releaseLock(),e}return e.done&&(this.#h=void 0,this.#c=!0,this.#i.releaseLock()),e}async#l(e){if(this.#c)return{done:!0,value:e};if(this.#c=!0,!this.#a){const t=this.#i.cancel(e);return this.#i.releaseLock(),await t,{done:!0,value:e}}return this.#i.releaseLock(),{done:!0,value:e}}}const Mt=Symbol();function Bt(){return this[Mt].next()}function Ft(e){return this[Mt].return(e)}Object.defineProperty(Bt,"name",{value:"next"}),Object.defineProperty(Ft,"name",{value:"return"});const Wt=Object.create($t,{next:{enumerable:!0,configurable:!0,writable:!0,value:Bt},return:{enumerable:!0,configurable:!0,writable:!0,value:Ft}});function Vt({preventCancel:e=!1}={}){const t=this.getReader(),s=new Dt(t,e),r=Object.create(Wt);return r[Mt]=s,r}const Gt=e=>{if(function(e,{checkOpen:t=!0}={}){return function(e,{checkOpen:t=!0}={}){return null!==e&&"object"==typeof e&&(e.writable||e.readable||!t||void 0===e.writable&&void 0===e.readable)&&"function"==typeof e.pipe}(e,{checkOpen:t})&&(e.readable||!t)&&"function"==typeof e.read&&"boolean"==typeof e.readable&&"boolean"==typeof e.readableObjectMode&&"function"==typeof e.destroy&&"boolean"==typeof e.destroyed}(e,{checkOpen:!1})&&void 0!==Yt.on)return Kt(e);if("function"==typeof e?.[Symbol.asyncIterator])return e;if("[object ReadableStream]"===Jt.call(e))return Vt.call(e);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:Jt}=Object.prototype,Kt=async function*(e){const t=new AbortController,s={};Qt(e,t,s);try{for await(const[s]of Yt.on(e,"data",{signal:t.signal}))yield s}catch(e){if(void 0!==s.error)throw s.error;if(!t.signal.aborted)throw e}finally{e.destroy()}},Qt=async(e,t,s)=>{try{await Yt.finished(e,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(e){s.error=e}finally{t.abort()}},Yt={},Xt=({convertedChunk:e,state:t,getSize:s,truncateChunk:r,addChunk:n,maxBuffer:o})=>{const i=s(e),a=t.length+i;if(a<=o)return void Zt(e,t,n,a);const c=r(e,o-t.length);throw void 0!==c&&Zt(c,t,n,o),new ss},Zt=(e,t,s,r)=>{t.contents=s(e,t,r),t.length=r},es=e=>{const t=typeof e;if("string"===t)return"string";if("object"!==t||null===e)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";const s=ts.call(e);return"[object ArrayBuffer]"===s?"arrayBuffer":"[object DataView]"===s?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&"[object ArrayBuffer]"===ts.call(e.buffer)?"typedArray":"others"},{toString:ts}=Object.prototype;class ss extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}}async function rs(e,t){return(async(e,{init:t,convertChunk:s,getSize:r,truncateChunk:n,addChunk:o,getFinalChunk:i,finalize:a},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{const h=Gt(e),u=t();u.length=0;try{for await(const e of h){const t=s[es(e)](e,u);Xt({convertedChunk:t,state:u,getSize:r,truncateChunk:n,addChunk:o,maxBuffer:c})}return(({state:e,getSize:t,truncateChunk:s,addChunk:r,getFinalChunk:n,maxBuffer:o})=>{const i=n(e);void 0!==i&&Xt({convertedChunk:i,state:e,getSize:t,truncateChunk:s,addChunk:r,maxBuffer:o})})({state:u,convertChunk:s,getSize:r,truncateChunk:n,addChunk:o,getFinalChunk:i,maxBuffer:c}),a(u)}catch(e){const t="object"==typeof e&&null!==e?e:new Error(e);throw t.bufferedData=a(u),t}})(e,us,t)}const ns=new TextEncoder,os=e=>new Uint8Array(e),is=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),as=e=>cs**Math.ceil(Math.log(e)/Math.log(cs)),cs=2,hs=()=>"resize"in ArrayBuffer.prototype,us={init:()=>({contents:new ArrayBuffer(0)}),convertChunk:{string:e=>ns.encode(e),buffer:os,arrayBuffer:os,dataView:is,typedArray:is,others:e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)}},getSize:e=>e.length,truncateChunk:(e,t)=>e.slice(0,t),addChunk:(e,{contents:t,length:s},r)=>{const n=hs()?((e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;const s=new ArrayBuffer(t,{maxByteLength:as(t)});return new Uint8Array(s).set(new Uint8Array(e),0),s})(t,r):((e,t)=>{if(t<=e.byteLength)return e;const s=new ArrayBuffer(as(t));return new Uint8Array(s).set(new Uint8Array(e),0),s})(t,r);return new Uint8Array(n).set(e,s),n},getFinalChunk:()=>{},finalize:({contents:e,length:t})=>hs()?e:e.slice(0,t)},ls=e=>globalThis.Buffer.from(e);var ds=s(7234);function ps(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e.toLowerCase(),t]))}class fs extends Pt.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:s,url:r}){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof r)throw new TypeError("Argument `url` should be a string");super({read(){this.push(s),this.push(null)}}),this.statusCode=e,this.headers=ps(t),this.body=s,this.url=r}}var ms=s(8387);const ys=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class gs extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class _s extends Error{constructor(e){super(e.message),Object.assign(this,e)}}const bs=Object.entries,ws=e=>{const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},vs=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),Ss=e=>{const t=[];for(const s of Object.keys(e))t[s.toLowerCase()]=e[s];return t},Es=class{constructor(e,t){this.hooks=new Map,this.request=()=>(e,t)=>{let s;if("string"==typeof e)s=vs(Nt.parse(e)),e={};else if(e instanceof Nt.URL)s=vs(Nt.parse(e.toString())),e={};else{const[t,...r]=(e.path??"").split("?"),n=r.length>0?`?${r.join("?")}`:"";s=vs({...e,pathname:t,search:n})}(e={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...e,...ws(s)}).headers=Object.fromEntries(bs(e.headers).map(([e,t])=>[e.toLowerCase(),t]));const r=new yt,n=function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!s)throw new Error(`Invalid URL: ${e}`);let{type:r,data:n,hash:o}=s.groups;const i=r.split(";");o=t?"":o;let a=!1;"base64"===i[i.length-1]&&(i.pop(),a=!0);const c=i.shift()?.toLowerCase()??"",h=i.map(e=>{let[t,s=""]=e.split("=").map(e=>e.trim());return"charset"===t&&(s=s.toLowerCase(),"us-ascii"===s)?"":`${t}${s?`=${s}`:""}`}).filter(Boolean),u=[...h];return a&&u.push("base64"),(u.length>0||c&&"text/plain"!==c)&&u.unshift(c),`data:${u.join(";")},${a?n.trim():n}${o?`#${o}`:""}`})(e,t);if((e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!zt.has(t)}catch{return!1}})(e))return e;const s=e.startsWith("//");!s&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:"),t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,s="";for(;;){const n=e.exec(r.pathname);if(!n)break;const o=n[0],i=n.index;s+=r.pathname.slice(t,i).replace(/\/{2,}/g,"/"),s+=o,t=i+o.length}s+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=s}if(r.pathname)try{r.pathname=decodeURI(r.pathname).replace(/\\/g,"%5C")}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/");const s=e[e.length-1];Ut(s,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=e.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...r.searchParams.keys()])Ut(e,t.removeQueryParameters)&&r.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(r.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...r.searchParams.keys()])Ut(e,t.keepQueryParameters)||r.searchParams.delete(e);if(t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,"")),t.removeExplicitPort&&r.port&&(r.port="");const n=e;return e=r.toString(),t.removeSingleSlash||"/"!==r.pathname||n.endsWith("/")||""!==r.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),s&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(Nt.format(s),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1});let o=`${e.method}:${n}`;e.body&&void 0!==e.method&&["POST","PATCH","PUT"].includes(e.method)&&(e.body instanceof Pt.Readable?e.cache=!1:o+=`:${Lt.createHash("md5").update(e.body).digest("hex")}`);let i=!1,a=!1;const c=e=>{a=!0;let s=!1,n=()=>{};const c=new Promise(e=>{n=()=>{s||(s=!0,e())}}),h=async s=>{if(i){s.status=s.statusCode;const t=ds.fromObject(i.cachePolicy).revalidatedPolicy(e,s);if(!t.modified){s.resume(),await new Promise(e=>{s.once("end",e)});const e=Ss(t.policy.responseHeaders());(s=new fs({statusCode:i.statusCode,headers:e,body:i.body,url:i.url})).cachePolicy=t.policy,s.fromCache=!0}}let n;s.fromCache||(s.cachePolicy=new ds(e,s,e),s.fromCache=!1),e.cache&&s.cachePolicy.storable()?(n=(e=>{const t=new Pt.PassThrough({autoDestroy:!1});return function(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const s=new Set([...Object.keys(e),...ys]),r={};for(const n of s)n in t||(r[n]={get(){const t=e[n];return"function"==typeof t?t.bind(e):t},set(t){e[n]=t},enumerable:!0,configurable:!1});Object.defineProperties(t,r),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")})}(e,t),e.pipe(t)})(s),(async()=>{try{const t=async function(e){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return ls(await rs(e,void 0))}catch(e){throw void 0!==e.bufferedData&&(e.bufferedData=ls(e.bufferedData)),e}}(s);await Promise.race([c,new Promise(e=>s.once("end",e)),new Promise(e=>s.once("close",e))]);const r=await t;let n={url:s.url,statusCode:s.fromCache?i.statusCode:s.statusCode,body:r,cachePolicy:s.cachePolicy.toObject()},a=e.strictTtl?s.cachePolicy.timeToLive():void 0;if(e.maxTtl&&(a=a?Math.min(a,e.maxTtl):e.maxTtl),this.hooks.size>0)for(const e of this.hooks.keys())n=await this.runHook(e,n,s);await this.cache.set(o,n,a)}catch(e){r.emit("error",new _s(e))}})()):e.cache&&i&&(async()=>{try{await this.cache.delete(o)}catch(e){r.emit("error",new _s(e))}})(),r.emit("response",n??s),"function"==typeof t&&t(n??s)};try{const t=this.cacheRequest(e,h);t.once("error",n),t.once("abort",n),t.once("destroy",n),r.emit("request",t)}catch(e){r.emit("error",new gs(e))}};return(async()=>{const s=async e=>{await Promise.resolve();const s=e.cache?await this.cache.get(o):void 0;if(void 0===s&&!e.forceRefresh)return void c(e);const n=ds.fromObject(s.cachePolicy);if(n.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=Ss(n.responseHeaders()),o=new fs({statusCode:s.statusCode,headers:e,body:s.body,url:s.url});o.cachePolicy=n,o.fromCache=!0,r.emit("response",o),"function"==typeof t&&t(o)}else n.satisfiesWithoutRevalidation(e)&&Date.now()>=n.timeToLive()&&e.forceRefresh?(await this.cache.delete(o),e.headers=n.revalidationHeaders(e),c(e)):(i=s,e.headers=n.revalidationHeaders(e),c(e))},n=e=>r.emit("error",new _s(e));if(this.cache instanceof ms){const e=this.cache;e.once("error",n),r.on("error",()=>e.removeListener("error",n)),r.on("response",()=>e.removeListener("error",n))}try{await s(e)}catch(t){e.automaticFailover&&!a&&c(e),r.emit("error",new _s(t))}})(),r},this.addHook=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,t)},this.removeHook=e=>this.hooks.delete(e),this.getHook=e=>this.hooks.get(e),this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t),this.cache=t instanceof ms?t:new ms("string"==typeof t?{uri:t,namespace:"cacheable-request"}:{store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}};var ks=s(602),xs=e=>{throw TypeError(e)},Cs=(e,t,s)=>t.has(e)||xs("Cannot "+s),Ts=(e,t,s)=>(Cs(e,t,"read from private field"),s?s.call(e):t.get(e)),Rs=(e,t,s)=>t.has(e)?xs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Os=(e,t,s,r)=>(Cs(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),As=(e,t,s)=>(Cs(e,t,"access private method"),s);function*Ps(e){if(e.byteLength<=65536)return void(yield e);let t=0;for(;t<e.byteLength;){const s=Math.min(e.byteLength-t,65536),r=e.buffer.slice(t,t+s);t+=r.byteLength,yield new Uint8Array(r)}}var js=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),Hs=e=>"function"==typeof e;async function*qs(e){for await(const t of e)yield*Ps(t)}var Is=e=>{if((e=>Hs(e[Symbol.asyncIterator]))(e))return qs(e);if((e=>!!e&&"object"==typeof e&&!Array.isArray(e)&&Hs(e.getReader))(e))return qs(async function*(e){const t=e.getReader();for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}(e));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},Ns=e=>Boolean(e&&"object"==typeof e&&Hs(e.constructor)&&"File"===e[Symbol.toStringTag]&&Hs(e.stream)&&null!=e.name),Ls=e=>Boolean(e&&Hs(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&Hs(e.append)&&Hs(e.getAll)&&Hs(e.entries)&&Hs(e[Symbol.iterator]));function Us(e){if("object"!==(e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase())(e))return!1;const t=Object.getPrototypeOf(e);return null==t||t.constructor?.toString?.()===Object.toString()}var zs=e=>String(e).replace(/\r|\n/g,(e,t,s)=>"\r"===e&&"\n"!==s[t+1]||"\n"===e&&"\r"!==s[t-1]?"\r\n":e);function $s(e,t){if("string"==typeof t)for(const[s,r]of Object.entries(e))if(t.toLowerCase()===s.toLowerCase())return r}var Ds,Ms,Bs,Fs,Ws,Vs,Gs,Js,Ks,Qs,Ys,Xs={enableAdditionalHeaders:!1},Zs={writable:!1,configurable:!1},er=class{constructor(e,t,s){if(Rs(this,Ks),Rs(this,Ds,"\r\n"),Rs(this,Ms),Rs(this,Bs),Rs(this,Fs,"-".repeat(2)),Rs(this,Ws,new TextEncoder),Rs(this,Vs),Rs(this,Gs),Rs(this,Js),!Ls(e))throw new TypeError("Expected first argument to be a FormData instance.");let r;if(Us(t)?s=t:r=t,r||(r=`form-data-encoder-${function(){let e=16,t="";for(;e--;)t+="abcdefghijklmnopqrstuvwxyz0123456789"[36*Math.random()|0];return t}()}`),"string"!=typeof r)throw new TypeError("Expected boundary argument to be a string.");if(s&&!Us(s))throw new TypeError("Expected options argument to be an object.");Os(this,Gs,Array.from(e.entries())),Os(this,Js,{...Xs,...s}),Os(this,Ms,Ts(this,Ws).encode(Ts(this,Ds))),Os(this,Bs,Ts(this,Ms).byteLength),this.boundary=r,this.contentType=`multipart/form-data; boundary=${this.boundary}`,Os(this,Vs,Ts(this,Ws).encode(`${Ts(this,Fs)}${this.boundary}${Ts(this,Fs)}${Ts(this,Ds).repeat(2)}`));const n={"Content-Type":this.contentType},o=As(this,Ks,Ys).call(this);var i;o&&(this.contentLength=o,n["Content-Length"]=o),this.headers=(i=Object.freeze(n),new Proxy(i,{get:(e,t)=>$s(e,t),has:(e,t)=>void 0!==$s(e,t)})),Object.defineProperties(this,{boundary:Zs,contentType:Zs,contentLength:Zs,headers:Zs})}*values(){for(const[e,t]of Ts(this,Gs)){const s=Ns(t)?t:Ts(this,Ws).encode(zs(t));yield As(this,Ks,Qs).call(this,e,s),yield s,yield Ts(this,Ms)}yield Ts(this,Vs)}async*encode(){for(const e of this.values())Ns(e)?yield*Is(e.stream()):yield*Ps(e)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};Ds=new WeakMap,Ms=new WeakMap,Bs=new WeakMap,Fs=new WeakMap,Ws=new WeakMap,Vs=new WeakMap,Gs=new WeakMap,Js=new WeakMap,Ks=new WeakSet,Qs=function(e,t){let s="";if(s+=`${Ts(this,Fs)}${this.boundary}${Ts(this,Ds)}`,s+=`Content-Disposition: form-data; name="${js(e)}"`,Ns(t)&&(s+=`; filename="${js(t.name)}"${Ts(this,Ds)}`,s+=`Content-Type: ${t.type||"application/octet-stream"}`),!0===Ts(this,Js).enableAdditionalHeaders){const e=Ns(t)?t.size:t.byteLength;null==e||isNaN(e)||(s+=`${Ts(this,Ds)}Content-Length: ${e}`)}return Ts(this,Ws).encode(`${s}${Ts(this,Ds).repeat(2)}`)},Ys=function(){let e=0;for(const[t,s]of Ts(this,Gs)){const r=Ns(s)?s:Ts(this,Ws).encode(zs(s)),n=Ns(r)?r.size:r.byteLength;if(null==n||isNaN(n))return;e+=As(this,Ks,Qs).call(this,t,r).byteLength,e+=n,e+=Ts(this,Bs)}return String(e+Ts(this,Vs).byteLength)};var tr=s(7975);function sr(e){return mt.nodeStream(e)&&mt.function(e.getBoundary)}function rr(e,t,s){const r={};for(const n of s){const s=(...e)=>{t.emit(n,...e)};r[n]=s,e.on(n,s)}return()=>{for(const[t,s]of Object.entries(r))e.off(t,s)}}var nr=s(7030);const or=Symbol("reentry"),ir=()=>{};class ar extends Error{event;code;constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),this.event=t,this.name="TimeoutError",this.code="ETIMEDOUT"}}const cr=({attemptCount:e,retryOptions:t,error:s,retryAfter:r,computedValue:n})=>{if("RetryError"===s.name)return 1;if(e>t.limit)return 0;const o=t.methods.includes(s.options.method),i=t.errorCodes.includes(s.code),a=s.response&&t.statusCodes.includes(s.response.statusCode);if(!o||!i&&!a)return 0;if(s.response){if(r)return r>n?0:r;if(413===s.response.statusCode)return 0}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c};var hr=s(1692),ur=s(4708),lr=s(610),dr=s(8161);const{Resolver:pr}=lr.promises,fr=Symbol("cacheableLookupCreateConnection"),mr=Symbol("cacheableLookupInstance"),yr=Symbol("expires"),gr="number"==typeof lr.ALL,_r=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},br=()=>{let e=!1,t=!1;for(const s of Object.values(dr.networkInterfaces()))for(const r of s)if(!r.internal&&("IPv6"===r.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},wr=e=>e.catch(e=>{if("ENODATA"===e.code||"ENOTFOUND"===e.code||"ENOENT"===e.code)return[];throw e}),vr={ttl:!0},Sr={all:!0},Er={all:!0,family:4},kr={all:!0,family:6};class xr{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:s=3600,errorTtl:r=.15,resolver:n=new pr,lookup:o=lr.lookup}={}){if(this.maxTtl=t,this.errorTtl=r,this._cache=e,this._resolver=n,this._dnsLookup=o&&(0,tr.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof pr?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,tr.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,tr.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=br(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=s,s>0){const e=setInterval(()=>{this._hostnamesToFallback.clear()},1e3*s);e.unref&&e.unref(),this._fallbackInterval=e}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,s){if("function"==typeof t?(s=t,t={}):"number"==typeof t&&(t={family:t}),!s)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then(e=>{t.all?s(null,e):s(null,e.address,e.family,e.expires,e.ttl,e.source)},s)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let s=await this.query(e);if(6===t.family){const e=s.filter(e=>6===e.family);t.hints&lr.V4MAPPED&&(gr&&t.hints&lr.ALL||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)})(s):s=e}else 4===t.family&&(s=s.filter(e=>4===e.family));if(t.hints&lr.ADDRCONFIG){const{_iface:e}=this;s=s.filter(t=>6===t.family?e.has6:e.has4)}if(0===s.length){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?s:s[0]}async query(e){let t="cache",s=await this._cache.get(e);if(s&&this.stats.cache++,!s){const r=this._pending[e];if(r)this.stats.cache++,s=await r;else{t="query";const r=this.queryAndCache(e);this._pending[e]=r,this.stats.query++;try{s=await r}finally{delete this._pending[e]}}}return s=s.map(e=>({...e,source:t})),s}async _resolve(e){const[t,s]=await Promise.all([wr(this._resolve4(e,vr)),wr(this._resolve6(e,vr))]);let r=0,n=0,o=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,r=Math.max(r,e.ttl);for(const e of s)e.family=6,e.expires=i+1e3*e.ttl,n=Math.max(n,e.ttl);return o=t.length>0?s.length>0?Math.min(r,n):r:n,{entries:[...t,...s],cacheTtl:o}}async _lookup(e){try{const[t,s]=await Promise.all([wr(this._dnsLookup(e,Er)),wr(this._dnsLookup(e,kr))]);return{entries:[...t,...s],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,s){if(this.maxTtl>0&&s>0){s=1e3*Math.min(s,this.maxTtl),t[yr]=Date.now()+s;try{await this._cache.set(e,t,s)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}r=this._cache,Symbol.iterator in r&&this._tick(s)}var r}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Sr);let t=await this._resolve(e);0===t.entries.length&&this._dnsLookup&&(t=await this._lookup(e),0!==t.entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));const s=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,s),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[s,r]of this._cache){const n=r[yr];t>=n?this._cache.delete(s):n<e&&(e=n)}e!==1/0&&this._tick(e-t)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(_r(e),fr in e)throw new Error("CacheableLookup has been already installed");e[fr]=e.createConnection,e[mr]=this,e.createConnection=(t,s)=>("lookup"in t||(t.lookup=this.lookup),e[fr](t,s))}uninstall(e){if(_r(e),e[fr]){if(e[mr]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[fr],delete e[fr],delete e[mr]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=br(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}var Cr=s(5769);const[Tr,Rr]=Ot.versions.node.split(".").map(Number),Or=new Map;let Ar;const Pr={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate({response:e}){const t=e.headers.link;if("string"!=typeof t||""===t.trim())return!1;const s=function(e){const t=[],s=e.split(",");for(const r of s){const[s,...n]=r.split(";"),o=s.trim();if("<"!==o[0]||">"!==o.at(-1))throw new Error(`Invalid format of the Link header reference: ${o}`);const i=o.slice(1,-1),a={};if(0===n.length)throw new Error(`Unexpected end of Link header parameters: ${n.join(";")}`);for(const t of n){const s=t.trim(),r=s.indexOf("=");if(-1===r)throw new Error(`Failed to parse Link header: ${e}`);const n=s.slice(0,r).trim(),o=s.slice(r+1).trim();a[n]=o}t.push({reference:i,parameters:a})}return t}(t),r=s.find(e=>"next"===e.parameters.rel||'"next"'===e.parameters.rel);return!!r&&{url:new URL(r.reference,e.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!1},jr=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter(e=>"number"==typeof e);if(t.length>0)return Math.min(...t)},Hr=(e,t,s)=>{const r=e.hooks?.init;if(r)for(const e of r)e(t,s)};class qr{_unixOptions;_internals;_merging;_init;constructor(e,t,s){if(tt([mt.string,mt.urlInstance,mt.object,mt.undefined],e),tt([mt.object,mt.undefined],t),tt([mt.object,mt.undefined],s),e instanceof qr||t instanceof qr)throw new TypeError("The defaults must be passed as the third argument");this._internals=(e=>{const{hooks:t,retry:s}=e,r={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...s,errorCodes:[...s.errorCodes],methods:[...s.methods],statusCodes:[...s.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return void 0!==r.url&&(r.prefixUrl=""),r})(s?._internals??s??Pr),this._init=[...s?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(mt.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(void 0!==t?.url){if(void 0!==e)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");this.url=t.url}else void 0!==e&&(this.url=e)}}catch(e){throw e.options=this,e}}merge(e){if(e)if(e instanceof qr)for(const t of e._init)this.merge(t);else{e=(e=>{const{hooks:t,retry:s}=e,r={...e};return mt.object(e.context)&&(r.context={...e.context}),mt.object(e.cacheOptions)&&(r.cacheOptions={...e.cacheOptions}),mt.object(e.https)&&(r.https={...e.https}),mt.object(e.cacheOptions)&&(r.cacheOptions={...r.cacheOptions}),mt.object(e.agent)&&(r.agent={...e.agent}),mt.object(e.headers)&&(r.headers={...e.headers}),mt.object(s)&&(r.retry={...s},mt.array(s.errorCodes)&&(r.retry.errorCodes=[...s.errorCodes]),mt.array(s.methods)&&(r.retry.methods=[...s.methods]),mt.array(s.statusCodes)&&(r.retry.statusCodes=[...s.statusCodes])),mt.object(e.timeout)&&(r.timeout={...e.timeout}),mt.object(t)&&(r.hooks={...t},mt.array(t.init)&&(r.hooks.init=[...t.init]),mt.array(t.beforeRequest)&&(r.hooks.beforeRequest=[...t.beforeRequest]),mt.array(t.beforeError)&&(r.hooks.beforeError=[...t.beforeError]),mt.array(t.beforeRedirect)&&(r.hooks.beforeRedirect=[...t.beforeRedirect]),mt.array(t.beforeRetry)&&(r.hooks.beforeRetry=[...t.beforeRetry]),mt.array(t.afterResponse)&&(r.hooks.afterResponse=[...t.afterResponse])),mt.object(e.pagination)&&(r.pagination={...e.pagination}),r})(e),Hr(this,e,this),Hr(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(const s in e){if("mutableDefaults"===s||"handlers"===s)continue;if("url"===s)continue;if(!(s in this))throw new Error(`Unexpected option: ${s}`);const r=e[s];void 0!==r&&(this[s]=r,t=!0)}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){tt([mt.function,mt.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){at(e);for(const t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);tt([mt.object,mt.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){rt(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){at(e);for(const t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);tt([mt.number,mt.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(tt([mt.string,mt.urlInstance],e),""!==e){if((e=e.toString()).endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}else this._internals.prefixUrl=""}get body(){return this._internals.body}set body(e){tt([mt.string,mt.buffer,mt.nodeStream,mt.generator,mt.asyncGenerator,Ls,mt.undefined],e),mt.nodeStream(e)&&ht(e.readable),void 0!==e&&(ut(this._internals.form),ut(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){tt([mt.plainObject,mt.undefined],e),void 0!==e&&(ut(this._internals.body),ut(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){void 0!==e&&(ut(this._internals.body),ut(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(tt([mt.string,mt.urlInstance,mt.undefined],e),void 0===e)return void(this._internals.url=void 0);if(mt.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");const t=`${this.prefixUrl}${e.toString()}`,s=new URL(t);if(this._internals.url=s,"unix:"===s.protocol&&(s.href=`http://unix${s.pathname}${s.search}`),"http:"!==s.protocol&&"https:"!==s.protocol){const e=new Error(`Unsupported protocol: ${s.protocol}`);throw e.code="ERR_UNSUPPORTED_PROTOCOL",e}if(this._internals.username&&(s.username=this._internals.username,this._internals.username=""),this._internals.password&&(s.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(s.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"===s.hostname){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${s.pathname}${s.search}`);if(e?.groups){const{socketPath:t,path:s}=e.groups;this._unixOptions={socketPath:t,path:s,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(tt([mt.object,mt.undefined],e),void 0===e)return void(this._internals.cookieJar=void 0);let{setCookie:t,getCookieString:s}=e;nt(t),nt(s),4===t.length&&0===s.length?(t=(0,tr.promisify)(t.bind(e)),s=(0,tr.promisify)(s.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:s}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){it(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){rt(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new URLSearchParams),this._internals.searchParams)}set searchParams(e){tt([mt.string,mt.object,mt.undefined],e);const t=this._internals.url;if(void 0===e)return this._internals.searchParams=void 0,void(t&&(t.search=""));const s=this.searchParams;let r;if(mt.string(e))r=new URLSearchParams(e);else if(e instanceof URLSearchParams)r=e;else{!function(e){for(const t in e){const s=e[t];tt([mt.string,mt.number,mt.boolean,mt.null,mt.undefined],s)}}(e),r=new URLSearchParams;for(const t in e){const n=e[t];null===n?r.append(t,""):void 0===n?s.delete(t):r.append(t,n)}}if(this._merging){for(const e of r.keys())s.delete(e);for(const[e,t]of r)s.append(e,t)}else t?t.search=s.toString():this._internals.searchParams=s}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){tt([mt.function,mt.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){tt([mt.object,mt.boolean,mt.undefined],e),this._internals.dnsCache=!0===e?Ar||(Ar=new xr,Ar):!1===e?void 0:e}get context(){return this._internals.context}set context(e){it(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){it(e);for(const t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);const s=t,r=e[s];if(tt([mt.array,mt.undefined],r),r)for(const e of r)nt(e);if(this._merging)r&&this._internals.hooks[s].push(...r);else{if(!r)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...r]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){tt([mt.boolean,mt.function],e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){ot(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){tt([mt.object,mt.string,mt.boolean,mt.undefined],e),this._internals.cache=!0===e?Or:!1===e?void 0:e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){rt(e),this._internals.throwHttpErrors=e}get username(){const e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){ct(e);const t=this._internals.url,s=encodeURIComponent(e);t?t.username=s:this._internals.username=s}get password(){const e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){ct(e);const t=this._internals.url,s=encodeURIComponent(e);t?t.password=s:this._internals.password=s}get http2(){return this._internals.http2}set http2(e){rt(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){rt(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){at(e),this._merging?Object.assign(this._internals.headers,ps(e)):this._internals.headers=ps(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){rt(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(void 0!==e&&4!==e&&6!==e)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){nt(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){nt(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(at(e),tt([mt.function,mt.undefined],e.calculateDelay),tt([mt.number,mt.undefined],e.maxRetryAfter),tt([mt.number,mt.undefined],e.limit),tt([mt.array,mt.undefined],e.methods),tt([mt.array,mt.undefined],e.statusCodes),tt([mt.array,mt.undefined],e.errorCodes),tt([mt.number,mt.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(const t in e)if(!(t in this._internals.retry))throw new Error(`Unexpected retry option: ${t}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map(e=>e.toUpperCase()))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){tt([mt.string,mt.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){ct(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){tt([mt.function,mt.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){at(e),tt([mt.boolean,mt.undefined],e.shared),tt([mt.number,mt.undefined],e.cacheHeuristic),tt([mt.number,mt.undefined],e.immutableMinTimeToLive),tt([mt.boolean,mt.undefined],e.ignoreCargoCult);for(const t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){at(e),tt([mt.boolean,mt.undefined],e.rejectUnauthorized),tt([mt.function,mt.undefined],e.checkServerIdentity),tt([mt.string,mt.object,mt.array,mt.undefined],e.certificateAuthority),tt([mt.string,mt.object,mt.array,mt.undefined],e.key),tt([mt.string,mt.object,mt.array,mt.undefined],e.certificate),tt([mt.string,mt.undefined],e.passphrase),tt([mt.string,mt.buffer,mt.array,mt.undefined],e.pfx),tt([mt.array,mt.undefined],e.alpnProtocols),tt([mt.string,mt.undefined],e.ciphers),tt([mt.string,mt.buffer,mt.undefined],e.dhparam),tt([mt.string,mt.undefined],e.signatureAlgorithms),tt([mt.string,mt.undefined],e.minVersion),tt([mt.string,mt.undefined],e.maxVersion),tt([mt.boolean,mt.undefined],e.honorCipherOrder),tt([mt.number,mt.undefined],e.tlsSessionLifetime),tt([mt.string,mt.undefined],e.ecdhCurve),tt([mt.string,mt.buffer,mt.array,mt.undefined],e.certificateRevocationLists);for(const t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(null===e)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");tt([mt.string,mt.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){rt(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){rt(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(void 0!==e){if("text"!==e&&"buffer"!==e&&"json"!==e)throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}else this._internals.responseType="text"}get pagination(){return this._internals.pagination}set pagination(e){it(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){rt(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){tt([mt.number,mt.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){rt(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,tr.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;let t;t="https:"===e.url.protocol?e.http2?e.agent:e.agent.https:e.agent.http;const{https:s}=e;let{pfx:r}=s;return mt.array(r)&&mt.plainObject(r[0])&&(r=r.map(e=>({buf:e.buffer,passphrase:e.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:s.alpnProtocols,ca:s.certificateAuthority,cert:s.certificate,key:s.key,passphrase:s.passphrase,pfx:s.pfx,rejectUnauthorized:s.rejectUnauthorized,checkServerIdentity:s.checkServerIdentity??hr.checkServerIdentity,ciphers:s.ciphers,honorCipherOrder:s.honorCipherOrder,minVersion:s.minVersion,maxVersion:s.maxVersion,sigalgs:s.signatureAlgorithms,sessionTimeout:s.tlsSessionLifetime,dhparam:s.dhparam,ecdhCurve:s.ecdhCurve,crl:s.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:t,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?jr(e):void 0,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){const e=this._internals.url;if(e){if("https:"===e.protocol){if(this._internals.http2){if(Tr<15||15===Tr&&Rr<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw e.code="EUNSUPPORTED",e}return Cr.auto}return ur.request}return jt.request}}freeze(){const e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}}const Ir=e=>{const{statusCode:t}=e,{followRedirect:s}=e.request.options,r="function"==typeof s?s(e):s;return t>=200&&t<=(r?299:399)||304===t};class Nr extends wt{constructor(e,t){const{options:s}=t.request;super(`${e.message} in "${s.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}const Lr=(e,t,s,r)=>{const{rawBody:n}=e;try{if("text"===t)return n.toString(r);if("json"===t)return 0===n.length?"":s(n.toString(r));if("buffer"===t)return n}catch(t){throw new Nr(t,e)}throw new Nr({message:`Unknown body type '${t}'`,name:"Error"},e)};function Ur(e){return"unix:"===e.protocol||"unix"===e.hostname}const zr=mt.string(Ot.versions.brotli),$r=new Set(["GET","HEAD"]),Dr=new class{weakMap;map;constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}},Mr=new Set([300,301,302,303,304,307,308]),Br=["socket","connect","continue","information","upgrade"],Fr=()=>{};class Wr extends Pt.Duplex{["constructor"];_noPipe;options;response;requestUrl;redirectUrls;retryCount;_stopRetry;_downloadedSize;_uploadedSize;_stopReading;_pipedServerResponses;_request;_responseSize;_bodySize;_unproxyEvents;_isFromCache;_cannotHaveBody;_triggerRead;_cancelTimeouts;_removeListeners;_nativeResponse;_flushed;_aborted;_requestInitialized;constructor(e,t,s){super({autoDestroy:!1,highWaterMark:0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=Fr,this._triggerRead=!1,this._cancelTimeouts=Fr,this._removeListeners=Fr,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=Fr,this.on("pipe",e=>{e?.headers&&Object.assign(this.options.headers,e.headers)}),this.on("newListener",e=>{if("retry"===e&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new qr(e,t,s),!this.options.url){if(""===this.options.prefixUrl)throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;return t&&(this.options=t),void(this.flush=async()=>{this.flush=async()=>{},this.destroy(e)})}const{body:r}=this.options;if(mt.nodeStream(r)&&r.once("error",e=>{this._flushed?this._beforeError(new kt(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new kt(e,this))}}),this.options.signal){const e=()=>{"TimeoutError"===this.options.signal?.reason?.name?this.destroy(new xt(this.options.signal.reason,this.timings,this)):this.destroy(new Rt(this))};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal?.removeEventListener("abort",e)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed)return void this._request?.destroy();for(const e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;const{response:t,options:s}=this,r=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof wt||(e=new wt(e.message,e,this));const n=e;(async()=>{if(!t?.readable||t.rawBody||this._request?.socket?.destroyed||(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let o;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3);const i=s.retry;o=await i.calculateDelay({attemptCount:r,retryOptions:i,error:n,retryAfter:e,computedValue:cr({attemptCount:r,retryOptions:i,error:n,retryAfter:e,computedValue:i.maxRetryAfter??s.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){return void this._error(new wt(e.message,e,this))}if(o){if(await new Promise(e=>{const t=setTimeout(e,o);this._stopRetry=()=>{clearTimeout(t),e()}}),this.destroyed)return;try{for(const e of this.options.hooks.beforeRetry)await e(n,this.retryCount+1)}catch(t){return void this._error(new wt(t.message,e,this))}if(this.destroyed)return;return this.destroy(),void this.emit("retry",this.retryCount+1,e,e=>{const t=new Wr(s.url,e,s);return t.retryCount=this.retryCount+1,Ot.nextTick(()=>{t.flush()}),t})}}this._error(n)})()}_read(){this._triggerRead=!0;const{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,s){const r=()=>{this._writeRequest(e,t,s)};this._requestInitialized?r():this._jobs.push(r)}_final(e){const t=()=>{this._request&&!this._request.destroyed?this._request.end(t=>{this._request?._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request?.emit("upload-complete")),e(t))}):e()};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){const{body:e}=this.options;mt.nodeStream(e)&&e.destroy()}this._request&&this._request.destroy(),null===e||mt.undefined(e)||e instanceof wt||(e=new wt(e.message,e,this)),t(e)}pipe(e,t){return e instanceof jt.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof jt.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){const{options:e}=this,{headers:t}=e,s=!mt.undefined(e.form),r=!mt.undefined(e.json),n=!mt.undefined(e.body),o=$r.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=o,s||r||n){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);const r=!mt.string(t["content-type"]);if(n){if(Ls(e.body)){const s=new er(e.body);r&&(t["content-type"]=s.headers["Content-Type"]),"Content-Length"in s.headers&&(t["content-length"]=s.headers["Content-Length"]),e.body=s.encode()}sr(e.body)&&r&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(s){r&&(t["content-type"]="application/x-www-form-urlencoded");const{form:s}=e;e.form=void 0,e.body=new URLSearchParams(s).toString()}else{r&&(t["content-type"]="application/json");const{json:s}=e;e.json=void 0,e.body=e.stringifyJson(s)}const i=await async function(e,t){return t&&"content-length"in t?Number(t["content-length"]):e?mt.string(e)?At.Buffer.byteLength(e):mt.buffer(e)?e.length:sr(e)?(0,tr.promisify)(e.getLength.bind(e))():void 0:0}(e.body,e.headers);mt.undefined(t["content-length"])&&mt.undefined(t["transfer-encoding"])&&!o&&!mt.undefined(i)&&(t["content-length"]=String(i))}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;const{options:t}=this,{url:s}=t;this._nativeResponse=e,t.decompress&&(e=ks(e));const r=e.statusCode,n=e;n.statusMessage=n.statusMessage??jt.STATUS_CODES[r],n.url=t.url.toString(),n.requestUrl=this.requestUrl,n.redirectUrls=this.redirectUrls,n.request=this,n.isFromCache=this._nativeResponse.fromCache??!1,n.ip=this.ip,n.retryCount=this.retryCount,n.ok=Ir(n),this._isFromCache=n.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=n,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",t=>{this._aborted=!0,e.destroy(),this._beforeError(new Ct(t,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new Ct({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);const o=e.headers["set-cookie"];if(mt.object(t.cookieJar)&&o){let e=o.map(async e=>t.cookieJar.setCookie(e,s.toString()));t.ignoreInvalidCookies&&(e=e.map(async e=>{try{await e}catch{}}));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(!this.isAborted){if(e.headers.location&&Mr.has(r)&&("function"==typeof t.followRedirect?t.followRedirect(n):t.followRedirect)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects)return void this._beforeError(new vt(this));this._request=void 0;const o=new qr(void 0,void 0,this.options),i=303===r&&"GET"!==o.method&&"HEAD"!==o.method,a=307!==r&&308!==r,c=o.methodRewriting&&a;(i||c)&&(o.method="GET",o.body=void 0,o.json=void 0,o.form=void 0,delete o.headers["content-length"]);try{const t=At.Buffer.from(e.headers.location,"binary").toString(),r=new URL(t,s);if(!Ur(s)&&Ur(r))return void this._beforeError(new wt("Cannot redirect to UNIX socket",{},this));r.hostname!==s.hostname||r.port!==s.port?("host"in o.headers&&delete o.headers.host,"cookie"in o.headers&&delete o.headers.cookie,"authorization"in o.headers&&delete o.headers.authorization,(o.username||o.password)&&(o.username="",o.password="")):(r.username=o.username,r.password=o.password),this.redirectUrls.push(r),o.prefixUrl="",o.url=r;for(const e of o.hooks.beforeRedirect)await e(o,n);this.emit("redirect",o,n),this.options=o,await this._makeRequest()}catch(e){return void this._beforeError(e)}return}if(t.isStream&&t.throwHttpErrors&&!Ir(n))this._beforeError(new St(n));else{if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe)return void(await this._setRawBody()&&this.emit("response",e));this.emit("response",e);for(const s of this._pipedServerResponses)if(!s.headersSent){for(const r in e.headers){const n=!t.decompress||"content-encoding"!==r,o=e.headers[r];n&&s.setHeader(r,o)}s.statusCode=r}}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{const t=await e.toArray(),s=C(t.at(0))?At.Buffer.concat(t):At.Buffer.from(t.join(""));if(!this.isAborted)return this.response.rawBody=s,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:s,url:r}=t;(e=>{if(e.timings)return e.timings;const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const s=e=>{e.once(Ht.errorMonitor,()=>{t.error=Date.now(),t.phases.total=t.error-t.start})};s(e);const r=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",r);const n=e=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,qt.types.isProxy(e))return;const s=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",s),It(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",s),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);const o=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};e.writableFinished?o():e.prependOnceListener("finish",o),e.prependOnceListener("response",n=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,n.timings=t,s(n),n.prependOnceListener("end",()=>{e.off("abort",r),n.off("aborted",r),t.phases.total||(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)}),n.prependOnceListener("aborted",r)})})(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=function(e,t,s){if(or in e)return ir;e[or]=!0;const r=[],{once:n,unhandleAll:o}=function(){const e=[];return{once(t,s,r){t.once(s,r),e.push({origin:t,event:s,fn:r})},unhandleAll(){for(const t of e){const{origin:e,event:s,fn:r}=t;e.removeListener(s,r)}e.length=0}}}(),i=new Map,a=(e,t,s)=>{const n=setTimeout(t,e,e,s);n.unref?.();const o=()=>{i.set(s,!0),clearTimeout(n)};return r.push(o),o},{host:c,hostname:h}=s,u=(t,s)=>{setTimeout(()=>{i.has(s)||e.destroy(new ar(t,s))},0)},l=()=>{for(const e of r)e();o()};if(e.once("error",t=>{if(l(),0===e.listenerCount("error"))throw t}),void 0!==t.request){const s=a(t.request,u,"request");n(e,"response",e=>{n(e,"end",s)})}if(void 0!==t.socket){const{socket:s}=t,n=()=>{u(s,"socket")};e.setTimeout(s,n),r.push(()=>{e.removeListener("timeout",n)})}const d=void 0!==t.lookup,p=void 0!==t.connect,f=void 0!==t.secureConnect,m=void 0!==t.send;return(d||p||f||m)&&n(e,"socket",r=>{const{socketPath:o}=e;if(r.connecting){const e=Boolean(o??0!==nr.isIP(h??c??""));if(d&&!e&&void 0===r.address().address){const e=a(t.lookup,u,"lookup");n(r,"lookup",e)}if(p){const s=()=>a(t.connect,u,"connect");e?n(r,"connect",s()):n(r,"lookup",e=>{null===e&&n(r,"connect",s())})}f&&"https:"===s.protocol&&n(r,"connect",()=>{const e=a(t.secureConnect,u,"secureConnect");n(r,"secureConnect",e)})}if(m){const s=()=>a(t.send,u,"send");r.connecting?n(r,"connect",()=>{n(e,"upload-complete",s())}):n(e,"upload-complete",s())}}),void 0!==t.response&&n(e,"upload-complete",()=>{const s=a(t.response,u,"response");n(e,"response",s)}),void 0!==t.read&&n(e,"response",e=>{const s=a(t.read,u,"read");n(e,"end",s)}),l}(e,s,r);const n=t.cache?"cacheableResponse":"response";e.once(n,e=>{this._onResponse(e)}),e.once("error",t=>{this._aborted=!0,e.destroy(),t=t instanceof ar?new xt(t,this.timings,this):new wt(t.message,t,this),this._beforeError(t)}),this._unproxyEvents=rr(e,this,Br),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((t,s)=>{super.write(e,e=>{e?s(e):t()})})}_sendBody(){const{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;mt.nodeStream(e)?e.pipe(t):mt.generator(e)||mt.asyncGenerator(e)?(async()=>{try{for await(const t of e)await this._asyncWrite(t);super.end()}catch(e){this._beforeError(e)}})():mt.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,()=>{}),t.end())}_prepareCache(e){if(!Dr.has(e)){const t=new Es((e,t)=>{const s=e._request(e,t);return mt.promise(s)&&(s.once=(e,t)=>{if("error"===e)(async()=>{try{await s}catch(e){t(e)}})();else{if("abort"!==e&&"destroy"!==e)throw new Error(`Unknown HTTP2 promise event: ${e}`);(async()=>{try{(await s).once(e,t)}catch{}})()}return s}),s},e);Dr.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise((s,r)=>{let n;Object.assign(t,function(e){const t={protocol:e.protocol,hostname:mt.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return mt.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}(e));const o=Dr.get(t.cache)(t,async e=>{if(e._readableState.autoDestroy=!1,n){const t=()=>{e.req&&(e.complete=e.req.res.complete)};e.prependOnceListener("end",t),t(),(await n).emit("cacheableResponse",e)}s(e)});o.once("error",r),o.once("request",async e=>{n=e,s(n)})})}async _makeRequest(){const{options:e}=this,{headers:t,username:s,password:r}=e,n=e.cookieJar;for(const e in t)if(mt.undefined(t[e]))delete t[e];else if(mt.null(t[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(e.decompress&&mt.undefined(t["accept-encoding"])&&(t["accept-encoding"]=zr?"gzip, deflate, br":"gzip, deflate"),s||r){const e=At.Buffer.from(`${s}:${r}`).toString("base64");t.authorization=`Basic ${e}`}if(n){const s=await n.getCookieString(e.url.toString());mt.nonEmptyString(s)&&(t.cookie=s)}let o;e.prefixUrl="";for(const t of e.hooks.beforeRequest){const s=await t(e);if(!mt.undefined(s)){o=()=>s;break}}o||=e.getRequestFunction();const i=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));const a=e.cache?this._createCacheableRequest:o;try{let t=a(i,this._requestOptions);mt.promise(t)&&(t=await t),mt.undefined(t)&&(t=e.getFallbackRequestFunction()(i,this._requestOptions),mt.promise(t)&&(t=await t)),(c=t).writable&&!c.writableEnded?this._onRequest(t):this.writable?(this.once("finish",()=>{this._onResponse(t)}),this._sendBody()):this._onResponse(t)}catch(e){if(e instanceof _s)throw new Et(e,this);throw e}var c}async _error(e){try{if(e instanceof St&&!this.options.throwHttpErrors);else for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new wt(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,s){this._request&&!this._request.destroyed&&this._request.write(e,t,r=>{if(!r&&!this._request.destroyed){this._uploadedSize+=At.Buffer.byteLength(e,t);const s=this.uploadProgress;s.percent<1&&this.emit("uploadProgress",s)}s(r)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return e=this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return e=this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class Vr extends wt{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}const Gr=["request","response","redirect","uploadProgress","downloadProgress"];function Jr(e){let t,s,r;const n=new yt.EventEmitter,o=new bt((i,a,c)=>{c(()=>{t.destroy()}),c.shouldReject=!1,c(()=>{a(new Vr(t))});const h=u=>{c(()=>{});const l=e??new Wr(void 0,void 0,r);l.retryCount=u,l._noPipe=!0,t=l,l.once("response",async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase(),r="gzip"===t||"deflate"===t||"br"===t,{options:n}=l;if(r&&!n.decompress)e.body=e.rawBody;else try{e.body=Lr(e,n.responseType,n.parseJson,n.encoding)}catch(t){try{e.body=e.rawBody.toString()}catch(t){return void l._beforeError(new Nr(t,e))}if(Ir(e))return void l._beforeError(t)}try{const t=n.hooks.afterResponse;for(const[s,r]of t.entries())if(e=await r(e,async e=>{throw n.merge(e),n.prefixUrl="",e.url&&(n.url=e.url),n.hooks.afterResponse=n.hooks.afterResponse.slice(0,s),new Tt(l)}),!mt.object(e)||!mt.number(e.statusCode)||mt.nullOrUndefined(e.body))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(e){return void l._beforeError(e)}s=e,Ir(e)?(l.destroy(),i(l.options.resolveBodyOnly?e.body:e)):l._beforeError(new St(e))});const d=e=>{if(o.isCanceled)return;const{options:t}=l;if(e instanceof St&&!t.throwHttpErrors){const{response:t}=e;return l.destroy(),void i(l.options.resolveBodyOnly?t.body:t)}a(e)};l.once("error",d);const p=l.options?.body;l.once("retry",(t,s)=>{e=void 0;const n=l.options.body;if(p===n&&mt.nodeStream(n))return s.message="Cannot retry with consumed body stream",void d(s);r=l.options,h(t)}),rr(l,n,Gr),mt.undefined(e)&&l.flush()};h(0)});o.on=(e,t)=>(n.on(e,t),o),o.off=(e,t)=>(n.off(e,t),o);const i=e=>{const t=(async()=>{await o;const{options:t}=s.request;return Lr(s,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)),t};return o.json=()=>{if(t.options){const{headers:e}=t.options;t.writableFinished||"accept"in e||(e.accept="application/json")}return i("json")},o.buffer=()=>i("buffer"),o.text=()=>i("text"),o}const Kr=e=>mt.function(e),Qr=["get","post","put","patch","head","delete"],Yr=e=>{e={options:new qr(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});const t=(t,s,r=e.options)=>{const n=new Wr(t,s,r);let o;const i=e=>(n.options=e,n._noPipe=!e?.isStream,n.flush(),e?.isStream?n:(o||=Jr(n),o));let a=0;const c=t=>{const s=(e.handlers[a++]??i)(t,c);if(mt.promise(s)&&!n.options?.isStream&&(o||=Jr(n),s!==o)){const e=Object.getOwnPropertyDescriptors(o);for(const t in e)t in s&&delete e[t];Object.defineProperties(s,e),s.cancel=o.cancel}return s};return c(n.options)};t.extend=(...t)=>{const s=new qr(void 0,void 0,e.options),r=[...e.handlers];let n;for(const e of t)Kr(e)?(s.merge(e.defaults.options),r.push(...e.defaults.handlers),n=e.defaults.mutableDefaults):(s.merge(e),e.handlers&&r.push(...e.handlers),n=e.mutableDefaults);return Yr({options:s,handlers:r,mutableDefaults:Boolean(n)})};const s=async function*(s,n){let o=new qr(s,n,e.options);o.resolveBodyOnly=!1;const{pagination:i}=o;nt(i.transform),nt(i.shouldContinue),nt(i.filter),nt(i.paginate),ot(i.countLimit),ot(i.requestLimit),ot(i.backoff);const a=[];let{countLimit:c}=i,h=0;for(;h<i.requestLimit;){0!==h&&await(0,r.setTimeout)(i.backoff);const e=await t(void 0,void 0,o),s=await i.transform(e),n=[];st(s);for(const e of s)if(i.filter({item:e,currentItems:n,allItems:a})){if(!i.shouldContinue({item:e,currentItems:n,allItems:a}))return;if(yield e,i.stackAllItems&&a.push(e),n.push(e),--c<=0)return}const u=i.paginate({response:e,currentItems:n,allItems:a});if(!1===u)return;u===e.request.options?o=e.request.options:(o.merge(u),tt([mt.urlInstance,mt.undefined],u.url),void 0!==u.url&&(o.prefixUrl="",o.url=u.url)),h++}};(t.paginate=s).all=async(e,t)=>{const r=[];for await(const n of s(e,t))r.push(n);return r},t.paginate.each=s,t.stream=(e,s)=>t(e,{...s,isStream:!0});for(const e of Qr)t[e]=(s,r)=>t(s,{...r,method:e}),t.stream[e]=(s,r)=>t(s,{...r,method:e,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},Xr=Yr({options:new qr,handlers:[],mutableDefaults:!1})},9350:e=>{"use strict";e.exports=e=>{const{username:t,password:s}=e.proxyOptions.url;if(t||s){const e=`${t}:${s}`,r=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":r,authorization:r}}return{}}},9420:e=>{"use strict";e.exports=(e,t,s)=>{if(!s.some(e=>"string"==typeof e?typeof t===e:t instanceof e)){const r=s.map(e=>"string"==typeof e?e:e.name);throw new TypeError(`Expected '${e}' to be a type of ${r.join(" or ")}, got ${typeof t}`)}}},9879:(e,t,s)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:n}=s(3876),o=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(void 0===t)throw new r(t,e);if(o.test(t))throw new n("header content",e)}}};