(()=>{var e={56:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlaydeckConfigFields=function(){return[{type:"static-text",id:"disclaimer",label:"Information",width:9,value:"Since version 3.6b6 module uses bidirectional WebSocket connection with Playdeck. If some troubles => you can use TCP connection. You can see WebSockets port in your playdeck installation directory .\\html\\WebSocketSDK\\Version.js "},{type:"dropdown",id:"version",label:"Version",width:3,allowCustom:!1,choices:r.PlaydeckVersion.configVersions,default:r.PlaydeckVersion.configVersions[0].id},{type:"textinput",label:"Playdeck IP",id:"host",width:6,default:"127.0.0.1",required:!0,regex:i.Regex.HOSTNAME},{type:"checkbox",label:"Advanced (Manual Mode)",id:"isAdvanced",width:12,default:!1},{type:"static-text",id:"advancedDisclaimer",label:"Disclaimer",width:9,value:'For more detailed settings, use the "Advanced" switch. This is manual mode! Make changes only if you are sure that they are necessary. These settings will override the default settings for the version you selected (if a particular connection type is not supported in the selected version, it will be ignored).',isVisible:e=>!1===e.isAdvanced},{type:"static-text",id:"infoWS",label:"WebSockets",width:12,value:"WebSockets enabled by default",isVisible:(e,t)=>{const n=e,i=-1===t.notSupported.indexOf(n.version);return!0===n.isAdvanced&&i},isVisibleData:{notSupported:r.PlaydeckVersion.noWS}},{type:"checkbox",label:"Enable WS Connection",id:"isWS",width:6,default:!0,isVisible:(e,t)=>{const n=e,i=-1===t.notSupported.indexOf(n.version);return!0===n.isAdvanced&&i},isVisibleData:{notSupported:r.PlaydeckVersion.noWS}},{type:"number",label:"WebSocket Port (Default: 11411)",id:"wsPort",width:6,default:11411,required:!1,min:0,max:65535,isVisible:(e,t)=>{const n=e,i=-1===t.notSupported.indexOf(n.version);return!0===n.isAdvanced&&i&&!0===n.isWS},isVisibleData:{notSupported:r.PlaydeckVersion.noWS}},{type:"static-text",id:"infoCommands",label:"TCP COMMANDS",width:12,value:'To enable remote control in Playdeck, go to: Settings -> All Settings -> Remote Control -> Incoming. And enable "Remote control via TCP"',isVisible:e=>!0===e.isAdvanced},{type:"checkbox",label:"Enable TCP Commands",id:"isTCPCommands",width:6,default:!1,isVisible:e=>!0===e.isAdvanced},{type:"number",label:"TCP Port (Default: 11375)",id:"tcpPortCommands",width:6,default:11375,required:!1,min:0,max:65535,isVisible:e=>{const t=e;return!0===t.isAdvanced&&!0===t.isTCPCommands}},{type:"static-text",id:"eventInfo",label:"TCP EVENTS",width:12,value:'To enable feedback in Playdeck, go to: Settings -> All Settings -> Remote Control -> Outgoing. And enable "TCP Events". Warning: Enabling this option may result in a reduction in the amount of feedback data due to the fact that the feedback connection will be forcef to TCP instead of WebSocket (if it available in your version).',isVisible:(e,t)=>{const n=e,i=-1===t.notSupported.indexOf(n.version);return!0===n.isAdvanced&&i},isVisibleData:{notSupported:r.PlaydeckVersion.noEvents}},{type:"checkbox",label:"Enable TCP Events",id:"isTCPEvents",width:6,default:!1,isVisible:(e,t)=>{const n=e,i=-1===t.notSupported.indexOf(n.version);return!0===n.isAdvanced&&i},isVisibleData:{notSupported:r.PlaydeckVersion.noEvents}},{type:"number",label:"TCP Port (Default: 11376)",id:"tcpPortEvents",width:6,default:11376,required:!1,min:0,max:65535,isVisible:(e,t)=>{const n=e,i=-1===t.notSupported.indexOf(n.version);return!0===n.isAdvanced&&i&&!0===n.isTCPEvents},isVisibleData:{notSupported:r.PlaydeckVersion.noEvents}},{type:"static-text",id:"footer",label:"",width:9,value:`<p>Found a bug or have suggestions for improvement? Open an issue on <a href="https://github.com/bitfocus/companion-module-joy-playdeck/issues"">GitHub</a></p><img loading="lazy" decoding="async" src="${s.PlaydeckLogo}" width="30" height="30">   Approved by <a href="https://playdeck.tv/"">Playdeck</a></img>`}]};const i=n(6278),r=n(1562),s=n(801)},84:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckTCPConnection=void 0;const i=n(6278),r=n(3007),s=n(1562);class a extends r.PlaydeckConnection{#e=null;constructor(e,t){super(e,t),this.type=r.ConnectionType.TCP,this.instance?.config.host?this.resolveHostToIPV4(this.instance?.config.host??"").then((e=>{this.host=e.address;const t=this.direction===r.ConnectionDirection.Outgoing?this.instance?.config.tcpPortCommands:this.direction===r.ConnectionDirection.Incoming?this.instance?.config.tcpPortEvents:"";this.instance?.config.isAdvanced&&("number"==typeof t?this.port=t:this.updateStatus(i.InstanceStatus.BadConfig,"Port is not a number",!0)),this.#t()})).catch((e=>{this.log("error",`Resolving host: ${e}`),this.updateStatus(i.InstanceStatus.BadConfig,"Cannot resolve host",!0)})):this.updateStatus(i.InstanceStatus.BadConfig,"Check config!",!0)}#t(){this.updateStatus(i.InstanceStatus.Connecting,`Connecting to TCP: ${this.host}:${this.port}`,!0),this.#e&&this.destroy();try{void 0!==this.host&&void 0!==this.port?(this.#e=new i.TCPHelper(this.host,this.port),this.#e.on("status_change",((e,t)=>{switch(this.log("debug",`Status: ${e}${t?" - Message: "+t:""}`),this.updateStatus(e),e){case i.InstanceStatus.Ok:this.log("info","Connection established."),this.updateStatus(i.InstanceStatus.Ok),this.updateStatus(i.InstanceStatus.Ok,"Connected to Playdeck via TCP",!0),this.emit("started");break;case i.InstanceStatus.Disconnected:this.log("warn","Disconnected."),this.reconnect()}})),this.#e.on("data",(e=>{this.#n(e.toString().split("\r\n")[0])})),this.#e.on("error",(e=>{this.log("error",`Error: ${e.message}`),this.lastErrorMessage=e.message}))):this.log("error","Host or port is undefined")}catch(e){this.log("error",`TCP initialization error: ${e}`),this.reconnect()}}#n(e){this.log("debug",`Recieved data: ${e}`);const t=e.toLocaleLowerCase();if(t.startsWith("playdeck")){const e=t.split("playdeck ")[1];this.log("debug",`Recieved version info: ${e}`),this.instance?.version&&s.PlaydeckVersion.compareTwoVersions(e,this.instance?.version?.getCurrent())!==s.VersionCompare.Equal&&this.log("warn",`Connected to different version of Playdeck (${e}). Check settings (${this.instance.version.getCurrent()})!`)}else this.emit("event",e)}send(e){this.#e&&(this.log("debug",`Message sent: ${e}`),this.#e.send(e).then((t=>{t&&this.log("info",`Command successfully sent ${e}`)})).catch((e=>{this.log("error",`Error occured: ${e}`)})))}destroy(){this.#e&&(this.log("debug","Destroying..."),this.#e.destroy())}}t.PlaydeckTCPConnection=a},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,s),!0;case 6:return u.fn.call(u.context,t,i,r,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,i);break;case 4:u[c].fn.call(u[c].context,t,i,r);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||r&&!o[l].once||i&&o[l].context!==i)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n,i){let r=(255&e)<<16|(255&t)<<8|255&n;return i&&i>=0&&i<1&&(r+=16777216*Math.round(255*(1-i))),r},t.splitRgb=r,t.splitHsl=function(e){const t=r(e);return(0,i.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=r(e);return(0,i.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=r(e);return(0,i.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()},t.parseEscapeCharacters=function(e){return e.replaceAll("\\n","\n").replaceAll("\\r","\r").replaceAll("\\t","\t").replaceAll("\\f","\f").replaceAll("\\v","\v").replaceAll("\\b","\b").replaceAll("\\\\","\\").replaceAll("\\x00","\0").replaceAll("\\x01","").replaceAll("\\x02","").replaceAll("\\x03","")},t.substituteEscapeCharacters=function(e){return e.replaceAll("\n","\\n").replaceAll("\r","\\r").replaceAll("\t","\\t").replaceAll("\f","\\f").replaceAll("\v","\\v").replaceAll("\b","\\b").replaceAll("\\","\\\\").replaceAll("\0","\\x00").replaceAll("","\\x01").replaceAll("","\\x02").replaceAll("","\\x03")};const i=n(6284);function r(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,i.colord)(e).isValid()){const t=(0,i.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},756:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckConnectionManager=void 0;const i=n(6278),r=n(3007),s=n(84),a=n(1153),o=n(2203),l=n(3963);class c extends o.EventEmitter{outgoing=null;incoming=null;query=null;#i=2e3;#r=null;#s="<projectdata>";#a=!1;#o=!1;#l=!1;#c;constructor(e){super(),this.#c=e,this.#a=!0===this.#c.version?.hasConnection(r.ConnectionType.WS),this.#o=!0===this.#c.version?.hasConnection(r.ConnectionType.TCP,r.ConnectionDirection.Incoming),this.#l=!0===this.#c.version?.isLegacy(),this.#t()}#t(){this.#u("debug","Initializing..."),null!==this.#r&&clearInterval(this.#r);const e=this.#d(),t=this.#p(),n=this.#l?null:r.ConnectionType.WS;this.#u("info",`In: ${e}; Out: ${t}; Query: ${n}`),this.#h(e,t,n),null!==n&&(this.#r=setInterval(this.#f.bind(this),this.#i))}#f(){this.query,i.InstanceStatus.Ok}#h(e,t,n){t===r.ConnectionType.TCP&&(this.outgoing=this.#m(r.ConnectionType.TCP,r.ConnectionDirection.Outgoing)),e===r.ConnectionType.TCP&&(this.incoming=this.#m(r.ConnectionType.TCP,r.ConnectionDirection.Incoming));const s=(0|Number(t===r.ConnectionType.WS))+(Number(e===r.ConnectionType.WS)<<1)+(Number(n===r.ConnectionType.WS)<<2);if(s!==r.ConnectionDirection.None){const i=this.#m(r.ConnectionType.WS,s);t===r.ConnectionType.WS&&(this.outgoing=i),e===r.ConnectionType.WS&&(this.incoming=i),n===r.ConnectionType.WS&&(this.query=i)}null!==this.incoming&&this.incoming.on("started",(()=>{this.emit("incomingStarted",this.incoming),this.isAllConnected()&&this.#b(i.InstanceStatus.Ok)})),null!==this.outgoing&&this.outgoing.on("started",(()=>{this.emit("outgoingStarted",this.outgoing),this.isAllConnected()&&this.#b(i.InstanceStatus.Ok)})),null!==this.query&&this.query.on("started",(()=>{this.emit("queryStarted",this.query),this.#y(),this.isAllConnected()&&this.#b(i.InstanceStatus.Ok)}))}#y(){null!==this.query&&null!==this.#r&&(clearTimeout(this.#r),this.query.send(this.#s),setTimeout((()=>{this.#y()}),this.#i))}#m(e,t){if(this.#u("debug",`Making connection ${e} (${r.ConnectionDirection[t??0]})`),!this.#c||!t)return null;let n=null;switch(e){case r.ConnectionType.TCP:switch(t){case r.ConnectionDirection.Outgoing:n=new s.PlaydeckTCPConnection(this.#c,t);break;case r.ConnectionDirection.Incoming:n=this.#c.version?.isLegacy()?new s.PlaydeckTCPConnection(this.#c,t):new l.PlaydeckTCPServer(this.#c,t)}break;case r.ConnectionType.WS:n=new a.PlaydeckWSConnection(this.#c,t)}return n}#d(){if(!this.#o)return null;if(void 0===this.#c)return null;const e=this.#c.config;if(void 0===e||null==e)return null;if(e.isAdvanced){if(e.isTCPEvents)return r.ConnectionType.TCP;if(this.#a&&e.isWS)return r.ConnectionType.WS}return this.#a?r.ConnectionType.WS:r.ConnectionType.TCP}#p(){if(void 0===this.#c)return null;const e=this.#c.config;if(void 0===e||null==e)return null;if(e.isAdvanced){if(e.isTCPCommands)return r.ConnectionType.TCP;if(this.#a&&e.isWS)return r.ConnectionType.WS}return this.#a?r.ConnectionType.WS:r.ConnectionType.TCP}isAllConnected(){return Number(null!==this.incoming&&this.incoming.status===i.InstanceStatus.Ok)+Number(null!==this.outgoing&&this.outgoing.status===i.InstanceStatus.Ok)+Number(null!==this.query&&this.query.status===i.InstanceStatus.Ok)===Number(null!==this.incoming)+Number(null!==this.outgoing)+Number(null!==this.query)}#g(e){e&&(e.removeAllListeners(),e.destroy())}async destroy(){this.#u("debug","Destroying..."),this.incoming&&this.#g(this.incoming),this.outgoing&&this.#g(this.outgoing),this.query&&this.#g(this.query)}#u(e,t){this.#c?.log(e,`Playdeck Connection Manager: ${t}`)}#b(e,t){this.#c?.updateStatus(e,t||null)}}t.PlaydeckConnectionManager=c},759:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckStatusFactory=void 0;const i=n(1648),r=n(9018);t.PlaydeckStatusFactory=class{static create(e,t){return e?e.isLegacy()?new i.PlaydeckStatusV3(t):new r.PlaydeckStatusV4(t):null}}},801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckLogo=void 0,t.PlaydeckLogo="https://playdeck.tv/wp-content/uploads/Icon_Playdeck_Circle_80px.png"},874:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variableItems=void 0;const i=n(8169),r=n(7457);t.variableItems=[...i.variableItemsV3,...r.variableItemsV4]},1118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const i=n(1635).__importDefault(n(228)),r=n(2203),s=n(8895);class a extends i.default{#v;#k;#C;get isConnected(){return this.#v.isConnected}get isConnecting(){return this.#v.isConnecting}get isDestroyed(){return this.#v.isDestroyed}constructor(e,t,n){super(),this.#v=new s.TCPHelper(e,t,n),this.#k=new o,this.#v._socket.pipe(this.#k),this.#v.on("connect",(()=>this.emit("connect"))),this.#v.on("end",(()=>this.emit("end"))),this.#v.on("error",(e=>this.emit("error",e))),this.#v.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#k.on("iac",((e,t)=>this.emit("iac",e,t))),this.#k.on("sb",(e=>this.emit("sb",e))),this.#k.on("data",(e=>this.emit("data",e))),this.#k.on("drain",(()=>this.emit("drain"))),this.#C=setTimeout((()=>{this.#C=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#v.connect()}async send(e){return this.#v.send(e)}destroy(){this.#v.destroy(),void 0!==this.#C&&(clearTimeout(this.#C),this.#C=void 0),this.#k.removeAllListeners(),this.#k.destroy()}}t.TelnetHelper=a;class o extends r.Transform{#S;#P;#I;constructor(e){super(e),this.#S=Buffer.alloc(0),this.#P=Buffer.alloc(0),this.#I=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#w(e[t]);const i=this.#T();i.length&&this.push(i),n()}#w(e){if(0===this.#I){if(255===e)return void(this.#I=255);this.#S=Buffer.concat([this.#S,Buffer.from([e])])}else if(255===this.#I)switch(e){case 250:case 251:case 252:case 253:case 254:this.#I=e;break;default:this.#I=0}else{if(this.#I>=251&&this.#I<=254){let t;switch(this.#I){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#I=0)}if(250===this.#I){if(240===e)return this.emit("sb",this.#P),this.#I=0,void(this.#P=Buffer.alloc(0));this.#P=Buffer.concat([this.#P,Buffer.from([e])])}}}#T(){const e=this.#S;return this.#S=Buffer.alloc(0),e}}},1153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckWSConnection=void 0;const i=n(6278),r=n(3007);class s extends r.PlaydeckConnection{port=11411;#_=null;constructor(e,t){super(e,t),this.type=r.ConnectionType.WS,this.instance?.config.host?this.resolveHostToIPV4(this.instance?.config.host??"").then((e=>{this.host=e.address,this.instance?.config.isAdvanced&&("number"==typeof this.instance?.config.wsPort?this.port=this.instance?.config.wsPort:this.updateStatus(i.InstanceStatus.BadConfig,"Port is not a number",!0)),this.init()})).catch((e=>{this.log("error",`Resolving host: ${e}`),this.updateStatus(i.InstanceStatus.BadConfig,"Cannot resolve host",!0)})):this.updateStatus(i.InstanceStatus.BadConfig,"Check config!",!0)}init(){const e=`ws://${this.host}:${this.port}`;this.updateStatus(i.InstanceStatus.Connecting,`Connecting to WebSockets: ${e}`,!0),this.#_&&this.destroy();try{this.#_=new WebSocket(e),this.#_.onopen=this.#O.bind(this),this.#_.onerror=this.#N.bind(this),this.#_.onclose=this.#E.bind(this),this.#_.onmessage=this.#A.bind(this)}catch(e){this.log("error",`WebSocket initialization error: ${e}`),this.reconnect()}}#A(e){if(!this.instance)return;const t=e.data,n=this.#D(t);if(null!==n)switch(n.type){case a.Event:this.log("debug",`Recieved Event: ${n.data}`),this.emit("event",n.data);break;case a.Status:this.emit("statusMessage",n.data);break;case a.Project:this.log("debug","Recieved ProjectData"),this.emit("projectData",n.data);break;case a.Permanent:this.log("debug",`Recieved Permanent: ${n.data}`)}}#D(e){if(-1===e.indexOf("|"))return this.log("debug",`Recieved non properly formatted message: ${e}`),null;const t=e.split("|");return{type:t.shift(),data:t.join("|")}}#O(){this.log("debug","Opened"),this.updateStatus(i.InstanceStatus.Ok),this.updateStatus(i.InstanceStatus.Ok,"Connected to Playdeck via WebSockets",this.instance?.connectionManager?.isAllConnected()),this.emit("started")}#E(e){this.log("debug",`Closed with code: ${e.code}, resason: ${e.reason}`),this.reconnect()}#N(e){const t=e;this.log("error",`WebSocket error: ${t.message}`),this.lastErrorMessage=t.message,this.updateStatus(i.InstanceStatus.UnknownError,this.lastErrorMessage,!0),this.#_?.readyState!==WebSocket.OPEN&&this.reconnect()}send(e){this.log("debug",`Sending message: ${e}`),this.#_?.send&&this.#_.send(e)}destroy(){this.#_&&(this.log("debug","Destroying..."),this.#_.onopen=null,this.#_.onerror=null,this.#_.onclose=null,this.#_.onmessage=null,this.#_.readyState!==WebSocket.OPEN&&this.#_.readyState!==WebSocket.CONNECTING||this.#_.close(1e3,"Cleaning up previous connection"),this.#_=null)}}var a;t.PlaydeckWSConnection=s,function(e){e.Event="event",e.Status="status",e.Project="project",e.Permanent="permanent"}(a||(a={}))},1400:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(n||(t.InstanceStatus=n={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(i||(t.Regex=i={}))},1562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionCompare=t.PlaydeckVersion=void 0;const i=n(3007);class r{#V;static holyBooly=!1;static#L=2;static#j="4.1b2";static#x=8;static#$="3.5b3";static#M="3.6b18";static configVersions=[{id:"4.1b11",label:"4.1b11"},{id:"3.8b13",label:"3.8b13"},{id:"3.8b8",label:"3.8b8"},{id:"3.8b4",label:"3.8b4"},{id:"3.7b11",label:"3.7b11"},{id:"3.7b4",label:"3.7b4"},{id:"3.6b18",label:"3.6b18"},{id:"3.6b6",label:"3.6b6"},{id:"3.5b12",label:"3.5b12"},{id:"3.5b3",label:"3.5b3"},{id:"3.4b8",label:"3.4b8"},{id:"3.2b12",label:"3.2b12"},{id:"3.2b11",label:"3.2b11"},{id:"3.2b8",label:"3.2b8"},{id:"3.2b2",label:"3.2b2"}];static noEvents=["3.4b8","3.2b12","3.2b11","3.2b8","3.2b2"];static noWS=this.noEvents.concat(["3.5b12","3.5b3"]);static#F(e){if(!e)return!1;const t=e.split("b");if(void 0===t)return!1;if(!Number.isInteger(Number(t[1])))return!1;const n=t[0].split(".");return void 0!==n&&!(!Number.isInteger(Number(n[0]))||!Number.isInteger(Number(n[0])))}static#R(e){const t=e.split("b"),n=t[0].split(".");return[Number(n[0]),Number(n[1]),Number(t[1])]}static hasConnection(e,t,n){return t===i.ConnectionType.TCP&&n===i.ConnectionDirection.Outgoing||!(t!==i.ConnectionType.WS||!this.isGreaterOrEqual(e,this.#M))||!(t!==i.ConnectionType.TCP||n!==i.ConnectionDirection.Incoming||!this.isGreaterOrEqual(e,this.#$))}static compareTwoVersions(e,t){if(!this.#F(e)||!this.#F(t))return s.Error;const n=this.#R(e),i=this.#R(t);for(let e=0;e<n.length;e++)if(n[e]!==i[e])return n[e]>i[e]?s.Greater:s.Lower;return s.Equal}static isGreaterOrEqual(e,t){switch(this.compareTwoVersions(e,t)){case s.Greater:case s.Equal:return!0;case s.Error:return null}return!1}static isLowerThan(e,t){switch(this.compareTwoVersions(e,t)){case s.Lower:return!0;case s.Error:return null}return!1}static availableChannels(e){return r.isGreaterOrEqual(e,r.#j)?r.#x:r.#L}constructor(e){this.#V=e}getCurrent(){return this.#V}availableChannels(){return r.availableChannels(this.#V)}isGreaterOrEqualualTo(e){return r.isGreaterOrEqual(this.#V,e)}isLowerThan(e){return r.isLowerThan(this.#V,e)}hasConnection(e,t){return r.hasConnection(this.#V,e,t)}isLegacy(){return r.isLowerThan(this.#V,r.#j)}}var s;t.PlaydeckVersion=r,function(e){e[e.Greater=1]="Greater",e[e.Equal=0]="Equal",e[e.Lower=-1]="Lower",e[e.Error=-99]="Error"}(s||(t.VersionCompare=s={}))},1635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>j,__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>I,__asyncValues:()=>T,__await:()=>P,__awaiter:()=>f,__classPrivateFieldGet:()=>D,__classPrivateFieldIn:()=>L,__classPrivateFieldSet:()=>V,__createBinding:()=>b,__decorate:()=>o,__disposeResources:()=>$,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>r,__generator:()=>m,__importDefault:()=>A,__importStar:()=>E,__makeTemplateObject:()=>_,__metadata:()=>h,__param:()=>l,__propKey:()=>d,__read:()=>v,__rest:()=>a,__rewriteRelativeImportExtension:()=>M,__runInitializers:()=>u,__setFunctionName:()=>p,__spread:()=>k,__spreadArray:()=>S,__spreadArrays:()=>C,__values:()=>g,default:()=>F});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function o(e,t,n,i){var r,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,n,a):r(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,i){t(n,i,e)}}function c(e,t,n,i,r,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=i.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?i.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),p=!1,h=n.length-1;h>=0;h--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var b=(0,n[h])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===b)continue;if(null===b||"object"!=typeof b)throw new TypeError("Object expected");(o=a(b.get))&&(d.get=o),(o=a(b.set))&&(d.set=o),(o=a(b.init))&&r.unshift(o)}else(o=a(b))&&("field"===l?r.unshift(o):d[c]=o)}u&&Object.defineProperty(u,i.name,d),p=!0}function u(e,t,n){for(var i=arguments.length>2,r=0;r<t.length;r++)n=i?t[r].call(e,n):t[r].call(e);return i?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))}function m(e,t){var n,i,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var b=Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||b(t,e,n)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}function k(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function C(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,r++)i[r]=s[a];return i}function S(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function P(e){return this instanceof P?(this.v=e,this):new P(e)}function I(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){r[e]&&(i[e]=function(t){return new Promise((function(n,i){s.push([e,t,n,i])>1||o(e,t)}))},t&&(i[e]=t(i[e])))}function o(e,t){try{(n=r[e](t)).value instanceof P?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(e){u(s[0][3],e)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function w(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:P(e[i](t)),done:!1}:r?r(t):t}:r}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=g(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},N=function(e){return N=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},N(e)};function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=N(e),i=0;i<n.length;i++)"default"!==n[i]&&b(t,e,n[i]);return O(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function D(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function V(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n}function L(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function j(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(r=i)}if("function"!=typeof i)throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var x="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function $(e){function t(t){e.error=e.hasError?new x(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,i=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===i)return i=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else i|=1}catch(e){t(e)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function M(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,n,i,r,s){return n?t?".jsx":".js":!i||r&&s?i+r+"."+s.toLowerCase()+"js":e})):e}const F={__extends:r,__assign:s,__rest:a,__decorate:o,__param:l,__esDecorate:c,__runInitializers:u,__propKey:d,__setFunctionName:p,__metadata:h,__awaiter:f,__generator:m,__createBinding:b,__exportStar:y,__values:g,__read:v,__spread:k,__spreadArrays:C,__spreadArray:S,__await:P,__asyncGenerator:I,__asyncDelegator:w,__asyncValues:T,__makeTemplateObject:_,__importStar:E,__importDefault:A,__classPrivateFieldGet:D,__classPrivateFieldSet:V,__classPrivateFieldIn:L,__addDisposableResource:j,__disposeResources:$,__rewriteRelativeImportExtension:M}},1648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckStatusV3=void 0;const i=n(6472),r=n(2346);t.PlaydeckStatusV3=class{#U=null;#B=null;#W=null;constructor(e){this.#W=e}getValues(){return null===this.#W?null:(this.#U=this.#H(),this.#B=this.#q(),null===this.#U||null===this.#B?null:{common:this.#U,channel:this.#B})}#H(){if(null===this.#W)return null;if(void 0===this.#W.General)return null;const e=this.#W.General;return{playlistFile:e.PlaylistFile,activeChannels:e.ActiveChannels,productionMode:Boolean(e.ProductionMode),isRecording:e.IsRecording,recordingDuration:i.PlaydeckUtils.convertFloat(e.RecordingDuration),recordingTimeStart:i.PlaydeckUtils.convertTimestamp(e.RecordingTimeStart)}}#q(){return null===this.#W||void 0===this.#W.Playlist?null:this.#W.Playlist.map((e=>new s(e)))}isChannelOn(e){return!0}};class s{channelName;tallyStatus;previewNote;stageWidth;stageHeight;state;blockCount;blockScheduleActive;blockScheduleMethod;blockScheduleRemaining;blockScheduleAlert;blockScheduleOvertime;blockAutoplayActive;blockAutoplayRemaining;blockAutoplayAlert;blockName;blockDuration;blockProgress;blockPosition;blockRemaining;blockRemainingAlert;blockTimeStart;blockTimeEnd;blockIsClock;blockID;clipID;clipFile;clipWidth;clipHeight;clipName;clipDuration;clipProgress;clipPosition;clipRemaining;clipRemainingAlert;clipTimeStart;clipTimeEnd;clipType;constructor(e){this.channelName=e.ChannelName,this.tallyStatus=i.Tally[e.TallyStatus],this.previewNote=e.PreviewNote,this.stageWidth=e.StageWidth,this.stageHeight=e.StageHeight,this.state=this.#Y(e),this.blockCount=e.BlockCount,this.blockScheduleActive=e.BlockScheduleActive,this.blockScheduleMethod=r.BlockScheduleMethod[e.BlockScheduleMethod],this.blockScheduleRemaining=i.PlaydeckUtils.convertFloat(e.BlockScheduleRemaining),this.blockScheduleAlert=e.BlockScheduleAlert,this.blockScheduleOvertime=e.BlockScheduleOvertime,this.blockAutoplayActive=e.BlockAutoplayActive,this.blockAutoplayRemaining=i.PlaydeckUtils.convertFloat(e.BlockAutoplayRemaining),this.blockAutoplayAlert=e.BlockAutoplayAlert,this.blockName=e.BlockName,this.blockDuration=i.PlaydeckUtils.convertFloat(e.BlockDuration),this.blockProgress=i.PlaydeckUtils.convertFloat(e.BlockProgress),this.blockPosition=i.PlaydeckUtils.convertFloat(e.BlockPosition),this.blockRemaining=i.PlaydeckUtils.convertFloat(e.BlockRemaining),this.blockRemainingAlert=e.BlockRemainingAlert,this.blockTimeStart=i.PlaydeckUtils.convertTimestamp(e.BlockTimeStart),this.blockTimeEnd=i.PlaydeckUtils.convertTimestamp(e.BlockTimeEnd),this.blockIsClock=e.BlockIsClock,this.blockID=e.BlockID,this.clipID=e.ClipID,this.clipFile=e.ClipFile,this.clipWidth=e.ClipWidth,this.clipHeight=e.ClipHeight,this.clipName=e.ClipName,this.clipDuration=i.PlaydeckUtils.convertFloat(e.ClipDuration),this.clipProgress=i.PlaydeckUtils.convertFloat(e.ClipProgress),this.clipPosition=Math.max(i.PlaydeckUtils.convertFloat(e.ClipPosition)-1,0),this.clipRemaining=i.PlaydeckUtils.convertFloat(e.ClipRemaining),this.clipRemainingAlert=e.ClipRemainingAlert,this.clipTimeStart=i.PlaydeckUtils.convertTimestamp(e.ClipTimeStart),this.clipTimeEnd=i.PlaydeckUtils.convertTimestamp(e.ClipTimeEnd),this.clipType=this.#G(e)}#Y(e){return e.StatusPlaying&&!e.StatusPaused?i.PlaybackState.Play:e.StatusPaused&&!e.StatusCued?i.PlaybackState.Pause:e.StatusCued?i.PlaybackState.Cue:e.StatusPlaying||e.StatusPaused?i.PlaybackState.None:i.PlaybackState.Stop}#G(e){return e.ClipIsAction?a.Action:e.ClipIsAudio?a.Audio:e.ClipIsClock?a.Clock:e.ClipIsHighlight?a.Highlight:e.ClipIsImage?a.Image:e.ClipIsInput?a.Input:e.ClipIsTube?a.Tube:e.ClipIsVideo?a.Video:a.None}}var a;!function(e){e.None="",e.Clock="Clock",e.Video="Video",e.Image="Image",e.Audio="Audio",e.Input="Input",e.Tube="Youtube",e.Action="Action",e.Highlight="Highlight"}(a||(a={}))},1649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const i=n(1635),r=n(360),s=i.__importDefault(n(3290)),a=n(2593),o=n(1706),l=n(8039),c=n(4044),u=n(4289),d=n(2365);t.InstanceBase=class{#z;#J;id;#Q=new s.default({concurrency:1});#K=!1;#X=!1;#Z={};#ee;#te;#ne=new Map;#ie=new Map;#re=new Map;#se;#ae;get instanceOptions(){return this.#se}get label(){return this.#ae}constructor(e){if(!(0,a.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#se={disableVariableValidation:!1},this.#z=new c.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#z.receivedMessage(e)})),this.#ee=new u.ActionManager((async e=>this.#z.sendWithCb("parseVariablesInString",e)),(e=>this.#z.sendWithNoCb("setActionDefinitions",e)),(e=>this.#z.sendWithNoCb("setCustomVariable",e)),this.log.bind(this)),this.#te=new l.FeedbackManager((async e=>this.#z.sendWithCb("parseVariablesInString",e)),(e=>this.#z.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#z.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#J=e.upgradeScripts,this.id=e.id,this.#ae=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#Q.add((async()=>{if(this.#K)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#Z=e.config,this.#ae=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#Z=t,this.saveConfig(this.#Z),e.lastUpgradeIndex=this.#J.length-1}const{updatedActions:i,updatedFeedbacks:r,updatedConfig:s}=(0,o.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#J,this.#Z,!1);this.#Z=s??this.#Z;const a=this.#z.sendWithCb("upgradedItems",{updatedActions:i,updatedFeedbacks:r});try{await this.init(this.#Z,!!e.isFirstInit),this.#K=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await a}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:n},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#J.length-1,updatedConfig:this.#Z}}))}async _handleDestroy(){await this.#Q.add((async()=>{if(!this.#K)throw new Error("Not initialized");await this.destroy(),this.#K=!1}))}async _handleConfigUpdateAndLabel(e){await this.#Q.add((async()=>{if(!this.#K)throw new Error("Not initialized");this.#ae=e.label,this.#Z=e.config,await this.configUpdated(this.#Z)}))}async _handleExecuteAction(e){return this.#ee.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,o.runThroughUpgradeScripts)({},e.feedbacks,null,this.#J,this.#Z,!0);this.#z.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#te.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,o.runThroughUpgradeScripts)(e.actions,{},null,this.#J,this.#Z,!0);this.#z.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#ee.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,a.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#ee.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#te.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#X)return}else if(!this.#X)return;if(!this.handleStartStopRecordActions)throw this.#X=!1,new Error("Recording actions is not supported by this module!");this.#X=e.recording,this.handleStartStopRecordActions(this.#X)}async _handleVariablesChanged(e){this.#te.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#ne.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#ne.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#Z=e,this.#z.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#ee.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#te.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,i]of Object.entries(e))i&&t.push({...i,id:n});this.#z.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],n=[];this.#ie.clear();for(const i of e)t.push({id:i.variableId,name:i.name}),this.#ie.set(i.variableId,i),this.#re.has(i.variableId)||(this.#re.set(i.variableId,""),n.push({id:i.variableId,value:""}));if(!this.#se.disableVariableValidation){const e=new Set(this.#ie.keys());for(const t of this.#re.keys())e.has(t)||(this.#re.delete(t),n.push({id:t,value:void 0}))}this.#z.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:n})}setVariableValues(e){const t=[];for(const[n,i]of Object.entries(e))this.#se.disableVariableValidation?(void 0===i?this.#re.delete(n):this.#re.set(n,i),t.push({id:n,value:i})):this.#ie.has(n)?(this.#re.set(n,i??""),t.push({id:n,value:i??""})):t.push({id:n,value:void 0});this.#z.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#re.get(e)}async parseVariablesInString(e){const t=this.#te.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#z.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#te.checkFeedbacks(e)}checkFeedbacksById(...e){this.#te.checkFeedbacksById(e)}subscribeActions(...e){this.#ee.subscribeActions(e)}unsubscribeActions(...e){this.#ee.unsubscribeActions(e)}subscribeFeedbacks(...e){this.#te.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#te.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#X)throw new Error("Not currently recording actions");this.#z.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}oscSend(e,t,n,i){this.#z.sendWithNoCb("send-osc",(0,r.literal)({host:e,port:t,path:n,args:i}))}updateStatus(e,t){this.#z.sendWithNoCb("set-status",(0,r.literal)({status:e,message:t??null}))}log(e,t){this.#z.sendWithNoCb("log-message",(0,r.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const n="string"==typeof e?{type:e}:e,i=new d.SharedUdpSocketImpl(this.#z,this.#ne,n);return t&&i.on("message",t),i}}},1706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,n,s,a,o){const l=new Map,c=e=>{let t=l.get(e);return t||(t={actions:[],feedbacks:[],config:!1},l.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&c(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&c(t).feedbacks.push(e.id)}if(!o)for(let e=n??-1;e<s.length;e++)c(e).config=!0;const u={},d={};let p;if(l.size>0){const o=Array.from(l.keys()).sort(),c=Math.min(...o,n??-1)+1,h=[],f=[],m=s.length;for(let n=c;n<m;n++){const o=l.get(n-1);o&&(h.push(...o.actions),f.push(...o.feedbacks));const c=!!o?.config;if(!c&&0===h.length&&0===f.length)continue;const m=p??a,b=(0,s[n])({currentConfig:r(m)},{config:c?m:null,actions:h.map((t=>{const n=e[t];if(n)return(0,i.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?r(n.options):{}})})).filter((e=>!!e)),feedbacks:f.map((e=>{const n=t[e];if(n)return(0,i.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?r(n.options):{},isInverted:n.isInverted})})).filter((e=>!!e))});c&&b.updatedConfig&&(p=b.updatedConfig);for(const t of b.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,d[t.id]=n)}for(const e of b.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,u[e.id]={...n,style:u[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,n]of Object.entries(e))d[t]||"number"!=typeof n?.upgradeIndex||(d[t]=n);for(const[e,n]of Object.entries(t))u[e]||"number"!=typeof n?.upgradeIndex||(u[e]=n)}return{updatedActions:d,updatedFeedbacks:u,updatedConfig:p}};const i=n(360);function r(e){return JSON.parse(JSON.stringify(e))}},1943:e=>{"use strict";e.exports=require("fs/promises")},2017:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;0!=r--;){var a=s[r];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},2018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(3730),t),i.__exportStar(n(1649),t),i.__exportStar(n(7386),t),i.__exportStar(n(1400),t),i.__exportStar(n(8983),t),i.__exportStar(n(8104),t),i.__exportStar(n(3258),t),i.__exportStar(n(131),t),i.__exportStar(n(3371),t),i.__exportStar(n(9786),t),i.__exportStar(n(6132),t)},2203:e=>{"use strict";e.exports=require("stream")},2250:e=>{"use strict";e.exports=require("dns")},2346:(e,t)=>{"use strict";var n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.BlockScheduleMethod=t.ProductionMode=t.BlockAutoplayAlert=void 0,function(e){e[e.Alert0=0]="Alert0",e[e.Alert1=1]="Alert1",e[e.Alert2=2]="Alert2"}(n||(t.BlockAutoplayAlert=n={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On"}(i||(t.ProductionMode=i={})),function(e){e[e.None=0]="None",e[e.AlwaysPlay=1]="AlwaysPlay",e[e.PlayOnly=2]="PlayOnly",e[e.DontPlay=3]="DontPlay"}(r||(t.BlockScheduleMethod=r={}))},2365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const i=n(1635).__importDefault(n(228)),r=n(360);class s extends i.default{#z;#oe;#se;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#I&&"object"==typeof this.#I?this.#I:void 0}#I="pending";constructor(e,t,n){super(),this.#z=e,this.#oe=t,this.#se={...n}}bind(e,t,n){if(this.#I&&"object"==typeof this.#I)throw new Error("Socket is already bound");switch(this.#I){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,r.assertNever)(this.#I),new Error("Invalid socket state")}this.#I="binding",n&&this.on("listening",n),this.#z.sendWithCb("sharedUdpSocketJoin",{family:this.#se.type,portNumber:e}).then((t=>{this.#I={portNumber:e,handleId:t},this.#oe.set(t,this),this.emit("listening")}),(e=>{this.#I="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#I&&"object"==typeof this.#I);else switch(this.#I){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,r.assertNever)(this.#I),new Error("Invalid socket state")}const t=this.#I.handleId;this.#I="closed",e&&this.on("close",e),this.#z.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#oe.delete(t),this.emit("close")}),(e=>{this.#oe.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,n,i,r,s){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof n){if("number"!=typeof i||"string"!=typeof r)throw new Error("Invalid arguments");if(void 0!==s&&"function"!=typeof s)throw new Error("Invalid arguments");const a=this.#le(e,t,n);this.#ce(a,i,r,s)}else{if("string"!=typeof n)throw new Error("Invalid arguments");{if(void 0!==i&&"function"!=typeof i)throw new Error("Invalid arguments");const r=this.#le(e,0,void 0);this.#ce(r,t,n,i)}}}#le(e,t,n){let i;if("string"==typeof e)i=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))i=e;else{if(Array.isArray(e))return Buffer.from(e);i=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return i.subarray(t,void 0!==n?n+t:void 0)}#ce(e,t,n,i){if(!this.#I||"object"!=typeof this.#I)throw new Error("Socket is not open");this.#z.sendWithCb("sharedUdpSocketSend",{handleId:this.#I.handleId,message:e,address:n,port:t}).then((()=>{i?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#I="fatalError";const t=this.boundState;t&&this.#oe.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=s},2593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisibleExpression"in e&&"string"==typeof e.isVisibleExpression?{...e,isVisibleFnType:"expression",isVisibleFn:e.isVisibleExpression,isVisible:void 0,isVisibleExpression:void 0}:"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisibleFnType:"function",isVisible:void 0,isVisibleExpression:void 0}:{...e,isVisible:void 0,isVisibleFn:void 0,isVisibleFnType:void 0,isVisibleExpression:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},2906:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckFeedbacksDefinitionsV4=void 0;const i=n(6278),r=n(6472);t.PlaydeckFeedbacksDefinitionsV4=e=>({checkState:{type:"boolean",name:"Check playback state",description:"Returns the state CLIP in BLOCK (0 for any) in selected playlist",defaultStyle:{bgcolor:(0,i.combineRgb)(255,0,0),color:(0,i.combineRgb)(255,255,255)},options:[{type:"dropdown",id:"state",label:"State",default:r.PlaybackState.Play,choices:[{id:r.PlaybackState.Play,label:"PLAY"},{id:r.PlaybackState.Pause,label:"PAUSE"},{id:r.PlaybackState.Stop,label:"STOP"},{id:r.PlaybackState.Cue,label:"CUE"}]},{type:"checkbox",label:"Use Item UID",id:"isUID",default:!1},{type:"checkbox",label:"Use variables for Channel",id:"isChanString",default:!1,isVisible:e=>!1===e.isUID},{type:"number",id:"channelNum",label:"Channel",min:1,max:8,default:1,isVisible:e=>!1===e.isChanString&&!1===e.isUID},{type:"textinput",label:"Channel",id:"channelString",default:"0",useVariables:!0,isVisible:e=>!0===e.isChanString&&!1===e.isUID},{type:"textinput",label:"Block Number/Name",id:"block",default:"",useVariables:!0,isVisible:e=>!1===e.isUID},{type:"textinput",label:"Clip Number/Name (0 for any)",id:"clip",default:"0",useVariables:!0,isVisible:e=>!1===e.isUID},{type:"textinput",label:"Item UID (0 for any)",id:"item",default:"0",useVariables:!0,isVisible:e=>!0===e.isUID}],callback:async(t,n)=>{if(!e)return!1;const i=t.options;let s=!1,a=!1,o=!1;const l=i.state,c=i.isChanString?await n.parseVariablesInString(i.channelString.toString()):i.channelNum,u=await n.parseVariablesInString(i.clip.toString()),d=await n.parseVariablesInString(i.block.toString()),p=Number(await n.parseVariablesInString(i.item.toString())),h=0===Number(u),f=0===Number(d),m=h&&f;if(e.lastState&&!i.isUID){const t=e.lastState.channel;if(t){const e=t[Number(c)];if(e){const t=[String(e.blockName),String(e.blockNumber)],n=[String(e.clipName),String(e.clipNumber)];return void 0!==l&&(s=String(e.state)===String(l)),void 0!==d&&(o=t.indexOf(String(d))>-1),void 0!==u&&(a=n.indexOf(String(u))>-1),m?s:f||h?f&&s&&a||h&&s&&o:s&&a&&o}}}if(null===e.status||void 0===e.status)return!1;const b=e.status.getValues();if(null==b)return!1;const y=b.channel;if(null==y)return!1;const g=y[Number(c)-1];if(null==g)return!1;if(i.isUID&&e.data){const t=e.data.getChannelByID(Number(p));if(null!==t){const e=y[t-1];if(null!==e||void 0!==e){if(s=String(e.playState)===String(l),String(e.clipID)===String(p))return s;if(String(e.playState)===String(r.PlaybackState.Stop))return s}}}if(void 0!==l&&(s=String(g.playState)===String(l),!1===s))return!1;if(String(g.playState)===String(r.PlaybackState.Stop))return s;const v=[String(g.blockName),String(g.blockNumber)],k=[String(g.clipName),String(g.blockNumber)];return void 0!==d&&(o=v.indexOf(String(d))>-1),void 0!==u&&(a=k.indexOf(String(u))>-1),m?s:f||h?f&&s&&a||h&&s&&o:s&&a&&o}}})},2940:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetsCommands=void 0;const n=["start","stop","stopall"],i=["OVERLAY","ACTION"],r=["start","stop"],s=["DESKTOP","STREAM","RECORD"],a=["mute","unmute"],o=["CHANNEL","INPUT"];function l(e,t,n){return`- ${e?"START":"STOP"} one ${n.includes("all")?`${t}`:` or all ${t}. You can define multiple ${t.toLowerCase()}s at once e.g. "<${n}${t.toLowerCase()}|1|3+7+12>"}`}`}const c={version:"4.1b11",deprecated:null,commandName:"ASSETS - LOAD PROJECT",command:"loadproject",description:"Loads a new Project File",arg1:"FILENAME"},u={version:"4.1b11",deprecated:null,commandName:"ASSETS - APPEND PROJECT",command:"appendproject",description:"Appends all Blocks to the current Project",arg1:"FILENAME"};t.AssetsCommands=[...function(){const e=[];return n.forEach((t=>{i.forEach((n=>{e.push(function(e,t){const n=e.includes("all"),i=`${t}${n?"S":""}`;return{version:"4.1b11",deprecated:null,commandName:`ASSETS - ${`${e.split("all")[0]} ${i}`.toUpperCase()}`,command:`${e}${i.toLowerCase()}`,description:l(!0,i,e),arg1:"CHANNEL",arg2:n?void 0:t}}(t,n))}))})),r.forEach((t=>{s.forEach((n=>{e.push(function(e,t){const n="DESKTOP"===t;return{version:"4.1b11",deprecated:null,commandName:`ASSETS - ${`${e} ${t}`.toUpperCase()}`,command:`${e}${t.toLowerCase()}`,description:`${e.toUpperCase()} the ${n?"Channel Desktop Output":`${t.toUpperCase()}`}`,arg1:t}}(t,n))}))})),e.push(c),e.push(u),a.forEach((t=>{o.forEach((n=>{e.push(function(e,t){return{version:"4.1b11",deprecated:null,commandName:`ASSETS - ${`${e} ${t}`.toUpperCase()}`,command:`${e}${t.toLowerCase()}`,description:`${e.toUpperCase()} the ${t} Audio`,arg1:t}}(t,n))}))})),e}()]},3007:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckConnection=t.ConnectionType=t.ConnectionDirection=void 0;const r=n(6278),s=i(n(4434)),a=i(n(2250));var o,l;!function(e){e[e.None=0]="None",e[e.Outgoing=1]="Outgoing",e[e.Incoming=2]="Incoming",e[e.BiDirectional=3]="BiDirectional",e[e.Query=4]="Query",e[e.QueryOut=5]="QueryOut",e[e.QueryIn=6]="QueryIn",e[e.All=7]="All"}(o||(t.ConnectionDirection=o={})),function(e){e.TCP="TCP",e.WS="WebSocket"}(l||(t.ConnectionType=l={}));class c extends s.default{#ue=5e3;instance;port;host;lastErrorMessage;direction;type;status;constructor(e,t){super(),this.instance=e,this.direction=t,this.status=r.InstanceStatus.Disconnected}init(){this.log("debug","Initializing conneciton...")}reconnect(){this.updateStatus(r.InstanceStatus.Connecting,this.lastErrorMessage?`Last error: ${this.lastErrorMessage}`:null,!0),setTimeout((()=>{this.destroy(),this.log("info","Trying to reconnect..."),this.init()}),this.#ue)}send(e){this.log("debug",`Sending ${e}`)}async resolveHostToIPV4(e){return a.default.promises.lookup(e,4)}log(e,t){this.instance?.log(e,`Playdeck ${this.type} (${o[this.direction]}): ${t}`)}updateStatus(e,t,n){this.status=e,n&&void 0!==this.instance&&this.instance.updateStatus(e,t||null)}}t.PlaydeckConnection=c},3238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckActions=void 0;const i=n(6472),r=n(5522);t.PlaydeckActions=class{#c;#de;constructor(e){this.#c=e,this.#de=this.#pe(),this.#t()}#t(){this.#u("debug","Initializing..."),this.#c?this.#c.setActionDefinitions(this.#de):this.#u("error","No main instance")}#pe(){const e={},t=r.playdeckCommandsFactory.create(this.#c.version);return null===t?(this.#u("warn","No command to load"),e):(t.forEach((n=>{const i=n.command;e[i]={name:n.commandName,callback:async e=>{await this.#he(e)},options:t.getOptions(n),description:n.description}})),e)}async#he(e){const t=this.#c.connectionManager?.outgoing;let{arg1:n,arg2:i,arg3:r}=e.options;void 0!==n&&(n=await this.#c.parseVariablesInString(n.toString())),void 0!==i&&(i=await this.#c.parseVariablesInString(i.toString())),void 0!==r&&(r=await this.#c.parseVariablesInString(r.toString()));const s=this.#fe(e.actionId,[n,i,r]);t&&(""!==s?e.actionId&&t.send(s):this.#u("warn","Empty command!"))}#fe(e,t){return"customcommand"===e?t[0]?t.toString():"":i.PlaydeckUtils.makeRCMessage(e,t)}#u(e,t){this.#c.log(e,`Playdeck Actions: ${t}`)}}},3258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6368),r=n(6641),s=n(4774),a=()=>{},o=new r.TimeoutError;t.default=class extends i{constructor(e){var t,n,i,r;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(r=null===(i=e.interval)||void 0===i?void 0:i.toString())&&void 0!==r?r:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,i)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(o)}));n(await s)}catch(e){i(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},3371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3963:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckTCPServer=void 0;const r=n(6278),s=n(3007),a=n(1562),o=i(n(9278));class l extends s.PlaydeckConnection{#me=null;#be=null;#ye=new Set;host="0.0.0.0";constructor(e,t){super(e,t),this.type=s.ConnectionType.TCP;const n=this.instance?.config.tcpPortEvents;this.instance?.config.isAdvanced&&("number"==typeof n?this.port=n:this.updateStatus(r.InstanceStatus.BadConfig,"Port is not a number",!0)),this.#t()}#t(){if(void 0===this.port)return;this.updateStatus(r.InstanceStatus.Connecting,`Starting TCP server on port: ${this.port}`,!0);const e=o.default.createServer((e=>{this.#be=e,this.#ye.add(e);const t=`${e.remoteAddress}:${e.remotePort}`;this.log("info",`New client connected: ${t}`),this.emit("started"),this.updateStatus(r.InstanceStatus.Ok,"Playdeck Connected to US",!0),this.updateStatus(r.InstanceStatus.Ok),e.on("data",(e=>{e.toString().split("\r\n").forEach((e=>{""!==e&&this.#n(e)}))})),e.on("close",(()=>{this.log("info",`Connection closed: ${t}`),this.#ye.delete(e)})),e.on("error",(e=>{this.log("error",`Error with ${t}: ${e.message}`)}))}));this.log("info",`Listen on port: ${this.port}`),e.listen(this.port,this.host)}#n(e){this.log("debug",`Recieved data: ${e}`);const t=e.toLocaleLowerCase();if(t.startsWith("playdeck")){const e=t.split("playdeck ")[1];this.log("debug",`Recieved version info: ${e}`),this.instance?.version&&a.PlaydeckVersion.compareTwoVersions(e,this.instance?.version?.getCurrent())!==a.VersionCompare.Equal&&this.log("warn",`Connected to different version of Playdeck (${e}). Check settings (${this.instance.version.getCurrent()})!`)}else this.emit("event",e)}send(e){this.#be&&(this.log("debug",`Message sent: ${e}`),this.#be.write(e))}destroy(){this.#me&&(this.log("debug","Destroying..."),this.#ye.forEach((e=>e.destroy())),this.#me.close())}}t.PlaydeckTCPServer=l},4044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const i=n(1635),r=n(360),s=i.__importDefault(n(6022));t.IpcWrapper=class{#ge;#ve;#ke;#Ce=1;#Se=new Map;constructor(e,t,n){this.#ge=e,this.#ve=t,this.#ke=n}async sendWithCb(e,t,n,i=0){i<=0&&(i=this.#ke);const r={timeout:void 0,resolve:()=>null,reject:()=>null},a=new Promise(((e,t)=>{r.resolve=e,r.reject=t}));this.#Ce>268435456&&(this.#Ce=1);const o=this.#Ce++;this.#Se.set(o,r),this.#ve({direction:"call",name:String(e),payload:s.default.stringify(t),callbackId:o});const l=new Error("Call timed out");return r.timeout=setTimeout((()=>{r.reject(n?n():l),this.#Se.delete(o)}),i),a}sendWithNoCb(e,t){this.#ve({direction:"call",name:String(e),payload:s.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#ge[e.name];if(!t)return void(e.callbackId&&this.#ve({direction:"response",callbackId:e.callbackId,success:!1,payload:s.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?s.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#ve({direction:"response",callbackId:e.callbackId,success:!0,payload:s.default.stringify(t)})}),(t=>{e.callbackId&&this.#ve({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):s.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#Se.get(e.callbackId);if(this.#Se.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const n=e.payload?s.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"object"==typeof n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,r.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},4289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const i=n(2593);function r(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#Pe;#Ie;#we;#u;#de=new Map;#Te=new Map;constructor(e,t,n,i){this.#Pe=e,this.#Ie=t,this.#we=n,this.#u=i}async handleExecuteAction(e){const t=this.#de.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:(t,n)=>{this.#we({customVariableId:t,value:n,controlId:e.action.controlId})}};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#Te.get(t);if(e){const t=this.#de.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(t.unsubscribe(r(e),n)).catch((t=>{this.#u("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#Te.delete(t);else{this.#Te.set(t,n);const e=this.#de.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#Pe({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(e.subscribe(r(n),t)).catch((e=>{this.#u("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#de.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during learn")}};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#de.clear();for(const[n,r]of Object.entries(e))r&&(t.push({id:n,name:r.name,description:r.description,options:(0,i.serializeIsVisibleFn)(r.options),hasLearn:!!r.learn,learnTimeout:r.learnTimeout,hasLifecycleFunctions:!!r.subscribe||!!r.unsubscribe}),this.#de.set(n,r));this.#Ie({actions:t})}subscribeActions(e){let t=Array.from(this.#Te.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#de.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during subscribe")}};Promise.resolve(t.subscribe(r(e),n)).catch((t=>{this.#u("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#Te.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#de.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(t.unsubscribe(r(e),n)).catch((t=>{this.#u("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},4326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(u)throw new Error("runEntrypoint can only be called once");if(u=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const i=await s.default.readFile(n),d=JSON.parse(i.toString());if(d.runtime?.api!==r.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let p=d.runtime.apiVersion;if("0.0.0"===p)try{const e=await s.default.readFile(l.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(p=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const h=process.env.CONNECTION_ID;if("string"!=typeof h||!h)throw new Error("Module initialise is missing CONNECTION_ID");const f=process.env.VERIFICATION_TOKEN;if("string"!=typeof f||!f)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const m=new o.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{m.receivedMessage(e)})),c=new e((0,a.literal)({id:h,upgradeScripts:t,_isInstanceBaseProps:!0})),m.sendWithCb("register",{apiVersion:p,connectionId:h,verificationToken:f}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))};const i=n(1635),r=n(9967),s=i.__importDefault(n(1943)),a=n(360),o=n(4044),l=i.__importDefault(n(6928));let c,u=!1},4434:e=>{"use strict";e.exports=require("events")},4581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},4656:(e,t)=>{"use strict";var n,i,r,s,a,o,l,c,u,d,p,h;Object.defineProperty(t,"__esModule",{value:!0}),t.DurationGfxType=t.LoopType=t.ScaleType=t.PauseFollow=t.PauseMode=t.TransitionType=t.FileType=t.ItemType=t.ShuffleType=t.BreakOption=t.ScheduledMethod=t.StopType=void 0,function(e){e.Stop="stop",e.Pause="pause",e.LoopBlock="loopblock",e.LoopClips="loopclips",e.JumpToBlock="jumpblock",e.Break="break"}(n||(t.StopType=n={})),function(e){e[e.None=0]="None",e[e.AlwaysAutoPlay=1]="AlwaysAutoPlay",e[e.PlayOnly=2]="PlayOnly",e[e.NoAutoPlay=3]="NoAutoPlay"}(i||(t.ScheduledMethod=i={})),function(e){e[e.Last=1]="Last",e[e.LastMinusThree=2]="LastMinusThree",e[e.LastMinusTen=3]="LastMinusTen",e[e.LastFromBeginning=4]="LastFromBeginning",e[e.NextAfterTheLast=5]="NextAfterTheLast"}(r||(t.BreakOption=r={})),function(e){e.None="",e.AllClips="allshuffle",e.Clips="clipshuffle"}(s||(t.ShuffleType=s={})),function(e){e[e.File=1]="File",e[e.Stream=2]="Stream",e[e.Youtube=3]="Youtube",e[e.Input=4]="Input"}(a||(t.ItemType=a={})),function(e){e[e.None=0]="None",e[e.Video=1]="Video",e[e.Image=2]="Image",e[e.Audio=3]="Audio",e[e.Stream=4]="Stream"}(o||(t.FileType=o={})),function(e){e.None="",e.Fade="Fade",e.CheckerBoard="CheckerBoard",e.Pixelate="Pixelate",e.Iris="Iris",e.RandomBars="RandomBars",e.RandomDissolve="RandomDissolve",e.Strips="Strips",e.Wheel="Wheel"}(l||(t.TransitionType=l={})),function(e){e[e.None=0]="None",e[e.Pause=1]="Pause",e[e.Stop=2]="Stop"}(c||(t.PauseMode=c={})),function(e){e[e.None=0]="None",e[e.CueNext=1]="CueNext",e[e.PlayNext=2]="PlayNext"}(u||(t.PauseFollow=u={})),function(e){e.None="",e.Letterbox="letter-box",e.PanScan="crop",e.Fullscreen="none",e.Original="no-scale"}(d||(t.ScaleType=d={})),function(e){e[e.None=0]="None",e[e.Infinitely=1]="Infinitely",e[e.UntilClip=2]="UntilClip",e[e.ForTime=3]="ForTime",e[e.UntilTime=4]="UntilTime"}(p||(t.LoopType=p={})),function(e){e[e.Duration=1]="Duration",e[e.UntilTime=2]="UntilTime",e[e.Infinitely=3]="Infinitely"}(h||(t.DurationGfxType=h={}))},4774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const r=i.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(r,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},4865:e=>{"use strict";const t=(e,t,i,r)=>{if("length"===i||"prototype"===i)return;if("arguments"===i||"caller"===i)return;const s=Object.getOwnPropertyDescriptor(e,i),a=Object.getOwnPropertyDescriptor(t,i);!n(s,a)&&r||Object.defineProperty(e,i,a)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},i=(e,t)=>`/* Wrapped ${e}*/\n${t}`,r=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),s=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:a=!1}={})=>{const{name:o}=e;for(const i of Reflect.ownKeys(n))t(e,n,i,a);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const a=""===n?"":`with ${n.trim()}() `,o=i.bind(null,a,t.toString());Object.defineProperty(o,"name",s),Object.defineProperty(e,"toString",{...r,value:o})})(e,n,o),e}},4874:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckDataFactory=void 0;const i=n(8410);t.PlaydeckDataFactory=class{static create(e,t){return e?e.isLegacy()?null:new i.PlaydeckDataV4(t):null}}},5400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckVariables=void 0;const i=n(874);t.PlaydeckVariables=class{#_e=[];#Oe=new Set;#re={};#c;constructor(e){this.#c=e,this.#u("debug","Initializing..."),this.#Ne(i.variableItems)}#Ne(e){this.#c.setVariableDefinitions([]),e.forEach((e=>{if(this.#Ee(e))return;const t=this.#Ae(e);if(!0===t.channel){const e=this.#c?.version?.availableChannels();if(e)for(let n=0;n<e;n++)t.channel=n,this.#De(this.#Ae(t))}else this.#De(t)}))}#Ae(e){const t="number"==typeof e.channel?e.channel:void 0;return{variableDefinition:e.getVariableDefinition(t),value:void 0,getVariableDefinition:e.getVariableDefinition,getCurrentValue:e.getCurrentValue,getFromData:e.getFromData,getValueFromEvent:e.getValueFromEvent,channel:e.channel,version:e.version,deprecated:e.deprecated}}#Ee(e){return null===e.version||!!this.#c.version?.isLowerThan(e.version)||!(null===e.deprecated||!this.#c.version?.isGreaterOrEqualualTo(e.deprecated))}#De(e){null!==e.variableDefinition&&this.#Oe.add(e.variableDefinition),this.#_e.push(e)}#Ve(e){null!==e.variableDefinition&&this.#Oe.delete(e.variableDefinition)}setCurrent(e){this.#Le(e,"getCurrentValue")}onEvent(e){this.#Le(e,"getValueFromEvent")}checkData(e,t){null!==e&&this.#Le({data:e,current:t},"getFromData")}#Le(e,t){this.#re={},this.#_e.forEach((n=>{if(void 0===n.value&&this.#Ve(n),null==e)return;const i="number"==typeof n.channel?n.channel:void 0,r=n[t]&&"function"==typeof n[t]?n[t]:void 0;if(void 0===r)return;const s=r(e,i);null!==s&&n.value!==s&&(n.value=s,this.#je(n))})),Object.keys(this.#re).length>0&&(this.#c?.setVariableDefinitions(Array.from(this.#Oe)),this.#c?.setVariableValues(this.#re))}#je(e){null!==e.variableDefinition&&(void 0!==e.value?(this.#re[e.variableDefinition.variableId]=e.value,this.#Oe.has(e.variableDefinition)||this.#Oe.add(e.variableDefinition)):this.#Oe.has(e.variableDefinition)&&(this.#u("warn",`Deleting ${e.variableDefinition.variableId}: ${e.value}`),this.#Oe.delete(e.variableDefinition)))}#u(e,t){this.#c?.log(e,`Playdeck Variables: ${t}`)}}},5522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playdeckCommandsFactory=void 0;const i=n(8651),r=n(9043);t.playdeckCommandsFactory=class{static create(e){return e?e.isGreaterOrEqualualTo("4.1b11")?new r.PlaydeckCommandsV4(e):new i.PlaydeckCommandsV3(e):null}}},5589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckFeedbacksFactory=void 0;const i=n(6826),r=n(2906);t.PlaydeckFeedbacksFactory=class{static create(e,t){return e&&t?e.isLegacy()?(0,i.PlaydeckFeedbacksDefinitionsV3)(t):(0,r.PlaydeckFeedbacksDefinitionsV4)(t):null}}},5774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradeScripts=void 0,t.UpgradeScripts=[]},6022:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===i(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var r=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=r,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var i,r,s=(r=2,function(e){if(Array.isArray(e))return e}(i=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(i,r)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(i,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s[0],o=s[1];return e[a]=o,e}),{})},t.isArguments=function(e){return null!=e&&r(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var s={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=s,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(s.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),i=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},r=0;r<64;r++)n[i(r)]=r;var s=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},a={encode:function(e){if("string"==typeof e){var t=e;e=s(t.length);for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=r}}for(var a=[],o=null,l=null,c=null,u=null,d=0;d<e.length;d++)switch(d%3){case 0:o=e[d]>>2&63,l=(3&e[d])<<4;break;case 1:l|=e[d]>>4&15,c=(15&e[d])<<2;break;case 2:c|=e[d]>>6&3,u=63&e[d],a.push(i(o)),a.push(i(l)),a.push(i(c)),a.push(i(u)),o=null,l=null,c=null,u=null}return null!=o&&(a.push(i(o)),a.push(i(l)),null==c?a.push("="):a.push(i(c)),null==u&&a.push("=")),a.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var i,r=s(t),a=null,o=null,l=null,c=0,u=0;u<e.length;u++){var d="="===(i=e.charAt(u))?-1:n[i];switch(u%4){case 0:if(d<0)throw new Error("invalid base64 string");a=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");a|=d>>4,r[c++]=a,o=(15&d)<<4;break;case 2:d>=0&&(o|=d>>2,r[c++]=o,l=(3&d)<<6);break;case 3:d>=0&&(r[c++]=l|d)}}return r},newBinary:s};t.Base64=a},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(t,r,s,a,o){var l=r[t];switch(n(l)){case"string":return i(l);case"number":return isFinite(l)?String(l):"null";case"boolean":return String(l);case"object":if(!l)return"null";var c,u=a+s,d=[];if(Array.isArray(l)||{}.hasOwnProperty.call(l,"callee")){for(var p=l.length,h=0;h<p;h+=1)d[h]=e(h,l,s,u,o)||"null";return c=0===d.length?"[]":u?"[\n"+u+d.join(",\n"+u)+"\n"+a+"]":"["+d.join(",")+"]"}var f=Object.keys(l);return o&&(f=f.sort()),f.forEach((function(t){(c=e(t,l,s,u,o))&&d.push(i(t)+(u?": ":":")+c)})),c=0===d.length?"{}":u?"{\n"+u+d.join(",\n"+u)+"\n"+a+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var i="",s=0;s<n.indent;s++)i+=" ";n.indent=i}return r("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,i),s.exports}var r={};!function(){var e=r,t=i(2).Base64,n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var s=i(1),a={};e.EJSON=a;var o=new Map;a.addType=function(e,t){if(o.has(e))throw new Error("Type ".concat(e," already present"));o.set(e,t)};var l=[{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$date")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$regexp")&&(0,s.hasOwn)(e,"$flags")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$InfNaN")&&1===(0,s.lengthOf)(e)},matchObject:s.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$binary")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,s.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$escape")&&1===(0,s.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,s.lengthOf)(e);1!==n&&2!==n||(t=l.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,s.keysOf)(e).forEach((function(n){t[n]=a.toJSONValue(e[n])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,s.keysOf)(e.$escape).forEach((function(n){t[n]=a.fromJSONValue(e.$escape[n])})),t}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$type")&&(0,s.hasOwn)(e,"$value")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return a._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!o.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var i=o.get(t);return n._noYieldsAllowed((function(){return i(e.$value)}))}}];a._isCustomType=function(e){return e&&(0,s.isFunction)(e.toJSONValue)&&(0,s.isFunction)(e.typeName)&&o.has(e.typeName())},a._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?o:(0,s.convertMapToObject)(o)},a._getConverters=function(){return l};var c=function(e){for(var t=0;t<l.length;t++){var n=l[t];if(n.matchObject(e))return n.toJSONValue(e)}},u=function e(t){if(null===t)return null;var n=c(t);return void 0!==n?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var i=t[n];if((0,s.isObject)(i)||void 0===i||(0,s.isInfOrNaN)(i)){var r=c(i);r?t[n]=r:e(i)}})),t):t};a._adjustTypesToJSONValue=u,a.toJSONValue=function(e){var t=c(e);if(void 0!==t)return t;var n=e;return(0,s.isObject)(e)&&(n=a.clone(e),u(n)),n};var d=function(e){if((0,s.isObject)(e)&&null!==e){var t=(0,s.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var n=0;n<l.length;n++){var i=l[n];if(i.matchJSONValue(e))return i.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var n=d(t);return n!==t?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var i=t[n];if((0,s.isObject)(i)){var r=d(i);if(i!==r)return void(t[n]=r);e(i)}})),t):t};a._adjustTypesFromJSONValue=p,a.fromJSONValue=function(e){var t=d(e);return t===e&&(0,s.isObject)(e)&&(t=a.clone(e),p(t)),t},a.stringify=(0,s.handleError)((function(e,t){var n=a.toJSONValue(e);return t&&(t.canonical||t.indent)?i(4)(n,t):JSON.stringify(n)})),a.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return a.fromJSONValue(JSON.parse(e))},a.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},a.equals=function(e,t,n){var i,r=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,s.isObject)(e)||!(0,s.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(a.isBinary(e)&&a.isBinary(t)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}if((0,s.isFunction)(e.equals))return e.equals(t,n);if((0,s.isFunction)(t.equals))return t.equals(e,n);var o,l=Array.isArray(e),c=Array.isArray(t);if(l!==c)return!1;if(l&&c){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!a.equals(e[i],t[i],n))return!1;return!0}switch(a._isCustomType(e)+a._isCustomType(t)){case 1:return!1;case 2:return a.equals(a.toJSONValue(e),a.toJSONValue(t))}var u=(0,s.keysOf)(e),d=(0,s.keysOf)(t);return r?(i=0,o=u.every((function(r){return!(i>=d.length||r!==d[i]||!a.equals(e[r],t[d[i]],n)||(i++,0))}))):(i=0,o=u.every((function(r){return!!(0,s.hasOwn)(t,r)&&!!a.equals(e[r],t[r],n)&&(i++,!0)}))),o&&i===d.length},a.clone=function(e){var t;if(!(0,s.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(a.isBinary(e)){t=a.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(a.clone):(0,s.isArguments)(e)?Array.from(e).map(a.clone):(0,s.isFunction)(e.clone)?e.clone():a._isCustomType(e)?a.fromJSONValue(a.clone(a.toJSONValue(e)),!0):(t={},(0,s.keysOf)(e).forEach((function(n){t[n]=a.clone(e[n])})),t)},a.newBinary=t.newBinary}(),e.exports=r.EJSON}()},6132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var i=n(8895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return i.TCPHelper}});var r=n(1118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return r.TelnetHelper}});var s=n(6259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return s.UDPHelper}})},6250:(e,t,n)=>{"use strict";const i=n(2017);i.code='require("ajv/dist/runtime/equal").default',t.A=i},6259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const i=n(1635).__importDefault(n(7194)),r=n(228),s=n(1400);class a extends r.EventEmitter{#xe;#$e;#be;#se;#Me=!1;#Fe;#C;get isDestroyed(){return this.#Me}constructor(e,t,n){super(),this.#xe=e,this.#$e=t,this.#se={...n},this.#be=i.default.createSocket("udp4");try{this.#be.bind(this.#se.bind_port||0,this.#se.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#se.bind_ip||"0.0.0.0"}:${this.#se.bind_port||0}`)}void 0!==this.#se.ttl&&this.#be.setTTL(this.#se.ttl),void 0!==this.#se.multicast_ttl&&this.#be.setMulticastTTL(this.#se.multicast_ttl),this.#be.on("error",(e=>{this.#Re(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#be.on("listening",(()=>{this.#se.broadcast&&this.#be.setBroadcast(!0),this.#se.multicast_interface&&this.#be.setMulticastInterface(this.#se.multicast_interface),this.#Re(s.InstanceStatus.Ok),this.emit("listening")})),this.#be.on("message",((e,t)=>this.emit("data",e,t))),this.#C=setTimeout((()=>{this.#Me||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#xe}:${this.#$e} is missing an error handler!`)}),5e3)}async send(e){if(this.#Me)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,n)=>{this.#be.send(e,this.#$e,this.#xe,(e=>{e?n(e):t()}))}))}destroy(){this.#Me=!0,void 0!==this.#C&&(clearTimeout(this.#C),this.#C=void 0),this.#be.removeAllListeners(),this.#be.close(),this.removeAllListeners()}#Re(e,t){this.#Fe!=e&&(this.#Fe=e,this.emit("status_change",e,t))}}t.UDPHelper=a},6278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.substituteEscapeCharacters=t.parseEscapeCharacters=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const i=n(1635);i.__exportStar(n(9077),t),i.__exportStar(n(2018),t),i.__exportStar(n(4581),t);var r=n(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return r.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return r.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return r.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return r.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return r.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return r.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return r.assertNever}}),Object.defineProperty(t,"parseEscapeCharacters",{enumerable:!0,get:function(){return r.parseEscapeCharacters}}),Object.defineProperty(t,"substituteEscapeCharacters",{enumerable:!0,get:function(){return r.substituteEscapeCharacters}}),i.__exportStar(n(6160),t);var s=n(4326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return s.runEntrypoint}})},6284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},i=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},r=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},s=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},a=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},o=function(e){return{r:s(e.r,0,255),g:s(e.g,0,255),b:s(e.b,0,255),a:s(e.a)}},l=function(e){return{r:r(e.r),g:r(e.g),b:r(e.b),a:r(e.a,3)}},c=/^#([0-9a-f]{3,8})$/i,u=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,n=e.g,i=e.b,r=e.a,s=Math.max(t,n,i),a=s-Math.min(t,n,i),o=a?s===t?(n-i)/a:s===n?2+(i-t)/a:4+(t-n)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:r}},p=function(e){var t=e.h,n=e.s,i=e.v,r=e.a;t=t/360*6,n/=100,i/=100;var s=Math.floor(t),a=i*(1-n),o=i*(1-(t-s)*n),l=i*(1-(1-t+s)*n),c=s%6;return{r:255*[i,o,a,a,l,i][c],g:255*[l,i,i,o,a,a][c],b:255*[a,a,l,i,i,o][c],a:r}},h=function(e){return{h:a(e.h),s:s(e.s,0,100),l:s(e.l,0,100),a:s(e.a)}},f=function(e){return{h:r(e.h),s:r(e.s),l:r(e.l),a:r(e.a,3)}},m=function(e){return p((n=(t=e).s,{h:t.h,s:(n*=((i=t.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:t.a}));var t,n,i},b=function(e){return{h:(t=d(e)).h,s:(r=(200-(n=t.s))*(i=t.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,n,i,r},y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,g=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C={string:[[function(e){var t=c.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?r(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?r(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v.exec(e)||k.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:o({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=y.exec(e)||g.exec(e);if(!t)return null;var i,r,s=h({h:(i=t[1],r=t[2],void 0===r&&(r="deg"),Number(i)*(n[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return m(s)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,s=e.a,a=void 0===s?1:s;return i(t)&&i(n)&&i(r)?o({r:Number(t),g:Number(n),b:Number(r),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,s=e.a,a=void 0===s?1:s;if(!i(t)||!i(n)||!i(r))return null;var o=h({h:Number(t),s:Number(n),l:Number(r),a:Number(a)});return m(o)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,o=e.a,l=void 0===o?1:o;if(!i(t)||!i(n)||!i(r))return null;var c=function(e){return{h:a(e.h),s:s(e.s,0,100),v:s(e.v,0,100),a:s(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(l)});return p(c)},"hsv"]]},S=function(e,t){for(var n=0;n<t.length;n++){var i=t[n][0](e);if(i)return[i,t[n][1]]}return[null,void 0]},P=function(e){return"string"==typeof e?S(e.trim(),C.string):"object"==typeof e&&null!==e?S(e,C.object):[null,void 0]},I=function(e,t){var n=b(e);return{h:n.h,s:s(n.s+100*t,0,100),l:n.l,a:n.a}},w=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},T=function(e,t){var n=b(e);return{h:n.h,s:n.s,l:s(n.l+100*t,0,100),a:n.a}},_=function(){function e(e){this.parsed=P(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return r(w(this.rgba),2)},e.prototype.isDark=function(){return w(this.rgba)<.5},e.prototype.isLight=function(){return w(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=l(this.rgba)).r,n=e.g,i=e.b,a=(s=e.a)<1?u(r(255*s)):"","#"+u(t)+u(n)+u(i)+a;var e,t,n,i,s,a},e.prototype.toRgb=function(){return l(this.rgba)},e.prototype.toRgbString=function(){return t=(e=l(this.rgba)).r,n=e.g,i=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+i+", "+r+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,r},e.prototype.toHsl=function(){return f(b(this.rgba))},e.prototype.toHslString=function(){return t=(e=f(b(this.rgba))).h,n=e.s,i=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+r+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,r},e.prototype.toHsv=function(){return e=d(this.rgba),{h:r(e.h),s:r(e.s),v:r(e.v),a:r(e.a,3)};var e},e.prototype.invert=function(){return O({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),O(I(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),O(I(this.rgba,-e))},e.prototype.grayscale=function(){return O(I(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),O(T(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),O(T(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?O({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):r(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=b(this.rgba);return"number"==typeof e?O({h:e,s:t.s,l:t.l,a:t.a}):r(t.h)},e.prototype.isEqual=function(e){return this.toHex()===O(e).toHex()},e}(),O=function(e){return e instanceof _?e:new _(e)},N=[];t.Colord=_,t.colord=O,t.extend=function(e){e.forEach((function(e){N.indexOf(e)<0&&(e(_,C),N.push(e))}))},t.getFormat=function(e){return P(e)[1]},t.random=function(){return new _({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},6368:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,s),!0;case 6:return u.fn.call(u.context,t,i,r,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,i);break;case 4:u[c].fn.call(u[c].context,t,i,r);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||r&&!o[l].once||i&&o[l].context!==i)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},6472:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Tally=t.PlaybackState=t.PlaydeckUtils=void 0,t.PlaydeckUtils=class{static RC_REGEX=/\<(.*?)\>/;static convertTimestamp(e){const t=new Date(1e3*e);return e>0?`${this.#Ue(t.getHours())}:${this.#Ue(t.getMinutes())}:${this.#Ue(t.getSeconds())}`:"00:00:00"}static convertFloat(e){return e>0?Math.floor(+e):0}static#Ue(e){return`0${e}`.slice(-2)}static isInEnum(e,t){return Object.values(t).includes(e)}static trimFloat(e,t){return Number(e.toFixed(t))}static makeRCMessage(e,t){if(!e)return"<>";if(!Array.isArray(t))return`<${e}>`;for(let n=0;n<t.length;n++){if(!t[n])return`<${e}>`;e=`${e}|${t[n]}`}return`<${e}>`}static isEmpty(e){return 0===Object.keys(e).length}},function(e){e.None="",e.Stop="stop",e.Pause="pause",e.Play="play",e.Cue="cue"}(n||(t.PlaybackState=n={})),function(e){e[e.None=0]="None",e[e.Preview=1]="Preview",e[e.Program=2]="Program"}(i||(t.Tally=i={}))},6641:(e,t,n)=>{"use strict";const i=n(4617);class r extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,n)=>new Promise(((s,a)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const o=setTimeout((()=>{if("function"==typeof n){try{s(n())}catch(e){a(e)}return}const i=n instanceof Error?n:new r("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),a(i)}),t);i(e.then(s,a),(()=>{clearTimeout(o)}))}));e.exports=s,e.exports.default=s,e.exports.TimeoutError=r},6826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckFeedbacksDefinitionsV3=void 0;const i=n(6278),r=n(6472);t.PlaydeckFeedbacksDefinitionsV3=e=>({checkState:{type:"boolean",name:"Check playback state",description:"Returns the state CLIP in BLOCK (0 for any) in selected playlist",defaultStyle:{bgcolor:(0,i.combineRgb)(255,0,0),color:(0,i.combineRgb)(255,255,255)},options:[{type:"dropdown",id:"playlist",label:"Playlist",default:"1",choices:[{id:1,label:"Left Playlist"},{id:2,label:"Right Playlist"}]},{type:"dropdown",id:"state",label:"State",default:r.PlaybackState.Play,choices:[{id:r.PlaybackState.Play,label:"PLAY"},{id:r.PlaybackState.Pause,label:"PAUSE"},{id:r.PlaybackState.Stop,label:"STOP"},{id:r.PlaybackState.Cue,label:"CUE"}]},s.checkState.textInput("Block"),s.checkState.textInput("Clip")],callback:async(t,n)=>{if(!e)return!1;const i=t.options;let s=!1,a=!1,o=!1;const l=i.state,c=i.playlist,u=await n.parseVariablesInString(i.clip.toString()),d=await n.parseVariablesInString(i.block.toString()),p=isNaN(Number(u))||isNaN(Number(d)),h=0===Number(u),f=0===Number(d),m=h&&f;if(e.lastState&&!1===p){const t=e.lastState.playlist;if(t){const e=t[Number(c)];if(e){const t=[String(e.blockName),String(e.blockNumber)],n=[String(e.clipName),String(e.clipNumber)];return void 0!==l&&(s=String(e.state)===String(l)),void 0!==d&&(o=t.indexOf(String(d))>-1),void 0!==u&&(a=n.indexOf(String(u))>-1),m?s:f||h?f&&s&&a||h&&s&&o:s&&a&&o}}}if(null===e.status||void 0===e.status)return!1;const b=e.status.getValues();if(null==b)return!1;const y=b.channel;if(null==y)return!1;const g=y[Number(c)-1];if(null==g)return!1;if(void 0!==l&&(s=String(g.state)===String(l),!1===s))return!1;if(String(g.state)===String(r.PlaybackState.Stop))return s;const v=[String(g.blockName),String(g.blockID)],k=[String(g.clipName),String(g.blockID)];return void 0!==d&&(o=v.indexOf(String(d))>-1),void 0!==u&&(a=k.indexOf(String(u))>-1),m?s:f||h?f&&s&&a||h&&s&&o:s&&a&&o}}});const s={checkState:{textInput:e=>({type:"textinput",label:`${e} Number/Name (0 for any)`,id:`${e.toLowerCase()}`,default:"0",useVariables:!0})}}},6926:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckState=void 0;const i=n(7980),r=n(5400),s=n(9323),a=n(7678),o=n(6472);t.PlaydeckState=class{lastState={};#c;status;data=null;#_e=null;#Be=null;constructor(e){this.#c=e,this.status=new i.PlaydeckStatus(this.#c),this.#_e=new r.PlaydeckVariables(this.#c),this.data=new a.PlaydeckData(this.#c),this.#t()}#t(){const e=this.#c;if(e)if(e.connectionManager)e.connectionManager.on("incomingStarted",(e=>{this.#We(),e.on("statusMessage",(e=>{this.status.update(e),null!==this.#_e&&(this.#_e.setCurrent(this.status.getValues()),this.#_e.checkData(this.data,this.status.getValues())),null!==this.#Be&&this.#Be.checkFeedbacks()})),e.on("event",(e=>{const t=s.PlaydeckEvents.parseEvent(e);this.#He(t),null!==this.#_e&&(this.#_e.onEvent(t),this.#_e.checkData(this.data,this.status.getValues())),null!==this.#Be&&this.#Be.checkFeedbacks()})),e.on("projectData",(e=>{this.data?.update(e),this.#qe(),null!==this.#_e&&this.#_e.checkData(this.data,this.status.getValues()),null!==this.#Be&&this.#Be.checkFeedbacks()}))}));else{const e="No connection manager!";this.#u("error",e)}else this.#u("error","No instance")}initFeedbacks(e){this.#Be=e}#We(){this.lastState={},this.#c&&(this.status=new i.PlaydeckStatus(this.#c),this.#_e=new r.PlaydeckVariables(this.#c),this.data=new a.PlaydeckData(this.#c))}#qe(){const e=this.data;if(null==e)return;if(o.PlaydeckUtils.isEmpty(this.lastState))return;const t=this.lastState.byID;if(void 0!==t&&!o.PlaydeckUtils.isEmpty(t))for(const n in t)null===e.getItemByID(Number(n))&&delete t[n]}#He(e){const t=e.event;if(void 0===t)return;if(e.source===s.EventSources.Recording)return void(this.lastState.recording=t);let n;const i=e.channel;if(this.#c?.version?.isLegacy()?(void 0===this.lastState.playlist&&(this.lastState.playlist={}),n=this.lastState.playlist):(void 0===this.lastState.channel&&(this.lastState.channel={}),n=this.lastState.channel),i&&n){let r;void 0===n[i]&&(n[i]={});const a=n[i];if(e.blockName&&(a.blockName=e.blockName),e.blockNumber&&(a.blockNumber=e.blockNumber),e.clipName&&(a.clipName=e.clipName),e.clipNumber&&(a.clipNumber=e.clipNumber),-1!==[s.Events.Cue,s.Events.Play,s.Events.Stop,s.Events.Pause,s.Events.Unpause].indexOf(t)){const e=t===s.Events.Unpause?s.Events.Play:t;a.state=e}if(e.source===s.EventSources.Overlay&&(void 0===a.overlay&&(a.overlay={}),r=a.overlay),e.source===s.EventSources.Action&&(void 0===a.action&&(a.action={}),r=a.action),e.blockNumber){const n=e.blockNumber;n&&r&&(r[n]=t)}}const r=e.blockID?e.blockID:e.clipID;r&&(void 0===this.lastState.byID&&(this.lastState.byID={}),this.lastState.byID[r]=t)}#u(e,t){this.#c?.log(e,`Playdeck State: ${t}`)}}},6928:e=>{"use strict";e.exports=require("path")},7e3:(e,t,n)=>{"use strict";const i=n(4865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:r=0,before:s=!1,after:a=!0}=t;if(!s&&!a)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,l,c;const u=function(...t){const i=this,u=s&&!o;return clearTimeout(o),o=setTimeout((()=>{o=void 0,l&&(clearTimeout(l),l=void 0),a&&(c=e.apply(i,t))}),n),r>0&&!l&&a&&(l=setTimeout((()=>{l=void 0,o&&(clearTimeout(o),o=void 0),c=e.apply(i,t)}),r)),u&&(c=e.apply(i,t)),c};return i(u,e),u.cancel=()=>{o&&(clearTimeout(o),o=void 0),l&&(clearTimeout(l),l=void 0)},u}},7194:e=>{"use strict";e.exports=require("dgram")},7281:(e,t,n)=>{"use strict";e.exports=o,e.exports.default=o;const i={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},isPrerelease:{type:"boolean",description:"Is this a pre-release version"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"},url:{type:"string"}},required:["name"],additionalProperties:!1}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"},permissions:{type:"object",description:"Permissions required by the module. This is used to inform the user of the permissions required by the module.\nNote: this requires the node22 or newer runtime",properties:{"worker-threads":{type:"boolean",description:"Enable if the module uses worker threads"},"child-process":{type:"boolean",description:"Enable if the module uses child processes"},"native-addons":{type:"boolean",description:"Enable if the module uses native addons"},filesystem:{type:"boolean",description:"Enable if the module requires read/write access to the filesystem"}},additionalProperties:!1}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}}}},required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},port:{type:"number"},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}}}},required:["type","protocol"]}}},r={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},port:{type:"number"},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}}}},required:["type","protocol"]},s=n(6250).A,a=new RegExp("","u");function o(e,{instancePath:t="",parentData:n,parentDataProperty:l,rootData:c=e}={}){let u=null,d=0;if(0===d){if(!e||"object"!=typeof e||Array.isArray(e))return o.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return o.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.$schema){const n=d;if("string"!=typeof e.$schema)return o.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=n===d}else p=!0;if(p){if(void 0!==e.id){const n=d;if("string"!=typeof e.id)return o.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.name){const n=d;if("string"!=typeof e.name)return o.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.shortname){const n=d;if("string"!=typeof e.shortname)return o.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.description){const n=d;if("string"!=typeof e.description)return o.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.version){const n=d;if("string"!=typeof e.version)return o.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.isPrerelease){const n=d;if("boolean"!=typeof e.isPrerelease)return o.errors=[{instancePath:t+"/isPrerelease",schemaPath:"#/properties/isPrerelease/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.license){const n=d;if("string"!=typeof e.license)return o.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.repository){const n=d;if("string"!=typeof e.repository)return o.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.bugs){const n=d;if("string"!=typeof e.bugs)return o.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.maintainers){let n=e.maintainers;const i=d;if(d===i){if(!Array.isArray(n))return o.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=n.length;for(let i=0;i<e;i++){let e=n[i];const r=d;if(d===r){if(!e||"object"!=typeof e||Array.isArray(e))return o.errors=[{instancePath:t+"/maintainers/"+i,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return o.errors=[{instancePath:t+"/maintainers/"+i,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=d;for(const n in e)if("name"!==n&&"email"!==n&&"github"!==n&&"url"!==n)return o.errors=[{instancePath:t+"/maintainers/"+i,schemaPath:"#/properties/maintainers/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===d){if(void 0!==e.name){const n=d;if("string"!=typeof e.name)return o.errors=[{instancePath:t+"/maintainers/"+i+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=n===d}else f=!0;if(f){if(void 0!==e.email){const n=d;if("string"!=typeof e.email)return o.errors=[{instancePath:t+"/maintainers/"+i+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===d}else f=!0;if(f){if(void 0!==e.github){const n=d;if("string"!=typeof e.github)return o.errors=[{instancePath:t+"/maintainers/"+i+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===d}else f=!0;if(f)if(void 0!==e.url){const n=d;if("string"!=typeof e.url)return o.errors=[{instancePath:t+"/maintainers/"+i+"/url",schemaPath:"#/properties/maintainers/items/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===d}else f=!0}}}}}}if(!(h=r===d))break}if(h){let e,i=n.length;if(i>1)for(;i--;)for(e=i;e--;)if(s(n[i],n[e]))return o.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+i+" are identical)"}],!1}}}p=i===d}else p=!0;if(p){if(void 0!==e.legacyIds){let n=e.legacyIds;const i=d;if(d===i){if(!Array.isArray(n))return o.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var m=!0;const e=n.length;for(let i=0;i<e;i++){const e=d;if("string"!=typeof n[i])return o.errors=[{instancePath:t+"/legacyIds/"+i,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m=e===d))break}if(m){let e,i=n.length;if(i>1){const r={};for(;i--;){let s=n[i];if("string"==typeof s){if("number"==typeof r[s])return e=r[s],o.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+i+" are identical)"}],!1;r[s]=i}}}}}}p=i===d}else p=!0;if(p){if(void 0!==e.runtime){let n=e.runtime;const r=d;if(d===r){if(!n||"object"!=typeof n||Array.isArray(n))return o.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return o.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){let e=n.type;const r=d;if("string"!=typeof e)return o.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return o.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:i.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var b=r===d}else b=!0;if(b){if(void 0!==n.api){let e=n.api;const r=d;if("string"!=typeof e)return o.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return o.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:i.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;b=r===d}else b=!0;if(b){if(void 0!==n.apiVersion){const e=d;if("string"!=typeof n.apiVersion)return o.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;b=e===d}else b=!0;if(b){if(void 0!==n.entrypoint){const e=d;if("string"!=typeof n.entrypoint)return o.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;b=e===d}else b=!0;if(b)if(void 0!==n.permissions){let e=n.permissions;const i=d;if(d===i){if(!e||"object"!=typeof e||Array.isArray(e))return o.errors=[{instancePath:t+"/runtime/permissions",schemaPath:"#/properties/runtime/properties/permissions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const n=d;for(const n in e)if("worker-threads"!==n&&"child-process"!==n&&"native-addons"!==n&&"filesystem"!==n)return o.errors=[{instancePath:t+"/runtime/permissions",schemaPath:"#/properties/runtime/properties/permissions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===d){if(void 0!==e["worker-threads"]){const n=d;if("boolean"!=typeof e["worker-threads"])return o.errors=[{instancePath:t+"/runtime/permissions/worker-threads",schemaPath:"#/properties/runtime/properties/permissions/properties/worker-threads/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var y=n===d}else y=!0;if(y){if(void 0!==e["child-process"]){const n=d;if("boolean"!=typeof e["child-process"])return o.errors=[{instancePath:t+"/runtime/permissions/child-process",schemaPath:"#/properties/runtime/properties/permissions/properties/child-process/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=n===d}else y=!0;if(y){if(void 0!==e["native-addons"]){const n=d;if("boolean"!=typeof e["native-addons"])return o.errors=[{instancePath:t+"/runtime/permissions/native-addons",schemaPath:"#/properties/runtime/properties/permissions/properties/native-addons/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=n===d}else y=!0;if(y)if(void 0!==e.filesystem){const n=d;if("boolean"!=typeof e.filesystem)return o.errors=[{instancePath:t+"/runtime/permissions/filesystem",schemaPath:"#/properties/runtime/properties/permissions/properties/filesystem/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=n===d}else y=!0}}}}}b=i===d}else b=!0}}}}}p=r===d}else p=!0;if(p){if(void 0!==e.manufacturer){const n=d;if("string"!=typeof e.manufacturer)return o.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=n===d}else p=!0;if(p){if(void 0!==e.products){let n=e.products;const i=d;if(d===i){if(!Array.isArray(n))return o.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(n.length<1)return o.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var g=!0;const e=n.length;for(let i=0;i<e;i++){const e=d;if("string"!=typeof n[i])return o.errors=[{instancePath:t+"/products/"+i,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(g=e===d))break}if(g){let e,i=n.length;if(i>1){const r={};for(;i--;){let s=n[i];if("string"==typeof s){if("number"==typeof r[s])return e=r[s],o.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+i+" are identical)"}],!1;r[s]=i}}}}}}p=i===d}else p=!0;if(p){if(void 0!==e.keywords){let n=e.keywords;const i=d;if(d===i){if(!Array.isArray(n))return o.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var v=!0;const e=n.length;for(let i=0;i<e;i++){const e=d;if("string"!=typeof n[i])return o.errors=[{instancePath:t+"/keywords/"+i,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v=e===d))break}if(v){let e,i=n.length;if(i>1){const r={};for(;i--;){let s=n[i];if("string"==typeof s){if("number"==typeof r[s])return e=r[s],o.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+i+" are identical)"}],!1;r[s]=i}}}}}}p=i===d}else p=!0;if(p)if(void 0!==e.bonjourQueries){let n=e.bonjourQueries;const i=d;if(d===i){if(!n||"object"!=typeof n||Array.isArray(n))return o.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in n)if(a.test(e)){let i=n[e];const s=d,l=d;let c=!1,p=null;const h=d;if(d==d)if(i&&"object"==typeof i&&!Array.isArray(i)){let n;if(void 0===i.type&&(n="type")||void 0===i.protocol&&(n="protocol")){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===u?u=[i]:u.push(i),d++}else{if(void 0!==i.type){const n=d;if("string"!=typeof i.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}var k=n===d}else k=!0;if(k){if(void 0!==i.protocol){let n=i.protocol;const s=d;if("string"!=typeof n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}if("tcp"!==n&&"udp"!==n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:r.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===u?u=[n]:u.push(n),d++}k=s===d}else k=!0;if(k){if(void 0!==i.port){let n=i.port;const r=d;if("number"!=typeof n||!isFinite(n)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/port",schemaPath:"#/definitions/bonjourQuery/properties/port/type",keyword:"type",params:{type:"number"},message:"must be number"};null===u?u=[n]:u.push(n),d++}k=r===d}else k=!0;if(k)if(void 0!==i.txt){let n=i.txt;const r=d;if(d===r)if(n&&"object"==typeof n&&!Array.isArray(n)){for(const i in n)if(a.test(i)){const r=d;if("string"!=typeof n[i]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}if(r!==d)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}k=r===d}else k=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}h===d&&(c=!0,p=0);const f=d;if(d===f)if(Array.isArray(i)){const n=i.length;for(let s=0;s<n;s++){let n=i[s];const o=d;if(d==d)if(n&&"object"==typeof n&&!Array.isArray(n)){let i;if(void 0===n.type&&(i="type")||void 0===n.protocol&&(i="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:i},message:"must have required property '"+i+"'"};null===u?u=[n]:u.push(n),d++}else{if(void 0!==n.type){const i=d;if("string"!=typeof n.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}var C=i===d}else C=!0;if(C){if(void 0!==n.protocol){let i=n.protocol;const a=d;if("string"!=typeof i){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}if("tcp"!==i&&"udp"!==i){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:r.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===u?u=[n]:u.push(n),d++}C=a===d}else C=!0;if(C){if(void 0!==n.port){let i=n.port;const r=d;if("number"!=typeof i||!isFinite(i)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/port",schemaPath:"#/definitions/bonjourQuery/properties/port/type",keyword:"type",params:{type:"number"},message:"must be number"};null===u?u=[n]:u.push(n),d++}C=r===d}else C=!0;if(C)if(void 0!==n.txt){let i=n.txt;const r=d;if(d===r)if(i&&"object"==typeof i&&!Array.isArray(i)){for(const n in i)if(a.test(n)){const r=d;if("string"!=typeof i[n]){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[i]:u.push(i),d++}if(r!==d)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}C=r===d}else C=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+s,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}if(o!==d)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[n]:u.push(n),d++}var S;if((S=f===d)&&c?(c=!1,p=[p,1]):S&&(c=!0,p=1),!c){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};return null===u?u=[n]:u.push(n),d++,o.errors=u,!1}if(d=l,null!==u&&(l?u.length=l:u=null),s!==d)break}}p=i===d}else p=!0}}}}}}}}}}}}}}}}}return o.errors=u,0===d}},7386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variableItemsV4=void 0;const i=n(9323),r=n(6472);t.variableItemsV4=[{getVariableDefinition:()=>({variableId:"project_filename",name:"Current project filename"}),getCurrentValue:e=>{if(e.common)return e.common.projectFileName},channel:!1,version:"4.1b11",deprecated:null},{getVariableDefinition:()=>({variableId:"project_name",name:"Current project name"}),getCurrentValue:e=>{if(e.common)return e.common.projectName},channel:!1,version:"4.1b11",deprecated:null},{getVariableDefinition:()=>({variableId:"project_clock",name:"Current project clock"}),getCurrentValue:e=>{if(e.common)return e.common.clockTime},channel:!1,version:"4.1b11",deprecated:null},{getVariableDefinition:()=>({variableId:"project_timestamp",name:"Current project time with date (YYYY-MM-DD HH:mm:ss)"}),getCurrentValue:e=>{if(e.common)return e.common.timestamp},channel:!1,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_play_state`,name:`Play state of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel){const n=e.channel[t].playState;return n!==r.PlaybackState.None?n:null}},getValueFromEvent:(e,t)=>{if(void 0===t||void 0===e.channel)return null;if(t!==e.channel-1)return null;if((e.source===i.EventSources.Channel||e.source===i.EventSources.Clip)&&void 0!==e.event){const t=e.event;if(r.PlaydeckUtils.isInEnum(t,r.PlaybackState))return t}return null},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_tally`,name:`Tally state of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].tallyStatus},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_state`,name:`Ready state of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].channelState},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_name`,name:`Ready state of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].channelName},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_count`,name:`Amount of blocks in channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockCount},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_name`,name:`Current clip name on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipName},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_id`,name:`Current clip UID on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipID},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_position`,name:`Current clip playhead position on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipPosition},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_duration`,name:`Current clip duration on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipDuration},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_time_end`,name:`Time when current clip ends on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipEnd},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_remain`,name:`Current clip remain on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipRemain},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_progress`,name:`Current clip progress in percents on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipProgress},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_name`,name:`Current block name on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockName},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_id`,name:`Current block UID on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockID},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_position`,name:`Current block playhead position on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockPosition},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_duration`,name:`Current block duration on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockDuration},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_time_end`,name:`Time when current block ends on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockEnd},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_remain`,name:`Current block remain on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockRemain},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_progress`,name:`Current block progress in percents on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockProgress},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_scheduled_method`,name:`Current block_scheduled_method on channel #${e+1}`},getFromData(e,t){if(void 0===t)return;if(!e?.data||!e.current)return;if(null===e.current.channel)return;if(void 0===e.current.channel[t])return;const n=e.current.channel[t].blockID;if(void 0===n)return;const i=e.data.getItemByID(n);return null!==i?i.scheduledMethod:void 0},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_filetype`,name:`Current clip file type on channel #${e+1}`},getFromData(e,t){if(void 0===t)return;if(!e?.data||!e.current)return;if(null===e.current.channel)return;if(void 0===e.current.channel[t])return;const n=e.current.channel[t].clipID;if(void 0===n)return;const i=e.data.getItemByID(n);return null!==i?i.fileType:void 0},channel:!0,version:"4.1b11",deprecated:null},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_type`,name:`Current clip type on channel #${e+1}`},getFromData(e,t){if(void 0===t)return;if(!e?.data||!e.current)return;if(null===e.current.channel)return;if(void 0===e.current.channel[t])return;const n=e.current.channel[t].clipID;if(void 0===n)return;const i=e.data.getItemByID(n);return null!==i?i.itemType:void 0},channel:!0,version:"4.1b11",deprecated:null}]},7476:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckFeedbacks=void 0;const i=n(5589);t.PlaydeckFeedbacks=class{#c;#Be={};constructor(e){this.#c=e,this.#Be=i.PlaydeckFeedbacksFactory.create(this.#c.version,this.#c.state),this.#t()}#t(){this.#c.setFeedbackDefinitions(this.#Be)}checkFeedbacks(){this.#c.checkFeedbacks("checkState")}}},7678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckData=void 0;const i=n(6278),r=n(4874);t.PlaydeckData=class{#c;#Ye=null;#Ge=null;constructor(e){this.#c=e}getValues(){return this.#Ge}getItemByID(e){return null===this.#Ye?null:this.#Ye.getItemByID(e)}getChannelByID(e){return null===this.#Ye?null:this.#Ye.getChannelByID(e)}update(e){if(this.#c&&"string"==typeof e)try{const t=JSON.parse(e);if(null!==t&&null!==this.#c.version){if(this.#Ye=r.PlaydeckDataFactory.create(this.#c.version,t),null===this.#Ye)return;if(this.#Ge=this.#Ye.getValues(),null===this.#Ge)return this.#u("warn","Cannot read data!"),void this.#b(i.InstanceStatus.BadConfig,"Data read error.")}}catch(e){console.log(`PlaydeckData.update(data) error: ${e}`)}}#u(e,t){this.#c?.log(e,`PlaydeckDataHandler: ${t}`)}#b(e,t){this.#c?.updateStatus(e,`PlaydeckDataHandler: ${t}`)}}},7966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckCommands=void 0,t.PlaydeckCommands=class extends Array{constructor(e,t){let n=t;n=n.filter((t=>null!==t.version&&e.isGreaterOrEqualualTo(t.version)&&(null===t.deprecated||e.isLowerThan(t.deprecated)))),super(...n)}static commands}},7980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckStatus=void 0;const i=n(759),r=n(6278);t.PlaydeckStatus=class{#c;#Ge=null;constructor(e){this.#c=e}update(e){if(this.#c&&"string"==typeof e)try{const t=JSON.parse(e);if(null!==t&&null!==this.#c.version){const e=i.PlaydeckStatusFactory.create(this.#c.version,t);if(null===e)return;if(this.#Ge=e.getValues(),null===this.#Ge)return this.#ze("warn","Cannot read status, check version in config!"),void this.#Je(r.InstanceStatus.BadConfig,"Probably wrong version")}}catch(e){this.#u("error",`${e}`)}}getValues(){return this.#Ge}#Je(e,t){this.#c?.lazyUpdateStatus(e,`PlaydeckStatusHandler (lazy): ${t}`)}#ze(e,t){this.#c?.lazyLog(e,`PlaydeckStatusHandler (lazy): ${t}`)}#u(e,t){this.#c?.log(e,`PlaydeckStatusHandler: ${t}`)}}},8039:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const i=n(1635),r=n(2593),s=i.__importDefault(n(7e3));function a(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#Pe;#Qe;#Ke;#u;#Xe=new Map;#Ze=new Map;#et=new Map;#tt=new Map;#nt;get parseVariablesContext(){return this.#nt}constructor(e,t,n,i){this.#Pe=e,this.#Qe=t,this.#Ke=n,this.#u=i}getDefinitionIds(){return Array.from(this.#Xe.keys())}getInstanceIds(){return Array.from(this.#Ze.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#Ze.get(t);if(e){const t=this.#Xe.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(a(t.type,e),n)).catch((t=>{this.#u("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#Ze.delete(t);else{this.#Ze.set(t,{...n,referencedVariables:null});const e=this.#Xe.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#Pe({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(a(e.type,n),t)).catch((e=>{this.#u("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}this.#it(t)}}}async handleLearnFeedback(e){const t=this.#Xe.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#tt.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#Ze.values())if(!this.#tt.has(e.id)&&e.referencedVariables)for(const i of e.referencedVariables)if(t.has(i)){n.add(e.id);break}for(const e of n)setImmediate((()=>{this.#it(e)}))}#it(e){const t=this.#tt.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#Ze.get(e);if(!n)return;const i=n,r={needsRecheck:!1,changedVariables:new Set};this.#tt.set(e,r),Promise.resolve().then((async()=>{const t=this.#Xe.get(i.feedbackId);let n;const r=new Set;if(t){this.#nt=`Feedback ${i.feedbackId} (${e})`;const s={parseVariablesInString:async t=>{const n=await this.#Pe({text:t,controlId:i.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)r.add(e);return n.text}};n="boolean"===t.type?t.callback({...a("boolean",i),type:"boolean"},s):t.callback({...a("advanced",i),type:"advanced",image:i.image},s),this.#nt=void 0}const s=await n;this.#et.set(e,{id:e,controlId:i.controlId,value:s}),this.#rt(),i.referencedVariables=r.size>0?Array.from(r):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(i)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#nt=void 0,this.#tt.delete(e);let t=!1;if(i.referencedVariables)for(const e of i.referencedVariables)if(r.changedVariables.has(e)){t=!0;break}(t||r.needsRecheck)&&setImmediate((()=>{this.#it(e)}))}))}#rt=(0,s.default)((()=>{const e=this.#et;this.#et=new Map,e.size>0&&this.#Qe({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#Xe.clear();for(const[n,i]of Object.entries(e))i&&(t.push({id:n,name:i.name,description:i.description,options:(0,r.serializeIsVisibleFn)(i.options),type:i.type,defaultStyle:"boolean"===i.type?i.defaultStyle:void 0,hasLearn:!!i.learn,learnTimeout:i.learnTimeout,showInvert:"boolean"===i.type&&i.showInvert}),this.#Xe.set(n,i));this.#Ke({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#Ze.entries())this.#Xe.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#it(e)}checkFeedbacksById(e){for(const t of e)this.#it(t)}subscribeFeedbacks(e){let t=Array.from(this.#Ze.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#Xe.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(a(t.type,e),n)).catch((t=>{this.#u("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#Ze.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#Xe.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#Pe({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(a(t.type,e),n)).catch((t=>{this.#u("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},8104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variableItemsV3=void 0;const i=n(9323),r=n(6472);t.variableItemsV3=[{getVariableDefinition:()=>({variableId:"general_playlist_file",name:"Current playlist file"}),getCurrentValue:e=>{if(e.common)return e.common.playlistFile},channel:!1,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:()=>({variableId:"general_active_channels",name:"Number of active channels"}),getCurrentValue:e=>{if(e.common)return e.common.activeChannels},channel:!1,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:()=>({variableId:"general_production_mode",name:"Production Mode state"}),getCurrentValue:e=>{if(e.common)return e.common.productionMode},channel:!1,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:()=>({variableId:"general_recording",name:"Recording state"}),getCurrentValue:e=>{if(e.common)return e.common.isRecording},channel:!1,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:()=>({variableId:"general_recording_duration",name:"Recording duration in seconds"}),getCurrentValue:e=>{if(e.common)return e.common.recordingDuration},channel:!1,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_playing_state`,name:`Play state of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].state},getValueFromEvent:(e,t)=>{if(void 0===t||void 0===e.channel)return null;if(t!==e.channel-1)return null;if((e.source===i.EventSources.Playlist||e.source===i.EventSources.Clip)&&void 0!==e.event){const t=e.event;if(r.PlaydeckUtils.isInEnum(t,r.PlaybackState))return t}return null},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_id`,name:`Current block ID of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockID},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_name`,name:`Current block name of channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockName},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_block_time_end`,name:`Time when block on channel #${e+1} ends`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].blockTimeEnd},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_id`,name:`Current clip ID on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipID},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_type`,name:`Current clip type on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipType},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_name`,name:`Current clip name on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipName},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_progress`,name:`Current clip progress in percents on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipProgress},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_duration`,name:`Current clip duration in seconds on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipDuration},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_remaining`,name:`Current clip  remaining time in seconds on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipRemaining},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_position`,name:`Current clip  elapsed time in seconds on channel #${e+1}`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipPosition},channel:!0,version:"3.6b18",deprecated:"4.1b11"},{getVariableDefinition:e=>void 0===e?null:{variableId:`channel_${e+1}_clip_time_end`,name:`Time when current clip on channel #${e+1} ends`},getCurrentValue:(e,t)=>{if(void 0!==t&&null!==e.channel)return e.channel[t].clipTimeEnd},channel:!0,version:"3.6b18",deprecated:"4.1b11"}]},8308:(e,t)=>{"use strict";var n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayState=t.ChannelState=t.DirectorType=void 0,function(e){e[e.SingleChannel=1]="SingleChannel",e[e.DualChannel=2]="DualChannel",e[e.FourChannel=3]="FourChannel",e[e.EightChannel=4]="EightChannel"}(n||(t.DirectorType=n={})),function(e){e[e.Started=0]="Started",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Error=3]="Error"}(i||(t.ChannelState=i={})),function(e){e[e.Stop=0]="Stop",e[e.Cue=1]="Cue",e[e.Play=2]="Play",e[e.Pause=3]="Pause",e[e.Changing=4]="Changing"}(r||(t.PlayState=r={}))},8410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckClipData=t.PlaydeckBlockData=t.PlaydeckDataV4=void 0;const i=n(6472),r=n(8308),s=n(4656);t.PlaydeckDataV4=class{#U=null;#B=null;#st=null;#W=null;constructor(e){this.#W=e}getChannelByID(e){return null===this.#B||null===this.#st?null:this.#st.channels.get(e)||null}getItemByID(e){return null===this.#B||null===this.#st?null:this.#st.blocks.get(e)||this.#st.clips.get(e)||null}getValues(){return null===this.#W?null:(this.#U=this.#H(),this.#B=this.#q(),null===this.#U||null===this.#B?null:(this.#at(),{common:this.#U,channel:this.#B}))}#at(){if(null===this.#B)return;const e=new Map,t=new Map,n=new Map;this.#B.forEach(((i,r)=>{const s=r+1;if(void 0!==i.block)for(const r of i.block){if(e.set(r.id,r),n.set(r.id,s),void 0===r.clip)return;for(const e of r.clip)t.set(e.id,e),n.set(e.id,s)}})),this.#st={blocks:e,clips:t,channels:n}}#H(){if(null===this.#W)return null;if(void 0===this.#W.Project)return null;const e=this.#W.Project;return{projectName:e.ProjectName,projectFileName:e.ProjectFilename,clockTime:e.ClockTime,timestamp:e.Timestamp,timestampUnix:e.TimestampUnix}}#q(){return null===this.#W||void 0===this.#W.Channel?null:this.#W.Channel.map((e=>new o(e)))}};class a{canPlay;name;number;id;active;duration;constructor(e){this.canPlay=e.CanPlay,this.name=e.Name,this.number=e.Number,this.id=e.ID,this.active=e.Active,this.duration=e.DurationString}}class o{channelState;channelName;blockCount;stageWidth;stageHeight;block;constructor(e){this.channelState=r.ChannelState[e.ChannelState],this.channelName=e.ChannelName,this.blockCount=e.BlockCount,this.stageWidth=e.StageWidth,this.stageHeight=e.StageHeight;const t=e.Block;void 0!==t&&(this.block=t.map((e=>new l(e))))}}class l extends a{clipCount;stopType;stopFollowTime;loopClips;breakOption;jumpUniqueID;shuffleType;shuffleClips;scheduled;scheduledWithDay;scheduledWithRepeat;scheduledRepeatDuration;scheduledMethod;clip;constructor(e){super(e),this.clipCount=e.ClipCount,this.stopType=e.StopType,this.stopFollowTime=e.StopFollowTime,this.loopClips=this.stopType===s.StopType.LoopClips?e.LoopClips:void 0,this.breakOption=this.stopType===s.StopType.Break?s.BreakOption[e.BreakOption]:void 0,this.jumpUniqueID=this.stopType===s.StopType.JumpToBlock?e.JumpUniqueID:void 0,this.shuffleType=e.ShuffleType,this.shuffleClips=e.ShuffleClips,this.scheduled=i.PlaydeckUtils.convertTimestamp(e.ScheduledUnix);const t=e.ScheduledMethod!==s.ScheduledMethod.None;this.scheduledWithDay=t?e.ScheduledWithDay:void 0,this.scheduledWithRepeat=t?e.ScheduledWithRepeat:void 0,this.scheduledRepeatDuration=t?e.ScheduledRepeatDuration:void 0,this.scheduledMethod=e.ScheduledMethodString;const n=e.Clip;void 0!==n&&(this.clip=n.map((e=>new c(e))))}}t.PlaydeckBlockData=l;class c extends a{itemType;fileName;fileSize;fileDate;fileType;itemInput;transitionType;transitionTime;durationGfx;durationGfxType;durationGfxClock;pauseMode;pauseFollow;pauseFollowTime;muteAudio;gain;gainCustom;ebuGain;ebuScanned;scaleType;cutIn;cutOut;cutOutRelative;cropLeft;cropTop;cropRight;cropBottom;loopType;loopSeconds;loopCount;loopClock;loopPartial;videoTrack;audioTrack;subtitleTrack;subtitleOffset;constructor(e){super(e),this.itemType=s.ItemType[e.ItemType],this.fileName=e.ItemType===s.ItemType.File?e.FileName:void 0,this.fileSize=e.ItemType===s.ItemType.File?e.FileSizeString:void 0,this.fileDate=e.ItemType===s.ItemType.File?e.FileDateString:void 0,this.fileType=e.FileTypeString,this.itemInput=e.ItemType===s.ItemType.Input?e.ItemInput:void 0,this.transitionType=e.TransitionType,this.transitionTime=this.transitionType!==s.TransitionType.None?i.PlaydeckUtils.trimFloat(e.TransitionTime,2):void 0,this.durationGfx=e.DurationGfxType===s.DurationGfxType.Duration?e.DurationGfx:void 0,this.durationGfxType=s.DurationGfxType[e.DurationGfxType],this.durationGfxClock=e.DurationGfxType===s.DurationGfxType.UntilTime?i.PlaydeckUtils.convertTimestamp(e.DurationGfxClockUnix):void 0,this.pauseMode=s.PauseMode[e.PauseMode],this.pauseFollow=e.PauseMode!==s.PauseMode.None?s.PauseFollow[e.PauseFollow]:void 0,this.pauseFollowTime=e.PauseMode!==s.PauseMode.None&&e.PauseFollow!==s.PauseFollow.None?e.PauseFollowTime:void 0,this.muteAudio=e.MuteAudio,this.gain=e.Gain,this.gainCustom=e.GainCustom,this.ebuGain=e.EBUGain,this.ebuScanned=e.EBUScanned,this.scaleType=e.ScaleType,this.cutIn=i.PlaydeckUtils.trimFloat(e.CutIn,2),this.cutOut=i.PlaydeckUtils.trimFloat(e.CutOut,2),this.cutOutRelative=e.CutOutRelative,this.cropLeft=e.CropLeft,this.cropTop=e.CropTop,this.cropRight=e.CropRight,this.cropBottom=e.CropBottom,this.loopType=s.LoopType[e.LoopType],this.loopSeconds=e.LoopType===s.LoopType.ForTime?e.LoopSeconds:void 0,this.loopCount=e.LoopType===s.LoopType.UntilClip?e.LoopCount:void 0,this.loopClock=e.LoopType===s.LoopType.UntilTime?i.PlaydeckUtils.convertTimestamp(e.LoopClock):void 0,this.loopPartial=e.LoopType===s.LoopType.ForTime||e.LoopType===s.LoopType.UntilTime?e.LoopPartial:void 0,this.videoTrack=e.VideoTrack,this.audioTrack=e.AudioTrack,this.subtitleTrack=e.SubtitleTrack,this.subtitleOffset=i.PlaydeckUtils.trimFloat(e.SubtitleOffset,2)}}t.PlaydeckClipData=c},8651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckCommandsV3=void 0;const i=n(7966),r=n(6278),s=n(6472);class a extends i.PlaydeckCommands{constructor(e){super(e,a.commands)}#ot(e,t){const n={type:"dropdown",id:`arg${t}`,label:"AUTOPLAY:",default:"0",choices:[{id:"0",label:"Nothing happens after loading"},{id:"1",label:"Starts with clip 1"},{id:"2",label:"Restarts on last known position"}]},i={type:"dropdown",id:`arg${t}`,label:"RESET clip properties:",default:"1",choices:[{id:"0",label:"DON'T RESET"},{id:"1",label:"RESET"}]},a={type:"dropdown",id:`arg${t}`,label:"METHOD:",default:"1",choices:[{id:"1",label:"Crossfade to the Next Clip in the Playlist"},{id:"2",label:"Crossfade to your current Playlist Selection"}]},o={type:"number",id:`arg${t}`,label:`${e} ID:`,min:1,max:30,default:1,required:!0,range:!1},l=(n,i)=>({type:"textinput",id:`arg${t}`,label:`${e}:`,required:!0,regex:n,useVariables:!0,tooltip:i});return"PLAYLIST"===e?{type:"dropdown",id:`arg${t}`,label:"PLAYLIST:",default:"1",choices:[{id:"1",label:"Left Playlist"},{id:"2",label:"Right Playlist"}]}:e.includes("CLIP")||e.includes("ACTION")||e.includes("BLOCK")?o:"COMMAND"===e?l(`${s.PlaydeckUtils.RC_REGEX}`,"Write custom command like <{command}|{playlist_id}|?{block_id}|?{clip_id}"):["FILENAME","TARGET","OVERLAY"].indexOf(e)>-1?l(`${r.Regex.SOMETHING}`,"Here might be any string value..."):"METHOD"===e?a:"AUTOPLAY"===e?n:"RESET"===e?i:e.includes("PATTERN")?l(`${r.Regex.SOMETHING}`,'PATTERN is a flexible naming construction.\n- b#5 (Block 5)\n- b:myname (First Blockname containing "myname")\n- c#5 OR c:myname (Same for Clips)\n- p:HH:MM:SS:FF (Clip Position as Timestamp)\n- b#5 c:myname p:0:05:31:00 (Clip "*myname*" in Block 5 at Clip Pos 0:05:31:00)\nTip 1: Use "c:name1 c:name2 c:name3" for multisearch aka "Use name1 if exist, else ..."\nTip 2: Use negative Clip Position to jump to Clip Duration minus Position eg "p:-30:00"'):void 0}getOptions(e){const t=[e.arg1,e.arg2,e.arg3],n=[];for(let e=0;e<t.length;e++){const i=t[e];if(void 0!==i){const t=this.#ot(i,e+1);t&&n.push(t)}}return n}static commands=[{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - Custom Command",command:"customcommand",description:"Send custom command...",arg1:"COMMAND"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - CUE",command:"cue",description:"CUE the Clip in the Playlist. If you dont provide Clip, the first Clip of the Block will be CUE'd. If you dont provide Block/Clip, the current selected Clip will be CUE'd.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - CUE and PLAY",command:"cueandplay",description:"CUE and PLAY a the Clip in the Playlist. If you dont provide Clip, the first Clip of the Block will be CUE'd. If you dont provide Block/Clip, the current selected Clip will be CUE'd.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.7b4",deprecated:"4.1b11",commandName:"CONTROL - CUE NEXT",command:"cuenext",description:"CUE the next Clip. Can be manual set with MARK NEXT. If Block end is reached, it will either select the next Block or loop.",arg1:"PLAYLIST"},{version:"3.7b4",deprecated:"4.1b11",commandName:"CONTROL - CUE NEXT and PLAY",command:"cueandplaynext",description:"PLAY the next Clip. Can be manual set with MARK NEXT. If Block end is reached, it will either select the next Block or loop.",arg1:"PLAYLIST"},{version:"3.6b6",deprecated:"4.1b11",commandName:"CONTROL - CUE NEXT BLOCK",command:"cuenextblock",description:"CUE the first Clip of the next Block in the Playlist. If called from the last Block, the first Block of the Playlist will be used.",arg1:"PLAYLIST"},{version:"3.6b6",deprecated:"4.1b11",commandName:"CONTROL - CUE NEXT BLOCK and PLAY",command:"cueandplaynextblock",description:"PLAY the first Clip of the next Block in the Playlist. If called from the last Block, the first Block of the Playlist will be used.",arg1:"PLAYLIST"},{version:"3.6b18",deprecated:"4.1b11",commandName:"CONTROL - CUE FLEX",command:"cueflex",description:"CUE a Block/Clip in the Playlist.",arg1:"PLAYLIST",arg2:"PATTERN"},{version:"3.6b18",deprecated:"4.1b11",commandName:"CONTROL - CUE FLEX and PLAY",command:"cueandplayflex",description:"PLAY a Block/Clip in the Playlist.",arg1:"PLAYLIST",arg2:"PATTERN"},{version:"3.6b18",deprecated:"4.1b11",commandName:"CONTROL - CUE and PLAY (Sync)",command:"cueandplaysync",description:"SYNC CUEPLAY two Blocks in both Playlists. Uses SYNC Caching if enabled.",arg1:"PL1 BLOCK",arg2:"PL2 BLOCK"},{version:"3.6b18",deprecated:"4.1b11",commandName:"CONTROL - CUE FLEX and PLAY (Sync)",command:"cueandplaysyncflex",description:"SYNC CUEPLAY two Blocks in both Playlists. Uses SYNC Caching if enabled.",arg1:"PL1 PATTERN",arg2:"PL2 PATTERN"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - PLAY",command:"play",description:"Start playback of CUE'd or paused Clip. Does nothing, if any Clip is already playing. If no Clip is playing, will start the selected Clip. If SYNC is enabled, will start both Playlists.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - STOP",command:"stop",description:"Stop the playback of the Playlist. If SYNC is enabled, will stop both Playlists.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - PAUSE",command:"pause",description:"Pause the playback of the Playlist. Does nothing, if any Clip is already paused. If SYNC is enabled, will pause both Playlists.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"3.7b4",commandName:"CONTROL - JUMP",command:"jump",description:"JUMP to the end of the Clip in the Playlist with a certain amount of SECONDS left (set in Playdeck).",arg1:"PLAYLIST"},{version:"3.7b4",deprecated:"4.1b11",commandName:"CONTROL - JUMP to start",command:"jumpstart",description:"Jump the playhead to the start of the current Clip. Timing can be changed in the Settings.",arg1:"PLAYLIST"},{version:"3.7b4",deprecated:"4.1b11",commandName:"CONTROL - JUMP to end",command:"jumpend",description:"Jump the playhead to the end of the current Clip. Timing can be changed in the Settings.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - PLAY previous",command:"previousclip",description:"Play the previous Clip in the Playlist, even if its in the previous Block. If the playback is paused, the previous Clip will be CUE'd.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"3.7b4",commandName:"CONTROL - NEXT CLIP",command:"nextclip",description:"The Playback jumps to the NEXT available Clip in the Playlist and also skips Block Separators (e.g. Pause, Stop). The Playback Status of PLAY/PAUSE will stay the same.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - FADE IN",command:"fadein",description:"Fade in the selected Clip from Background. Does nothing, if any Clip is playing.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - FADE OUT",command:"fadeout",description:"Fade out the playing Clip into Background.",arg1:"PLAYLIST"},{version:"3.8b8",deprecated:"4.1b11",commandName:"CONTROL - CROSSFADE",command:"crossfade",description:"Crossfade to another Clip.",arg1:"PLAYLIST",arg2:"METHOD"},{version:"3.2b2",deprecated:"4.1b11",commandName:"CONTROL - RESTART",command:"restartclip",description:"Restart the playback of the current playing Clip. If the playback is paused, the current Clip will be CUE'd.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"OVERLAY - PLAY",command:"playoverlay",description:'Show an Overlay. You can define multiple overlays at once e.g. "<playoverlay|1|3+7+12>"',arg1:"PLAYLIST",arg2:"OVERLAY"},{version:"3.2b2",deprecated:"4.1b11",commandName:"OVERLAY - STOP",command:"stopoverlay",description:'Hide an Overlay. You can define multiple overlays at once e.g. "<playoverlay|1|3+7+12>"',arg1:"PLAYLIST",arg2:"OVERLAY"},{version:"3.5b12",deprecated:"4.1b11",commandName:"OVERLAY - TOGGLE",command:"toggleoverlay",description:'Toggle an Overlay. You can define multiple overlays at once e.g. "<playoverlay|1|3+7+12>"',arg1:"PLAYLIST",arg2:"OVERLAY"},{version:"3.2b2",deprecated:"4.1b11",commandName:"OVERLAY - STOP ALL",command:"stopalloverlays",description:"Hide all Overlays, which are currently active.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"ACTION - PLAY",command:"playaction",description:"Play an Action.",arg1:"PLAYLIST"},{version:"3.7b4",deprecated:"4.1b11",commandName:"ACTION - PLAY (Sync)",command:"playactionsync",description:"SYNC Play Action in both Playlists.",arg1:"PL1 ACTION",arg2:"PL2 ACTION"},{version:"3.6b6",deprecated:"4.1b11",commandName:"EDITING - LOAD Playlist",command:"loadplaylist",description:"Loads a new Playlist of Type XML. Interrupts all current operations.",arg1:"AUTOPLAY",arg2:"FILENAME"},{version:"3.2b2",deprecated:"4.1b11",commandName:"EDITING - SELECT block",command:"selectblock",description:"SELECT a certain BLOCK (all Clips) in the Playlist. The enumeration corresponds to the Block Numbers in Playlist.",arg1:"PLAYLIST",arg2:"BLOCK"},{version:"3.2b2",deprecated:"4.1b11",commandName:"EDITING - SELECT clip",command:"selectclip",description:"Select a Clip in the Playlist. Will always deselect all other Clips. If you dont provide Clip, all Clips in the Block will be selected. If you dont provide Block/Clip, all Clips in the Playlist will be selected.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.8b4",deprecated:"4.1b11",commandName:"EDITING - DESELECT",command:"deselect",description:"Deselect all selected Clips in the Playlist.",arg1:"PLAYLIST"},{version:"3.6b6",deprecated:"4.1b11",commandName:"EDITING - INSERT clip",command:"insertclip",description:"Inserts the Clip at the current selected position. The Filename can also be a YouTube URL. If all Clips of a Block are selected, the Clip will appended at the start of the Block. If nothing is selected in the Playlist, a new Block will be inserted at the end.",arg1:"PLAYLIST",arg2:"FILENAME"},{version:"3.6b6",deprecated:"4.1b11",commandName:"EDITING - APPEND clip",command:"appendclip",description:"Inserts the Clip after the selected position and select the new Clip. The Filename can also be a YouTube URL. If all Clips of a Block are selected, the Clip will appended at the end of the Block. If nothing is selected in the Playlist, a new Block will be inserted at the end.",arg1:"PLAYLIST",arg2:"FILENAME"},{version:"3.6b6",deprecated:"4.1b11",commandName:"EDITING - CHANGE clip",command:"changeclip",description:"Change the Clip at the current selected position. The Filename can also be a YouTube URL. If nothing is selected in the Playlist, the command will be ignored.",arg1:"PLAYLIST",arg2:"FILENAME",arg3:"RESET"},{version:"3.2b2",deprecated:"3.5b12",commandName:"EDITING - ACTIVATE block",command:"activateblock",description:"ACTIVATE a certain Block (all Clips) in the Playlist. The enumeration corresponds to the Block Numbers in Playlist. Parameters: Playlist, Block.",arg1:"PLAYLIST",arg2:"BLOCK"},{version:"3.2b2",deprecated:"3.5b12",commandName:"EDITING - ACTIVATE clip",command:"activateclip",description:"ACTIVATE a certain Clip in the Playlist. The enumeration corresponds to the Block and Clip Numbers in Playlist.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.2b2",deprecated:"3.5b12",commandName:"EDITING - De-ACTIVATE clip",command:"deactivateclip",description:"ACTIVATE a certain Clip in the Playlist. The enumeration corresponds to the Block and Clip Numbers in Playlist.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.5b12",deprecated:"4.1b11",commandName:"EDITING - ACTIVATE clip/block",command:"activate",description:"Activate a Clip in the Playlist (Green Checkmark). If you dont provide Clip, all Clips in the Block will be (de-)activated. If you dont provide Block/Clip, all Clips in the Playlist will be (de-)activated.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.5b12",deprecated:"4.1b11",commandName:"EDITING - De-ACTIVATE clip/block",command:"deactivate",description:"De-Activate a Clip in the Playlist (Green Checkmark). If you dont provide Clip, all Clips in the Block will be (de-)activated. If you dont provide Block/Clip, all Clips in the Playlist will be (de-)activated.",arg1:"PLAYLIST",arg2:"BLOCK",arg3:"CLIP"},{version:"3.2b2",deprecated:"4.1b11",commandName:"EDITING - ACTIVATE all clips",command:"activateall",description:"ACTIVATE all Clips in the Playlist.",arg1:"PLAYLIST"},{version:"3.8b4",deprecated:"4.1b11",commandName:"EDITING - DELETE clip",command:"deleteclip",description:"Delete all current selected Clips. If nothing is selected in the Playlist, the command will be ignored. Tip: Use <selectclip|PLAYLIST|BLOCK> before to empty any Block without deleting it.",arg1:"PLAYLIST"},{version:"3.8b4",deprecated:"4.1b11",commandName:"EDITING - DELETE block",command:"deleteblock",description:"Delete the Block of the current selected Clip. If nothing is selected in the Playlist, the command will be ignored. If Clips are selected in multiple Blocks (e.g. manually with CTRL), all selected Blocks will be deleted.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"AUDIO - MUTE",command:"muteaudio",description:"Mute the Audio output of the Playlist. This will also affect Output Devices/Streams.",arg1:"PLAYLIST"},{version:"3.2b2",deprecated:"4.1b11",commandName:"AUDIO - Un-MUTE",command:"unmuteaudio",description:"Unmute the Audio output of the Playlist. This will also affect Output Devices/Streams.",arg1:"PLAYLIST"},{version:"3.5b12",deprecated:"4.1b11",commandName:"AUDIO - TOGGLE",command:"toggleaudio",description:"Toggle the Audio output of the Playlist. This will also affect Output Devices/Streams.",arg1:"PLAYLIST"},{version:"3.5b3",deprecated:"4.1b11",commandName:"NOTES - HIDE",command:"hidenotes",description:"Hides any visible Note of Preview/Production of both Playlists."},{version:"3.7b4",deprecated:"4.1b11",commandName:"SCRIPTS - RESTART",command:"restartscripts",description:"Restarts all current active scripts, whether they are Global or Playlist related."},{version:"3.7b11",deprecated:"4.1b11",commandName:"DESKTOP - TOGGLE",command:"toggledesktop",description:"Shows/Hide the Desktop Output.",arg1:"PLAYLIST"},{version:"3.7b4",deprecated:"4.1b11",commandName:"STREAM - START",command:"startstream",description:"Starts the stream. Will do nothing, if Stream Settings are not provided yet.",arg1:"TARGET"},{version:"3.7b4",deprecated:"4.1b11",commandName:"STREAM - STOP",command:"stopstream",description:"Stops the stream. Will do nothing, if Stream Settings are not provided yet.",arg1:"TARGET"},{version:"3.2b2",deprecated:"4.1b11",commandName:"RECORDING - START",command:"startrec",description:"START a new recording. If a recording is already running, the command will be ignored."},{version:"3.2b2",deprecated:"4.1b11",commandName:"RECORDING - STOP",command:"stoprec",description:"STOP the current recording."}]}t.PlaydeckCommandsV3=a},8895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const i=n(1635).__importDefault(n(9278)),r=n(228),s=n(1400);class a extends r.EventEmitter{#xe;#$e;_socket;#se;#lt=!1;#ct=!1;#Me=!1;#Fe;#ut;#C;get isConnected(){return this.#lt}get isConnecting(){return this.#ct}get isDestroyed(){return this.#Me}constructor(e,t,n){super(),this.#xe=e,this.#$e=t,this.#se={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new i.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#ct=!1,this.#lt=!1,this.#se.reconnect&&this.#dt(),this.#Re(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#lt=!0,this.#ct=!1,this.#Re(s.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#lt=!1,this.#Re(s.InstanceStatus.Disconnected),!this.#ct&&this.#se.reconnect&&this.#dt(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>{this.#Me||this.connect()})),this.#C=setTimeout((()=>{this.#C=void 0,this.#Me||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#xe}:${this.#$e} is missing an error handler!`)}),5e3)}connect(){if(this.#Me)throw new Error("Cannot connect destroyed socket");return!this.#ct&&(this.#ct=!0,this._socket.connect(this.#$e,this.#xe),!0)}async send(e){if(this.#Me||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#lt)return!1;try{return new Promise(((t,n)=>{this._socket.write(e,(e=>{e?n(e):t(!0)}))}))}catch(e){this.#lt=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#Re(s.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#Me=!0,void 0!==this.#ut&&(clearTimeout(this.#ut),this.#ut=void 0),void 0!==this.#C&&(clearTimeout(this.#C),this.#C=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#dt(){void 0!==this.#ut&&clearTimeout(this.#ut),this.#ut=setTimeout((()=>{this.#ut=void 0,this.#Re(s.InstanceStatus.Connecting),this.connect()}),this.#se.reconnect_interval)}#Re(e,t){this.#Fe!=e&&(this.#Fe=e,this.emit("status_change",e,t))}}t.TCPHelper=a},8983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckStatusV4=void 0;const i=n(6472),r=n(8308);t.PlaydeckStatusV4=class{#U=null;#B=null;#W=null;constructor(e){this.#W=e}getValues(){return null===this.#W?null:(this.#U=this.#H(),this.#B=this.#q(),null===this.#U||null===this.#B?null:{common:this.#U,channel:this.#B})}#H(){if(null===this.#W)return null;if(void 0===this.#W.Project)return null;const e=this.#W.Project;return{projectName:e.ProjectName,projectFileName:e.ProjectFilename,clockTime:e.ClockTime,timestamp:e.Timestamp,timestampUnix:e.TimestampUnix}}#q(){return null===this.#W||void 0===this.#W.Channel?null:this.#W.Channel.map((e=>new s(e)))}isChannelOn(e){return null!==this.#B&&this.#B[e].channelState===r.ChannelState[r.ChannelState.Ready]}};class s{channelState;channelName;blockCount;tallyStatus;previewNote;stageWidth;stageHeight;playState;progressVisible;scheduleVisible;autoplayVisible;blockName;blockNumber;blockID;blockPosition;blockDuration;blockProgress;blockRemain;blockEnd;blockProgressAlert;clipName;clipNumber;clipID;clipPosition;clipDuration;clipProgress;clipProgressAlert;clipRemain;clipEnd;scheduleBlockName;scheduleTime;scheduleRemain;scheduleIcons;scheduleAlert;autoplayBlockName;autoplayTime;autoplayRemain;autoplayAlert;constructor(e){this.channelState=r.ChannelState[e.ChannelState],this.channelName=e.ChannelName,this.blockCount=e.BlockCount,this.tallyStatus=i.Tally[e.TallyStatus],this.previewNote=e.PreviewNote,this.stageWidth=e.StageWidth,this.stageHeight=e.StageHeight,this.playState=this.#pt(e.PlayState),this.progressVisible=e.ProgressVisible,this.scheduleVisible=e.ScheduleVisible,this.autoplayVisible=e.AutoplayVisible,this.blockName=e.BlockName,this.blockNumber=e.BlockNumber,this.blockID=e.BlockID,this.blockPosition=e.BlockPositionString,this.blockDuration=e.BlockDurationString,this.blockProgress=i.PlaydeckUtils.convertFloat(e.BlockProgress),this.blockRemain=e.BlockRemainString,this.blockEnd=e.BlockEndString,this.blockProgressAlert=e.BlockProgressAlert,this.clipName=e.ClipName,this.clipNumber=e.ClipNumber,this.clipID=e.ClipID,this.clipPosition=e.ClipPositionString,this.clipDuration=e.ClipDurationString,this.clipProgress=i.PlaydeckUtils.convertFloat(e.ClipProgress),this.clipProgressAlert=e.ClipProgressAlert,this.clipRemain=e.ClipRemainString,this.clipEnd=e.ClipEndString,this.scheduleBlockName=e.ScheduleBlockName,this.scheduleTime=e.ScheduleTimeString,this.scheduleRemain=e.ScheduleRemainString,this.scheduleIcons=e.ScheduleIcons,this.scheduleAlert=e.ScheduleAlert,this.autoplayBlockName=e.AutoplayBlockName,this.autoplayTime=e.AutoplayTimeString,this.autoplayRemain=e.AutoplayRemainString,this.autoplayAlert=e.AutoplayAlert}#pt(e){return{0:i.PlaybackState.Stop,1:i.PlaybackState.Cue,2:i.PlaybackState.Play,3:i.PlaybackState.Pause,4:i.PlaybackState.None}[e]}}},9043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaydeckCommandsV4=void 0;const i=n(7966),r=n(6278),s=n(6472),a=n(9956),o=n(2940);class l extends i.PlaydeckCommands{constructor(e){super(e,l.commands)}#ot(e,t){const n=(n,i)=>({type:"textinput",id:`arg${t}`,label:`${e}:`,required:!0,regex:n,useVariables:!0,tooltip:i});return"LIST"===e?{type:"dropdown",id:`arg${t}`,label:"PLAYLIST:",default:"1",choices:[{id:"1",label:"Left Playlist"},{id:"2",label:"Right Playlist"}]}:"CHANNEL"===e?{type:"number",id:`arg${t}`,label:`${e} ID:`,min:1,max:8,default:1,required:!0,range:!1}:"COMMAND"===e?n(`${s.PlaydeckUtils.RC_REGEX}`,"Write custom command like <{command}|{playlist_id}|?{block_id}|?{clip_id}"):e.includes("PATTERN")?n(`${r.Regex.SOMETHING}`,'PATTERN is a flexible naming construction.\n- b#5 (Block 5)\n- b:myname (First Blockname containing "myname")\n- c#5 OR c:myname (Same for Clips)\n- p:HH:MM:SS:FF (Clip Position as Timestamp)\n- b#5 c:myname p:0:05:31:00 (Clip "*myname*" in Block 5 at Clip Pos 0:05:31:00)\nTip 1: Use "c:name1 c:name2 c:name3" for multisearch aka "Use name1 if exist, else ..."\nTip 2: Use negative Clip Position to jump to Clip Duration minus Position eg "p:-30:00"'):e.includes("TIMESTAMP")?n(`${r.Regex.SOMETHING}`,"TIMESTAMP format is HH:MM:SS:FF, but can be shortened to SS:FF"):n(`${r.Regex.SOMETHING}`,"Here might be any string value...")}getOptions(e){const t=[e.arg1,e.arg2,e.arg3],n=[];for(let e=0;e<t.length;e++){const i=t[e];if(void 0!==i){const t=this.#ot(i,e+1);t&&n.push(t)}}return n}static commands=[{version:"4.1b11",deprecated:null,commandName:"UTILS - Custom Command",command:"customcommand",description:"Send custom command...",arg1:"COMMAND"},...a.PlayoutCommands,...o.AssetsCommands]}t.PlaydeckCommandsV4=l},9077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e,t){if(!t){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'")}if(e.legacyIds.includes(e.id))throw new Error(`Manifest contains itself '${e.id}' in legacyIds`);if(!(0,i.default)(e)){const e=i.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const i=n(1635).__importDefault(n(7281))},9278:e=>{"use strict";e.exports=require("net")},9323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=t.EventSources=t.PlaydeckEvents=void 0;const i=n(6472);var r,s,a;t.PlaydeckEvents=class{static parseEvent(e){const t={channel:void 0,blockName:void 0,blockNumber:void 0,blockID:void 0,clipName:void 0,clipNumber:void 0,clipID:void 0,source:void 0,event:void 0};let n=e;n.startsWith("<")&&(n=n.slice(1,-1));const o=n.split("|"),l=o[0],c=o[1],u=o[2],d=o[3],p=l.split("-"),h=p[0];if(void 0===h||!i.PlaydeckUtils.isInEnum(h,r))return t;t.source=h;const f=p[1];if(void 0===f||!i.PlaydeckUtils.isInEnum(f,s))return t;t.event=f;const m=p[2];if(void 0!==m)switch(m){case a.ID:switch(t.source){case r.Clip:t.clipID=Number(c);break;case r.Block:t.blockID=Number(c)}break;case a.String:switch(t.source){case r.Clip:t.channel=Number(c),t.blockName=u,t.clipName=d;break;case r.Block:t.channel=Number(c),t.blockName=u}}else switch(t.source){case r.Channel:case r.Playlist:t.channel=Number(c);break;case r.Clip:t.channel=Number(c),t.blockNumber=Number(u),t.clipNumber=Number(d);break;case r.Block:case r.Action:case r.Overlay:t.channel=Number(c),t.blockNumber=Number(u);case r.Recording:}return t}},function(e){e.Playlist="playlist",e.Channel="channel",e.Clip="clip",e.Block="block",e.Overlay="overlay",e.Action="action",e.Recording="recording"}(r||(t.EventSources=r={})),function(e){e.Play="play",e.Stop="stop",e.Pause="pause",e.Unpause="unpause",e.Cue="cue",e.Start="start",e.End="end"}(s||(t.Events=s={})),function(e){e.ID="id",e.String="string"}(a||(a={}))},9786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const i=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,r]of Object.entries(n))void 0!==t.options[e]&&(t.style[r]=t.options[e],delete t.options[e],i.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:i}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,n)=>{const i=[];for(const t of n.feedbacks){const n=e[t.feedbackId];if("string"!=typeof n)continue;const r=t.options[n];void 0!==r&&(delete t.options[n],t.isInverted="true"===r||!0===r||Number(r)>0,i.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:i}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]})},9956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayoutCommands=void 0;const n={cue:"CUE",play:"PLAY",fadein:"FADE-IN"},i={cue:"CUE",play:"PLAY"};function r(e){return{version:"4.1b11",deprecated:null,commandName:`CONTROL - ${n[e]}`,command:`${e}`,description:`${n[e]} the Clip in the Channel. Will skip inactive Clips. If you dont provide Clip, the first Clip of the Block will be used. If you dont provide Block/Clip, the selected Block/Clip will be used. Will skip inactive Clips.`,arg1:"CHANNEL",arg2:"BLOCK",arg3:"CLIP"}}function s(e){return{version:"4.1b11",deprecated:null,commandName:`CONTROL -  ${n[e]} (LIST)`,command:`%${e}list`,description:`${n[e]} the Clip in the List (Left or Rigth). Will skip inactive Clips.If you dont provide Clip, the first Clip of the Block will be used.If you dont provide Block/Clip, the selected Block/Clip will be used. Will skip inactive Clips.`,arg1:"LIST",arg2:"BLOCK",arg3:"CLIP"}}function a(e){return{version:"4.1b11",deprecated:null,commandName:`CONTROL - ${n[e]} ID`,command:`${e}id`,description:`${n[e]} the Block/Clip (auto-detect) by UNIQUE ID (UID) instead of Numeration. Will find Block/Clip even after moving to another Channel. Retrieve your UID with Mouse Over in the Last Column in Playlist`,arg1:"ID"}}function o(e){return{version:"4.1b11",deprecated:null,commandName:`CONTROL - ${n[e]} Flex`,command:`${e}flex`,description:`- ${n[e]} a Clip/Block by PATTERN. Will skip inactive Clips.`,arg1:"CHANNEL",arg2:"PATTERN"}}function l(e,t){return{version:"4.1b11",deprecated:null,commandName:`CONTROL - ${i[e]} Next ${t?"Block:":"Clip"}`,command:`${e}next${t?"block":""}`,description:`- ${i[e]} the next ${t?"Block":"Clip"}`,arg1:"CHANNEL"}}const c={version:"4.1b11",deprecated:null,commandName:"CONTROL - SWITCH Channel for the List",command:"switchchannel",description:"Changes the visible Channel of the List (Left/Right). Only available in STUDIO Edition",arg1:"LIST",arg2:"CHANNEL"};function u(e){return`Will select a certain Clip per ${e}. If you dont provide Clip, the Block Header is being selected. If you dont provide Block/Clip, nothing happens. Also works, if Channel is currrently not in view (8 Channel Version)`}const d={version:"4.1b11",deprecated:null,commandName:"CONTROL - SELECT per Channel",command:"select",description:u("Channel"),arg1:"CHANNEL",arg2:"BLOCK",arg3:"CLIP"},p={version:"4.1b11",deprecated:null,commandName:"CONTROL - SELECT per List",command:"selectlist",description:u("List"),arg1:"LIST",arg2:"BLOCK",arg3:"CLIP"},h={version:"4.1b11",deprecated:null,commandName:"CONTROL - SELECT per UID",command:"selectid",description:u("UID"),arg1:"UID"},f={version:"4.1b11",deprecated:null,commandName:"CONTROL - PAUSE",command:"pause",description:"- PAUSE will toggle pause of current playing Playback, if Clip is playing, otherwise ignored.",arg1:"CHANNEL"};function m(e){return("stop"===e?"STOP":"FADE-OUT")+" will stop the Playout and return to the Channel Background."}const b={version:"4.1b11",deprecated:null,commandName:"CONTROL - STOP",command:"stop",description:m("stop"),arg1:"CHANNEL"},y={version:"4.1b11",deprecated:null,commandName:"CONTROL - FADE-OUT",command:"fadeout",description:m("fadeout"),arg1:"CHANNEL"},g={version:"4.1b11",deprecated:null,commandName:"CONTROL - POSITION",command:"position",description:"Jump the Playhead to a new Position in the currently playing Clip. Will be ignored, if no Clip is playing. A negative Timestamp will be calculated as Duration minus Timestamp.",arg1:"CHANNEL",arg2:"TIMESTAMP"},v={version:"4.1b11",deprecated:null,commandName:"CONTROL - SAVE POSITION",command:"saveposition",description:"Save the current Clip/Position for later use. Will be saved to project and survives a PLAYDECK restart",arg1:"CHANNEL"},k={version:"4.1b11",deprecated:null,commandName:"CONTROL - RECALL POSITION",command:"recallposition",description:"Recall the saved Clip/Position for later use",arg1:"CHANNEL"};t.PlayoutCommands=[...function(){const e=[];for(const t in n){const n=t;e.push(r(n)),e.push(a(n)),e.push(s(n)),e.push(o(n))}for(const t in i){const n=t;e.push(l(n,!1)),e.push(l(n,!0))}return e.push(c),e.push(d),e.push(p),e.push(h),e.push(f),e.push(b),e.push(y),e.push(g),e.push(v),e.push(k),e}()]},9967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},9998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let i=0,r=e.length;for(;r>0;){const s=r/2|0;let a=i+s;n(e[a],t)<=0?(i=++a,r-=s+1):r=s}return i}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=n(6278),t=n(56),i=n(5774),r=n(1562),s=n(6926),a=n(756),o=n(3238),l=n(7476);class c extends e.InstanceBase{#ht;get config(){return{version:this.#ht?.version,host:this.#ht?.host,isAdvanced:this.#ht?.isAdvanced,wsPort:this.#ht?.wsPort,isWS:this.#ht?.isWS,isTCPCommands:this.#ht?.isTCPCommands,tcpPortCommands:this.#ht?.tcpPortCommands,isTCPEvents:this.#ht?.isTCPEvents,tcpPortEvents:this.#ht?.tcpPortEvents}}version;variableDefinitions=[];actionDefinitions={};state;connectionManager;actions;#ft=null;#mt=null;#bt=3e3;constructor(e){super(e)}async destroy(){this.log("debug","Playdeck Instance: Destroying..."),await(this.connectionManager?.destroy())}async configUpdated(e){this.log("debug","Playdeck Instance: Updating config..."),await this.destroy(),await this.init(e)}getConfigFields(){return this.log("debug","Playdeck Instance: Reading config..."),(0,t.getPlaydeckConfigFields)()}async init(t){this.log("debug","Playdeck Instance: Initializing..."),this.#ht=t,this.updateStatus(e.InstanceStatus.Connecting,"Playdeck Instance: starting..."),this.version=new r.PlaydeckVersion(this.#ht.version),this.connectionManager=new a.PlaydeckConnectionManager(this),this.state=new s.PlaydeckState(this),this.state&&this.state.initFeedbacks(new l.PlaydeckFeedbacks(this)),this.actions=new o.PlaydeckActions(this)}lazyLog(e,t){const n=this.#yt(this.#ft);n&&(this.#ft=n,this.log(e,`Lazy: ${t}`))}#yt(e){const t=Date.now();return null===e||t-e>this.#bt?t:null}lazyUpdateStatus(e,t){const n=this.#yt(this.#mt);n&&(this.#mt=n,this.updateStatus(e,t))}}(0,e.runEntrypoint)(c,i.UpgradeScripts)})()})();