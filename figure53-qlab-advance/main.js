(()=>{var e={7169:(e,t,i)=>{"use strict";const s=i(2017);s.code='require("ajv/dist/runtime/equal").default',t.A=s},6848:(e,t,i)=>{"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});const r=s(i(5753)).default("serialport/binding-mock");let n={},o=0;function a(){return new Promise((e=>process.nextTick((()=>e()))))}class c extends Error{constructor(e){super(e),this.canceled=!0}}const l={reset(){n={},o=0},createPort(e,t={}){o++;const i=Object.assign({echo:!1,record:!1,manufacturer:"The J5 Robotics Company",vendorId:void 0,productId:void 0,maxReadSize:1024},t);n[e]={data:Buffer.alloc(0),echo:i.echo,record:i.record,readyData:i.readyData,maxReadSize:i.maxReadSize,info:{path:e,manufacturer:i.manufacturer,serialNumber:`${o}`,pnpId:void 0,locationId:void 0,vendorId:i.vendorId,productId:i.productId}},r(o,"created port",JSON.stringify({path:e,opt:t}))},list:async()=>(r(null,"list"),Object.values(n).map((e=>e.info))),async open(e){var t;if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');const i=Object.assign({dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},e),{path:s}=i;r(null,`open: opening path ${s}`);const o=n[s];if(await a(),!o)throw new Error(`Port does not exist - please call MockBinding.createPort('${s}') first`);const c=o.info.serialNumber;if(null===(t=o.openOpt)||void 0===t?void 0:t.lock)throw r(c,"open: Port is locked cannot open"),new Error("Port is locked cannot open");return r(c,`open: opened path ${s}`),o.openOpt=Object.assign({},i),new u(o,i)}};class u{constructor(e,t){if(this.port=e,this.openOptions=t,this.pendingRead=null,this.isOpen=!0,this.lastWrite=null,this.recording=Buffer.alloc(0),this.writeOperation=null,this.serialNumber=e.info.serialNumber,e.readyData){const t=e.readyData;process.nextTick((()=>{this.isOpen&&(r(this.serialNumber,"emitting ready data"),this.emitData(t))}))}}emitData(e){if(!this.isOpen||!this.port)throw new Error("Port must be open to pretend to receive data");const t=Buffer.isBuffer(e)?e:Buffer.from(e);r(this.serialNumber,"emitting data - pending read:",Boolean(this.pendingRead)),this.port.data=Buffer.concat([this.port.data,t]),this.pendingRead&&(process.nextTick(this.pendingRead),this.pendingRead=null)}async close(){if(r(this.serialNumber,"close"),!this.isOpen)throw new Error("Port is not open");const e=this.port;if(!e)throw new Error("already closed");e.openOpt=void 0,e.data=Buffer.alloc(0),r(this.serialNumber,"port is closed"),this.serialNumber=void 0,this.isOpen=!1,this.pendingRead&&this.pendingRead(new c("port is closed"))}async read(e,t,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof i||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(e.length<t+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");if(r(this.serialNumber,"read",i,"bytes"),await a(),!this.isOpen||!this.port)throw new c("Read canceled");if(this.port.data.length<=0)return new Promise(((s,r)=>{this.pendingRead=n=>{if(n)return r(n);this.read(e,t,i).then(s,r)}}));const s=this.port.maxReadSize>i?i:this.port.maxReadSize,n=this.port.data.slice(0,s).copy(e,t);return this.port.data=this.port.data.slice(s),r(this.serialNumber,"read",n,"bytes"),{bytesRead:n,buffer:e}}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(!this.isOpen||!this.port)throw r("write","error port is not open"),new Error("Port is not open");if(r(this.serialNumber,"write",e.length,"bytes"),this.writeOperation)throw new Error("Overlapping writes are not supported and should be queued by the serialport object");return this.writeOperation=(async()=>{if(await a(),!this.isOpen||!this.port)throw new Error("Write canceled");const t=this.lastWrite=Buffer.from(e);this.port.record&&(this.recording=Buffer.concat([this.recording,t])),this.port.echo&&process.nextTick((()=>{this.isOpen&&this.emitData(t)})),this.writeOperation=null,r(this.serialNumber,"writing finished")})(),this.writeOperation}async update(e){if("object"!=typeof e)throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(r(this.serialNumber,"update"),!this.isOpen||!this.port)throw new Error("Port is not open");await a(),this.port.openOpt&&(this.port.openOpt.baudRate=e.baudRate)}async set(e){if("object"!=typeof e)throw new TypeError('"options" is not an object');if(r(this.serialNumber,"set"),!this.isOpen)throw new Error("Port is not open");await a()}async get(){if(r(this.serialNumber,"get"),!this.isOpen)throw new Error("Port is not open");return await a(),{cts:!0,dsr:!1,dcd:!1}}async getBaudRate(){var e;if(r(this.serialNumber,"getBaudRate"),!this.isOpen||!this.port)throw new Error("Port is not open");if(await a(),!(null===(e=this.port.openOpt)||void 0===e?void 0:e.baudRate))throw new Error("Internal Error");return{baudRate:this.port.openOpt.baudRate}}async flush(){if(r(this.serialNumber,"flush"),!this.isOpen||!this.port)throw new Error("Port is not open");await a(),this.port.data=Buffer.alloc(0)}async drain(){if(r(this.serialNumber,"drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await a()}}t.CanceledError=c,t.MockBinding=l,t.MockPortBinding=u},6269:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DarwinPortBinding=t.DarwinBinding=void 0;const r=s(i(1751)),n=i(6237),o=i(6924),a=i(9269),c=i(1078),l=(0,r.default)("serialport/bindings-cpp");t.DarwinBinding={list:()=>(l("list"),(0,n.asyncList)()),async open(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');l("open");const t=Object.assign({vmin:1,vtime:0,dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},e),i=await(0,n.asyncOpen)(t.path,t);return new u(i,t)}};class u{constructor(e,t){this.fd=e,this.openOptions=t,this.poller=new o.Poller(e),this.writeOperation=null}get isOpen(){return null!==this.fd}async close(){if(l("close"),!this.isOpen)throw new Error("Port is not open");const e=this.fd;this.poller.stop(),this.poller.destroy(),this.fd=null,await(0,n.asyncClose)(e)}async read(e,t,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof i||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(l("read"),e.length<t+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");return(0,a.unixRead)({binding:this,buffer:e,offset:t,length:i})}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(l("write",e.length,"bytes"),!this.isOpen)throw l("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{0!==e.length&&(await(0,c.unixWrite)({binding:this,buffer:e}),this.writeOperation=null)})(),this.writeOperation}async update(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(l("update"),!this.isOpen)throw new Error("Port is not open");await(0,n.asyncUpdate)(this.fd,e)}async set(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(l("set",e),!this.isOpen)throw new Error("Port is not open");await(0,n.asyncSet)(this.fd,e)}async get(){if(l("get"),!this.isOpen)throw new Error("Port is not open");return(0,n.asyncGet)(this.fd)}async getBaudRate(){if(l("getBaudRate"),!this.isOpen)throw new Error("Port is not open");throw new Error("getBaudRate is not implemented on darwin")}async flush(){if(l("flush"),!this.isOpen)throw new Error("Port is not open");await(0,n.asyncFlush)(this.fd)}async drain(){if(l("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,n.asyncDrain)(this.fd)}}t.DarwinPortBinding=u},3841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsError=void 0;class i extends Error{constructor(e,{canceled:t=!1}={}){super(e),this.canceled=t}}t.BindingsError=i},176:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.autoDetect=void 0;const o=n(i(1751)),a=i(6269),c=i(8238),l=i(1363),u=(0,o.default)("serialport/bindings-cpp");r(i(1470),t),r(i(6269),t),r(i(8238),t),r(i(1363),t),r(i(3841),t),t.autoDetect=function(){switch(process.platform){case"win32":return u("loading WindowsBinding"),l.WindowsBinding;case"darwin":return u("loading DarwinBinding"),a.DarwinBinding;default:return u("loading LinuxBinding"),c.LinuxBinding}}},8583:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linuxList=void 0;const s=i(5317),r=i(8110);t.linuxList=function(e=s.spawn){const t=[],i=e("udevadm",["info","-e"]),n=i.stdout.pipe(new r.ReadlineParser);let o=!1,a={path:"",manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0};return n.on("data",(e=>{const i=e.slice(0,1),s=e.slice(3);if("P"===i)return a={path:"",manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0},void(o=!1);var r;if(!o)if("N"!==i){if("E"===i){const e=s.match(/^(.+)=(.*)/);if(!e)return;const t={DEVNAME:"path",ID_VENDOR_ENC:"manufacturer",ID_SERIAL_SHORT:"serialNumber",ID_VENDOR_ID:"vendorId",ID_MODEL_ID:"productId",DEVLINKS:"pnpId",ID_USB_VENDOR_ENC:"manufacturer",ID_USB_SERIAL_SHORT:"serialNumber",ID_USB_VENDOR_ID:"vendorId",ID_USB_MODEL_ID:"productId"}[e[1].toUpperCase()];if(!t)return;a[t]=function(e,t){if("pnpId"===e){const e=t.match(/\/by-id\/([^\s]+)/);return(null==e?void 0:e[1])||void 0}return"manufacturer"===e?t.replace(/\\x([a-fA-F0-9]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16)))):/^0x/.test(t)?t.substr(2):t}(t,e[2])}}else/(tty(S|WCH|ACM|USB|AMA|MFD|O|XRUSB)|rfcomm)/.test(r=s)&&r?t.push(a):o=!0})),new Promise(((e,s)=>{i.on("close",(e=>{e&&s(new Error(`Error listing ports udevadm exited with error code: ${e}`))})),i.on("error",s),n.on("error",s),n.on("finish",(()=>e(t)))}))}},8238:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinuxPortBinding=t.LinuxBinding=void 0;const r=s(i(1751)),n=i(8583),o=i(6924),a=i(9269),c=i(1078),l=i(6237),u=(0,r.default)("serialport/bindings-cpp");t.LinuxBinding={list:()=>(u("list"),(0,n.linuxList)()),async open(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');u("open");const t=Object.assign({vmin:1,vtime:0,dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},e),i=await(0,l.asyncOpen)(t.path,t);return this.fd=i,new d(i,t)}};class d{constructor(e,t){this.fd=e,this.openOptions=t,this.poller=new o.Poller(e),this.writeOperation=null}get isOpen(){return null!==this.fd}async close(){if(u("close"),!this.isOpen)throw new Error("Port is not open");const e=this.fd;this.poller.stop(),this.poller.destroy(),this.fd=null,await(0,l.asyncClose)(e)}async read(e,t,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof i||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(u("read"),e.length<t+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");return(0,a.unixRead)({binding:this,buffer:e,offset:t,length:i})}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(u("write",e.length,"bytes"),!this.isOpen)throw u("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{0!==e.length&&(await(0,c.unixWrite)({binding:this,buffer:e}),this.writeOperation=null)})(),this.writeOperation}async update(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(u("update"),!this.isOpen)throw new Error("Port is not open");await(0,l.asyncUpdate)(this.fd,e)}async set(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(u("set"),!this.isOpen)throw new Error("Port is not open");await(0,l.asyncSet)(this.fd,e)}async get(){if(u("get"),!this.isOpen)throw new Error("Port is not open");return(0,l.asyncGet)(this.fd)}async getBaudRate(){if(u("getBaudRate"),!this.isOpen)throw new Error("Port is not open");return(0,l.asyncGetBaudRate)(this.fd)}async flush(){if(u("flush"),!this.isOpen)throw new Error("Port is not open");await(0,l.asyncFlush)(this.fd)}async drain(){if(u("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,l.asyncDrain)(this.fd)}}t.LinuxPortBinding=d},6237:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.asyncWrite=t.asyncRead=t.asyncUpdate=t.asyncSet=t.asyncOpen=t.asyncList=t.asyncGetBaudRate=t.asyncGet=t.asyncFlush=t.asyncDrain=t.asyncClose=void 0;const r=s(i(8169)),n=i(9023),o=i(6928),a=(0,r.default)((0,o.join)(__dirname,"../"));t.asyncClose=a.close?(0,n.promisify)(a.close):async()=>{throw new Error('"binding.close" Method not implemented')},t.asyncDrain=a.drain?(0,n.promisify)(a.drain):async()=>{throw new Error('"binding.drain" Method not implemented')},t.asyncFlush=a.flush?(0,n.promisify)(a.flush):async()=>{throw new Error('"binding.flush" Method not implemented')},t.asyncGet=a.get?(0,n.promisify)(a.get):async()=>{throw new Error('"binding.get" Method not implemented')},t.asyncGetBaudRate=a.getBaudRate?(0,n.promisify)(a.getBaudRate):async()=>{throw new Error('"binding.getBaudRate" Method not implemented')},t.asyncList=a.list?(0,n.promisify)(a.list):async()=>{throw new Error('"binding.list" Method not implemented')},t.asyncOpen=a.open?(0,n.promisify)(a.open):async()=>{throw new Error('"binding.open" Method not implemented')},t.asyncSet=a.set?(0,n.promisify)(a.set):async()=>{throw new Error('"binding.set" Method not implemented')},t.asyncUpdate=a.update?(0,n.promisify)(a.update):async()=>{throw new Error('"binding.update" Method not implemented')},t.asyncRead=a.read?(0,n.promisify)(a.read):async()=>{throw new Error('"binding.read" Method not implemented')},t.asyncWrite=a.write?(0,n.promisify)(a.write):async()=>{throw new Error('"binding.write" Method not implemented')}},6924:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Poller=t.EVENTS=void 0;const r=s(i(1751)),n=i(4434),o=i(6928),a=s(i(8169)),c=i(3841),{Poller:l}=(0,a.default)((0,o.join)(__dirname,"../")),u=(0,r.default)("serialport/bindings-cpp/poller");function d(e,i){if(e)return u("error",e),this.emit("readable",e),this.emit("writable",e),void this.emit("disconnect",e);i&t.EVENTS.UV_READABLE&&(u('received "readable"'),this.emit("readable",null)),i&t.EVENTS.UV_WRITABLE&&(u('received "writable"'),this.emit("writable",null)),i&t.EVENTS.UV_DISCONNECT&&(u('received "disconnect"'),this.emit("disconnect",null))}t.EVENTS={UV_READABLE:1,UV_WRITABLE:2,UV_DISCONNECT:4};class h extends n.EventEmitter{constructor(e,t=l){u("Creating poller"),super(),this.poller=new t(e,d.bind(this))}once(e,i){switch(e){case"readable":this.poll(t.EVENTS.UV_READABLE);break;case"writable":this.poll(t.EVENTS.UV_WRITABLE);break;case"disconnect":this.poll(t.EVENTS.UV_DISCONNECT)}return super.once(e,i)}poll(e=0){e&t.EVENTS.UV_READABLE&&u('Polling for "readable"'),e&t.EVENTS.UV_WRITABLE&&u('Polling for "writable"'),e&t.EVENTS.UV_DISCONNECT&&u('Polling for "disconnect"'),this.poller.poll(e)}stop(){u("Stopping poller"),this.poller.stop(),this.emitCanceled()}destroy(){u("Destroying poller"),this.poller.destroy(),this.emitCanceled()}emitCanceled(){const e=new c.BindingsError("Canceled",{canceled:!0});this.emit("readable",e),this.emit("writable",e),this.emit("disconnect",e)}}t.Poller=h},9269:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unixRead=void 0;const r=i(9023),n=i(9896),o=i(3841),a=(0,s(i(1751)).default)("serialport/bindings-cpp/unixRead"),c=(0,r.promisify)(n.read);t.unixRead=async({binding:e,buffer:i,offset:s,length:r,fsReadAsync:n=c})=>{if(a("Starting read"),!e.isOpen||!e.fd)throw new o.BindingsError("Port is not open",{canceled:!0});try{const{bytesRead:o}=await n(e.fd,i,s,r,null);return 0===o?(0,t.unixRead)({binding:e,buffer:i,offset:s,length:r,fsReadAsync:n}):(a("Finished read",o,"bytes"),{bytesRead:o,buffer:i})}catch(c){if(a("read error",c),"EAGAIN"===c.code||"EWOULDBLOCK"===c.code||"EINTR"===c.code){if(!e.isOpen)throw new o.BindingsError("Port is not open",{canceled:!0});return a("waiting for readable because of code:",c.code),await(e=>new Promise(((t,i)=>{if(!e.poller)throw new Error("No poller on bindings");e.poller.once("readable",(e=>e?i(e):t()))})))(e),(0,t.unixRead)({binding:e,buffer:i,offset:s,length:r,fsReadAsync:n})}throw("EBADF"===c.code||"ENXIO"===c.code||"UNKNOWN"===c.code||-1===c.errno)&&(c.disconnect=!0,a("disconnecting",c)),c}}},1078:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unixWrite=void 0;const r=i(9896),n=s(i(1751)),o=i(9023),a=(0,n.default)("serialport/bindings-cpp/unixWrite"),c=(0,o.promisify)(r.write);t.unixWrite=async({binding:e,buffer:i,offset:s=0,fsWriteAsync:r=c})=>{const n=i.length-s;if(a("Starting write",i.length,"bytes offset",s,"bytesToWrite",n),!e.isOpen||!e.fd)throw new Error("Port is not open");try{const{bytesWritten:o}=await r(e.fd,i,s,n);if(a("write returned: wrote",o,"bytes"),o+s<i.length){if(!e.isOpen)throw new Error("Port is not open");return(0,t.unixWrite)({binding:e,buffer:i,offset:o+s,fsWriteAsync:r})}a("Finished writing",o+s,"bytes")}catch(n){if(a("write errored",n),"EAGAIN"===n.code||"EWOULDBLOCK"===n.code||"EINTR"===n.code){if(!e.isOpen)throw new Error("Port is not open");return a("waiting for writable because of code:",n.code),await(e=>new Promise(((t,i)=>{e.poller.once("writable",(e=>e?i(e):t()))})))(e),(0,t.unixWrite)({binding:e,buffer:i,offset:s,fsWriteAsync:r})}throw("EBADF"===n.code||"ENXIO"===n.code||"UNKNOWN"===n.code||-1===n.errno)&&(n.disconnect=!0,a("disconnecting",n)),a("error",n),n}}},5037:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialNumParser=void 0;const i=[/USB\\(?:.+)\\(.+)/,/FTDIBUS\\(?:.+)\+(.+?)A?\\.+/];t.serialNumParser=e=>{if(!e)return null;for(const t of i){const i=e.match(t);if(i)return i[1]}return null}},1363:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsPortBinding=t.WindowsBinding=void 0;const r=s(i(1751)),n=i(176),o=i(6237),a=i(5037),c=(0,r.default)("serialport/bindings-cpp");t.WindowsBinding={list:async()=>(await(0,o.asyncList)()).map((e=>{if(e.pnpId&&!e.serialNumber){const t=(0,a.serialNumParser)(e.pnpId);if(t)return Object.assign(Object.assign({},e),{serialNumber:t})}return e})),async open(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');c("open");const t=Object.assign({dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,rtsMode:"handshake",xon:!1,xoff:!1,xany:!1,hupcl:!0},e),i=await(0,o.asyncOpen)(t.path,t);return new l(i,t)}};class l{constructor(e,t){this.fd=e,this.openOptions=t,this.writeOperation=null}get isOpen(){return null!==this.fd}async close(){if(c("close"),!this.isOpen)throw new Error("Port is not open");const e=this.fd;this.fd=null,await(0,o.asyncClose)(e)}async read(e,t,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof i||isNaN(i))throw new TypeError(`"length" is not an integer got "${isNaN(i)?"NaN":typeof i}"`);if(c("read"),e.length<t+i)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");try{return{bytesRead:await(0,o.asyncRead)(this.fd,e,t,i),buffer:e}}catch(e){if(!this.isOpen)throw new n.BindingsError(e.message,{canceled:!0});throw e}}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(c("write",e.length,"bytes"),!this.isOpen)throw c("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{0!==e.length&&(await(0,o.asyncWrite)(this.fd,e),this.writeOperation=null)})(),this.writeOperation}async update(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(c("update"),!this.isOpen)throw new Error("Port is not open");await(0,o.asyncUpdate)(this.fd,e)}async set(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(c("set",e),!this.isOpen)throw new Error("Port is not open");await(0,o.asyncSet)(this.fd,e)}async get(){if(c("get"),!this.isOpen)throw new Error("Port is not open");return(0,o.asyncGet)(this.fd)}async getBaudRate(){if(c("getBaudRate"),!this.isOpen)throw new Error("Port is not open");return(0,o.asyncGetBaudRate)(this.fd)}async flush(){if(c("flush"),!this.isOpen)throw new Error("Port is not open");await(0,o.asyncFlush)(this.fd)}async drain(){if(c("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,o.asyncDrain)(this.fd)}}t.WindowsPortBinding=l},5865:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelimiterParser=void 0;const s=i(2203);class r extends s.Transform{constructor({delimiter:e,includeDelimiter:t=!1,...i}){if(super(i),void 0===e)throw new TypeError('"delimiter" is not a bufferable object');if(0===e.length)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=t,this.delimiter=Buffer.from(e),this.buffer=Buffer.alloc(0)}_transform(e,t,i){let s,r=Buffer.concat([this.buffer,e]);for(;-1!==(s=r.indexOf(this.delimiter));)this.push(r.slice(0,s+(this.includeDelimiter?this.delimiter.length:0))),r=r.slice(s+this.delimiter.length);this.buffer=r,i()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.DelimiterParser=r},8110:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadlineParser=void 0;const s=i(5865);class r extends s.DelimiterParser{constructor(e){const t={delimiter:Buffer.from("\n","utf8"),encoding:"utf8",...e};"string"==typeof t.delimiter&&(t.delimiter=Buffer.from(t.delimiter,t.encoding)),super(t)}}t.ReadlineParser=r},3547:(e,t,i)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let s=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(r=s))})),t.splice(r,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(4662)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4662:(e,t,i)=>{e.exports=function(e){function t(e){let i,r,n,o=null;function a(...e){if(!a.enabled)return;const s=a,r=Number(new Date),n=r-(i||r);s.diff=n,s.prev=i,s.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,r)=>{if("%%"===i)return"%";o++;const n=t.formatters[r];if("function"==typeof n){const t=e[o];i=n.call(s,t),e.splice(o,1),o--}return i})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==t.namespaces&&(r=t.namespaces,n=t.enabled(e)),n),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,i){const s=t(this.namespace+(void 0===i?":":i)+e);return s.log=this.log,s}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let i;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(i=0;i<r;i++)s[i]&&("-"===(e=s[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let i,s;for(i=0,s=t.skips.length;i<s;i++)if(t.skips[i].test(e))return!1;for(i=0,s=t.names.length;i<s;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(2791),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((i=>{t[i]=e[i]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},1751:(e,t,i)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=i(3547):e.exports=i(9095)},9095:(e,t,i)=>{const s=i(2018),r=i(9023);t.init=function(e){e.inspectOpts={};const i=Object.keys(t.inspectOpts);for(let s=0;s<i.length;s++)e.inspectOpts[i[s]]=t.inspectOpts[i[s]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(i){const{namespace:s,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),n=`  ${r};1m${s} [0m`;i[0]=n+i[0].split("\n").join("\n"+n),i.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else i[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+i[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=i(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const i=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[i]=s,e}),{}),e.exports=i(4662)(t);const{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},2791:e=>{var t=1e3,i=60*t,s=60*i,r=24*s,n=7*r;function o(e,t,i,s){var r=t>=1.5*i;return Math.round(e/i)+" "+s+(r?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=r?o(c,l,r,"day"):l>=s?o(c,l,s,"hour"):l>=i?o(c,l,i,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var n=Math.abs(e);return n>=r?Math.round(e/r)+"d":n>=s?Math.round(e/s)+"h":n>=i?Math.round(e/i)+"m":n>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1470:()=>{},9847:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteLengthParser=void 0;const s=i(2203);class r extends s.Transform{length;position;buffer;constructor(e){if(super(e),"number"!=typeof e.length)throw new TypeError('"length" is not a number');if(e.length<1)throw new TypeError('"length" is not greater than 0');this.length=e.length,this.position=0,this.buffer=Buffer.alloc(this.length)}_transform(e,t,i){let s=0;for(;s<e.length;)this.buffer[this.position]=e[s],s++,this.position++,this.position===this.length&&(this.push(this.buffer),this.buffer=Buffer.alloc(this.length),this.position=0);i()}_flush(e){this.push(this.buffer.slice(0,this.position)),this.buffer=Buffer.alloc(this.length),e()}}t.ByteLengthParser=r},3662:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCTalkParser=void 0;const s=i(2203);class r extends s.Transform{array;cursor;lastByteFetchTime;maxDelayBetweenBytesMs;constructor(e=50){super(),this.array=[],this.cursor=0,this.lastByteFetchTime=0,this.maxDelayBetweenBytesMs=e}_transform(e,t,i){if(this.maxDelayBetweenBytesMs>0){const e=Date.now();e-this.lastByteFetchTime>this.maxDelayBetweenBytesMs&&(this.array=[],this.cursor=0),this.lastByteFetchTime=e}for(this.cursor+=e.length,Array.from(e).map((e=>this.array.push(e)));this.cursor>1&&this.cursor>=this.array[1]+5;){const e=this.array[1]+5,t=Buffer.from(this.array.slice(0,e));this.array=this.array.slice(t.length,this.array.length),this.cursor-=e,this.push(t)}i()}}t.CCTalkParser=r},447:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelimiterParser=void 0;const s=i(2203);class r extends s.Transform{includeDelimiter;delimiter;buffer;constructor({delimiter:e,includeDelimiter:t=!1,...i}){if(super(i),void 0===e)throw new TypeError('"delimiter" is not a bufferable object');if(0===e.length)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=t,this.delimiter=Buffer.from(e),this.buffer=Buffer.alloc(0)}_transform(e,t,i){let s,r=Buffer.concat([this.buffer,e]);for(;-1!==(s=r.indexOf(this.delimiter));)this.push(r.slice(0,s+(this.includeDelimiter?this.delimiter.length:0))),r=r.slice(s+this.delimiter.length);this.buffer=r,i()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.DelimiterParser=r},6937:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterByteTimeoutParser=void 0;const s=i(2203);class r extends s.Transform{maxBufferSize;currentPacket;interval;intervalID;constructor({maxBufferSize:e=65536,interval:t,...i}){if(super(i),!t)throw new TypeError('"interval" is required');if("number"!=typeof t||Number.isNaN(t))throw new TypeError('"interval" is not a number');if(t<1)throw new TypeError('"interval" is not greater than 0');if("number"!=typeof e||Number.isNaN(e))throw new TypeError('"maxBufferSize" is not a number');if(e<1)throw new TypeError('"maxBufferSize" is not greater than 0');this.maxBufferSize=e,this.currentPacket=[],this.interval=t}_transform(e,t,i){this.intervalID&&clearTimeout(this.intervalID);for(let t=0;t<e.length;t++)this.currentPacket.push(e[t]),this.currentPacket.length>=this.maxBufferSize&&this.emitPacket();this.intervalID=setTimeout(this.emitPacket.bind(this),this.interval),i()}emitPacket(){this.intervalID&&clearTimeout(this.intervalID),this.currentPacket.length>0&&this.push(Buffer.from(this.currentPacket)),this.currentPacket=[]}_flush(e){this.emitPacket(),e()}}t.InterByteTimeoutParser=r},1693:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PacketLengthParser=void 0;const s=i(2203);class r extends s.Transform{buffer;start;opts;constructor(e={}){super(e);const{delimiter:t=170,packetOverhead:i=2,lengthBytes:s=1,lengthOffset:r=1,maxLen:n=255}=e;this.opts={delimiter:t,packetOverhead:i,lengthBytes:s,lengthOffset:r,maxLen:n},this.buffer=Buffer.alloc(0),this.start=!1}_transform(e,t,i){for(let t=0;t<e.length;t++){const i=e[t];if(i===this.opts.delimiter&&(this.start=!0),!0===this.start&&(this.buffer=Buffer.concat([this.buffer,Buffer.from([i])]),this.buffer.length>=this.opts.lengthOffset+this.opts.lengthBytes)){const e=this.buffer.readUIntLE(this.opts.lengthOffset,this.opts.lengthBytes);(this.buffer.length==e+this.opts.packetOverhead||e>this.opts.maxLen)&&(this.push(this.buffer),this.buffer=Buffer.alloc(0),this.start=!1)}}i()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.PacketLengthParser=r},2348:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadlineParser=void 0;const s=i(447);class r extends s.DelimiterParser{constructor(e){const t={delimiter:Buffer.from("\n","utf8"),encoding:"utf8",...e};"string"==typeof t.delimiter&&(t.delimiter=Buffer.from(t.delimiter,t.encoding)),super(t)}}t.ReadlineParser=r},8145:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadyParser=void 0;const s=i(2203);class r extends s.Transform{delimiter;readOffset;ready;constructor({delimiter:e,...t}){if(void 0===e)throw new TypeError('"delimiter" is not a bufferable object');if(0===e.length)throw new TypeError('"delimiter" has a 0 or undefined length');super(t),this.delimiter=Buffer.from(e),this.readOffset=0,this.ready=!1}_transform(e,t,i){if(this.ready)return this.push(e),i();const s=this.delimiter;let r=0;for(;this.readOffset<s.length&&r<e.length;)s[this.readOffset]===e[r]?this.readOffset++:this.readOffset=0,r++;if(this.readOffset===s.length){this.ready=!0,this.emit("ready");const t=e.slice(r);t.length>0&&this.push(t)}i()}}t.ReadyParser=r},637:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegexParser=void 0;const s=i(2203);class r extends s.Transform{regex;data;constructor({regex:e,...t}){const i={encoding:"utf8",...t};if(void 0===e)throw new TypeError('"options.regex" must be a regular expression pattern or object');e instanceof RegExp||(e=new RegExp(e.toString())),super(i),this.regex=e,this.data=""}_transform(e,t,i){const s=(this.data+e).split(this.regex);this.data=s.pop()||"",s.forEach((e=>{this.push(e)})),i()}_flush(e){this.push(this.data),this.data="",e()}}t.RegexParser=r},9831:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlipDecoder=void 0;const s=i(2203);class r extends s.Transform{opts;buffer;escape;start;constructor(e={}){super(e);const{START:t,ESC:i=219,END:s=192,ESC_START:r,ESC_END:n=220,ESC_ESC:o=221}=e;this.opts={START:t,ESC:i,END:s,ESC_START:r,ESC_END:n,ESC_ESC:o},this.buffer=Buffer.alloc(0),this.escape=!1,this.start=!1}_transform(e,t,i){for(let t=0;t<e.length;t++){let i=e[t];if(i!==this.opts.START){if(null==this.opts.START&&(this.start=!0),this.escape)i===this.opts.ESC_START&&this.opts.START?i=this.opts.START:i===this.opts.ESC_ESC?i=this.opts.ESC:i===this.opts.ESC_END?i=this.opts.END:(this.escape=!1,this.push(this.buffer),this.buffer=Buffer.alloc(0));else{if(i===this.opts.ESC){this.escape=!0;continue}if(i===this.opts.END){this.push(this.buffer),this.buffer=Buffer.alloc(0),this.escape=!1,this.start=!1;continue}}this.escape=!1,this.start&&(this.buffer=Buffer.concat([this.buffer,Buffer.from([i])]))}else this.start=!0}i()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.SlipDecoder=r},4399:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlipEncoder=void 0;const s=i(2203);class r extends s.Transform{opts;constructor(e={}){super(e);const{START:t,ESC:i=219,END:s=192,ESC_START:r,ESC_END:n=220,ESC_ESC:o=221,bluetoothQuirk:a=!1}=e;this.opts={START:t,ESC:i,END:s,ESC_START:r,ESC_END:n,ESC_ESC:o,bluetoothQuirk:a}}_transform(e,t,i){const s=e.length;if(this.opts.bluetoothQuirk&&0===s)return i();const r=Buffer.alloc(2*s+2);let n=0;1==this.opts.bluetoothQuirk&&(r[n++]=this.opts.END),void 0!==this.opts.START&&(r[n++]=this.opts.START);for(let t=0;t<s;t++){let i=e[t];i===this.opts.START&&this.opts.ESC_START?(r[n++]=this.opts.ESC,i=this.opts.ESC_START):i===this.opts.END?(r[n++]=this.opts.ESC,i=this.opts.ESC_END):i===this.opts.ESC&&(r[n++]=this.opts.ESC,i=this.opts.ESC_ESC),r[n++]=i}r[n++]=this.opts.END,i(null,r.slice(0,n))}}t.SlipEncoder=r},3819:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(9831),t),r(i(4399),t)},7102:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpacePacketParser=void 0;const s=i(2203),r=i(2415);class n extends s.Transform{timeCodeFieldLength;ancillaryDataFieldLength;dataBuffer;headerBuffer;dataLength;expectingHeader;dataSlice;header;constructor(e={}){super({...e,objectMode:!0}),this.timeCodeFieldLength=e.timeCodeFieldLength||0,this.ancillaryDataFieldLength=e.ancillaryDataFieldLength||0,this.dataSlice=this.timeCodeFieldLength+this.ancillaryDataFieldLength,this.dataBuffer=Buffer.alloc(0),this.headerBuffer=Buffer.alloc(0),this.dataLength=0,this.expectingHeader=!0}pushCompletedPacket(){if(!this.header)throw new Error("Missing header");const e=Buffer.from(this.dataBuffer.slice(0,this.timeCodeFieldLength)),t=Buffer.from(this.dataBuffer.slice(this.timeCodeFieldLength,this.timeCodeFieldLength+this.ancillaryDataFieldLength)),i=Buffer.from(this.dataBuffer.slice(this.dataSlice,this.dataLength)),s={header:{...this.header},data:i.toString()};(e.length>0||t.length>0)&&(s.secondaryHeader={},e.length&&(s.secondaryHeader.timeCode=e.toString()),t.length&&(s.secondaryHeader.ancillaryData=t.toString())),this.push(s);const n=Buffer.from(this.dataBuffer.slice(this.dataLength));n.length>=r.HEADER_LENGTH?this.extractHeader(n):(this.headerBuffer=n,this.dataBuffer=Buffer.alloc(0),this.expectingHeader=!0,this.dataLength=0,this.header=void 0)}extractHeader(e){const t=Buffer.concat([this.headerBuffer,e]),i=t.slice(r.HEADER_LENGTH);t.length>=r.HEADER_LENGTH?(this.header=(0,r.convertHeaderBufferToObj)(t),this.dataLength=this.header.dataLength,this.headerBuffer=Buffer.alloc(0),this.expectingHeader=!1):this.headerBuffer=t,i.length>0&&(this.dataBuffer=Buffer.from(i),this.dataBuffer.length>=this.dataLength&&this.pushCompletedPacket())}_transform(e,t,i){this.expectingHeader?this.extractHeader(e):(this.dataBuffer=Buffer.concat([this.dataBuffer,e]),this.dataBuffer.length>=this.dataLength&&this.pushCompletedPacket()),i()}_flush(e){const t=Buffer.concat([this.headerBuffer,this.dataBuffer]),i=Array.from(t);this.push(i),e()}}t.SpacePacketParser=n},2415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertHeaderBufferToObj=t.HEADER_LENGTH=void 0,t.HEADER_LENGTH=6,t.convertHeaderBufferToObj=e=>{const i=Array.from(e.slice(0,t.HEADER_LENGTH)).reduce(((e,t)=>`${e}${(e=>{let t=Number(e).toString(2);for(;t.length<8;)t=`0${t}`;return t})(t)}`),""),s="000"===i.slice(0,3)?1:"UNKNOWN_VERSION",r=Number(i[3]),n=Number(i[4]),o=parseInt(i.slice(5,16),2),a=parseInt(i.slice(16,18),2);return{versionNumber:s,identification:{apid:o,secondaryHeader:n,type:r},sequenceControl:{packetName:parseInt(i.slice(18,32),2),sequenceFlags:a},dataLength:parseInt(i.slice(-16),2)+1}}},5802:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SerialPortStream=t.DisconnectedError=void 0;const r=i(2203),n=(0,s(i(3069)).default)("serialport/stream");class o extends Error{disconnected;constructor(e){super(e),this.disconnected=!0}}t.DisconnectedError=o;const a={brk:!1,cts:!1,dtr:!0,rts:!0};function c(e){const t=Buffer.allocUnsafe(e);return t.used=0,t}class l extends r.Duplex{port;_pool;_kMinPoolSpace;opening;closing;settings;constructor(e,t){const i={autoOpen:!0,endOnClose:!1,highWaterMark:65536,...e};if(super({highWaterMark:i.highWaterMark}),!i.binding)throw new TypeError('"Bindings" is invalid pass it as `options.binding`');if(!i.path)throw new TypeError(`"path" is not defined: ${i.path}`);if("number"!=typeof i.baudRate)throw new TypeError(`"baudRate" must be a number: ${i.baudRate}`);this.settings=i,this.opening=!1,this.closing=!1,this._pool=c(this.settings.highWaterMark),this._kMinPoolSpace=128,this.settings.autoOpen&&this.open(t)}get path(){return this.settings.path}get baudRate(){return this.settings.baudRate}get isOpen(){return(this.port?.isOpen??!1)&&!this.closing}_error(e,t){t?t.call(this,e):this.emit("error",e)}_asyncError(e,t){process.nextTick((()=>this._error(e,t)))}open(e){if(this.isOpen)return this._asyncError(new Error("Port is already open"),e);if(this.opening)return this._asyncError(new Error("Port is opening"),e);const{highWaterMark:t,binding:i,autoOpen:s,endOnClose:r,...o}=this.settings;this.opening=!0,n("opening",`path: ${this.path}`),this.settings.binding.open(o).then((t=>{n("opened",`path: ${this.path}`),this.port=t,this.opening=!1,this.emit("open"),e&&e.call(this,null)}),(t=>{this.opening=!1,n("Binding #open had an error",t),this._error(t,e)}))}update(e,t){if(!this.isOpen||!this.port)return n("update attempted, but port is not open"),this._asyncError(new Error("Port is not open"),t);n("update",`baudRate: ${e.baudRate}`),this.port.update(e).then((()=>{n("binding.update","finished"),this.settings.baudRate=e.baudRate,t&&t.call(this,null)}),(e=>(n("binding.update","error",e),this._error(e,t))))}write(e,t,i){return Array.isArray(e)&&(e=Buffer.from(e)),"function"==typeof t?super.write(e,t):super.write(e,t,i)}_write(e,t,i){this.isOpen&&this.port?(n("_write",`${e.length} bytes of data`),this.port.write(e).then((()=>{n("binding.write","write finished"),i(null)}),(e=>{n("binding.write","error",e),e.canceled||this._disconnected(e),i(e)}))):this.once("open",(()=>{this._write(e,t,i)}))}_writev(e,t){n("_writev",`${e.length} chunks of data`);const i=e.map((e=>e.chunk));this._write(Buffer.concat(i),void 0,t)}_read(e){if(!this.isOpen||!this.port)return n("_read","queueing _read for after open"),void this.once("open",(()=>{this._read(e)}));(!this._pool||this._pool.length-this._pool.used<this._kMinPoolSpace)&&(n("_read","discarding the read buffer pool because it is below kMinPoolSpace"),this._pool=c(this.settings.highWaterMark));const t=this._pool,i=Math.min(t.length-t.used,e),s=t.used;n("_read","reading",{start:s,toRead:i}),this.port.read(t,s,i).then((({bytesRead:e})=>{if(n("binding.read","finished",{bytesRead:e}),0===e)return n("binding.read","Zero bytes read closing readable stream"),void this.push(null);t.used+=e,this.push(t.slice(s,s+e))}),(t=>{n("binding.read","error",t),t.canceled||this._disconnected(t),this._read(e)}))}_disconnected(e){this.isOpen?(n("disconnected",e),this.close(void 0,new o(e.message))):n("disconnected aborted because already closed",e)}close(e,t=null){if(!this.isOpen||!this.port)return n("close attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);this.closing=!0,n("#close"),this.port.close().then((()=>{this.closing=!1,n("binding.close","finished"),this.emit("close",t),this.settings.endOnClose&&this.emit("end"),e&&e.call(this,t)}),(t=>(this.closing=!1,n("binding.close","had an error",t),this._error(t,e))))}set(e,t){if(!this.isOpen||!this.port)return n("set attempted, but port is not open"),this._asyncError(new Error("Port is not open"),t);const i={...a,...e};n("#set",i),this.port.set(i).then((()=>{n("binding.set","finished"),t&&t.call(this,null)}),(e=>(n("binding.set","had an error",e),this._error(e,t))))}get(e){if(!this.isOpen||!this.port)return n("get attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);n("#get"),this.port.get().then((t=>{n("binding.get","finished"),e.call(this,null,t)}),(t=>(n("binding.get","had an error",t),this._error(t,e))))}flush(e){if(!this.isOpen||!this.port)return n("flush attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);n("#flush"),this.port.flush().then((()=>{n("binding.flush","finished"),e&&e.call(this,null)}),(t=>(n("binding.flush","had an error",t),this._error(t,e))))}drain(e){if(n("drain"),!this.isOpen||!this.port)return n("drain queuing on port open"),void this.once("open",(()=>{this.drain(e)}));this.port.drain().then((()=>{n("binding.drain","finished"),e&&e.call(this,null)}),(t=>(n("binding.drain","had an error",t),this._error(t,e))))}}t.SerialPortStream=l},1821:(e,t,i)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let s=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(r=s))})),t.splice(r,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(8220)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},8220:(e,t,i)=>{e.exports=function(e){function t(e){let i,r,n,o=null;function a(...e){if(!a.enabled)return;const s=a,r=Number(new Date),n=r-(i||r);s.diff=n,s.prev=i,s.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,r)=>{if("%%"===i)return"%";o++;const n=t.formatters[r];if("function"==typeof n){const t=e[o];i=n.call(s,t),e.splice(o,1),o--}return i})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==t.namespaces&&(r=t.namespaces,n=t.enabled(e)),n),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,i){const s=t(this.namespace+(void 0===i?":":i)+e);return s.log=this.log,s}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let i;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(i=0;i<r;i++)s[i]&&("-"===(e=s[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let i,s;for(i=0,s=t.skips.length;i<s;i++)if(t.skips[i].test(e))return!1;for(i=0,s=t.names.length;i<s;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(37),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((i=>{t[i]=e[i]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},3069:(e,t,i)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=i(1821):e.exports=i(4037)},4037:(e,t,i)=>{const s=i(2018),r=i(9023);t.init=function(e){e.inspectOpts={};const i=Object.keys(t.inspectOpts);for(let s=0;s<i.length;s++)e.inspectOpts[i[s]]=t.inspectOpts[i[s]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(i){const{namespace:s,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),n=`  ${r};1m${s} [0m`;i[0]=n+i[0].split("\n").join("\n"+n),i.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else i[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+i[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=i(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const i=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[i]=s,e}),{}),e.exports=i(8220)(t);const{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},37:e=>{var t=1e3,i=60*t,s=60*i,r=24*s,n=7*r;function o(e,t,i,s){var r=t>=1.5*i;return Math.round(e/i)+" "+s+(r?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=r?o(c,l,r,"day"):l>=s?o(c,l,s,"hour"):l>=i?o(c,l,i,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var n=Math.abs(e);return n>=r?Math.round(e/r)+"d":n>=s?Math.round(e/s)+"h":n>=i?Math.round(e/i)+"m":n>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i={grad:.9,turn:360,rad:360/(2*Math.PI)},s=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},r=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},n=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),e>i?i:e>t?e:t},o=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:n(e.r,0,255),g:n(e.g,0,255),b:n(e.b,0,255),a:n(e.a)}},c=function(e){return{r:r(e.r),g:r(e.g),b:r(e.b),a:r(e.a,3)}},l=/^#([0-9a-f]{3,8})$/i,u=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,i=e.g,s=e.b,r=e.a,n=Math.max(t,i,s),o=n-Math.min(t,i,s),a=o?n===t?(i-s)/o:n===i?2+(s-t)/o:4+(t-i)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:r}},h=function(e){var t=e.h,i=e.s,s=e.v,r=e.a;t=t/360*6,i/=100,s/=100;var n=Math.floor(t),o=s*(1-i),a=s*(1-(t-n)*i),c=s*(1-(1-t+n)*i),l=n%6;return{r:255*[s,a,o,o,c,s][l],g:255*[c,s,s,a,o,o][l],b:255*[o,o,c,s,s,a][l],a:r}},p=function(e){return{h:o(e.h),s:n(e.s,0,100),l:n(e.l,0,100),a:n(e.a)}},f=function(e){return{h:r(e.h),s:r(e.s),l:r(e.l),a:r(e.a,3)}},b=function(e){return h((i=(t=e).s,{h:t.h,s:(i*=((s=t.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:t.a}));var t,i,s},m=function(e){return{h:(t=d(e)).h,s:(r=(200-(i=t.s))*(s=t.v)/100)>0&&r<200?i*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,i,s,r},g=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,I={string:[[function(e){var t=l.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?r(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?r(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=w.exec(e)||v.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=g.exec(e)||y.exec(e);if(!t)return null;var s,r,n=p({h:(s=t[1],r=t[2],void 0===r&&(r="deg"),Number(s)*(i[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return b(n)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,r=e.b,n=e.a,o=void 0===n?1:n;return s(t)&&s(i)&&s(r)?a({r:Number(t),g:Number(i),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,i=e.s,r=e.l,n=e.a,o=void 0===n?1:n;if(!s(t)||!s(i)||!s(r))return null;var a=p({h:Number(t),s:Number(i),l:Number(r),a:Number(o)});return b(a)},"hsl"],[function(e){var t=e.h,i=e.s,r=e.v,a=e.a,c=void 0===a?1:a;if(!s(t)||!s(i)||!s(r))return null;var l=function(e){return{h:o(e.h),s:n(e.s,0,100),v:n(e.v,0,100),a:n(e.a)}}({h:Number(t),s:Number(i),v:Number(r),a:Number(c)});return h(l)},"hsv"]]},_=function(e,t){for(var i=0;i<t.length;i++){var s=t[i][0](e);if(s)return[s,t[i][1]]}return[null,void 0]},C=function(e){return"string"==typeof e?_(e.trim(),I.string):"object"==typeof e&&null!==e?_(e,I.object):[null,void 0]},k=function(e,t){var i=m(e);return{h:i.h,s:n(i.s+100*t,0,100),l:i.l,a:i.a}},S=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},E=function(e,t){var i=m(e);return{h:i.h,s:i.s,l:n(i.l+100*t,0,100),a:i.a}},O=function(){function e(e){this.parsed=C(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return r(S(this.rgba),2)},e.prototype.isDark=function(){return S(this.rgba)<.5},e.prototype.isLight=function(){return S(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,i=e.g,s=e.b,o=(n=e.a)<1?u(r(255*n)):"","#"+u(t)+u(i)+u(s)+o;var e,t,i,s,n,o},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,i=e.g,s=e.b,(r=e.a)<1?"rgba("+t+", "+i+", "+s+", "+r+")":"rgb("+t+", "+i+", "+s+")";var e,t,i,s,r},e.prototype.toHsl=function(){return f(m(this.rgba))},e.prototype.toHslString=function(){return t=(e=f(m(this.rgba))).h,i=e.s,s=e.l,(r=e.a)<1?"hsla("+t+", "+i+"%, "+s+"%, "+r+")":"hsl("+t+", "+i+"%, "+s+"%)";var e,t,i,s,r},e.prototype.toHsv=function(){return e=d(this.rgba),{h:r(e.h),s:r(e.s),v:r(e.v),a:r(e.a,3)};var e},e.prototype.invert=function(){return A({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),A(k(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),A(k(this.rgba,-e))},e.prototype.grayscale=function(){return A(k(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),A(E(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),A(E(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?A({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):r(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=m(this.rgba);return"number"==typeof e?A({h:e,s:t.s,l:t.l,a:t.a}):r(t.h)},e.prototype.isEqual=function(e){return this.toHex()===A(e).toHex()},e}(),A=function(e){return e instanceof O?e:new O(e)},N=[];t.Colord=O,t.colord=A,t.extend=function(e){e.forEach((function(e){N.indexOf(e)<0&&(e(O,I),N.push(e))}))},t.getFormat=function(e){return C(e)[1]},t.random=function(){return new O({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},7833:(e,t,i)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let s=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(r=s))})),t.splice(r,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(736)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736:(e,t,i)=>{e.exports=function(e){function t(e){let i,r,n,o=null;function a(...e){if(!a.enabled)return;const s=a,r=Number(new Date),n=r-(i||r);s.diff=n,s.prev=i,s.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,r)=>{if("%%"===i)return"%";o++;const n=t.formatters[r];if("function"==typeof n){const t=e[o];i=n.call(s,t),e.splice(o,1),o--}return i})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==t.namespaces&&(r=t.namespaces,n=t.enabled(e)),n),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,i){const s=t(this.namespace+(void 0===i?":":i)+e);return s.log=this.log,s}function r(e,t){let i=0,s=0,r=-1,n=0;for(;i<e.length;)if(s<t.length&&(t[s]===e[i]||"*"===t[s]))"*"===t[s]?(r=s,n=i,s++):(i++,s++);else{if(-1===r)return!1;s=r+1,n++,i=n}for(;s<t.length&&"*"===t[s];)s++;return s===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of i)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const i of t.skips)if(r(e,i))return!1;for(const i of t.names)if(r(e,i))return!0;return!1},t.humanize=i(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((i=>{t[i]=e[i]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},5753:(e,t,i)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=i(7833):e.exports=i(6033)},6033:(e,t,i)=>{const s=i(2018),r=i(9023);t.init=function(e){e.inspectOpts={};const i=Object.keys(t.inspectOpts);for(let s=0;s<i.length;s++)e.inspectOpts[i[s]]=t.inspectOpts[i[s]]},t.log=function(...e){return process.stderr.write(r.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(i){const{namespace:s,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),n=`  ${r};1m${s} [0m`;i[0]=n+i[0].split("\n").join("\n"+n),i.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else i[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+i[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=i(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const i=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[i]=s,e}),{}),e.exports=i(736)(t);const{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},6022:e=>{!function(){"use strict";var t=[,function(e,t){function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===s(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var r=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=r,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var s,r,n=(r=2,function(e){if(Array.isArray(e))return e}(s=t)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var s,r,n=[],o=!0,a=!1;try{for(i=i.call(e);!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}}(s,r)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(e,t):void 0}}(s,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];return e[o]=a,e}),{})},t.isArguments=function(e){return null!=e&&r(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var n={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=n,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(n.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var i=Object.create(null),s=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},r=0;r<64;r++)i[s(r)]=r;var n=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],i=0;i<e;i++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},o={encode:function(e){if("string"==typeof e){var t=e;e=n(t.length);for(var i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[i]=r}}for(var o=[],a=null,c=null,l=null,u=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,l=(15&e[d])<<2;break;case 2:l|=e[d]>>6&3,u=63&e[d],o.push(s(a)),o.push(s(c)),o.push(s(l)),o.push(s(u)),a=null,c=null,l=null,u=null}return null!=a&&(o.push(s(a)),o.push(s(c)),null==l?o.push("="):o.push(s(l)),null==u&&o.push("=")),o.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var s,r=n(t),o=null,a=null,c=null,l=0,u=0;u<e.length;u++){var d="="===(s=e.charAt(u))?-1:i[s];switch(u%4){case 0:if(d<0)throw new Error("invalid base64 string");o=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");o|=d>>4,r[l++]=o,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,r[l++]=a,c=(3&d)<<6);break;case 3:d>=0&&(r[l++]=c|d)}}return r},newBinary:n};t.Base64=o},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(t,r,n,o,a){var c=r[t];switch(i(c)){case"string":return s(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var l,u=o+n,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var h=c.length,p=0;p<h;p+=1)d[p]=e(p,c,n,u,a)||"null";return l=0===d.length?"[]":u?"[\n"+u+d.join(",\n"+u)+"\n"+o+"]":"["+d.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach((function(t){(l=e(t,c,n,u,a))&&d.push(s(t)+(u?": ":":")+l)})),l=0===d.length?"{}":u?"{\n"+u+d.join(",\n"+u)+"\n"+o+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var i=Object.assign({indent:"",canonical:!1},t);if(!0===i.indent)i.indent="  ";else if("number"==typeof i.indent){for(var s="",n=0;n<i.indent;n++)s+=" ";i.indent=s}return r("",{"":e},i.indent,"",i.canonical)},e.exports=t.default}],i={};function s(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,s),n.exports}var r={};!function(){var e=r,t=s(2).Base64,i=s(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var n=s(1),o={};e.EJSON=o;var a=new Map;o.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,n.hasOwn)(e,"$date")&&1===(0,n.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,n.hasOwn)(e,"$regexp")&&(0,n.hasOwn)(e,"$flags")&&2===(0,n.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,n.hasOwn)(e,"$InfNaN")&&1===(0,n.lengthOf)(e)},matchObject:n.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,n.hasOwn)(e,"$binary")&&1===(0,n.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,n.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,n.hasOwn)(e,"$escape")&&1===(0,n.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var i=(0,n.lengthOf)(e);1!==i&&2!==i||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,n.keysOf)(e).forEach((function(i){t[i]=o.toJSONValue(e[i])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,n.keysOf)(e.$escape).forEach((function(i){t[i]=o.fromJSONValue(e.$escape[i])})),t}},{matchJSONValue:function(e){return(0,n.hasOwn)(e,"$type")&&(0,n.hasOwn)(e,"$value")&&2===(0,n.lengthOf)(e)},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(e){var t=i._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var s=a.get(t);return i._noYieldsAllowed((function(){return s(e.$value)}))}}];o._isCustomType=function(e){return e&&(0,n.isFunction)(e.toJSONValue)&&(0,n.isFunction)(e.typeName)&&a.has(e.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,n.convertMapToObject)(a)},o._getConverters=function(){return c};var l=function(e){for(var t=0;t<c.length;t++){var i=c[t];if(i.matchObject(e))return i.toJSONValue(e)}},u=function e(t){if(null===t)return null;var i=l(t);return void 0!==i?i:(0,n.isObject)(t)?((0,n.keysOf)(t).forEach((function(i){var s=t[i];if((0,n.isObject)(s)||void 0===s||(0,n.isInfOrNaN)(s)){var r=l(s);r?t[i]=r:e(s)}})),t):t};o._adjustTypesToJSONValue=u,o.toJSONValue=function(e){var t=l(e);if(void 0!==t)return t;var i=e;return(0,n.isObject)(e)&&(i=o.clone(e),u(i)),i};var d=function(e){if((0,n.isObject)(e)&&null!==e){var t=(0,n.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var i=0;i<c.length;i++){var s=c[i];if(s.matchJSONValue(e))return s.fromJSONValue(e)}}return e},h=function e(t){if(null===t)return null;var i=d(t);return i!==t?i:(0,n.isObject)(t)?((0,n.keysOf)(t).forEach((function(i){var s=t[i];if((0,n.isObject)(s)){var r=d(s);if(s!==r)return void(t[i]=r);e(s)}})),t):t};o._adjustTypesFromJSONValue=h,o.fromJSONValue=function(e){var t=d(e);return t===e&&(0,n.isObject)(e)&&(t=o.clone(e),h(t)),t},o.stringify=(0,n.handleError)((function(e,t){var i=o.toJSONValue(e);return t&&(t.canonical||t.indent)?s(4)(i,t):JSON.stringify(i)})),o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,t,i){var s,r=!(!i||!i.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,n.isObject)(e)||!(0,n.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(o.isBinary(e)&&o.isBinary(t)){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}if((0,n.isFunction)(e.equals))return e.equals(t,i);if((0,n.isFunction)(t.equals))return t.equals(e,i);var a,c=Array.isArray(e),l=Array.isArray(t);if(c!==l)return!1;if(c&&l){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(!o.equals(e[s],t[s],i))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(t)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(t))}var u=(0,n.keysOf)(e),d=(0,n.keysOf)(t);return r?(s=0,a=u.every((function(r){return!(s>=d.length||r!==d[s]||!o.equals(e[r],t[d[s]],i)||(s++,0))}))):(s=0,a=u.every((function(r){return!!(0,n.hasOwn)(t,r)&&!!o.equals(e[r],t[r],i)&&(s++,!0)}))),a&&s===d.length},o.clone=function(e){var t;if(!(0,n.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){t=o.newBinary(e.length);for(var i=0;i<e.length;i++)t[i]=e[i];return t}return Array.isArray(e)?e.map(o.clone):(0,n.isArguments)(e)?Array.from(e).map(o.clone):(0,n.isFunction)(e.clone)?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(t={},(0,n.keysOf)(e).forEach((function(i){t[i]=o.clone(e[i])})),t)},o.newBinary=t.newBinary}(),e.exports=r.EJSON}()},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,i="~";function s(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,s,n,o){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new r(s,n||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,o=new Array(n);r<n;r++)o[r]=s[r].fn;return o},a.prototype.listenerCount=function(e){var t=i?i+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,r,n,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,n),!0;case 6:return u.fn.call(u.context,t,s,r,n,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,s);break;case 4:u[l].fn.call(u[l].context,t,s,r);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,s,r){var n=i?i+e:e;if(!this._events[n])return this;if(!t)return o(this,n),this;var a=this._events[n];if(a.fn)a.fn!==t||r&&!a.once||s&&a.context!==s||o(this,n);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||s&&a[c].context!==s)&&l.push(a[c]);l.length?this._events[n]=1===l.length?l[0]:l:o(this,n)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a},2017:e=>{"use strict";e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var s,r,n;if(Array.isArray(t)){if((s=t.length)!=i.length)return!1;for(r=s;0!=r--;)if(!e(t[r],i[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((s=(n=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(r=s;0!=r--;)if(!Object.prototype.hasOwnProperty.call(i,n[r]))return!1;for(r=s;0!=r--;){var o=n[r];if(!e(t[o],i[o]))return!1}return!0}return t!=t&&i!=i}},5884:e=>{"use strict";e.exports=(e,t=process.argv)=>{const i=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(i+e),r=t.indexOf("--");return-1!==s&&(-1===r||s<r)}},8570:e=>{e.exports=i;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function s(e){return!0===(e&&e.__isLong__)}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=s;var r={},n={};function o(e,t){var i,s,o;return t?(o=0<=(e>>>=0)&&e<256)&&(s=n[e])?s:(i=c(e,(0|e)<0?-1:0,!0),o&&(n[e]=i),i):(o=-128<=(e|=0)&&e<128)&&(s=r[e])?s:(i=c(e,e<0?-1:0,!1),o&&(r[e]=i),i)}function a(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=p)return _}else{if(e<=-f)return C;if(e+1>=f)return I}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,s){return new i(e,t,s)}i.fromInt=o,i.fromNumber=a,i.fromBits=c;var l=Math.pow;function u(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(i=t,t=!1):t=!!t,(i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===s)return u(e.substring(1),t,i).neg();for(var r=a(l(i,8)),n=m,o=0;o<e.length;o+=8){var c=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+c),i);if(c<8){var h=a(l(i,c));n=n.mul(h).add(a(d))}else n=(n=n.mul(r)).add(a(d))}return n.unsigned=t,n}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?u(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=u,i.fromValue=d;var h=4294967296,p=h*h,f=p/2,b=o(1<<24),m=o(0);i.ZERO=m;var g=o(0,!0);i.UZERO=g;var y=o(1);i.ONE=y;var w=o(1,!0);i.UONE=w;var v=o(-1);i.NEG_ONE=v;var I=c(-1,2147483647,!1);i.MAX_VALUE=I;var _=c(-1,-1,!0);i.MAX_UNSIGNED_VALUE=_;var C=c(0,-2147483648,!1);i.MIN_VALUE=C;var k=i.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=a(e),i=this.div(t),s=i.mul(t).sub(this);return i.toString(e)+s.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=a(l(e,6),this.unsigned),n=this,o="";;){var c=n.div(r),u=(n.sub(c.mul(r)).toInt()>>>0).toString(e);if((n=c).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return!(1&~this.low)},k.isEven=function(){return!(1&this.low)},k.equals=function(e){return s(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(s(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(y)},k.neg=k.negate,k.add=function(e){s(e)||(e=d(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,n=65535&this.low,o=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=n+(65535&e.low))>>>16,h+=(p+=r+l)>>>16,u+=(h+=i+a)>>>16,u+=t+o,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(e){return s(e)||(e=d(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return m;if(s(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(C))return e.isOdd()?C:m;if(e.eq(C))return this.isOdd()?C:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(b)&&e.lt(b))return a(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,l=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,g=0,y=0,w=0;return y+=(w+=o*p)>>>16,g+=(y+=n*p)>>>16,y&=65535,g+=(y+=o*h)>>>16,f+=(g+=r*p)>>>16,g&=65535,f+=(g+=n*h)>>>16,g&=65535,f+=(g+=o*u)>>>16,f+=i*p+r*h+n*u+o*l,c((y&=65535)<<16|(w&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(s(e)||(e=d(e)),e.isZero())throw Error("division by zero");var i,r,n;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return w;n=g}else{if(this.eq(C))return e.eq(y)||e.eq(v)?C:e.eq(C)?y:(i=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:v:(r=this.sub(e.mul(i)),n=i.add(r.div(e)));if(e.eq(C))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=m}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(i)/Math.LN2),u=o<=48?1:l(2,o-48),h=a(i),p=h.mul(e);p.isNegative()||p.gt(r);)p=(h=a(i-=u,this.unsigned)).mul(e);h.isZero()&&(h=y),n=n.add(h),r=r.sub(p)}return n},k.div=k.divide,k.modulo=function(e){return s(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return c(~this.low,~this.high,this.unsigned)},k.and=function(e){return s(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return s(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return s(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return s(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return s(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(s(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,s){return s?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},4865:e=>{"use strict";const t=(e,t,s,r)=>{if("length"===s||"prototype"===s)return;if("arguments"===s||"caller"===s)return;const n=Object.getOwnPropertyDescriptor(e,s),o=Object.getOwnPropertyDescriptor(t,s);!i(n,o)&&r||Object.defineProperty(e,s,o)},i=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},s=(e,t)=>`/* Wrapped ${e}*/\n${t}`,r=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),n=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,i,{ignoreNonConfigurable:o=!1}={})=>{const{name:a}=e;for(const s of Reflect.ownKeys(i))t(e,i,s,o);return((e,t)=>{const i=Object.getPrototypeOf(t);i!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,i)})(e,i),((e,t,i)=>{const o=""===i?"":`with ${i.trim()}() `,a=s.bind(null,o,t.toString());Object.defineProperty(a,"name",n),Object.defineProperty(e,"toString",{...r,value:a})})(e,i,a),e}},6585:e=>{var t=1e3,i=60*t,s=60*i,r=24*s,n=7*r;function o(e,t,i,s){var r=t>=1.5*i;return Math.round(e/i)+" "+s+(r?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=r?o(c,l,r,"day"):l>=s?o(c,l,s,"hour"):l>=i?o(c,l,i,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var n=Math.abs(e);return n>=r?Math.round(e/r)+"d":n>=s?Math.round(e/s)+"h":n>=i?Math.round(e/i)+"m":n>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8169:(e,t,i)=>{"function"==typeof process.addon?e.exports=process.addon.bind(process):e.exports=i(1381)},1381:(e,t,i)=>{var s=i(9896),r=i(6928),n=i(857),o=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,u=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",d=process.env.npm_config_arch||n.arch(),h=process.env.npm_config_platform||n.platform(),p=process.env.LIBC||(function(e){return"linux"===e&&s.existsSync("/etc/alpine-release")}(h)?"musl":"glibc"),f=process.env.ARM_VERSION||("arm64"===d?"8":a.arm_version)||"",b=(process.versions.uv||"").split(".")[0];function m(e){return o(m.resolve(e))}function g(e){try{return s.readdirSync(e)}catch(e){return[]}}function y(e,t){var i=g(e).filter(t);return i[0]&&r.join(e,i[0])}function w(e){return/\.node$/.test(e)}function v(e){var t=e.split("-");if(2===t.length){var i=t[0],s=t[1].split("+");if(i&&s.length&&s.every(Boolean))return{name:e,platform:i,architectures:s}}}function I(e,t){return function(i){return null!=i&&i.platform===e&&i.architectures.includes(t)}}function _(e,t){return e.architectures.length-t.architectures.length}function C(e){var t=e.split("."),i={file:e,specificity:0};if("node"===t.pop()){for(var s=0;s<t.length;s++){var r=t[s];if("node"===r||"electron"===r||"node-webkit"===r)i.runtime=r;else if("napi"===r)i.napi=!0;else if("abi"===r.slice(0,3))i.abi=r.slice(3);else if("uv"===r.slice(0,2))i.uv=r.slice(2);else if("armv"===r.slice(0,4))i.armv=r.slice(4);else{if("glibc"!==r&&"musl"!==r)continue;i.libc=r}i.specificity++}return i}}function k(e,t){return function(i){return!(null==i||i.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(i)||i.abi!==t&&!i.napi||i.uv&&i.uv!==b||i.armv&&i.armv!==f||i.libc&&i.libc!==p)}}function S(e){return function(t,i){return t.runtime!==i.runtime?t.runtime===e?-1:1:t.abi!==i.abi?t.abi?-1:1:t.specificity!==i.specificity?t.specificity>i.specificity?-1:1:0}}e.exports=m,m.resolve=m.path=function(e){e=r.resolve(e||".");try{var t=o(r.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var i=y(r.join(e,"build/Release"),w);if(i)return i;var s=y(r.join(e,"build/Debug"),w);if(s)return s}var n=E(e);if(n)return n;var a=E(r.dirname(process.execPath));if(a)return a;var m=["platform="+h,"arch="+d,"runtime="+u,"abi="+l,"uv="+b,f?"armv="+f:"","libc="+p,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+m+"\n    loaded from: "+e+"\n");function E(e){var t=g(r.join(e,"prebuilds")).map(v).filter(I(h,d)).sort(_)[0];if(t){var i=r.join(e,"prebuilds",t.name),s=g(i).map(C).filter(k(u,l)).sort(S(u))[0];return s?r.join(i,s.file):void 0}}},m.parseTags=C,m.matchTags=k,m.compareTags=S,m.parseTuple=v,m.matchTuple=I,m.compareTuples=_},825:(e,t,i)=>{var s=s||i(7026),r=r||i(5170),n=n||i(4434).EventEmitter;!function(){"use strict";s.supportsSerial=!1,s.firePacketEvents=function(e,t,i,r){t.address?e.emit("message",t,i,r):s.fireBundleEvents(e,t,i,r)},s.fireBundleEvents=function(e,t,i,r){e.emit("bundle",t,i,r);for(var n=0;n<t.packets.length;n++){var o=t.packets[n];s.firePacketEvents(e,o,t.timeTag,r)}},s.fireClosedPortSendError=function(e,t){t=t||"Can't send packets on a closed osc.Port object. Please open (or reopen) this Port by calling open().",e.emit("error",t)},s.Port=function(e){this.options=e||{},this.on("data",this.decodeOSC.bind(this))};var t=s.Port.prototype=Object.create(n.prototype);t.constructor=s.Port,t.send=function(e){var t=Array.prototype.slice.call(arguments),i=this.encodeOSC(e),r=s.nativeBuffer(i);t[0]=r,this.sendRaw.apply(this,t)},t.encodeOSC=function(e){var t;e=e.buffer?e.buffer:e;try{t=s.writePacket(e,this.options)}catch(e){this.emit("error",e)}return t},t.decodeOSC=function(e,t){e=s.byteArray(e),this.emit("raw",e,t);try{var i=s.readPacket(e,this.options);this.emit("osc",i,t),s.firePacketEvents(this,i,void 0,t)}catch(e){this.emit("error",e)}},s.SLIPPort=function(e){var t=this,i=this.options=e||{};i.useSLIP=void 0===i.useSLIP||i.useSLIP,this.decoder=new r.Decoder({onMessage:this.decodeOSC.bind(this),onError:function(e){t.emit("error",e)}});var s=i.useSLIP?this.decodeSLIPData:this.decodeOSC;this.on("data",s.bind(this))},(t=s.SLIPPort.prototype=Object.create(s.Port.prototype)).constructor=s.SLIPPort,t.encodeOSC=function(e){var t;e=e.buffer?e.buffer:e;try{var i=s.writePacket(e,this.options);t=r.encode(i)}catch(e){this.emit("error",e)}return t},t.decodeSLIPData=function(e,t){this.decoder.decode(e,t)},s.relay=function(e,t,i,s,r,n){i=i||"message",s=s||"send",r=r||function(){},n=n?[null].concat(n):[];var o=function(e){n[0]=e,e=r(e),t[s].apply(t,n)};return e.on(i,o),{eventName:i,listener:o}},s.relayPorts=function(e,t,i){var r=i.raw?"raw":"osc",n=i.raw?"sendRaw":"send";return s.relay(e,t,r,n,i.transform)},s.stopRelaying=function(e,t){e.removeListener(t.eventName,t.listener)},s.Relay=function(e,t,i){(this.options=i||{}).raw=!1,this.port1=e,this.port2=t,this.listen()},(t=s.Relay.prototype=Object.create(n.prototype)).constructor=s.Relay,t.open=function(){this.port1.open(),this.port2.open()},t.listen=function(){this.port1Spec&&this.port2Spec&&this.close(),this.port1Spec=s.relayPorts(this.port1,this.port2,this.options),this.port2Spec=s.relayPorts(this.port2,this.port1,this.options);var e=this.close.bind(this);this.port1.on("close",e),this.port2.on("close",e)},t.close=function(){s.stopRelaying(this.port1,this.port1Spec),s.stopRelaying(this.port2,this.port2Spec),this.emit("close",this.port1,this.port2)},e.exports&&(e.exports=s)}()},7026:(e,t,i)=>{var s=s||{};!function(){"use strict";s.SECS_70YRS=2208988800,s.TWO_32=4294967296,s.defaults={metadata:!1,unpackSingleArgs:!0},s.isCommonJS=!!e.exports,s.isNode=s.isCommonJS&&"undefined"==typeof window,s.isElectron=!("undefined"==typeof process||!process.versions||!process.versions.electron),s.isBufferEnv=s.isNode||s.isElectron,s.isArray=function(e){return e&&"[object Array]"===Object.prototype.toString.call(e)},s.isTypedArrayView=function(e){return e.buffer&&e.buffer instanceof ArrayBuffer},s.isBuffer=function(e){return s.isBufferEnv&&e instanceof Buffer},s.Long="undefined"!=typeof Long?Long:s.isNode?i(8570):void 0,s.TextDecoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):"undefined"!=typeof util&&(util.TextDecoder,1)?new util.TextDecoder("utf-8"):void 0,s.TextEncoder="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):"undefined"!=typeof util&&(util.TextEncoder,1)?new util.TextEncoder("utf-8"):void 0,s.dataView=function(e,t,i){return e.buffer?new DataView(e.buffer,t,i):e instanceof ArrayBuffer?new DataView(e,t,i):new DataView(new Uint8Array(e),t,i)},s.byteArray=function(e){if(e instanceof Uint8Array)return e;var t=e.buffer?e.buffer:e;if(!(t instanceof ArrayBuffer||void 0!==t.length&&"string"!=typeof t))throw new Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(e,null,2));return new Uint8Array(t)},s.nativeBuffer=function(e){return s.isBufferEnv?s.isBuffer(e)?e:Buffer.from(e.buffer?e:new Uint8Array(e)):s.isTypedArrayView(e)?e:new Uint8Array(e)},s.copyByteArray=function(e,t,i){if(s.isTypedArrayView(e)&&s.isTypedArrayView(t))t.set(e,i);else for(var r=void 0===i?0:i,n=Math.min(t.length-i,e.length),o=0,a=r;o<n;o++,a++)t[a]=e[o];return t},s.readString=function(e,t){for(var i=[],r=t.idx;r<e.byteLength;r++){var n=e.getUint8(r);if(0===n){r++;break}i.push(n)}return r=r+3&-4,t.idx=r,(s.isBufferEnv?s.readString.withBuffer:s.TextDecoder?s.readString.withTextDecoder:s.readString.raw)(i)},s.readString.raw=function(e){for(var t="",i=0;i<e.length;i+=1e4)t+=String.fromCharCode.apply(null,e.slice(i,i+1e4));return t},s.readString.withTextDecoder=function(e){var t=new Int8Array(e);return s.TextDecoder.decode(t)},s.readString.withBuffer=function(e){return Buffer.from(e).toString("utf-8")},s.writeString=function(e){var t,i=s.isBufferEnv?s.writeString.withBuffer:s.TextEncoder?s.writeString.withTextEncoder:null,r=e+"\0";i&&(t=i(r));for(var n=i?t.length:r.length,o=new Uint8Array(n+3&-4),a=0;a<n-1;a++){var c=i?t[a]:r.charCodeAt(a);o[a]=c}return o},s.writeString.withTextEncoder=function(e){return s.TextEncoder.encode(e)},s.writeString.withBuffer=function(e){return Buffer.from(e)},s.readPrimitive=function(e,t,i,s){var r=e[t](s.idx,!1);return s.idx+=i,r},s.writePrimitive=function(e,t,i,s,r){var n;return r=void 0===r?0:r,t?n=new Uint8Array(t.buffer):(n=new Uint8Array(s),t=new DataView(n.buffer)),t[i](r,e,!1),n},s.readInt32=function(e,t){return s.readPrimitive(e,"getInt32",4,t)},s.writeInt32=function(e,t,i){return s.writePrimitive(e,t,"setInt32",4,i)},s.readInt64=function(e,t){var i=s.readPrimitive(e,"getInt32",4,t),r=s.readPrimitive(e,"getInt32",4,t);return s.Long?new s.Long(r,i):{high:i,low:r,unsigned:!1}},s.writeInt64=function(e,t,i){var r=new Uint8Array(8);return r.set(s.writePrimitive(e.high,t,"setInt32",4,i),0),r.set(s.writePrimitive(e.low,t,"setInt32",4,i+4),4),r},s.readFloat32=function(e,t){return s.readPrimitive(e,"getFloat32",4,t)},s.writeFloat32=function(e,t,i){return s.writePrimitive(e,t,"setFloat32",4,i)},s.readFloat64=function(e,t){return s.readPrimitive(e,"getFloat64",8,t)},s.writeFloat64=function(e,t,i){return s.writePrimitive(e,t,"setFloat64",8,i)},s.readChar32=function(e,t){var i=s.readPrimitive(e,"getUint32",4,t);return String.fromCharCode(i)},s.writeChar32=function(e,t,i){var r=e.charCodeAt(0);if(!(void 0===r||r<-1))return s.writePrimitive(r,t,"setUint32",4,i)},s.readBlob=function(e,t){var i=s.readInt32(e,t),r=i+3&-4,n=new Uint8Array(e.buffer,t.idx,i);return t.idx+=r,n},s.writeBlob=function(e){var t=(e=s.byteArray(e)).byteLength,i=new Uint8Array(4+(t+3&-4)),r=new DataView(i.buffer);return s.writeInt32(t,r),i.set(e,4),i},s.readMIDIBytes=function(e,t){var i=new Uint8Array(e.buffer,t.idx,4);return t.idx+=4,i},s.writeMIDIBytes=function(e){e=s.byteArray(e);var t=new Uint8Array(4);return t.set(e),t},s.readColor=function(e,t){var i=new Uint8Array(e.buffer,t.idx,4),s=i[3]/255;return t.idx+=4,{r:i[0],g:i[1],b:i[2],a:s}},s.writeColor=function(e){var t=Math.round(255*e.a);return new Uint8Array([e.r,e.g,e.b,t])},s.readTrue=function(){return!0},s.readFalse=function(){return!1},s.readNull=function(){return null},s.readImpulse=function(){return 1},s.readTimeTag=function(e,t){var i=s.readPrimitive(e,"getUint32",4,t),r=s.readPrimitive(e,"getUint32",4,t);return{raw:[i,r],native:0===i&&1===r?Date.now():s.ntpToJSTime(i,r)}},s.writeTimeTag=function(e){var t=e.raw?e.raw:s.jsToNTPTime(e.native),i=new Uint8Array(8),r=new DataView(i.buffer);return s.writeInt32(t[0],r,0),s.writeInt32(t[1],r,4),i},s.timeTag=function(e,t){e=e||0;var i=(t=t||Date.now())/1e3,r=Math.floor(i),n=i-r,o=Math.floor(e),a=n+(e-o);if(a>1){var c=Math.floor(a);o+=c,a-=c}return{raw:[r+o+s.SECS_70YRS,Math.round(s.TWO_32*a)]}},s.ntpToJSTime=function(e,t){return 1e3*(e-s.SECS_70YRS+t/s.TWO_32)},s.jsToNTPTime=function(e){var t=e/1e3,i=Math.floor(t),r=t-i;return[i+s.SECS_70YRS,Math.round(s.TWO_32*r)]},s.readArguments=function(e,t,i){var r=s.readString(e,i);if(0!==r.indexOf(","))throw new Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+r," at offset: "+i.idx);var n=r.substring(1).split(""),o=[];return s.readArgumentsIntoArray(o,n,r,e,t,i),o},s.readArgument=function(e,t,i,r,n){var o=s.argumentTypes[e];if(!o)throw new Error("'"+e+"' is not a valid OSC type tag. Type tag string was: "+t);var a=o.reader,c=s[a](i,n);return r.metadata&&(c={type:e,value:c}),c},s.readArgumentsIntoArray=function(e,t,i,r,n,o){for(var a=0;a<t.length;){var c,l=t[a];if("["===l){var u=t.slice(a+1),d=u.indexOf("]");if(d<0)throw new Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+i);var h=u.slice(0,d);c=s.readArgumentsIntoArray([],h,i,r,n,o),a+=d+2}else c=s.readArgument(l,i,r,n,o),a++;e.push(c)}return e},s.writeArguments=function(e,t){var i=s.collectArguments(e,t);return s.joinParts(i)},s.joinParts=function(e){for(var t=new Uint8Array(e.byteLength),i=e.parts,r=0,n=0;n<i.length;n++){var o=i[n];s.copyByteArray(o,t,r),r+=o.length}return t},s.addDataPart=function(e,t){t.parts.push(e),t.byteLength+=e.length},s.writeArrayArguments=function(e,t){for(var i="[",r=0;r<e.length;r++){var n=e[r];i+=s.writeArgument(n,t)}return i+"]"},s.writeArgument=function(e,t){if(s.isArray(e))return s.writeArrayArguments(e,t);var i=e.type,r=s.argumentTypes[i].writer;if(r){var n=s[r](e.value);s.addDataPart(n,t)}return e.type},s.collectArguments=function(e,t,i){s.isArray(e)||(e=void 0===e?[]:[e]),i=i||{byteLength:0,parts:[]},t.metadata||(e=s.annotateArguments(e));for(var r=",",n=i.parts.length,o=0;o<e.length;o++){var a=e[o];r+=s.writeArgument(a,i)}var c=s.writeString(r);return i.byteLength+=c.byteLength,i.parts.splice(n,0,c),i},s.readMessage=function(e,t,i){t=t||s.defaults;var r=s.dataView(e,e.byteOffset,e.byteLength);i=i||{idx:0};var n=s.readString(r,i);return s.readMessageContents(n,r,t,i)},s.readMessageContents=function(e,t,i,r){if(0!==e.indexOf("/"))throw new Error("A malformed OSC address was found while reading an OSC message. String was: "+e);var n=s.readArguments(t,i,r);return{address:e,args:1===n.length&&i.unpackSingleArgs?n[0]:n}},s.collectMessageParts=function(e,t,i){return i=i||{byteLength:0,parts:[]},s.addDataPart(s.writeString(e.address),i),s.collectArguments(e.args,t,i)},s.writeMessage=function(e,t){if(t=t||s.defaults,!s.isValidMessage(e))throw new Error("An OSC message must contain a valid address. Message was: "+JSON.stringify(e,null,2));var i=s.collectMessageParts(e,t);return s.joinParts(i)},s.isValidMessage=function(e){return e.address&&0===e.address.indexOf("/")},s.readBundle=function(e,t,i){return s.readPacket(e,t,i)},s.collectBundlePackets=function(e,t,i){i=i||{byteLength:0,parts:[]},s.addDataPart(s.writeString("#bundle"),i),s.addDataPart(s.writeTimeTag(e.timeTag),i);for(var r=0;r<e.packets.length;r++){var n=e.packets[r],o=(n.address?s.collectMessageParts:s.collectBundlePackets)(n,t);i.byteLength+=o.byteLength,s.addDataPart(s.writeInt32(o.byteLength),i),i.parts=i.parts.concat(o.parts)}return i},s.writeBundle=function(e,t){if(!s.isValidBundle(e))throw new Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(e,null,2));t=t||s.defaults;var i=s.collectBundlePackets(e,t);return s.joinParts(i)},s.isValidBundle=function(e){return void 0!==e.timeTag&&void 0!==e.packets},s.readBundleContents=function(e,t,i,r){for(var n=s.readTimeTag(e,i),o=[];i.idx<r;){var a=s.readInt32(e,i),c=i.idx+a,l=s.readPacket(e,t,i,c);o.push(l)}return{timeTag:n,packets:o}},s.readPacket=function(e,t,i,r){var n=s.dataView(e,e.byteOffset,e.byteLength);r=void 0===r?n.byteLength:r,i=i||{idx:0};var o=s.readString(n,i),a=o[0];if("#"===a)return s.readBundleContents(n,t,i,r);if("/"===a)return s.readMessageContents(o,n,t,i);throw new Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+o)},s.writePacket=function(e,t){if(s.isValidMessage(e))return s.writeMessage(e,t);if(s.isValidBundle(e))return s.writeBundle(e,t);throw new Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(e,null,2))},s.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}},s.inferTypeForArgument=function(e){switch(typeof e){case"boolean":return e?"T":"F";case"string":return"s";case"number":return"f";case"undefined":return"N";case"object":if(null===e)return"N";if(e instanceof Uint8Array||e instanceof ArrayBuffer)return"b";if("number"==typeof e.high&&"number"==typeof e.low)return"h"}throw new Error("Can't infer OSC argument type for value: "+JSON.stringify(e,null,2))},s.annotateArguments=function(e){for(var t=[],i=0;i<e.length;i++){var r,n=e[i];r="object"==typeof n&&n.type&&void 0!==n.value?n:s.isArray(n)?s.annotateArguments(n):{type:s.inferTypeForArgument(n),value:n},t.push(r)}return t},s.isCommonJS&&(e.exports=s)}()},7542:(e,t,i)=>{var s=s||i(7026);try{i(4987),i(2920)}catch(e){s.SerialPort=function(){throw new Error("The Node.js SerialPort library is not installed. osc.js' serial transport is unavailable.")}}},2920:(e,t,i)=>{var s=s||i(7026),r=i(4987).SerialPort;s.supportsSerial=!0,s.SerialPort=function(e){this.on("open",this.listen.bind(this)),s.SLIPPort.call(this,e),this.options.bitrate=this.options.bitrate||9600,this.serialPort=e.serialPort,this.serialPort&&this.emit("open",this.serialPort)};var n=s.SerialPort.prototype=Object.create(s.SLIPPort.prototype);n.constructor=s.SerialPort,n.open=function(){if(this.serialPort)return this.once("close",this.open.bind(this)),void this.close();var e=this;this.serialPort=new r({path:this.options.devicePath,baudRate:this.options.bitrate,autoOpen:!1}),this.serialPort.on("error",(function(t){e.emit("error",t)})),this.serialPort.on("open",(function(){e.emit("open",e.serialPort)})),this.serialPort.open()},n.listen=function(){var e=this;this.serialPort.on("data",(function(t){e.emit("data",t,void 0)})),this.serialPort.on("close",(function(){e.emit("close")})),e.emit("ready")},n.sendRaw=function(e){this.serialPort&&this.serialPort.isOpen?this.serialPort.write(e):s.fireClosedPortSendError(this)},n.close=function(){this.serialPort&&this.serialPort.close()}},9562:(e,t,i)=>{!function(){"use strict";var t,s,r=i(7194),n=i(9278),o=(i(7699),[i(7026),i(825),i(2627),i(7542)]),a=(t=(t={})||{},void 0===(s=o).forEach&&(s=[s]),s.forEach((function(e){for(var i in e)t[i]=e[i]})),t);a.UDPPort=function(e){a.Port.call(this,e),this.options.localAddress=this.options.localAddress||"127.0.0.1",this.options.localPort=void 0!==this.options.localPort?this.options.localPort:57121,this.options.remoteAddress=this.options.remoteAddress||"127.0.0.1",this.options.remotePort=void 0!==this.options.remotePort?this.options.remotePort:57121,this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&this.emit("open",this.socket)};var c=a.UDPPort.prototype=Object.create(a.Port.prototype);c.constructor=a.UDPPort,c.open=function(){var e=this;this.socket||(this.socket=r.createSocket("udp4"),this.socket.on("error",(function(t){e.emit("error",t)})),this.socket.bind(this.options.localPort,this.options.localAddress,(function(){a.UDPPort.setupMulticast(e),e.options.broadcast&&e.socket.setBroadcast(e.options.broadcast),e.emit("open",e.socket)})))},c.listen=function(){if(this.socket){var e=this;this.socket.on("message",(function(t,i){e.emit("data",t,i)})),this.socket.on("close",(function(){e.emit("close")})),e.emit("ready")}},c.sendRaw=function(e,t,i){if(this.socket){var s=void 0!==e.byteLength?e.byteLength:e.length,r=this;t=t||this.options.remoteAddress,i=void 0!==i?i:this.options.remotePort,this.socket.send(e,0,s,i,t,(function(e){e&&r.emit("error",e)}))}else a.fireClosedPortSendError(this)},c.close=function(){this.socket&&this.socket.close()},a.UDPPort.setupMulticast=function(e){void 0!==e.options.multicastTTL&&e.socket.setMulticastTTL(e.options.multicastTTL),e.options.multicastMembership&&("string"==typeof e.options.multicastMembership&&(e.options.multicastMembership=[e.options.multicastMembership]),e.options.multicastMembership.forEach((function(t){"string"==typeof t?e.socket.addMembership(t):e.socket.addMembership(t.address,t.interface)})))},a.TCPSocketPort=function(e){a.SLIPPort.call(this,e);var t=this.options;t.address=t.address||t.localAddress||"127.0.0.1",t.port=void 0!==t.port?t.port:void 0!==t.localPort?t.localPort:57121,this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&this.emit("open",this.socket)},(c=a.TCPSocketPort.prototype=Object.create(a.SLIPPort.prototype)).constructor=a.TCPSocketPort,c.open=function(e,t){var i=this.options;e=e||i.address,t=void 0!==t?t:i.port,this.socket?this.socket.connect(t,e):this.socket=n.connect({port:t,host:e}),this.emit("open",this.socket)},c.listen=function(){var e=this;this.socket.on("data",(function(t){e.emit("data",t,void 0)})),this.socket.on("error",(function(t){e.emit("error",t)})),this.socket.on("close",(function(t){e.emit("close",t)})),this.socket.on("connect",(function(){e.emit("ready")}))},c.sendRaw=function(e){if(this.socket){e=Buffer.from(e);try{this.socket.write(e)}catch(e){this.emit("error",e)}}},c.close=function(){this.socket.end()},e.exports=a}()},2627:(e,t,i)=>{var s=s||i(7026);!function(){"use strict";s.WebSocket="undefined"!=typeof WebSocket?WebSocket:i(7699),s.WebSocketPort=function(e){s.Port.call(this,e),this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&(1===this.socket.readyState?(s.WebSocketPort.setupSocketForBinary(this.socket),this.emit("open",this.socket)):this.open())};var e=s.WebSocketPort.prototype=Object.create(s.Port.prototype);e.constructor=s.WebSocketPort,e.open=function(){(!this.socket||this.socket.readyState>1)&&(this.socket=new s.WebSocket(this.options.url)),s.WebSocketPort.setupSocketForBinary(this.socket);var e=this;this.socket.onopen=function(){e.emit("open",e.socket)},this.socket.onerror=function(t){e.emit("error",t)}},e.listen=function(){var e=this;this.socket.onmessage=function(t){e.emit("data",t.data,t)},this.socket.onclose=function(t){e.emit("close",t)},e.emit("ready")},e.sendRaw=function(e){this.socket&&1===this.socket.readyState?this.socket.send(e):s.fireClosedPortSendError(this)},e.close=function(e,t){this.socket.close(e,t)},s.WebSocketPort.setupSocketForBinary=function(e){e.binaryType=s.isNode?"nodebuffer":"arraybuffer"}}()},4617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},3290:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(6368),r=i(7685),n=i(4774),o=()=>{},a=new r.TimeoutError;t.default=class extends s{constructor(e){var t,i,s,r;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(i=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==i?i:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(r=null===(s=e.interval)||void 0===s?void 0:s.toString())&&void 0!==r?r:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((i,s)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const n=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&s(a)}));i(await n)}catch(e){s(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},9998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){let s=0,r=e.length;for(;r>0;){const n=r/2|0;let o=s+n;i(e[o],t)<=0?(s=++o,r-=n+1):r=n}return s}},4774:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(9998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const i={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(i);const r=s.default(this._queue,i,((e,t)=>t.priority-e.priority));this._queue.splice(r,0,i)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6368:e=>{"use strict";var t=Object.prototype.hasOwnProperty,i="~";function s(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,s,n,o){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new r(s,n||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,o=new Array(n);r<n;r++)o[r]=s[r].fn;return o},a.prototype.listenerCount=function(e){var t=i?i+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,r,n,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,n),!0;case 6:return u.fn.call(u.context,t,s,r,n,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,s);break;case 4:u[l].fn.call(u[l].context,t,s,r);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,s,r){var n=i?i+e:e;if(!this._events[n])return this;if(!t)return o(this,n),this;var a=this._events[n];if(a.fn)a.fn!==t||r&&!a.once||s&&a.context!==s||o(this,n);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||s&&a[c].context!==s)&&l.push(a[c]);l.length?this._events[n]=1===l.length?l[0]:l:o(this,n)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a},7685:(e,t,i)=>{"use strict";const s=i(4617);class r extends Error{constructor(e){super(e),this.name="TimeoutError"}}const n=(e,t,i)=>new Promise(((n,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void n(e);const a=setTimeout((()=>{if("function"==typeof i){try{n(i())}catch(e){o(e)}return}const s=i instanceof Error?i:new r("string"==typeof i?i:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(s)}),t);s(e.then(n,o),(()=>{clearTimeout(a)}))}));e.exports=n,e.exports.default=n,e.exports.TimeoutError=r},4987:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(9847),t),r(i(3662),t),r(i(447),t),r(i(6937),t),r(i(1693),t),r(i(2348),t),r(i(8145),t),r(i(637),t),r(i(3819),t),r(i(7102),t),r(i(8007),t),r(i(9076),t)},8007:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialPortMock=void 0;const s=i(5802),r=i(6848);class n extends s.SerialPortStream{static list=r.MockBinding.list;static binding=r.MockBinding;constructor(e,t){super({binding:r.MockBinding,...e},t)}}t.SerialPortMock=n},9076:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialPort=void 0;const s=i(5802),r=(0,i(176).autoDetect)();class n extends s.SerialPortStream{static list=r.list;static binding=r;constructor(e,t){super({binding:r,...e},t)}}t.SerialPort=n},5170:function(e,t){!function(e){"use strict";e.slip=t,function(e){var t=e;t.END=192,t.ESC=219,t.ESC_END=220,t.ESC_ESC=221,t.byteArray=function(e,t,i){return e instanceof ArrayBuffer?new Uint8Array(e,t,i):e},t.expandByteArray=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},t.sliceByteArray=function(e,t,i){var s=e.buffer.slice?e.buffer.slice(t,i):e.subarray(t,i);return new Uint8Array(s)},t.encode=function(e,i){(i=i||{}).bufferPadding=i.bufferPadding||4;var s=(e=t.byteArray(e,i.offset,i.byteLength)).length+i.bufferPadding+3&-4,r=new Uint8Array(s),n=1;r[0]=t.END;for(var o=0;o<e.length;o++){n>r.length-3&&(r=t.expandByteArray(r));var a=e[o];a===t.END?(r[n++]=t.ESC,a=t.ESC_END):a===t.ESC&&(r[n++]=t.ESC,a=t.ESC_ESC),r[n++]=a}return r[n]=t.END,t.sliceByteArray(r,0,n+1)},t.Decoder=function(e){e="function"!=typeof e?e||{}:{onMessage:e},this.maxMessageSize=e.maxMessageSize||10485760,this.bufferSize=e.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=e.onMessage,this.onError=e.onError,this.escape=!1};var i=t.Decoder.prototype;i.decode=function(e){var i;e=t.byteArray(e);for(var s=0;s<e.length;s++){var r=e[s];if(this.escape)r===t.ESC_ESC?r=t.ESC:r===t.ESC_END&&(r=t.END);else{if(r===t.ESC){this.escape=!0;continue}if(r===t.END){i=this.handleEnd();continue}}this.addByte(r)||this.handleMessageMaxError()}return i},i.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},i.addByte=function(e){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=t.expandByteArray(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=e,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},i.handleEnd=function(){if(0!==this.msgBufferIdx){var e=t.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx);return this.onMessage&&this.onMessage(e),this.msgBufferIdx=0,e}}}(t)}(this)},7687:(e,t,i)=>{"use strict";const s=i(857),r=i(2018),n=i(5884),{env:o}=process;let a;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===a)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const i=a||0;if("dumb"===o.TERM)return i;if("win32"===process.platform){const e=s.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||"codeship"===o.CI_NAME?1:i;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:i}n("no-color")||n("no-colors")||n("color=false")||n("color=never")?a=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(a=1),"FORCE_COLOR"in o&&(a="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(l(e,e&&e.isTTY))},stdout:c(l(!0,r.isatty(1))),stderr:c(l(!0,r.isatty(2)))}},7699:(e,t,i)=>{"use strict";const s=i(1060);s.createWebSocketStream=i(3719),s.Server=i(1722),s.Receiver=i(6286),s.Sender=i(914),s.WebSocket=s,s.WebSocketServer=s.Server,e.exports=s},3338:(e,t,i)=>{"use strict";const{EMPTY_BUFFER:s}=i(2614),r=Buffer[Symbol.species];function n(e,t,i,s,r){for(let n=0;n<r;n++)i[s+n]=e[n]^t[3&n]}function o(e,t){for(let i=0;i<e.length;i++)e[i]^=t[3&i]}if(e.exports={concat:function(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const i=Buffer.allocUnsafe(t);let n=0;for(let t=0;t<e.length;t++){const s=e[t];i.set(s,n),n+=s.length}return n<t?new r(i.buffer,i.byteOffset,n):i},mask:n,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let i;return t instanceof ArrayBuffer?i=new r(t):ArrayBuffer.isView(t)?i=new r(t.buffer,t.byteOffset,t.byteLength):(i=Buffer.from(t),e.readOnly=!1),i},unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{const t=i(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,i,s,r,o){o<48?n(e,i,s,r,o):t.mask(e,i,s,r,o)},e.exports.unmask=function(e,i){e.length<32?o(e,i):t.unmask(e,i)}}catch(e){}},2614:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],i="undefined"!=typeof Blob;i&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:i,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},597:(e,t,i)=>{"use strict";const{kForOnEventAttribute:s,kListener:r}=i(2614),n=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),d=Symbol("kType"),h=Symbol("kWasClean");class p{constructor(e){this[u]=null,this[d]=e}get target(){return this[u]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[l]}get wasClean(){return this[h]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class b extends p{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(b.prototype,"error",{enumerable:!0}),Object.defineProperty(b.prototype,"message",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const g={addEventListener(e,t,i={}){for(const n of this.listeners(e))if(!i[s]&&n[r]===t&&!n[s])return;let n;if("message"===e)n=function(e,i){const s=new m("message",{data:i?e:e.toString()});s[u]=this,y(t,this,s)};else if("close"===e)n=function(e,i){const s=new f("close",{code:e,reason:i.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[u]=this,y(t,this,s)};else if("error"===e)n=function(e){const i=new b("error",{error:e,message:e.message});i[u]=this,y(t,this,i)};else{if("open"!==e)return;n=function(){const e=new p("open");e[u]=this,y(t,this,e)}}n[s]=!!i[s],n[r]=t,i.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(const i of this.listeners(e))if(i[r]===t&&!i[s]){this.removeListener(e,i);break}}};function y(e,t,i){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,i):e.call(t,i)}e.exports={CloseEvent:f,ErrorEvent:b,Event:p,EventTarget:g,MessageEvent:m}},5926:(e,t,i)=>{"use strict";const{tokenChars:s}=i(5880);function r(e,t,i){void 0===e[t]?e[t]=[i]:e[t].push(i)}e.exports={format:function(e){return Object.keys(e).map((t=>{let i=e[t];return Array.isArray(i)||(i=[i]),i.map((e=>[t].concat(Object.keys(e).map((t=>{let i=e[t];return Array.isArray(i)||(i=[i]),i.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let i,n,o=Object.create(null),a=!1,c=!1,l=!1,u=-1,d=-1,h=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===i)if(-1===h&&1===s[d])-1===u&&(u=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const s=e.slice(u,h);44===d?(r(t,s,o),o=Object.create(null)):i=s,u=h=-1}}else-1===h&&-1!==u&&(h=p);else if(void 0===n)if(-1===h&&1===s[d])-1===u&&(u=p);else if(32===d||9===d)-1===h&&-1!==u&&(h=p);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),r(o,e.slice(u,h),!0),44===d&&(r(t,i,o),o=Object.create(null),i=void 0),u=h=-1}else{if(61!==d||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);n=e.slice(u,p),u=h=-1}else if(c){if(1!==s[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:a||(a=!0),c=!1}else if(l)if(1===s[d])-1===u&&(u=p);else if(34===d&&-1!==u)l=!1,h=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===d&&61===e.charCodeAt(p-1))l=!0;else if(-1===h&&1===s[d])-1===u&&(u=p);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let s=e.slice(u,h);a&&(s=s.replace(/\\/g,""),a=!1),r(o,n,s),44===d&&(r(t,i,o),o=Object.create(null),i=void 0),n=void 0,u=h=-1}}else-1===h&&(h=p);if(-1===u||l||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const f=e.slice(u,h);return void 0===i?r(t,f,o):(void 0===n?r(o,f,!0):r(o,n,a?f.replace(/\\/g,""):f),r(t,i,o)),t}}},4759:e=>{"use strict";const t=Symbol("kDone"),i=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[i]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[i]()}[i](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},2971:(e,t,i)=>{"use strict";const s=i(3106),r=i(3338),n=i(4759),{kStatusCode:o}=i(2614),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),d=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let f;function b(e){this[h].push(e),this[u]+=e.length}function m(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][o]=1009,this.removeListener("data",m),this.reset())}function g(e){this[l]._inflate=null,e[o]=1007,this[d](e)}e.exports=class{constructor(e,t,i){if(this._maxPayload=0|i,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new n(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,i=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(i.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?i.client_max_window_bits=t.clientMaxWindowBits:!0!==i.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete i.client_max_window_bits,i}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let i=e[t];if(i.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(i=i[0],"client_max_window_bits"===t){if(!0!==i){const e=+i;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${i}`);i=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${i}`)}else if("server_max_window_bits"===t){const e=+i;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${i}`);i=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==i)throw new TypeError(`Invalid value for parameter "${t}": ${i}`)}e[t]=i}))})),e}decompress(e,t,i){f.add((s=>{this._decompress(e,t,((e,t)=>{s(),i(e,t)}))}))}compress(e,t,i){f.add((s=>{this._compress(e,t,((e,t)=>{s(),i(e,t)}))}))}_decompress(e,t,i){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[h]=[],this._inflate.on("error",g),this._inflate.on("data",m)}this._inflate[d]=i,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void i(e);const s=r.concat(this._inflate[h],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[h]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),i(null,s)}))}_compress(e,t,i){const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[h]=[],this._deflate.on("data",b)}this._deflate[d]=i,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=r.concat(this._deflate[h],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[d]=null,this._deflate[u]=0,this._deflate[h]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),i(null,e)}))}}},6286:(e,t,i)=>{"use strict";const{Writable:s}=i(2203),r=i(2971),{BINARY_TYPES:n,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=i(2614),{concat:l,toArrayBuffer:u,unmask:d}=i(3338),{isValidStatusCode:h,isValidUTF8:p}=i(5880),f=Buffer[Symbol.species];e.exports=class extends s{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,i){if(8===this._opcode&&0==this._state)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const i=this._buffers[0],s=t.length-e;e>=i.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(i.buffer,i.byteOffset,e),s),this._buffers[0]=new f(i.buffer,i.byteOffset+e,i.length-e)),e-=i.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const i=!(64&~t[0]);if(!i||this._extensions[r.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(i)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=i}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(i)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),i=t.readUInt32BE(0);i>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=i*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&d(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,((e,i)=>{if(e)return t(e);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(i)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?l(i,t):"arraybuffer"===this._binaryType?u(l(i,t)):"blob"===this._binaryType?new Blob(i):i,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",s,!0),this._state=0,this.startLoop(e)})))}else{const s=l(i,t);if(!this._skipUTF8Validation&&!p(s)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",s,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,o),this.end();else{const i=e.readUInt16BE(0);if(!h(i)){const e=this.createError(RangeError,`invalid status code ${i}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const s=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(s)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",i,s),this.end()}this._state=0}}createError(e,t,i,s,r){this._loop=!1,this._errored=!0;const n=new e(i?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,this.createError),n.code=r,n[a]=s,n}}},914:(e,t,i)=>{"use strict";const{Duplex:s}=i(2203),{randomFillSync:r}=i(6982),n=i(2971),{EMPTY_BUFFER:o,kWebSocket:a,NOOP:c}=i(2614),{isBlob:l,isValidStatusCode:u}=i(5880),{mask:d,toBuffer:h}=i(3338),p=Symbol("kByteLength"),f=Buffer.alloc(4),b=8192;let m,g=b;class y{constructor(e,t,i){this._extensions=t||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let i,s,n=!1,o=2,a=!1;t.mask&&(i=t.maskBuffer||f,t.generateMask?t.generateMask(i):(g===b&&(void 0===m&&(m=Buffer.alloc(b)),r(m,0,b),g=0),i[0]=m[g++],i[1]=m[g++],i[2]=m[g++],i[3]=m[g++]),a=!(i[0]|i[1]|i[2]|i[3]),o=6),"string"==typeof e?s=t.mask&&!a||void 0===t[p]?(e=Buffer.from(e)).length:t[p]:(s=e.length,n=t.mask&&t.readOnly&&!a);let c=s;s>=65536?(o+=8,c=127):s>125&&(o+=2,c=126);const l=Buffer.allocUnsafe(n?s+o:o);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(s,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(s,4,6)),t.mask?(l[1]|=128,l[o-4]=i[0],l[o-3]=i[1],l[o-2]=i[2],l[o-1]=i[3],a?[l,e]:n?(d(e,i,l,o,s),[l]):(d(e,i,e,0,s),[l,e])):[l,e]}close(e,t,i,s){let r;if(void 0===e)r=o;else{if("number"!=typeof e||!u(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const i=Buffer.byteLength(t);if(i>123)throw new RangeError("The message must not be greater than 123 bytes");r=Buffer.allocUnsafe(2+i),r.writeUInt16BE(e,0),"string"==typeof t?r.write(t,2):r.set(t,2)}else r=Buffer.allocUnsafe(2),r.writeUInt16BE(e,0)}const n={[p]:r.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,r,!1,n,s]):this.sendFrame(y.frame(r,n),s)}ping(e,t,i){let s,r;if("string"==typeof e?(s=Buffer.byteLength(e),r=!1):l(e)?(s=e.size,r=!1):(s=(e=h(e)).length,r=h.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const n={[p]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:r,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,n,i]):this.getBlobData(e,!1,n,i):0!==this._state?this.enqueue([this.dispatch,e,!1,n,i]):this.sendFrame(y.frame(e,n),i)}pong(e,t,i){let s,r;if("string"==typeof e?(s=Buffer.byteLength(e),r=!1):l(e)?(s=e.size,r=!1):(s=(e=h(e)).length,r=h.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const n={[p]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:r,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,n,i]):this.getBlobData(e,!1,n,i):0!==this._state?this.enqueue([this.dispatch,e,!1,n,i]):this.sendFrame(y.frame(e,n),i)}send(e,t,i){const s=this._extensions[n.extensionName];let r,o,a=t.binary?2:1,c=t.compress;"string"==typeof e?(r=Buffer.byteLength(e),o=!1):l(e)?(r=e.size,o=!1):(r=(e=h(e)).length,o=h.readOnly),this._firstFragment?(this._firstFragment=!1,c&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=r>=s._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const u={[p]:r,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:o,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,i]):this.getBlobData(e,this._compress,u,i):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,i]):this.dispatch(e,this._compress,u,i)}getBlobData(e,t,i,s){this._bufferedBytes+=i[p],this._state=2,e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(w,this,e,s)}this._bufferedBytes-=i[p];const r=h(e);t?this.dispatch(r,t,i,s):(this._state=0,this.sendFrame(y.frame(r,i),s),this.dequeue())})).catch((e=>{process.nextTick(v,this,e,s)}))}dispatch(e,t,i,s){if(!t)return void this.sendFrame(y.frame(e,i),s);const r=this._extensions[n.extensionName];this._bufferedBytes+=i[p],this._state=1,r.compress(e,i.fin,((e,t)=>{this._socket.destroyed?w(this,new Error("The socket was closed while data was being compressed"),s):(this._bufferedBytes-=i[p],this._state=0,i.readOnly=!1,this.sendFrame(y.frame(t,i),s),this.dequeue())}))}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][p],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][p],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function w(e,t,i){"function"==typeof i&&i(t);for(let i=0;i<e._queue.length;i++){const s=e._queue[i],r=s[s.length-1];"function"==typeof r&&r(t)}}function v(e,t,i){w(e,t,i),e.onerror(t)}e.exports=y},3719:(e,t,i)=>{"use strict";const{Duplex:s}=i(2203);function r(e){e.emit("close")}function n(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let i=!0;const a=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,i){const s=!i&&a._readableState.objectMode?t.toString():t;a.push(s)||e.pause()})),e.once("error",(function(e){a.destroyed||(i=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,s){if(e.readyState===e.CLOSED)return s(t),void process.nextTick(r,a);let n=!1;e.once("error",(function(e){n=!0,s(e)})),e.once("close",(function(){n||s(t),process.nextTick(r,a)})),i&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,i,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",(function(){a._write(t,i,s)}))},a.on("end",n),a.on("error",o),a}},8237:(e,t,i)=>{"use strict";const{tokenChars:s}=i(5880);e.exports={parse:function(e){const t=new Set;let i=-1,r=-1,n=0;for(;n<e.length;n++){const o=e.charCodeAt(n);if(-1===r&&1===s[o])-1===i&&(i=n);else if(0===n||32!==o&&9!==o){if(44!==o)throw new SyntaxError(`Unexpected character at index ${n}`);{if(-1===i)throw new SyntaxError(`Unexpected character at index ${n}`);-1===r&&(r=n);const s=e.slice(i,r);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),i=r=-1}}else-1===r&&-1!==i&&(r=n)}if(-1===i||-1!==r)throw new SyntaxError("Unexpected end of input");const o=e.slice(i,n);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}},5880:(e,t,i)=>{"use strict";const{isUtf8:s}=i(181),{hasBlob:r}=i(2614);function n(e){const t=e.length;let i=0;for(;i<t;)if(128&e[i])if(192==(224&e[i])){if(i+1===t||128!=(192&e[i+1])||192==(254&e[i]))return!1;i+=2}else if(224==(240&e[i])){if(i+2>=t||128!=(192&e[i+1])||128!=(192&e[i+2])||224===e[i]&&128==(224&e[i+1])||237===e[i]&&160==(224&e[i+1]))return!1;i+=3}else{if(240!=(248&e[i]))return!1;if(i+3>=t||128!=(192&e[i+1])||128!=(192&e[i+2])||128!=(192&e[i+3])||240===e[i]&&128==(240&e[i+1])||244===e[i]&&e[i+1]>143||e[i]>244)return!1;i+=4}else i++;return!0}if(e.exports={isBlob:function(e){return r&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},s)e.exports.isValidUTF8=function(e){return e.length<24?n(e):s(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=i(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?n(e):t(e)}}catch(e){}},1722:(e,t,i)=>{"use strict";const s=i(4434),r=i(8611),{Duplex:n}=i(2203),{createHash:o}=i(6982),a=i(5926),c=i(2971),l=i(8237),u=i(1060),{GUID:d,kWebSocket:h}=i(2614),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function b(){this.destroy()}function m(e,t,i,s){i=i||r.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(i),...s},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${r.STATUS_CODES[t]}\r\n`+Object.keys(s).map((e=>`${e}: ${s[e]}`)).join("\r\n")+"\r\n\r\n"+i)}function g(e,t,i,s,r){if(e.listenerCount("wsClientError")){const s=new Error(r);Error.captureStackTrace(s,g),e.emit("wsClientError",s,i,t)}else m(i,s,r)}e.exports=class extends s{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=r.createServer(((e,t)=>{const i=r.STATUS_CODES[426];t.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),t.end(i)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const i of Object.keys(t))e.on(i,t[i]);return function(){for(const i of Object.keys(t))e.removeListener(i,t[i])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,i,s)=>{this.handleUpgrade(t,i,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(f,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{f(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,i,s){t.on("error",b);const r=e.headers["sec-websocket-key"],n=e.headers.upgrade,o=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void g(this,e,t,405,"Invalid HTTP method");if(void 0===n||"websocket"!==n.toLowerCase())return void g(this,e,t,400,"Invalid Upgrade header");if(void 0===r||!p.test(r))return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==o&&13!==o)return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void m(t,400);const u=e.headers["sec-websocket-protocol"];let d=new Set;if(void 0!==u)try{d=l.parse(u)}catch(i){return void g(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==h){const i=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(h);e[c.extensionName]&&(i.accept(e[c.extensionName]),f[c.extensionName]=i)}catch(i){return void g(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const n={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,((n,o,a,c)=>{if(!n)return m(t,o||401,a,c);this.completeUpgrade(f,r,d,e,t,i,s)}));if(!this.options.verifyClient(n))return m(t,401)}this.completeUpgrade(f,r,d,e,t,i,s)}completeUpgrade(e,t,i,s,r,n,l){if(!r.readable||!r.writable)return r.destroy();if(r[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(r,503);const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(t+d).digest("base64")}`],p=new this.options.WebSocket(null,void 0,this.options);if(i.size){const e=this.options.handleProtocols?this.options.handleProtocols(i,s):i.values().next().value;e&&(u.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,i=a.format({[c.extensionName]:[t]});u.push(`Sec-WebSocket-Extensions: ${i}`),p._extensions=e}this.emit("headers",u,s),r.write(u.concat("\r\n").join("\r\n")),r.removeListener("error",b),p.setSocket(r,n,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",(()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)}))),l(p,s)}}},1060:(e,t,i)=>{"use strict";const s=i(4434),r=i(5692),n=i(8611),o=i(9278),a=i(4756),{randomBytes:c,createHash:l}=i(6982),{Duplex:u,Readable:d}=i(2203),{URL:h}=i(7016),p=i(2971),f=i(6286),b=i(914),{isBlob:m}=i(5880),{BINARY_TYPES:g,EMPTY_BUFFER:y,GUID:w,kForOnEventAttribute:v,kListener:I,kStatusCode:_,kWebSocket:C,NOOP:k}=i(2614),{EventTarget:{addEventListener:S,removeEventListener:E}}=i(597),{format:O,parse:A}=i(5926),{toBuffer:N}=i(3338),P=Symbol("kAborted"),x=[8,13],T=["CONNECTING","OPEN","CLOSING","CLOSED"],R=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class D extends s{constructor(e,t,i){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=D.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(i=t,t=[]):t=[t]),M(this,e,t,i)):(this._autoPong=i.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,i){const s=new f({allowSynchronousEvents:i.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation}),r=new b(e,this._extensions,i.generateMask);this._receiver=s,this._sender=r,this._socket=e,s[C]=this,r[C]=this,e[C]=this,s.on("conclude",V),s.on("drain",Z),s.on("error",L),s.on("message",Y),s.on("ping",z),s.on("pong",J),r.onerror=Q,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",X),e.on("data",$),e.on("end",K),e.on("error",ee),this._readyState=D.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=D.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=D.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==D.CLOSED)if(this.readyState!==D.CONNECTING)this.readyState!==D.CLOSING?(this._readyState=D.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),H(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";F(this,this._req,e)}}pause(){this.readyState!==D.CONNECTING&&this.readyState!==D.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,i){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(i=e,e=t=void 0):"function"==typeof t&&(i=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===D.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,i)):W(this,e,i)}pong(e,t,i){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(i=e,e=t=void 0):"function"==typeof t&&(i=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===D.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,i)):W(this,e,i)}resume(){this.readyState!==D.CONNECTING&&this.readyState!==D.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,i){if(this.readyState===D.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(i=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==D.OPEN)return void W(this,e,i);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(s.compress=!1),this._sender.send(e||y,s,i)}terminate(){if(this.readyState!==D.CLOSED)if(this.readyState!==D.CONNECTING)this._socket&&(this._readyState=D.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";F(this,this._req,e)}}}function M(e,t,i,s){const o={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:x[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=o.autoPong,!x.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${x.join(", ")})`);let a;if(t instanceof h)a=t;else try{a=new h(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const u="wss:"===a.protocol,d="ws+unix:"===a.protocol;let f;if("ws:"===a.protocol||u||d?d&&!a.pathname?f="The URL's pathname is empty":a.hash&&(f="The URL contains a fragment identifier"):f='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',f){const t=new SyntaxError(f);if(0===e._redirects)throw t;return void G(e,t)}const b=u?443:80,m=c(16).toString("base64"),g=u?r.request:n.request,y=new Set;let v,I;if(o.createConnection=o.createConnection||(u?j:B),o.defaultPort=o.defaultPort||b,o.port=a.port||b,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(v=new p(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=O({[p.extensionName]:v.offer()})),i.length){for(const e of i){if("string"!=typeof e||!R.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}o.headers["Sec-WebSocket-Protocol"]=i.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),d){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}if(o.followRedirects){if(0===e._redirects){e._originalIpc=d,e._originalSecure=u,e._originalHostOrSocketPath=d?o.socketPath:a.host;const t=s&&s.headers;if(s={...s,headers:{}},t)for(const[e,i]of Object.entries(t))s.headers[e.toLowerCase()]=i}else if(0===e.listenerCount("redirect")){const t=d?!!e._originalIpc&&o.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete o.headers.authorization,delete o.headers.cookie,t||delete o.headers.host,o.auth=void 0)}o.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")),I=e._req=g(o),e._redirects&&e.emit("redirect",e.url,I)}else I=e._req=g(o);o.timeout&&I.on("timeout",(()=>{F(e,I,"Opening handshake has timed out")})),I.on("error",(t=>{null===I||I[P]||(I=e._req=null,G(e,t))})),I.on("response",(r=>{const n=r.headers.location,a=r.statusCode;if(n&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void F(e,I,"Maximum redirects exceeded");let r;I.abort();try{r=new h(n,t)}catch(t){const i=new SyntaxError(`Invalid URL: ${n}`);return void G(e,i)}M(e,r,i,s)}else e.emit("unexpected-response",I,r)||F(e,I,`Unexpected server response: ${r.statusCode}`)})),I.on("upgrade",((t,i,s)=>{if(e.emit("upgrade",t),e.readyState!==D.CONNECTING)return;I=e._req=null;const r=t.headers.upgrade;if(void 0===r||"websocket"!==r.toLowerCase())return void F(e,i,"Invalid Upgrade header");const n=l("sha1").update(m+w).digest("base64");if(t.headers["sec-websocket-accept"]!==n)return void F(e,i,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?y.size?y.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void F(e,i,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!v)return void F(e,i,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=A(u)}catch(t){return void F(e,i,"Invalid Sec-WebSocket-Extensions header")}const s=Object.keys(t);if(1!==s.length||s[0]!==p.extensionName)return void F(e,i,"Server indicated an extension that was not requested");try{v.accept(t[p.extensionName])}catch(t){return void F(e,i,"Invalid Sec-WebSocket-Extensions header")}e._extensions[p.extensionName]=v}e.setSocket(i,s,{allowSynchronousEvents:o.allowSynchronousEvents,generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})})),o.finishRequest?o.finishRequest(I,e):I.end()}function G(e,t){e._readyState=D.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function B(e){return e.path=e.socketPath,o.connect(e)}function j(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function F(e,t,i){e._readyState=D.CLOSING;const s=new Error(i);Error.captureStackTrace(s,F),t.setHeader?(t[P]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(G,e,s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function W(e,t,i){if(t){const i=m(t)?t.size:N(t).length;e._socket?e._sender._bufferedBytes+=i:e._bufferedAmount+=i}if(i){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${T[e.readyState]})`);process.nextTick(i,t)}}function V(e,t){const i=this[C];i._closeFrameReceived=!0,i._closeMessage=t,i._closeCode=e,void 0!==i._socket[C]&&(i._socket.removeListener("data",$),process.nextTick(q,i._socket),1005===e?i.close():i.close(e,t))}function Z(){const e=this[C];e.isPaused||e._socket.resume()}function L(e){const t=this[C];void 0!==t._socket[C]&&(t._socket.removeListener("data",$),process.nextTick(q,t._socket),t.close(e[_])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function U(){this[C].emitClose()}function Y(e,t){this[C].emit("message",e,t)}function z(e){const t=this[C];t._autoPong&&t.pong(e,!this._isServer,k),t.emit("ping",e)}function J(e){this[C].emit("pong",e)}function q(e){e.resume()}function Q(e){const t=this[C];t.readyState!==D.CLOSED&&(t.readyState===D.OPEN&&(t._readyState=D.CLOSING,H(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function H(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function X(){const e=this[C];let t;this.removeListener("close",X),this.removeListener("data",$),this.removeListener("end",K),e._readyState=D.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[C]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",U),e._receiver.on("finish",U))}function $(e){this[C]._receiver.write(e)||this.pause()}function K(){const e=this[C];e._readyState=D.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[C];this.removeListener("error",ee),this.on("error",k),e&&(e._readyState=D.CLOSING,this.destroy())}Object.defineProperty(D,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(D.prototype,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(D,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(D.prototype,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(D,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(D.prototype,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(D,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),Object.defineProperty(D.prototype,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(D.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(D.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[v])return t[I];return null},set(t){for(const t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})})),D.prototype.addEventListener=S,D.prototype.removeEventListener=E,e.exports=D},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},6982:e=>{"use strict";e.exports=require("crypto")},7194:e=>{"use strict";e.exports=require("dgram")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},1943:e=>{"use strict";e.exports=require("fs/promises")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},9278:e=>{"use strict";e.exports=require("net")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},4756:e=>{"use strict";e.exports=require("tls")},2018:e=>{"use strict";e.exports=require("tty")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},3106:e=>{"use strict";e.exports=require("zlib")},4581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4326:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(u)throw new Error("runEntrypoint can only be called once");if(u=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const i=process.env.MODULE_MANIFEST;if(!i)throw new Error("Module initialise is missing MODULE_MANIFEST");const s=await n.default.readFile(i),d=JSON.parse(s.toString());if(d.runtime?.api!==r.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let h=d.runtime.apiVersion;if("0.0.0"===h)try{const e=await n.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(h=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const p=process.env.CONNECTION_ID;if("string"!=typeof p||!p)throw new Error("Module initialise is missing CONNECTION_ID");const f=process.env.VERIFICATION_TOKEN;if("string"!=typeof f||!f)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const b=new a.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{b.receivedMessage(e)})),l=new e((0,o.literal)({id:p,upgradeScripts:t,_isInstanceBaseProps:!0})),b.sendWithCb("register",{apiVersion:h,connectionId:p,verificationToken:f}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))};const s=i(1635),r=i(9967),n=s.__importDefault(i(1943)),o=i(360),a=i(4044),c=s.__importDefault(i(6928));let l,u=!1},6160:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var s=i(8895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return s.TCPHelper}});var r=i(1118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return r.TelnetHelper}});var n=i(6259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return n.UDPHelper}})},8895:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const s=i(1635).__importDefault(i(9278)),r=i(228),n=i(1400);class o extends r.EventEmitter{#e;#t;_socket;#i;#s=!1;#r=!1;#n=!1;#o;#a;#c;get isConnected(){return this.#s}get isConnecting(){return this.#r}get isDestroyed(){return this.#n}constructor(e,t,i){super(),this.#e=e,this.#t=t,this.#i={reconnect_interval:2e3,reconnect:!0,...i},this._socket=new s.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#r=!1,this.#s=!1,this.#i.reconnect&&this.#l(),this.#u(n.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#s=!0,this.#r=!1,this.#u(n.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#s=!1,this.#u(n.InstanceStatus.Disconnected),!this.#r&&this.#i.reconnect&&this.#l(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>{this.#n||this.connect()})),this.#c=setTimeout((()=>{this.#c=void 0,this.#n||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#n)throw new Error("Cannot connect destroyed socket");return!this.#r&&(this.#r=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#n||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#s)return!1;try{return new Promise(((t,i)=>{this._socket.write(e,(e=>{e?i(e):t(!0)}))}))}catch(e){this.#s=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#u(n.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#n=!0,void 0!==this.#a&&(clearTimeout(this.#a),this.#a=void 0),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#l(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#u(n.InstanceStatus.Connecting),this.connect()}),this.#i.reconnect_interval)}#u(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.TCPHelper=o},1118:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const s=i(1635).__importDefault(i(228)),r=i(2203),n=i(8895);class o extends s.default{#d;#h;#c;get isConnected(){return this.#d.isConnected}get isConnecting(){return this.#d.isConnecting}get isDestroyed(){return this.#d.isDestroyed}constructor(e,t,i){super(),this.#d=new n.TCPHelper(e,t,i),this.#h=new a,this.#d._socket.pipe(this.#h),this.#d.on("connect",(()=>this.emit("connect"))),this.#d.on("end",(()=>this.emit("end"))),this.#d.on("error",(e=>this.emit("error",e))),this.#d.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#h.on("iac",((e,t)=>this.emit("iac",e,t))),this.#h.on("sb",(e=>this.emit("sb",e))),this.#h.on("data",(e=>this.emit("data",e))),this.#h.on("drain",(()=>this.emit("drain"))),this.#c=setTimeout((()=>{this.#c=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#d.connect()}async send(e){return this.#d.send(e)}destroy(){this.#d.destroy(),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#h.removeAllListeners(),this.#h.destroy()}}t.TelnetHelper=o;class a extends r.Transform{#p;#f;#b;constructor(e){super(e),this.#p=Buffer.alloc(0),this.#f=Buffer.alloc(0),this.#b=0}_transform(e,t,i){for(let t=0;t<e.length;++t)this.#m(e[t]);const s=this.#g();s.length&&this.push(s),i()}#m(e){if(0===this.#b){if(255===e)return void(this.#b=255);this.#p=Buffer.concat([this.#p,Buffer.from([e])])}else if(255===this.#b)switch(e){case 250:case 251:case 252:case 253:case 254:this.#b=e;break;default:this.#b=0}else{if(this.#b>=251&&this.#b<=254){let t;switch(this.#b){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#b=0)}if(250===this.#b){if(240===e)return this.emit("sb",this.#f),this.#b=0,void(this.#f=Buffer.alloc(0));this.#f=Buffer.concat([this.#f,Buffer.from([e])])}}}#g(){const e=this.#p;return this.#p=Buffer.alloc(0),e}}},6259:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const s=i(1635).__importDefault(i(7194)),r=i(228),n=i(1400);class o extends r.EventEmitter{#e;#t;#y;#i;#n=!1;#o;#c;get isDestroyed(){return this.#n}constructor(e,t,i){super(),this.#e=e,this.#t=t,this.#i={...i},this.#y=s.default.createSocket("udp4");try{this.#y.bind(this.#i.bind_port||0,this.#i.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#i.bind_ip||"0.0.0.0"}:${this.#i.bind_port||0}`)}void 0!==this.#i.ttl&&this.#y.setTTL(this.#i.ttl),void 0!==this.#i.multicast_ttl&&this.#y.setMulticastTTL(this.#i.multicast_ttl),this.#y.on("error",(e=>{this.#u(n.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#y.on("listening",(()=>{this.#i.broadcast&&this.#y.setBroadcast(!0),this.#i.multicast_interface&&this.#y.setMulticastInterface(this.#i.multicast_interface),this.#u(n.InstanceStatus.Ok),this.emit("listening")})),this.#y.on("message",((e,t)=>this.emit("data",e,t))),this.#c=setTimeout((()=>{this.#n||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#n)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,i)=>{this.#y.send(e,this.#t,this.#e,(e=>{e?i(e):t()}))}))}destroy(){this.#n=!0,void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#y.removeAllListeners(),this.#y.close(),this.removeAllListeners()}#u(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.UDPHelper=o},4044:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const s=i(1635),r=i(360),n=s.__importDefault(i(6022));t.IpcWrapper=class{#w;#v;#I;#_=1;#C=new Map;constructor(e,t,i){this.#w=e,this.#v=t,this.#I=i}async sendWithCb(e,t,i,s=0){s<=0&&(s=this.#I);const r={timeout:void 0,resolve:()=>null,reject:()=>null},o=new Promise(((e,t)=>{r.resolve=e,r.reject=t}));this.#_>268435456&&(this.#_=1);const a=this.#_++;this.#C.set(a,r),this.#v({direction:"call",name:String(e),payload:n.default.stringify(t),callbackId:a});const c=new Error("Call timed out");return r.timeout=setTimeout((()=>{r.reject(i?i():c),this.#C.delete(a)}),s),o}sendWithNoCb(e,t){this.#v({direction:"call",name:String(e),payload:n.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#w[e.name];if(!t)return void(e.callbackId&&this.#v({direction:"response",callbackId:e.callbackId,success:!1,payload:n.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?n.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#v({direction:"response",callbackId:e.callbackId,success:!0,payload:n.default.stringify(t)})}),(t=>{e.callbackId&&this.#v({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):n.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#C.get(e.callbackId);if(this.#C.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const i=e.payload?n.default.parse(e.payload):void 0;if(e.success)t.resolve(i);else{let e=i;i&&"object"==typeof i&&"message"in i&&(e=new Error(i.message),i.stack&&(e.stack=i.stack)),t.reject(e)}break}default:(0,r.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},9967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},6278:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const s=i(1635);s.__exportStar(i(9077),t),s.__exportStar(i(9637),t),s.__exportStar(i(4581),t);var r=i(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return r.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return r.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return r.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return r.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return r.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return r.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return r.assertNever}}),s.__exportStar(i(6160),t);var n=i(4326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return n.runEntrypoint}})},4289:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const s=i(2593);function r(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#k;#S;#E;#O=new Map;#A=new Map;constructor(e,t,i){this.#k=e,this.#S=t,this.#E=i}async handleExecuteAction(e){const t=this.#O.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},i)}handleUpdateActions(e){for(const[t,i]of Object.entries(e)){const e=this.#A.get(t);if(e){const t=this.#O.get(e.actionId);if(t?.unsubscribe){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(r(e),i)).catch((t=>{this.#E("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!i||i.disabled)this.#A.delete(t);else{this.#A.set(t,i);const e=this.#O.get(i.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#k({text:e,controlId:i.controlId,actionInstanceId:i.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(r(i),t)).catch((e=>{this.#E("error",`Action subscribe failed: ${JSON.stringify(i)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#O.get(e.action.actionId);if(t&&t.learn){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},i)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#O.clear();for(const[i,r]of Object.entries(e))r&&(t.push({id:i,name:r.name,description:r.description,options:(0,s.serializeIsVisibleFn)(r.options),hasLearn:!!r.learn,learnTimeout:r.learnTimeout}),this.#O.set(i,r));this.#S({actions:t})}_getAllActions(){return Array.from(this.#A.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#A.values());const i=new Set(e);i.size&&(t=t.filter((e=>i.has(e.actionId))));for(const e of t){const t=this.#O.get(e.actionId);if(t?.subscribe){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(r(e),i)).catch((t=>{this.#E("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#A.values());const i=new Set(e);i.size&&(t=t.filter((e=>i.has(e.actionId))));for(const e of t){const t=this.#O.get(e.actionId);if(t&&t.unsubscribe){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(r(e),i)).catch((t=>{this.#E("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},2593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},8039:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const s=i(1635),r=i(2593),n=s.__importDefault(i(7e3));function o(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#k;#N;#P;#E;#x=new Map;#T=new Map;#R=new Map;#D=new Map;#M;get parseVariablesContext(){return this.#M}constructor(e,t,i,s){this.#k=e,this.#N=t,this.#P=i,this.#E=s}getDefinitionIds(){return Array.from(this.#x.keys())}getInstanceIds(){return Array.from(this.#T.keys())}handleUpdateFeedbacks(e){for(const[t,i]of Object.entries(e)){const e=this.#T.get(t);if(e){const t=this.#x.get(e.feedbackId);if(t?.unsubscribe){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),i)).catch((t=>{this.#E("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!i||i.disabled)this.#T.delete(t);else{this.#T.set(t,{...i,referencedVariables:null});const e=this.#x.get(i.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#k({text:e,controlId:i.controlId,actionInstanceId:void 0,feedbackInstanceId:i.id})).text};Promise.resolve(e.subscribe(o(e.type,i),t)).catch((e=>{this.#E("error",`Feedback subscribe failed: ${JSON.stringify(i)} - ${e?.message??e} ${e?.stack}`)}))}this.#G(t)}}}async handleLearnFeedback(e){const t=this.#x.get(e.feedback.feedbackId);if(t&&t.learn){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},i)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#D.values())for(const i of e.variablesIds)t.changedVariables.add(i);const i=new Set;for(const e of this.#T.values())if(!this.#D.has(e.id)&&e.referencedVariables)for(const s of e.referencedVariables)if(t.has(s)){i.add(e.id);break}for(const e of i)setImmediate((()=>{this.#G(e)}))}#G(e){const t=this.#D.get(e);if(t)return void(t.needsRecheck=!0);const i=this.#T.get(e);if(!i)return;const s=i,r={needsRecheck:!1,changedVariables:new Set};this.#D.set(e,r),Promise.resolve().then((async()=>{const t=this.#x.get(s.feedbackId);let i;const r=new Set;if(t){this.#M=`Feedback ${s.feedbackId} (${e})`;const n={parseVariablesInString:async t=>{const i=await this.#k({text:t,controlId:s.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(i.variableIds&&i.variableIds.length)for(const e of i.variableIds)r.add(e);return i.text}};i="boolean"===t.type?t.callback({...o("boolean",s),type:"boolean"},n):t.callback({...o("advanced",s),type:"advanced",image:s.image},n),this.#M=void 0}const n=await i;this.#R.set(e,{id:e,controlId:s.controlId,value:n}),this.#B(),s.referencedVariables=r.size>0?Array.from(r):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(s)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#M=void 0,this.#D.delete(e);let t=!1;if(s.referencedVariables)for(const e of s.referencedVariables)if(r.changedVariables.has(e)){t=!0;break}(t||r.needsRecheck)&&setImmediate((()=>{this.#G(e)}))}))}#B=(0,n.default)((()=>{const e=this.#R;this.#R=new Map,e.size>0&&this.#N({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#x.clear();for(const[i,s]of Object.entries(e))s&&(t.push({id:i,name:s.name,description:s.description,options:(0,r.serializeIsVisibleFn)(s.options),type:s.type,defaultStyle:"boolean"===s.type?s.defaultStyle:void 0,hasLearn:!!s.learn,learnTimeout:s.learnTimeout,showInvert:"boolean"===s.type&&s.showInvert}),this.#x.set(i,s));this.#P({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,i]of this.#T.entries())this.#x.get(i.feedbackId)&&(0===t.size||t.has(i.feedbackId))&&this.#G(e)}checkFeedbacksById(e){for(const t of e)this.#G(t)}_getAllFeedbacks(){return Array.from(this.#T.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#T.values());const i=new Set(e);i.size&&(t=t.filter((e=>i.has(e.feedbackId))));for(const e of t){const t=this.#x.get(e.feedbackId);if(t?.subscribe){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(o(t.type,e),i)).catch((t=>{this.#E("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#T.values());const i=new Set(e);i.size&&(t=t.filter((e=>i.has(e.feedbackId))));for(const e of t){const t=this.#x.get(e.feedbackId);if(t&&t.unsubscribe){const i={parseVariablesInString:async t=>(await this.#k({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),i)).catch((t=>{this.#E("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},1706:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,i,n,o,a){const c=new Map,l=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??i;t&&"number"==typeof e&&l(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??i;e&&"number"==typeof t&&l(t).feedbacks.push(e.id)}if(!a)for(let e=i??-1;e<n.length;e++)l(e).config=!0;const u={},d={};let h;if(c.size>0){const a=Array.from(c.keys()).sort(),l=Math.min(...a,i??-1)+1,p=[],f=[],b=n.length;for(let i=l;i<b;i++){const a=c.get(i-1);a&&(p.push(...a.actions),f.push(...a.feedbacks));const l=!!a?.config;if(!l&&0===p.length&&0===f.length)continue;const b=h??o,m=(0,n[i])({currentConfig:r(b)},{config:l?b:null,actions:p.map((t=>{const i=e[t];if(i)return(0,s.literal)({id:i.id,controlId:i.controlId,actionId:i.actionId,options:void 0!==i.options?r(i.options):{}})})).filter((e=>!!e)),feedbacks:f.map((e=>{const i=t[e];if(i)return(0,s.literal)({id:i.id,controlId:i.controlId,feedbackId:i.feedbackId,options:void 0!==i.options?r(i.options):{},isInverted:i.isInverted})})).filter((e=>!!e))});l&&m.updatedConfig&&(h=m.updatedConfig);for(const t of m.updatedActions)if(t){const i=e[t.id];i&&(i.actionId=t.actionId,i.options=t.options,d[t.id]=i)}for(const e of m.updatedFeedbacks)if(e){const i=t[e.id];i&&(i.feedbackId=e.feedbackId,i.options=e.options,u[e.id]={...i,style:u[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,i]of Object.entries(e))d[t]||"number"!=typeof i?.upgradeIndex||(d[t]=i);for(const[e,i]of Object.entries(t))u[e]||"number"!=typeof i?.upgradeIndex||(u[e]=i)}return{updatedActions:d,updatedFeedbacks:u,updatedConfig:h}};const s=i(360);function r(e){return JSON.parse(JSON.stringify(e))}},9077:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,s.default)(e)){const e=s.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const s=i(1635).__importDefault(i(7281))},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1649:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const s=i(1635),r=i(360),n=s.__importDefault(i(3290)),o=i(2593),a=i(1706),c=i(8039),l=i(4044),u=i(4289),d=i(2365);t.InstanceBase=class{#j;#F;id;#W=new n.default({concurrency:1});#V=!1;#Z=!1;#L={};#U;#Y;#z=new Map;#J=new Map;#q=new Map;#i;#Q;get instanceOptions(){return this.#i}get label(){return this.#Q}constructor(e){if(!(0,o.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#i={disableVariableValidation:!1},this.#j=new l.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#j.receivedMessage(e)})),this.#U=new u.ActionManager((async e=>this.#j.sendWithCb("parseVariablesInString",e)),(e=>this.#j.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#Y=new c.FeedbackManager((async e=>this.#j.sendWithCb("parseVariablesInString",e)),(e=>this.#j.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#j.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#F=e.upgradeScripts,this.id=e.id,this.#Q=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#W.add((async()=>{if(this.#V)throw new Error("Already initialized");const t=e.actions,i=e.feedbacks;if(this.#L=e.config,this.#Q=e.label,e.isFirstInit){const t={},i=this.getConfigFields();for(const e of i)"default"in e&&(t[e.id]=e.default);this.#L=t,this.saveConfig(this.#L),e.lastUpgradeIndex=this.#F.length-1}const{updatedActions:s,updatedFeedbacks:r,updatedConfig:n}=(0,a.runThroughUpgradeScripts)(t,i,e.lastUpgradeIndex,this.#F,this.#L,!1);this.#L=n??this.#L;const o=this.#j.sendWithCb("upgradedItems",{updatedActions:s,updatedFeedbacks:r});try{await this.init(this.#L,!!e.isFirstInit),this.#V=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await o}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:i},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#F.length-1,updatedConfig:this.#L}}))}async _handleDestroy(){await this.#W.add((async()=>{if(!this.#V)throw new Error("Not initialized");await this.destroy(),this.#V=!1}))}async _handleConfigUpdateAndLabel(e){await this.#W.add((async()=>{if(!this.#V)throw new Error("Not initialized");this.#Q=e.label,this.#L=e.config,await this.configUpdated(this.#L)}))}async _handleExecuteAction(e){return this.#U.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#F,this.#L,!0);this.#j.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#Y.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#F,this.#L,!0);this.#j.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#U.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#U.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#Y.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#Z)return}else if(!this.#Z)return;if(!this.handleStartStopRecordActions)throw this.#Z=!1,new Error("Recording actions is not supported by this module!");this.#Z=e.recording,this.handleStartStopRecordActions(this.#Z)}async _handleVariablesChanged(e){this.#Y.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#z.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#z.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#L=e,this.#j.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#U.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#Y.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[i,s]of Object.entries(e))s&&t.push({...s,id:i});this.#j.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],i=[];this.#J.clear();for(const s of e)t.push({id:s.variableId,name:s.name}),this.#J.set(s.variableId,s),this.#q.has(s.variableId)||(this.#q.set(s.variableId,""),i.push({id:s.variableId,value:""}));if(!this.#i.disableVariableValidation){const e=new Set(this.#J.keys());for(const t of this.#q.keys())e.has(t)||(this.#q.delete(t),i.push({id:t,value:void 0}))}this.#j.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:i})}setVariableValues(e){const t=[];for(const[i,s]of Object.entries(e))this.#i.disableVariableValidation?(void 0===s?this.#q.delete(i):this.#q.set(i,s),t.push({id:i,value:s})):this.#J.has(i)?(this.#q.set(i,s??""),t.push({id:i,value:s??""})):t.push({id:i,value:void 0});this.#j.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#q.get(e)}async parseVariablesInString(e){const t=this.#Y.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#j.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#Y.checkFeedbacks(e)}checkFeedbacksById(...e){this.#Y.checkFeedbacksById(e)}_getAllActions(){return this.#U._getAllActions()}subscribeActions(...e){this.#U.subscribeActions(e)}unsubscribeActions(...e){this.#U.unsubscribeActions(e)}_getAllFeedbacks(){return this.#Y._getAllFeedbacks()}subscribeFeedbacks(...e){this.#Y.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#Y.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#Z)throw new Error("Not currently recording actions");this.#j.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}setCustomVariableValue(e,t){this.#j.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,i,s){this.#j.sendWithNoCb("send-osc",(0,r.literal)({host:e,port:t,path:i,args:s}))}updateStatus(e,t){this.#j.sendWithNoCb("set-status",(0,r.literal)({status:e,message:t??null}))}log(e,t){this.#j.sendWithNoCb("log-message",(0,r.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const i="string"==typeof e?{type:e}:e,s=new d.SharedUdpSocketImpl(this.#j,this.#z,i);return t&&s.on("message",t),s}}},7386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1400:(e,t)=>{"use strict";var i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(i||(t.InstanceStatus=i={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(s||(t.Regex=s={}))},8983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9637:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1635);s.__exportStar(i(3730),t),s.__exportStar(i(1649),t),s.__exportStar(i(7386),t),s.__exportStar(i(1400),t),s.__exportStar(i(8983),t),s.__exportStar(i(8104),t),s.__exportStar(i(3258),t),s.__exportStar(i(131),t),s.__exportStar(i(3371),t),s.__exportStar(i(9786),t),s.__exportStar(i(6132),t)},3258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2365:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const s=i(1635).__importDefault(i(228)),r=i(360);class n extends s.default{#j;#H;#i;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#b&&"object"==typeof this.#b?this.#b:void 0}#b="pending";constructor(e,t,i){super(),this.#j=e,this.#H=t,this.#i={...i}}bind(e,t,i){if(this.#b&&"object"==typeof this.#b)throw new Error("Socket is already bound");switch(this.#b){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,r.assertNever)(this.#b),new Error("Invalid socket state")}this.#b="binding",i&&this.on("listening",i),this.#j.sendWithCb("sharedUdpSocketJoin",{family:this.#i.type,portNumber:e}).then((t=>{this.#b={portNumber:e,handleId:t},this.#H.set(t,this),this.emit("listening")}),(e=>{this.#b="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#b&&"object"==typeof this.#b);else switch(this.#b){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,r.assertNever)(this.#b),new Error("Invalid socket state")}const t=this.#b.handleId;this.#b="closed",e&&this.on("close",e),this.#j.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#H.delete(t),this.emit("close")}),(e=>{this.#H.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,i,s,r,n){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof i){if("number"!=typeof s||"string"!=typeof r)throw new Error("Invalid arguments");if(void 0!==n&&"number"!=typeof n)throw new Error("Invalid arguments");const o=this.#X(e,t,i);this.#$(o,s,r,n)}else{if("string"!=typeof i)throw new Error("Invalid arguments");{if(void 0!==s&&"function"!=typeof s)throw new Error("Invalid arguments");const r=this.#X(e,0,void 0);this.#$(r,t,i,s)}}}#X(e,t,i){let s;if("string"==typeof e)s=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))s=e;else{if(Array.isArray(e))return Buffer.from(e);s=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return s.subarray(t,void 0!==i?i+t:void 0)}#$(e,t,i,s){if(!this.#b||"object"!=typeof this.#b)throw new Error("Socket is not open");this.#j.sendWithCb("sharedUdpSocketSend",{handleId:this.#b.handleId,message:e,address:i,port:t}).then((()=>{s?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#b="fatalError";const t=this.boundState;t&&this.#H.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=n},3371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,i)=>{const s=[];for(const t of i.feedbacks){let i=e[t.feedbackId];if(!0===i&&(i={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),i){t.style||(t.style={});for(const[e,r]of Object.entries(i))void 0!==t.options[e]&&(t.style[r]=t.options[e],delete t.options[e],s.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:s}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,i)=>{const s=[];for(const t of i.feedbacks){const i=e[t.feedbackId];if("string"!=typeof i)continue;const r=t.options[i];void 0!==r&&(delete t.options[i],t.isInverted="true"===r||!0===r||Number(r)>0,s.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:s}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]})},6132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},360:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,i,s){let r=(255&e)<<16|(255&t)<<8|255&i;return s&&s>=0&&s<1&&(r+=16777216*Math.round(255*(1-s))),r},t.splitRgb=r,t.splitHsl=function(e){const t=r(e);return(0,s.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=r(e);return(0,s.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=r(e);return(0,s.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()};const s=i(6284);function r(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,s.colord)(e).isValid()){const t=(0,s.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},7281:(e,t,i)=>{"use strict";e.exports=c,e.exports.default=c;const s={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}}},r={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1},n=Object.prototype.hasOwnProperty,o=i(7169).A,a=new RegExp("","u");function c(e,{instancePath:t="",parentData:i,parentDataProperty:l,rootData:u=e}={}){let d=null,h=0;if(0===h){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let i;if(void 0===e.id&&(i="id")||void 0===e.name&&(i="name")||void 0===e.shortname&&(i="shortname")||void 0===e.description&&(i="description")||void 0===e.version&&(i="version")||void 0===e.license&&(i="license")||void 0===e.repository&&(i="repository")||void 0===e.bugs&&(i="bugs")||void 0===e.maintainers&&(i="maintainers")||void 0===e.legacyIds&&(i="legacyIds")||void 0===e.runtime&&(i="runtime")||void 0===e.manufacturer&&(i="manufacturer")||void 0===e.products&&(i="products")||void 0===e.keywords&&(i="keywords"))return c.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:i},message:"must have required property '"+i+"'"}],!1;{const i=h;for(const i in e)if(!n.call(s.properties,i))return c.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:i},message:"must NOT have additional properties"}],!1;if(i===h){if(void 0!==e.$schema){const i=h;if("string"!=typeof e.$schema)return c.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=i===h}else p=!0;if(p){if(void 0!==e.id){const i=h;if("string"!=typeof e.id)return c.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.name){const i=h;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.shortname){const i=h;if("string"!=typeof e.shortname)return c.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.description){const i=h;if("string"!=typeof e.description)return c.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.version){const i=h;if("string"!=typeof e.version)return c.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.license){const i=h;if("string"!=typeof e.license)return c.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.repository){const i=h;if("string"!=typeof e.repository)return c.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.bugs){const i=h;if("string"!=typeof e.bugs)return c.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.maintainers){let i=e.maintainers;const s=h;if(h===s){if(!Array.isArray(i))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const e=i.length;for(let s=0;s<e;s++){let e=i[s];const r=h;if(h===r){if(!e||"object"!=typeof e||Array.isArray(e))return c.errors=[{instancePath:t+"/maintainers/"+s,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let i;if(void 0===e.name&&(i="name"))return c.errors=[{instancePath:t+"/maintainers/"+s,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:i},message:"must have required property '"+i+"'"}],!1;if(void 0!==e.name){const i=h;if("string"!=typeof e.name)return c.errors=[{instancePath:t+"/maintainers/"+s+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=i===h}else b=!0;if(b){if(void 0!==e.email){const i=h;if("string"!=typeof e.email)return c.errors=[{instancePath:t+"/maintainers/"+s+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;b=i===h}else b=!0;if(b)if(void 0!==e.github){const i=h;if("string"!=typeof e.github)return c.errors=[{instancePath:t+"/maintainers/"+s+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;b=i===h}else b=!0}}}if(!(f=r===h))break}if(f){let e,s=i.length;if(s>1)for(;s--;)for(e=s;e--;)if(o(i[s],i[e]))return c.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1}}}p=s===h}else p=!0;if(p){if(void 0!==e.legacyIds){let i=e.legacyIds;const s=h;if(h===s){if(!Array.isArray(i))return c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var m=!0;const e=i.length;for(let s=0;s<e;s++){const e=h;if("string"!=typeof i[s])return c.errors=[{instancePath:t+"/legacyIds/"+s,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m=e===h))break}if(m){let e,s=i.length;if(s>1){const r={};for(;s--;){let n=i[s];if("string"==typeof n){if("number"==typeof r[n])return e=r[n],c.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;r[n]=s}}}}}}p=s===h}else p=!0;if(p){if(void 0!==e.runtime){let i=e.runtime;const r=h;if(h===r){if(!i||"object"!=typeof i||Array.isArray(i))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===i.type&&(e="type")||void 0===i.api&&(e="api")||void 0===i.apiVersion&&(e="apiVersion")||void 0===i.entrypoint&&(e="entrypoint"))return c.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==i.type){let e=i.type;const r=h;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return c.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:s.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var g=r===h}else g=!0;if(g){if(void 0!==i.api){let e=i.api;const r=h;if("string"!=typeof e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return c.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:s.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;g=r===h}else g=!0;if(g){if(void 0!==i.apiVersion){const e=h;if("string"!=typeof i.apiVersion)return c.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=e===h}else g=!0;if(g)if(void 0!==i.entrypoint){const e=h;if("string"!=typeof i.entrypoint)return c.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=e===h}else g=!0}}}}p=r===h}else p=!0;if(p){if(void 0!==e.manufacturer){const i=h;if("string"!=typeof e.manufacturer)return c.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=i===h}else p=!0;if(p){if(void 0!==e.products){let i=e.products;const s=h;if(h===s){if(!Array.isArray(i))return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(i.length<1)return c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var y=!0;const e=i.length;for(let s=0;s<e;s++){const e=h;if("string"!=typeof i[s])return c.errors=[{instancePath:t+"/products/"+s,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(y=e===h))break}if(y){let e,s=i.length;if(s>1){const r={};for(;s--;){let n=i[s];if("string"==typeof n){if("number"==typeof r[n])return e=r[n],c.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;r[n]=s}}}}}}p=s===h}else p=!0;if(p){if(void 0!==e.keywords){let i=e.keywords;const s=h;if(h===s){if(!Array.isArray(i))return c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var w=!0;const e=i.length;for(let s=0;s<e;s++){const e=h;if("string"!=typeof i[s])return c.errors=[{instancePath:t+"/keywords/"+s,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(w=e===h))break}if(w){let e,s=i.length;if(s>1){const r={};for(;s--;){let n=i[s];if("string"==typeof n){if("number"==typeof r[n])return e=r[n],c.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;r[n]=s}}}}}}p=s===h}else p=!0;if(p)if(void 0!==e.bonjourQueries){let i=e.bonjourQueries;const s=h;if(h===s){if(!i||"object"!=typeof i||Array.isArray(i))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=h;for(const e in i)if(!a.test(e))return c.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===h)for(const e in i)if(a.test(e)){let s=i[e];const n=h,o=h;let l=!1,u=null;const p=h;if(h==h)if(s&&"object"==typeof s&&!Array.isArray(s)){let i;if(void 0===s.type&&(i="type")||void 0===s.protocol&&(i="protocol")){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:i},message:"must have required property '"+i+"'"};null===d?d=[s]:d.push(s),h++}else{const i=h;for(const i in s)if("type"!==i&&"protocol"!==i&&"txt"!==i){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:i},message:"must NOT have additional properties"};null===d?d=[s]:d.push(s),h++;break}if(i===h){if(void 0!==s.type){const i=h;if("string"!=typeof s.type){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[i]:d.push(i),h++}var v=i===h}else v=!0;if(v){if(void 0!==s.protocol){let i=s.protocol;const n=h;if("string"!=typeof i){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[i]:d.push(i),h++}if("tcp"!==i&&"udp"!==i){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:r.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[i]:d.push(i),h++}v=n===h}else v=!0;if(v)if(void 0!==s.txt){let i=s.txt;const r=h;if(h===r)if(i&&"object"==typeof i&&!Array.isArray(i)){const s=h;for(const s in i)if(!a.test(s)){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};null===d?d=[i]:d.push(i),h++;break}if(s===h)for(const s in i)if(a.test(s)){const r=h;if("string"!=typeof i[s]){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+s.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[i]:d.push(i),h++}if(r!==h)break}}else{const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[i]:d.push(i),h++}v=r===h}else v=!0}}}}else{const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[i]:d.push(i),h++}p===h&&(l=!0,u=0);const f=h;if(h===f)if(Array.isArray(s)){const i=s.length;for(let n=0;n<i;n++){let i=s[n];const o=h;if(h==h)if(i&&"object"==typeof i&&!Array.isArray(i)){let s;if(void 0===i.type&&(s="type")||void 0===i.protocol&&(s="protocol")){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"};null===d?d=[i]:d.push(i),h++}else{const s=h;for(const s in i)if("type"!==s&&"protocol"!==s&&"txt"!==s){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n,schemaPath:"#/definitions/bonjourQuery/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};null===d?d=[i]:d.push(i),h++;break}if(s===h){if(void 0!==i.type){const s=h;if("string"!=typeof i.type){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[i]:d.push(i),h++}var I=s===h}else I=!0;if(I){if(void 0!==i.protocol){let s=i.protocol;const o=h;if("string"!=typeof s){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[i]:d.push(i),h++}if("tcp"!==s&&"udp"!==s){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:r.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===d?d=[i]:d.push(i),h++}I=o===h}else I=!0;if(I)if(void 0!==i.txt){let s=i.txt;const r=h;if(h===r)if(s&&"object"==typeof s&&!Array.isArray(s)){const i=h;for(const i in s)if(!a.test(i)){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:i},message:"must NOT have additional properties"};null===d?d=[s]:d.push(s),h++;break}if(i===h)for(const i in s)if(a.test(i)){const r=h;if("string"!=typeof s[i]){const s={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/txt/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===d?d=[s]:d.push(s),h++}if(r!==h)break}}else{const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[i]:d.push(i),h++}I=r===h}else I=!0}}}}else{const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===d?d=[i]:d.push(i),h++}if(o!==h)break}}else{const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===d?d=[i]:d.push(i),h++}var _;if((_=f===h)&&l?(l=!1,u=[u,1]):_&&(l=!0,u=1),!l){const i={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return null===d?d=[i]:d.push(i),h++,c.errors=d,!1}if(h=o,null!==d&&(o?d.length=o:d=null),n!==h)break}}}p=s===h}else p=!0}}}}}}}}}}}}}}}}}}return c.errors=d,0===h}},7e3:(e,t,i)=>{"use strict";const s=i(4865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:i=0,maxWait:r=0,before:n=!1,after:o=!0}=t;if(!n&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,l;const u=function(...t){const s=this,u=n&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),o&&(l=e.apply(s,t))}),i),r>0&&!c&&o&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),l=e.apply(s,t)}),r)),u&&(l=e.apply(s,t)),l};return s(u,e),u.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},u}},1635:(e,t,i)=>{"use strict";i.r(t),i.d(t,{__addDisposableResource:()=>M,__assign:()=>n,__asyncDelegator:()=>S,__asyncGenerator:()=>k,__asyncValues:()=>E,__await:()=>C,__awaiter:()=>f,__classPrivateFieldGet:()=>T,__classPrivateFieldIn:()=>D,__classPrivateFieldSet:()=>R,__createBinding:()=>m,__decorate:()=>a,__disposeResources:()=>B,__esDecorate:()=>l,__exportStar:()=>g,__extends:()=>r,__generator:()=>b,__importDefault:()=>x,__importStar:()=>P,__makeTemplateObject:()=>O,__metadata:()=>p,__param:()=>c,__propKey:()=>d,__read:()=>w,__rest:()=>o,__rewriteRelativeImportExtension:()=>j,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>v,__spreadArray:()=>_,__spreadArrays:()=>I,__values:()=>y,default:()=>F});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var n=function(){return n=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};function o(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i}function a(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function c(e,t){return function(i,s){t(i,s,e)}}function l(e,t,i,s,r,n){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,p=i.length-1;p>=0;p--){var f={};for(var b in s)f[b]="access"===b?{}:s[b];for(var b in s.access)f.access[b]=s.access[b];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(e||null))};var m=(0,i[p])("accessor"===c?{get:d.get,set:d.set}:d[l],f);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(d.get=a),(a=o(m.set))&&(d.set=a),(a=o(m.init))&&r.unshift(a)}else(a=o(m))&&("field"===c?r.unshift(a):d[l]=a)}u&&Object.defineProperty(u,s.name,d),h=!0}function u(e,t,i){for(var s=arguments.length>2,r=0;r<t.length;r++)i=s?t[r].call(e,i):t[r].call(e);return s?i:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,i){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{c(s.next(e))}catch(e){n(e)}}function a(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function b(e,t){var i,s,r,n={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(n=0)),n;)try{if(i=1,s&&(r=2&a[0]?s.return:a[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,a[1])).done)return r;switch(s=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!((r=(r=n.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(6===a[0]&&n.label<r[1]){n.label=r[1],r=a;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(a);break}r[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],s=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var m=Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]};function g(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||m(t,e,i)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var s,r,n=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return o}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}function I(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,r++)s[r]=n[o];return s}function _(e,t,i){if(i||2===arguments.length)for(var s,r=0,n=t.length;r<n;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function C(e){return this instanceof C?(this.v=e,this):new C(e)}function k(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=i.apply(e,t||[]),n=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),s[Symbol.asyncIterator]=function(){return this},s;function o(e,t){r[e]&&(s[e]=function(t){return new Promise((function(i,s){n.push([e,t,i,s])>1||a(e,t)}))},t&&(s[e]=t(s[e])))}function a(e,t){try{(i=r[e](t)).value instanceof C?Promise.resolve(i.value.v).then(c,l):u(n[0][2],i)}catch(e){u(n[0][3],e)}var i}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),n.shift(),n.length&&a(n[0][0],n[0][1])}}function S(e){var t,i;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,r){t[s]=e[s]?function(t){return(i=!i)?{value:C(e[s](t)),done:!1}:r?r(t):t}:r}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=y(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(i){t[i]=e[i]&&function(t){return new Promise((function(s,r){!function(e,t,i,s){Promise.resolve(s).then((function(t){e({value:t,done:i})}),t)}(s,r,(t=e[i](t)).done,t.value)}))}}}function O(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var A=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},N=function(e){return N=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},N(e)};function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=N(e),s=0;s<i.length;s++)"default"!==i[s]&&m(t,e,i[s]);return A(t,e),t}function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)}function R(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i}function D(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function M(e,t,i){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var s,r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],i&&(r=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");r&&(s=function(){try{r.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:s,async:i})}else i&&e.stack.push({async:!0});return t}var G="function"==typeof SuppressedError?SuppressedError:function(e,t,i){var s=new Error(i);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function B(e){function t(t){e.error=e.hasError?new G(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var i,s=0;return function r(){for(;i=e.stack.pop();)try{if(!i.async&&1===s)return s=0,e.stack.push(i),Promise.resolve().then(r);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(n).then(r,(function(e){return t(e),r()}))}else s|=1}catch(e){t(e)}if(1===s)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function j(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,i,s,r,n){return i?t?".jsx":".js":!s||r&&n?s+r+"."+n.toLowerCase()+"js":e})):e}const F={__extends:r,__assign:n,__rest:o,__decorate:a,__param:c,__esDecorate:l,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:b,__createBinding:m,__exportStar:g,__values:y,__read:w,__spread:v,__spreadArrays:I,__spreadArray:_,__await:C,__asyncGenerator:k,__asyncDelegator:S,__asyncValues:E,__makeTemplateObject:O,__importStar:P,__importDefault:x,__classPrivateFieldGet:T,__classPrivateFieldSet:R,__classPrivateFieldIn:D,__addDisposableResource:M,__disposeResources:B,__rewriteRelativeImportExtension:j}}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=i(9562),t=i(6278);const s={none:(0,t.combineRgb)(16,16,16),red:(0,t.combineRgb)(160,0,0),orange:(0,t.combineRgb)(255,100,0),yellow:(0,t.combineRgb)(160,160,0),green:(0,t.combineRgb)(0,160,0),cyan:(0,t.combineRgb)(0,160,160),blue:(0,t.combineRgb)(0,0,160),purple:(0,t.combineRgb)(80,0,80),magenta:(0,t.combineRgb)(160,0,160),berry:(0,t.combineRgb)(94,30,77),crimson:(0,t.combineRgb)(140,0,40),forest:(0,t.combineRgb)(50,85,35),gray:(0,t.combineRgb)(140,140,140),"Hot Pink":(0,t.combineRgb)(220,0,120),hotpink:(0,t.combineRgb)(220,0,120),indigo:(0,t.combineRgb)(75,0,130),lavender:(0,t.combineRgb)(200,140,224),midnight:(0,t.combineRgb)(32,36,125),olive:(0,t.combineRgb)(128,128,0),peach:(0,t.combineRgb)(228,128,89),plum:(0,t.combineRgb)(52,0,62),skyblue:(0,t.combineRgb)(135,206,235),"Sky Blue":(0,t.combineRgb)(135,206,235),avocado:(0,t.combineRgb)(86,130,4),bastardamber:(0,t.combineRgb)(255,200,180),bisque:(0,t.combineRgb)(255,229,196),celadon:(0,t.combineRgb)(171,225,175),cerulean:(0,t.combineRgb)(94,127,178),chartreuse:(0,t.combineRgb)(127,255,0),coral:(0,t.combineRgb)(255,126,79),ecru:(0,t.combineRgb)(206,178,128),edgecombgray:(0,t.combineRgb)(218,212,197),fuchsia:(0,t.combineRgb)(223,0,223),fulvous:(0,t.combineRgb)(228,134,0),glaucous:(0,t.combineRgb)(136,206,234),grey:(0,t.combineRgb)(140,140,140),lilac:(0,t.combineRgb)(204,135,153),maize:(0,t.combineRgb)(247,232,92),mauve:(0,t.combineRgb)(153,51,102),ochre:(0,t.combineRgb)(205,118,34),puce:(0,t.combineRgb)(223,176,255),rufous:(0,t.combineRgb)(169,27,7),sage:(0,t.combineRgb)(189,184,138),scarlet:(0,t.combineRgb)(253,37,0),seafoamgreen:(0,t.combineRgb)(195,226,190),taupe:(0,t.combineRgb)(178,138,108),verdigris:(0,t.combineRgb)(65,129,108),vermilion:(0,t.combineRgb)(228,66,52),viridian:(0,t.combineRgb)(195,226,190),wenge:(0,t.combineRgb)(100,84,82),zaffre:(0,t.combineRgb)(0,20,168)},r=[{label:"None",id:"none"},{label:"Red",id:"red"},{label:"Orange",id:"orange"},{label:"Yellow",id:"yellow"},{label:"Green",id:"green"},{label:"Cyan",id:"cyan"},{label:"Blue",id:"blue"},{label:"Purple",id:"purple"},{label:"Magenta",id:"magenta"},{label:"Berry",id:"berry"},{label:"Crimson",id:"crimson"},{label:"Forest",id:"forest"},{label:"Gray",id:"gray"},{label:"Hot Pink",id:"Hot Pink"},{label:"Indigo",id:"indigo"},{label:"Lavender",id:"Lavender"},{label:"Midnight",id:"midnight"},{label:"Olive",id:"olive"},{label:"Peach",id:"peach"},{label:"Plum",id:"plum"},{label:"Sky Blue",id:"Sky Blue"},{label:"Avocado",id:"avocado"},{label:"Bastard Amber",id:"bastardamber"},{label:"Bisque",id:"bisque"},{label:"Celadon",id:"celadon"},{label:"Cerulean",id:"cerulean"},{label:"Chartreuse",id:"chartreuse"},{label:"Coral",id:"coral"},{label:"Ecru",id:"ecru"},{label:"Edgecomb Gray",id:"edgecombgray"},{label:"Fuchsia",id:"fuchsia"},{label:"Fulvous",id:"fulvous"},{label:"Glaucous",id:"glaucous"},{label:"Grey",id:"grey"},{label:"Lilac",id:"lilac"},{label:"Maize",id:"maize"},{label:"Mauve",id:"mauve"},{label:"Ochre",id:"ochre"},{label:"Puce",id:"puce"},{label:"Rufous",id:"rufous"},{label:"Sage",id:"sage"},{label:"Scarlet",id:"scarlet"},{label:"Seafoam Green",id:"seafoamgreen"},{label:"Taupe",id:"taupe"},{label:"Verdigris",id:"verdigris"},{label:"Vermilion",id:"vermilion"},{label:"Viridian",id:"viridian"},{label:"Wenge",id:"wenge"},{label:"Zaffre",id:"zaffre"}],n=[{label:"Do Not Continue",id:"0"},{label:"Auto Continue",id:"1"},{label:"Auto Follow",id:"2"}],o=[{id:"S",label:"Set Time"},{id:"I",label:"Increase by"},{id:"D",label:"Decrease by"}],a=[{id:"D",label:"Playhead"},{id:"S",label:"Selected"},{id:"N",label:"Cue Number"},{id:"I",label:"Cue ID"}],c=[{id:"D",label:"Playhead/Next"},{id:"R",label:"Running Cue"},{id:"N",label:"Cue Number"},{id:"I",label:"Cue ID"}],l=[{id:"D",label:"Default (All)"},{id:"S",label:"Selected"},{id:"N",label:"Cue Number"},{id:"I",label:"Cue ID"}],u=[{id:1,label:"On"},{id:0,label:"Off"},{id:2,label:"Toggle"}],d=[{id:"midiInputEnabled",label:"Midi Input [4, 5]",preset:""},{id:"midiOutputEnabled",label:"Midi Output [4, 5]",preset:"45"},{id:"mscInputEnabled",label:"MSC Input [4, 5]",preset:""},{id:"mscOutputEnabled",label:"MSC Output [4, 5]",preset:"45"},{id:"sysexInputEnabled",label:"SysEx Input [4, 5]",preset:""},{id:"sysexOutputEnabled",label:"SysEx Output [4, 5]",preset:"45"},{id:"oscOutputEnabled",label:"OSC Output [4]",preset:"4"},{id:"timecodeInputEnabled",label:"Timecode Input [4, 5]",preset:""},{id:"timecodeOutputEnabled",label:"Timecode Output [4, 5]",preset:"45"},{id:"artNetEnabled",label:"Art-Net Enabled [4]",preset:""},{id:"dmxOutputEnabled",label:"DMX Output [5]",preset:"5"},{id:"networkExternalInputEnabled",label:"External Network Input [5]",preset:""},{id:"networkExternalOutputEnabled",label:"External Network Output [5]",preset:"5"},{id:"networkLocalInputEnabled",label:"Local Network Input [5]",preset:""},{id:"networkLocalOutputEnabled",label:"Local Network Output [5]",preset:"5"}];function h(e,t=2,i="0"){return(i.repeat(t)+Math.abs(e)).slice(-t)}var p=function(e){let t=0;for(let i=0;i<e.length;i++){t^=e[i];for(let e=0;e<8;e++)t=1&t?t>>1^33800:t>>1}return 65535&t};function f(e){return e.replace(/[^\w\.]/gi,"_")}function b(e){return e.isBroken?"✕":e.isAuditioning?"❲⏵❳":e.isRunning?"⏵":e.isPaused?"⏸":e.isLoaded?"⏽":"·"}const m="iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAYAAAATBx+NAAABJmlDQ1BBZG9iZSBSR0IgKDE5OTgpAAAoz2NgYDJwdHFyZRJgYMjNKykKcndSiIiMUmA/z8DGwMwABonJxQWOAQE+IHZefl4qAwb4do2BEURf1gWZxUAa4EouKCoB0n+A2CgltTiZgYHRAMjOLi8pAIozzgGyRZKywewNIHZRSJAzkH0EyOZLh7CvgNhJEPYTELsI6Akg+wtIfTqYzcQBNgfClgGxS1IrQPYyOOcXVBZlpmeUKBhaWloqOKbkJ6UqBFcWl6TmFit45iXnFxXkFyWWpKYA1ULcBwaCEIWgENMAarTQZKAyAMUDhPU5EBy+jGJnEGIIkFxaVAZlMjIZE+YjzJgjwcDgv5SBgeUPQsykl4FhgQ4DA/9UhJiaIQODgD4Dw745AMDGT/0ZOjZcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMKmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNi0wNFQxMToyMToxMiswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDYtMDRUMTE6MjE6MTIrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU3OWRiOTk3LTUzMzAtNDA0MC04MWZhLTBjYmY3ZWY2ZjU4ZSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmQyM2E5ZDJmLTM2NDgtMTI0Yi04ZGU2LTZiYjM4ZTQ5ZTkwOSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkFkb2JlIFJHQiAoMTk5OCkiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZGJiODQ5OS0xYjNiLTQ0YzAtOGU0Ny1lZWJhYjVmNDhjMzUiIHN0RXZ0OndoZW49IjIwMTgtMDYtMDRUMTE6MjE6MTIrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTc5ZGI5OTctNTMzMC00MDQwLTgxZmEtMGNiZjdlZjZmNThlIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTA0VDExOjIxOjEyKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRkYmI4NDk5LTFiM2ItNDRjMC04ZTQ3LWVlYmFiNWY0OGMzNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiLz4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgV2hpdGUiIHBob3Rvc2hvcDpMYXllclRleHQ9Ij0iLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgcmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI9Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI5Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjkiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTa2lwIEZ3ZCB3aGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iOiIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlNraXAgRndkIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjoiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJQbGF5IFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI0Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGxheSBHcmVlbiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iNCIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlBhdXNlIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGF1c2UgWWVsbG93IiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU3RvcCBXaGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iJmx0OyIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlN0b3AgUmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSImbHQ7Ii8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5i6Z7uAAABPElEQVR42u3a4Q2CMBCG4a7gCqzgLK7gCs7iCq7gCo4AK7hCrUqISAstPaN3viTfTwg8SUt7Pee9dyQdEAACCCCAAAIIIICILJBz7SFk48SudheyLb1r5v26EN+n+wbQMeQih9TuQ66lSL8O5OWQHkC+FEkDkBDSAFSEpAVIAGkElI2kCagSaQKUhaQNqAIpCrSIpBFoJVISaBZJK1CPJAbk+w9uLAHdcxYEiiJpBypAygKaIFkAykTKBhohWQHKQCoCGpAsAS0gFQPNImkFmkFaBZRE0gyUQFoNFEXSDhRBqgKaIFkAekOqBhpW8JaA/PM5YkAv2xw7QKcPADUMsT8YYkzS/OZZKLLVYLNKuYOCGSVXqyVXivYc+3BwyNEzzQu0v9BARQue1RY8mjgJQAABBBBAAAEEEEAkkRszs/0O3FXJfAAAAABJRU5ErkJggg==",g="iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAYAAAATBx+NAAABJmlDQ1BBZG9iZSBSR0IgKDE5OTgpAAAoz2NgYDJwdHFyZRJgYMjNKykKcndSiIiMUmA/z8DGwMwABonJxQWOAQE+IHZefl4qAwb4do2BEURf1gWZxUAa4EouKCoB0n+A2CgltTiZgYHRAMjOLi8pAIozzgGyRZKywewNIHZRSJAzkH0EyOZLh7CvgNhJEPYTELsI6Akg+wtIfTqYzcQBNgfClgGxS1IrQPYyOOcXVBZlpmeUKBhaWloqOKbkJ6UqBFcWl6TmFit45iXnFxXkFyWWpKYA1ULcBwaCEIWgENMAarTQZKAyAMUDhPU5EBy+jGJnEGIIkFxaVAZlMjIZE+YjzJgjwcDgv5SBgeUPQsykl4FhgQ4DA/9UhJiaIQODgD4Dw745AMDGT/0ZOjZcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMKmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNi0wNFQxMToyMDozMCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDYtMDRUMTE6MjA6MzArMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEzNzY2ZmM2LTlhYzYtNDdlOS1iZGQ2LTA4ZmU4YWZiNWM1MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE5MTI4MGUwLWIwM2UtZTg0Yy04ODRiLTEzMjg5ZGYzN2ZiNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkFkb2JlIFJHQiAoMTk5OCkiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZWQ3NjVkMS0yMjdmLTQyZTgtYTZmYy0wNzhmNjhkMWU4OWEiIHN0RXZ0OndoZW49IjIwMTgtMDYtMDRUMTE6MjA6MzArMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTM3NjZmYzYtOWFjNi00N2U5LWJkZDYtMDhmZThhZmI1YzUxIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTA0VDExOjIwOjMwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRlZDc2NWQxLTIyN2YtNDJlOC1hNmZjLTA3OGY2OGQxZTg5YSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiLz4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgV2hpdGUiIHBob3Rvc2hvcDpMYXllclRleHQ9Ij0iLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgcmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI9Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI5Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjkiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTa2lwIEZ3ZCB3aGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iOiIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlNraXAgRndkIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjoiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJQbGF5IFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI0Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGxheSBHcmVlbiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iNCIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlBhdXNlIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGF1c2UgWWVsbG93IiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU3RvcCBXaGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iJmx0OyIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlN0b3AgUmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSImbHQ7Ii8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6Aq/YNAAABX0lEQVR42u3bTRHCMBAF4KYOsEBxUAsgAQtFApUAEsAKWMABaEBCCEwPvcCUIZt9u7ydeT110s5H+peEOsZYMe9TV6yPRSACEYhABCIQgQhEoC8rhNsyZTvKPIRQ5cmtnbrvxHNtNXrQ86C7UeZ5frNrN7SXpQack5NL7IVzEMCZOQDCwwECwsQBAcLFAQDCxlEGwsdRBLKBowRkB0cBKC9Oak8UpzCQPZyCQDZxCgHZxSkAZBtHGMg+jiCQDxwhID84AkC+cCR6UJe5vbUmjgTQKuWSr7lFnzZHR0CLuwDSRhNJ4CbtC0noMe8HSfBF0QeS8KeGfaQCH6u2kQoNd9hFKjhgZhOp8JBrfqQYG1EkhUF7W0hK0z52kBQnDm0gKU894yMBLF7ARgJZ/oKLBLSAChMJbAkeHlL9w4H3KWGUc57/aDX3lH7q/l8geehBeEUgAhGIQAQiEIEI9K/1APdX1qz3Plq4AAAAAElFTkSuQmCC",y="iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAYAAAATBx+NAAABJmlDQ1BBZG9iZSBSR0IgKDE5OTgpAAAoz2NgYDJwdHFyZRJgYMjNKykKcndSiIiMUmA/z8DGwMwABonJxQWOAQE+IHZefl4qAwb4do2BEURf1gWZxUAa4EouKCoB0n+A2CgltTiZgYHRAMjOLi8pAIozzgGyRZKywewNIHZRSJAzkH0EyOZLh7CvgNhJEPYTELsI6Akg+wtIfTqYzcQBNgfClgGxS1IrQPYyOOcXVBZlpmeUKBhaWloqOKbkJ6UqBFcWl6TmFit45iXnFxXkFyWWpKYA1ULcBwaCEIWgENMAarTQZKAyAMUDhPU5EBy+jGJnEGIIkFxaVAZlMjIZE+YjzJgjwcDgv5SBgeUPQsykl4FhgQ4DA/9UhJiaIQODgD4Dw745AMDGT/0ZOjZcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMKmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNi0wNFQxMToyMjo0NyswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDYtMDRUMTE6MjI6NDcrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBmM2U0Y2VhLTQ2NDEtNDhhYS04N2I2LWMxYjRlZTJkOWE5NCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBjYzc0NDRhLWE1ZDUtNmY0NC05NjdjLWU4YWRlZmI2MTYzOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkFkb2JlIFJHQiAoMTk5OCkiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTliODFjZC00NzM3LTRmYzAtYWIwYi1jMGY2YzgwNzk1ODkiIHN0RXZ0OndoZW49IjIwMTgtMDYtMDRUMTE6MjI6NDcrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGYzZTRjZWEtNDY0MS00OGFhLTg3YjYtYzFiNGVlMmQ5YTk0IiBzdEV2dDp3aGVuPSIyMDE4LTA2LTA0VDExOjIyOjQ3KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5OWI4MWNkLTQ3MzctNGZjMC1hYjBiLWMwZjZjODA3OTU4OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiLz4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgV2hpdGUiIHBob3Rvc2hvcDpMYXllclRleHQ9Ij0iLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgcmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI9Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI5Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjkiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTa2lwIEZ3ZCB3aGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iOiIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlNraXAgRndkIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjoiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJQbGF5IFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI0Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGxheSBHcmVlbiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iNCIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlBhdXNlIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGF1c2UgWWVsbG93IiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU3RvcCBXaGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iJmx0OyIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlN0b3AgUmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSImbHQ7Ii8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4n7NdoAAAAb0lEQVR42u3aMQ0AIADEwPevEbQ8GGAGkhtq4OambXQOAiBAgAABAgQIkAABeh1oJHPXy01AgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAmTB8ygCAgQIECABAgQIEKAvWz9emwZhCZEoAAAAAElFTkSuQmCC",w="iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAYAAAATBx+NAAABJmlDQ1BBZG9iZSBSR0IgKDE5OTgpAAAoz2NgYDJwdHFyZRJgYMjNKykKcndSiIiMUmA/z8DGwMwABonJxQWOAQE+IHZefl4qAwb4do2BEURf1gWZxUAa4EouKCoB0n+A2CgltTiZgYHRAMjOLi8pAIozzgGyRZKywewNIHZRSJAzkH0EyOZLh7CvgNhJEPYTELsI6Akg+wtIfTqYzcQBNgfClgGxS1IrQPYyOOcXVBZlpmeUKBhaWloqOKbkJ6UqBFcWl6TmFit45iXnFxXkFyWWpKYA1ULcBwaCEIWgENMAarTQZKAyAMUDhPU5EBy+jGJnEGIIkFxaVAZlMjIZE+YjzJgjwcDgv5SBgeUPQsykl4FhgQ4DA/9UhJiaIQODgD4Dw745AMDGT/0ZOjZcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMKmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNi0wNFQxMToyMjoxOSswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDYtMDRUMTE6MjI6MTkrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmRkZDAxZWNjLTZjMzItNGZjMi04YzgxLTMwM2Y2Y2M5MzVhNCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjEwOTEyZDk3LWI1MWEtOWI0Ny05YWRkLWQ0MGNmM2Y0NDFkYyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkFkb2JlIFJHQiAoMTk5OCkiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplOGIyZmYzNC0xNmFmLTQ5MzItYjE1Yy1kMmZlNDE3Y2EyOTkiIHN0RXZ0OndoZW49IjIwMTgtMDYtMDRUMTE6MjI6MTkrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZGRkMDFlY2MtNmMzMi00ZmMyLThjODEtMzAzZjZjYzkzNWE0IiBzdEV2dDp3aGVuPSIyMDE4LTA2LTA0VDExOjIyOjE5KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmU4YjJmZjM0LTE2YWYtNDkzMi1iMTVjLWQyZmU0MTdjYTI5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiLz4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgV2hpdGUiIHBob3Rvc2hvcDpMYXllclRleHQ9Ij0iLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgcmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI9Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI5Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjkiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTa2lwIEZ3ZCB3aGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iOiIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlNraXAgRndkIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjoiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJQbGF5IFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI0Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGxheSBHcmVlbiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iNCIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlBhdXNlIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGF1c2UgWWVsbG93IiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU3RvcCBXaGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iJmx0OyIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlN0b3AgUmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSImbHQ7Ii8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4GJG/aAAAAeElEQVR42u3aMQ0AIAxFwarFE94QgYOCAVImFq7JWzvc/CMzQ+cgAAIECBAgQIAA6S3QHNF2WdSjuNs/gAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACZAQsQIECAAAECBOjzFkEkVRGHBIsZAAAAAElFTkSuQmCC",v="iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAYAAAATBx+NAAABJmlDQ1BBZG9iZSBSR0IgKDE5OTgpAAAoz2NgYDJwdHFyZRJgYMjNKykKcndSiIiMUmA/z8DGwMwABonJxQWOAQE+IHZefl4qAwb4do2BEURf1gWZxUAa4EouKCoB0n+A2CgltTiZgYHRAMjOLi8pAIozzgGyRZKywewNIHZRSJAzkH0EyOZLh7CvgNhJEPYTELsI6Akg+wtIfTqYzcQBNgfClgGxS1IrQPYyOOcXVBZlpmeUKBhaWloqOKbkJ6UqBFcWl6TmFit45iXnFxXkFyWWpKYA1ULcBwaCEIWgENMAarTQZKAyAMUDhPU5EBy+jGJnEGIIkFxaVAZlMjIZE+YjzJgjwcDgv5SBgeUPQsykl4FhgQ4DA/9UhJiaIQODgD4Dw745AMDGT/0ZOjZcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMKmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNi0wNFQxMToyMTo0NSswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDYtMDRUMTE6MjE6NDUrMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRmZWVhMGMzLTU1NjQtNDBkNi04NTFhLTJhOThmYjY3OTQ3ZSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjJlOGYwNzIzLTJmNTktOWY0Ny1hNDA0LTBhYTk5MmI4OTA5MiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkFkb2JlIFJHQiAoMTk5OCkiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmNlZDYyMWNiLTU3MmItNGMyZS1hYTU4LTUwYTJiN2YwYzNjZCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0wNFQwMDowNzoyNSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphMzAxMDE1Mi1mNDc5LTQzMmItYjdlYi1iZmYxOGU4ZWZlN2IiIHN0RXZ0OndoZW49IjIwMTgtMDYtMDRUMTE6MjE6NDUrMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGZlZWEwYzMtNTU2NC00MGQ2LTg1MWEtMmE5OGZiNjc5NDdlIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTA0VDExOjIxOjQ1KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmEzMDEwMTUyLWY0NzktNDMyYi1iN2ViLWJmZjE4ZThlZmU3YiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWQ2MjFjYi01NzJiLTRjMmUtYWE1OC01MGEyYjdmMGMzY2QiLz4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgV2hpdGUiIHBob3Rvc2hvcDpMYXllclRleHQ9Ij0iLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJSZWMgcmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI9Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI5Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU2tpcCBCYWNrIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjkiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTa2lwIEZ3ZCB3aGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iOiIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlNraXAgRndkIEJsdWUiIHBob3Rvc2hvcDpMYXllclRleHQ9IjoiLz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJQbGF5IFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI0Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGxheSBHcmVlbiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iNCIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlBhdXNlIFdoaXRlIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iUGF1c2UgWWVsbG93IiBwaG90b3Nob3A6TGF5ZXJUZXh0PSI7Ii8+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iU3RvcCBXaGl0ZSIgcGhvdG9zaG9wOkxheWVyVGV4dD0iJmx0OyIvPiA8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IlN0b3AgUmVkIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSImbHQ7Ii8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6vUl74AAAA8ElEQVR42u3bSw3CQBQF0FqoBSxgAQu1gIVawAIWagELSAALWHgMTbtownwIK8ghuRu6IDkJc9uZ1y4iOskHAiBAgAABWn7s1o0p/ea7Lz//BnRJuafsAOWBIuWRcgCUB1ozACoDxbwuASoCvTIBKgPFcq0HlAeKteEAlTM3HKB6BkD1jIDqmQDVc801HKBtw+0BfdhwgN7nCKieE6CGhgPU2HCAGhoOUEPDAWpoOEANDQeonDMgfzGLtJp3o+hRw8Oq7Q4bZrZcAdm0d+zj4NDRs+EF4y8GqIzgGeI0BgzIILlXEbzMIoAAAQIE6DfyBIZxyJlmS8HgAAAAAElFTkSuQmCC";function I(e){const t=e>>16,i=e>>8&255,s=255&e;return Math.sqrt(t*t*.299+i*i*.587+s*s*.114)>127.5?0:16777215}const _=[function(e,t){const i={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};for(let e of t.actions)"autoLoad"==e.actionId&&1==e.options.autoId&&(e.actionId="autoload",i.updatedActions.push(e)),"flagged"==e.actionId&&e.options.flaggId&&(e.options.flagId=e.options.flaggId,delete e.options.flaggId,i.updatedActions.push(e));return t.config&&null==t.config.useTenths&&(t.config.useTenths=!1,i.updatedConfig=t.config),i},(0,t.CreateConvertToBooleanFeedbackUpgradeScript)({q_run:!0,min_go:!0,ws_mode:!0,override:!0}),function(e,t){const i={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};for(let e of t.actions)"flagged"==e.actionId&&e.options.flaggId&&(e.options.flagId=e.options.flaggId,delete e.options.flaggId,i.updatedActions.push(e));return i},function(e,t){const i={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.config&&(null==t.config.port&&(t.config.port="53000",i.updatedConfig=t.config),null==t.config.cuelist&&(t.config.cuelist="default",i.updatedConfig=t.config)),i}],C=class{uniqueID="";qName="[none]";qNumber="";qType=null;qMode=null;isLoaded=!1;isBroken=!1;isRunning=!1;isPaused=!1;isArmed=!1;isFlagged=!1;isAuditioning=!1;isSelected=!1;continueMode=0;infiniteLoop=!1;holdLastFrame=!1;autoLoad=!1;duration=0;pctElapsed=0;elapsed=0;preWait=0;postWait=0;elapsed=0;startedAt=-1;qColor=0;qColorName="";qOrder=-1;qParent="";qList="";Notes="";constructor(e,t){null!=e&&function(e,t,i){e.uniqueID=t.uniqueID,e.qName=""==t.listName?"[none]":t.listName,e.qNumber=t.number,e.qColorName=t.colorName,e.qType=t.type.toLowerCase(),e.qMode=t.mode,e.isRunning=t.isRunning,e.isAuditioning=t.isAuditioning,e.isLoaded=t.isLoaded,e.isBroken=t.isBroken,e.isPaused=t.isPaused,e.isFlagged=t.flagged,e.isArmed=t.armed,e.autoLoad=t.autoLoad,e.continueMode=t.continueMode,e.infiniteLoop=t.infiniteLoop,e.holdLastFrame=t.holdLastFrame,e.duration=t.duration,e.qParent=t.parent,e.pctElapsed=t.percentActionElapsed,e.elapsed=t.actionElapsed,e.preWait=t.preWait,e.postWait=t.postWait,t.notes&&(e.Notes=t.notes.slice(0,20)),e.qColor=s[t.colorName.toLowerCase().replaceAll(" ","")];const r=e.uniqueID in i.wsCues;r&&(e.qOrder=i.wsCues[e.uniqueID].qOrder,e.isSelected=i.wsCues[e.uniqueID].isSelected),e.isRunning||e.isPaused?r?0==(e.startedAt=i.wsCues[e.uniqueID].startedAt)&&(e.startedAt=Date.now()):e.startedAt=Date.now():e.startedAt=0}(this,e,t)}},k=class{uniqueID="";version="";displayName="Untitled Workspace";hasPasscode=null;udpReplyPort=53001;port=53e3;connected=!1;constructor(e){e&&Object.assign(this,e);const t=this.displayName;this.displayName=`${t}.`.split(".")[0]}};class S extends t.InstanceBase{qCueRequest=[{type:"s",value:'["number","uniqueID","listName","type","mode","isPaused","duration","actionElapsed", "preWait", "postWait","parent","flagged","notes","autoLoad","colorName","isRunning","isAuditioning","isLoaded","armed","isBroken","continueMode","percentActionElapsed","cartPosition","infiniteLoop","holdLastFrame"]'}];fb2check=["q_run","qid_run","any_run","q_armed","q_bg","qid_bg","q_flagged","q_paused"];otherVars={name:{desc:"Name",id:"qName",type:"s"},elapsed:{desc:"Elapsed time",id:"elapsed",type:"n"},id:{desc:"Unique ID",id:"uniqueID",type:"s"},num:{desc:"Cue Number",id:"qNumber",type:"s"}};qTypes=["audio","mic","video","camera","text","light","fade","network","midi","midi file","timecode","group","start","stop","pause","load","reset","devamp","goto","target","cart","cue list","arm","disarm","wait","memo","script"];cueListActions=["go","next","panic","panicInTime","previous","reset","stop","togglePause"];constructor(e){super(e),this.instanceOptions.disableVariableValidation=!0,this.connecting=!1,this.needPasscode=!1,this.passcodeOK=!1,this.useTCP=!1,this.qVer=5,this.phID="ID",this.hasError=!1,this.disabled=!0,this.pollCount=0,this.wrongPasscode="",this.loggedErrors=[],this.debugLevel=process.env.DEVELOPER?2:0,this.resetVars()}logError(e){"/showMode"==e||this.loggedErrors.includes(e)||(this.log("info",`Address "${e}" returned an error`),this.loggedErrors.push(e),this.setVariableValues({errs:this.loggedErrors.length}))}applyConfig(e){let t=e.workspace||"default",i=e.cuelist||"default";null==e.cuelist&&(e.cuelist=i),null==e.workspace&&(e.workspace=t),this.ws=""!==t&&"default"!==t?"/workspace/"+t:"",this.cl=""!==i&&"default"!==i?i:"",null==e.useTCP&&(e.useTCP=!0),this.useTCP=e.useTCP,this.exposeVariables=e.exposeVariables||!1}resetVars(e=!1){this.nextCue="",this.runningCue=new C,e&&this.useTCP&&this.init_variables(),this.needWorkspace=!0,this.needPasscode=!1,this.passcodeOK=!1,this.wsCues={},this.cueColors={},this.cueOrder=[],this.cueByNum={},this.cueList={},this.wsList={},this.requestedCues={},this.overrides={},this.lastRunID="-"+this.lastRunID,this.showMode=!1,this.liveFadePreview=!1,this.audition=!1,this.goDisabled=!1,this.goAfter=0,this.minGo=0,this.checkFeedbacks(),this.updateQVars(),this.updateNextCue(),this.updatePlaying(),this.wrongPasscode="",this.wrongPasscodeAt=0,this.loggedErrors=[],this.selectedCues=[]}updateNextCue(){const e=this.wsCues[this.nextCue]||new C;this.setVariableValues({n_id:e.uniqueID,n_name:e.qName,n_num:e.qNumber,n_type:e.qType,n_notes:e.Notes,n_stat:b(e),n_preWait:e.preWait,n_postWait:e.postWait,n_elapsed:e.elapsed,n_cont:["NoC","Con","Fol"][e.continueMode]}),this.checkFeedbacks("playhead_bg")}updateQVars(e){const t=(e=e||new C).uniqueID,i=f(e.qNumber),s=e.qName,r=(e.qType,e.qColor),n=e.elapsed;e.isSelected;let o=null,a=null,c=null,l=0,u=-1,d=0,h=!1,p={},b=[],m=[];const g=this.wsCues[t];if(g?.qNumber&&(o=f(g.qNumber),a=g.qName,g.qType,l=g.qColor,g.qOrder,d=g.elapsed,g.isSelected,""!=o&&o!=i)){let e=`q_${o}_name`;p[e]=void 0,m.push(e),this.cueColors[o]=0,delete this.cueByNum[o],a=""}if(""!=t&&(s!=a||r!=l||n!=d)){e.isPaused&&(e.elapsed=Math.max(e.elapsed,d||0),e.pctElapsed=Math.max(e.pctElapsed,g.pctElapsed?g.pctElapsed:0));for(const[s,r]of Object.entries(this.otherVars)){if(""!=i&&"num"!=s){let n=`q_${i}_${s}`;p[n]=e[r.id]||("s"==r.type?"":0),b.push({variableId:n,name:`${r.desc} of cue number '${i}'`}),this.cueColors[i]=e.qColor,this.cueByNum[i]=t}if("id"!=s){let i=`id_${t}_${s}`;p[i]=e[r.id]||("s"==r.type?"":0),b.push({variableId:i,name:`${r.desc} of cue ID '${t}'`})}}this.checkFeedbacks(this.fb2check)}this.exposeVariables&&b.length&&(this.variableDefs.filter((e=>!m.includes(e))),this.variableDefs=[...this.variableDefs,...b],this.setVariableDefinitions(this.variableDefs)),this.setVariableValues(p)}updateRunning(){const e=this.config.useTenths?0:1,t=this.runningCue,i=t.duration*t.pctElapsed,s=h(Math.floor(i/3600)),r=h(Math.floor(i/60)%60),n=h(Math.floor(i%60));let o="";s>0&&(o=s+":"),r>0&&(o=o+r+":"),o+=n;let a=t.duration-i;a>0&&(a+=e);const c=h(Math.floor(a/3600)),l=h(Math.floor(a/60)%60),u=h(Math.floor(a%60));let d="";if(c>0&&(d=c+":"),l>0&&(d=d+l+":"),d+=u,0==e){const e=h(Math.floor(10*(a-Math.trunc(a))),1);a<5&&0!=a&&(d=d.slice(-1)+"."+e)}this.setVariableValues({r_id:t.uniqueID,r_name:t.qName,r_num:t.qNumber,r_notes:t.Notes,r_stat:b(t),r_hhmmss:c+":"+l+":"+u,r_hh:c,r_mm:l,r_ss:u,r_left:d,r_secs:a,e_hhmmss:s+":"+r+":"+n,e_hh:s,e_mm:r,e_ss:n,e_time:o,e_secs:i,e_total:t.elapsed}),this.checkFeedbacks("run_bg","any_run")}async configUpdated(e){this.config=e,this.applyConfig(e),this.resetVars(),this.init_osc(),this.init_actions(),this.init_presets(),this.init_variables(),this.init_feedbacks()}async init(e){this.config=e,this.disabled=!1,this.updateStatus(t.InstanceStatus.Connecting),await this.configUpdated(e)}init_actions(){this.setActionDefinitions(function(e){const i=e.sendCommand,s=async(e,t)=>{let i=await t.parseVariablesInString(e.options.time);return i=parseFloat(i),{type:i.isInteger?"i":"f",value:i}},h=(e,t)=>{const i=parseInt(+t);return 2===i?1-parseInt(+e):i};return{go:{name:"GO",options:[],callback:async(e,t)=>{await i(e,"/go")}},audition_go:{name:"Audition GO",description:"QLab 5 ONLY",options:[],callback:async(e,t)=>{await i(e,"/auditionGo")}},stop:{name:"Stop",options:[],callback:async(e,t)=>{await i(e,"/stop")}},new_Go:{name:"Go Cue(s)",description:"GO with optional cue selection",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(e,t)=>{const s=e.options;let r="";switch(s.scope){case"S":r="/cue/selected";break;case"N":r=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":r=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}await i(e,r+"/go")}},new_auditGo:{name:"Audition Cue(s)",description:"Audition with optional cue selection. QLab5 only",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(e,t)=>{const s=e.options;let r="";switch(s.scope){case"S":r="/cue/selected";break;case"N":r=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":r=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}await i(e,r+"/auditionGo")}},new_stop:{name:"Stop Cue(s)",description:"Stop with optional cue selection",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(e,t)=>{const s=e.options;let r="";switch(s.scope){case"S":r="/cue/selected";break;case"N":r=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":r=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}await i(e,r+"/stop")}},new_loadAt:{name:"Load Cue(s) At",description:"Load to Time with optional cue selection",options:[{type:"dropdown",label:"Mode",id:"mode",default:"S",choices:o},{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope},{type:"textinput",label:"Hour",id:"hh",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Minute",id:"mm",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Seconds",id:"ss",default:0,useVariables:!0,regex:t.Regex.SIGNED_FLOAT}],callback:async(e,t)=>{const s=e.options,r=s.scope;let n="",o="D"==s.mode?"/-":"I"==s.mode?"/+":"";switch(r){case"S":n="/cue/selected";break;case"N":n=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":n=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}let a=parseFloat(await t.parseVariablesInString(s.ss)),c=[];if("S"===s.mode){let e=parseInt(await t.parseVariablesInString(s.hh)),i=parseInt(await t.parseVariablesInString(s.mm));Math.abs(e)+Math.abs(i)>0&&(c.push({type:"i",value:e}),c.push({type:"i",value:i}))}c.push({type:"f",value:a}),await i(e,n+"/loadAt"+o,c)}},select:{name:"Select Cue",description:"Sets the Selection to a Cue(id)",options:[{type:"dropdown",label:"Scope",id:"scope",default:"N",choices:[{id:"N",label:"Cue Number"},{id:"I",label:"Cue ID"}]},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(e,t)=>{const s=e.options;let r="";switch(s.scope){case"N":r=`/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":r=`_id/${await t.parseVariablesInString(s.q_id.trim())}`}await i(e,"/select"+r)}},add_slice:{name:"Add Slice",options:[],callback:async(e,t)=>{await i(e,"/cue/selected/addSliceMarker")}},previous:{name:"Previous Cue",options:[],callback:async(e,t)=>{await i(e,"/playhead/previous")}},next:{name:"Next Cue",options:[],callback:async(e,t)=>{await i(e,"/playhead/next")}},pause:{name:"Pause",options:[],callback:async(e,t)=>{await i(e,"/pause")}},resume:{name:"Resume",options:[],callback:async(e,t)=>{await i(e,"/resume")}},togglePause:{name:"Toggle Pause",options:[],callback:async(e,t)=>{await i(e,"/cue/selected/togglePause")}},new_togglePause:{name:"Pause/Resume toggle with optional Cue selection",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:c},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(t,s)=>{const r=t.options;let n="",o="";switch(r.scope){case"D":o="/cue/playhead/",n=e.wsCues[e.nextCue]?.isPaused?"resume":"pause";break;case"R":e.runningCue,n=e.runningCue.isPaused?"resume":"pause",o="/cue/active/";break;case"N":let t=await s.parseVariablesInString(r.q_num.trim());o=`/cue/${t}/`,n=e.wsCues[e.cueByNum[t]].isPaused?"resume":"pause";break;case"I":let i=await s.parseVariablesInString(r.q_id.trim());o=`/cue_id/${i}/`,n=e.wsCues[i].isPaused?"resume":"pause"}await i(t,o+n)}},stopSelected:{name:"Stop selected",options:[],callback:async(e,t)=>{await i(e,"/cue/selected/stop")}},new_panic:{name:"Panic Cue(s)",description:"Panic cues, with optional time override",options:[{type:"dropdown",label:"Workspace",id:"ws",default:"",useVariables:!0,choices:[{id:"",label:"Default"},...Object.keys(e.wsList).reduce(((t,i)=>(t.push({id:i,label:e.wsList[i].displayName+` (${i})`}),t)),[])]},{type:"dropdown",label:"Cue List",id:"cl",default:"",useVariables:!0,choices:[{id:"",label:"Default"},...Object.keys(e.cueList).reduce(((t,i)=>(t.push({id:i,label:e.wsCues[i].qName+` (${i})`}),t)),[])]},{type:"checkbox",label:"Custom Time?",id:"myTime",default:!1},{type:"textinput",tooltip:"Panic/Fade time in seconds, can be fractional",label:"Time (in Seconds)",id:"time",default:1,useVariables:!0,isVisible:(e,t)=>e.myTime},{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:l},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(e,t)=>{const r=e.options,n=r.scope,o=""==r.ws?"":await t.parseVariablesInString(r.ws),a=""==r.cl?"":await t.parseVariablesInString(r.cl),c=""==r.myTime?[]:await s(e,t);let l="/panic"+(r.myTime?"InTime":""),u="";switch(n){case"S":u="/cue/selected";break;case"N":u=`/cue/${await t.parseVariablesInString(r.q_num.trim())}`;break;case"I":u=`/cue_id/${await t.parseVariablesInString(r.q_id.trim())}`}""!=a&&(u=`/cue_id/${a}`+u),""!=o&&(u=`/workspace/${o}`+u),await i(e,u+l,c,!0)}},panic:{name:"Panic (ALL)",options:[],callback:async(e,t)=>{await i(e,"/panic")}},panicInTime:{name:"Panic (ALL) In Time",options:[{type:"textinput",label:"Time in Seconds",id:"time",default:0,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/panicInTime",r)}},reset:{name:"Reset",options:[],callback:async(e,t)=>{await i(e,"/reset")}},load:{name:"Load Cue",options:[],callback:async(e,t)=>{await i(e,"/cue/selected/load")}},preview:{name:"Preview",options:[],callback:async(e,t)=>{await i(e,"/cue/selected/preview")}},audition_preview:{name:"Audition Preview",description:"QLab5 ONLY",options:[],callback:async(e,t)=>{await i(e,"/cue/selected/auditionPreview")}},goto:{name:"Go To (cue)",options:[{type:"textinput",label:"Cue",id:"cue",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cue);await i(e,"/playhead/"+s)}},start:{name:"Start (cue)",options:[{type:"textinput",label:"Cue",id:"cue",default:"1",useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cue);await i(e,"/cue/"+s+"/start")}},stop_cue:{name:"Stop (cue)",options:[{type:"textinput",label:"Cue",id:"cue",default:"1",useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cue);await i(e,"/cue/"+s+"/stop")}},panic_cue:{name:"Panic (Cue)",options:[{type:"textinput",label:"Cue",id:"cue",useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cue);await i(e,"/cue/"+s+"/panic")}},panicInTime_cue:{name:"Panic (Cue) In Time",options:[{type:"textinput",label:"Cue",id:"cue",useVariables:!0},{type:"textinput",label:"Time in Seconds",id:"time",default:0,useVariables:!0}],callback:async(e,t)=>{const r=await t.parseVariablesInString(e.options.cue),n=await s(e,t);await i(e,"/cue/"+r+"/panicInTime",n)}},audition_go_cue:{name:"Audition Cue",description:"QLab5 ONLY",options:[{type:"textinput",label:"Cue",id:"cue",default:"1",useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cue);await i(e,"/cue/"+s+"/audition")}},audition_go_id:{name:"Audition Cue ID",description:"QLab5 ONLY",options:[{type:"textinput",label:"Cue",id:"cueId",default:"1",useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cueId);await i(e,"/cue_id/"+s+"/audition")}},goto_id:{name:"Goto (Cue ID)",options:[{type:"textinput",label:"Cue ID",id:"cueId",default:e.nextCue,useVariables:!0}],callback:async(t,s)=>{const r=await s.parseVariablesInString(t.options.cueId),n=e.qVer<5?"Id":"ID";await i(t,`/playhead${n}/`+r)}},start_id:{name:"Start (Cue ID)",options:[{type:"textinput",label:"Cue ID",id:"cueId",default:e.nextCue,useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cueId);await i(e,"/cue_id/"+s+"/start")}},stop_id:{name:"Stop (Cue ID)",options:[{type:"textinput",label:"Cue ID",id:"cueId",default:e.nextCue,useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cueId);await i(e,"/cue_id/"+s+"/stop")}},panic_id:{name:"Panic (Cue ID)",options:[{type:"textinput",label:"Cue ID",id:"cueId",default:e.nextCue,useVariables:!0}],callback:async(e,t)=>{const s=await t.parseVariablesInString(e.options.cueId);await i(e,"/cue_id/"+s+"/panic")}},panicInTime_id:{name:"Panic (Cue ID) In Time",options:[{type:"textinput",label:"Cue ID",id:"cueId",default:e.nextCue,useVariables:!0},{type:"textinput",label:"Time in Seconds",id:"time",default:0,useVariables:!0}],callback:async(e,t)=>{const r=await t.parseVariablesInString(e.options.cueId),n=await s(e,t);await i(e,"/cue_id/"+r+"/panicInTime",n)}},liveFadePreview:{name:"Live Fade Preview mode",options:[{type:"dropdown",label:"Mode",id:"onOff",default:1,choices:u}],callback:async(t,s)=>{await i(t,"/liveFadePreview",{type:"i",value:h(e.liveFadePreview,t.options.onOff)})}},showMode:{name:"Show mode",options:[{type:"dropdown",label:"Mode",id:"onOff",default:1,choices:u}],callback:async(t,s)=>{await i(t,"/showMode",{type:"i",value:h(e.showMode,t.options.onOff)})}},auditMode:{name:"Audition",description:"QLab 5 sets 'Always Audition' mode\nOtherwise Show/Hide 'Audition Window'",options:[{type:"dropdown",label:"Mode",id:"onOff",default:1,choices:u}],callback:async(t,s)=>{const r=e.qVer<5?"/auditionWindow":"/alwaysAudition";await i(t,r,{type:"i",value:h(e.auditMode,t.options.onOff)})}},auditWindows:{name:"Audition Monitors",description:"QLab 5 only, open/close ALL audition monitors",options:[{type:"dropdown",label:"Mode",id:"onOff",default:1,choices:u}],callback:async(t,s)=>{await i(t,"/auditionMonitors",{type:"i",value:h(e.auditMonitors,t.options.onOff)})}},overrideWindow:{name:"Override Controls Window",options:[{type:"dropdown",label:"Mode",id:"onOff",default:1,choices:u}],callback:async(t,s)=>{await i(t,"/overrideWindow",{type:"i",value:h(e.overrideWindow,t.options.onOff)})}},overrides:{name:"Master Override",options:[{type:"dropdown",label:"Override",id:"which",default:d[0].id,choices:d},{type:"dropdown",label:"Mode",id:"onOff",default:1,choices:u}],callback:async(t,s)=>{await i(t,"/overrides/"+t.options.which,{type:"i",value:h(e.overrides[t.options.which],t.options.onOff)})}},minGo:{name:"Minimum Go",options:[{type:"textinput",tooltip:"Double Go Protection Time",label:"Time in Seconds",id:"time",default:0,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/settings/general/minGoTime",r)}},cue_name:{name:"Set Cue Name",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope},{type:"textinput",label:"Name",id:"q_name",ueVariables:!0}],callback:async(e,t)=>{const s=e.options,r=s.scope;let n=await t.parseVariablesInString(s.q_name.trim()),o="";switch(r){case"S":o="/cue/selected";break;case"N":o=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":o=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}await i(e,o+"/name",{type:"s",value:n})}},new_prewait:{name:"Adjust Pre wait",description:"Set/Adjust Prewait time",options:[{type:"dropdown",label:"Mode",id:"mode",default:"S",choices:o},{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope},{type:"textinput",label:"Hour",id:"hh",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Minute",id:"mm",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Seconds",id:"ss",default:0,useVariables:!0,regex:t.Regex.SIGNED_FLOAT}],callback:async(e,t)=>{const s=e.options,r=s.scope;let n="",o="D"==s.mode?"/-":"I"==s.mode?"/+":"";switch(r){case"S":n="/cue/selected";break;case"N":n=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":n=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}let a=parseFloat(await t.parseVariablesInString(s.ss)),c=[];if("S"===s.mode){let e=parseInt(await t.parseVariablesInString(s.hh)),i=parseInt(await t.parseVariablesInString(s.mm));Math.abs(e)+Math.abs(i)>0&&(c.push({type:"i",value:e}),c.push({type:"i",value:i}))}c.push({type:"f",value:a}),await i(e,n+"/preWait"+o,c)}},new_duration:{name:"Adjust Duration",description:"Set/Adjust Duration time",options:[{type:"dropdown",label:"Mode",id:"mode",default:"S",choices:o},{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope},{type:"textinput",label:"Hour",id:"hh",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Minute",id:"mm",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Seconds",id:"ss",default:0,useVariables:!0,regex:t.Regex.SIGNED_FLOAT}],callback:async(e,t)=>{const s=e.options,r=s.scope;let n="",o="D"==s.mode?"/-":"I"==s.mode?"/+":"";switch(r){case"S":n="/cue/selected";break;case"N":n=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":n=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}let a=parseFloat(await t.parseVariablesInString(s.ss)),c=[];if("S"===s.mode){let e=parseInt(await t.parseVariablesInString(s.hh)),i=parseInt(await t.parseVariablesInString(s.mm));Math.abs(e)+Math.abs(i)>0&&(c.push({type:"i",value:e}),c.push({type:"i",value:i}))}c.push({type:"f",value:a}),await i(e,n+"/duration"+o,c)}},new_postwait:{name:"Adjust Post wait",description:"Set/Adjust Postwait time",options:[{type:"dropdown",label:"Mode",id:"mode",default:"S",choices:o},{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope},{type:"textinput",label:"Hour",id:"hh",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Minute",id:"mm",length:2,default:0,useVariables:!0,regex:t.Regex.NUMBER,isVisible:(e,t)=>"S"===e.mode},{type:"textinput",label:"Seconds",id:"ss",default:0,useVariables:!0,regex:t.Regex.SIGNED_FLOAT}],callback:async(e,t)=>{const s=e.options,r=s.scope;let n="",o="D"==s.mode?"/-":"I"==s.mode?"/+":"";switch(r){case"S":n="/cue/selected";break;case"N":n=`/cue/${await t.parseVariablesInString(s.q_num.trim())}`;break;case"I":n=`/cue_id/${await t.parseVariablesInString(s.q_id.trim())}`}let a=parseFloat(await t.parseVariablesInString(s.ss)),c=[];if("S"===s.mode){let e=parseInt(await t.parseVariablesInString(s.hh)),i=parseInt(await t.parseVariablesInString(s.mm));Math.abs(e)+Math.abs(i)>0&&(c.push({type:"i",value:e}),c.push({type:"i",value:i}))}c.push({type:"f",value:a}),await i(e,n+"/postWait"+o,c)}},prewait_dec:{name:"Decrease Prewait",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/preWait/-",r)}},prewait_inc:{name:"Increase Prewait",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/preWait/+",r)}},postwait_dec:{name:"Decrease Postwait",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/postWait/-",r)}},postwait_inc:{name:"Increase Postwait",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/postWait/+",r)}},duration_dec:{name:"Decrease Duration",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/duration/-",r)}},duration_inc:{name:"Increase Duration",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/duration/+",r)}},startTime_dec:{name:"Decrease Start Time",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/startTime/-",r)}},startTime_inc:{name:"Increase Start Time",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/startTime/+",r)}},endTime_dec:{name:"Decrease End Time",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/endTime/-",r)}},endTime_inc:{name:"Increase End Time",options:[{type:"textinput",label:"Time in seconds",id:"time",default:1,useVariables:!0}],callback:async(e,t)=>{const r=await s(e,t);await i(e,"/cue/selected/endTime/+",r)}},continue:{name:"Set Continue Mode",options:[{type:"dropdown",label:"Continue Mode",id:"contId",choices:n}],callback:async(e,t)=>{await i(e,"/cue/selected/continueMode",{type:"i",value:parseInt(e.options.contId)})}},arm:{name:"Arm Cue",options:[{type:"dropdown",label:"Arm",id:"armId",default:1,choices:u}],callback:async(t,s)=>{const r=e.wsCues[e.nextCue];r&&(await i(t,"/cue/selected/armed",{type:"i",value:h(r.isArmed,t.options.armId)}),await i(t,"/cue_id/selected/armed",[]))}},new_arm:{name:"Arm Cue(s)",description:"Arm with optional cue selection",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"dropdown",label:"Arm",id:"tog",default:1,choices:u},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(t,s)=>{const r=t.options,n=r.scope;let o="/armed",a=r.tog,c="",l=-1;try{switch(n){case"S":c="/cue/selected",l=h(e.wsCues[e.selectedCues[0]].isArmed,a);break;case"N":let t=await s.parseVariablesInString(r.q_num.trim());c=`/cue/${t}`,l=h(e.wsCues[e.cueByNum[f(t)]]?.isArmed,a);break;case"I":let i=await s.parseVariablesInString(r.q_id.trim());c=`/cue_id/${i}`,l=h(e.wsCues[i].isArmed,a);break;default:c="/cue/playhead",l=h(e.wsCues[e.nextCue]?.isArmed,a)}}catch{return}await i(t,c+o,{type:"i",value:l}),await i(t,c+o,[])}},new_flag:{name:"Flag Cue(s)",description:"Flag with optional cue selection",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:a},{type:"dropdown",label:"Flag",id:"tog",default:1,choices:u},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.qNumber,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.wsCues[e.nextCue]?.uniqueID,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],callback:async(t,s)=>{const r=t.options,n=r.scope;let o="/flagged",a=r.tog,c="",l=-1;try{switch(n){case"S":c="/cue/selected",l=h(e.wsCues[e.selectedCues[0]].isFlagged,a);break;case"N":let t=await s.parseVariablesInString(r.q_num.trim());c=`/cue/${t}`,l=h(e.wsCues[e.cueByNum[f(t)]]?.isFlagged,a);break;case"I":let i=await s.parseVariablesInString(r.q_id.trim());c=`/cue_id/${i}`,l=h(e.wsCues[i].isFlagged,a);break;default:c="/cue/playhead",l=h(e.wsCues[e.nextCue]?.isFlagged,a)}}catch{return}await i(t,c+o,{type:"i",value:l}),await i(t,c+o,[])}},autoload:{name:"Autoload Cue",options:[{type:"dropdown",label:"Autoload",id:"autoId",default:1,choices:u}],callback:async(t,s)=>{const r=e.wsCues[e.wsCues[e.selectedCues[0]]];r||await i(t,"/cue/selected/autoLoad",{type:"i",value:h(r.autoLoad,t.options.autoId)})}},flagged:{name:"Flag Cue",options:[{type:"dropdown",label:"Flagged",id:"flagId",default:1,choices:u}],callback:async(t,s)=>{const r=e.wsCues[e.selectedCues[0]];r&&await i(t,"/cue/selected/flagged",{type:"i",value:h(r.isFlagged,t.options.flagId)})}},cueColor:{name:"Set Selected Cue Color",options:[{type:"dropdown",label:"Color",id:"colorId",choices:r}],callback:async(e,t)=>{await i(e,"/cue/selected/colorName",{type:"s",value:""+e.options.colorId})}},infiniteLoop:{name:"Set selected to infinite loop",options:[{type:"dropdown",label:"on/off",id:"choice",default:1,choices:u}],callback:async(t,s)=>{const r=e.wsCues[e.selectedCues[0]];r||await i(t,"/cue/selected/infiniteLoop",{type:"i",value:h(r.infiniteLoop,t.options.choice)})}},holdLastFrame:{name:"Set selected to hold last frame",options:[{type:"dropdown",label:"on/off",id:"choice",default:1,choices:u}],callback:async(t,s)=>{const r=e.wsCues[e.selectedCues[0]];r||await i(t,"/cue/selected/holdLastFrame",{type:"i",value:h(r.holdLastFrame,t.options.choice)})}},manual:{name:"Send custom OSC command",description:"Please consider filing a feature request",options:[{type:"textinput",label:"OSC Address",id:"node",default:"",useVariables:!0},{type:"dropdown",label:"Argument Type",id:"argType",default:"n",choices:[{id:"n",label:"None"},{id:"s",label:"String"},{id:"i",label:"Integer"},{id:"f",label:"Float"}]},{type:"textinput",label:"String",id:"argS",default:"",useVariables:!0,isVisible:(e,t)=>"s"===e.argType},{type:"textinput",label:"Integer",id:"argI",default:0,useVariables:!0,isVisible:(e,t)=>"i"===e.argType},{type:"textinput",label:"Float",id:"argF",default:0,useVariables:!0,isVisible:(e,t)=>"f"===e.argType}],callback:async(e,t)=>{let s=[];const r="n"===e.options.argType?"":e.options.argType;switch(r){case"s":s={type:r,value:await t.parseVariablesInString(e.options.argS)};break;case"i":s={type:r,value:parseInt(await t.parseVariablesInString(e.options.argI))};break;case"f":s={type:r,value:parseFloat(await t.parseVariablesInString(e.options.argF))}}const n=await t.parseVariablesInString(e.options.node);await i(e,n,s)}},copyCueID:{name:"Copy Unique Cue ID",options:[],callback:async(t,i)=>{e.init_actions(),e.init_feedbacks()}}}}(this))}init_presets(){this.setPresetDefinitions(function(e){const i={};i["cuelist-go"]={type:"button",category:"CueList",name:"GO Action. Includes double-GO feedback.",style:{text:"",png64:v,pngalignment:"center:center",size:"18",color:(0,t.combineRgb)(255,255,255),bgcolor:0},steps:[{down:[{actionId:"go",options:{}}],up:[]}],feedbacks:[{feedbackId:"min_go",options:{goMode:1},style:{color:16777215,bgcolor:(0,t.combineRgb)(0,102,0)}},{feedbackId:"ws_mode",options:{showMode:2},style:{color:16777215,bgcolor:(0,t.combineRgb)(0,102,153)}},{feedbackId:"min_go",options:{goMode:0},style:{color:16777215,bgcolor:(0,t.combineRgb)(153,0,0)}}]},i["cuelist-pause-resume"]={type:"button",category:"CueList",name:"Pause Toggle",style:{text:"",png64:w,pngalignment:"center:center",size:"18",color:(0,t.combineRgb)(255,255,255),bgcolor:0},steps:[{down:[{actionId:"new_togglePause",options:{scope:"R"}}],up:[]}],feedbacks:[{feedbackId:"q_paused",options:{scope:"R"},style:{bgcolor:(0,t.combineRgb)(102,0,102),color:(0,t.combineRgb)(255,255,255)}}]},i["cuelist-pause"]={type:"button",category:"CueList",name:"Pause",style:{text:"Pause",size:"18",color:(0,t.combineRgb)(255,255,255),bgcolor:0},steps:[{down:[{actionId:"pause",options:{}}],up:[]}],feedbacks:[]},i["cuelist-resume"]={type:"button",category:"CueList",name:"Resume",style:{text:"Resume",size:"18",color:(0,t.combineRgb)(0,0,0),bgcolor:(0,t.combineRgb)(0,255,0)},steps:[{down:[{actionId:"resume",options:{}}],up:[]}],feedbacks:[]},i["cuelist-stop"]={type:"button",category:"CueList",name:"Stop",style:{text:"Stop",size:"30",color:"16777215",bgcolor:(0,t.combineRgb)(255,0,0)},steps:[{down:[{actionId:"stop",options:{}}],up:[]}],feedbacks:[]},i["cuelist-stop-selected"]={type:"button",category:"CueList",name:"Stop selected",style:{text:"Stop selected",size:"18",color:"16777215",bgcolor:(0,t.combineRgb)(255,0,0)},steps:[{down:[{actionId:"stopSelected",options:{}}],up:[]}],feedbacks:[]},i["cuelist-panic"]={type:"button",category:"CueList",name:"Panic",style:{text:"",png64:y,pngalignment:"center:center",size:"18",color:(0,t.combineRgb)(255,255,255),bgcolor:0},steps:[{down:[{actionId:"panic",options:{}}],up:[]}],feedbacks:[]},i["cuelist-reset"]={type:"button",category:"CueList",name:"Reset",style:{text:"Reset",size:"24",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"reset",options:{}}],up:[]}],feedbacks:[]},i["cuelist-preview"]={type:"button",category:"CueList",name:"Preview",style:{text:"Preview",size:"18",color:"16777215",bgcolor:(0,t.combineRgb)(0,128,0)},steps:[{down:[{actionId:"preview",options:{}}],up:[]}],feedbacks:[]},i["cuelist-previous-cue"]={type:"button",category:"CueList",name:"Previous Cue",style:{text:"",png64:g,pngalignment:"center:center",size:"18",color:(0,t.combineRgb)(255,255,255),bgcolor:0},steps:[{down:[{actionId:"previous",options:{}}],up:[]}],feedbacks:[]},i["cuelist-next-cue"]={type:"button",category:"CueList",name:"Next Cue",style:{text:"",png64:m,pngalignment:"center:center",size:"18",color:(0,t.combineRgb)(255,255,255),bgcolor:0},steps:[{down:[{actionId:"next",options:{}}],up:[]}],feedbacks:[]},i["cuelist-load-cue"]={type:"button",category:"CueList",name:"Load Cue",style:{text:"Load\\nCue",size:"24",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"load",options:{}}],up:[]}],feedbacks:[]},i["cuelist-show-mode"]={type:"button",category:"CueList",name:"Show Mode",style:{text:"Show\\nMode",size:"24",color:"16777215",bgcolor:(0,t.combineRgb)(0,128,0)},steps:[{down:[{actionId:"showMode",options:{onOff:"1"}}],up:[]}],feedbacks:[]},i["cuelist-edit-mode"]={type:"button",category:"CueList",name:"Edit Mode",style:{text:"Edit\\nMode",size:"24",color:"16777215",bgcolor:(0,t.combineRgb)(72,96,96)},steps:[{down:[{actionId:"showMode",options:{onOff:"0"}}],up:[]}],feedbacks:[]},i["cuelist-audition-on"]={type:"button",category:"CueList",name:"Audition ON",style:{text:"Audition\\nON",size:"18",color:"16777215",tooltip:"Opens the Audition Window",bgcolor:(0,t.combineRgb)(0,64,128)},steps:[{down:[{actionId:"auditMode",options:{onOff:"1"}}],up:[]}],feedbacks:[]},i["cuelist-audition-off"]={type:"button",category:"CueList",name:"Audition OFF",style:{text:"Audition\\nOFF",size:"18",color:"16777215",tooltip:"Closes the Audition Window",bgcolor:(0,t.combineRgb)(64,96,96)},steps:[{down:[{actionId:"auditMode",options:{onOff:"0"}}],up:[]}],feedbacks:[]};let n=[],o=[];const a=e.qVer;for(let e of d)e.preset.includes(`${a}`)&&(n.push({actionId:"overrides",options:{which:e.id,onOff:"0"}}),o.push({actionId:"overrides",options:{which:e.id,onOff:"1"}}));i["ws-disable"]={type:"button",category:"Workspace",name:"Disable a Workspace",style:{bgcolor:(0,t.combineRgb)(192,0,0),text:"Disable Workspace",tooltip:"Turn output overrides ON (for a Backup System).\nPrevents transmitting control commands twice.",size:13,color:(0,t.combineRgb)(250,250,250)},steps:[{down:[...n,{actionId:"overrideWindow",options:{onOff:"0"}}],up:[]}]},i["ws-enable"]={type:"button",category:"Workspace",name:"Enable a Workspace",style:{bgcolor:(0,t.combineRgb)(0,192,0),text:"Enable Workspace",tooltip:"Turn output overrides OFF (for a Primary System).\nAllows transmitting control commands.",size:13,color:(0,t.combineRgb)(250,250,250)},steps:[{down:[...o,{actionId:"overrideWindow",options:{onOff:"0"}}],up:[]}]},i["edit-prewait-1s-"]={type:"button",category:"Edit",name:"PreWait Dec 1 sec",style:{text:"PreWait\\nDecrease\\n1 sec",size:"14",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"prewait_dec",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-prewait-10s-"]={type:"button",category:"Edit",name:"PreWait Dec 10 sec",style:{text:"PreWait\\nDecrease\\n10 sec",size:"14",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"prewait_dec",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-prewait-10s+"]={type:"button",category:"Edit",name:"PreWait inc 10 sec",style:{text:"PreWait\\nIncrease\\n10 sec",size:"14",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"prewait_inc",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-prewait-1s+"]={type:"button",category:"Edit",name:"PreWait inc 1sec",style:{text:"PreWait\\nIncrease\\n1 sec",size:"14",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"prewait_inc",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-postwait-1s-"]={type:"button",category:"Edit",name:"PostWait Dec 1 sec ",style:{text:"PostWait\\nDecrease\\n1 sec",size:"14",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"postwait_dec",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-postwait-10s-"]={type:"button",category:"Edit",name:"PostWait Dec 10 Sec",style:{text:"PostWait\\nDecrease\\n10 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"postwait_dec",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-postwait-10s+"]={type:"button",category:"Edit",name:"PostWait Inc 10 Sec",style:{text:"PostWait\\nIncrease\\n10sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"postwait_inc",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-postwait-1s+"]={type:"button",category:"Edit",name:"PostWait Inc 1 Sec",style:{text:"PostWait\\nIncrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"postwait_inc",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-duration-1s-"]={type:"button",category:"Edit",name:"Duration Dec 1 sec",style:{text:"Duration\\nDecrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"duration_dec",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-duration-10s-"]={type:"button",category:"Edit",name:"Duration Dec 10sec",style:{text:"Duration\\nDecrease\\n10sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"duration_dec",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-duration-10s+"]={type:"button",category:"Edit",name:"Duration inc 10sec",style:{text:"Duration\\nIncrease\\n10 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"duration_inc",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-duration-1s+"]={type:"button",category:"Edit",name:"Duration Inc 1sec",style:{text:"Duration\\nIncrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"duration_inc",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-starttime-1s+"]={type:"button",category:"Edit",name:"Start Time Inc 1sec",style:{text:"Start Time\\nIncrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"startTime_inc",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-starttime-10s+"]={type:"button",category:"Edit",name:"Start Time Inc 10sec",style:{text:"Start Time\\nIncrease\\n10 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"startTime_inc",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-starttime-1s-"]={type:"button",category:"Edit",name:"Start Time Dec 1sec",style:{text:"Start Time\\nDecrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"startTime_dec",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-starttime-10s-"]={type:"button",category:"Edit",name:"Start Time Dec 10sec",style:{text:"Start Time\\nDecrease\\n10 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"startTime_dec",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-endtime-1s+"]={type:"button",category:"Edit",name:"End Time Inc 1sec",style:{text:"End Time\\nIncrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"endTime_inc",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-endtime-10s+"]={type:"button",category:"Edit",name:"End Time Inc 10sec",style:{text:"End Time\\nIncrease\\n10 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"endTime_inc",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-endtime-1s-"]={type:"button",category:"Edit",name:"End Time Dec 1sec",style:{text:"End Time\\nDecrease\\n1 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"endTime_dec",options:{time:"1"}}],up:[]}],feedbacks:[]},i["edit-endtime-10s-"]={type:"button",category:"Edit",name:"End Time Dec 10sec",style:{text:"End Time\\nDecrease\\n10 sec",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"endTime_dec",options:{time:"10"}}],up:[]}],feedbacks:[]},i["edit-continue-mode-dnc"]={type:"button",category:"Edit",name:"Continue Mode DNC",style:{text:"Do Not Continue",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"continue",options:{contId:"0"}}],up:[]}],feedbacks:[]},i["edit-continue-mode-auto-continue"]={type:"button",category:"Edit",name:"Continue mode Auto continue",style:{text:"Auto Continue",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"continue",options:{contId:"1"}}],up:[]}],feedbacks:[]},i["edit-continue-mode-auto-follow"]={type:"button",category:"Edit",name:"Continue mode Auto Follow",style:{text:"Auto Follow",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"continue",options:{contId:"2"}}],up:[]}],feedbacks:[]},i["edit-disarm"]={type:"button",category:"Edit",name:"Disarm",style:{text:"Disarm",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"arm",options:{armId:"0"}}],up:[]}],feedbacks:[]},i["edit-arm"]={type:"button",category:"Edit",name:"Arm",style:{text:"Arm",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"arm",options:{armId:"1"}}],up:[]}],feedbacks:[]},i["edit-autoload-enable"]={type:"button",category:"Edit",name:"Autoload Enable",style:{text:"Autoload Enable",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"autoload",options:{autoId:"1"}}],up:[]}],feedbacks:[]},i["edit-autoload-disable"]={type:"button",category:"Edit",name:"Autoload Disable",style:{text:"Autoload Disable",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"autoload",options:{autoId:"0"}}],up:[]}],feedbacks:[]},i["edit-flagged"]={type:"button",category:"Edit",name:"Flagged",style:{text:"Flagged",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"flagged",options:{flagId:"1"}}],up:[]}],feedbacks:[]},i["edit-unflagged"]={type:"button",category:"Edit",name:"Unflagged",style:{text:"Unflagged",size:"14",color:"16777215",bgcolor:(0,t.combineRgb)(0,0,100)},steps:[{down:[{actionId:"flagged",options:{flagId:"0"}}],up:[]}],feedbacks:[]};for(let e of r)i[`edit-cue-color-${e.id}`]={type:"button",category:"Edit",name:"Cue Color",style:{text:"Cue Color "+e.label,color:I(s[e.id]),bgcolor:s[e.id]},steps:[{down:[{actionId:"cueColor",options:{colorId:e.id}}],up:[]}],feedbacks:[]};return i}(this))}init_feedbacks(){this.useTCP?this.setFeedbackDefinitions(function(e){function i(t){let i;switch(t.scope){case"D":i=e.nextCue;break;case"R":i=e.runningCue.uniqueID;break;case"N":i=e.cueByNum[f(t.q_num)];break;case"I":i=t.q_id}return i}return{playhead_bg:{type:"advanced",name:"Playhead Color for Background",description:"Use the QLab color for the Playhead (next) cue as background",options:[],callback:(t,i)=>({bgcolor:e.wsCues[e.nextCue]?e.wsCues[e.nextCue].qColor:0})},run_bg:{type:"advanced",name:"Running Que color for Background",description:"Use the QLab color of the running cue as background",options:[],callback:(t,i)=>({bgcolor:e.runningCue.qColor})},q_bg:{type:"advanced",name:"Cue Number color for background",description:"Use the QLab color of the specified cue number as background",options:[{type:"textinput",label:"Cue Number",id:"cue",default:""}],callback:(t,i)=>({bgcolor:e.cueColors[t.options.cue.replace(/[^\w\.]/gi,"_")]||0})},qid_bg:{type:"advanced",name:"Cue ID color for background",description:"Use the QLab color of the specified cue ID as background",options:[{type:"textinput",label:"Cue ID",id:"cueId",default:e.nextCue}],callback:(t,i)=>{const s=e.wsCues[t.options.cueId];return{bgcolor:s&&s.qColor||0}}},q_armed:{type:"boolean",name:"Cue is Armed",description:"Indicate on button when the specified cue is Armed",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:c},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.q_num,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.nextCue,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],defaultStyle:{bgcolor:(0,t.combineRgb)(0,102,0),color:(0,t.combineRgb)(255,255,255)},callback:async(t,s)=>{let r=i(t.options);return e.wsCues[r]?.isArmed}},q_selected:{type:"boolean",name:"Cue is Selected",description:"Indicate on button when the specified cue is Selected",options:[{type:"dropdown",label:"Scope",id:"scope",default:"N",choices:[{id:"N",label:"Cue Number"},{id:"I",label:"Cue ID"}]},{type:"textinput",label:"Cue Number",id:"q_num",default:e.nextCue.q_num,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.nextCue.q_id,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],defaultStyle:{bgcolor:(0,t.combineRgb)(0,0,102),color:(0,t.combineRgb)(255,255,255)},callback:async(t,s)=>{let r=i(t.options);return e.wsCues[r]?.isSelected}},q_flagged:{type:"boolean",name:"Cue is Flagged",description:"Indicate on button when the specified cue is Flagged",options:[{type:"dropdown",label:"Scope",id:"scope",default:"D",choices:c},{type:"textinput",label:"Cue Number",id:"q_num",default:e.wsCues[e.nextCue]?.q_num,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.nextCue,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],defaultStyle:{bgcolor:(0,t.combineRgb)(0,102,0),color:(0,t.combineRgb)(255,255,255)},callback:async(t,s)=>{let r=i(t.options);return e.wsCues[r]?.isFlagged}},q_paused:{type:"boolean",name:"Cue is Paused",description:"Indicate on button when the specified cue is Paused",options:[{type:"dropdown",label:"Scope",id:"scope",default:"R",choices:c},{type:"textinput",label:"Cue Number",id:"q_num",default:e[e.nextCue]?.q_num,useVariables:!0,isVisible:(e,t)=>"N"===e.scope},{type:"textinput",label:"Cue ID",id:"q_id",default:e.nextCue,useVariables:!0,isVisible:(e,t)=>"I"===e.scope}],defaultStyle:{bgcolor:(0,t.combineRgb)(102,0,102),color:(0,t.combineRgb)(255,255,255)},callback:async(t,s)=>{let r=i(t.options);return e.wsCues[r]?.isPaused}},q_run:{type:"boolean",name:"Indicate Cue is running",description:"Indicate on button when the specified cue is running",options:[{type:"textinput",label:"Cue Number",id:"cue",default:""}],defaultStyle:{bgcolor:(0,t.combineRgb)(102,0,0),color:(0,t.combineRgb)(255,255,255)},callback:(t,i)=>{const s=t.options,r=e.cueByNum[s.cue.replace(/[^\w\.]/gi,"_")],n=e.wsCues[r];return n&&n.isRunning}},qid_run:{type:"boolean",name:"Indicate Cue ID is running",description:"Indicate on button when cue ID is running",options:[{type:"textinput",label:"Cue ID",id:"cueID",default:e.nextCue}],defaultStyle:{bgcolor:(0,t.combineRgb)(204,0,204),color:(0,t.combineRgb)(255,255,255)},callback:(t,i)=>{const s=t.options,r=e.wsCues[s.cueID];return r&&r.isRunning}},any_run:{type:"boolean",name:"Indicate if any Cue is running",description:"Indicate on button when any cue is running",options:[],defaultStyle:{bgcolor:(0,t.combineRgb)(0,102,0),color:(0,t.combineRgb)(255,255,255)},callback:(t,i)=>{const s=e.runningCue;return s&&s.isRunning}},min_go:{type:"boolean",name:"Indicate Go button Status",description:"Indicate on Button when the Minimum Go Time is active",options:[{type:"dropdown",label:"Status?",id:"goMode",default:"1",choices:[{id:"0",label:"Disabled"},{id:"1",label:"Enabled"}]}],defaultStyle:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,102,0)},callback:(t,i)=>{const s=t.options;return!(!e.goDisabled||"0"!=s.goMode)||"1"==s.goMode}},ws_mode:{type:"boolean",name:"Indicate Workspace Mode",description:"Indicate on Button QLab Show/Edit/Audition Mode",options:[{type:"dropdown",label:"Which Mode?",id:"showMode",default:"1",choices:[{id:"0",label:"Edit"},{id:"1",label:"Show"},{id:"2",label:"Audition"}]}],defaultStyle:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,128,0)},callback:(t,i)=>{const s=t.options;return!(!e.auditMode||"2"!=s.showMode)||!(!e.showMode||"1"!=s.showMode)||!e.showMode&&"0"==s.showMode}},liveFadePreview:{type:"boolean",name:"Live Fade Preview",description:"Set Button when Live Fade Preview is active ",options:[],defaultStyle:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,102)},callback:(t,i)=>!!e.liveFadePreview},ws_audit:{type:"boolean",name:"Audit Monitors",description:"Set Button when ALL Audit monitors are open",options:[],defaultStyle:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(102,0,0)},callback:(t,i)=>!!e.auditMonitors},override:{type:"boolean",name:"Master Override",description:"Set Button when Override is Active",options:[{type:"dropdown",label:"Override",id:"which",default:d[0].id,choices:d}],defaultStyle:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(102,0,0)},callback:(t,i)=>{const s=t.options;return!e.overrides[s.which]}},override_visible:{type:"boolean",name:"Override Window Visible",description:"Set Button when Override Window is visible",options:[],defaultStyle:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(102,0,0)},callback:(t,i)=>!!e.overrideWindow}}}(this)):this.setFeedbackDefinitions({})}init_variables(){this.useTCP?(this.variableDefs=[{name:"Version of QLab attached to this instance",variableId:"q_ver"},{name:"Default (first) workspace ID",variableId:"ws_id"},{name:"Double Go Minimum Time",variableId:"min_go"},{name:"Playhead Cue UniqueID",variableId:"n_id"},{name:"Playhead Cue Name",variableId:"n_name"},{name:"Playhead Cue Number",variableId:"n_num"},{name:"Playhead Cue Type",variableId:"n_type"},{name:"Playhead Pre Wait (seconds)",variableId:"n_preWait"},{name:"Playhead Post Wait (seconds)",variableId:"n_postWait"},{name:"Playhead Elapsed (seconds)",variableId:"n_elapsed"},{name:"Playhead Notes",variableId:"n_notes"},{name:"Playhead Cue Status",variableId:"n_stat"},{name:"Playhead Continue Mode",variableId:"n_cont"},{name:"Selected Cue UniqueID (first only)",variableId:"s_id"},{name:"Selected Cues UniqueIDs (all)",variableId:"s_ids"},{name:"Selected Cue Count",variableId:"s_count"},{name:"Running Cue UniqueID",variableId:"r_id"},{name:"Running Cue Name",variableId:"r_name"},{name:"Running Cue Number",variableId:"r_num"},{name:"Running Cue Notes",variableId:"r_notes"},{name:"Running Cue Status",variableId:"r_stat"},{name:"Running Cue Time left, variable size",variableId:"r_left"},{name:"Running Cue Time left, HH:MM:SS",variableId:"r_hhmmss"},{name:"Running Cue Time left, Hour",variableId:"r_hh"},{name:"Running Cue Time left, Minute",variableId:"r_mm"},{name:"Running Cue Time left, Second",variableId:"r_ss"},{name:"Running Cue Loop Time Left, total seconds",variableId:"r_secs"},{name:"Running Cue Loop Elapsed Time, total seconds",variableId:"e_secs"},{name:"Running Cue Total Elapsed Time, total seconds",variableId:"e_total"},{name:"Running Cue Elapsed Time, variable size",variableId:"e_time"},{name:"Running Cue Elapsed Time, HH:MM:SS",variableId:"e_hhmmss"},{name:"Running Cue Elapsed Time, Hour",variableId:"e_hh"},{name:"Running Cue Elapsed Time, Minute",variableId:"e_mm"},{name:"Running Cue Elapsed Time, Second",variableId:"e_ss"},{name:"Number of miscellaneous QLab Errors",variableId:"errs"}],this.setVariableDefinitions(this.variableDefs),this.updateRunning(),this.updateNextCue()):this.setVariableDefinitions([])}sendCommand=async(e,t,i,s)=>{i=i??[],s=s??!1;let r=["/auditionWindow","/alwaysAudition","/overrideWindow"].includes(t);!s&&this.cl&&this.cueListActions.includes(e.actionId)&&(t="/cue_id/"+this.cl+t),this.useTCP&&!this.ready?this.log("debug",`Not connected to ${this.config.host}`):void 0!==t&&(this.log("debug",`sending ${t} ${JSON.stringify(i)} to ${this.config.host}`),this.sendOSC(t,i,r)),this.useTCP&&r&&this.sendOSC(t,[],!0)};sendOSC(e,t=[],i){const s=i||"default"==this.ws?"":this.ws;if(this.useTCP)this.ready&&(this.debugLevel>0&&this.log("debug",`OSC>> ${s+e}`+JSON.stringify(t)),this.qSocket.send({address:s+e,args:t}));else{let i="";void 0!==this.config.host&&""!==this.config.host&&(i=this.config.host),void 0!==this.config.passcode&&""!==this.config.passcode&&this.oscSend(i,53e3,s+"/connect",{type:"s",value:this.config.passcode}),this.oscSend(i,53e3,s+e,t)}}connect(){this.hasError||this.updateStatus(t.InstanceStatus.Connecting),this.disabled||this.init_osc()}prime_vars(e){if(this.needPasscode&&""==this.config.passcode&&0==this.wrongPasscodeAt)this.updateStatus(t.InstanceStatus.ConnectionFailure,"Need a Passcode"),this.log("debug","Workspace needs a passcode"),this.wrongPasscode=null,this.wrongPasscodeAt=Date.now(),void 0!==this.timer&&(clearTimeout(this.timer),this.timer=void 0),void 0!==this.pulse&&(clearInterval(this.pulse),this.pulse=void 0),this.timer=setTimeout((()=>{this.prime_vars(e)}),5e3);else if(this.needWorkspace&&this.ready)this.sendOSC("/version",[],!0),this.sendOSC("/workspaces",[],!0),""!=this.config.passcode?this.config.passcode!=this.wrongPasscode&&(this.log("debug","sending passcode to "+this.config.host),this.sendOSC("/connect",[{type:"s",value:this.config.passcode}]),this.sendOSC("/showMode",[]),this.passcodeOK=!1,this.wrongPasscode="",this.needPasscode=!0,this.wrongPasscodeAt=Date.now()):0==this.wrongPasscodeAt&&(this.passcodeOK=!0,this.sendOSC("/connect",[])),void 0!==this.timer&&(clearTimeout(this.timer),this.timer=void 0),void 0!==this.pulse&&(clearInterval(this.pulse),this.pulse=void 0),this.timer=setTimeout((()=>{this.prime_vars(e)}),5e3);else if(""==this.wrongPasscode&&this.passcodeOK){this.ws=e,this.sendOSC((this.cl?"/cue_id/"+this.cl:"")+`/playhead${this.phID}`,[]),this.sendOSC("/updates",[]),this.sendOSC("/updates",[{type:"i",value:1}]),this.sendOSC("/cueLists",[]),this.sendOSC("/selectedCues/uniqueIDs",[],!0),this.qVer<5?this.sendOSC("/auditionWindow",[],!0):(this.sendOSC("/alwaysAudition",[],!0),this.sendOSC("/auditionMonitors",[],!0)),this.sendOSC("/overrideWindow",[],!0),this.sendOSC("/showMode",[]),this.sendOSC("/liveFadePreview",[],!0),this.sendOSC("/settings/general/minGoTime");for(const e in d)this.sendOSC("/overrides/"+d[e].id,[],!0);void 0!==this.timer&&(clearTimeout(this.timer),this.timer=void 0)}}rePulse(){const e=Date.now();if(0==this.pollCount%(this.config.useTenths?10:4)&&(this.sendOSC("/overrideWindow",[],!0),5==this.qVer&&(this.sendOSC("/alwaysAudition",[],!0),this.sendOSC("/auditionMonitors",[],!0)),4==this.qVer&&this.sendOSC("/auditionWindow",[],!0),3==this.qVer&&this.sendOSC("/showMode",[])),this.pollCount++,Object.keys(this.requestedCues).length>0){let t={};const i=[],s=e-500;for(let e in this.requestedCues)if(this.requestedCues[e]<s){const s=this.wsCues[e];if(s){const e=f(s.qNumber),r=s.qName;if(e&&r){delete this.cueColors[e];for(const[i,s]of Object.entries(this.otherVars))t[`q_${e}_${i}`]=void 0}for(const[e,i]of Object.entries(this.otherVars))t[`id_${s.uniqueID}_${e}`]=void 0;i.push(...this.fb2check)}delete this.requestedCues[e]}this.setVariableValues(t),i.size>0&&this.checkFeedbacks(...i)}this.goDisabled&&this.goAfter<e&&(this.goDisabled=!1,this.checkFeedbacks("min_go"));let t=this.runningCue;t&&(t.isRunning||t.isPaused)&&(3==this.qVer?this.sendOSC("/runningOrPausedCues",[]):this.sendOSC("/cue/active/valuesForKeys",this.qCueRequest))}init_osc(){const i=this.ws;this.connecting||(this.qSocket&&(this.ready=!1,this.qSocket.close(),delete this.qSocket),this.config.host&&(this.useTCP?(this.qSocket=new e.TCPSocketPort({localAddress:"0.0.0.0",localPort:0,address:this.config.host,port:this.config.port,metadata:!0}),this.connecting=!0):(this.qSocket=new e.UDPPort({localAddress:"0.0.0.0",localPort:53001,remoteAddress:this.config.host,remotePort:53e3,metadata:!0}),this.updateStatus(t.InstanceStatus.Ok,"UDP Mode")),this.qSocket.open(),this.qSocket.on("error",(e=>{this.debugLevel>0&&console.log("debug","Error: "+e.message+"\n"+e.stack),this.connecting=!1,this.hasError||(this.log("error","Error: "+e.message),this.updateStatus(t.InstanceStatus.UnknownError,"Can't connect to QLab "+e.message),this.hasError=!0),"ECONNREFUSED"==e.code&&(this.qSocket&&this.qSocket.removeAllListeners(),void 0!==this.timer&&clearTimeout(this.timer),void 0!==this.pulse&&(clearInterval(this.pulse),this.pulse=void 0),this.timer=setTimeout((()=>{this.connect()}),5e3))})),this.qSocket.on("close",(()=>{!this.hasError&&this.ready&&this.log("error","TCP Connection to QLab Closed"),this.connecting=!1,this.ready&&(this.needWorkspace=!0,this.needPasscode=!1,this.resetVars(!0),null!=this.qSocket&&this.qSocket.removeAllListeners(),this.log("debug","Connection closed"),this.ready=!1,this.disabled?this.updateStatus(t.InstanceStatus.Disconnected,"Disabled"):this.updateStatus(t.InstanceStatus.Disconnected,"CLOSED")),void 0!==this.timer&&(clearTimeout(this.timer),this.timer=void 0),void 0!==this.pulse&&(clearInterval(this.pulse),this.pulse=void 0),this.disabled||(this.timer=setTimeout((()=>{this.connect()}),5e3)),this.hasError=!0})),this.qSocket.on("ready",(()=>{this.ready=!0,this.connecting=!1,this.hasError=!1,this.log("info","Connecting to QLab:"+this.config.host),this.useTCP?(this.updateStatus(t.InstanceStatus.UnknownWarning,"No Workspaces"),this.needWorkspace=!0,this.qSocket.send({address:"/connect",args:[]}),this.prime_vars(i)):(this.needWorkspace=!1,this.qSocket.send({address:"/version",args:[]}))})),this.qSocket.on("message",((e,t,i)=>{const s=e.address.split("/");this.debugLevel>0&&this.log("debug","received "+JSON.stringify(e)+`from ${this.qSocket.options.address}`),"update"==s[1]?this.readUpdate(e):"reply"==s[1]?this.readReply(e):this.log("debug",`Unknown response: ${e.address}  `+JSON.stringify(e.args))}))))}updateCues(e,i,s){let r={};if(Array.isArray(e)){const n={},o=!1;e.forEach(((e,t)=>{r=new C(e,this),r.qOrder=t,s&&(r.qList=s,this.cueList[s]||(this.cueList[s]=[])),"u"==i?this.cueList[s].includes(r.uniqueID)||this.cueList[s].push(r.uniqueID):(r.uniqueID in n?(n[r.uniqueID]+=1,o=!0):n[r.uniqueID]=1,this.qTypes.includes(r.qType)&&(this.updateQVars(r),this.wsCues[r.uniqueID]=r),"l"==i&&(this.cueOrder[t]=r.uniqueID,s&&this.cueList[s].push(r.uniqueID))),e.cues&&e.cues.length&&this.updateCues(e.cues),delete this.requestedCues[r.uniqueID]})),this.checkFeedbacks(...this.fb2check),o&&this.updateStatus(t.InstanceStatus.UnknownWarning,"Multiple cues\nwith the same cue_id")}else r=new C(e,this),this.qTypes.includes(r.qType)&&(this.updateQVars(r),this.wsCues[r.uniqueID]=r,3==this.qVer?"group"==r.qType&&(this.cueList[r.uniqueID]||(this.cueList[r.uniqueID]=[])):["cue list","cart"].includes(r.qType)&&(this.cueList[r.uniqueID]?this.sendOSC("/cue_id/"+r.uniqueID+"/children",[]):this.cueList[r.uniqueID]=[]),this.checkFeedbacks(...this.fb2check),this.updatePlaying(),(""==this.cl||this.cueList[this.cl]&&this.cueList[this.cl].includes(r.uniqueID))&&r.uniqueID==this.nextCue&&this.updateNextCue()),delete this.requestedCues[r.uniqueID]}updatePlaying(){function e(e){return p(JSON.stringify(e))}let t=!1,i=!1;const s=this.cl,r=this.wsCues,n=(Object.keys(r).length,e(this.runningCue));let o=[],a=this.runningCue;if(Object.keys(r).forEach((e=>{const n=r[e];(n.isRunning||n.isPaused)&&(""==s&&"cue list"!=n.qType||this.cueList[s]&&this.cueList[s].includes(e))&&(o.push([e,n.startedAt]),t=t||"group"==n.qType&&n.duration>0,i=i||n.duration>0)})),o.sort(((e,t)=>e[1]-t[1])),0==o.length)a=new C,this.checkFeedbacks("any_run");else{let e=0;if(t)for(;e<o.length&&"group"!=r[o[e][0]].qType;)e+=1;else if(i)for(;e<o.length&&0==r[o[e][0]].duration;)e+=1;e<o.length&&(a=r[o[e][0]],0==a.pctElapsed&&(a.pctElapsed=.01))}e(a)!=n&&(this.runningCue=a,this.updateRunning(!0))}updateSelectedCues(e){let t=p(JSON.stringify(e));if(this.lastSel==t)return;let i=new Set;const s=this.cl,r=e=>{""!=s&&s!=this.wsCues[e]?.qList||i.add(e.uniqueID),e.cues.forEach(r,this)};e.forEach(r,this),i.forEach((e=>{this.wsCues[e]||(this.wsCues[e]=new C),this.sendOSC(`/cue_id/${e}/valuesForKeys`,this.qCueRequest),this.requestedCues[e]=Date.now(),this.wsCues[e].isSelected=!0})),this.selectedCues.forEach((e=>{i.has(e)||this.wsCues[e]&&(this.wsCues[e].isSelected=!1)})),this.selectedCues=[...i],this.lastSel=t,this.setVariableValues({s_id:0==i.size?"":this.selectedCues[0],s_count:i.size,s_ids:this.selectedCues.join(":")}),this.checkFeedbacks("q_selected"),console.log("debug","Selected cues updated")}readUpdate(e){const i=this.ws,s=e.address,r=s.split("/").slice(1);switch(r.slice(-1)[0]){case"playbackPosition":const n=r[4];let o=e.args[0]?.value||"none";this.debugLevel>0&&this.log("debug","playhead: "+o),this.sendOSC("/selectedCues/uniqueIDs",[],!0),"none"==o?(this.nextCue="",this.updateNextCue()):(n&&(this.cueList[n].includes(o)||this.cueList[n].push(o)),""!=this.cl&&n!=this.cl||o===this.nextCue||(this.sendOSC("/cue_id/"+o+"/valuesForKeys",this.qCueRequest),this.requestedCues[o]=Date.now(),this.nextCue=o,this.updateNextCue()));break;case"[root group of cue lists]":this.sendOSC("/doubleGoWindowRemaining");break;case"disconnect":this.updateStatus(t.InstanceStatus.UnknownWarning,"No Workspaces"),this.needWorkspace=!0,this.needPasscode=!1,this.lastRunID="x",null!=this.pulse&&(clearInterval(this.pulse),this.pulse=void 0),this.resetVars(!0),this.prime_vars(i);break;case"general":this.sendOSC("/settings/general/minGoTime");break;case"overrides":for(const e in d)this.sendOSC("/overrides/"+d[e].id,[],!0);break;case"dashboard":this.sendOSC("/selectedCues/uniqueIDs",[],!0);break;default:if(3==r.length&&"workspace"==r[1])this.sendOSC("/showMode",[]),this.sendOSC("/auditionWindow",[],!0),this.sendOSC("/overrideWindow",[],!0);else if("cue_id"==r[3]){const e="/"+r.slice(1).join("/")+"/valuesForKeys",t=r[4];this.sendOSC(e,this.qCueRequest,!0),this.requestedCues[t]=Date.now()}else this.log("debug",`====> unknown OSC message: ${s} `+JSON.stringify(e.args))}}readReply(e){const i=e.address,s=i.split("/").slice(1);let r,n={};const o=this.cl,a=this.qCueRequest;try{n=JSON.parse(e.args[0].value)}catch(e){}if("error"!=n.status){if("denied"==n.status)return this.needPasscode=!0,this.wrongPasscode=this.config.passcode,this.wrongPasscodeAt=Date.now(),this.updateStatus(t.InstanceStatus.ConnectionFailure,"Passcode denied"),void this.log("debug","Passcode denied");switch(s.slice(-1)[0]){case"workspaces":if(this.wsList={},0==n.data.length)this.needPasscode=!1,this.wrongPasscode="",this.wrongPasscodeAt=0,this.needWorkspace=!0,this.passcodeOK=!1,this.updateStatus(t.InstanceStatus.UnknownWarning,"No Workspaces");else{for(const e of n.data){const t=new k(e);this.wsList[t.uniqueID]=t}this.setVariableValues({ws_id:Object.keys(this.wsList)[0]}),this.needWorkspace=!1,this.init_actions()}break;case"connect":["badpass","denied"].includes(n.data)?this.needPasscode||(this.needPasscode=!0,this.updateStatus(t.InstanceStatus.ConnectionFailure,"Wrong Passcode"),this.log("debug","Wrong passcode"),this.wrongPasscode=this.config.passcode,this.wrongPasscodeAt=Date.now()):"error"==n.data?(this.needPasscode=!1,this.needWorkspace=!0,this.updateStatus(t.InstanceStatus.UnknownWarning,`Configured Workspace ID ${this.config.workspace} not open`)):"ok:"==n.data&&(this.needPasscode=!1,this.needWorkspace=!1,this.wrongPasscode="",this.wrongPasscodeAt=0,this.updateStatus(t.InstanceStatus.Ok,"Connected to "+this.host));break;case"updates":"denied"!=n.status&&(this.needWorkspace=!1,this.updateStatus(t.InstanceStatus.Ok,"Connected to QLab"),void 0!==this.pulse&&(this.log("debug","cleared stray interval (u)"),clearInterval(this.pulse)),this.pulse=setInterval((()=>{this.rePulse()}),this.config.useTenths?100:250));break;case"version":null!=n.data&&(this.qVer=parseInt(n.data),this.setVariableValues({q_ver:n.data})),3==this.qVer?(void 0!==this.pulse&&(this.log("debug","cleared stray interval (v)"),clearInterval(this.pulse)),this.pulse=setInterval((()=>{this.rePulse()}),this.config.useTenths?100:250)):(this.init_presets(),this.needWorkspace=this.qVer>3&&this.useTCP);break;case"uniqueID":n.data&&(this.nextCue=n.data,this.updateNextCue(),this.sendOSC(`/cue_id/${n.data}/valuesForKeys`,a));break;case"selectedCues":case"uniqueIDs":n.data&&this.updateSelectedCues(n.data);break;case"playheadId":case"playheadID":if(n.data){const e=n.data;delete this.requestedCues[e],""!=o&&e!=o||this.nextCue==e||("none"==e?(this.nextCue="",this.sendOSC("/selectedCues/uniqueIDs",[],!0)):(this.nextCue=e,this.sendOSC("/cue_id/"+n.data+"/children")),this.updateNextCue())}break;case"cueLists":if(n.data){for(const e in n.data){const t=n.data[e];this.updateCues(t,"l"),this.updateCues(t.cues,"l",t.uniqueID)}this.sendOSC("/cue/active/valuesForKeys",a),this.init_actions()}break;case"children":if(n.data){let e=i.split("/")[i.includes("/workspace")?5:3];this.updateCues(n.data,"u",e)}break;case"runningOrPausedCues":if(null!=n.data)for(const e in n.data){const t=n.data[e];this.sendOSC("/cue_id/"+t.uniqueID+"/valuesForKeys",a)}break;case"valuesForKeys":this.updateCues(n.data,"v"),delete this.requestedCues[n.data.uniqueID];break;case"showMode":"denied"!=n.status&&(this.passcodeOK=!0,this.showMode!=n.data&&(this.showMode=n.data,this.checkFeedbacks("ws_mode")));break;case"liveFadePreview":this.liveFadePreview!=n.data&&(this.liveFadePreview=n.data,this.checkFeedbacks("liveFadePreview"));case"auditionWindow":case"alwaysAudition":this.auditMode!=n.data&&(this.auditMode=n.data,this.checkFeedbacks("ws_mode"));break;case"auditionMonitors":this.auditMonitors!=n.data&&(this.auditMonitors=n.data,this.checkFeedbacks("ws_audit"));break;case"overrideWindow":this.overrideWindow!=n.data&&(this.overrideWindow=n.data,this.checkFeedbacks("override_visible"));break;case"minGoTime":this.minGo=n.data,this.setVariableValues({min_go:(Math.round(100*n.data)/100).toFixed(2)});break;case"doubleGoWindowRemaining":const c=Math.round(1e3*n.data);this.goDisabled=c>0,this.goAfter=Date.now()+c,this.checkFeedbacks("min_go");break;case"armed":r=n.address.split("/")[4],"cue"==n.address.split("/")[3]&&(r=this.cueByNum[r]),this.wsCues[r].isArmed=n.data,this.checkFeedbacks("q_armed");break;case"flagged":r=n.address.split("/")[4],"cue"==n.address.split("/")[3]&&(r=this.cueByNum[r]),this.wsCues[r].isFlagged=n.data,this.checkFeedbacks("q_flagged");break;default:"overrides"==s[1]?(this.overrides[s[2]]=n.data,this.checkFeedbacks("override")):this.log("debug",`====> unknown OSC message: ${i} `+JSON.stringify(e.args))}}else["valuesForKeys","uniqueID"].includes(s.slice(-1)[0])||this.logError(n.address)}getConfigFields(){return e=this,[{type:"static-text",id:"info",width:12,label:"Information",value:'Controls <a href="https://qlab.app" target="_new">QLab</a> by Figure 53.<br>Feedback and variables require TCP<br>which will increase network traffic.'},{type:"textinput",id:"host",label:"Target Host/IP",width:6,tooltip:"The Hostname or IP of the computer running QLab",regex:"/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)+([A-Za-z]|[A-Za-z][A-Za-z0-9-]*[A-Za-z0-9])$/"},{type:"textinput",id:"port",label:"Target Port",width:6,tooltip:"Port number configured on QLab\nto access the workspace",default:53e3,regex:t.Regex.PORT},{type:"checkbox",label:"Use TCP?",id:"useTCP",width:6,tooltip:"Use TCP instead of UDP\nRequired for feedbacks and variables",default:!0},{type:"checkbox",label:"Use Tenths?",id:"useTenths",width:6,isVisible:(e,t)=>!!e.useTCP,tooltip:"Show .1 second resolution for cue remaining timer?\nOtherwise offset countdown by +1 second\nRequires TCP",default:!1},{type:"checkbox",label:"Expose cue name variables?",id:"exposeVariables",width:6,isVisible:(e,t)=>!!e.useTCP,tooltip:"Variables for the name of each cue number and cue ID are normally hidden\nin the Variable List. Enabling this will allow them to be searched in the\nlist but may also cause excessive clutter",default:!1},{type:"textinput",id:"passcode",label:"OSC Passcode",width:6,tooltip:"The passcode to controll QLab.\nLeave blank if not needed\nThis is almost always required for QLab5"},{type:"dropdown",id:"workspace",label:"Workspace",width:12,tooltip:"Select a target workspace\n(or Default/selected)",default:"default",choices:[{id:"default",label:"Default Workspace"},...Object.keys(e.wsList).reduce(((t,i)=>(t.push({id:i,label:e.wsList[i].displayName+` (${i})`}),t)),[])]},{type:"dropdown",id:"cuelist",label:"Cue List",tooltip:"Specific Cue List for Play Head control\n(or use Default/selected)",width:12,default:"default",choices:[{id:"default",label:"Default Cue List"},...Object.keys(e.cueList).reduce(((t,i)=>(t.push({id:i,label:e.wsCues[i].qName+` (${i})`}),t)),[])]}];var e}async destroy(){this.disabled=!0,this.resetVars(!0),void 0!==this.timer&&(clearTimeout(this.timer),delete this.timer),void 0!==this.pulse&&(clearInterval(this.pulse),delete this.pulse),this.qSocket&&(this.ready=!1,this.qSocket.close(),delete this.qSocket)}}(0,t.runEntrypoint)(S,_)})()})();