(()=>{var e,t,n,r={97169:(e,t,n)=>{"use strict";const r=n(32017);r.code='require("ajv/dist/runtime/equal").default',t.A=r},18965:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(30228),o=n(42854),s=n(58167),i=()=>{},a=new o.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():o.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)}));n(await s)}catch(e){r(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},66509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,o=e.length;for(;o>0;){const s=o/2|0;let i=r+s;n(e[i],t)<=0?(r=++i,o-=s+1):o=s}return r}},58167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(66509);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const o=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(o,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},42854:(e,t,n)=>{"use strict";const r=n(44617);class o extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,n)=>new Promise(((s,i)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const a=setTimeout((()=>{if("function"==typeof n){try{s(n())}catch(e){i(e)}return}const r=n instanceof Error?n:new o("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(r)}),t);r(e.then(s,i),(()=>{clearTimeout(a)}))}));e.exports=s,e.exports.default=s,e.exports.TimeoutError=o},79100:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var r=n(38729),o=function(){function e(){}return e.prototype.active=function(){return r.l},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return t.call.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),s=n(69627),i=n(44892),a="context",c=new o,u=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,s.$G)(a,e,i.K.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e,t,n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,s.mS)(a)||c},e.prototype.disable=function(){this._getContextManager().disable(),(0,s.kv)(a,i.K.instance())},e}()},44892:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(69627),o=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s("verbose",this._namespace,e)},e}();function s(e,t,n){var o=(0,r.mS)("diag");if(o)return n.unshift(t),o[e].apply(o,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(n),!1))}var i=n(76733),a=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=(0,r.mS)("diag");if(o)return o[e].apply(o,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(t),!1))}}var t=this;t.setLogger=function(e,n){var o,s,a;if(void 0===n&&(n={logLevel:i.u.INFO}),e===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(o=c.stack)&&void 0!==o?o:c.message),!1}"number"==typeof n&&(n={logLevel:n});var u=(0,r.mS)("diag"),l=function(e,t){function n(n,r){var o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<i.u.NONE?e=i.u.NONE:e>i.u.ALL&&(e=i.u.ALL),t=t||{},{error:n("error",i.u.ERROR),warn:n("warn",i.u.WARN),info:n("info",i.u.INFO),debug:n("debug",i.u.DEBUG),verbose:n("verbose",i.u.VERBOSE)}}(null!==(s=n.logLevel)&&void 0!==s?s:i.u.INFO,e);if(u&&!n.suppressOverrideMessage){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),l.warn("Current logger will overwrite one already registered from "+d)}return(0,r.$G)("diag",l,t,!0)},t.disable=function(){(0,r.kv)("diag",t)},t.createComponentLogger=function(e){return new o(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},11616:(e,t,n)=>{"use strict";n.d(t,{B:()=>c,L:()=>a});var r=n(44892),o=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=new e(this._entries);try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=i.next();!a.done;a=i.next()){var c=a.value;s._entries.delete(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),s=Symbol("BaggageEntryMetadata"),i=r.K.instance();function a(e){return void 0===e&&(e={}),new o(new Map(Object.entries(e)))}function c(e){return"string"!=typeof e&&(i.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:s,toString:function(){return e}}}},41844:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=n(79100)._.getInstance()},38729:(e,t,n)=>{"use strict";function r(e){return Symbol.for(e)}n.d(t,{l:()=>o,n:()=>r});var o=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}},78758:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var r=n(44892).K.instance()},76733:(e,t,n)=>{"use strict";var r;n.d(t,{u:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}))},74681:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DiagConsoleLogger:()=>a,DiagLogLevel:()=>c.u,INVALID_SPANID:()=>I.w9,INVALID_SPAN_CONTEXT:()=>I.dM,INVALID_TRACEID:()=>I.RH,ProxyTracer:()=>d.y,ProxyTracerProvider:()=>p.n,ROOT_CONTEXT:()=>s.l,SamplingDecision:()=>h.i,SpanKind:()=>f.v,SpanStatusCode:()=>m.s,TraceFlags:()=>g.X,ValueType:()=>r,baggageEntryMetadataFromString:()=>o.B,context:()=>R._,createContextKey:()=>s.n,createNoopMeter:()=>u.Ac,createTraceState:()=>v,default:()=>P,defaultTextMapGetter:()=>l.q,defaultTextMapSetter:()=>l.U,diag:()=>A.s,isSpanContextValid:()=>T.YA,isValidSpanId:()=>T.wN,isValidTraceId:()=>T.hX,metrics:()=>C.q,propagation:()=>O.$,trace:()=>N.u});var r,o=n(11616),s=n(38729),i=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],a=function(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var t=0;t<i.length;t++)this[i[t].n]=e(i[t].c)},c=n(76733),u=n(39833);!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(r||(r={}));var l=n(22009),d=n(19505),p=n(74975),h=n(72674),f=n(58651),m=n(11908),g=n(47397),_="[_0-9a-z-*/]",y=new RegExp("^(?:[a-z]"+_+"{0,255}|[a-z0-9]"+_+"{0,240}@[a-z]"+_+"{0,13})$"),S=/^[ -~]{0,255}[!-~]$/,b=/,|=/,E=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),s=n.slice(r+1,t.length);(function(e){return y.test(e)})(o)&&function(e){return S.test(e)&&!b.test(e)}(s)&&e.set(o,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function v(e){return new E(e)}var T=n(67823),I=n(97872),R=n(41844),A=n(78758),C=n(60176),O=n(49348),N=n(6664);const P={context:R._,diag:A.s,metrics:C.q,propagation:O.$,trace:N.u}},69627:(e,t,n)=>{"use strict";n.d(t,{mS:()=>d,$G:()=>l,kv:()=>p});var r="object"==typeof globalThis?globalThis:global,o="1.9.0",s=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,i=function(e){var t=new Set([e]),n=new Set,r=e.match(s);if(!r)return function(){return!1};var o=+r[1],i=+r[2],a=+r[3];if(null!=r[4])return function(t){return t===e};function c(e){return n.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(s);if(!r)return c(e);var l=+r[1],d=+r[2],p=+r[3];return null!=r[4]||o!==l?c(e):0===o?i===d&&a<=p?u(e):c(e):i<=d?u(e):c(e)}}(o),a=o.split(".")[0],c=Symbol.for("opentelemetry.js.api."+a),u=r;function l(e,t,n,r){var s;void 0===r&&(r=!1);var i=u[c]=null!==(s=u[c])&&void 0!==s?s:{version:o};if(!r&&i[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}return i.version!==o?(a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+o),n.error(a.stack||a.message),!1):(i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+o+"."),!0)}function d(e){var t,n,r=null===(t=u[c])||void 0===t?void 0:t.version;if(r&&i(r))return null===(n=u[c])||void 0===n?void 0:n[e]}function p(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+o+".");var n=u[c];n&&delete n[e]}},60176:(e,t,n)=>{"use strict";n.d(t,{q:()=>c});var r=n(39833),o=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return r.Dq},e}()),s=n(69627),i=n(44892),a="metrics",c=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return(0,s.$G)(a,e,i.K.instance())},e.prototype.getMeterProvider=function(){return(0,s.mS)(a)||o},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){(0,s.kv)(a,i.K.instance())},e}().getInstance()},39833:(e,t,n)=>{"use strict";n.d(t,{Ac:()=>T,Dq:()=>m});var r,o=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){function e(){}return e.prototype.createGauge=function(e,t){return _},e.prototype.createHistogram=function(e,t){return y},e.prototype.createCounter=function(e,t){return g},e.prototype.createUpDownCounter=function(e,t){return S},e.prototype.createObservableGauge=function(e,t){return E},e.prototype.createObservableCounter=function(e,t){return b},e.prototype.createObservableUpDownCounter=function(e,t){return v},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),i=function(){},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.add=function(e,t){},t}(i),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.add=function(e,t){},t}(i),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.record=function(e,t){},t}(i),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.record=function(e,t){},t}(i),d=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(d),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(d),m=new s,g=new a,_=new u,y=new l,S=new c,b=new p,E=new h,v=new f;function T(){return m}},49348:(e,t,n)=>{"use strict";n.d(t,{$:()=>_});var r=n(69627),o=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),s=n(22009),i=n(79100),a=(0,n(38729).n)("OpenTelemetry Baggage Key");function c(e){return e.getValue(a)||void 0}function u(){return c(i._.getInstance().active())}function l(e,t){return e.setValue(a,t)}function d(e){return e.deleteValue(a)}var p=n(11616),h=n(44892),f="propagation",m=new o,g=function(){function e(){this.createBaggage=p.L,this.getBaggage=c,this.getActiveBaggage=u,this.setBaggage=l,this.deleteBaggage=d}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,r.$G)(f,e,h.K.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=s.U),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=s.q),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,r.kv)(f,h.K.instance())},e.prototype._getGlobalPropagator=function(){return(0,r.mS)(f)||m},e}(),_=g.getInstance()},22009:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,q:()=>r});var r={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},o={set:function(e,t,n){null!=e&&(e[t]=n)}}},6664:(e,t,n)=>{"use strict";n.d(t,{u:()=>u});var r=n(69627),o=n(74975),s=n(67823),i=n(13299),a=n(44892),c="trace",u=function(){function e(){this._proxyTracerProvider=new o.n,this.wrapSpanContext=s.IP,this.isSpanContextValid=s.YA,this.deleteSpan=i.EW,this.getSpan=i.fU,this.getActiveSpan=i.Bk,this.getSpanContext=i.w8,this.setSpan=i.Bx,this.setSpanContext=i.g_}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,r.$G)(c,this._proxyTracerProvider,a.K.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,r.mS)(c)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,r.kv)(c,a.K.instance()),this._proxyTracerProvider=new o.n},e}().getInstance()},31440:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(97872),o=function(){function e(e){void 0===e&&(e=r.dM),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},79755:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var r=n(79100),o=n(13299),s=n(31440),i=n(67823),a=r._.getInstance(),c=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=a.active()),Boolean(null==t?void 0:t.root))return new s.d;var r,c=n&&(0,o.w8)(n);return"object"==typeof(r=c)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&(0,i.YA)(c)?new s.d(c):new s.d},e.prototype.startActiveSpan=function(e,t,n,r){var s,i,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,i=n,c=r);var u=null!=i?i:a.active(),l=this.startSpan(e,s,u),d=(0,o.Bx)(u,l);return a.with(d,c,void 0,l)}},e}()},19505:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=new(n(79755).o),o=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):r},e}()},74975:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(19505),o=n(79755),s=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new o.o},e}()),i=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var o;return null!==(o=this.getDelegateTracer(e,t,n))&&void 0!==o?o:new r.y(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:s},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}()},72674:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>r}),function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r||(r={}))},13299:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>c,Bx:()=>u,EW:()=>l,fU:()=>a,g_:()=>d,w8:()=>p});var r=n(38729),o=n(31440),s=n(79100),i=(0,r.n)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(i)||void 0}function c(){return a(s._.getInstance().active())}function u(e,t){return e.setValue(i,t)}function l(e){return e.deleteValue(i)}function d(e,t){return u(e,new o.d(t))}function p(e){var t;return null===(t=a(e))||void 0===t?void 0:t.spanContext()}},97872:(e,t,n)=>{"use strict";n.d(t,{RH:()=>s,dM:()=>i,w9:()=>o});var r=n(47397),o="0000000000000000",s="00000000000000000000000000000000",i={traceId:s,spanId:o,traceFlags:r.X.NONE}},58651:(e,t,n)=>{"use strict";var r;n.d(t,{v:()=>r}),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r||(r={}))},67823:(e,t,n)=>{"use strict";n.d(t,{IP:()=>l,YA:()=>u,hX:()=>a,wN:()=>c});var r=n(97872),o=n(31440),s=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function a(e){return s.test(e)&&e!==r.RH}function c(e){return i.test(e)&&e!==r.w9}function u(e){return a(e.traceId)&&c(e.spanId)}function l(e){return new o.d(e)}},11908:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},47397:(e,t,n)=>{"use strict";var r;n.d(t,{X:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r||(r={}))},63634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractAsyncHooksContextManager=void 0;const r=n(24434),o=["addListener","on","once","prependListener","prependOnceListener"];t.AbstractAsyncHooksContextManager=class{constructor(){this._kOtListeners=Symbol("OtListeners"),this._wrapped=!1}bind(e,t){return t instanceof r.EventEmitter?this._bindEventEmitter(e,t):"function"==typeof t?this._bindFunction(e,t):t}_bindFunction(e,t){const n=this,r=function(...r){return n.with(e,(()=>t.apply(this,r)))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r}_bindEventEmitter(e,t){return void 0!==this._getPatchMap(t)||(this._createPatchMap(t),o.forEach((n=>{void 0!==t[n]&&(t[n]=this._patchAddListener(t,t[n],e))})),"function"==typeof t.removeListener&&(t.removeListener=this._patchRemoveListener(t,t.removeListener)),"function"==typeof t.off&&(t.off=this._patchRemoveListener(t,t.off)),"function"==typeof t.removeAllListeners&&(t.removeAllListeners=this._patchRemoveAllListeners(t,t.removeAllListeners))),t}_patchRemoveListener(e,t){const n=this;return function(r,o){var s;const i=null===(s=n._getPatchMap(e))||void 0===s?void 0:s[r];if(void 0===i)return t.call(this,r,o);const a=i.get(o);return t.call(this,r,a||o)}}_patchRemoveAllListeners(e,t){const n=this;return function(r){const o=n._getPatchMap(e);return void 0!==o&&(0===arguments.length?n._createPatchMap(e):void 0!==o[r]&&delete o[r]),t.apply(this,arguments)}}_patchAddListener(e,t,n){const r=this;return function(o,s){if(r._wrapped)return t.call(this,o,s);let i=r._getPatchMap(e);void 0===i&&(i=r._createPatchMap(e));let a=i[o];void 0===a&&(a=new WeakMap,i[o]=a);const c=r.bind(n,s);a.set(s,c),r._wrapped=!0;try{return t.call(this,o,c)}finally{r._wrapped=!1}}}_createPatchMap(e){const t=Object.create(null);return e[this._kOtListeners]=t,t}_getPatchMap(e){return e[this._kOtListeners]}}},68852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncHooksContextManager=void 0;const r=n(74681),o=n(90290),s=n(63634);class i extends s.AbstractAsyncHooksContextManager{constructor(){super(),this._contexts=new Map,this._stack=[],this._asyncHook=o.createHook({init:this._init.bind(this),before:this._before.bind(this),after:this._after.bind(this),destroy:this._destroy.bind(this),promiseResolve:this._destroy.bind(this)})}active(){var e;return null!==(e=this._stack[this._stack.length-1])&&void 0!==e?e:r.ROOT_CONTEXT}with(e,t,n,...r){this._enterContext(e);try{return t.call(n,...r)}finally{this._exitContext()}}enable(){return this._asyncHook.enable(),this}disable(){return this._asyncHook.disable(),this._contexts.clear(),this._stack=[],this}_init(e,t){if("TIMERWRAP"===t)return;const n=this._stack[this._stack.length-1];void 0!==n&&this._contexts.set(e,n)}_destroy(e){this._contexts.delete(e)}_before(e){const t=this._contexts.get(e);void 0!==t&&this._enterContext(t)}_after(){this._exitContext()}_enterContext(e){this._stack.push(e)}_exitContext(){this._stack.pop()}}t.AsyncHooksContextManager=i},86594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageContextManager=void 0;const r=n(74681),o=n(90290),s=n(63634);class i extends s.AbstractAsyncHooksContextManager{constructor(){super(),this._asyncLocalStorage=new o.AsyncLocalStorage}active(){var e;return null!==(e=this._asyncLocalStorage.getStore())&&void 0!==e?e:r.ROOT_CONTEXT}with(e,t,n,...r){const o=null==n?t:t.bind(n);return this._asyncLocalStorage.run(e,o,...r)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}}t.AsyncLocalStorageContextManager=i},81376:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageContextManager=t.AsyncHooksContextManager=void 0;var r=n(68852);Object.defineProperty(t,"AsyncHooksContextManager",{enumerable:!0,get:function(){return r.AsyncHooksContextManager}});var o=n(86594);Object.defineProperty(t,"AsyncLocalStorageContextManager",{enumerable:!0,get:function(){return o.AsyncLocalStorageContextManager}})},92068:(e,t,n)=>{"use strict";var r;n.d(t,{V:()=>r}),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(r||(r={}))},82711:(e,t,n)=>{"use strict";n.d(t,{EC:()=>s,KV:()=>c,QC:()=>a,hN:()=>o,kI:()=>u,r_:()=>i,un:()=>r});var r="=",o=";",s=",",i="baggage",a=180,c=4096,u=8192},75477:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(49348),o=n(4445),s=n(82711),i=n(98151),a=function(){function e(){}return e.prototype.inject=function(e,t,n){var a=r.$.getBaggage(e);if(a&&!(0,o.Zf)(e)){var c=(0,i.getKeyPairs)(a).filter((function(e){return e.length<=s.KV})).slice(0,s.QC),u=(0,i.serializeKeyPairs)(c);u.length>0&&n.set(t,s.r_,u)}},e.prototype.extract=function(e,t,n){var o=n.get(t,s.r_),a=Array.isArray(o)?o.join(s.EC):o;if(!a)return e;var c={};return 0===a.length?e:(a.split(s.EC).forEach((function(e){var t=(0,i.parsePairKeyValue)(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),c[t.key]=n}})),0===Object.entries(c).length?e:r.$.setBaggage(e,r.$.createBaggage(c)))},e.prototype.fields=function(){return[s.r_]},e}()},98151:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getKeyPairs:()=>a,parseKeyPairsIntoRecord:()=>u,parsePairKeyValue:()=>c,serializeKeyPairs:()=>i});var r=n(11616),o=n(82711),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i};function i(e){return e.reduce((function(e,t){var n=""+e+(""!==e?o.EC:"")+t;return n.length>o.kI?e:n}),"")}function a(e){return e.getAllEntries().map((function(e){var t=s(e,2),n=t[0],r=t[1],i=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(i+=o.hN+r.metadata.toString()),i}))}function c(e){var t=e.split(o.hN);if(!(t.length<=0)){var n=t.shift();if(n){var s=n.indexOf(o.un);if(!(s<=0)){var i,a=decodeURIComponent(n.substring(0,s).trim()),c=decodeURIComponent(n.substring(s+1).trim());return t.length>0&&(i=(0,r.B)(t.join(o.hN))),{key:a,value:c,metadata:i}}}}}function u(e){return"string"!=typeof e||0===e.length?{}:e.split(o.EC).map((function(e){return c(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})}},80788:(e,t,n)=>{"use strict";n.d(t,{L:()=>i,m:()=>c,oU:()=>a});var r=n(78758),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i};function i(e){var t,n,i={};if("object"!=typeof e||null==e)return i;try{for(var u=o(Object.entries(e)),l=u.next();!l.done;l=u.next()){var d=s(l.value,2),p=d[0],h=d[1];a(p)?c(h)?Array.isArray(h)?i[p]=h.slice():i[p]=h:r.s.warn("Invalid attribute value set for key: "+p):r.s.warn("Invalid attribute key: "+p)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return i}function a(e){return"string"==typeof e&&e.length>0}function c(e){return null==e||(Array.isArray(e)?function(e){var t,n,r;try{for(var s=o(e),i=s.next();!i.done;i=s.next()){var a=i.value;if(null!=a){if(!r){if(u(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return!0}(e):u(e))}function u(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}},78044:(e,t,n)=>{"use strict";n.d(t,{s:()=>s,u:()=>o});var r=(0,n(11590).o)();function o(e){r=e}function s(e){try{r(e)}catch(e){}}},11590:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(78758);function o(){return function(e){r.s.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))}}},65864:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>_,JU:()=>f,KJ:()=>l,VL:()=>g,W5:()=>d,_5:()=>u,lg:()=>a,mw:()=>y,tq:()=>p,u5:()=>h,uc:()=>c,w_:()=>m});var r=n(53663),o=9,s=Math.pow(10,6),i=Math.pow(10,o);function a(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*s)]}function c(){var e=r.u.timeOrigin;if("number"!=typeof e){var t=r.u;e=t.timing&&t.timing.fetchStart}return e}function u(e){return y(a(c()),a("number"==typeof e?e:r.u.now()))}function l(e){if(g(e))return e;if("number"==typeof e)return e<c()?u(e):a(e);if(e instanceof Date)return a(e.getTime());throw TypeError("Invalid input type")}function d(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=i),[n,r]}function p(e){var t=o,n=""+"0".repeat(t)+e[1]+"Z",r=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",r)}function h(e){return e[0]*i+e[1]}function f(e){return 1e3*e[0]+e[1]/1e6}function m(e){return 1e6*e[0]+e[1]/1e3}function g(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function _(e){return g(e)||"number"==typeof e||e instanceof Date}function y(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=i&&(n[1]-=i,n[0]+=1),n}},72477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>w,AlwaysOnSampler:()=>L,AnchoredClock:()=>o,BindOnceFuture:()=>z.I,CompositePropagator:()=>T.n,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>D.fv,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>D.aE,DEFAULT_ENVIRONMENT:()=>D.Uz,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>D.h9,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>D.V,ExportResultCode:()=>d.V,ParentBasedSampler:()=>G,RPCType:()=>S,RandomIdGenerator:()=>g,SDK_INFO:()=>E.q,TRACE_PARENT_HEADER:()=>I.ZS,TRACE_STATE_HEADER:()=>I.UD,TimeoutError:()=>Z,TraceIdRatioBasedSampler:()=>U,TraceState:()=>H.n,TracesSamplerValues:()=>B.R,VERSION:()=>$.x,W3CBaggagePropagator:()=>r.t,W3CTraceContextPropagator:()=>I.lm,_globalThis:()=>f,addHrTimes:()=>c.mw,baggageUtils:()=>p,callWithTimeout:()=>W,deleteRPCMetadata:()=>C,getEnv:()=>h._,getEnvWithoutDefaults:()=>h.w,getRPCMetadata:()=>O,getTimeOrigin:()=>c.uc,globalErrorHandler:()=>i.s,hexToBase64:()=>m,hexToBinary:()=>l,hrTime:()=>c._5,hrTimeDuration:()=>c.W5,hrTimeToMicroseconds:()=>c.w_,hrTimeToMilliseconds:()=>c.JU,hrTimeToNanoseconds:()=>c.u5,hrTimeToTimeStamp:()=>c.tq,internal:()=>Q,isAttributeKey:()=>s.oU,isAttributeValue:()=>s.m,isTimeInput:()=>c.Ir,isTimeInputHrTime:()=>c.VL,isTracingSuppressed:()=>V.Zf,isUrlIgnored:()=>K,isWrapped:()=>J,loggingErrorHandler:()=>a.o,merge:()=>j.h,millisToHrTime:()=>c.lg,otperformance:()=>b.u,parseEnvironment:()=>D.Nq,parseTraceParent:()=>I.ZI,sanitizeAttributes:()=>s.L,setGlobalErrorHandler:()=>i.u,setRPCMetadata:()=>A,suppressTracing:()=>V.M1,timeInputToHrTime:()=>c.KJ,unrefTimer:()=>v.K,unsuppressTracing:()=>V.FU,urlMatches:()=>Y});var r=n(75477),o=function(){function e(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}return e.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},e}(),s=n(80788),i=n(78044),a=n(11590),c=n(65864);function u(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function l(e){for(var t=new Uint8Array(e.length/2),n=0,r=0;r<e.length;r+=2){var o=u(e.charCodeAt(r)),s=u(e.charCodeAt(r+1));t[n++]=o<<4|s}return t}var d=n(92068),p=n(98151),h=n(37925),f="object"==typeof globalThis?globalThis:global;function m(e){return Buffer.from(l(e)).toString("base64")}var g=function(){this.generateTraceId=y(16),this.generateSpanId=y(8)},_=Buffer.allocUnsafe(16);function y(e){return function(){for(var t=0;t<e/4;t++)_.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*t);for(t=0;t<e&&!(_[t]>0);t++)t===e-1&&(_[e-1]=1);return _.toString("hex",0,e)}}var S,b=n(53663),E=n(68797),v=n(22778),T=n(22721),I=n(79859),R=(0,n(38729).n)("OpenTelemetry SDK Context Key RPC_METADATA");function A(e,t){return e.setValue(R,t)}function C(e){return e.deleteValue(R)}function O(e){return e.getValue(R)}!function(e){e.HTTP="http"}(S||(S={}));var N,P=n(72674),w=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:P.i.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),L=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:P.i.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),M=n(6664),x=n(67823),k=n(47397),G=function(){function e(e){var t,n,r,o;this._root=e.root,this._root||((0,i.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new L),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new L,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new w,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new L,this._localParentNotSampled=null!==(o=e.localParentNotSampled)&&void 0!==o?o:new w}return e.prototype.shouldSample=function(e,t,n,r,o,s){var i=M.u.getSpanContext(e);return i&&(0,x.YA)(i)?i.isRemote?i.traceFlags&k.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,o,s):this._remoteParentNotSampled.shouldSample(e,t,n,r,o,s):i.traceFlags&k.X.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,o,s):this._localParentNotSampled.shouldSample(e,t,n,r,o,s):this._root.shouldSample(e,t,n,r,o,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),U=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,x.hX)(t)&&this._accumulate(t)<this._upperBound?P.i.RECORD_AND_SAMPLED:P.i.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),V=n(4445),H=n(59406),D=n(23144),j=n(31194),B=n(70676),F=(N=function(e,t){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},N(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Z=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return F(t,e),t}(Error);function W(e,t){var n,r=new Promise((function(e,r){n=setTimeout((function(){r(new Z("Operation timed out."))}),t)}));return Promise.race([e,r]).then((function(e){return clearTimeout(n),e}),(function(e){throw clearTimeout(n),e}))}var X=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Y(e,t){return"string"==typeof t?e===t:!!e.match(t)}function K(e,t){var n,r;if(!t)return!1;try{for(var o=X(t),s=o.next();!s.done;s=o.next())if(Y(e,s.value))return!0}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}function J(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var z=n(77375),$=n(42299),q=n(41844),Q={_export:function(e,t){return new Promise((function(n){q._.with((0,V.M1)(q._.active()),(function(){e.export(t,(function(e){n(e)}))}))}))}}},37925:(e,t,n)=>{"use strict";n.d(t,{_:()=>o,w:()=>s});var r=n(23144);function o(){var e=(0,r.Nq)(process.env);return Object.assign({},r.Uz,e)}function s(){return(0,r.Nq)(process.env)}},53663:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r=require("perf_hooks").performance},68797:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var r,o=n(42299),s=n(87361),i=((r={})[s.$L]="opentelemetry",r[s.lb]="node",r[s.Pl]=s.wE,r[s.y$]=o.x,r)},22778:(e,t,n)=>{"use strict";function r(e){e.unref()}n.d(t,{K:()=>r})},22721:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(78758),o=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var o,s;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),a=i.next();!a.done;a=i.next()){var c=a.value;try{c.inject(e,t,n)}catch(e){r.s.warn("Failed to inject with "+c.constructor.name+". Err: "+e.message)}}}catch(e){o={error:e}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(o)throw o.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,o){try{return o.extract(e,t,n)}catch(e){r.s.warn("Failed to inject with "+o.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}()},59406:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var r="[_0-9a-z-*/]",o=new RegExp("^(?:[a-z]"+r+"{0,255}|[a-z0-9]"+r+"{0,240}@[a-z]"+r+"{0,13})$"),s=/^[ -~]{0,255}[!-~]$/,i=/,|=/,a=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var a=n.slice(0,r),c=n.slice(r+1,t.length);(function(e){return o.test(e)})(a)&&function(e){return s.test(e)&&!i.test(e)}(c)&&e.set(a,c)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()},79859:(e,t,n)=>{"use strict";n.d(t,{UD:()=>u,ZI:()=>d,ZS:()=>c,lm:()=>p});var r=n(6664),o=n(67823),s=n(47397),i=n(4445),a=n(59406),c="traceparent",u="tracestate",l=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function d(e){var t=l.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}var p=function(){function e(){}return e.prototype.inject=function(e,t,n){var a=r.u.getSpanContext(e);if(a&&!(0,i.Zf)(e)&&(0,o.YA)(a)){var l="00-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||s.X.NONE).toString(16);n.set(t,c,l),a.traceState&&n.set(t,u,a.traceState.serialize())}},e.prototype.extract=function(e,t,n){var o=n.get(t,c);if(!o)return e;var s=Array.isArray(o)?o[0]:o;if("string"!=typeof s)return e;var i=d(s);if(!i)return e;i.isRemote=!0;var l=n.get(t,u);if(l){var p=Array.isArray(l)?l.join(","):l;i.traceState=new a.n("string"==typeof p?p:void 0)}return r.u.setSpanContext(e,i)},e.prototype.fields=function(){return[c,u]},e}()},4445:(e,t,n)=>{"use strict";n.d(t,{FU:()=>s,M1:()=>o,Zf:()=>i});var r=(0,n(38729).n)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function o(e){return e.setValue(r,!0)}function s(e){return e.deleteValue(r)}function i(e){return!0===e.getValue(r)}},77375:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),o=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new r}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}()},23144:(e,t,n)=>{"use strict";n.d(t,{Nq:()=>v,Uz:()=>g,V:()=>m,aE:()=>p,fv:()=>h,h9:()=>f});var r=n(76733),o=n(70676),s=",",i=["OTEL_SDK_DISABLED"];function a(e){return i.indexOf(e)>-1}var c=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function u(e){return c.indexOf(e)>-1}var l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function d(e){return l.indexOf(e)>-1}var p=1/0,h=128,f=128,m=128,g={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:r.u.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:p,OTEL_ATTRIBUTE_COUNT_LIMIT:h,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:p,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:h,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:p,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:h,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:f,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:m,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:o.R.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function _(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function y(e,t,n,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==n[e]){var s=Number(n[e]);isNaN(s)||(t[e]=s<r?r:s>o?o:s)}}function S(e,t,n,r){void 0===r&&(r=s);var o=n[e];"string"==typeof o&&(t[e]=o.split(r).map((function(e){return e.trim()})))}var b={ALL:r.u.ALL,VERBOSE:r.u.VERBOSE,DEBUG:r.u.DEBUG,INFO:r.u.INFO,WARN:r.u.WARN,ERROR:r.u.ERROR,NONE:r.u.NONE};function E(e,t,n){var r=n[e];if("string"==typeof r){var o=b[r.toUpperCase()];null!=o&&(t[e]=o)}}function v(e){var t={};for(var n in g){var r=n;if("OTEL_LOG_LEVEL"===r)E(r,t,e);else if(a(r))_(r,t,e);else if(u(r))y(r,t,e);else if(d(r))S(r,t,e);else{var o=e[r];null!=o&&(t[r]=String(o))}}return t}},31194:(e,t,n)=>{"use strict";n.d(t,{h:()=>_});var r,o,s="[object Object]",i="[object Null]",a="[object Undefined]",c=Function.prototype.toString,u=c.call(Object),l=(r=Object.getPrototypeOf,o=Object,function(e){return r(o(e))}),d=Object.prototype,p=d.hasOwnProperty,h=Symbol?Symbol.toStringTag:void 0,f=d.toString;function m(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||function(e){return null==e?void 0===e?a:i:h&&h in Object(e)?function(e){var t=p.call(e,h),n=e[h],r=!1;try{e[h]=void 0,r=!0}catch(e){}var o=f.call(e);return r&&(t?e[h]=n:delete e[h]),o}(e):function(e){return f.call(e)}(e)}(e)!==s)return!1;var t=l(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)===u}var g=20;function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=S(n,e.shift(),0,r);return n}function y(e){return E(e)?e.slice():e}function S(e,t,n,r){var o;if(void 0===n&&(n=0),!(n>g)){if(n++,I(e)||I(t)||v(t))o=y(t);else if(E(e)){if(o=e.slice(),E(t))for(var s=0,i=t.length;s<i;s++)o.push(y(t[s]));else if(T(t))for(s=0,i=(a=Object.keys(t)).length;s<i;s++)o[c=a[s]]=y(t[c])}else if(T(e))if(T(t)){if(!function(e,t){return!(!m(e)||!m(t))}(e,t))return t;var a;for(o=Object.assign({},e),s=0,i=(a=Object.keys(t)).length;s<i;s++){var c,u=t[c=a[s]];if(I(u))void 0===u?delete o[c]:o[c]=u;else{var l=o[c],d=u;if(b(e,c,r)||b(t,c,r))delete o[c];else{if(T(l)&&T(d)){var p=r.get(l)||[],h=r.get(d)||[];p.push({obj:e,key:c}),h.push({obj:t,key:c}),r.set(l,p),r.set(d,h)}o[c]=S(o[c],u,n,r)}}}}else o=t;return o}}function b(e,t,n){for(var r=n.get(e[t])||[],o=0,s=r.length;o<s;o++){var i=r[o];if(i.key===t&&i.obj===e)return!0}return!1}function E(e){return Array.isArray(e)}function v(e){return"function"==typeof e}function T(e){return!I(e)&&!E(e)&&!v(e)&&"object"==typeof e}function I(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}},70676:(e,t,n)=>{"use strict";var r;n.d(t,{R:()=>r}),function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(r||(r={}))},42299:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r="1.25.1"},50403:(e,t)=>{"use strict";var n,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectNames=t.ConnectTypes=t.AttributeNames=void 0,(o=t.AttributeNames||(t.AttributeNames={})).CONNECT_TYPE="connect.type",o.CONNECT_NAME="connect.name",(r=t.ConnectTypes||(t.ConnectTypes={})).MIDDLEWARE="middleware",r.REQUEST_HANDLER="request_handler",(n=t.ConnectNames||(t.ConnectNames={})).MIDDLEWARE="middleware",n.REQUEST_HANDLER="request handler"},68202:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(50403),t),o(n(70284),t)},70284:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectInstrumentation=t.ANONYMOUS_NAME=void 0;const r=n(74681),o=n(72477),s=n(50403),i=n(50526),a=n(25907),c=n(74813),u=n(28443);t.ANONYMOUS_NAME="anonymous";class l extends a.InstrumentationBase{constructor(e={}){super(i.PACKAGE_NAME,i.PACKAGE_VERSION,e)}init(){return[new a.InstrumentationNodeModuleDefinition("connect",[">=3.0.0 <4"],(e=>this._patchConstructor(e)))]}_patchApp(e){(0,a.isWrapped)(e.use)||this._wrap(e,"use",this._patchUse.bind(this)),(0,a.isWrapped)(e.handle)||this._wrap(e,"handle",this._patchHandle.bind(this))}_patchConstructor(e){const t=this;return function(...n){const r=e.apply(this,n);return t._patchApp(r),r}}_patchNext(e,t){return function(n){const r=e.apply(this,[n]);return t(),r}}_startSpan(e,n){let r,o,i;e?(r=s.ConnectTypes.REQUEST_HANDLER,i=s.ConnectNames.REQUEST_HANDLER,o=e):(r=s.ConnectTypes.MIDDLEWARE,i=s.ConnectNames.MIDDLEWARE,o=n.name||t.ANONYMOUS_NAME);const a=`${i} - ${o}`,u={attributes:{[c.SEMATTRS_HTTP_ROUTE]:e.length>0?e:"/",[s.AttributeNames.CONNECT_TYPE]:r,[s.AttributeNames.CONNECT_NAME]:o}};return this.tracer.startSpan(a,u)}_patchMiddleware(e,n){const s=this,i=4===n.length;function a(){if(!s.isEnabled())return n.apply(this,arguments);const[a,c,l]=i?[1,2,3]:[0,1,2],d=arguments[a],p=arguments[c],h=arguments[l];(0,u.replaceCurrentStackRoute)(d,e);const f=(0,o.getRPCMetadata)(r.context.active());e&&(null==f?void 0:f.type)===o.RPCType.HTTP&&(f.route=(0,u.generateRoute)(d));let m="";m=e?`request handler - ${e}`:`middleware - ${n.name||t.ANONYMOUS_NAME}`;const g=s._startSpan(e,n);s._diag.debug("start span",m);let _=!1;function y(){_?s._diag.debug(`span ${g.name} - already finished`):(_=!0,s._diag.debug(`finishing span ${g.name}`),g.end()),p.removeListener("close",y)}return p.addListener("close",y),arguments[l]=s._patchNext(h,y),n.apply(this,arguments)}return Object.defineProperty(a,"length",{value:n.length,writable:!1,configurable:!0}),a}_patchUse(e){const t=this;return function(...n){const r=n[n.length-1],o=n[n.length-2]||"";return n[n.length-1]=t._patchMiddleware(o,r),e.apply(this,n)}}_patchHandle(e){const t=this;return function(){const[n,r]=[0,2],o=arguments[n],s=arguments[r],i=(0,u.addNewStackLayer)(o);return"function"==typeof s&&(arguments[r]=t._patchOut(s,i)),e.apply(this,arguments)}}_patchOut(e,t){return function(...n){return t(),Reflect.apply(e,this,n)}}}t.ConnectInstrumentation=l},55357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._LAYERS_STORE_PROPERTY=void 0,t._LAYERS_STORE_PROPERTY=Symbol("opentelemetry.instrumentation-connect.request-route-stack")},28443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRoute=t.replaceCurrentStackRoute=t.addNewStackLayer=void 0;const r=n(74681),o=n(55357);t.addNewStackLayer=e=>{!1===Array.isArray(e[o._LAYERS_STORE_PROPERTY])&&Object.defineProperty(e,o._LAYERS_STORE_PROPERTY,{enumerable:!1,value:[]}),e[o._LAYERS_STORE_PROPERTY].push("/");const t=e[o._LAYERS_STORE_PROPERTY].length;return()=>{t===e[o._LAYERS_STORE_PROPERTY].length?e[o._LAYERS_STORE_PROPERTY].pop():r.diag.warn("Connect: Trying to pop the stack multiple time")}},t.replaceCurrentStackRoute=(e,t)=>{t&&e[o._LAYERS_STORE_PROPERTY].splice(-1,1,t)},t.generateRoute=e=>e[o._LAYERS_STORE_PROPERTY].reduce(((e,t)=>e.replace(/\/+$/,"")+t))},50526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.38.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-connect"},12649:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).EXPRESS_TYPE="express.type",n.EXPRESS_NAME="express.name"},91420:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressLayerType=void 0,(n=t.ExpressLayerType||(t.ExpressLayerType={})).ROUTER="router",n.MIDDLEWARE="middleware",n.REQUEST_HANDLER="request_handler"},46012:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4506),t),o(n(91420),t),o(n(12649),t),o(n(7865),t)},4506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressInstrumentation=void 0;const r=n(72477),o=n(74681),s=n(91420),i=n(12649),a=n(14101),c=n(75728),u=n(25907),l=n(74813),d=n(23831);class p extends u.InstrumentationBase{constructor(e={}){super(c.PACKAGE_NAME,c.PACKAGE_VERSION,e)}init(){return[new u.InstrumentationNodeModuleDefinition("express",[">=4.0.0 <5"],(e=>{const t=e.Router;return(0,u.isWrapped)(t.route)&&this._unwrap(t,"route"),this._wrap(t,"route",this._getRoutePatch()),(0,u.isWrapped)(t.use)&&this._unwrap(t,"use"),this._wrap(t,"use",this._getRouterUsePatch()),(0,u.isWrapped)(e.application.use)&&this._unwrap(e.application,"use"),this._wrap(e.application,"use",this._getAppUsePatch()),e}),(e=>{if(void 0===e)return;const t=e.Router;this._unwrap(t,"route"),this._unwrap(t,"use"),this._unwrap(e.application,"use")}))]}_getRoutePatch(){const e=this;return function(t){return function(...n){const r=t.apply(this,n),o=this.stack[this.stack.length-1];return e._applyPatch(o,(0,a.getLayerPath)(n)),r}}}_getRouterUsePatch(){const e=this;return function(t){return function(...n){const r=t.apply(this,n),o=this.stack[this.stack.length-1];return e._applyPatch(o,(0,a.getLayerPath)(n)),r}}}_getAppUsePatch(){const e=this;return function(t){return function(...n){const r=t.apply(this,n),o=this._router.stack[this._router.stack.length-1];return e._applyPatch(o,(0,a.getLayerPath)(n)),r}}}_applyPatch(e,t){const n=this;!0!==e[d.kLayerPatched]&&(e[d.kLayerPatched]=!0,this._wrap(e,"handle",(c=>{if(4===c.length)return c;const p=function(p,h){(0,a.storeLayerPath)(p,t);const f=p[d._LAYERS_STORE_PROPERTY].filter((e=>"/"!==e&&"/*"!==e)).join("").replace(/\/{2,}/g,"/"),m={[l.SEMATTRS_HTTP_ROUTE]:f.length>0?f:"/"},g=(0,a.getLayerMetadata)(e,t),_=g.attributes[i.AttributeNames.EXPRESS_TYPE],y=(0,r.getRPCMetadata)(o.context.active());if((null==y?void 0:y.type)===r.RPCType.HTTP&&(y.route=f||"/"),(0,a.isLayerIgnored)(g.name,_,n.getConfig()))return _===s.ExpressLayerType.MIDDLEWARE&&p[d._LAYERS_STORE_PROPERTY].pop(),c.apply(this,arguments);if(void 0===o.trace.getSpan(o.context.active()))return c.apply(this,arguments);const S=n._getSpanName({request:p,layerType:_,route:f},g.name),b=n.tracer.startSpan(S,{attributes:Object.assign(m,g.attributes)}),{requestHook:E}=n.getConfig();E&&(0,u.safeExecuteInTheMiddle)((()=>E(b,{request:p,layerType:_,route:f})),(e=>{e&&o.diag.error("express instrumentation: request hook failed",e)}),!0);let v=!1;g.attributes[i.AttributeNames.EXPRESS_TYPE]!==s.ExpressLayerType.MIDDLEWARE&&(b.end(),v=!0);const T=()=>{!1===v&&(v=!0,b.end())},I=Array.from(arguments),R=I.findIndex((e=>"function"==typeof e));R>=0&&(arguments[R]=function(){var e;const t=arguments[0],n=![void 0,null,"route","router"].includes(t);if(!v&&n){const[e,n]=(0,a.asErrorAndMessage)(t);b.recordException(e),b.setStatus({code:o.SpanStatusCode.ERROR,message:n})}return!1===v&&(v=!0,null===(e=p.res)||void 0===e||e.removeListener("finish",T),b.end()),p.route&&n||p[d._LAYERS_STORE_PROPERTY].pop(),I[R].apply(this,arguments)});try{return c.apply(this,arguments)}catch(e){const[t,n]=(0,a.asErrorAndMessage)(e);throw b.recordException(t),b.setStatus({code:o.SpanStatusCode.ERROR,message:n}),e}finally{v||h.once("finish",T)}};for(const e in c)Object.defineProperty(p,e,{get:()=>c[e],set(t){c[e]=t}});return p})))}_getSpanName(e,t){var n;const{spanNameHook:r}=this.getConfig();if(!(r instanceof Function))return t;try{return null!==(n=r(e,t))&&void 0!==n?n:t}catch(e){return o.diag.error("express instrumentation: error calling span name rewrite hook",e),t}}}t.ExpressInstrumentation=p},23831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._LAYERS_STORE_PROPERTY=t.kLayerPatched=void 0,t.kLayerPatched=Symbol("express-layer-patched"),t._LAYERS_STORE_PROPERTY="__ot_middlewares"},7865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},14101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLayerPath=t.asErrorAndMessage=t.isLayerIgnored=t.getLayerMetadata=t.storeLayerPath=void 0;const r=n(91420),o=n(12649),s=n(23831);t.storeLayerPath=(e,t)=>{!1===Array.isArray(e[s._LAYERS_STORE_PROPERTY])&&Object.defineProperty(e,s._LAYERS_STORE_PROPERTY,{enumerable:!1,value:[]}),void 0!==t&&e[s._LAYERS_STORE_PROPERTY].push(t)},t.getLayerMetadata=(e,t)=>"router"===e.name?{attributes:{[o.AttributeNames.EXPRESS_NAME]:t,[o.AttributeNames.EXPRESS_TYPE]:r.ExpressLayerType.ROUTER},name:`router - ${t}`}:"bound dispatch"===e.name?{attributes:{[o.AttributeNames.EXPRESS_NAME]:null!=t?t:"request handler",[o.AttributeNames.EXPRESS_TYPE]:r.ExpressLayerType.REQUEST_HANDLER},name:"request handler"+(e.path?` - ${t}`:"")}:{attributes:{[o.AttributeNames.EXPRESS_NAME]:e.name,[o.AttributeNames.EXPRESS_TYPE]:r.ExpressLayerType.MIDDLEWARE},name:`middleware - ${e.name}`};const i=(e,t)=>{if("string"==typeof t)return t===e;if(t instanceof RegExp)return t.test(e);if("function"==typeof t)return t(e);throw new TypeError("Pattern is in unsupported datatype")};t.isLayerIgnored=(e,t,n)=>{var r;if(Array.isArray(null==n?void 0:n.ignoreLayersType)&&(null===(r=null==n?void 0:n.ignoreLayersType)||void 0===r?void 0:r.includes(t)))return!0;if(!1===Array.isArray(null==n?void 0:n.ignoreLayers))return!1;try{for(const t of n.ignoreLayers)if(i(e,t))return!0}catch(e){}return!1},t.asErrorAndMessage=e=>e instanceof Error?[e,e.message]:[String(e),String(e)],t.getLayerPath=e=>Array.isArray(e[0])?e[0].map((e=>a(e)||"")).join(","):a(e[0]);const a=e=>"string"==typeof e?e:e instanceof RegExp||"number"==typeof e?e.toString():void 0},75728:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.41.1",t.PACKAGE_NAME="@opentelemetry/instrumentation-express"},91557:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hooksNamesToWrap=t.spanRequestSymbol=void 0,t.spanRequestSymbol=Symbol("opentelemetry.instrumentation.fastify.request_active_span"),t.hooksNamesToWrap=new Set(["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError"])},86373:(e,t)=>{"use strict";var n,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.FastifyNames=t.FastifyTypes=t.AttributeNames=void 0,(o=t.AttributeNames||(t.AttributeNames={})).FASTIFY_NAME="fastify.name",o.FASTIFY_TYPE="fastify.type",o.HOOK_NAME="hook.name",o.PLUGIN_NAME="plugin.name",(r=t.FastifyTypes||(t.FastifyTypes={})).MIDDLEWARE="middleware",r.REQUEST_HANDLER="request_handler",(n=t.FastifyNames||(t.FastifyNames={})).MIDDLEWARE="middleware",n.REQUEST_HANDLER="request handler"},90224:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(86373),t),o(n(57301),t),o(n(27110),t)},27110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FastifyInstrumentation=t.ANONYMOUS_NAME=void 0;const r=n(74681),o=n(72477),s=n(25907),i=n(74813),a=n(91557),c=n(86373),u=n(35593),l=n(34460);t.ANONYMOUS_NAME="anonymous";class d extends s.InstrumentationBase{constructor(e={}){super(l.PACKAGE_NAME,l.PACKAGE_VERSION,e)}setConfig(e={}){this._config=Object.assign({},e)}getConfig(){return this._config}init(){return[new s.InstrumentationNodeModuleDefinition("fastify",[">=3.0.0 <5"],(e=>this._patchConstructor(e)))]}_hookOnRequest(){const e=this;return function(t,n,s){if(!e.isEnabled())return s();e._wrap(n,"send",e._patchSend());const i=t,a=(0,o.getRPCMetadata)(r.context.active()),c=i.routeOptions?i.routeOptions.url:t.routerPath;c&&(null==a?void 0:a.type)===o.RPCType.HTTP&&(a.route=c),s()}}_wrapHandler(e,n,o,s){const i=this;return this._diag.debug("Patching fastify route.handler function"),function(...a){if(!i.isEnabled())return o.apply(this,a);const l=o.name||e||t.ANONYMOUS_NAME,d=`${c.FastifyNames.MIDDLEWARE} - ${l}`,p=a[1],h=(0,u.startSpan)(p,i.tracer,d,{[c.AttributeNames.FASTIFY_TYPE]:c.FastifyTypes.MIDDLEWARE,[c.AttributeNames.PLUGIN_NAME]:e,[c.AttributeNames.HOOK_NAME]:n}),f=s&&a[a.length-1];return f&&(a[a.length-1]=function(...e){(0,u.endSpan)(p),f.apply(this,e)}),r.context.with(r.trace.setSpan(r.context.active(),h),(()=>(0,u.safeExecuteInTheMiddleMaybePromise)((()=>o.apply(this,a)),(e=>{e instanceof Error&&(h.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}),h.recordException(e)),s||(0,u.endSpan)(p)}))))}}_wrapAddHook(){const e=this;return this._diag.debug("Patching fastify server.addHook function"),function(t){return function(...n){const r=n[0],o=n[1],s=this.pluginName;if(!a.hooksNamesToWrap.has(r))return t.apply(this,n);const i="function"==typeof n[n.length-1]&&"AsyncFunction"!==o.constructor.name;return t.apply(this,[r,e._wrapHandler(s,r,o,i)])}}}_patchConstructor(e){const t=this;function n(...n){const r=e.fastify.apply(this,n);return r.addHook("onRequest",t._hookOnRequest()),r.addHook("preHandler",t._hookPreHandler()),t._wrap(r,"addHook",t._wrapAddHook()),r}return n.fastify=n,n.default=n,n}_patchSend(){const e=this;return this._diag.debug("Patching fastify reply.send function"),function(t){return function(...n){const r=n[0];return e.isEnabled()?(0,s.safeExecuteInTheMiddle)((()=>t.apply(this,n)),(e=>{!e&&r instanceof Error&&(e=r),(0,u.endSpan)(this,e)})):t.apply(this,n)}}}_hookPreHandler(){const e=this;return this._diag.debug("Patching fastify preHandler function"),function(n,o,a){var l,d;if(!e.isEnabled())return a();const p=n,h=(null===(l=p.routeOptions)||void 0===l?void 0:l.handler)||(null===(d=p.context)||void 0===d?void 0:d.handler),f=(null==h?void 0:h.name.startsWith("bound "))?h.name.substr(6):null==h?void 0:h.name,m=`${c.FastifyNames.REQUEST_HANDLER} - ${f||this.pluginName||t.ANONYMOUS_NAME}`,g={[c.AttributeNames.PLUGIN_NAME]:this.pluginName,[c.AttributeNames.FASTIFY_TYPE]:c.FastifyTypes.REQUEST_HANDLER,[i.SEMATTRS_HTTP_ROUTE]:p.routeOptions?p.routeOptions.url:n.routerPath};f&&(g[c.AttributeNames.FASTIFY_NAME]=f);const _=(0,u.startSpan)(o,e.tracer,m,g);return e.getConfig().requestHook&&(0,s.safeExecuteInTheMiddle)((()=>e.getConfig().requestHook(_,{request:n})),(t=>{t&&e._diag.error("request hook failed",t)}),!0),r.context.with(r.trace.setSpan(r.context.active(),_),(()=>{a()}))}}}t.FastifyInstrumentation=d},57301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},35593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeExecuteInTheMiddleMaybePromise=t.endSpan=t.startSpan=void 0;const r=n(74681),o=n(91557);function s(e){var t;return"object"==typeof e&&e&&"function"==typeof(null===(t=Object.getOwnPropertyDescriptor(e,"then"))||void 0===t?void 0:t.value)||!1}t.startSpan=function(e,t,n,r={}){const s=t.startSpan(n,{attributes:r}),i=e[o.spanRequestSymbol]||[];return i.push(s),Object.defineProperty(e,o.spanRequestSymbol,{enumerable:!1,configurable:!0,value:i}),s},t.endSpan=function(e,t){const n=e[o.spanRequestSymbol]||[];n.length&&(n.forEach((e=>{t&&(e.setStatus({code:r.SpanStatusCode.ERROR,message:t.message}),e.recordException(t)),e.end()})),delete e[o.spanRequestSymbol])},t.safeExecuteInTheMiddleMaybePromise=function(e,t,n){let r,o;try{o=e(),s(o)&&o.then((e=>t(void 0,e)),(e=>t(e)))}catch(e){r=e}finally{if(!s(o)&&(t(r,o),r&&!n))throw r;return o}}},34460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.38.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-fastify"},81708:(e,t)=>{"use strict";var n,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanNames=t.TokenKind=t.AllowedOperationTypes=void 0,(o=t.AllowedOperationTypes||(t.AllowedOperationTypes={})).QUERY="query",o.MUTATION="mutation",o.SUBSCRIPTION="subscription",(r=t.TokenKind||(t.TokenKind={})).SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment",(n=t.SpanNames||(t.SpanNames={})).EXECUTE="graphql.execute",n.PARSE="graphql.parse",n.RESOLVE="graphql.resolve",n.VALIDATE="graphql.validate",n.SCHEMA_VALIDATE="graphql.validateSchema",n.SCHEMA_PARSE="graphql.parseSchema"},64442:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).SOURCE="graphql.source",n.FIELD_NAME="graphql.field.name",n.FIELD_PATH="graphql.field.path",n.FIELD_TYPE="graphql.field.type",n.OPERATION_TYPE="graphql.operation.type",n.OPERATION_NAME="graphql.operation.name",n.VARIABLES="graphql.variables.",n.ERROR_VALIDATION_NAME="graphql.validation.error"},57317:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(18995),t),o(n(40172),t)},18995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(81708),i=n(64442),a=n(12348),c=n(19712),u=n(64256),l=n(55837),d={mergeItems:!1,depth:-1,allowValues:!1,ignoreResolveSpans:!1},p=[">=14.0.0 <17"];class h extends o.InstrumentationBase{constructor(e={}){super(l.PACKAGE_NAME,l.PACKAGE_VERSION,Object.assign({},d,e))}_getConfig(){return this._config}setConfig(e={}){this._config=Object.assign({},d,e)}init(){const e=new o.InstrumentationNodeModuleDefinition("graphql",p);return e.files.push(this._addPatchingExecute()),e.files.push(this._addPatchingParser()),e.files.push(this._addPatchingValidate()),e}_addPatchingExecute(){return new o.InstrumentationNodeModuleFile("graphql/execution/execute.js",p,(e=>((0,o.isWrapped)(e.execute)&&this._unwrap(e,"execute"),this._wrap(e,"execute",this._patchExecute(e.defaultFieldResolver)),e)),(e=>{e&&this._unwrap(e,"execute")}))}_addPatchingParser(){return new o.InstrumentationNodeModuleFile("graphql/language/parser.js",p,(e=>((0,o.isWrapped)(e.parse)&&this._unwrap(e,"parse"),this._wrap(e,"parse",this._patchParse()),e)),(e=>{e&&this._unwrap(e,"parse")}))}_addPatchingValidate(){return new o.InstrumentationNodeModuleFile("graphql/validation/validate.js",p,(e=>((0,o.isWrapped)(e.validate)&&this._unwrap(e,"validate"),this._wrap(e,"validate",this._patchValidate()),e)),(e=>{e&&this._unwrap(e,"validate")}))}_patchExecute(e){const t=this;return function(n){return function(){let s;if(arguments.length>=2){const n=arguments;s=t._wrapExecuteArgs(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],e)}else{const n=arguments[0];s=t._wrapExecuteArgs(n.schema,n.document,n.rootValue,n.contextValue,n.variableValues,n.operationName,n.fieldResolver,n.typeResolver,e)}const i=(0,u.getOperation)(s.document,s.operationName),c=t._createExecuteSpan(i,s);return s.contextValue[a.OTEL_GRAPHQL_DATA_SYMBOL]={source:s.document?s.document||s.document[a.OTEL_GRAPHQL_DATA_SYMBOL]:void 0,span:c,fields:{}},r.context.with(r.trace.setSpan(r.context.active(),c),(()=>(0,o.safeExecuteInTheMiddle)((()=>n.apply(this,[s])),((e,n)=>{t._handleExecutionResult(c,e,n)}))))}}}_handleExecutionResult(e,t,n){const r=this._getConfig();if(void 0===n||t)(0,u.endSpan)(e,t);else if((0,u.isPromise)(n))n.then((t=>{"function"==typeof r.responseHook?this._executeResponseHook(e,t):(0,u.endSpan)(e)}),(t=>{(0,u.endSpan)(e,t)}));else{if("function"!=typeof r.responseHook)return void(0,u.endSpan)(e);this._executeResponseHook(e,n)}}_executeResponseHook(e,t){const n=this._getConfig();(0,o.safeExecuteInTheMiddle)((()=>{n.responseHook(e,t)}),(t=>{t&&this._diag.error("Error running response hook",t),(0,u.endSpan)(e,void 0)}),!0)}_patchParse(){const e=this;return function(t){return function(n,r){return e._parse(this,t,n,r)}}}_patchValidate(){const e=this;return function(t){return function(n,r,o,s,i){return e._validate(this,t,n,r,o,i,s)}}}_parse(e,t,n,i){const a=this._getConfig(),c=this.tracer.startSpan(s.SpanNames.PARSE);return r.context.with(r.trace.setSpan(r.context.active(),c),(()=>(0,o.safeExecuteInTheMiddle)((()=>t.call(e,n,i)),((e,t)=>{t&&((0,u.getOperation)(t)?t.loc&&(0,u.addSpanSource)(c,t.loc,a.allowValues):c.updateName(s.SpanNames.SCHEMA_PARSE)),(0,u.endSpan)(c,e)}))))}_validate(e,t,n,a,c,l,d){const p=this.tracer.startSpan(s.SpanNames.VALIDATE,{});return r.context.with(r.trace.setSpan(r.context.active(),p),(()=>(0,o.safeExecuteInTheMiddle)((()=>t.call(e,n,a,c,d,l)),((e,t)=>{a.loc||p.updateName(s.SpanNames.SCHEMA_VALIDATE),t&&t.length&&p.recordException({name:i.AttributeNames.ERROR_VALIDATION_NAME,message:JSON.stringify(t)}),(0,u.endSpan)(p,e)}))))}_createExecuteSpan(e,t){var n;const r=this._getConfig(),o=this.tracer.startSpan(s.SpanNames.EXECUTE,{});if(e){const{operation:t,name:n}=e;o.setAttribute(i.AttributeNames.OPERATION_TYPE,t);const r=null==n?void 0:n.value;r?(o.setAttribute(i.AttributeNames.OPERATION_NAME,r),o.updateName(`${t} ${r}`)):o.updateName(t)}else{let e=" ";t.operationName&&(e=` "${t.operationName}" `),e=c.OPERATION_NOT_SUPPORTED.replace("$operationName$",e),o.setAttribute(i.AttributeNames.OPERATION_NAME,e)}return(null===(n=t.document)||void 0===n?void 0:n.loc)&&(0,u.addSpanSource)(o,t.document.loc,r.allowValues),t.variableValues&&r.allowValues&&(0,u.addInputVariableAttributes)(o,t.variableValues),o}_wrapExecuteArgs(e,t,n,r,o,s,i,c,l){if(r||(r={}),r[a.OTEL_GRAPHQL_DATA_SYMBOL]||this._getConfig().ignoreResolveSpans)return{schema:e,document:t,rootValue:n,contextValue:r,variableValues:o,operationName:s,fieldResolver:i,typeResolver:c};const d=null==i,p=null!=i?i:l;return i=(0,u.wrapFieldResolver)(this.tracer,this._getConfig.bind(this),p,d),e&&((0,u.wrapFields)(e.getQueryType(),this.tracer,this._getConfig.bind(this)),(0,u.wrapFields)(e.getMutationType(),this.tracer,this._getConfig.bind(this))),{schema:e,document:t,rootValue:n,contextValue:r,variableValues:o,operationName:s,fieldResolver:i,typeResolver:c}}}t.GraphQLInstrumentation=h},19712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPERATION_NOT_SUPPORTED=void 0,n(12348),t.OPERATION_NOT_SUPPORTED="Operation$operationName$not supported"},12348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OTEL_GRAPHQL_DATA_SYMBOL=t.OTEL_PATCHED_SYMBOL=void 0,t.OTEL_PATCHED_SYMBOL=Symbol.for("opentelemetry.patched"),t.OTEL_GRAPHQL_DATA_SYMBOL=Symbol.for("opentelemetry.graphql_data")},40172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},64256:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapFieldResolver=t.wrapFields=t.getSourceFromLocation=t.getOperation=t.endSpan=t.addSpanSource=t.addInputVariableAttributes=t.isPromise=void 0;const r=n(74681),o=n(81708),s=n(64442),i=n(12348),a=Object.values(o.AllowedOperationTypes);t.isPromise=e=>"function"==typeof(null==e?void 0:e.then);function c(e,t,n){Array.isArray(n)?n.forEach(((n,r)=>{c(e,`${t}.${r}`,n)})):n instanceof Object?Object.entries(n).forEach((([n,r])=>{c(e,`${t}.${n}`,r)})):e.setAttribute(`${s.AttributeNames.VARIABLES}${String(t)}`,n)}function u(e,t,n,r,o){const i=g(t,n,r,o);e.setAttribute(s.AttributeNames.SOURCE,i)}function l(e,t,n,a,c,l){var d,p;const h={[s.AttributeNames.FIELD_NAME]:a.fieldName,[s.AttributeNames.FIELD_PATH]:c.join("."),[s.AttributeNames.FIELD_TYPE]:a.returnType.toString()},f=e.startSpan(`${o.SpanNames.RESOLVE} ${h[s.AttributeNames.FIELD_PATH]}`,{attributes:h},l?r.trace.setSpan(r.context.active(),l):void 0),m=n[i.OTEL_GRAPHQL_DATA_SYMBOL].source,g=a.fieldNodes.find((e=>"Field"===e.kind));return g&&u(f,m.loc,t().allowValues,null===(d=g.loc)||void 0===d?void 0:d.start,null===(p=g.loc)||void 0===p?void 0:p.end),f}function d(e,t){return e[i.OTEL_GRAPHQL_DATA_SYMBOL].fields[t.join(".")]}function p(e,t){for(let n=t.length-1;n>0;n--){const r=d(e,t.slice(0,n));if(r)return r}return{span:e[i.OTEL_GRAPHQL_DATA_SYMBOL].span}}function h(e){return f(" ",e)}function f(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}t.addInputVariableAttributes=function(e,t){Object.entries(t).forEach((([t,n])=>{c(e,t,n)}))},t.addSpanSource=u,t.endSpan=function(e,t){t&&e.recordException(t),e.end()},t.getOperation=function(e,t){if(e&&Array.isArray(e.definitions))return t?e.definitions.filter((e=>{var t;return-1!==a.indexOf(null===(t=e)||void 0===t?void 0:t.operation)})).find((e=>{var n,r;return t===(null===(r=null===(n=e)||void 0===n?void 0:n.name)||void 0===r?void 0:r.value)})):e.definitions.find((e=>{var t;return-1!==a.indexOf(null===(t=e)||void 0===t?void 0:t.operation)}))};const m=[o.TokenKind.FLOAT,o.TokenKind.STRING,o.TokenKind.INT,o.TokenKind.BLOCK_STRING];function g(e,t=!1,n,r){var s,i;let a="";if(null==e?void 0:e.startToken){const c="number"==typeof n?n:e.start,u="number"==typeof r?r:e.end;let l=e.startToken.next,d=1;for(;l;){if(l.start<c){l=l.next,d=null==l?void 0:l.line;continue}if(l.end>u){l=l.next,d=null==l?void 0:l.line;continue}let e=l.value||l.kind,n="";!t&&m.indexOf(l.kind)>=0&&(e="*"),l.kind===o.TokenKind.STRING&&(e=`"${e}"`),l.kind===o.TokenKind.EOF&&(e=""),l.line>d?(a+=f("\n",l.line-d),d=l.line,n=h(l.column-1)):l.line===(null===(s=l.prev)||void 0===s?void 0:s.line)&&(n=h(l.start-((null===(i=l.prev)||void 0===i?void 0:i.end)||0))),a+=n+e,l&&(l=l.next)}}return a}t.getSourceFromLocation=g,t.wrapFields=function e(t,n,r){if(!t||"function"!=typeof t.getFields||t[i.OTEL_PATCHED_SYMBOL])return;const o=t.getFields();t[i.OTEL_PATCHED_SYMBOL]=!0,Object.keys(o).forEach((t=>{const s=o[t];if(s&&(s.resolve&&(s.resolve=S(n,r,s.resolve)),s.type)){let t=s.type;for(;t.ofType;)t=t.ofType;e(t,n,r)}}))};const _=(e,t,n)=>{n&&(e.recordException(t),e.setStatus({code:r.SpanStatusCode.ERROR,message:t.message}),e.end())},y=(e,t)=>{t&&e.end()};function S(e,n,o,s=!1){if(a[i.OTEL_PATCHED_SYMBOL]||"function"!=typeof o)return o;function a(a,c,u,h){if(!o)return;const f=n();if(f.ignoreTrivialResolveSpans&&s&&("object"==typeof(m=a)&&null!==m||"function"==typeof a)&&"function"!=typeof a[h.fieldName])return o.call(this,a,c,u,h);var m;if(!u[i.OTEL_GRAPHQL_DATA_SYMBOL])return o.call(this,a,c,u,h);const g=function(e,t){const n=[];let r=t;for(;r;){let t=r.key;e&&"number"==typeof t&&(t="*"),n.push(String(t)),r=r.prev}return n.reverse()}(f.mergeItems,h&&h.path),S=g.filter((e=>"string"==typeof e)).length;let b,E=!1;if(f.depth>=0&&f.depth<S)b=p(u,g);else{const t=function(e,t,n,r,o){let s=d(n,o),a=!1;if(!s){a=!0;const c=p(n,o);s={parent:c,span:l(e,t,n,r,o,c.span),error:null},function(e,t,n){e[i.OTEL_GRAPHQL_DATA_SYMBOL].fields[t.join(".")]=n}(n,o,s)}return{spanAdded:a,field:s}}(e,n,u,h,g);b=t.field,E=t.spanAdded}return r.context.with(r.trace.setSpan(r.context.active(),b.span),(()=>{try{const e=o.call(this,a,c,u,h);return(0,t.isPromise)(e)?e.then((e=>(y(b.span,E),e)),(e=>{throw _(b.span,e,E),e})):(y(b.span,E),e)}catch(e){throw _(b.span,e,E),e}}))}return a[i.OTEL_PATCHED_SYMBOL]=!0,a}t.wrapFieldResolver=S},55837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.42.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-graphql"},54365:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).HAPI_TYPE="hapi.type",n.PLUGIN_NAME="hapi.plugin.name",n.EXT_TYPE="server.ext.type"},87496:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(92158),t),o(n(54365),t)},92158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HapiInstrumentation=void 0;const r=n(74681),o=n(72477),s=n(25907),i=n(980),a=n(25987),c=n(71281);class u extends s.InstrumentationBase{constructor(e={}){super(i.PACKAGE_NAME,i.PACKAGE_VERSION,e)}init(){return new s.InstrumentationNodeModuleDefinition(a.HapiComponentName,[">=17.0.0 <22"],(e=>{const t="Module"===e[Symbol.toStringTag]?e.default:e;return(0,s.isWrapped)(t.server)||this._wrap(t,"server",this._getServerPatch.bind(this)),(0,s.isWrapped)(t.Server)||this._wrap(t,"Server",this._getServerPatch.bind(this)),t}),(e=>{const t="Module"===e[Symbol.toStringTag]?e.default:e;this._massUnwrap([t],["server","Server"])}))}_getServerPatch(e){const t=this,n=this;return function(r){const o=e.apply(this,[r]);return n._wrap(o,"route",(e=>t._getServerRoutePatch.bind(t)(e))),n._wrap(o,"ext",(e=>t._getServerExtPatch.bind(t)(e))),n._wrap(o,"register",t._getServerRegisterPatch.bind(t)),o}}_getServerRegisterPatch(e){const t=this;return function(n,r){if(Array.isArray(n))for(const e of n){const n=(0,c.getPluginFromInput)(e);t._wrapRegisterHandler(n)}else{const e=(0,c.getPluginFromInput)(n);t._wrapRegisterHandler(e)}return e.apply(this,[n,r])}}_getServerExtPatch(e,t){const n=this;return function(...r){if(Array.isArray(r[0])){const o=r[0];for(let e=0;e<o.length;e++){const r=o[e];if((0,c.isLifecycleExtType)(r.type)){const s=r,i=n._wrapExtMethods(s.method,r.type,t);s.method=i,o[e]=s}}return e.apply(this,r)}if((0,c.isDirectExtInput)(r)){const o=r,s=o[1],i=n._wrapExtMethods(s,o[0],t);return e.apply(this,[o[0],i,o[2]])}if((0,c.isLifecycleExtEventObj)(r[0])){const o=r[0],s=n._wrapExtMethods(o.method,o.type,t);return o.method=s,e.call(this,o)}return e.apply(this,r)}}_getServerRoutePatch(e,t){const n=this;return function(r){if(Array.isArray(r))for(let e=0;e<r.length;e++){const o=n._wrapRouteHandler.call(n,r[e],t);r[e]=o}else r=n._wrapRouteHandler.call(n,r,t);return e.apply(this,[r])}}_wrapRegisterHandler(e){const t=this,n=(0,c.getPluginName)(e),r=e.register,o=this;e.register=function(e,s){return o._wrap(e,"route",(e=>t._getServerRoutePatch.bind(t)(e,n))),o._wrap(e,"ext",(e=>t._getServerExtPatch.bind(t)(e,n))),r(e,s)}}_wrapExtMethods(e,t,n){const o=this;if(e instanceof Array){for(let n=0;n<e.length;n++)e[n]=o._wrapExtMethods(e[n],t);return e}return(0,c.isPatchableExtMethod)(e)?!0===e[a.handlerPatched]?e:(e[a.handlerPatched]=!0,async function(...s){if(void 0===r.trace.getSpan(r.context.active()))return await e.apply(this,s);const i=(0,c.getExtMetadata)(t,n),a=o.tracer.startSpan(i.name,{attributes:i.attributes});try{return await r.context.with(r.trace.setSpan(r.context.active(),a),e,void 0,...s)}catch(e){throw a.recordException(e),a.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}),e}finally{a.end()}}):e}_wrapRouteHandler(e,t){var n;const s=this;if(!0===e[a.handlerPatched])return e;e[a.handlerPatched]=!0;const i=n=>async function(...i){if(void 0===r.trace.getSpan(r.context.active()))return await n.call(this,...i);const a=(0,o.getRPCMetadata)(r.context.active());(null==a?void 0:a.type)===o.RPCType.HTTP&&(a.route=e.path);const u=(0,c.getRouteMetadata)(e,t),l=s.tracer.startSpan(u.name,{attributes:u.attributes});try{return await r.context.with(r.trace.setSpan(r.context.active(),l),(()=>n.call(this,...i)))}catch(e){throw l.recordException(e),l.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}),e}finally{l.end()}};if("function"==typeof e.handler)e.handler=i(e.handler);else if("function"==typeof e.options){const t=e.options;e.options=function(e){const n=t(e);return"function"==typeof n.handler&&(n.handler=i(n.handler)),n}}else"function"==typeof(null===(n=e.options)||void 0===n?void 0:n.handler)&&(e.options.handler=i(e.options.handler));return e}}t.HapiInstrumentation=u},25987:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HapiLifecycleMethodNames=t.HapiLayerType=t.handlerPatched=t.HapiComponentName=void 0,t.HapiComponentName="@hapi/hapi",t.handlerPatched=Symbol("hapi-handler-patched"),t.HapiLayerType={ROUTER:"router",PLUGIN:"plugin",EXT:"server.ext"},t.HapiLifecycleMethodNames=new Set(["onPreAuth","onCredentials","onPostAuth","onPreHandler","onPostHandler","onPreResponse","onRequest"])},71281:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPluginFromInput=t.getExtMetadata=t.getRouteMetadata=t.isPatchableExtMethod=t.isDirectExtInput=t.isLifecycleExtEventObj=t.isLifecycleExtType=t.getPluginName=void 0;const r=n(74813),o=n(25987),s=n(54365);t.getPluginName=function(e){return e.name?e.name:e.pkg.name},t.isLifecycleExtType=e=>"string"==typeof e&&o.HapiLifecycleMethodNames.has(e),t.isLifecycleExtEventObj=e=>{var n;const r=null===(n=e)||void 0===n?void 0:n.type;return void 0!==r&&(0,t.isLifecycleExtType)(r)},t.isDirectExtInput=e=>Array.isArray(e)&&e.length<=3&&(0,t.isLifecycleExtType)(e[0])&&"function"==typeof e[1],t.isPatchableExtMethod=e=>!Array.isArray(e),t.getRouteMetadata=(e,t)=>t?{attributes:{[r.SEMATTRS_HTTP_ROUTE]:e.path,[r.SEMATTRS_HTTP_METHOD]:e.method,[s.AttributeNames.HAPI_TYPE]:o.HapiLayerType.PLUGIN,[s.AttributeNames.PLUGIN_NAME]:t},name:`${t}: route - ${e.path}`}:{attributes:{[r.SEMATTRS_HTTP_ROUTE]:e.path,[r.SEMATTRS_HTTP_METHOD]:e.method,[s.AttributeNames.HAPI_TYPE]:o.HapiLayerType.ROUTER},name:`route - ${e.path}`},t.getExtMetadata=(e,t)=>t?{attributes:{[s.AttributeNames.EXT_TYPE]:e,[s.AttributeNames.HAPI_TYPE]:o.HapiLayerType.EXT,[s.AttributeNames.PLUGIN_NAME]:t},name:`${t}: ext - ${e}`}:{attributes:{[s.AttributeNames.EXT_TYPE]:e,[s.AttributeNames.HAPI_TYPE]:o.HapiLayerType.EXT},name:`ext - ${e}`},t.getPluginFromInput=e=>"plugin"in e?"plugin"in e.plugin?e.plugin.plugin:e.plugin:e},980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.40.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-hapi"},79693:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).HTTP_ERROR_NAME="http.error_name",n.HTTP_ERROR_MESSAGE="http.error_message",n.HTTP_STATUS_TEXT="http.status_text"},3614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpInstrumentation=void 0;const r=n(74681),o=n(72477),s=n(99589),i=n(87016),a=n(36737),c=n(26308),u=n(25907),l=n(72477),d=n(24434),p=n(74813);class h extends u.InstrumentationBase{constructor(e={}){super("@opentelemetry/instrumentation-http",c.VERSION,e),this._spanNotEnded=new WeakSet,this._headerCapture=this._createHeaderCapture()}_updateMetricInstruments(){this._httpServerDurationHistogram=this.meter.createHistogram("http.server.duration",{description:"Measures the duration of inbound HTTP requests.",unit:"ms",valueType:r.ValueType.DOUBLE}),this._httpClientDurationHistogram=this.meter.createHistogram("http.client.duration",{description:"Measures the duration of outbound HTTP requests.",unit:"ms",valueType:r.ValueType.DOUBLE})}setConfig(e={}){super.setConfig(e),this._headerCapture=this._createHeaderCapture()}init(){return[this._getHttpsInstrumentation(),this._getHttpInstrumentation()]}_getHttpInstrumentation(){return new u.InstrumentationNodeModuleDefinition("http",["*"],(e=>(this._wrap(e,"request",this._getPatchOutgoingRequestFunction("http")),this._wrap(e,"get",this._getPatchOutgoingGetFunction(e.request)),this._wrap(e.Server.prototype,"emit",this._getPatchIncomingRequestFunction("http")),e)),(e=>{void 0!==e&&(this._unwrap(e,"request"),this._unwrap(e,"get"),this._unwrap(e.Server.prototype,"emit"))}))}_getHttpsInstrumentation(){return new u.InstrumentationNodeModuleDefinition("https",["*"],(e=>(this._wrap(e,"request",this._getPatchHttpsOutgoingRequestFunction("https")),this._wrap(e,"get",this._getPatchHttpsOutgoingGetFunction(e.request)),this._wrap(e.Server.prototype,"emit",this._getPatchIncomingRequestFunction("https")),e)),(e=>{void 0!==e&&(this._unwrap(e,"request"),this._unwrap(e,"get"),this._unwrap(e.Server.prototype,"emit"))}))}_getPatchIncomingRequestFunction(e){return t=>this._incomingRequestFunction(e,t)}_getPatchOutgoingRequestFunction(e){return t=>this._outgoingRequestFunction(e,t)}_getPatchOutgoingGetFunction(e){return t=>function(t,...n){const r=e(t,...n);return r.end(),r}}_getPatchHttpsOutgoingRequestFunction(e){return t=>{const n=this;return function(r,...o){var s;return"https"===e&&"object"==typeof r&&"URL"!==(null===(s=null==r?void 0:r.constructor)||void 0===s?void 0:s.name)&&(r=Object.assign({},r),n._setDefaultOptions(r)),n._getPatchOutgoingRequestFunction(e)(t)(r,...o)}}}_setDefaultOptions(e){e.protocol=e.protocol||"https:",e.port=e.port||443}_getPatchHttpsOutgoingGetFunction(e){return t=>{const n=this;return function(r,...o){return n._getPatchOutgoingGetFunction(e)(t)(r,...o)}}}_traceClientRequest(e,t,n,o){this.getConfig().requestHook&&this._callRequestHook(t,e);let i=!1;return e.prependListener("response",(c=>{this._diag.debug("outgoingRequest on response()"),e.listenerCount("response")<=1&&c.resume();const l=a.getOutgoingRequestAttributesOnResponse(c);t.setAttributes(l),o=Object.assign(o,a.getOutgoingRequestMetricAttributesOnResponse(l)),this.getConfig().responseHook&&this._callResponseHook(t,c),this._headerCapture.client.captureRequestHeaders(t,(t=>e.getHeader(t))),this._headerCapture.client.captureResponseHeaders(t,(e=>c.headers[e])),r.context.bind(r.context.active(),c);const p=()=>{if(this._diag.debug("outgoingRequest on end()"),i)return;let s;i=!0,s=c.aborted&&!c.complete?{code:r.SpanStatusCode.ERROR}:{code:a.parseResponseStatus(r.SpanKind.CLIENT,c.statusCode)},t.setStatus(s),this.getConfig().applyCustomAttributesOnSpan&&(0,u.safeExecuteInTheMiddle)((()=>this.getConfig().applyCustomAttributesOnSpan(t,e,c)),(()=>{}),!0),this._closeHttpSpan(t,r.SpanKind.CLIENT,n,o)};c.on("end",p),s.lt(process.version,"16.0.0")&&c.on("close",p),c.on(d.errorMonitor,(e=>{this._diag.debug("outgoingRequest on error()",e),i||(i=!0,a.setSpanWithError(t,e),t.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}),this._closeHttpSpan(t,r.SpanKind.CLIENT,n,o))}))})),e.on("close",(()=>{this._diag.debug("outgoingRequest on request close()"),e.aborted||i||(i=!0,this._closeHttpSpan(t,r.SpanKind.CLIENT,n,o))})),e.on(d.errorMonitor,(e=>{this._diag.debug("outgoingRequest on request error()",e),i||(i=!0,a.setSpanWithError(t,e),this._closeHttpSpan(t,r.SpanKind.CLIENT,n,o))})),this._diag.debug("http.ClientRequest return request"),e}_incomingRequestFunction(e,t){const n=this;return function(s,...c){if("request"!==s)return t.apply(this,[s,...c]);const p=c[0],h=c[1],f=p.url&&i.parse(p.url).pathname||"/",m=p.method||"GET";if(n._diag.debug(`${e} instrumentation incomingRequest`),a.isIgnored(f,n.getConfig().ignoreIncomingPaths,(e=>n._diag.error("caught ignoreIncomingPaths error: ",e)))||(0,u.safeExecuteInTheMiddle)((()=>{var e,t;return null===(t=(e=n.getConfig()).ignoreIncomingRequestHook)||void 0===t?void 0:t.call(e,p)}),(e=>{null!=e&&n._diag.error("caught ignoreIncomingRequestHook error: ",e)}),!0))return r.context.with((0,o.suppressTracing)(r.context.active()),(()=>(r.context.bind(r.context.active(),p),r.context.bind(r.context.active(),h),t.apply(this,[s,...c]))));const g=p.headers,_=a.getIncomingRequestAttributes(p,{component:e,serverName:n.getConfig().serverName,hookAttributes:n._callStartSpanHook(p,n.getConfig().startIncomingSpanHook)}),y={kind:r.SpanKind.SERVER,attributes:_},S=(0,o.hrTime)(),b=a.getIncomingRequestMetricAttributes(_),E=r.propagation.extract(r.ROOT_CONTEXT,g),v=n._startHttpSpan(m,y,E),T={type:l.RPCType.HTTP,span:v};return r.context.with((0,l.setRPCMetadata)(r.trace.setSpan(E,v),T),(()=>{r.context.bind(r.context.active(),p),r.context.bind(r.context.active(),h),n.getConfig().requestHook&&n._callRequestHook(v,p),n.getConfig().responseHook&&n._callResponseHook(v,h),n._headerCapture.server.captureRequestHeaders(v,(e=>p.headers[e]));let e=!1;return h.on("close",(()=>{e||n._onServerResponseFinish(p,h,v,b,S)})),h.on(d.errorMonitor,(t=>{e=!0,n._onServerResponseError(v,b,S,t)})),(0,u.safeExecuteInTheMiddle)((()=>t.apply(this,[s,...c])),(e=>{if(e)throw a.setSpanWithError(v,e),n._closeHttpSpan(v,r.SpanKind.SERVER,S,b),e}))}))}}_outgoingRequestFunction(e,t){const n=this;return function(c,...l){if(!a.isValidOptionsType(c))return t.apply(this,[c,...l]);const d="object"==typeof l[0]&&("string"==typeof c||c instanceof i.URL)?l.shift():void 0,{origin:p,pathname:h,method:f,optionsParsed:m}=a.getRequestInfo(c,d);if("http"===e&&s.lt(process.version,"9.0.0")&&"https:"===m.protocol)return t.apply(this,[m,...l]);if(a.isIgnored(p+h,n.getConfig().ignoreOutgoingUrls,(e=>n._diag.error("caught ignoreOutgoingUrls error: ",e)))||(0,u.safeExecuteInTheMiddle)((()=>{var e,t;return null===(t=(e=n.getConfig()).ignoreOutgoingRequestHook)||void 0===t?void 0:t.call(e,m)}),(e=>{null!=e&&n._diag.error("caught ignoreOutgoingRequestHook error: ",e)}),!0))return t.apply(this,[m,...l]);const{hostname:g,port:_}=a.extractHostnameAndPort(m),y=a.getOutgoingRequestAttributes(m,{component:e,port:_,hostname:g,hookAttributes:n._callStartSpanHook(m,n.getConfig().startOutgoingSpanHook)}),S=(0,o.hrTime)(),b=a.getOutgoingRequestMetricAttributes(y),E={kind:r.SpanKind.CLIENT,attributes:y},v=n._startHttpSpan(f,E),T=r.context.active(),I=r.trace.setSpan(T,v);return m.headers?m.headers=Object.assign({},m.headers):m.headers={},r.propagation.inject(I,m.headers),r.context.with(I,(()=>{const o=l[l.length-1];"function"==typeof o&&(l[l.length-1]=r.context.bind(T,o));const s=(0,u.safeExecuteInTheMiddle)((()=>t.apply(this,[m,...l])),(e=>{if(e)throw a.setSpanWithError(v,e),n._closeHttpSpan(v,r.SpanKind.CLIENT,S,b),e}));return n._diag.debug(`${e} instrumentation outgoingRequest`),r.context.bind(T,s),n._traceClientRequest(s,v,S,b)}))}}_onServerResponseFinish(e,t,n,o,s){const i=a.getIncomingRequestAttributesOnResponse(e,t);o=Object.assign(o,a.getIncomingRequestMetricAttributesOnResponse(i)),this._headerCapture.server.captureResponseHeaders(n,(e=>t.getHeader(e))),n.setAttributes(i).setStatus({code:a.parseResponseStatus(r.SpanKind.SERVER,t.statusCode)});const c=i[p.SEMATTRS_HTTP_ROUTE];c&&n.updateName(`${e.method||"GET"} ${c}`),this.getConfig().applyCustomAttributesOnSpan&&(0,u.safeExecuteInTheMiddle)((()=>this.getConfig().applyCustomAttributesOnSpan(n,e,t)),(()=>{}),!0),this._closeHttpSpan(n,r.SpanKind.SERVER,s,o)}_onServerResponseError(e,t,n,o){a.setSpanWithError(e,o),this._closeHttpSpan(e,r.SpanKind.SERVER,n,t)}_startHttpSpan(e,t,n=r.context.active()){const o=t.kind===r.SpanKind.CLIENT?this.getConfig().requireParentforOutgoingSpans:this.getConfig().requireParentforIncomingSpans;let s;const i=r.trace.getSpan(n);return s=!0===o&&void 0===i?r.trace.wrapSpanContext(r.INVALID_SPAN_CONTEXT):!0===o&&(null==i?void 0:i.spanContext().isRemote)?i:this.tracer.startSpan(e,t,n),this._spanNotEnded.add(s),s}_closeHttpSpan(e,t,n,s){if(!this._spanNotEnded.has(e))return;e.end(),this._spanNotEnded.delete(e);const i=(0,o.hrTimeToMilliseconds)((0,o.hrTimeDuration)(n,(0,o.hrTime)()));t===r.SpanKind.SERVER?this._httpServerDurationHistogram.record(i,s):t===r.SpanKind.CLIENT&&this._httpClientDurationHistogram.record(i,s)}_callResponseHook(e,t){(0,u.safeExecuteInTheMiddle)((()=>this.getConfig().responseHook(e,t)),(()=>{}),!0)}_callRequestHook(e,t){(0,u.safeExecuteInTheMiddle)((()=>this.getConfig().requestHook(e,t)),(()=>{}),!0)}_callStartSpanHook(e,t){if("function"==typeof t)return(0,u.safeExecuteInTheMiddle)((()=>t(e)),(()=>{}),!0)}_createHeaderCapture(){var e,t,n,r,o,s,i,c,u,l,d,p;const h=this.getConfig();return{client:{captureRequestHeaders:a.headerCapture("request",null!==(n=null===(t=null===(e=h.headersToSpanAttributes)||void 0===e?void 0:e.client)||void 0===t?void 0:t.requestHeaders)&&void 0!==n?n:[]),captureResponseHeaders:a.headerCapture("response",null!==(s=null===(o=null===(r=h.headersToSpanAttributes)||void 0===r?void 0:r.client)||void 0===o?void 0:o.responseHeaders)&&void 0!==s?s:[])},server:{captureRequestHeaders:a.headerCapture("request",null!==(u=null===(c=null===(i=h.headersToSpanAttributes)||void 0===i?void 0:i.server)||void 0===c?void 0:c.requestHeaders)&&void 0!==u?u:[]),captureResponseHeaders:a.headerCapture("response",null!==(p=null===(d=null===(l=h.headersToSpanAttributes)||void 0===l?void 0:l.server)||void 0===d?void 0:d.responseHeaders)&&void 0!==p?p:[])}}}}t.HttpInstrumentation=h},86520:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3614),t),o(n(47421),t),o(n(36737),t)},47421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},36737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headerCapture=t.getIncomingRequestMetricAttributesOnResponse=t.getIncomingRequestAttributesOnResponse=t.getIncomingRequestMetricAttributes=t.getIncomingRequestAttributes=t.getOutgoingRequestMetricAttributesOnResponse=t.getOutgoingRequestAttributesOnResponse=t.setAttributesFromHttpKind=t.getOutgoingRequestMetricAttributes=t.getOutgoingRequestAttributes=t.extractHostnameAndPort=t.isValidOptionsType=t.getRequestInfo=t.isCompressed=t.setResponseContentLengthAttribute=t.setRequestContentLengthAttribute=t.setSpanWithError=t.isIgnored=t.satisfiesPattern=t.parseResponseStatus=t.getAbsoluteUrl=void 0;const r=n(74681),o=n(74813),s=n(72477),i=n(87016),a=n(79693);function c(e){const t=e["content-length"];if(void 0===t)return null;const n=parseInt(t,10);return isNaN(n)?null:n}t.getAbsoluteUrl=(e,t,n="http:")=>{const r=e||{},o=r.protocol||n,s=(r.port||"").toString(),i=r.path||"/";let a=r.host||r.hostname||t.host||"localhost";return-1===a.indexOf(":")&&s&&"80"!==s&&"443"!==s&&(a+=`:${s}`),`${o}//${a}${i}`},t.parseResponseStatus=(e,t)=>{const n=e===r.SpanKind.CLIENT?400:500;return t&&t>=100&&t<n?r.SpanStatusCode.UNSET:r.SpanStatusCode.ERROR},t.satisfiesPattern=(e,t)=>{if("string"==typeof t)return t===e;if(t instanceof RegExp)return t.test(e);if("function"==typeof t)return t(e);throw new TypeError("Pattern is in unsupported datatype")},t.isIgnored=(e,n,r)=>{if(!n)return!1;try{for(const r of n)if((0,t.satisfiesPattern)(e,r))return!0}catch(e){r&&r(e)}return!1},t.setSpanWithError=(e,t)=>{const n=t.message;e.setAttribute(a.AttributeNames.HTTP_ERROR_NAME,t.name),e.setAttribute(a.AttributeNames.HTTP_ERROR_MESSAGE,n),e.setStatus({code:r.SpanStatusCode.ERROR,message:n}),e.recordException(t)},t.setRequestContentLengthAttribute=(e,n)=>{const r=c(e.headers);null!==r&&((0,t.isCompressed)(e.headers)?n[o.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH]=r:n[o.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED]=r)},t.setResponseContentLengthAttribute=(e,n)=>{const r=c(e.headers);null!==r&&((0,t.isCompressed)(e.headers)?n[o.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH]=r:n[o.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED]=r)},t.isCompressed=e=>{const t=e["content-encoding"];return!!t&&"identity"!==t},t.getRequestInfo=(e,t)=>{let n,r="/",o="";if("string"==typeof e)n=i.parse(e),r=n.pathname||"/",o=`${n.protocol||"http:"}//${n.host}`,void 0!==t&&Object.assign(n,t);else if(e instanceof i.URL)n={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,path:`${e.pathname||""}${e.search||""}`},""!==e.port&&(n.port=Number(e.port)),(e.username||e.password)&&(n.auth=`${e.username}:${e.password}`),r=e.pathname,o=e.origin,void 0!==t&&Object.assign(n,t);else{n=Object.assign({protocol:e.host?"http:":void 0},e),r=e.pathname,!r&&n.path&&(r=i.parse(n.path).pathname||"/");const t=n.host||(null!=n.port?`${n.hostname}${n.port}`:n.hostname);o=`${n.protocol||"http:"}//${t}`}return{origin:o,pathname:r,method:n.method?n.method.toUpperCase():"GET",optionsParsed:n}},t.isValidOptionsType=e=>{if(!e)return!1;const t=typeof e;return"string"===t||"object"===t&&!Array.isArray(e)},t.extractHostnameAndPort=e=>{var t;if(e.hostname&&e.port)return{hostname:e.hostname,port:e.port};const n=(null===(t=e.host)||void 0===t?void 0:t.match(/^([^:/ ]+)(:\d{1,5})?/))||null,r=e.hostname||(null===n?"localhost":n[1]);let o=e.port;return o||(o=n&&n[2]?n[2].substring(1):"https:"===e.protocol?"443":"80"),{hostname:r,port:o}},t.getOutgoingRequestAttributes=(e,n)=>{var r;const s=n.hostname,i=n.port,a=e.method,c=a?a.toUpperCase():"GET",u=e.headers||{},l=u["user-agent"],d={[o.SEMATTRS_HTTP_URL]:(0,t.getAbsoluteUrl)(e,u,`${n.component}:`),[o.SEMATTRS_HTTP_METHOD]:c,[o.SEMATTRS_HTTP_TARGET]:e.path||"/",[o.SEMATTRS_NET_PEER_NAME]:s,[o.SEMATTRS_HTTP_HOST]:null!==(r=u.host)&&void 0!==r?r:`${s}:${i}`};return void 0!==l&&(d[o.SEMATTRS_HTTP_USER_AGENT]=l),Object.assign(d,n.hookAttributes)},t.getOutgoingRequestMetricAttributes=e=>{const t={};return t[o.SEMATTRS_HTTP_METHOD]=e[o.SEMATTRS_HTTP_METHOD],t[o.SEMATTRS_NET_PEER_NAME]=e[o.SEMATTRS_NET_PEER_NAME],t},t.setAttributesFromHttpKind=(e,t)=>{e&&(t[o.SEMATTRS_HTTP_FLAVOR]=e,"QUIC"!==e.toUpperCase()?t[o.SEMATTRS_NET_TRANSPORT]=o.NETTRANSPORTVALUES_IP_TCP:t[o.SEMATTRS_NET_TRANSPORT]=o.NETTRANSPORTVALUES_IP_UDP)},t.getOutgoingRequestAttributesOnResponse=e=>{const{statusCode:n,statusMessage:r,httpVersion:s,socket:i}=e,c={};if(i){const{remoteAddress:e,remotePort:t}=i;c[o.SEMATTRS_NET_PEER_IP]=e,c[o.SEMATTRS_NET_PEER_PORT]=t}return(0,t.setResponseContentLengthAttribute)(e,c),n&&(c[o.SEMATTRS_HTTP_STATUS_CODE]=n,c[a.AttributeNames.HTTP_STATUS_TEXT]=(r||"").toUpperCase()),(0,t.setAttributesFromHttpKind)(s,c),c},t.getOutgoingRequestMetricAttributesOnResponse=e=>{const t={};return t[o.SEMATTRS_NET_PEER_PORT]=e[o.SEMATTRS_NET_PEER_PORT],t[o.SEMATTRS_HTTP_STATUS_CODE]=e[o.SEMATTRS_HTTP_STATUS_CODE],t[o.SEMATTRS_HTTP_FLAVOR]=e[o.SEMATTRS_HTTP_FLAVOR],t},t.getIncomingRequestAttributes=(e,n)=>{const r=e.headers,s=r["user-agent"],a=r["x-forwarded-for"],c=e.method||"GET",u=e.httpVersion,l=e.url?i.parse(e.url):null,d=(null==l?void 0:l.host)||r.host,p=(null==l?void 0:l.hostname)||(null==d?void 0:d.replace(/^(.*)(:[0-9]{1,5})/,"$1"))||"localhost",h=n.serverName,f={[o.SEMATTRS_HTTP_URL]:(0,t.getAbsoluteUrl)(l,r,`${n.component}:`),[o.SEMATTRS_HTTP_HOST]:d,[o.SEMATTRS_NET_HOST_NAME]:p,[o.SEMATTRS_HTTP_METHOD]:c,[o.SEMATTRS_HTTP_SCHEME]:n.component};return"string"==typeof a&&(f[o.SEMATTRS_HTTP_CLIENT_IP]=a.split(",")[0]),"string"==typeof h&&(f[o.SEMATTRS_HTTP_SERVER_NAME]=h),l&&(f[o.SEMATTRS_HTTP_TARGET]=l.path||"/"),void 0!==s&&(f[o.SEMATTRS_HTTP_USER_AGENT]=s),(0,t.setRequestContentLengthAttribute)(e,f),(0,t.setAttributesFromHttpKind)(u,f),Object.assign(f,n.hookAttributes)},t.getIncomingRequestMetricAttributes=e=>{const t={};return t[o.SEMATTRS_HTTP_SCHEME]=e[o.SEMATTRS_HTTP_SCHEME],t[o.SEMATTRS_HTTP_METHOD]=e[o.SEMATTRS_HTTP_METHOD],t[o.SEMATTRS_NET_HOST_NAME]=e[o.SEMATTRS_NET_HOST_NAME],t[o.SEMATTRS_HTTP_FLAVOR]=e[o.SEMATTRS_HTTP_FLAVOR],t},t.getIncomingRequestAttributesOnResponse=(e,t)=>{const{socket:n}=e,{statusCode:i,statusMessage:c}=t,u=(0,s.getRPCMetadata)(r.context.active()),l={};if(n){const{localAddress:e,localPort:t,remoteAddress:r,remotePort:s}=n;l[o.SEMATTRS_NET_HOST_IP]=e,l[o.SEMATTRS_NET_HOST_PORT]=t,l[o.SEMATTRS_NET_PEER_IP]=r,l[o.SEMATTRS_NET_PEER_PORT]=s}return l[o.SEMATTRS_HTTP_STATUS_CODE]=i,l[a.AttributeNames.HTTP_STATUS_TEXT]=(c||"").toUpperCase(),(null==u?void 0:u.type)===s.RPCType.HTTP&&void 0!==u.route&&(l[o.SEMATTRS_HTTP_ROUTE]=u.route),l},t.getIncomingRequestMetricAttributesOnResponse=e=>{const t={};return t[o.SEMATTRS_HTTP_STATUS_CODE]=e[o.SEMATTRS_HTTP_STATUS_CODE],t[o.SEMATTRS_NET_HOST_PORT]=e[o.SEMATTRS_NET_HOST_PORT],void 0!==e[o.SEMATTRS_HTTP_ROUTE]&&(t[o.SEMATTRS_HTTP_ROUTE]=e[o.SEMATTRS_HTTP_ROUTE]),t},t.headerCapture=function(e,t){const n=new Map;for(let e=0,r=t.length;e<r;e++){const r=t[e].toLowerCase();n.set(r,r.replace(/-/g,"_"))}return(t,r)=>{for(const o of n.keys()){const s=r(o);if(void 0===s)continue;const i=n.get(o),a=`http.${e}.header.${i}`;"string"==typeof s?t.setAttribute(a,[s]):Array.isArray(s)?t.setAttribute(a,s):t.setAttribute(a,[s])}}}},26308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.52.1"},83251:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(15061),t),o(n(82322),t)},15061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IORedisInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(74813),i=n(25907),a=n(91118),c=n(67238),u=n(555),l={requireParentSpan:!0};class d extends o.InstrumentationBase{constructor(e={}){super(u.PACKAGE_NAME,u.PACKAGE_VERSION,Object.assign({},l,e))}init(){return[new o.InstrumentationNodeModuleDefinition("ioredis",[">=2.0.0 <6"],((e,t)=>{const n="Module"===e[Symbol.toStringTag]?e.default:e;return(0,o.isWrapped)(n.prototype.sendCommand)&&this._unwrap(n.prototype,"sendCommand"),this._wrap(n.prototype,"sendCommand",this._patchSendCommand(t)),(0,o.isWrapped)(n.prototype.connect)&&this._unwrap(n.prototype,"connect"),this._wrap(n.prototype,"connect",this._patchConnection()),e}),(e=>{if(void 0===e)return;const t="Module"===e[Symbol.toStringTag]?e.default:e;this._unwrap(t.prototype,"sendCommand"),this._unwrap(t.prototype,"connect")}))]}_patchSendCommand(e){return t=>this._traceSendCommand(t,e)}_patchConnection(){return e=>this._traceConnection(e)}_traceSendCommand(e,t){const n=this;return function(o){if(arguments.length<1||"object"!=typeof o)return e.apply(this,arguments);const u=n.getConfig(),l=(null==u?void 0:u.dbStatementSerializer)||c.defaultDbStatementSerializer,d=void 0===r.trace.getSpan(r.context.active());if(!0===(null==u?void 0:u.requireParentSpan)&&d)return e.apply(this,arguments);const p=n.tracer.startSpan(o.name,{kind:r.SpanKind.CLIENT,attributes:{[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_REDIS,[s.SEMATTRS_DB_STATEMENT]:l(o.name,o.args)}});(null==u?void 0:u.requestHook)&&(0,i.safeExecuteInTheMiddle)((()=>null==u?void 0:u.requestHook(p,{moduleVersion:t,cmdName:o.name,cmdArgs:o.args})),(e=>{e&&r.diag.error("ioredis instrumentation: request hook failed",e)}),!0);const{host:h,port:f}=this.options;p.setAttributes({[s.SEMATTRS_NET_PEER_NAME]:h,[s.SEMATTRS_NET_PEER_PORT]:f,[s.SEMATTRS_DB_CONNECTION_STRING]:`redis://${h}:${f}`});try{const t=e.apply(this,arguments),n=o.resolve;o.resolve=function(e){(0,i.safeExecuteInTheMiddle)((()=>{var t;return null===(t=null==u?void 0:u.responseHook)||void 0===t?void 0:t.call(u,p,o.name,o.args,e)}),(e=>{e&&r.diag.error("ioredis instrumentation: response hook failed",e)}),!0),(0,a.endSpan)(p,null),n(e)};const s=o.reject;return o.reject=function(e){(0,a.endSpan)(p,e),s(e)},t}catch(e){throw(0,a.endSpan)(p,e),e}}}_traceConnection(e){const t=this;return function(){const n=t.getConfig(),o=void 0===r.trace.getSpan(r.context.active());if(!0===(null==n?void 0:n.requireParentSpan)&&o)return e.apply(this,arguments);const i=t.tracer.startSpan("connect",{kind:r.SpanKind.CLIENT,attributes:{[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_REDIS,[s.SEMATTRS_DB_STATEMENT]:"connect"}}),{host:c,port:u}=this.options;i.setAttributes({[s.SEMATTRS_NET_PEER_NAME]:c,[s.SEMATTRS_NET_PEER_PORT]:u,[s.SEMATTRS_DB_CONNECTION_STRING]:`redis://${c}:${u}`});try{const t=e.apply(this,arguments);return(0,a.endSpan)(i,null),t}catch(e){throw(0,a.endSpan)(i,e),e}}}}t.IORedisInstrumentation=d},82322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},91118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endSpan=void 0;const r=n(74681);t.endSpan=(e,t)=>{t&&(e.recordException(t),e.setStatus({code:r.SpanStatusCode.ERROR,message:t.message})),e.end()}},555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.42.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-ioredis"},20906:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).KOA_TYPE="koa.type",n.KOA_NAME="koa.name"},45845:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(67651),t),o(n(96252),t),o(n(20906),t)},67651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KoaInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(96252),i=n(39373),a=n(79504),c=n(72477),u=n(73136);class l extends o.InstrumentationBase{constructor(e={}){super(i.PACKAGE_NAME,i.PACKAGE_VERSION,e)}setConfig(e={}){this._config=Object.assign({},e)}getConfig(){return this._config}init(){return new o.InstrumentationNodeModuleDefinition("koa",[">=2.0.0 <3"],(e=>{const t="Module"===e[Symbol.toStringTag]?e.default:e;return null==t?t:((0,o.isWrapped)(t.prototype.use)&&this._unwrap(t.prototype,"use"),this._wrap(t.prototype,"use",this._getKoaUsePatch.bind(this)),e)}),(e=>{const t="Module"===e[Symbol.toStringTag]?e.default:e;(0,o.isWrapped)(t.prototype.use)&&this._unwrap(t.prototype,"use")}))}_getKoaUsePatch(e){const t=this;return function(n){let r;return r=n.router?t._patchRouterDispatch(n):t._patchLayer(n,!1),e.apply(this,[r])}}_patchRouterDispatch(e){var t;r.diag.debug("Patching @koa/router dispatch");const n=e.router,o=null!==(t=null==n?void 0:n.stack)&&void 0!==t?t:[];for(const e of o){const t=e.path,n=e.stack;for(let e=0;e<n.length;e++){const r=n[e];n[e]=this._patchLayer(r,!0,t)}}return e}_patchLayer(e,t,n){const i=t?s.KoaLayerType.ROUTER:s.KoaLayerType.MIDDLEWARE;return!0===e[u.kLayerPatched]||(0,a.isLayerIgnored)(i,this.getConfig())?e:"GeneratorFunction"===e.constructor.name||"AsyncGeneratorFunction"===e.constructor.name?(r.diag.debug("ignoring generator-based Koa middleware layer"),e):(e[u.kLayerPatched]=!0,r.diag.debug("patching Koa middleware layer"),async(s,u)=>{if(void 0===r.trace.getSpan(r.context.active()))return e(s,u);const l=(0,a.getMiddlewareMetadata)(s,e,t,n),d=this.tracer.startSpan(l.name,{attributes:l.attributes}),p=(0,c.getRPCMetadata)(r.context.active());(null==p?void 0:p.type)===c.RPCType.HTTP&&s._matchedRoute&&(p.route=s._matchedRoute.toString()),this.getConfig().requestHook&&(0,o.safeExecuteInTheMiddle)((()=>this.getConfig().requestHook(d,{context:s,middlewareLayer:e,layerType:i})),(e=>{e&&r.diag.error("koa instrumentation: request hook failed",e)}),!0);const h=r.trace.setSpan(r.context.active(),d);return r.context.with(h,(async()=>{try{return await e(s,u)}catch(e){throw d.recordException(e),e}finally{d.end()}}))})}}t.KoaInstrumentation=l},73136:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kLayerPatched=void 0,t.kLayerPatched=Symbol("koa-layer-patched")},96252:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.KoaLayerType=void 0,(n=t.KoaLayerType||(t.KoaLayerType={})).ROUTER="router",n.MIDDLEWARE="middleware"},79504:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLayerIgnored=t.getMiddlewareMetadata=void 0;const r=n(96252),o=n(20906),s=n(74813);t.getMiddlewareMetadata=(e,t,n,i)=>{var a;return n?{attributes:{[o.AttributeNames.KOA_NAME]:null==i?void 0:i.toString(),[o.AttributeNames.KOA_TYPE]:r.KoaLayerType.ROUTER,[s.SEMATTRS_HTTP_ROUTE]:null==i?void 0:i.toString()},name:e._matchedRouteName||`router - ${i}`}:{attributes:{[o.AttributeNames.KOA_NAME]:null!==(a=t.name)&&void 0!==a?a:"middleware",[o.AttributeNames.KOA_TYPE]:r.KoaLayerType.MIDDLEWARE},name:`middleware - ${t.name}`}},t.isLayerIgnored=(e,t)=>{var n;return!(!Array.isArray(null==t?void 0:t.ignoreLayersType)||!(null===(n=null==t?void 0:t.ignoreLayersType)||void 0===n?void 0:n.includes(e)))}},39373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.42.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-koa"},71526:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(46656),t),o(n(44667),t)},46656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MongoDBInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(74813),i=n(12761),a=n(28306);class c extends o.InstrumentationBase{constructor(e={}){super(a.PACKAGE_NAME,a.PACKAGE_VERSION,e)}_updateMetricInstruments(){this._connectionsUsage=this.meter.createUpDownCounter("db.client.connections.usage",{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"})}init(){const{v3PatchConnection:e,v3UnpatchConnection:t}=this._getV3ConnectionPatches(),{v4PatchConnect:n,v4UnpatchConnect:r}=this._getV4ConnectPatches(),{v4PatchConnectionCallback:s,v4PatchConnectionPromise:i,v4UnpatchConnection:a}=this._getV4ConnectionPatches(),{v4PatchConnectionPool:c,v4UnpatchConnectionPool:u}=this._getV4ConnectionPoolPatches(),{v4PatchSessions:l,v4UnpatchSessions:d}=this._getV4SessionsPatches();return[new o.InstrumentationNodeModuleDefinition("mongodb",[">=3.3.0 <4"],void 0,void 0,[new o.InstrumentationNodeModuleFile("mongodb/lib/core/wireprotocol/index.js",[">=3.3.0 <4"],e,t)]),new o.InstrumentationNodeModuleDefinition("mongodb",[">=4.0.0 <7"],void 0,void 0,[new o.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",[">=4.0.0 <6.4"],s,a),new o.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",[">=6.4.0 <7"],i,a),new o.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection_pool.js",[">=4.0.0 <6.4"],c,u),new o.InstrumentationNodeModuleFile("mongodb/lib/cmap/connect.js",[">=4.0.0 <7"],n,r),new o.InstrumentationNodeModuleFile("mongodb/lib/sessions.js",[">=4.0.0 <7"],l,d)])]}_getV3ConnectionPatches(){return{v3PatchConnection:e=>((0,o.isWrapped)(e.insert)&&this._unwrap(e,"insert"),this._wrap(e,"insert",this._getV3PatchOperation("insert")),(0,o.isWrapped)(e.remove)&&this._unwrap(e,"remove"),this._wrap(e,"remove",this._getV3PatchOperation("remove")),(0,o.isWrapped)(e.update)&&this._unwrap(e,"update"),this._wrap(e,"update",this._getV3PatchOperation("update")),(0,o.isWrapped)(e.command)&&this._unwrap(e,"command"),this._wrap(e,"command",this._getV3PatchCommand()),(0,o.isWrapped)(e.query)&&this._unwrap(e,"query"),this._wrap(e,"query",this._getV3PatchFind()),(0,o.isWrapped)(e.getMore)&&this._unwrap(e,"getMore"),this._wrap(e,"getMore",this._getV3PatchCursor()),e),v3UnpatchConnection:e=>{void 0!==e&&(this._unwrap(e,"insert"),this._unwrap(e,"remove"),this._unwrap(e,"update"),this._unwrap(e,"command"),this._unwrap(e,"query"),this._unwrap(e,"getMore"))}}}_getV4SessionsPatches(){return{v4PatchSessions:e=>((0,o.isWrapped)(e.acquire)&&this._unwrap(e,"acquire"),this._wrap(e.ServerSessionPool.prototype,"acquire",this._getV4AcquireCommand()),(0,o.isWrapped)(e.release)&&this._unwrap(e,"release"),this._wrap(e.ServerSessionPool.prototype,"release",this._getV4ReleaseCommand()),e),v4UnpatchSessions:e=>{void 0!==e&&((0,o.isWrapped)(e.acquire)&&this._unwrap(e,"acquire"),(0,o.isWrapped)(e.release)&&this._unwrap(e,"release"))}}}_getV4AcquireCommand(){const e=this;return t=>function(){const n=this.sessions.length,r=t.call(this),o=this.sessions.length;return n===o?e._connectionsUsage.add(1,{state:"used","pool.name":e._poolName}):n-1===o&&(e._connectionsUsage.add(-1,{state:"idle","pool.name":e._poolName}),e._connectionsUsage.add(1,{state:"used","pool.name":e._poolName})),r}}_getV4ReleaseCommand(){const e=this;return t=>function(n){const r=t.call(this,n);return e._connectionsUsage.add(-1,{state:"used","pool.name":e._poolName}),e._connectionsUsage.add(1,{state:"idle","pool.name":e._poolName}),r}}_getV4ConnectionPoolPatches(){return{v4PatchConnectionPool:e=>{const t=e.ConnectionPool.prototype;return(0,o.isWrapped)(t.checkOut)&&this._unwrap(t,"checkOut"),this._wrap(t,"checkOut",this._getV4ConnectionPoolCheckOut()),e},v4UnpatchConnectionPool:e=>{void 0!==e&&this._unwrap(e.ConnectionPool.prototype,"checkOut")}}}_getV4ConnectPatches(){return{v4PatchConnect:e=>((0,o.isWrapped)(e.connect)&&this._unwrap(e,"connect"),this._wrap(e,"connect",this._getV4ConnectCommand()),e),v4UnpatchConnect:e=>{void 0!==e&&this._unwrap(e,"connect")}}}_getV4ConnectionPoolCheckOut(){return e=>function(t){const n=r.context.bind(r.context.active(),t);return e.call(this,n)}}_getV4ConnectCommand(){const e=this;return t=>function(n,r){if(1===t.length){const r=t.call(this,n);return r&&"function"==typeof r.then&&r.then((()=>e.setPoolName(n)),(()=>{})),r}return t.call(this,n,(function(t,o){!t&&o?(e.setPoolName(n),r(t,o)):r(t,o)}))}}_getV4ConnectionPatches(){return{v4PatchConnectionCallback:e=>((0,o.isWrapped)(e.Connection.prototype.command)&&this._unwrap(e.Connection.prototype,"command"),this._wrap(e.Connection.prototype,"command",this._getV4PatchCommandCallback()),e),v4PatchConnectionPromise:e=>((0,o.isWrapped)(e.Connection.prototype.command)&&this._unwrap(e.Connection.prototype,"command"),this._wrap(e.Connection.prototype,"command",this._getV4PatchCommandPromise()),e),v4UnpatchConnection:e=>{void 0!==e&&this._unwrap(e.Connection.prototype,"command")}}}_getV3PatchOperation(e){const t=this;return n=>function(o,s,i,a,c){const u="function"==typeof a?a:c;if(!r.trace.getSpan(r.context.active())||"function"!=typeof u||"object"!=typeof i)return"function"==typeof a?n.call(this,o,s,i,a):n.call(this,o,s,i,a,c);const l=t.tracer.startSpan(`mongodb.${e}`,{kind:r.SpanKind.CLIENT});t._populateV3Attributes(l,s,o,i[0],e);const d=t._patchEnd(l,u);return"function"==typeof a?n.call(this,o,s,i,d):n.call(this,o,s,i,a,d)}}_getV3PatchCommand(){const e=this;return t=>function(n,o,s,a,u){const l="function"==typeof a?a:u;if(!r.trace.getSpan(r.context.active())||"function"!=typeof l||"object"!=typeof s)return"function"==typeof a?t.call(this,n,o,s,a):t.call(this,n,o,s,a,u);const d=c._getCommandType(s),p=d===i.MongodbCommandType.UNKNOWN?"command":d,h=e.tracer.startSpan(`mongodb.${p}`,{kind:r.SpanKind.CLIENT}),f=d===i.MongodbCommandType.UNKNOWN?void 0:d;e._populateV3Attributes(h,o,n,s,f);const m=e._patchEnd(h,l);return"function"==typeof a?t.call(this,n,o,s,m):t.call(this,n,o,s,a,m)}}_getV4PatchCommandCallback(){const e=this;return t=>function(n,o,s,i){const a=r.trace.getSpan(r.context.active()),c=i,u=Object.keys(o)[0];if("function"!=typeof c||"object"!=typeof o||o.ismaster||o.hello)return t.call(this,n,o,s,i);let l;a&&(l=e.tracer.startSpan(`mongodb.${u}`,{kind:r.SpanKind.CLIENT}),e._populateV4Attributes(l,this,n,o,u));const d=e._patchEnd(l,c,this.id,u);return t.call(this,n,o,s,d)}}_getV4PatchCommandPromise(){const e=this;return t=>function(...n){const[o,s]=n,i=r.trace.getSpan(r.context.active()),a=Object.keys(s)[0];if("object"!=typeof s||s.ismaster||s.hello)return t.apply(this,n);let c;i&&(c=e.tracer.startSpan(`mongodb.${a}`,{kind:r.SpanKind.CLIENT}),e._populateV4Attributes(c,this,o,s,a));const u=e._patchEnd(c,(()=>{}),this.id,a),l=t.apply(this,n);return l.then((e=>u(null,e)),(e=>u(e))),l}}_getV3PatchFind(){const e=this;return t=>function(n,o,s,i,a,c){const u="function"==typeof a?a:c;if(!r.trace.getSpan(r.context.active())||"function"!=typeof u||"object"!=typeof s)return"function"==typeof a?t.call(this,n,o,s,i,a):t.call(this,n,o,s,i,a,c);const l=e.tracer.startSpan("mongodb.find",{kind:r.SpanKind.CLIENT});e._populateV3Attributes(l,o,n,s,"find");const d=e._patchEnd(l,u);return"function"==typeof a?t.call(this,n,o,s,i,d):t.call(this,n,o,s,i,a,d)}}_getV3PatchCursor(){const e=this;return t=>function(n,o,s,i,a,c){const u="function"==typeof a?a:c;if(!r.trace.getSpan(r.context.active())||"function"!=typeof u)return"function"==typeof a?t.call(this,n,o,s,i,a):t.call(this,n,o,s,i,a,c);const l=e.tracer.startSpan("mongodb.getMore",{kind:r.SpanKind.CLIENT});e._populateV3Attributes(l,o,n,s.cmd,"getMore");const d=e._patchEnd(l,u);return"function"==typeof a?t.call(this,n,o,s,i,d):t.call(this,n,o,s,i,a,d)}}static _getCommandType(e){return void 0!==e.createIndexes?i.MongodbCommandType.CREATE_INDEXES:void 0!==e.findandmodify?i.MongodbCommandType.FIND_AND_MODIFY:void 0!==e.ismaster?i.MongodbCommandType.IS_MASTER:void 0!==e.count?i.MongodbCommandType.COUNT:void 0!==e.aggregate?i.MongodbCommandType.AGGREGATE:i.MongodbCommandType.UNKNOWN}_populateV4Attributes(e,t,n,r,o){let s,i,a;if(t){const e="string"==typeof t.address?t.address.split(":"):"";2===e.length&&(s=e[0],i=e[1])}a=(null==r?void 0:r.documents)&&r.documents[0]?r.documents[0]:(null==r?void 0:r.cursors)?r.cursors:r,this._addAllSpanAttributes(e,n.db,n.collection,s,i,a,o)}_populateV3Attributes(e,t,n,r,o){var s,i,a,c,u,l,d,p;let h,f;if(n&&n.s&&(h=null!==(i=null===(s=n.s.options)||void 0===s?void 0:s.host)&&void 0!==i?i:n.s.host,f=null===(u=null!==(c=null===(a=n.s.options)||void 0===a?void 0:a.port)&&void 0!==c?c:n.s.port)||void 0===u?void 0:u.toString(),null==h||null==f)){const e=null===(l=n.description)||void 0===l?void 0:l.address;if(e){const t=e.split(":");h=t[0],f=t[1]}}const[m,g]=t.toString().split("."),_=null!==(p=null!==(d=null==r?void 0:r.query)&&void 0!==d?d:null==r?void 0:r.q)&&void 0!==p?p:r;this._addAllSpanAttributes(e,m,g,h,f,_,o)}_addAllSpanAttributes(e,t,n,r,i,a,c){if(e.setAttributes({[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_MONGODB,[s.SEMATTRS_DB_NAME]:t,[s.SEMATTRS_DB_MONGODB_COLLECTION]:n,[s.SEMATTRS_DB_OPERATION]:c,[s.SEMATTRS_DB_CONNECTION_STRING]:`mongodb://${r}:${i}/${t}`}),r&&i){e.setAttribute(s.SEMATTRS_NET_PEER_NAME,r);const t=parseInt(i,10);isNaN(t)||e.setAttribute(s.SEMATTRS_NET_PEER_PORT,t)}if(!a)return;const u="function"==typeof this._config.dbStatementSerializer?this._config.dbStatementSerializer:this._defaultDbStatementSerializer.bind(this);(0,o.safeExecuteInTheMiddle)((()=>{const t=u(a);e.setAttribute(s.SEMATTRS_DB_STATEMENT,t)}),(e=>{e&&this._diag.error("Error running dbStatementSerializer hook",e)}),!0)}_defaultDbStatementSerializer(e){var t;const n=(null===(t=this._config)||void 0===t?void 0:t.enhancedDatabaseReporting)?e:this._scrubStatement(e);return JSON.stringify(n)}_scrubStatement(e){return Array.isArray(e)?e.map((e=>this._scrubStatement(e))):"object"==typeof e&&null!==e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,this._scrubStatement(t)]))):"?"}_handleExecutionResult(e,t){const n=this.getConfig();"function"==typeof n.responseHook&&(0,o.safeExecuteInTheMiddle)((()=>{n.responseHook(e,{data:t})}),(e=>{e&&this._diag.error("Error running response hook",e)}),!0)}_patchEnd(e,t,n,o){const s=r.context.active(),i=this;return function(...n){const a=n[0];if(e){if(a instanceof Error)null==e||e.setStatus({code:r.SpanStatusCode.ERROR,message:a.message});else{const t=n[1];i._handleExecutionResult(e,t)}e.end()}return r.context.with(s,(()=>("endSessions"===o&&i._connectionsUsage.add(-1,{state:"idle","pool.name":i._poolName}),t.apply(this,n))))}}setPoolName(e){var t,n;const r=`mongodb://${null===(t=e.hostAddress)||void 0===t?void 0:t.host}:${null===(n=e.hostAddress)||void 0===n?void 0:n.port}/${e.dbName}`;this._poolName=r}}t.MongoDBInstrumentation=c},12761:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MongodbCommandType=void 0,(n=t.MongodbCommandType||(t.MongodbCommandType={})).CREATE_INDEXES="createIndexes",n.FIND_AND_MODIFY="findAndModify",n.IS_MASTER="isMaster",n.COUNT="count",n.AGGREGATE="aggregate",n.UNKNOWN="unknown"},44667:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MongodbCommandType=void 0,(n=t.MongodbCommandType||(t.MongodbCommandType={})).CREATE_INDEXES="createIndexes",n.FIND_AND_MODIFY="findAndModify",n.IS_MASTER="isMaster",n.COUNT="count",n.UNKNOWN="unknown"},28306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.46.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-mongodb"},57125:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(120),t),o(n(30124),t)},120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MongooseInstrumentation=t._STORED_PARENT_SPAN=void 0;const r=n(74681),o=n(72477),s=n(34560),i=n(25907),a=n(59581),c=n(74813),u=["remove","deleteOne","deleteMany","find","findOne","estimatedDocumentCount","countDocuments","count","distinct","where","$where","findOneAndUpdate","findOneAndDelete","findOneAndReplace","findOneAndRemove"];t._STORED_PARENT_SPAN=Symbol("stored-parent-span");class l extends i.InstrumentationBase{constructor(e={}){super(a.PACKAGE_NAME,a.PACKAGE_VERSION,e)}setConfig(e={}){this._config=Object.assign({},e)}init(){return new i.InstrumentationNodeModuleDefinition("mongoose",[">=5.9.7 <7"],this.patch.bind(this),this.unpatch.bind(this))}patch(e,t){return this._wrap(e.Model.prototype,"save",this.patchOnModelMethods("save",t)),e.Model.prototype.$save=e.Model.prototype.save,this._wrap(e.Model.prototype,"remove",this.patchOnModelMethods("remove",t)),this._wrap(e.Query.prototype,"exec",this.patchQueryExec(t)),this._wrap(e.Aggregate.prototype,"exec",this.patchAggregateExec(t)),u.forEach((t=>{this._wrap(e.Query.prototype,t,this.patchAndCaptureSpanContext(t))})),this._wrap(e.Model,"aggregate",this.patchModelAggregate()),e}unpatch(e){this._unwrap(e.Model.prototype,"save"),e.Model.prototype.$save=e.Model.prototype.save,this._unwrap(e.Model.prototype,"remove"),this._unwrap(e.Query.prototype,"exec"),this._unwrap(e.Aggregate.prototype,"exec"),u.forEach((t=>{this._unwrap(e.Query.prototype,t)})),this._unwrap(e.Model,"aggregate")}patchAggregateExec(e){const n=this;return o=>function(s){var i;if(n._config.requireParentSpan&&void 0===r.trace.getSpan(r.context.active()))return o.apply(this,arguments);const a=this[t._STORED_PARENT_SPAN],u={};n._config.dbStatementSerializer&&(u[c.SEMATTRS_DB_STATEMENT]=n._config.dbStatementSerializer("aggregate",{options:this.options,aggregatePipeline:this._pipeline}));const l=n._startSpan(this._model.collection,null===(i=this._model)||void 0===i?void 0:i.modelName,"aggregate",u,a);return n._handleResponse(l,o,this,arguments,s,e)}}patchQueryExec(e){const n=this;return o=>function(s){if(n._config.requireParentSpan&&void 0===r.trace.getSpan(r.context.active()))return o.apply(this,arguments);const i=this[t._STORED_PARENT_SPAN],a={};n._config.dbStatementSerializer&&(a[c.SEMATTRS_DB_STATEMENT]=n._config.dbStatementSerializer(this.op,{condition:this._conditions,updates:this._update,options:this.options,fields:this._fields}));const u=n._startSpan(this.mongooseCollection,this.model.modelName,this.op,a,i);return n._handleResponse(u,o,this,arguments,s,e)}}patchOnModelMethods(e,t){const n=this;return o=>function(s,i){if(n._config.requireParentSpan&&void 0===r.trace.getSpan(r.context.active()))return o.apply(this,arguments);const a={document:this};!s||s instanceof Function||(a.options=s);const u={};n._config.dbStatementSerializer&&(u[c.SEMATTRS_DB_STATEMENT]=n._config.dbStatementSerializer(e,a));const l=n._startSpan(this.constructor.collection,this.constructor.modelName,e,u);return s instanceof Function&&(i=s,s=void 0),n._handleResponse(l,o,this,arguments,i,t)}}patchModelAggregate(){const e=this;return n=>function(){const o=r.trace.getSpan(r.context.active()),s=e._callOriginalFunction((()=>n.apply(this,arguments)));return s&&(s[t._STORED_PARENT_SPAN]=o),s}}patchAndCaptureSpanContext(e){const n=this;return e=>function(){return this[t._STORED_PARENT_SPAN]=r.trace.getSpan(r.context.active()),n._callOriginalFunction((()=>e.apply(this,arguments)))}}_startSpan(e,t,n,o,i){return this.tracer.startSpan(`mongoose.${t}.${n}`,{kind:r.SpanKind.CLIENT,attributes:Object.assign(Object.assign(Object.assign({},o),(0,s.getAttributesFromCollection)(e)),{[c.SEMATTRS_DB_OPERATION]:n,[c.SEMATTRS_DB_SYSTEM]:"mongoose"})},i?r.trace.setSpan(r.context.active(),i):void 0)}_handleResponse(e,t,n,r,o,i=void 0){const a=this;if(o instanceof Function)return a._callOriginalFunction((()=>(0,s.handleCallbackResponse)(o,t,n,e,r,a._config.responseHook,i)));{const o=a._callOriginalFunction((()=>t.apply(n,r)));return(0,s.handlePromiseResponse)(o,e,a._config.responseHook,i)}}_callOriginalFunction(e){var t;return(null===(t=this._config)||void 0===t?void 0:t.suppressInternalInstrumentation)?r.context.with((0,o.suppressTracing)(r.context.active()),e):e()}}t.MongooseInstrumentation=l},30124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},34560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleCallbackResponse=t.handlePromiseResponse=t.getAttributesFromCollection=void 0;const r=n(74681),o=n(25907),s=n(74813);function i(e,t={}){e.recordException(t),e.setStatus({code:r.SpanStatusCode.ERROR,message:`${t.message} ${t.code?`\nMongoose Error Code: ${t.code}`:""}`})}function a(e,t,n,s=void 0){n&&(0,o.safeExecuteInTheMiddle)((()=>n(e,{moduleVersion:s,response:t})),(e=>{e&&r.diag.error("mongoose instrumentation: responseHook error",e)}),!0)}t.getAttributesFromCollection=function(e){return{[s.SEMATTRS_DB_MONGODB_COLLECTION]:e.name,[s.SEMATTRS_DB_NAME]:e.conn.name,[s.SEMATTRS_DB_USER]:e.conn.user,[s.SEMATTRS_NET_PEER_NAME]:e.conn.host,[s.SEMATTRS_NET_PEER_PORT]:e.conn.port}},t.handlePromiseResponse=function(e,t,n,r=void 0){return e instanceof Promise?e.then((e=>(a(t,e,n,r),e))).catch((e=>{throw i(t,e),e})).finally((()=>t.end())):(a(t,e,n,r),t.end(),e)},t.handleCallbackResponse=function(e,t,n,r,o,s,c=void 0){let u=0;return 2===o.length&&(u=1),o[u]=(t,n)=>(t?i(r,t):a(r,n,s,c),r.end(),e(t,n)),t.apply(n,o)}},59581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.40.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-mongoose"},81960:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(t.AttributeNames||(t.AttributeNames={})).MYSQL_VALUES="db.mysql.values"},90450:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(26164),t),o(n(54223),t)},26164:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MySQLInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(74813),i=n(81960),a=n(67731),c=n(26822);class u extends o.InstrumentationBase{constructor(e={}){super(c.PACKAGE_NAME,c.PACKAGE_VERSION,e),this._setMetricInstruments()}setMeterProvider(e){super.setMeterProvider(e),this._setMetricInstruments()}_setMetricInstruments(){this._connectionsUsage=this.meter.createUpDownCounter("db.client.connections.usage",{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"})}init(){return[new o.InstrumentationNodeModuleDefinition("mysql",[">=2.0.0 <3"],(e=>((0,o.isWrapped)(e.createConnection)&&this._unwrap(e,"createConnection"),this._wrap(e,"createConnection",this._patchCreateConnection()),(0,o.isWrapped)(e.createPool)&&this._unwrap(e,"createPool"),this._wrap(e,"createPool",this._patchCreatePool()),(0,o.isWrapped)(e.createPoolCluster)&&this._unwrap(e,"createPoolCluster"),this._wrap(e,"createPoolCluster",this._patchCreatePoolCluster()),e)),(e=>{void 0!==e&&(this._unwrap(e,"createConnection"),this._unwrap(e,"createPool"),this._unwrap(e,"createPoolCluster"))}))]}_patchCreateConnection(){return e=>{const t=this;return function(n){const r=e(...arguments);return t._wrap(r,"query",t._patchQuery(r)),r}}}_patchCreatePool(){return e=>{const t=this;return function(n){const r=e(...arguments);return t._wrap(r,"query",t._patchQuery(r)),t._wrap(r,"getConnection",t._patchGetConnection(r)),t._wrap(r,"end",t._patchPoolEnd(r)),t._setPoolcallbacks(r,t,""),r}}}_patchPoolEnd(e){return t=>{const n=this;return function(r){const o=e._allConnections.length,s=e._freeConnections.length,i=o-s,c=(0,a.getPoolName)(e);n._connectionsUsage.add(-i,{state:"used",name:c}),n._connectionsUsage.add(-s,{state:"idle",name:c}),t.apply(e,arguments)}}}_patchCreatePoolCluster(){return e=>{const t=this;return function(n){const r=e(...arguments);return t._wrap(r,"getConnection",t._patchGetConnection(r)),t._wrap(r,"add",t._patchAdd(r)),r}}}_patchAdd(e){return t=>{const n=this;return function(r,o){if(!n._enabled)return n._unwrap(e,"add"),t.apply(e,arguments);t.apply(e,arguments);const s=e._nodes;if(s){const t=s["object"==typeof r?"CLUSTER::"+e._lastId:String(r)].pool;n._setPoolcallbacks(t,n,r)}}}}_patchGetConnection(e){return t=>{const n=this;return function(r,o,s){if(!n._enabled)return n._unwrap(e,"getConnection"),t.apply(e,arguments);if(1===arguments.length&&"function"==typeof r){const o=n._getConnectionCallbackPatchFn(r);return t.call(e,o)}if(2===arguments.length&&"function"==typeof o){const s=n._getConnectionCallbackPatchFn(o);return t.call(e,r,s)}if(3===arguments.length&&"function"==typeof s){const i=n._getConnectionCallbackPatchFn(s);return t.call(e,r,o,i)}return t.apply(e,arguments)}}}_getConnectionCallbackPatchFn(e){const t=this,n=r.context.active();return function(s,i){i&&((0,o.isWrapped)(i.query)||t._wrap(i,"query",t._patchQuery(i))),"function"==typeof e&&r.context.with(n,e,this,s,i)}}_patchQuery(e){return t=>{const n=this;return function(o,c,l){if(!n._enabled)return n._unwrap(e,"query"),t.apply(e,arguments);const d=n.tracer.startSpan((0,a.getSpanName)(o),{kind:r.SpanKind.CLIENT,attributes:Object.assign(Object.assign({},u.COMMON_ATTRIBUTES),(0,a.getConnectionAttributes)(e.config))});if(d.setAttribute(s.SEMATTRS_DB_STATEMENT,(0,a.getDbStatement)(o)),n.getConfig().enhancedDatabaseReporting){let e;Array.isArray(c)?e=c:arguments[2]&&(e=[c]),d.setAttribute(i.AttributeNames.MYSQL_VALUES,(0,a.getDbValues)(o,e))}const p=Array.from(arguments).findIndex((e=>"function"==typeof e)),h=r.context.active();if(-1===p){const n=r.context.with(r.trace.setSpan(r.context.active(),d),(()=>t.apply(e,arguments)));return r.context.bind(h,n),n.on("error",(e=>d.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}))).on("end",(()=>{d.end()}))}return n._wrap(arguments,p,n._patchCallbackQuery(d,h)),r.context.with(r.trace.setSpan(r.context.active(),d),(()=>t.apply(e,arguments)))}}}_patchCallbackQuery(e,t){return n=>function(o,s,i){return o&&e.setStatus({code:r.SpanStatusCode.ERROR,message:o.message}),e.end(),r.context.with(t,(()=>n(...arguments)))}}_setPoolcallbacks(e,t,n){const r=n||(0,a.getPoolName)(e);e.on("connection",(e=>{t._connectionsUsage.add(1,{state:"idle",name:r})})),e.on("acquire",(e=>{t._connectionsUsage.add(-1,{state:"idle",name:r}),t._connectionsUsage.add(1,{state:"used",name:r})})),e.on("release",(e=>{t._connectionsUsage.add(-1,{state:"used",name:r}),t._connectionsUsage.add(1,{state:"idle",name:r})}))}}t.MySQLInstrumentation=u,u.COMMON_ATTRIBUTES={[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_MYSQL}},54223:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},67731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPoolName=t.arrayStringifyHelper=t.getSpanName=t.getDbValues=t.getDbStatement=t.getConnectionAttributes=void 0;const r=n(74813);function o(e,t,n){let r=`jdbc:mysql://${e||"localhost"}`;return"number"==typeof t&&(r+=`:${t}`),"string"==typeof n&&(r+=`/${n}`),r}function s(e){return e?`[${e.toString()}]`:""}t.getConnectionAttributes=function(e){const{host:t,port:n,database:s,user:i}=function(e){const{host:t,port:n,database:r,user:o}=e&&e.connectionConfig||e||{};return{host:t,port:n,database:r,user:o}}(e),a=parseInt(n,10);return isNaN(a)?{[r.SEMATTRS_NET_PEER_NAME]:t,[r.SEMATTRS_DB_CONNECTION_STRING]:o(t,n,s),[r.SEMATTRS_DB_NAME]:s,[r.SEMATTRS_DB_USER]:i}:{[r.SEMATTRS_NET_PEER_NAME]:t,[r.SEMATTRS_NET_PEER_PORT]:a,[r.SEMATTRS_DB_CONNECTION_STRING]:o(t,n,s),[r.SEMATTRS_DB_NAME]:s,[r.SEMATTRS_DB_USER]:i}},t.getDbStatement=function(e){return"string"==typeof e?e:e.sql},t.getDbValues=function(e,t){return s("string"==typeof e?t:t||e.values)},t.getSpanName=function(e){return"object"==typeof e?e.sql:e.split(" ")[0]},t.arrayStringifyHelper=s,t.getPoolName=function(e){const t=e.config.connectionConfig;let n="";return n+=t.host?`host: '${t.host}', `:"",n+=t.port?`port: ${t.port}, `:"",n+=t.database?`database: '${t.database}', `:"",n+=t.user?`user: '${t.user}'`:"",t.user||(n=n.substring(0,n.length-2)),n.trim()}},26822:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.40.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-mysql"},73932:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(48330),t),o(n(42537),t)},48330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MySQL2Instrumentation=void 0;const r=n(74681),o=n(25907),s=n(74813),i=n(57263),a=n(64677),c=n(76224);class u extends o.InstrumentationBase{constructor(e={}){super(c.PACKAGE_NAME,c.PACKAGE_VERSION,e)}init(){return[new o.InstrumentationNodeModuleDefinition("mysql2",[">=1.4.2 <4"],(e=>{const t=e.Connection.prototype;return(0,o.isWrapped)(t.query)&&this._unwrap(t,"query"),this._wrap(t,"query",this._patchQuery(e.format,!1)),(0,o.isWrapped)(t.execute)&&this._unwrap(t,"execute"),this._wrap(t,"execute",this._patchQuery(e.format,!0)),e}),(e=>{if(void 0===e)return;const t=e.Connection.prototype;this._unwrap(t,"query"),this._unwrap(t,"execute")}))]}_patchQuery(e,t){return n=>{const c=this;return function(l,d,p){const h=c._config;let f;Array.isArray(d)?f=d:arguments[2]&&(f=[d]);const m=c.tracer.startSpan((0,a.getSpanName)(l),{kind:r.SpanKind.CLIENT,attributes:Object.assign(Object.assign(Object.assign({},u.COMMON_ATTRIBUTES),(0,a.getConnectionAttributes)(this.config)),{[s.SEMATTRS_DB_STATEMENT]:(0,a.getDbStatement)(l,e,f)})});!t&&h.addSqlCommenterCommentToQueries&&(arguments[0]=l="string"==typeof l?(0,i.addSqlCommenterComment)(m,l):Object.assign(l,{sql:(0,i.addSqlCommenterComment)(m,l.sql)}));const g=(0,a.once)(((e,t)=>{e?m.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}):"function"==typeof h.responseHook&&(0,o.safeExecuteInTheMiddle)((()=>{h.responseHook(m,{queryResults:t})}),(e=>{e&&c._diag.warn("Failed executing responseHook",e)}),!0),m.end()}));if(1===arguments.length){"function"==typeof l.onResult&&c._wrap(l,"onResult",c._patchCallbackQuery(g));const e=n.apply(this,arguments);return e.once("error",(e=>{g(e)})).once("result",(e=>{g(void 0,e)})),e}return"function"==typeof arguments[1]?c._wrap(arguments,1,c._patchCallbackQuery(g)):"function"==typeof arguments[2]&&c._wrap(arguments,2,c._patchCallbackQuery(g)),n.apply(this,arguments)}}}_patchCallbackQuery(e){return t=>function(n,r,o){return e(n,r),t(...arguments)}}}t.MySQL2Instrumentation=u,u.COMMON_ATTRIBUTES={[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_MYSQL}},42537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},64677:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.once=t.getSpanName=t.getDbStatement=t.getConnectionAttributes=void 0;const r=n(74813);function o(e,t,n){let r=`jdbc:mysql://${e||"localhost"}`;return"number"==typeof t&&(r+=`:${t}`),"string"==typeof n&&(r+=`/${n}`),r}t.getConnectionAttributes=function(e){const{host:t,port:n,database:s,user:i}=function(e){const{host:t,port:n,database:r,user:o}=e&&e.connectionConfig||e||{};return{host:t,port:n,database:r,user:o}}(e),a=parseInt(n,10);return isNaN(a)?{[r.SEMATTRS_NET_PEER_NAME]:t,[r.SEMATTRS_DB_CONNECTION_STRING]:o(t,n,s),[r.SEMATTRS_DB_NAME]:s,[r.SEMATTRS_DB_USER]:i}:{[r.SEMATTRS_NET_PEER_NAME]:t,[r.SEMATTRS_NET_PEER_PORT]:a,[r.SEMATTRS_DB_CONNECTION_STRING]:o(t,n,s),[r.SEMATTRS_DB_NAME]:s,[r.SEMATTRS_DB_USER]:i}},t.getDbStatement=function(e,t,n){return"string"==typeof e?n?t(e,n):e:n||e.values?t(e.sql,n||e.values):e.sql},t.getSpanName=function(e){var t;const n="object"==typeof e?e.sql:e;return null===(t=null==n?void 0:n.split(" "))||void 0===t?void 0:t[0]},t.once=e=>{let t=!1;return(...n)=>{if(!t)return t=!0,e(...n)}}},76224:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.40.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-mysql2"},88736:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).VERSION="nestjs.version",n.TYPE="nestjs.type",n.MODULE="nestjs.module",n.CONTROLLER="nestjs.controller",n.CALLBACK="nestjs.callback",n.PIPES="nestjs.pipes",n.INTERCEPTORS="nestjs.interceptors",n.GUARDS="nestjs.guards"},68866:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NestType=void 0,(n=t.NestType||(t.NestType={})).APP_CREATION="app_creation",n.REQUEST_CONTEXT="request_context",n.REQUEST_HANDLER="handler"},42938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NestType=t.AttributeNames=void 0;var r=n(88736);Object.defineProperty(t,"AttributeNames",{enumerable:!0,get:function(){return r.AttributeNames}});var o=n(68866);Object.defineProperty(t,"NestType",{enumerable:!0,get:function(){return o.NestType}})},84455:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(43265),t),o(n(88736),t)},43265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NestInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(72087),i=n(74813),a=n(42938),c=[">=4.0.0 <11"];class u extends o.InstrumentationBase{constructor(e={}){super(s.PACKAGE_NAME,s.PACKAGE_VERSION,e)}init(){const e=new o.InstrumentationNodeModuleDefinition(u.COMPONENT,c);return e.files.push(this.getNestFactoryFileInstrumentation(c),this.getRouterExecutionContextFileInstrumentation(c)),e}getNestFactoryFileInstrumentation(e){return new o.InstrumentationNodeModuleFile("@nestjs/core/nest-factory.js",e,((e,t)=>(this.ensureWrapped(e.NestFactoryStatic.prototype,"create",function(e,t){return function(n){return function(o){const s=e.startSpan("Create Nest App",{attributes:Object.assign(Object.assign({},u.COMMON_ATTRIBUTES),{[a.AttributeNames.TYPE]:a.NestType.APP_CREATION,[a.AttributeNames.VERSION]:t,[a.AttributeNames.MODULE]:o.name})}),i=r.trace.setSpan(r.context.active(),s);return r.context.with(i,(async()=>{try{return await n.apply(this,arguments)}catch(e){throw l(s,e)}finally{s.end()}}))}}}(this.tracer,t)),e)),(e=>{this._unwrap(e.NestFactoryStatic.prototype,"create")}))}getRouterExecutionContextFileInstrumentation(e){return new o.InstrumentationNodeModuleFile("@nestjs/core/router/router-execution-context.js",e,((e,t)=>(this.ensureWrapped(e.RouterExecutionContext.prototype,"create",function(e,t){return function(n){return function(o,s){arguments[1]=function(e,t,n){const o=n.name||"anonymous nest handler",s={attributes:Object.assign(Object.assign({},u.COMMON_ATTRIBUTES),{[a.AttributeNames.VERSION]:t,[a.AttributeNames.TYPE]:a.NestType.REQUEST_HANDLER,[a.AttributeNames.CALLBACK]:n.name})},i=function(){const t=e.startSpan(o,s),i=r.trace.setSpan(r.context.active(),t);return r.context.with(i,(async()=>{try{return await n.apply(this,arguments)}catch(e){throw l(t,e)}finally{t.end()}}))};return n.name&&Object.defineProperty(i,"name",{value:n.name}),Reflect.getMetadataKeys(n).forEach((e=>{Reflect.defineMetadata(e,Reflect.getMetadata(e,n),i)})),i}(e,t,s);const c=n.apply(this,arguments),d=s.name,p=o.constructor&&o.constructor.name?o.constructor.name:"UnnamedInstance",h=d?`${p}.${d}`:p;return function(n,o,s){var f,m;const g=e.startSpan(h,{attributes:Object.assign(Object.assign({},u.COMMON_ATTRIBUTES),{[a.AttributeNames.VERSION]:t,[a.AttributeNames.TYPE]:a.NestType.REQUEST_CONTEXT,[i.SEMATTRS_HTTP_METHOD]:n.method,[i.SEMATTRS_HTTP_URL]:n.originalUrl||n.url,[i.SEMATTRS_HTTP_ROUTE]:(null===(f=n.route)||void 0===f?void 0:f.path)||(null===(m=n.routeOptions)||void 0===m?void 0:m.url)||n.routerPath,[a.AttributeNames.CONTROLLER]:p,[a.AttributeNames.CALLBACK]:d})}),_=r.trace.setSpan(r.context.active(),g);return r.context.with(_,(async()=>{try{return await c.apply(this,arguments)}catch(e){throw l(g,e)}finally{g.end()}}))}}}}(this.tracer,t)),e)),(e=>{this._unwrap(e.RouterExecutionContext.prototype,"create")}))}ensureWrapped(e,t,n){(0,o.isWrapped)(e[t])&&this._unwrap(e,t),this._wrap(e,t,n)}}t.NestInstrumentation=u,u.COMPONENT="@nestjs/core",u.COMMON_ATTRIBUTES={component:u.COMPONENT};const l=(e,t)=>(e.recordException(t),e.setStatus({code:r.SpanStatusCode.ERROR,message:t.message}),t)},72087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.39.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-nestjs-core"},34974:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,(n=t.AttributeNames||(t.AttributeNames={})).PG_VALUES="db.postgresql.values",n.PG_PLAN="db.postgresql.plan",n.IDLE_TIMEOUT_MILLIS="db.postgresql.idle.timeout.millis",n.MAX_CLIENT="db.postgresql.max.client"},6760:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanNames=void 0,(n=t.SpanNames||(t.SpanNames={})).QUERY_PREFIX="pg.query",n.CONNECT="pg.connect",n.POOL_CONNECT="pg-pool.connect"},65:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(14423),t),o(n(97904),t),o(n(34974),t)},14423:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PgInstrumentation=void 0;const r=n(25907),o=n(74681),s=n(61644),i=n(57263),a=n(73953),c=n(6760);class u extends r.InstrumentationBase{constructor(e={}){super(a.PACKAGE_NAME,a.PACKAGE_VERSION,e)}init(){return[new r.InstrumentationNodeModuleDefinition("pg",[">=8.0.0 <9"],(e=>{const t="Module"===e[Symbol.toStringTag]?e.default:e;return(0,r.isWrapped)(t.Client.prototype.query)&&this._unwrap(t.Client.prototype,"query"),(0,r.isWrapped)(t.Client.prototype.connect)&&this._unwrap(t.Client.prototype,"connect"),this._wrap(t.Client.prototype,"query",this._getClientQueryPatch()),this._wrap(t.Client.prototype,"connect",this._getClientConnectPatch()),e}),(e=>{const t="Module"===e[Symbol.toStringTag]?e.default:e;(0,r.isWrapped)(t.Client.prototype.query)&&this._unwrap(t.Client.prototype,"query")})),new r.InstrumentationNodeModuleDefinition("pg-pool",[">=2.0.0 <4"],(e=>((0,r.isWrapped)(e.prototype.connect)&&this._unwrap(e.prototype,"connect"),this._wrap(e.prototype,"connect",this._getPoolConnectPatch()),e)),(e=>{(0,r.isWrapped)(e.prototype.connect)&&this._unwrap(e.prototype,"connect")}))]}setConfig(e={}){this._config=Object.assign({},e)}getConfig(){return this._config}_getClientConnectPatch(){const e=this;return t=>function(n){if(s.shouldSkipInstrumentation(e.getConfig()))return t.call(this,n);const r=e.tracer.startSpan(c.SpanNames.CONNECT,{kind:o.SpanKind.CLIENT,attributes:s.getSemanticAttributesFromConnection(this)});if(n){const e=o.trace.getSpan(o.context.active());n=s.patchClientConnectCallback(r,n),e&&(n=o.context.bind(o.context.active(),n))}return l(r,o.context.with(o.trace.setSpan(o.context.active(),r),(()=>t.call(this,n))))}}_getClientQueryPatch(){const e=this;return t=>(this._diag.debug("Patching pg.Client.prototype.query"),function(...n){if(s.shouldSkipInstrumentation(e.getConfig()))return t.apply(this,n);const a=n[0],c="string"==typeof a,u=s.isObjectWithTextString(a),l=c?{text:a,values:Array.isArray(n[1])?n[1]:void 0}:u?a:void 0,d=e.getConfig(),p=s.handleConfigQuery.call(this,e.tracer,d,l);if(d.addSqlCommenterCommentToQueries&&(n[0]=c?(0,i.addSqlCommenterComment)(p,a):u?Object.assign(Object.assign({},a),{text:(0,i.addSqlCommenterComment)(p,a.text)}):n[0]),n.length>0){const t=o.trace.getSpan(o.context.active());if("function"==typeof n[n.length-1])n[n.length-1]=s.patchCallback(d,p,n[n.length-1]),t&&(n[n.length-1]=o.context.bind(o.context.active(),n[n.length-1]));else if("function"==typeof(null==l?void 0:l.callback)){let r=s.patchCallback(e.getConfig(),p,l.callback);t&&(r=o.context.bind(o.context.active(),r)),n[0].callback=r}}let h;"function"==typeof d.requestHook&&l&&(0,r.safeExecuteInTheMiddle)((()=>{const{database:e,host:t,port:n,user:r}=this.connectionParameters,o={database:e,host:t,port:n,user:r};d.requestHook(p,{connection:o,query:{text:l.text,values:l.values,name:l.name}})}),(t=>{t&&e._diag.error("Error running query hook",t)}),!0);try{h=t.apply(this,n)}catch(e){throw p.setStatus({code:o.SpanStatusCode.ERROR,message:s.getErrorMessage(e)}),p.end(),e}return h instanceof Promise?h.then((t=>new Promise((n=>{s.handleExecutionResult(e.getConfig(),p,t),p.end(),n(t)})))).catch((e=>new Promise(((t,n)=>{p.setStatus({code:o.SpanStatusCode.ERROR,message:e.message}),p.end(),n(e)})))):h})}_getPoolConnectPatch(){const e=this;return t=>function(n){if(s.shouldSkipInstrumentation(e.getConfig()))return t.call(this,n);const r=e.tracer.startSpan(c.SpanNames.POOL_CONNECT,{kind:o.SpanKind.CLIENT,attributes:s.getSemanticAttributesFromPool(this.options)});if(n){const e=o.trace.getSpan(o.context.active());n=s.patchCallbackPGPool(r,n),e&&(n=o.context.bind(o.context.active(),n))}return l(r,o.context.with(o.trace.setSpan(o.context.active(),r),(()=>t.call(this,n))))}}}function l(e,t){if(!(t instanceof Promise))return t;const n=t;return o.context.bind(o.context.active(),n.then((t=>(e.end(),t))).catch((t=>(e.setStatus({code:o.SpanStatusCode.ERROR,message:s.getErrorMessage(t)}),e.end(),Promise.reject(t)))))}t.PgInstrumentation=u},97904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},61644:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObjectWithTextString=t.getErrorMessage=t.patchClientConnectCallback=t.patchCallbackPGPool=t.patchCallback=t.handleExecutionResult=t.handleConfigQuery=t.shouldSkipInstrumentation=t.getSemanticAttributesFromPool=t.getSemanticAttributesFromConnection=t.getConnectionString=t.getQuerySpanName=void 0;const r=n(74681),o=n(34974),s=n(74813),i=n(25907),a=n(6760);function c(e,t){if(!t)return a.SpanNames.QUERY_PREFIX;const n="string"==typeof t.name&&t.name?t.name:function(e){const t=e.indexOf(" ");let n=-1===t?e:e.slice(0,t);return n=n.toUpperCase(),n.endsWith(";")?n.slice(0,-1):n}(t.text);return`${a.SpanNames.QUERY_PREFIX}:${n}${e?` ${e}`:""}`}function u(e){return`postgresql://${e.host||"localhost"}:${e.port||5432}/${e.database||""}`}function l(e){if(Number.isInteger(e))return e}function d(e){return{[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_POSTGRESQL,[s.SEMATTRS_DB_NAME]:e.database,[s.SEMATTRS_DB_CONNECTION_STRING]:u(e),[s.SEMATTRS_NET_PEER_NAME]:e.host,[s.SEMATTRS_NET_PEER_PORT]:l(e.port),[s.SEMATTRS_DB_USER]:e.user}}function p(e,t,n){"function"==typeof e.responseHook&&(0,i.safeExecuteInTheMiddle)((()=>{e.responseHook(t,{data:n})}),(e=>{e&&r.diag.error("Error running response hook",e)}),!0)}t.getQuerySpanName=c,t.getConnectionString=u,t.getSemanticAttributesFromConnection=d,t.getSemanticAttributesFromPool=function(e){return{[s.SEMATTRS_DB_SYSTEM]:s.DBSYSTEMVALUES_POSTGRESQL,[s.SEMATTRS_DB_NAME]:e.database,[s.SEMATTRS_DB_CONNECTION_STRING]:u(e),[s.SEMATTRS_NET_PEER_NAME]:e.host,[s.SEMATTRS_NET_PEER_PORT]:l(e.port),[s.SEMATTRS_DB_USER]:e.user,[o.AttributeNames.IDLE_TIMEOUT_MILLIS]:e.idleTimeoutMillis,[o.AttributeNames.MAX_CLIENT]:e.maxClient}},t.shouldSkipInstrumentation=function(e){return!0===e.requireParentSpan&&void 0===r.trace.getSpan(r.context.active())},t.handleConfigQuery=function(e,t,n){const{connectionParameters:i}=this,a=c(i.database,n),u=e.startSpan(a,{kind:r.SpanKind.CLIENT,attributes:d(i)});if(!n)return u;if(n.text&&u.setAttribute(s.SEMATTRS_DB_STATEMENT,n.text),t.enhancedDatabaseReporting&&Array.isArray(n.values))try{const e=n.values.map((e=>null==e?"null":e instanceof Buffer?e.toString():"object"==typeof e?"function"==typeof e.toPostgres?e.toPostgres():JSON.stringify(e):e.toString()));u.setAttribute(o.AttributeNames.PG_VALUES,e)}catch(e){r.diag.error("failed to stringify ",n.values,e)}return"string"==typeof n.name&&u.setAttribute(o.AttributeNames.PG_PLAN,n.name),u},t.handleExecutionResult=p,t.patchCallback=function(e,t,n){return function(o,s){o?t.setStatus({code:r.SpanStatusCode.ERROR,message:o.message}):p(e,t,s),t.end(),n.call(this,o,s)}},t.patchCallbackPGPool=function(e,t){return function(n,o,s){n&&e.setStatus({code:r.SpanStatusCode.ERROR,message:n.message}),e.end(),t.call(this,n,o,s)}},t.patchClientConnectCallback=function(e,t){return function(n){n&&e.setStatus({code:r.SpanStatusCode.ERROR,message:n.message}),e.end(),t.apply(this,arguments)}},t.getErrorMessage=function(e){return"object"==typeof e&&null!==e&&"message"in e?String(e.message):void 0},t.isObjectWithTextString=function(e){var t;return"object"==typeof e&&"string"==typeof(null===(t=e)||void 0===t?void 0:t.text)}},73953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.43.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-pg"},92554:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(98476),t),o(n(64519),t)},98476:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedisInstrumentation=void 0;const r=n(74681),o=n(25907),s=n(69147),i=n(67238),a=n(89534),c=n(74813),u=Symbol("opentelemetry.instrumentation.redis.open_spans"),l=Symbol("opentelemetry.instrumentation.redis.multi_command_options"),d={requireParentSpan:!1};class p extends o.InstrumentationBase{constructor(e={}){super(a.PACKAGE_NAME,a.PACKAGE_VERSION,e)}setConfig(e={}){this._config=Object.assign({},d,e)}init(){return[this._getInstrumentationNodeModuleDefinition("@redis/client"),this._getInstrumentationNodeModuleDefinition("@node-redis/client")]}_getInstrumentationNodeModuleDefinition(e){const t=new o.InstrumentationNodeModuleFile(`${e}/dist/lib/commander.js`,["^1.0.0"],((e,t)=>{const n=e.transformCommandArguments;if(!n)return this._diag.error("internal instrumentation error, missing transformCommandArguments function"),e;const r=(null==t?void 0:t.startsWith("1.0."))?"extendWithCommands":"attachCommands";return(0,o.isWrapped)(null==e?void 0:e[r])&&this._unwrap(e,r),this._wrap(e,r,this._getPatchExtendWithCommands(n)),e}),(e=>{(0,o.isWrapped)(null==e?void 0:e.extendWithCommands)&&this._unwrap(e,"extendWithCommands"),(0,o.isWrapped)(null==e?void 0:e.attachCommands)&&this._unwrap(e,"attachCommands")})),n=new o.InstrumentationNodeModuleFile(`${e}/dist/lib/client/multi-command.js`,["^1.0.0"],(e=>{var t;const n=null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.prototype;return(0,o.isWrapped)(null==n?void 0:n.exec)&&this._unwrap(n,"exec"),this._wrap(n,"exec",this._getPatchMultiCommandsExec()),(0,o.isWrapped)(null==n?void 0:n.addCommand)&&this._unwrap(n,"addCommand"),this._wrap(n,"addCommand",this._getPatchMultiCommandsAddCommand()),e}),(e=>{var t;const n=null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.prototype;(0,o.isWrapped)(null==n?void 0:n.exec)&&this._unwrap(n,"exec"),(0,o.isWrapped)(null==n?void 0:n.addCommand)&&this._unwrap(n,"addCommand")})),r=new o.InstrumentationNodeModuleFile(`${e}/dist/lib/client/index.js`,["^1.0.0"],(e=>{var t;const n=null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.prototype;return(null==n?void 0:n.multi)&&((0,o.isWrapped)(null==n?void 0:n.multi)&&this._unwrap(n,"multi"),this._wrap(n,"multi",this._getPatchRedisClientMulti())),(null==n?void 0:n.MULTI)&&((0,o.isWrapped)(null==n?void 0:n.MULTI)&&this._unwrap(n,"MULTI"),this._wrap(n,"MULTI",this._getPatchRedisClientMulti())),(0,o.isWrapped)(null==n?void 0:n.sendCommand)&&this._unwrap(n,"sendCommand"),this._wrap(n,"sendCommand",this._getPatchRedisClientSendCommand()),this._wrap(n,"connect",this._getPatchedClientConnect()),e}),(e=>{var t;const n=null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.prototype;(0,o.isWrapped)(null==n?void 0:n.multi)&&this._unwrap(n,"multi"),(0,o.isWrapped)(null==n?void 0:n.MULTI)&&this._unwrap(n,"MULTI"),(0,o.isWrapped)(null==n?void 0:n.sendCommand)&&this._unwrap(n,"sendCommand")}));return new o.InstrumentationNodeModuleDefinition(e,["^1.0.0"],(e=>e),(()=>{}),[t,n,r])}_getPatchExtendWithCommands(e){const t=this;return function(n){return function(r){var o;if("RedisClient"!==(null===(o=null==r?void 0:r.BaseClass)||void 0===o?void 0:o.name))return n.apply(this,arguments);const s=r.executor;return r.executor=function(n,r){const o=e(n,r).args;return t._traceClientCommand(s,this,arguments,o)},n.apply(this,arguments)}}}_getPatchMultiCommandsExec(){const e=this;return function(t){return function(){const n=t.apply(this,arguments);return"function"!=typeof(null==n?void 0:n.then)?(e._diag.error("got non promise result when patching RedisClientMultiCommand.exec"),n):n.then((t=>{const n=this[u];return e._endSpansWithRedisReplies(n,t),t})).catch((t=>{const n=this[u];if(n){const r="MultiErrorReply"===t.constructor.name?t.replies:new Array(n.length).fill(t);e._endSpansWithRedisReplies(n,r)}else e._diag.error("cannot find open spans to end for redis multi command");return Promise.reject(t)}))}}}_getPatchMultiCommandsAddCommand(){const e=this;return function(t){return function(n){return e._traceClientCommand(t,this,arguments,n)}}}_getPatchRedisClientMulti(){return function(e){return function(){const t=e.apply(this,arguments);return t[l]=this.options,t}}}_getPatchRedisClientSendCommand(){const e=this;return function(t){return function(n){return e._traceClientCommand(t,this,arguments,n)}}}_getPatchedClientConnect(){const e=this;return function(t){return function(){const n=this.options,o=(0,s.getClientAttributes)(this._diag,n),i=e.tracer.startSpan(`${p.COMPONENT}-connect`,{kind:r.SpanKind.CLIENT,attributes:o});return r.context.with(r.trace.setSpan(r.context.active(),i),(()=>t.apply(this))).then((e=>(i.end(),e))).catch((e=>(i.recordException(e),i.setStatus({code:r.SpanStatusCode.ERROR,message:e.message}),i.end(),Promise.reject(e))))}}}_traceClientCommand(e,t,n,o){var a,d;if(void 0===r.trace.getSpan(r.context.active())&&(null===(a=this._config)||void 0===a?void 0:a.requireParentSpan))return e.apply(t,n);const h=t.options||t[l],f=o[0],m=o.slice(1),g=(null===(d=this._config)||void 0===d?void 0:d.dbStatementSerializer)||i.defaultDbStatementSerializer,_=(0,s.getClientAttributes)(this._diag,h);try{const e=g(f,m);null!=e&&(_[c.SEMATTRS_DB_STATEMENT]=e)}catch(e){this._diag.error("dbStatementSerializer throw an exception",e,{commandName:f})}const y=this.tracer.startSpan(`${p.COMPONENT}-${f}`,{kind:r.SpanKind.CLIENT,attributes:_}),S=r.context.with(r.trace.setSpan(r.context.active(),y),(()=>e.apply(t,n)));if("function"==typeof(null==S?void 0:S.then))S.then((e=>{this._endSpanWithResponse(y,f,m,e,void 0)}),(e=>{this._endSpanWithResponse(y,f,m,null,e)}));else{const e=S;e[u]=e[u]||[],e[u].push({span:y,commandName:f,commandArgs:m})}return S}_endSpansWithRedisReplies(e,t){if(!e)return this._diag.error("cannot find open spans to end for redis multi command");if(t.length!==e.length)return this._diag.error("number of multi command spans does not match response from redis");for(let n=0;n<e.length;n++){const{span:r,commandName:o,commandArgs:s}=e[n],i=t[n],[a,c]=i instanceof Error?[null,i]:[i,void 0];this._endSpanWithResponse(r,o,s,a,c)}}_endSpanWithResponse(e,t,n,o,s){if(!s&&this._config.responseHook)try{this._config.responseHook(e,t,n,o)}catch(e){this._diag.error("responseHook throw an exception",e)}s&&(e.recordException(s),e.setStatus({code:r.SpanStatusCode.ERROR,message:null==s?void 0:s.message})),e.end()}}t.RedisInstrumentation=p,p.COMPONENT="redis"},64519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},69147:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClientAttributes=void 0;const r=n(74813);function o(e,t){if("string"==typeof t)try{const e=new URL(t);return e.searchParams.delete("user_pwd"),e.username="",e.password="",e.href}catch(t){e.error("failed to sanitize redis connection url",t)}}t.getClientAttributes=function(e,t){var n,s;return{[r.SEMATTRS_DB_SYSTEM]:r.DBSYSTEMVALUES_REDIS,[r.SEMATTRS_NET_PEER_NAME]:null===(n=null==t?void 0:t.socket)||void 0===n?void 0:n.host,[r.SEMATTRS_NET_PEER_PORT]:null===(s=null==t?void 0:t.socket)||void 0===s?void 0:s.port,[r.SEMATTRS_DB_CONNECTION_STRING]:o(e,null==t?void 0:t.url)}}},89534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PACKAGE_NAME=t.PACKAGE_VERSION=void 0,t.PACKAGE_VERSION="0.41.0",t.PACKAGE_NAME="@opentelemetry/instrumentation-redis-4"},25907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{InstrumentationBase:()=>V,InstrumentationNodeModuleDefinition:()=>D,InstrumentationNodeModuleFile:()=>j,isWrapped:()=>x,registerInstrumentations:()=>d,safeExecuteInTheMiddle:()=>L,safeExecuteInTheMiddleAsync:()=>M});var r=n(6664),o=n(60176),s="object"==typeof globalThis?globalThis:global,i=Symbol.for("io.opentelemetry.js.api.logs"),a=s,c=function(){function e(){}return e.prototype.emit=function(e){},e}(),u=(new c,new(function(){function e(){}return e.prototype.getLogger=function(e,t,n){return new c},e}())),l=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(e){return a[i]?this.getLoggerProvider():(a[i]=(t=e,n=u,function(e){return 1===e?t:n}),e);var t,n},e.prototype.getLoggerProvider=function(){var e,t;return null!==(t=null===(e=a[i])||void 0===e?void 0:e.call(a,1))&&void 0!==t?t:u},e.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},e.prototype.disable=function(){delete a[i]},e}().getInstance();function d(e){var t,n,s=e.tracerProvider||r.u.getTracerProvider(),i=e.meterProvider||o.q.getMeterProvider(),a=e.loggerProvider||l.getLoggerProvider(),c=null!==(n=null===(t=e.instrumentations)||void 0===t?void 0:t.flat())&&void 0!==n?n:[];return function(e,t,n,r){for(var o=0,s=e.length;o<s;o++){var i=e[o];t&&i.setTracerProvider(t),n&&i.setMeterProvider(n),r&&i.setLoggerProvider&&i.setLoggerProvider(r),i.getConfig().enabled||i.enable()}}(c,s,i,a),function(){!function(e){e.forEach((function(e){return e.disable()}))}(c)}}var p=n(16928),h=n(39023),f=n(99589),m=n(81132),g=n(78758),_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},y=function(){function e(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=m.wrap,this._unwrap=m.unwrap,this._massWrap=m.massWrap,this._massUnwrap=m.massUnwrap,this._config=_({enabled:!0},n),this._diag=g.s.createComponentLogger({namespace:e}),this._tracer=r.u.getTracer(e,t),this._meter=o.q.getMeter(e,t),this._logger=l.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},e.prototype.getModuleDefinitions=function(){var e,t=null!==(e=this.init())&&void 0!==e?e:[];return Array.isArray(t)?t:[t]},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(e){this._config=_({},e)},e.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e.prototype._runSpanCustomizationHook=function(e,t,n,r){if(e)try{e(n,r)}catch(e){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},e)}},e}(),S=n(69136),b=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i},v=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},T="/",I=function(){this.hooks=[],this.children=new Map},R=function(){function e(){this._trie=new I,this._counter=0}return e.prototype.insert=function(e){var t,n,r=this._trie;try{for(var o=b(e.moduleName.split(T)),s=o.next();!s.done;s=o.next()){var i=s.value,a=r.children.get(i);a||(a=new I,r.children.set(i,a)),r=a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.hooks.push({hook:e,insertedId:this._counter++})},e.prototype.search=function(e,t){var n,r,o=void 0===t?{}:t,s=o.maintainInsertionOrder,i=o.fullOnly,a=this._trie,c=[],u=!0;try{for(var l=b(e.split(T)),d=l.next();!d.done;d=l.next()){var p=d.value,h=a.children.get(p);if(!h){u=!1;break}i||c.push.apply(c,v([],E(h.hooks),!1)),a=h}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return i&&u&&c.push.apply(c,v([],E(a.hooks),!1)),0===c.length?[]:1===c.length?[c[0].hook]:(s&&c.sort((function(e,t){return e.insertedId-t.insertedId})),c.map((function(e){return e.hook})))},e}(),A=["afterEach","after","beforeEach","before","describe","it"].every((function(e){return"function"==typeof global[e]})),C=function(){function e(){this._moduleNameTrie=new R,this._initialize()}return e.prototype._initialize=function(){var e=this;new S.Hook(null,{internals:!0},(function(t,n,r){var o,s,i,a=(i=n,p.sep!==T?i.split(p.sep).join(T):i),c=e._moduleNameTrie.search(a,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),l=u.next();!l.done;l=u.next())t=(0,l.value.onRequire)(t,n,r)}catch(e){o={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return t}))},e.prototype.register=function(e,t){var n={moduleName:e,onRequire:t};return this._moduleNameTrie.insert(n),n},e.getInstance=function(){var t;return A?new e:this._instance=null!==(t=this._instance)&&void 0!==t?t:new e},e}(),O=n(30616),N=n(79896),P=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function L(e,t,n){var r,o;try{o=e()}catch(e){r=e}finally{if(t(r,o),r&&!n)throw r;return o}}function M(e,t,n){return P(this,void 0,void 0,(function(){var r,o,s;return w(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,e()];case 1:return o=i.sent(),[3,4];case 2:return s=i.sent(),r=s,[3,4];case 3:if(t(r,o),r&&!n)throw r;return[2,o];case 4:return[2]}}))}))}function x(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}var k,G=(k=function(e,t){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},k(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},V=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;o._hooks=[],o._requireInTheMiddleSingleton=C.getInstance(),o._enabled=!1,o._wrap=function(e,t,n){if(x(e[t])&&o._unwrap(e,t),h.types.isProxy(e)){var r=(0,m.wrap)(Object.assign({},e),t,n);return Object.defineProperty(e,t,{value:r})}return(0,m.wrap)(e,t,n)},o._unwrap=function(e,t){return h.types.isProxy(e)?Object.defineProperty(e,t,{value:e[t]}):(0,m.unwrap)(e,t)},o._massWrap=function(e,t,n){e?(Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){o._wrap(e,t,n)}))})):g.s.error("must provide one or more functions to wrap on modules")):g.s.error("must provide one or more modules to patch")},o._massUnwrap=function(e,t){e?(Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){o._unwrap(e,t)}))})):g.s.error("must provide one or more functions to wrap on modules")):g.s.error("must provide one or more modules to patch")};var s=o.init();return s&&!Array.isArray(s)&&(s=[s]),o._modules=s||[],0===o._modules.length&&g.s.debug("No modules instrumentation has been defined for '"+o.instrumentationName+"@"+o.instrumentationVersion+"', nothing will be patched"),o._config.enabled&&o.enable(),o}return G(t,e),t.prototype._warnOnPreloadedModules=function(){var e=this;this._modules.forEach((function(t){var r=t.name;try{var o=n(24370).resolve(r);n.c[o]&&e._diag.warn("Module "+r+" has been loaded before "+e.instrumentationName+" so it might not work, please initialize it before requiring "+r)}catch(e){}}))},t.prototype._extractPackageVersion=function(e){try{var t=(0,N.readFileSync)(p.join(e,"package.json"),{encoding:"utf8"}),n=JSON.parse(t).version;return"string"==typeof n?n:void 0}catch(t){g.s.warn("Failed extracting version",e)}},t.prototype._onRequire=function(e,t,n,r){var o,s=this;if(!r)return"function"==typeof e.patch&&(e.moduleExports=t,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(t)):t;var i=this._extractPackageVersion(r);if(e.moduleVersion=i,e.name===n)return H(e.supportedVersions,i,e.includePrerelease)&&"function"==typeof e.patch&&(e.moduleExports=t,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:r}),e.patch(t,e.moduleVersion)):t;var a=null!==(o=e.files)&&void 0!==o?o:[],c=p.normalize(n);return a.filter((function(e){return e.name===c})).filter((function(t){return H(t.supportedVersions,i,e.includePrerelease)})).reduce((function(t,n){return n.moduleExports=t,s._enabled?(s._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:n.name,baseDir:r}),n.patch(t,e.moduleVersion)):t}),t)},t.prototype.enable=function(){var e,t,n,r,o,s,i=this;if(!this._enabled)if(this._enabled=!0,this._hooks.length>0)try{for(var a=U(this._modules),c=a.next();!c.done;c=a.next()){var u=c.value;"function"==typeof u.patch&&u.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:u.name,version:u.moduleVersion}),u.patch(u.moduleExports,u.moduleVersion));try{for(var l=(n=void 0,U(u.files)),d=l.next();!d.done;d=l.next()){var h=d.value;h.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:u.name,version:u.moduleVersion,fileName:h.name}),h.patch(h.moduleExports,u.moduleVersion))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else{this._warnOnPreloadedModules();var f=function(e){var t=function(t,n,r){return i._onRequire(e,t,n,r)},n=p.isAbsolute(e.name)?new S.Hook([e.name],{internals:!0},t):m._requireInTheMiddleSingleton.register(e.name,t);m._hooks.push(n);var r=new O.Hook([e.name],{internals:!1},(function(t,n,r){return i._onRequire(e,t,n,r)}));m._hooks.push(r)},m=this;try{for(var g=U(this._modules),_=g.next();!_.done;_=g.next())f(_.value)}catch(e){o={error:e}}finally{try{_&&!_.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}}},t.prototype.disable=function(){var e,t,n,r;if(this._enabled){this._enabled=!1;try{for(var o=U(this._modules),s=o.next();!s.done;s=o.next()){var i=s.value;"function"==typeof i.unpatch&&i.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:i.name,version:i.moduleVersion}),i.unpatch(i.moduleExports,i.moduleVersion));try{for(var a=(n=void 0,U(i.files)),c=a.next();!c.done;c=a.next()){var u=c.value;u.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:i.name,version:i.moduleVersion,fileName:u.name}),u.unpatch(u.moduleExports,i.moduleVersion))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}},t.prototype.isEnabled=function(){return this._enabled},t}(y);function H(e,t,n){return void 0===t?e.includes("*"):e.some((function(e){return(0,f.satisfies)(t,e,{includePrerelease:n})}))}var D=function(e,t,n,r,o){this.name=e,this.supportedVersions=t,this.patch=n,this.unpatch=r,this.files=o||[]},j=function(e,t,n,r){this.supportedVersions=t,this.patch=n,this.unpatch=r,this.name=(0,p.normalize)(e)}},24370:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=24370,e.exports=t},67238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultDbStatementSerializer=void 0;const n=[{regex:/^ECHO/i,args:0},{regex:/^(LPUSH|MSET|PFA|PUBLISH|RPUSH|SADD|SET|SPUBLISH|XADD|ZADD)/i,args:1},{regex:/^(HSET|HMSET|LSET|LINSERT)/i,args:2},{regex:/^(ACL|BIT|B[LRZ]|CLIENT|CLUSTER|CONFIG|COMMAND|DECR|DEL|EVAL|EX|FUNCTION|GEO|GET|HINCR|HMGET|HSCAN|INCR|L[TRLM]|MEMORY|P[EFISTU]|RPOP|S[CDIMORSU]|XACK|X[CDGILPRT]|Z[CDILMPRS])/i,args:-1}];t.defaultDbStatementSerializer=(e,t)=>{var r,o;if(Array.isArray(t)&&t.length){const s=null!==(o=null===(r=n.find((({regex:t})=>t.test(e))))||void 0===r?void 0:r.args)&&void 0!==o?o:0,i=s>=0?t.slice(0,s):t;return t.length>i.length&&i.push(`[${t.length-s} other arguments]`),`${e} ${i.join(" ")}`}return e}},2287:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var r=n(78758),o=n(87361),s=n(68797),i=n(21479),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},c=function(){function e(e,t){var n,o=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return o._attributes=Object.assign({},o._attributes,e),o.asyncAttributesPending=!1,e}),(function(e){return r.s.debug("a resource's async attributes promise rejected: %s",e),o.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[o.AV]=(0,i.m)(),t[o.Pl]=s.q[o.Pl],t[o.$L]=s.q[o.$L],t[o.y$]=s.q[o.y$],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&r.s.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var o=a(a({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(o);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(e,2),s=o[0],i=o[1];return a(a(a(a({},r._syncAttributes),s),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),i)}));return new e(o,s)},e.EMPTY=new e({}),e}()},19642:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});const r=require("child_process");var o=n(39023).promisify(r.exec)},50454:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(79896),o=n(19642),s=n(78758),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function c(){return i(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return[2,n.sent().trim()];case 2:return e=n.sent(),s.s.debug("error reading machine id: "+e),[3,3];case 3:return n.trys.push([3,5,,6]),[4,(0,o.q)("kenv -q smbios.system.uuid")];case 4:return[2,n.sent().stdout.trim()];case 5:return t=n.sent(),s.s.debug("error reading machine id: "+t),[3,6];case 6:return[2,""]}}))}))}},1568:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(19642),o=n(78758),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function a(){return s(this,void 0,void 0,(function(){var e,t,n,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,r.q)('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return e=i.sent(),(t=e.stdout.split("\n").find((function(e){return e.includes("IOPlatformUUID")})))?2===(n=t.split('" = "')).length?[2,n[1].slice(0,-1)]:[3,3]:[2,""];case 2:return s=i.sent(),o.s.debug("error reading machine id: "+s),[3,3];case 3:return[2,""]}}))}))}},7917:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(79896),o=n(78758),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function c(){return s(this,void 0,void 0,(function(){var e,t,n,s,c,u,l,d;return i(this,(function(i){switch(i.label){case 0:e=["/etc/machine-id","/var/lib/dbus/machine-id"],i.label=1;case 1:i.trys.push([1,8,9,10]),t=a(e),n=t.next(),i.label=2;case 2:if(n.done)return[3,7];s=n.value,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,r.promises.readFile(s,{encoding:"utf8"})];case 4:return[2,i.sent().trim()];case 5:return c=i.sent(),o.s.debug("error reading machine id: "+c),[3,6];case 6:return n=t.next(),[3,2];case 7:return[3,10];case 8:return u=i.sent(),l={error:u},[3,10];case 9:try{n&&!n.done&&(d=t.return)&&d.call(t)}finally{if(l)throw l.error}return[7];case 10:return[2,""]}}))}))}},42408:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(78758),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function i(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return r.s.debug("could not read machine-id: unsupported platform"),[2,""]}))}))}},57349:(e,t,n)=>{"use strict";n.d(t,{D:()=>c});var r=n(932),o=n(19642),s=n(78758),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function c(){return i(this,void 0,void 0,(function(){var e,t,n,i,c;return a(this,(function(a){switch(a.label){case 0:e="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",t="%windir%\\System32\\REG.exe","ia32"===r.arch&&"PROCESSOR_ARCHITEW6432"in r.env&&(t="%windir%\\sysnative\\cmd.exe /c "+t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,o.q)(t+" "+e)];case 2:return n=a.sent(),2===(i=n.stdout.split("REG_SZ")).length?[2,i[1].trim()]:[3,4];case 3:return c=a.sent(),s.s.debug("error reading machine id: "+c),[3,4];case 4:return[2,""]}}))}))}},2733:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Resource:()=>o.F,browserDetector:()=>l,browserDetectorSync:()=>u,defaultServiceName:()=>s.m,detectResources:()=>O,detectResourcesSync:()=>N,envDetector:()=>f,envDetectorSync:()=>h,hostDetector:()=>_,hostDetectorSync:()=>g,osDetector:()=>S,osDetectorSync:()=>y,processDetector:()=>T,processDetectorSync:()=>v,serviceInstanceIdDetectorSync:()=>R});var r,o=n(2287),s=n(21479),i=n(87361),a=n(78758),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=new(function(){function e(){}return e.prototype.detect=function(e){var t,n,r,s;if("undefined"==typeof navigator||void 0!==(null===(r=null===(n=global.process)||void 0===n?void 0:n.versions)||void 0===r?void 0:r.node)||void 0!==(null===(s=global.Bun)||void 0===s?void 0:s.version))return o.F.empty();var a=((t={})[i.lb]="browser",t[i.C3]="Web Browser",t[i.cV]=navigator.userAgent,t);return this._getResourceAttributes(a,e)},e.prototype._getResourceAttributes=function(e,t){return""===e[i.cV]?(a.s.debug("BrowserDetector failed: Unable to find required browser resources. "),o.F.empty()):new o.F(c({},e))},e}()),l=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(u.detect(e))},e}()),d=n(37925),p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i},h=new(function(){function e(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return e.prototype.detect=function(e){var t={},n=(0,d._)(),r=n.OTEL_RESOURCE_ATTRIBUTES,s=n.OTEL_SERVICE_NAME;if(r)try{var c=this._parseResourceAttributes(r);Object.assign(t,c)}catch(e){a.s.debug("EnvDetector failed: "+e.message)}return s&&(t[i.AV]=s),new o.F(t)},e.prototype._parseResourceAttributes=function(e){var t,n;if(!e)return{};var r={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),i=s.next();!i.done;i=s.next()){var a=i.value.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2===a.length){var c=p(a,2),u=c[0],l=c[1];if(u=u.trim(),l=l.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(u))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(l))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);r[u]=decodeURIComponent(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r},e.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},e.prototype._isBaggageOctetString=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<33||44===n||59===n||92===n||n>126)return!1}return!0},e.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},e}()),f=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(h.detect(e))},e}()),m=n(70857);switch(n(932).platform){case"darwin":r=n(1568).D;break;case"linux":r=n(7917).D;break;case"freebsd":r=n(50454).D;break;case"win32":r=n(57349).D;break;default:r=n(42408).D}var g=new(function(){function e(){}return e.prototype.detect=function(e){var t,n=((t={})[i.RK]=(0,m.hostname)(),t[i.yT]=function(e){switch(e){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return e}}((0,m.arch)()),t);return new o.F(n,this._getAsyncAttributes())},e.prototype._getAsyncAttributes=function(){return r().then((function(e){var t={};return e&&(t[i.zs]=e),t}))},e}()),_=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(g.detect(e))},e}()),y=new(function(){function e(){}return e.prototype.detect=function(e){var t,n=((t={})[i.ko]=function(e){switch(e){case"sunos":return"solaris";case"win32":return"windows";default:return e}}((0,m.platform)()),t[i.AC]=(0,m.release)(),t);return new o.F(n)},e}()),S=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(y.detect(e))},e}()),b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i},E=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},v=new(function(){function e(){}return e.prototype.detect=function(e){var t,n=((t={})[i.ky]=process.pid,t[i.fP]=process.title,t[i.xQ]=process.execPath,t[i.U2]=E(E([process.argv[0]],b(process.execArgv),!1),b(process.argv.slice(1)),!1),t[i.cV]=process.versions.node,t[i.lb]="nodejs",t[i.C3]="Node.js",t);process.argv.length>1&&(n[i.Cn]=process.argv[1]);try{var r=m.userInfo();n[i.Yb]=r.username}catch(e){a.s.debug("error obtaining process owner: "+e)}return new o.F(n)},e}()),T=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(v.detect(e))},e}());const I=require("crypto");var R=new(function(){function e(){}return e.prototype.detect=function(e){var t,n=((t={})[i.PL]=(0,I.randomUUID)(),t);return new o.F(n)},e}()),A=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},O=function(e){return void 0===e&&(e={}),A(void 0,void 0,void 0,(function(){var t;return C(this,(function(n){switch(n.label){case 0:return[4,Promise.all((e.detectors||[]).map((function(t){return A(void 0,void 0,void 0,(function(){var n,r;return C(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t.detect(e)];case 1:return n=s.sent(),a.s.debug(t.constructor.name+" found resource.",n),[2,n];case 2:return r=s.sent(),a.s.debug(t.constructor.name+" failed: "+r.message),[2,o.F.empty()];case 3:return[2]}}))}))})))];case 1:return t=n.sent(),P(t),[2,t.reduce((function(e,t){return e.merge(t)}),o.F.empty())]}}))}))},N=function(e){var t;void 0===e&&(e={});var n=(null!==(t=e.detectors)&&void 0!==t?t:[]).map((function(t){try{var n,r=t.detect(e);return n=null!==(s=r)&&"object"==typeof s&&"function"==typeof s.then?new o.F({},A(void 0,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,r];case 1:return[2,e.sent().attributes]}}))}))):r,n.waitForAsyncAttributes?n.waitForAsyncAttributes().then((function(){return a.s.debug(t.constructor.name+" found resource.",n)})):a.s.debug(t.constructor.name+" found resource.",n),n}catch(e){return a.s.error(t.constructor.name+" failed: "+e.message),o.F.empty()}var s})),r=n.reduce((function(e,t){return e.merge(t)}),o.F.empty());return r.waitForAsyncAttributes&&r.waitForAsyncAttributes().then((function(){P(n)})),r},P=function(e){e.forEach((function(e){if(Object.keys(e.attributes).length>0){var t=JSON.stringify(e.attributes,null,4);a.s.verbose(t)}}))}},21479:(e,t,n)=>{"use strict";function r(){return"unknown_service:"+process.argv0}n.d(t,{m:()=>r})},71426:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>E,AlwaysOnSampler:()=>v,BasicTracerProvider:()=>te,BatchSpanProcessor:()=>ee,ConsoleSpanExporter:()=>ne,ForceFlushState:()=>V,InMemorySpanExporter:()=>re,NoopSpanProcessor:()=>K,ParentBasedSampler:()=>R,RandomIdGenerator:()=>x,SamplingDecision:()=>r,SimpleSpanProcessor:()=>se,Span:()=>y,TraceIdRatioBasedSampler:()=>A,Tracer:()=>H});var r,o=n(41844),s=n(6664),i=n(78758),a=n(97872),c=n(58651),u=n(72674),l=n(47397),d=n(4445),p=n(80788),h=n(11908),f=n(53663),m=n(65864),g=n(366),_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i},y=function(){function e(e,t,n,r,o,s,i,a,c,u){void 0===i&&(i=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:h.s.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=s,this.kind=o,this.links=i;var l=Date.now();this._performanceStartTime=f.u.now(),this._performanceOffset=l-(this._performanceStartTime+(0,m.uc)()),this._startTimeProvided=null!=a,this.startTime=this._getTime(null!=a?a:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(i.s.warn("Invalid attribute key: "+e),this):(0,p.m)(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(i.s.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=r.next();!o.done;o=r.next()){var s=_(o.value,2),i=s[0],a=s[1];this.setAttribute(i,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return i.s.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&i.s.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,m.Ir)(t)&&((0,m.Ir)(n)||(n=t),t=void 0);var r=(0,p.L)(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.addLink=function(e){return this.links.push(e),this},e.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],_(e),!1)),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?i.s.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,m.W5)(this.startTime,this.endTime),this._duration[0]<0&&(i.s.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&i.s.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<f.u.now())return(0,m._5)(e+this._performanceOffset);if("number"==typeof e)return(0,m.lg)(e);if(e instanceof Date)return(0,m.lg)(e.getTime());if((0,m.VL)(e))return e;if(this._startTimeProvided)return(0,m.lg)(Date.now());var t=f.u.now()-this._performanceStartTime;return(0,m.mw)(this.startTime,(0,m.lg)(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[g.aP6]=e:e&&(e.code?n[g.P4J]=e.code.toString():e.name&&(n[g.P4J]=e.name),e.message&&(n[g.aP6]=e.message),e.stack&&(n[g.ipG]=e.stack)),n[g.P4J]||n[g.aP6]?this.addEvent("exception",n,t):i.s.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&i.s.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(i.s.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}(),S=n(37925),b=n(70676);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r||(r={}));var E=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:r.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),v=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:r.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),T=n(67823),I=n(78044),R=function(){function e(e){var t,n,r,o;this._root=e.root,this._root||((0,I.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new v),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new v,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new E,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new v,this._localParentNotSampled=null!==(o=e.localParentNotSampled)&&void 0!==o?o:new E}return e.prototype.shouldSample=function(e,t,n,r,o,i){var a=s.u.getSpanContext(e);return a&&(0,T.YA)(a)?a.isRemote?a.traceFlags&l.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,o,i):this._remoteParentNotSampled.shouldSample(e,t,n,r,o,i):a.traceFlags&l.X.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,o,i):this._localParentNotSampled.shouldSample(e,t,n,r,o,i):this._root.shouldSample(e,t,n,r,o,i)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),A=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,T.hX)(t)&&this._accumulate(t)<this._upperBound?r.RECORD_AND_SAMPLED:r.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),C=(0,S._)(),O=b.R.AlwaysOn,N=1;function P(){return{sampler:w(C),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,S._)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,S._)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,S._)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,S._)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,S._)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function w(e){switch(void 0===e&&(e=(0,S._)()),e.OTEL_TRACES_SAMPLER){case b.R.AlwaysOn:return new v;case b.R.AlwaysOff:return new E;case b.R.ParentBasedAlwaysOn:return new R({root:new v});case b.R.ParentBasedAlwaysOff:return new R({root:new E});case b.R.TraceIdRatio:return new A(L(e));case b.R.ParentBasedTraceIdRatio:return new R({root:new A(L(e))});default:return i.s.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+O+'".'),new v}}function L(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return i.s.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+N+"."),N;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(i.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+N+"."),N):t<0||t>1?(i.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+N+"."),N):t}var M=n(23144),x=function(){this.generateTraceId=G(16),this.generateSpanId=G(8)},k=Buffer.allocUnsafe(16);function G(e){return function(){for(var t=0;t<e/4;t++)k.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*t);for(t=0;t<e&&!(k[t]>0);t++)t===e-1&&(k[e-1]=1);return k.toString("hex",0,e)}}var U,V,H=function(){function e(e,t,n){this._tracerProvider=n;var r,o,s,i,a=(r=t,o={sampler:w()},s=P(),(i=Object.assign({},s,o,r)).generalLimits=Object.assign({},s.generalLimits,r.generalLimits||{}),i.spanLimits=Object.assign({},s.spanLimits,r.spanLimits||{}),i);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=t.idGenerator||new x,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var r,h,f;void 0===t&&(t={}),void 0===n&&(n=o._.active()),t.root&&(n=s.u.deleteSpan(n));var m=s.u.getSpan(n);if((0,d.Zf)(n))return i.s.debug("Instrumentation suppressed, returning Noop Span"),s.u.wrapSpanContext(a.dM);var g,_,S,b=null==m?void 0:m.spanContext(),E=this._idGenerator.generateSpanId();b&&s.u.isSpanContextValid(b)?(g=b.traceId,_=b.traceState,S=b.spanId):g=this._idGenerator.generateTraceId();var v=null!==(r=t.kind)&&void 0!==r?r:c.v.INTERNAL,T=(null!==(h=t.links)&&void 0!==h?h:[]).map((function(e){return{context:e.context,attributes:(0,p.L)(e.attributes)}})),I=(0,p.L)(t.attributes),R=this._sampler.shouldSample(n,g,e,v,I,T);_=null!==(f=R.traceState)&&void 0!==f?f:_;var A={traceId:g,spanId:E,traceFlags:R.decision===u.i.RECORD_AND_SAMPLED?l.X.SAMPLED:l.X.NONE,traceState:_};if(R.decision===u.i.NOT_RECORD)return i.s.debug("Recording is off, propagating context in a non-recording span"),s.u.wrapSpanContext(A);var C=(0,p.L)(Object.assign(I,R.attributes));return new y(this,n,e,A,v,S,T,t.startTime,void 0,C)},e.prototype.startActiveSpan=function(e,t,n,r){var i,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(i=t,c=n):(i=t,a=n,c=r);var u=null!=a?a:o._.active(),l=this.startSpan(e,i,u),d=s.u.setSpan(u,l);return o._.with(d,c,void 0,l)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),D=n(49348),j=n(31194),B=n(22721),F=n(79859),Z=n(75477),W=n(2287),X=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=X(this._spanProcessors),o=r.next();!o.done;o=r.next()){var s=o.value;n.push(s.forceFlush())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){(0,I.s)(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,r;try{for(var o=X(this._spanProcessors),s=o.next();!s.done;s=o.next())s.value.onStart(e,t)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=X(this._spanProcessors),o=r.next();!o.done;o=r.next())o.value.onEnd(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=X(this._spanProcessors),o=r.next();!o.done;o=r.next()){var s=o.value;n.push(s.shutdown())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),K=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),J=n(77375),z=n(92068),$=n(22778),q=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=(0,S._)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new J.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(i.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&l.X.SAMPLED&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&i.s.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(i.s.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],o=0,s=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);o<s;o++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);o._.with((0,d.M1)(o._.active()),(function(){var o;e._finishedSpans.length<=e._maxExportBatchSize?(o=e._finishedSpans,e._finishedSpans=[]):o=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var s=function(){return e._exporter.export(o,(function(e){var o;clearTimeout(r),e.code===z.V.SUCCESS?t():n(null!==(o=e.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))},i=null,a=0,c=o.length;a<c;a++){var u=o[a];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(null!=i||(i=[]),i.push(u.resource.waitForAsyncAttributes()))}null===i?s():Promise.all(i).then(s,(function(e){(0,I.s)(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally((function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(t){e._isExporting=!1,(0,I.s)(t)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout((function(){return t()}),this._scheduledDelayMillis),(0,$.K)(this._timer))}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Q=(U=function(e,t){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},U(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.onShutdown=function(){},t}(q);!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(V||(V={}));var te=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=(0,j.h)({},P(),function(e){var t,n,r,o,s,i,a,c,u,l,d,p,h=Object.assign({},e.spanLimits),f=(0,S.w)();return h.attributeCountLimit=null!==(i=null!==(s=null!==(o=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==o?o:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:f.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:M.fv,h.attributeValueLengthLimit=null!==(p=null!==(d=null!==(l=null!==(c=null===(a=e.spanLimits)||void 0===a?void 0:a.attributeValueLengthLimit)&&void 0!==c?c:null===(u=e.generalLimits)||void 0===u?void 0:u.attributeValueLengthLimit)&&void 0!==l?l:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:M.aE,Object.assign({},e,{spanLimits:h})}(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:W.F.empty(),this.resource=W.F.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var o=new ee(r);this.activeSpanProcessor=o}else this.activeSpanProcessor=new K}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new H({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return i.s.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Y(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),s.u.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&o._.setGlobalContextManager(e.contextManager),e.propagator&&D.$.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var r,o=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=V.timeout}),e);t.forceFlush().then((function(){clearTimeout(o),r!==V.timeout&&(r=V.resolved,n(r))})).catch((function(e){clearTimeout(o),r=V.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==V.resolved}));r.length>0?n(r):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set((0,S._)().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||i.s.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new B.n({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=(0,S._)().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||i.s.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new F.lm}],["baggage",function(){return new Z.t}]]),e._registeredExporters=new Map,e}(),ne=function(){function e(){}return e.prototype.export=function(e,t){return this._sendSpans(e,t)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(e){var t;return{resource:{attributes:e.resource.attributes},traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:null===(t=e.spanContext().traceState)||void 0===t?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,m.w_)(e.startTime),duration:(0,m.w_)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},e.prototype._sendSpans=function(e,t){var n,r;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),s=o.next();!s.done;s=o.next()){var i=s.value;console.dir(this._exportInfo(i),{depth:3})}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(t)return t({code:z.V.SUCCESS})},e}(),re=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(e,t){var n;if(this._stopped)return t({code:z.V.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}(e),!1)),setTimeout((function(){return t({code:z.V.SUCCESS})}),0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}(),oe=n(72477),se=function(){function e(e){this._exporter=e,this._shutdownOnce=new J.I(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){var t,n,r=this;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&l.X.SAMPLED){var o=function(){return oe.internal._export(r._exporter,[e]).then((function(e){var t;e.code!==z.V.SUCCESS&&(0,I.s)(null!==(t=e.error)&&void 0!==t?t:new Error("SimpleSpanProcessor: span export failed (status "+e+")"))})).catch((function(e){(0,I.s)(e)}))};if(e.resource.asyncAttributesPending){var s=null===(n=(t=e.resource).waitForAsyncAttributes)||void 0===n?void 0:n.call(t).then((function(){return null!=s&&r._unresolvedExports.delete(s),o()}),(function(e){return(0,I.s)(e)}));null!=s&&this._unresolvedExports.add(s)}else o()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}()},74813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AWSECSLAUNCHTYPEVALUES_EC2:()=>o.Jn,AWSECSLAUNCHTYPEVALUES_FARGATE:()=>o.Fz,AwsEcsLaunchtypeValues:()=>o.AS,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:()=>o.WE,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:()=>o.op,CLOUDPLATFORMVALUES_AWS_EC2:()=>o.WC,CLOUDPLATFORMVALUES_AWS_ECS:()=>o.p7,CLOUDPLATFORMVALUES_AWS_EKS:()=>o.Vx,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:()=>o.Vf,CLOUDPLATFORMVALUES_AWS_LAMBDA:()=>o.JO,CLOUDPLATFORMVALUES_AZURE_AKS:()=>o.Vm,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:()=>o.L6,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:()=>o.oH,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:()=>o.$R,CLOUDPLATFORMVALUES_AZURE_VM:()=>o.zF,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:()=>o.$T,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:()=>o.a1,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:()=>o.qB,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:()=>o.Tg,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:()=>o.qN,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:()=>o.Eh,CLOUDPROVIDERVALUES_AWS:()=>o.Xm,CLOUDPROVIDERVALUES_AZURE:()=>o.BY,CLOUDPROVIDERVALUES_GCP:()=>o.ov,CloudPlatformValues:()=>o.ns,CloudProviderValues:()=>o.jV,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:()=>r.Bh9,DBCASSANDRACONSISTENCYLEVELVALUES_ANY:()=>r.Eo2,DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:()=>r.$8v,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:()=>r.slN,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:()=>r.VMk,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:()=>r.g9x,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:()=>r.G49,DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:()=>r.vhy,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:()=>r.OSW,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:()=>r.O2W,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:()=>r.WJJ,DBSYSTEMVALUES_ADABAS:()=>r.nWK,DBSYSTEMVALUES_CACHE:()=>r.V02,DBSYSTEMVALUES_CASSANDRA:()=>r.Rk0,DBSYSTEMVALUES_CLOUDSCAPE:()=>r.CQB,DBSYSTEMVALUES_COCKROACHDB:()=>r.y__,DBSYSTEMVALUES_COLDFUSION:()=>r.TKU,DBSYSTEMVALUES_COSMOSDB:()=>r.zmF,DBSYSTEMVALUES_COUCHBASE:()=>r.oBD,DBSYSTEMVALUES_COUCHDB:()=>r.hV,DBSYSTEMVALUES_DB2:()=>r.xhJ,DBSYSTEMVALUES_DERBY:()=>r.XTF,DBSYSTEMVALUES_DYNAMODB:()=>r.poY,DBSYSTEMVALUES_EDB:()=>r.ynC,DBSYSTEMVALUES_ELASTICSEARCH:()=>r.Ylk,DBSYSTEMVALUES_FILEMAKER:()=>r.Xdf,DBSYSTEMVALUES_FIREBIRD:()=>r.IOi,DBSYSTEMVALUES_FIRSTSQL:()=>r.$wW,DBSYSTEMVALUES_GEODE:()=>r.N4Y,DBSYSTEMVALUES_H2:()=>r.JZz,DBSYSTEMVALUES_HANADB:()=>r.Dzx,DBSYSTEMVALUES_HBASE:()=>r.Spc,DBSYSTEMVALUES_HIVE:()=>r.nwz,DBSYSTEMVALUES_HSQLDB:()=>r.pfp,DBSYSTEMVALUES_INFORMIX:()=>r.L5D,DBSYSTEMVALUES_INGRES:()=>r.L2R,DBSYSTEMVALUES_INSTANTDB:()=>r.K2_,DBSYSTEMVALUES_INTERBASE:()=>r.y6V,DBSYSTEMVALUES_MARIADB:()=>r.ngE,DBSYSTEMVALUES_MAXDB:()=>r.XER,DBSYSTEMVALUES_MEMCACHED:()=>r.Oe4,DBSYSTEMVALUES_MONGODB:()=>r.X36,DBSYSTEMVALUES_MSSQL:()=>r.Vp5,DBSYSTEMVALUES_MYSQL:()=>r.bfK,DBSYSTEMVALUES_NEO4J:()=>r.BJ_,DBSYSTEMVALUES_NETEZZA:()=>r.irN,DBSYSTEMVALUES_ORACLE:()=>r.PU4,DBSYSTEMVALUES_OTHER_SQL:()=>r.Wb_,DBSYSTEMVALUES_PERVASIVE:()=>r.mc2,DBSYSTEMVALUES_POINTBASE:()=>r.Y$v,DBSYSTEMVALUES_POSTGRESQL:()=>r.jCw,DBSYSTEMVALUES_PROGRESS:()=>r.KjL,DBSYSTEMVALUES_REDIS:()=>r.W_f,DBSYSTEMVALUES_REDSHIFT:()=>r.MpS,DBSYSTEMVALUES_SQLITE:()=>r.vl2,DBSYSTEMVALUES_SYBASE:()=>r.K0$,DBSYSTEMVALUES_TERADATA:()=>r.Xuz,DBSYSTEMVALUES_VERTICA:()=>r.lcm,DbCassandraConsistencyLevelValues:()=>r.Nxd,DbSystemValues:()=>r.Q5s,FAASDOCUMENTOPERATIONVALUES_DELETE:()=>r.mlL,FAASDOCUMENTOPERATIONVALUES_EDIT:()=>r.VEl,FAASDOCUMENTOPERATIONVALUES_INSERT:()=>r.oF4,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:()=>r.y3W,FAASINVOKEDPROVIDERVALUES_AWS:()=>r.Tl5,FAASINVOKEDPROVIDERVALUES_AZURE:()=>r.d3j,FAASINVOKEDPROVIDERVALUES_GCP:()=>r.kOl,FAASTRIGGERVALUES_DATASOURCE:()=>r.uZf,FAASTRIGGERVALUES_HTTP:()=>r.v8K,FAASTRIGGERVALUES_OTHER:()=>r.ToY,FAASTRIGGERVALUES_PUBSUB:()=>r.CK9,FAASTRIGGERVALUES_TIMER:()=>r.IxL,FaasDocumentOperationValues:()=>r.Ijl,FaasInvokedProviderValues:()=>r.zI8,FaasTriggerValues:()=>r.iPC,HOSTARCHVALUES_AMD64:()=>o.so,HOSTARCHVALUES_ARM32:()=>o.hi,HOSTARCHVALUES_ARM64:()=>o.UQ,HOSTARCHVALUES_IA64:()=>o.av,HOSTARCHVALUES_PPC32:()=>o.OZ,HOSTARCHVALUES_PPC64:()=>o.DL,HOSTARCHVALUES_X86:()=>o.ig,HTTPFLAVORVALUES_HTTP_1_0:()=>r.dbJ,HTTPFLAVORVALUES_HTTP_1_1:()=>r.kPW,HTTPFLAVORVALUES_HTTP_2_0:()=>r.gGD,HTTPFLAVORVALUES_QUIC:()=>r.iFX,HTTPFLAVORVALUES_SPDY:()=>r.QhH,HostArchValues:()=>o.Cg,HttpFlavorValues:()=>r.dNH,MESSAGETYPEVALUES_RECEIVED:()=>r.sr7,MESSAGETYPEVALUES_SENT:()=>r.bZN,MESSAGINGDESTINATIONKINDVALUES_QUEUE:()=>r.npt,MESSAGINGDESTINATIONKINDVALUES_TOPIC:()=>r.HXm,MESSAGINGOPERATIONVALUES_PROCESS:()=>r.AVC,MESSAGINGOPERATIONVALUES_RECEIVE:()=>r.mO,MessageTypeValues:()=>r.Ywq,MessagingDestinationKindValues:()=>r.b7t,MessagingOperationValues:()=>r.Qgf,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:()=>r.i9b,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:()=>r.mN_,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:()=>r.Q_6,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:()=>r.EPu,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:()=>r.uzh,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:()=>r.Bez,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:()=>r.uwh,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:()=>r.Rpt,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:()=>r.AdO,NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:()=>r.hu9,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:()=>r.x0j,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:()=>r.hze,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:()=>r.kgK,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:()=>r.rBh,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:()=>r.IMI,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:()=>r.wYf,NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:()=>r.bWQ,NETHOSTCONNECTIONSUBTYPEVALUES_NR:()=>r.JPM,NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:()=>r.ddb,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:()=>r._28,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:()=>r.yIV,NETHOSTCONNECTIONTYPEVALUES_CELL:()=>r.j7z,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:()=>r.D3U,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:()=>r.Vur,NETHOSTCONNECTIONTYPEVALUES_WIFI:()=>r.CGC,NETHOSTCONNECTIONTYPEVALUES_WIRED:()=>r.c1V,NETTRANSPORTVALUES_INPROC:()=>r.JjG,NETTRANSPORTVALUES_IP:()=>r.fN3,NETTRANSPORTVALUES_IP_TCP:()=>r.x85,NETTRANSPORTVALUES_IP_UDP:()=>r.ZUK,NETTRANSPORTVALUES_OTHER:()=>r.EUV,NETTRANSPORTVALUES_PIPE:()=>r.cjY,NETTRANSPORTVALUES_UNIX:()=>r.GR7,NetHostConnectionSubtypeValues:()=>r.cAF,NetHostConnectionTypeValues:()=>r.KSs,NetTransportValues:()=>r.z4S,OSTYPEVALUES_AIX:()=>o.cJ,OSTYPEVALUES_DARWIN:()=>o.JW,OSTYPEVALUES_DRAGONFLYBSD:()=>o.tD,OSTYPEVALUES_FREEBSD:()=>o.xG,OSTYPEVALUES_HPUX:()=>o.BT,OSTYPEVALUES_LINUX:()=>o.Yh,OSTYPEVALUES_NETBSD:()=>o.sS,OSTYPEVALUES_OPENBSD:()=>o.h7,OSTYPEVALUES_SOLARIS:()=>o.l9,OSTYPEVALUES_WINDOWS:()=>o.xR,OSTYPEVALUES_Z_OS:()=>o.Pi,OsTypeValues:()=>o.h0,RPCGRPCSTATUSCODEVALUES_ABORTED:()=>r.$5b,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:()=>r.TiO,RPCGRPCSTATUSCODEVALUES_CANCELLED:()=>r.Ryq,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:()=>r.ueJ,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:()=>r.wAY,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:()=>r._pX,RPCGRPCSTATUSCODEVALUES_INTERNAL:()=>r.dXK,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:()=>r.njt,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:()=>r.ay9,RPCGRPCSTATUSCODEVALUES_OK:()=>r.wJ,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:()=>r.GY$,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:()=>r.nXs,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:()=>r.KNN,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:()=>r._Q_,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:()=>r.gFG,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:()=>r.p1q,RPCGRPCSTATUSCODEVALUES_UNKNOWN:()=>r.ch2,RpcGrpcStatusCodeValues:()=>r.f3T,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:()=>r.wpU,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:()=>r.fhG,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:()=>r.tGA,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:()=>r.byW,SEMATTRS_AWS_DYNAMODB_COUNT:()=>r.F7w,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:()=>r.Wif,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:()=>r.TVZ,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:()=>r.Ouu,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:()=>r.gUJ,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:()=>r.Wx7,SEMATTRS_AWS_DYNAMODB_LIMIT:()=>r.La$,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:()=>r.ti,SEMATTRS_AWS_DYNAMODB_PROJECTION:()=>r.frU,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:()=>r.a4d,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:()=>r.p30,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:()=>r.sxk,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:()=>r.r0m,SEMATTRS_AWS_DYNAMODB_SEGMENT:()=>r.F0K,SEMATTRS_AWS_DYNAMODB_SELECT:()=>r.u4L,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:()=>r.mGg,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:()=>r.Ta3,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:()=>r.DBy,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:()=>r.TCh,SEMATTRS_CODE_FILEPATH:()=>r.cvh,SEMATTRS_CODE_FUNCTION:()=>r.jrL,SEMATTRS_CODE_LINENO:()=>r.usz,SEMATTRS_CODE_NAMESPACE:()=>r.klU,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:()=>r.Qt9,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:()=>r.DNX,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:()=>r.xq_,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:()=>r._iR,SEMATTRS_DB_CASSANDRA_KEYSPACE:()=>r.Unu,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:()=>r.Itx,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:()=>r.NlD,SEMATTRS_DB_CASSANDRA_TABLE:()=>r.zri,SEMATTRS_DB_CONNECTION_STRING:()=>r.cd9,SEMATTRS_DB_HBASE_NAMESPACE:()=>r.bd4,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:()=>r.qGX,SEMATTRS_DB_MONGODB_COLLECTION:()=>r.NlA,SEMATTRS_DB_MSSQL_INSTANCE_NAME:()=>r.Eh5,SEMATTRS_DB_NAME:()=>r.Rt6,SEMATTRS_DB_OPERATION:()=>r.l60,SEMATTRS_DB_REDIS_DATABASE_INDEX:()=>r.wy2,SEMATTRS_DB_SQL_TABLE:()=>r.pHC,SEMATTRS_DB_STATEMENT:()=>r.FoJ,SEMATTRS_DB_SYSTEM:()=>r.V0Q,SEMATTRS_DB_USER:()=>r.N9D,SEMATTRS_ENDUSER_ID:()=>r.RHQ,SEMATTRS_ENDUSER_ROLE:()=>r.cSi,SEMATTRS_ENDUSER_SCOPE:()=>r.MWE,SEMATTRS_EXCEPTION_ESCAPED:()=>r.GKr,SEMATTRS_EXCEPTION_MESSAGE:()=>r.aP6,SEMATTRS_EXCEPTION_STACKTRACE:()=>r.ipG,SEMATTRS_EXCEPTION_TYPE:()=>r.P4J,SEMATTRS_FAAS_COLDSTART:()=>r.TRX,SEMATTRS_FAAS_CRON:()=>r.HVV,SEMATTRS_FAAS_DOCUMENT_COLLECTION:()=>r.LxM,SEMATTRS_FAAS_DOCUMENT_NAME:()=>r.aTe,SEMATTRS_FAAS_DOCUMENT_OPERATION:()=>r.abe,SEMATTRS_FAAS_DOCUMENT_TIME:()=>r.aKn,SEMATTRS_FAAS_EXECUTION:()=>r.dsp,SEMATTRS_FAAS_INVOKED_NAME:()=>r.PIi,SEMATTRS_FAAS_INVOKED_PROVIDER:()=>r.XNY,SEMATTRS_FAAS_INVOKED_REGION:()=>r.imY,SEMATTRS_FAAS_TIME:()=>r.cFk,SEMATTRS_FAAS_TRIGGER:()=>r.bes,SEMATTRS_HTTP_CLIENT_IP:()=>r.nS0,SEMATTRS_HTTP_FLAVOR:()=>r.o8O,SEMATTRS_HTTP_HOST:()=>r.Qv9,SEMATTRS_HTTP_METHOD:()=>r.vof,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:()=>r.OdI,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:()=>r.Plv,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:()=>r.crS,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:()=>r.XyR,SEMATTRS_HTTP_ROUTE:()=>r.tto,SEMATTRS_HTTP_SCHEME:()=>r.zPu,SEMATTRS_HTTP_SERVER_NAME:()=>r.H35,SEMATTRS_HTTP_STATUS_CODE:()=>r.W_O,SEMATTRS_HTTP_TARGET:()=>r.fub,SEMATTRS_HTTP_URL:()=>r.vSt,SEMATTRS_HTTP_USER_AGENT:()=>r.Nz$,SEMATTRS_MESSAGE_COMPRESSED_SIZE:()=>r.U5o,SEMATTRS_MESSAGE_ID:()=>r.Gsd,SEMATTRS_MESSAGE_TYPE:()=>r.$58,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:()=>r.LfK,SEMATTRS_MESSAGING_CONSUMER_ID:()=>r.w54,SEMATTRS_MESSAGING_CONVERSATION_ID:()=>r.nN_,SEMATTRS_MESSAGING_DESTINATION:()=>r.Yjy,SEMATTRS_MESSAGING_DESTINATION_KIND:()=>r.lDI,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:()=>r.cZl,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:()=>r.rsL,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:()=>r.yRs,SEMATTRS_MESSAGING_KAFKA_PARTITION:()=>r.tNm,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:()=>r.E__,SEMATTRS_MESSAGING_MESSAGE_ID:()=>r.XH7,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:()=>r.CdG,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:()=>r._Zr,SEMATTRS_MESSAGING_OPERATION:()=>r.zpg,SEMATTRS_MESSAGING_PROTOCOL:()=>r._af,SEMATTRS_MESSAGING_PROTOCOL_VERSION:()=>r.DA0,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:()=>r.Zl1,SEMATTRS_MESSAGING_SYSTEM:()=>r.zBy,SEMATTRS_MESSAGING_TEMP_DESTINATION:()=>r.JK9,SEMATTRS_MESSAGING_URL:()=>r.t8j,SEMATTRS_NET_HOST_CARRIER_ICC:()=>r.wgx,SEMATTRS_NET_HOST_CARRIER_MCC:()=>r.cA3,SEMATTRS_NET_HOST_CARRIER_MNC:()=>r.hXS,SEMATTRS_NET_HOST_CARRIER_NAME:()=>r.ynP,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:()=>r.Ltc,SEMATTRS_NET_HOST_CONNECTION_TYPE:()=>r.PfM,SEMATTRS_NET_HOST_IP:()=>r.j$y,SEMATTRS_NET_HOST_NAME:()=>r.h70,SEMATTRS_NET_HOST_PORT:()=>r.Puv,SEMATTRS_NET_PEER_IP:()=>r.RvY,SEMATTRS_NET_PEER_NAME:()=>r.nvt,SEMATTRS_NET_PEER_PORT:()=>r.ZUg,SEMATTRS_NET_TRANSPORT:()=>r.Ac3,SEMATTRS_PEER_SERVICE:()=>r.RyT,SEMATTRS_RPC_GRPC_STATUS_CODE:()=>r.C2y,SEMATTRS_RPC_JSONRPC_ERROR_CODE:()=>r.Zwr,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:()=>r.z_u,SEMATTRS_RPC_JSONRPC_REQUEST_ID:()=>r.yew,SEMATTRS_RPC_JSONRPC_VERSION:()=>r.ZSz,SEMATTRS_RPC_METHOD:()=>r.Y3v,SEMATTRS_RPC_SERVICE:()=>r.GOV,SEMATTRS_RPC_SYSTEM:()=>r.sLO,SEMATTRS_THREAD_ID:()=>r.lpz,SEMATTRS_THREAD_NAME:()=>r.taz,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:()=>o.VH,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:()=>o.SV,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:()=>o.SA,SEMRESATTRS_AWS_ECS_TASK_ARN:()=>o.yB,SEMRESATTRS_AWS_ECS_TASK_FAMILY:()=>o.Zf,SEMRESATTRS_AWS_ECS_TASK_REVISION:()=>o.MK,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:()=>o.v0,SEMRESATTRS_AWS_LOG_GROUP_ARNS:()=>o.an,SEMRESATTRS_AWS_LOG_GROUP_NAMES:()=>o.qF,SEMRESATTRS_AWS_LOG_STREAM_ARNS:()=>o.ZZ,SEMRESATTRS_AWS_LOG_STREAM_NAMES:()=>o.Dn,SEMRESATTRS_CLOUD_ACCOUNT_ID:()=>o.E3,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:()=>o.xC,SEMRESATTRS_CLOUD_PLATFORM:()=>o.Iq,SEMRESATTRS_CLOUD_PROVIDER:()=>o.mA,SEMRESATTRS_CLOUD_REGION:()=>o.Nw,SEMRESATTRS_CONTAINER_ID:()=>o.ux,SEMRESATTRS_CONTAINER_IMAGE_NAME:()=>o.uB,SEMRESATTRS_CONTAINER_IMAGE_TAG:()=>o.RB,SEMRESATTRS_CONTAINER_NAME:()=>o.aA,SEMRESATTRS_CONTAINER_RUNTIME:()=>o.PZ,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:()=>o.I2,SEMRESATTRS_DEVICE_ID:()=>o.tn,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:()=>o.BF,SEMRESATTRS_DEVICE_MODEL_NAME:()=>o.Bt,SEMRESATTRS_FAAS_ID:()=>o.Mm,SEMRESATTRS_FAAS_INSTANCE:()=>o.uu,SEMRESATTRS_FAAS_MAX_MEMORY:()=>o.PO,SEMRESATTRS_FAAS_NAME:()=>o.Uf,SEMRESATTRS_FAAS_VERSION:()=>o.lO,SEMRESATTRS_HOST_ARCH:()=>o.yT,SEMRESATTRS_HOST_ID:()=>o.zs,SEMRESATTRS_HOST_IMAGE_ID:()=>o.HP,SEMRESATTRS_HOST_IMAGE_NAME:()=>o.be,SEMRESATTRS_HOST_IMAGE_VERSION:()=>o.g9,SEMRESATTRS_HOST_NAME:()=>o.RK,SEMRESATTRS_HOST_TYPE:()=>o.kE,SEMRESATTRS_K8S_CLUSTER_NAME:()=>o.IG,SEMRESATTRS_K8S_CONTAINER_NAME:()=>o.Pb,SEMRESATTRS_K8S_CRONJOB_NAME:()=>o.Vy,SEMRESATTRS_K8S_CRONJOB_UID:()=>o.gT,SEMRESATTRS_K8S_DAEMONSET_NAME:()=>o.Su,SEMRESATTRS_K8S_DAEMONSET_UID:()=>o.rK,SEMRESATTRS_K8S_DEPLOYMENT_NAME:()=>o.do,SEMRESATTRS_K8S_DEPLOYMENT_UID:()=>o.k7,SEMRESATTRS_K8S_JOB_NAME:()=>o.z3,SEMRESATTRS_K8S_JOB_UID:()=>o.mc,SEMRESATTRS_K8S_NAMESPACE_NAME:()=>o.Tl,SEMRESATTRS_K8S_NODE_NAME:()=>o.Ky,SEMRESATTRS_K8S_NODE_UID:()=>o.pV,SEMRESATTRS_K8S_POD_NAME:()=>o.TH,SEMRESATTRS_K8S_POD_UID:()=>o.gJ,SEMRESATTRS_K8S_REPLICASET_NAME:()=>o.kv,SEMRESATTRS_K8S_REPLICASET_UID:()=>o.PU,SEMRESATTRS_K8S_STATEFULSET_NAME:()=>o.kn,SEMRESATTRS_K8S_STATEFULSET_UID:()=>o.f8,SEMRESATTRS_OS_DESCRIPTION:()=>o.ik,SEMRESATTRS_OS_NAME:()=>o.hQ,SEMRESATTRS_OS_TYPE:()=>o.ko,SEMRESATTRS_OS_VERSION:()=>o.AC,SEMRESATTRS_PROCESS_COMMAND:()=>o.Cn,SEMRESATTRS_PROCESS_COMMAND_ARGS:()=>o.U2,SEMRESATTRS_PROCESS_COMMAND_LINE:()=>o.x2,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:()=>o.fP,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:()=>o.xQ,SEMRESATTRS_PROCESS_OWNER:()=>o.Yb,SEMRESATTRS_PROCESS_PID:()=>o.ky,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:()=>o.C3,SEMRESATTRS_PROCESS_RUNTIME_NAME:()=>o.lb,SEMRESATTRS_PROCESS_RUNTIME_VERSION:()=>o.cV,SEMRESATTRS_SERVICE_INSTANCE_ID:()=>o.PL,SEMRESATTRS_SERVICE_NAME:()=>o.AV,SEMRESATTRS_SERVICE_NAMESPACE:()=>o.ar,SEMRESATTRS_SERVICE_VERSION:()=>o.xs,SEMRESATTRS_TELEMETRY_AUTO_VERSION:()=>o.nA,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:()=>o.Pl,SEMRESATTRS_TELEMETRY_SDK_NAME:()=>o.$L,SEMRESATTRS_TELEMETRY_SDK_VERSION:()=>o.y$,SEMRESATTRS_WEBENGINE_DESCRIPTION:()=>o.U1,SEMRESATTRS_WEBENGINE_NAME:()=>o.HF,SEMRESATTRS_WEBENGINE_VERSION:()=>o.WN,SemanticAttributes:()=>r.IXq,SemanticResourceAttributes:()=>o._2,TELEMETRYSDKLANGUAGEVALUES_CPP:()=>o.S5,TELEMETRYSDKLANGUAGEVALUES_DOTNET:()=>o.XE,TELEMETRYSDKLANGUAGEVALUES_ERLANG:()=>o.o2,TELEMETRYSDKLANGUAGEVALUES_GO:()=>o.HE,TELEMETRYSDKLANGUAGEVALUES_JAVA:()=>o.du,TELEMETRYSDKLANGUAGEVALUES_NODEJS:()=>o.wE,TELEMETRYSDKLANGUAGEVALUES_PHP:()=>o.tP,TELEMETRYSDKLANGUAGEVALUES_PYTHON:()=>o.$c,TELEMETRYSDKLANGUAGEVALUES_RUBY:()=>o.jN,TELEMETRYSDKLANGUAGEVALUES_WEBJS:()=>o.uh,TelemetrySdkLanguageValues:()=>o.wP});var r=n(366),o=n(87361)},21038:(e,t,n)=>{"use strict";function r(e){for(var t={},n=e.length,r=0;r<n;r++){var o=e[r];o&&(t[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return t}n.d(t,{O:()=>r})},87361:(e,t,n)=>{"use strict";n.d(t,{$L:()=>$t,$R:()=>Dn,$T:()=>Xn,$c:()=>Kr,AC:()=>Gt,AS:()=>$n,AV:()=>Yt,BF:()=>et,BT:()=>Nr,BY:()=>ln,Bt:()=>tt,C3:()=>Xt,Cg:()=>dr,Cn:()=>Dt,DL:()=>ur,Dn:()=>We,E3:()=>Le,Eh:()=>cn,Fz:()=>zn,HE:()=>Zr,HF:()=>tn,HP:()=>pt,I2:()=>qe,IG:()=>ft,Iq:()=>ke,JO:()=>kn,JW:()=>Ir,Jn:()=>Jn,Ky:()=>mt,L6:()=>jn,MK:()=>je,Mm:()=>rt,Nw:()=>Me,OZ:()=>cr,PL:()=>Jt,PO:()=>it,PU:()=>Et,PZ:()=>Je,Pb:()=>bt,Pi:()=>Lr,Pl:()=>qt,RB:()=>$e,RK:()=>ct,S5:()=>jr,SA:()=>Ve,SV:()=>Ge,Su:()=>Ot,TH:()=>St,Tg:()=>Bn,Tl:()=>_t,U1:()=>rn,U2:()=>Bt,UQ:()=>ir,Uf:()=>nt,VH:()=>Ue,Vf:()=>Gn,Vm:()=>Hn,Vx:()=>xn,Vy:()=>Lt,WC:()=>Ln,WE:()=>Pn,WN:()=>nn,XE:()=>Br,Xm:()=>un,Yb:()=>Ft,Yh:()=>Tr,ZZ:()=>Xe,Zf:()=>De,_2:()=>on,a1:()=>Wn,aA:()=>Ye,an:()=>Ze,ar:()=>Kt,av:()=>ar,be:()=>dt,cJ:()=>Pr,cV:()=>Wt,do:()=>It,du:()=>Wr,f8:()=>Rt,fP:()=>Vt,g9:()=>ht,gJ:()=>yt,gT:()=>wt,h0:()=>Mr,h7:()=>Cr,hQ:()=>kt,hi:()=>sr,ig:()=>lr,ik:()=>xt,jN:()=>Jr,jV:()=>pn,k7:()=>Tt,kE:()=>ut,kn:()=>At,ko:()=>Mt,kv:()=>vt,ky:()=>Ut,l9:()=>wr,lO:()=>ot,lb:()=>Zt,mA:()=>we,mc:()=>Nt,nA:()=>en,ns:()=>Yn,o2:()=>Fr,oH:()=>Vn,op:()=>wn,ov:()=>dn,p7:()=>Mn,pV:()=>gt,qB:()=>Fn,qF:()=>Fe,qN:()=>Zn,rK:()=>Ct,sS:()=>Ar,so:()=>or,tD:()=>Or,tP:()=>Yr,tn:()=>Qe,uB:()=>ze,uh:()=>zr,uu:()=>st,ux:()=>Ke,v0:()=>Be,wE:()=>Xr,wP:()=>$r,x2:()=>jt,xC:()=>xe,xG:()=>Rr,xQ:()=>Ht,xR:()=>vr,xs:()=>zt,y$:()=>Qt,yB:()=>He,yT:()=>lt,z3:()=>Pt,zF:()=>Un,zs:()=>at});var r=n(21038),o="cloud.provider",s="cloud.account.id",i="cloud.region",a="cloud.availability_zone",c="cloud.platform",u="aws.ecs.container.arn",l="aws.ecs.cluster.arn",d="aws.ecs.launchtype",p="aws.ecs.task.arn",h="aws.ecs.task.family",f="aws.ecs.task.revision",m="aws.eks.cluster.arn",g="aws.log.group.names",_="aws.log.group.arns",y="aws.log.stream.names",S="aws.log.stream.arns",b="container.name",E="container.id",v="container.runtime",T="container.image.name",I="container.image.tag",R="deployment.environment",A="device.id",C="device.model.identifier",O="device.model.name",N="faas.name",P="faas.id",w="faas.version",L="faas.instance",M="faas.max_memory",x="host.id",k="host.name",G="host.type",U="host.arch",V="host.image.name",H="host.image.id",D="host.image.version",j="k8s.cluster.name",B="k8s.node.name",F="k8s.node.uid",Z="k8s.namespace.name",W="k8s.pod.uid",X="k8s.pod.name",Y="k8s.container.name",K="k8s.replicaset.uid",J="k8s.replicaset.name",z="k8s.deployment.uid",$="k8s.deployment.name",q="k8s.statefulset.uid",Q="k8s.statefulset.name",ee="k8s.daemonset.uid",te="k8s.daemonset.name",ne="k8s.job.uid",re="k8s.job.name",oe="k8s.cronjob.uid",se="k8s.cronjob.name",ie="os.type",ae="os.description",ce="os.name",ue="os.version",le="process.pid",de="process.executable.name",pe="process.executable.path",he="process.command",fe="process.command_line",me="process.command_args",ge="process.owner",_e="process.runtime.name",ye="process.runtime.version",Se="process.runtime.description",be="service.name",Ee="service.namespace",ve="service.instance.id",Te="service.version",Ie="telemetry.sdk.name",Re="telemetry.sdk.language",Ae="telemetry.sdk.version",Ce="telemetry.auto.version",Oe="webengine.name",Ne="webengine.version",Pe="webengine.description",we=o,Le=s,Me=i,xe=a,ke=c,Ge=u,Ue=l,Ve=d,He=p,De=h,je=f,Be=m,Fe=g,Ze=_,We=y,Xe=S,Ye=b,Ke=E,Je=v,ze=T,$e=I,qe=R,Qe=A,et=C,tt=O,nt=N,rt=P,ot=w,st=L,it=M,at=x,ct=k,ut=G,lt=U,dt=V,pt=H,ht=D,ft=j,mt=B,gt=F,_t=Z,yt=W,St=X,bt=Y,Et=K,vt=J,Tt=z,It=$,Rt=q,At=Q,Ct=ee,Ot=te,Nt=ne,Pt=re,wt=oe,Lt=se,Mt=ie,xt=ae,kt=ce,Gt=ue,Ut=le,Vt=de,Ht=pe,Dt=he,jt=fe,Bt=me,Ft=ge,Zt=_e,Wt=ye,Xt=Se,Yt=be,Kt=Ee,Jt=ve,zt=Te,$t=Ie,qt=Re,Qt=Ae,en=Ce,tn=Oe,nn=Ne,rn=Pe,on=(0,r.O)([o,s,i,a,c,u,l,d,p,h,f,m,g,_,y,S,b,E,v,T,I,R,A,C,O,N,P,w,L,M,x,k,G,U,V,H,D,j,B,F,Z,W,X,Y,K,J,z,$,q,Q,ee,te,ne,re,oe,se,ie,ae,ce,ue,le,de,pe,he,fe,me,ge,_e,ye,Se,be,Ee,ve,Te,Ie,Re,Ae,Ce,Oe,Ne,Pe]),sn="alibaba_cloud",an="azure",cn=sn,un="aws",ln=an,dn="gcp",pn=(0,r.O)([sn,"aws",an,"gcp"]),hn="alibaba_cloud_ecs",fn="alibaba_cloud_fc",mn="aws_ec2",gn="aws_ecs",_n="aws_eks",yn="aws_lambda",Sn="aws_elastic_beanstalk",bn="azure_vm",En="azure_container_instances",vn="azure_aks",Tn="azure_functions",In="azure_app_service",Rn="gcp_compute_engine",An="gcp_cloud_run",Cn="gcp_kubernetes_engine",On="gcp_cloud_functions",Nn="gcp_app_engine",Pn=hn,wn=fn,Ln=mn,Mn=gn,xn=_n,kn=yn,Gn=Sn,Un=bn,Vn=En,Hn=vn,Dn=Tn,jn=In,Bn=Rn,Fn=An,Zn=Cn,Wn=On,Xn=Nn,Yn=(0,r.O)([hn,fn,mn,gn,_n,yn,Sn,bn,En,vn,Tn,In,Rn,An,Cn,On,Nn]),Kn="fargate",Jn="ec2",zn=Kn,$n=(0,r.O)(["ec2",Kn]),qn="amd64",Qn="arm32",er="arm64",tr="ia64",nr="ppc32",rr="ppc64",or=qn,sr=Qn,ir=er,ar=tr,cr=nr,ur=rr,lr="x86",dr=(0,r.O)([qn,Qn,er,tr,nr,rr,"x86"]),pr="windows",hr="linux",fr="darwin",mr="freebsd",gr="netbsd",_r="openbsd",yr="dragonflybsd",Sr="hpux",br="solaris",Er="z_os",vr=pr,Tr=hr,Ir=fr,Rr=mr,Ar=gr,Cr=_r,Or=yr,Nr=Sr,Pr="aix",wr=br,Lr=Er,Mr=(0,r.O)([pr,hr,fr,mr,gr,_r,yr,Sr,"aix",br,Er]),xr="dotnet",kr="erlang",Gr="java",Ur="nodejs",Vr="python",Hr="ruby",Dr="webjs",jr="cpp",Br=xr,Fr=kr,Zr="go",Wr=Gr,Xr=Ur,Yr="php",Kr=Vr,Jr=Hr,zr=Dr,$r=(0,r.O)(["cpp",xr,kr,"go",Gr,Ur,"php",Vr,Hr,Dr])},366:(e,t,n)=>{"use strict";n.d(t,{$58:()=>jr,$5b:()=>ic,$8v:()=>Hs,$wW:()=>$o,AVC:()=>Ka,Ac3:()=>cn,AdO:()=>Ra,BJ_:()=>Rs,Bez:()=>ma,Bh9:()=>Vs,C2y:()=>Gr,CGC:()=>Di,CK9:()=>ri,CQB:()=>Wo,CdG:()=>Ir,D3U:()=>Fi,DA0:()=>Sr,DBy:()=>ur,DNX:()=>Dt,Dzx:()=>Jo,EPu:()=>Ta,EUV:()=>Mi,E__:()=>Lr,Eh5:()=>Lt,Eo2:()=>Xs,F0K:()=>cr,F7w:()=>lr,FoJ:()=>Pt,G49:()=>Bs,GKr:()=>Kt,GOV:()=>xr,GR7:()=>Pi,GY$:()=>ac,Gsd:()=>Br,H35:()=>Fn,HVV:()=>nn,HXm:()=>Fa,IMI:()=>Ca,IOi:()=>ts,IXq:()=>Wr,Ijl:()=>hi,Itx:()=>xt,IxL:()=>oi,JK9:()=>_r,JPM:()=>Oa,JZz:()=>ms,JjG:()=>Li,K0$:()=>ps,K2_:()=>ss,KNN:()=>oc,KSs:()=>Wi,KjL:()=>Yo,L2R:()=>zo,L5D:()=>os,La$:()=>Qn,LfK:()=>Zr,Ltc:()=>gn,LxM:()=>$t,MWE:()=>In,MpS:()=>Fo,N4Y:()=>As,N9D:()=>Ct,NlA:()=>Ft,NlD:()=>Vt,Nxd:()=>Js,Nz$:()=>Vn,O2W:()=>Zs,OSW:()=>Ys,OdI:()=>Hn,Oe4:()=>Os,Ouu:()=>hr,P4J:()=>Wt,PIi:()=>on,PU4:()=>Do,PfM:()=>mn,Plv:()=>Dn,Puv:()=>hn,Q5s:()=>Ps,Q_6:()=>da,Qgf:()=>Ja,QhH:()=>Ua,Qt9:()=>kt,Qv9:()=>xn,RHQ:()=>vn,Rk0:()=>_s,Rpt:()=>la,Rt6:()=>Nt,RvY:()=>un,RyT:()=>En,Ryq:()=>$a,Spc:()=>ys,TCh:()=>It,TKU:()=>gs,TRX:()=>rn,TVZ:()=>rr,Ta3:()=>Xn,TiO:()=>nc,Tl5:()=>_i,ToY:()=>si,U5o:()=>Fr,Unu:()=>Mt,V02:()=>Qo,V0Q:()=>Rt,VEl:()=>di,VMk:()=>js,Vp5:()=>Vo,Vur:()=>Zi,WJJ:()=>Fs,W_O:()=>Gn,W_f:()=>bs,Wb_:()=>Uo,Wif:()=>sr,Wx7:()=>Kn,X36:()=>Ss,XER:()=>Ko,XH7:()=>Er,XNY:()=>sn,XTF:()=>ns,Xdf:()=>rs,Xuz:()=>hs,XyR:()=>Bn,Y$v:()=>ls,Y3v:()=>kr,Yjy:()=>mr,Ylk:()=>Cs,Ywq:()=>yc,ZSz:()=>Ur,ZUK:()=>Oi,ZUg:()=>ln,Zl1:()=>Cr,Zwr:()=>Hr,_28:()=>Aa,_Q_:()=>pc,_Zr:()=>Tr,_af:()=>yr,_iR:()=>Ut,_pX:()=>sc,a4d:()=>Jn,aKn:()=>Qt,aP6:()=>Xt,aTe:()=>en,abe:()=>qt,ay9:()=>tc,b7t:()=>Za,bWQ:()=>Pa,bZN:()=>gc,bd4:()=>jt,bes:()=>Jt,bfK:()=>Ho,byW:()=>Yn,c1V:()=>ji,cA3:()=>yn,cAF:()=>wa,cFk:()=>tn,cSi:()=>Tn,cZl:()=>Pr,cd9:()=>At,ch2:()=>qa,cjY:()=>wi,crS:()=>jn,cvh:()=>Nn,d3j:()=>yi,dNH:()=>Ha,dXK:()=>uc,dbJ:()=>xa,ddb:()=>Na,dsp:()=>zt,f3T:()=>hc,fN3:()=>Ni,fhG:()=>pr,frU:()=>qn,fub:()=>Mn,g9x:()=>Ks,gFG:()=>lc,gGD:()=>Ga,gUJ:()=>tr,h70:()=>fn,hV:()=>vs,hXS:()=>Sn,hu9:()=>_a,hze:()=>Ia,i9b:()=>ha,iFX:()=>Va,iPC:()=>ii,imY:()=>an,ipG:()=>Yt,irN:()=>cs,j$y:()=>pn,j7z:()=>Bi,jCw:()=>Bo,jrL:()=>Cn,kOl:()=>Si,kPW:()=>ka,kgK:()=>ya,klU:()=>On,l60:()=>wt,lDI:()=>gr,lcm:()=>fs,lpz:()=>Rn,mGg:()=>ir,mN_:()=>ga,mO:()=>Ya,mc2:()=>us,mlL:()=>pi,nN_:()=>vr,nS0:()=>Wn,nWK:()=>es,nXs:()=>rc,ngE:()=>as,njt:()=>Qa,npt:()=>Ba,nvt:()=>dn,nwz:()=>Zo,o8O:()=>Un,oBD:()=>Es,oF4:()=>li,p1q:()=>cc,p30:()=>zn,pHC:()=>Zt,pfp:()=>Xo,poY:()=>Is,qGX:()=>Ot,r0m:()=>ar,rBh:()=>ba,rsL:()=>Nr,sLO:()=>Mr,slN:()=>Ws,sr7:()=>_c,sxk:()=>dr,t8j:()=>br,tGA:()=>$n,tNm:()=>wr,taz:()=>An,ti:()=>or,tto:()=>Zn,u4L:()=>nr,uZf:()=>ti,ueJ:()=>dc,usz:()=>Pn,uwh:()=>Ea,uzh:()=>fa,v8K:()=>ni,vSt:()=>Ln,vhy:()=>Ds,vl2:()=>ds,vof:()=>wn,w54:()=>Ar,wAY:()=>ec,wJ:()=>za,wYf:()=>va,wgx:()=>bn,wpU:()=>er,wy2:()=>Bt,x0j:()=>Sa,x85:()=>Ci,xhJ:()=>jo,xq_:()=>Ht,y3W:()=>gi,y6V:()=>is,yIV:()=>pa,yRs:()=>Or,y__:()=>Ns,yew:()=>Vr,ynC:()=>qo,ynP:()=>_n,z4S:()=>xi,zBy:()=>fr,zI8:()=>bi,zPu:()=>kn,z_u:()=>Dr,zmF:()=>Ts,zpg:()=>Rr,zri:()=>Gt});var r=n(21038),o="aws.lambda.invoked_arn",s="db.system",i="db.connection_string",a="db.user",c="db.jdbc.driver_classname",u="db.name",l="db.statement",d="db.operation",p="db.mssql.instance_name",h="db.cassandra.keyspace",f="db.cassandra.page_size",m="db.cassandra.consistency_level",g="db.cassandra.table",_="db.cassandra.idempotence",y="db.cassandra.speculative_execution_count",S="db.cassandra.coordinator.id",b="db.cassandra.coordinator.dc",E="db.hbase.namespace",v="db.redis.database_index",T="db.mongodb.collection",I="db.sql.table",R="exception.type",A="exception.message",C="exception.stacktrace",O="exception.escaped",N="faas.trigger",P="faas.execution",w="faas.document.collection",L="faas.document.operation",M="faas.document.time",x="faas.document.name",k="faas.time",G="faas.cron",U="faas.coldstart",V="faas.invoked_name",H="faas.invoked_provider",D="faas.invoked_region",j="net.transport",B="net.peer.ip",F="net.peer.port",Z="net.peer.name",W="net.host.ip",X="net.host.port",Y="net.host.name",K="net.host.connection.type",J="net.host.connection.subtype",z="net.host.carrier.name",$="net.host.carrier.mcc",q="net.host.carrier.mnc",Q="net.host.carrier.icc",ee="peer.service",te="enduser.id",ne="enduser.role",re="enduser.scope",oe="thread.id",se="thread.name",ie="code.function",ae="code.namespace",ce="code.filepath",ue="code.lineno",le="http.method",de="http.url",pe="http.target",he="http.host",fe="http.scheme",me="http.status_code",ge="http.flavor",_e="http.user_agent",ye="http.request_content_length",Se="http.request_content_length_uncompressed",be="http.response_content_length",Ee="http.response_content_length_uncompressed",ve="http.server_name",Te="http.route",Ie="http.client_ip",Re="aws.dynamodb.table_names",Ae="aws.dynamodb.consumed_capacity",Ce="aws.dynamodb.item_collection_metrics",Oe="aws.dynamodb.provisioned_read_capacity",Ne="aws.dynamodb.provisioned_write_capacity",Pe="aws.dynamodb.consistent_read",we="aws.dynamodb.projection",Le="aws.dynamodb.limit",Me="aws.dynamodb.attributes_to_get",xe="aws.dynamodb.index_name",ke="aws.dynamodb.select",Ge="aws.dynamodb.global_secondary_indexes",Ue="aws.dynamodb.local_secondary_indexes",Ve="aws.dynamodb.exclusive_start_table",He="aws.dynamodb.table_count",De="aws.dynamodb.scan_forward",je="aws.dynamodb.segment",Be="aws.dynamodb.total_segments",Fe="aws.dynamodb.count",Ze="aws.dynamodb.scanned_count",We="aws.dynamodb.attribute_definitions",Xe="aws.dynamodb.global_secondary_index_updates",Ye="messaging.system",Ke="messaging.destination",Je="messaging.destination_kind",ze="messaging.temp_destination",$e="messaging.protocol",qe="messaging.protocol_version",Qe="messaging.url",et="messaging.message_id",tt="messaging.conversation_id",nt="messaging.message_payload_size_bytes",rt="messaging.message_payload_compressed_size_bytes",ot="messaging.operation",st="messaging.consumer_id",it="messaging.rabbitmq.routing_key",at="messaging.kafka.message_key",ct="messaging.kafka.consumer_group",ut="messaging.kafka.client_id",lt="messaging.kafka.partition",dt="messaging.kafka.tombstone",pt="rpc.system",ht="rpc.service",ft="rpc.method",mt="rpc.grpc.status_code",gt="rpc.jsonrpc.version",_t="rpc.jsonrpc.request_id",yt="rpc.jsonrpc.error_code",St="rpc.jsonrpc.error_message",bt="message.type",Et="message.id",vt="message.compressed_size",Tt="message.uncompressed_size",It=o,Rt=s,At=i,Ct=a,Ot=c,Nt=u,Pt=l,wt=d,Lt=p,Mt=h,xt=f,kt=m,Gt=g,Ut=_,Vt=y,Ht=S,Dt=b,jt=E,Bt=v,Ft=T,Zt=I,Wt=R,Xt=A,Yt=C,Kt=O,Jt=N,zt=P,$t=w,qt=L,Qt=M,en=x,tn=k,nn=G,rn=U,on=V,sn=H,an=D,cn=j,un=B,ln=F,dn=Z,pn=W,hn=X,fn=Y,mn=K,gn=J,_n=z,yn=$,Sn=q,bn=Q,En=ee,vn=te,Tn=ne,In=re,Rn=oe,An=se,Cn=ie,On=ae,Nn=ce,Pn=ue,wn=le,Ln=de,Mn=pe,xn=he,kn=fe,Gn=me,Un=ge,Vn=_e,Hn=ye,Dn=Se,jn=be,Bn=Ee,Fn=ve,Zn=Te,Wn=Ie,Xn=Re,Yn=Ae,Kn=Ce,Jn=Oe,zn=Ne,$n=Pe,qn=we,Qn=Le,er=Me,tr=xe,nr=ke,rr=Ge,or=Ue,sr=Ve,ir=He,ar=De,cr=je,ur=Be,lr=Fe,dr=Ze,pr=We,hr=Xe,fr=Ye,mr=Ke,gr=Je,_r=ze,yr=$e,Sr=qe,br=Qe,Er=et,vr=tt,Tr=nt,Ir=rt,Rr=ot,Ar=st,Cr=it,Or=at,Nr=ct,Pr=ut,wr=lt,Lr=dt,Mr=pt,xr=ht,kr=ft,Gr=mt,Ur=gt,Vr=_t,Hr=yt,Dr=St,jr=bt,Br=Et,Fr=vt,Zr=Tt,Wr=(0,r.O)([o,s,i,a,c,u,l,d,p,h,f,m,g,_,y,S,b,E,v,T,I,R,A,C,O,N,P,w,L,M,x,k,G,U,V,H,D,j,B,F,Z,W,X,Y,K,J,z,$,q,Q,ee,te,ne,re,oe,se,ie,ae,ce,ue,le,de,pe,he,fe,me,ge,_e,ye,Se,be,Ee,ve,Te,Ie,Re,Ae,Ce,Oe,Ne,Pe,we,Le,Me,xe,ke,Ge,Ue,Ve,He,De,je,Be,Fe,Ze,We,Xe,Ye,Ke,Je,ze,$e,qe,Qe,et,tt,nt,rt,ot,st,it,at,ct,ut,lt,dt,pt,ht,ft,mt,gt,_t,yt,St,bt,Et,vt,Tt]),Xr="other_sql",Yr="mssql",Kr="mysql",Jr="oracle",zr="postgresql",$r="redshift",qr="hive",Qr="cloudscape",eo="hsqldb",to="progress",no="maxdb",ro="hanadb",oo="ingres",so="firstsql",io="cache",ao="adabas",co="firebird",uo="derby",lo="filemaker",po="informix",ho="instantdb",fo="interbase",mo="mariadb",go="netezza",_o="pervasive",yo="pointbase",So="sqlite",bo="sybase",Eo="teradata",vo="vertica",To="coldfusion",Io="cassandra",Ro="hbase",Ao="mongodb",Co="redis",Oo="couchbase",No="couchdb",Po="cosmosdb",wo="dynamodb",Lo="neo4j",Mo="geode",xo="elasticsearch",ko="memcached",Go="cockroachdb",Uo=Xr,Vo=Yr,Ho=Kr,Do=Jr,jo="db2",Bo=zr,Fo=$r,Zo=qr,Wo=Qr,Xo=eo,Yo=to,Ko=no,Jo=ro,zo=oo,$o=so,qo="edb",Qo=io,es=ao,ts=co,ns=uo,rs=lo,os=po,ss=ho,is=fo,as=mo,cs=go,us=_o,ls=yo,ds=So,ps=bo,hs=Eo,fs=vo,ms="h2",gs=To,_s=Io,ys=Ro,Ss=Ao,bs=Co,Es=Oo,vs=No,Ts=Po,Is=wo,Rs=Lo,As=Mo,Cs=xo,Os=ko,Ns=Go,Ps=(0,r.O)([Xr,Yr,Kr,Jr,"db2",zr,$r,qr,Qr,eo,to,no,ro,oo,so,"edb",io,ao,co,uo,lo,po,ho,fo,mo,go,_o,yo,So,bo,Eo,vo,"h2",To,Io,Ro,Ao,Co,Oo,No,Po,wo,Lo,Mo,xo,ko,Go]),ws="each_quorum",Ls="quorum",Ms="local_quorum",xs="three",ks="local_one",Gs="serial",Us="local_serial",Vs="all",Hs=ws,Ds=Ls,js=Ms,Bs="one",Fs="two",Zs=xs,Ws=ks,Xs="any",Ys=Gs,Ks=Us,Js=(0,r.O)(["all",ws,Ls,Ms,"one","two",xs,ks,"any",Gs,Us]),zs="datasource",$s="http",qs="pubsub",Qs="timer",ei="other",ti=zs,ni=$s,ri=qs,oi=Qs,si=ei,ii=(0,r.O)([zs,$s,qs,Qs,ei]),ai="insert",ci="edit",ui="delete",li=ai,di=ci,pi=ui,hi=(0,r.O)([ai,ci,ui]),fi="alibaba_cloud",mi="azure",gi=fi,_i="aws",yi=mi,Si="gcp",bi=(0,r.O)([fi,"aws",mi,"gcp"]),Ei="ip_tcp",vi="ip_udp",Ti="unix",Ii="pipe",Ri="inproc",Ai="other",Ci=Ei,Oi=vi,Ni="ip",Pi=Ti,wi=Ii,Li=Ri,Mi=Ai,xi=(0,r.O)([Ei,vi,"ip",Ti,Ii,Ri,Ai]),ki="wifi",Gi="wired",Ui="cell",Vi="unavailable",Hi="unknown",Di=ki,ji=Gi,Bi=Ui,Fi=Vi,Zi=Hi,Wi=(0,r.O)([ki,Gi,Ui,Vi,Hi]),Xi="gprs",Yi="edge",Ki="umts",Ji="cdma",zi="evdo_0",$i="evdo_a",qi="cdma2000_1xrtt",Qi="hsdpa",ea="hsupa",ta="hspa",na="iden",ra="evdo_b",oa="ehrpd",sa="hspap",ia="td_scdma",aa="iwlan",ca="nrnsa",ua="lte_ca",la=Xi,da=Yi,pa=Ki,ha=Ji,fa=zi,ma=$i,ga=qi,_a=Qi,ya=ea,Sa=ta,ba=na,Ea=ra,va="lte",Ta=oa,Ia=sa,Ra="gsm",Aa=ia,Ca=aa,Oa="nr",Na=ca,Pa=ua,wa=(0,r.O)([Xi,Yi,Ki,Ji,zi,$i,qi,Qi,ea,ta,na,ra,"lte",oa,sa,"gsm",ia,aa,"nr",ca,ua]),La="SPDY",Ma="QUIC",xa="1.0",ka="1.1",Ga="2.0",Ua=La,Va=Ma,Ha={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:La,QUIC:Ma},Da="queue",ja="topic",Ba=Da,Fa=ja,Za=(0,r.O)([Da,ja]),Wa="receive",Xa="process",Ya=Wa,Ka=Xa,Ja=(0,r.O)([Wa,Xa]),za=0,$a=1,qa=2,Qa=3,ec=4,tc=5,nc=6,rc=7,oc=8,sc=9,ic=10,ac=11,cc=12,uc=13,lc=14,dc=15,pc=16,hc={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},fc="SENT",mc="RECEIVED",gc=fc,_c=mc,yc=(0,r.O)([fc,mc])},57263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSqlCommenterComment=void 0;const r=n(74681),o=n(72477);t.addSqlCommenterComment=function(e,t){if("string"!=typeof t||0===t.length)return t;if(function(e){const t=e.indexOf("--");return t>=0||!(e.indexOf("/*")<0)&&t<e.indexOf("*/")}(t))return t;const n=new o.W3CTraceContextPropagator,s={};n.inject(r.trace.setSpan(r.ROOT_CONTEXT,e),s,r.defaultTextMapSetter);const i=Object.keys(s).sort();return 0===i.length?t:`${t} /*${i.map((e=>`${e}='${encodeURIComponent(s[e]).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}'`)).join(",")}*/`}},80600:(e,t,n)=>{"use strict";var r,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(c,{GLOBAL_KEY:()=>p,MODULE_NAME:()=>m,NAME:()=>f,VERSION:()=>h}),e.exports=(r=c,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))a.call(e,n)||undefined===n||o(e,n,{get:()=>t[n],enumerable:!(r=s(t,n))||r.enumerable});return e})(o({},"__esModule",{value:!0}),r));var u=(0,n(19073).__commonJS)({"package.json"(e,t){t.exports={name:"@prisma/instrumentation",version:"5.17.0",description:"OpenTelemetry compliant instrumentation for Prisma Client",main:"dist/index.js",types:"dist/index.d.ts",license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation"},bugs:"https://github.com/prisma/prisma/issues",devDependencies:{"@prisma/internals":"workspace:*","@swc/core":"1.6.13","@types/jest":"29.5.12","@types/node":"18.19.31",jest:"29.7.0","jest-junit":"16.0.0",typescript:"5.4.5"},dependencies:{"@opentelemetry/api":"^1.8","@opentelemetry/instrumentation":"^0.49 || ^0.50 || ^0.51 || ^0.52.0","@opentelemetry/sdk-trace-base":"^1.22"},files:["dist"],keywords:["prisma","instrumentation","opentelemetry","otel"],scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"jest"},sideEffects:!1}}}),{version:l,name:d}=u(),p="PRISMA_INSTRUMENTATION",h=l,f=d,m="prisma"},62765:(e,t,n)=>{"use strict";var r,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(c,{PrismaInstrumentation:()=>p}),e.exports=(r=c,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))a.call(e,n)||undefined===n||o(e,n,{get:()=>t[n],enumerable:!(r=s(t,n))||r.enumerable});return e})(o({},"__esModule",{value:!0}),r));var u=n(27233),l=n(80600),d=n(25907),p=class extends d.InstrumentationBase{constructor(e={}){super(l.NAME,l.VERSION,e)}init(){return[new d.InstrumentationNodeModuleDefinition(l.MODULE_NAME,[l.VERSION])]}enable(){const e=this._config,t={helper:new u.ActiveTracingHelper({traceMiddleware:e.middleware??!1})};global[l.GLOBAL_KEY]=t}disable(){delete global[l.GLOBAL_KEY]}isEnabled(){return Boolean(global[l.GLOBAL_KEY])}}},19073:e=>{"use strict";var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(i,{__commonJS:()=>c}),e.exports=(t=i,((e,t,i,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of o(t))s.call(e,i)||undefined===i||n(e,i,{get:()=>t[i],enumerable:!(a=r(t,i))||a.enumerable});return e})(n({},"__esModule",{value:!0}),t));var a=Object.getOwnPropertyNames,c=(e,t)=>function(){return t||(0,e[a(e)[0]])((t={exports:{}}).exports,t),t.exports}},27233:(e,t,n)=>{"use strict";var r,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(c,{ActiveTracingHelper:()=>p}),e.exports=(r=c,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))a.call(e,n)||undefined===n||o(e,n,{get:()=>t[n],enumerable:!(r=s(t,n))||r.enumerable});return e})(o({},"__esModule",{value:!0}),r));var u=n(74681),l=n(71426),d="true"===process.env.PRISMA_SHOW_ALL_TRACES,p=class{constructor({traceMiddleware:e}){this.traceMiddleware=e}isEnabled(){return!0}getTraceParent(e){const t=u.trace.getSpanContext(e??u.context.active());return t?`00-${t.traceId}-${t.spanId}-0${t.traceFlags}`:"00-10-10-00"}createEngineSpan(e){const t=u.trace.getTracer("prisma");e.spans.forEach((e=>{const n={traceId:e.trace_id,spanId:e.span_id,traceFlags:u.TraceFlags.SAMPLED},r=e.links?.map((e=>({context:{traceId:e.trace_id,spanId:e.span_id,traceFlags:u.TraceFlags.SAMPLED}}))),o=new l.Span(t,u.ROOT_CONTEXT,e.name,n,u.SpanKind.INTERNAL,e.parent_span_id,r,e.start_time);e.attributes&&o.setAttributes(e.attributes),o.end(e.end_time)}))}getActiveContext(){return u.context.active()}runInChildSpan(e,t){if("string"==typeof e&&(e={name:e}),e.internal&&!d)return t();if(e.middleware&&!this.traceMiddleware)return t();const n=u.trace.getTracer("prisma"),r=e.context??this.getActiveContext(),o=`prisma:client:${e.name}`;if(!1===e.active){const s=n.startSpan(o,e,r);return h(s,t(s,r))}return n.startActiveSpan(o,e,(e=>h(e,t(e,r))))}};function h(e,t){return null!=(n=t)&&"function"==typeof n.then?t.then((t=>(e.end(),t)),(t=>{throw e.end(),t})):(e.end(),t);var n}},57991:(e,t,n)=>{"use strict";var r,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(c,{PrismaInstrumentation:()=>u.PrismaInstrumentation}),e.exports=(r=c,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))a.call(e,n)||undefined===n||o(e,n,{get:()=>t[n],enumerable:!(r=s(t,n))||r.enumerable});return e})(o({},"__esModule",{value:!0}),r));var u=n(62765);n(27233),n(80600),n(19073)},85740:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);function o(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}t.getEnvelopeEndpointWithUrlEncodedAuth=function(e,t,n){return t||`${function(e){return`${o(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r.urlEncode({sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,n)}`},t.getReportDialogEndpoint=function(e,t){const n=r.makeDsn(e);if(!n)return"";const s=`${o(n)}embed/error-page/`;let i=`dsn=${r.dsnToString(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(i+=`&name=${encodeURIComponent(e.name)}`),e.email&&(i+=`&email=${encodeURIComponent(e.email)}`)}else i+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${s}?${i}`}},42810:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(73220),o=n(5475);t.getAsyncContextStrategy=function(e){const t=r.getSentryCarrier(e);return t.acs?t.acs:o.getStackAsyncContextStrategy()},t.setAsyncContextStrategy=function(e){const t=r.getMainCarrier();r.getSentryCarrier(t).acs=e}},5475:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(37320),s=n(69640),i=n(73220);class a{constructor(e,t){let n,r;n=e||new s.Scope,r=t||new s.Scope,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return r.isThenable(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}function c(){const e=i.getMainCarrier(),t=i.getSentryCarrier(e);return t.stack=t.stack||new a(o.getDefaultCurrentScope(),o.getDefaultIsolationScope())}function u(e){return c().withScope(e)}function l(e,t){const n=c();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function d(e){return c().withScope((()=>e(c().getIsolationScope())))}t.AsyncContextStack=a,t.getStackAsyncContextStrategy=function(){return{withIsolationScope:d,withScope:u,withSetScope:l,withSetIsolationScope:(e,t)=>d(t),getCurrentScope:()=>c().getScope(),getIsolationScope:()=>c().getIsolationScope()}}},29564:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(85740),s=n(49564),i=n(68974),a=n(30238),c=n(82430),u=n(11348),l=n(93754),d=n(10393),p=n(31485),h="Not capturing exception because it's already been captured.";function f(e){return void 0===e.type}function m(e){return"transaction"===e.type}t.BaseClient=class{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=r.makeDsn(e.dsn):i.DEBUG_BUILD&&r.logger.warn("No DSN provided, client will not send events."),this._dsn){const t=o.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const o=r.uuid4();if(r.checkOrSetAlreadyCaught(e))return i.DEBUG_BUILD&&r.logger.log(h),o;const s={event_id:o,...t};return this._process(this.eventFromException(e,s).then((e=>this._captureEvent(e,s,n)))),s.event_id}captureMessage(e,t,n,o){const s={event_id:r.uuid4(),...n},i=r.isParameterizedString(e)?e:String(e),a=r.isPrimitive(e)?this.eventFromMessage(i,t,s):this.eventFromException(e,s);return this._process(a.then((e=>this._captureEvent(e,s,o)))),s.event_id}captureEvent(e,t,n){const o=r.uuid4();if(t&&t.originalException&&r.checkOrSetAlreadyCaught(t.originalException))return i.DEBUG_BUILD&&r.logger.log(h),o;const s={event_id:o,...t},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||n)),s.event_id}captureSession(e){"string"!=typeof e.release?i.DEBUG_BUILD&&r.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),u.updateSession(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):r.resolvedSyncPromise(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];c.setupIntegration(this,e,this._integrations),t||c.afterSetupIntegrations(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=a.createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=r.addItemToEnvelope(n,r.createAttachmentEnvelopeItem(e));const o=this.sendEnvelope(n);o&&o.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=a.createSessionEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const o="number"==typeof n?n:1,s=`${e}:${t}`;i.DEBUG_BUILD&&r.logger.log(`Recording outcome: "${s}"${o>1?` (${o} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+o}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(i.DEBUG_BUILD&&r.logger.error("Error while sending event:",e),e))):(i.DEBUG_BUILD&&r.logger.error("Transport disabled"),r.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=c.setupIntegrations(this,e),c.afterSetupIntegrations(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(u.updateSession(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new r.SyncPromise((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,o=s.getIsolationScope()){const i=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),e.type||o.setLastEventId(e.event_id||t.event_id),p.prepareEvent(i,e,t,n,this,o).then((e=>{if(null===e)return e;const t={...o.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:o,parentSpanId:s,dsc:i}=t;e.contexts={trace:r.dropUndefinedKeys({trace_id:n,span_id:o,parent_span_id:s}),...e.contexts};const a=i||l.getDynamicSamplingContextFromClient(n,this);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(i.DEBUG_BUILD){const t=e;"log"===t.logLevel?r.logger.log(t.message):r.logger.warn(t)}}))}_processEvent(e,t,n){const o=this.getOptions(),{sampleRate:s}=o,i=m(e),a=f(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===s?void 0:d.parseSampleRate(s);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",e),r.rejectedSyncPromise(new r.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const p="replay_event"===c?"replay":c,h=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,h).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",p,e),new r.SentryError("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const s=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i}=t;if(f(n)&&o)return o(n,r);if(m(n)){if(n.spans&&i){const t=[];for(const r of n.spans){const n=i(r);n?t.push(n):e.recordDroppedEvent("before_send","span")}n.spans=t}if(s){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(n,r)}}return n}(this,o,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(r.isThenable(e))return e.then((e=>{if(!r.isPlainObject(e)&&null!==e)throw new r.SentryError(n);return e}),(e=>{throw new r.SentryError(`${t} rejected with ${e}`)}));if(!r.isPlainObject(e)&&null!==e)throw new r.SentryError(n);return e}(s,u)})).then((o=>{if(null===o){if(this.recordDroppedEvent("before_send",p,e),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new r.SentryError(`${u} returned \`null\`, will not send event.`,"log")}const s=n&&n.getSession();if(!i&&s&&this._updateSessionFromEvent(s,o),i){const e=(o.sdkProcessingMetadata&&o.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(o.spans?o.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=o.transaction_info;if(i&&a&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...a,source:e}}return this.sendEvent(o,t),o})).then(null,(e=>{if(e instanceof r.SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new r.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){i.DEBUG_BUILD&&r.logger.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(i.DEBUG_BUILD&&r.logger.log("No outcomes to send"));if(!this._dsn)return void(i.DEBUG_BUILD&&r.logger.log("No dsn provided, will not send outcomes"));i.DEBUG_BUILD&&r.logger.log("Sending outcomes:",e);const t=r.createClientReportEnvelope(e,this._options.tunnel&&r.dsnToString(this._dsn));this.sendEnvelope(t)}}},87990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=100;t.addBreadcrumb=function(e,t){const n=o.getClient(),i=o.getIsolationScope();if(!n)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:c=s}=n.getOptions();if(c<=0)return;const u={timestamp:r.dateTimestampInSeconds(),...e},l=a?r.consoleSandbox((()=>a(u,t))):u;null!==l&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,c))}},73220:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);function o(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||r.SDK_VERSION,t[r.SDK_VERSION]=t[r.SDK_VERSION]||{}}t.getMainCarrier=function(){return o(r.GLOBAL_OBJ),r.GLOBAL_OBJ},t.getSentryCarrier=o},60251:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);t.createCheckInEnvelope=function(e,t,n,o,s){const i={sent_at:(new Date).toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),o&&s&&(i.dsn=r.dsnToString(s)),t&&(i.trace=r.dropUndefinedKeys(t));const a=function(e){return[{type:"check_in"},e]}(e);return r.createEnvelope(i,[a])}},42501:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENVIRONMENT="production"},49564:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(42810),s=n(73220),i=n(69640);function a(){const e=s.getMainCarrier();return o.getAsyncContextStrategy(e).getCurrentScope()}t.getClient=function(){return a().getClient()},t.getCurrentScope=a,t.getGlobalScope=function(){return r.getGlobalSingleton("globalScope",(()=>new i.Scope))},t.getIsolationScope=function(){const e=s.getMainCarrier();return o.getAsyncContextStrategy(e).getIsolationScope()},t.withIsolationScope=function(...e){const t=s.getMainCarrier(),n=o.getAsyncContextStrategy(t);if(2===e.length){const[t,r]=e;return t?n.withSetIsolationScope(t,r):n.withIsolationScope(r)}return n.withIsolationScope(e[0])},t.withScope=function(...e){const t=s.getMainCarrier(),n=o.getAsyncContextStrategy(t);if(2===e.length){const[t,r]=e;return t?n.withSetScope(t,r):n.withScope(r)}return n.withScope(e[0])}},68974:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},37320:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(69640);t.getDefaultCurrentScope=function(){return r.getGlobalSingleton("defaultCurrentScope",(()=>new o.Scope))},t.getDefaultIsolationScope=function(){return r.getGlobalSingleton("defaultIsolationScope",(()=>new o.Scope))}},30238:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(93754),s=n(54583);t.createEventEnvelope=function(e,t,n,o){const s=r.getSdkMetadataForEnvelopeHeader(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=r.createEventEnvelopeHeaders(e,s,o,t);delete e.sdkProcessingMetadata;const c=[{type:i},e];return r.createEnvelope(a,[c])},t.createSessionEnvelope=function(e,t,n,o){const s=r.getSdkMetadataForEnvelopeHeader(n),i={sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!o&&t&&{dsn:r.dsnToString(t)}},a="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return r.createEnvelope(i,[a])},t.createSpanEnvelope=function(e,t){const n=o.getDynamicSamplingContextFromSpan(e[0]),i=t&&t.getDsn(),a=t&&t.getOptions().tunnel,c={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!a&&i&&{dsn:r.dsnToString(i)}},u=t&&t.getOptions().beforeSendSpan,l=u?e=>u(s.spanToJSON(e)):e=>s.spanToJSON(e),d=[];for(const t of e){const e=l(t);e&&d.push(r.createSpanEnvelopeItem(e))}return r.createEnvelope(c,d)}},51929:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974);t.notifyEventProcessors=function e(t,n,s,i=0){return new r.SyncPromise(((a,c)=>{const u=t[i];if(null===n||"function"!=typeof u)a(n);else{const l=u({...n},s);o.DEBUG_BUILD&&u.id&&null===l&&r.logger.log(`Event processor "${u.id}" dropped event`),r.isThenable(l)?l.then((n=>e(t,n,s,i+1).then(a))).then(null,c):e(t,l,s,i+1).then(a).then(null,c)}}))}},79183:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(42501),s=n(49564),i=n(68974),a=n(11348),c=n(31485);function u(e,t){const n=s.getCurrentScope(),o=s.getClient();if(o){if(o.captureCheckIn)return o.captureCheckIn(e,t,n);i.DEBUG_BUILD&&r.logger.warn("Cannot capture check-in. Client does not support sending check-ins.")}else i.DEBUG_BUILD&&r.logger.warn("Cannot capture check-in. No client defined.");return r.uuid4()}function l(){const e=s.getIsolationScope(),t=s.getCurrentScope(),n=t.getSession()||e.getSession();n&&a.closeSession(n),d(),e.setSession(),t.setSession()}function d(){const e=s.getIsolationScope(),t=s.getCurrentScope(),n=s.getClient(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}t.addEventProcessor=function(e){s.getIsolationScope().addEventProcessor(e)},t.captureCheckIn=u,t.captureEvent=function(e,t){return s.getCurrentScope().captureEvent(e,t)},t.captureException=function(e,t){return s.getCurrentScope().captureException(e,c.parseEventHintOrCaptureContext(t))},t.captureMessage=function(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return s.getCurrentScope().captureMessage(e,n,r)},t.captureSession=function(e=!1){e?l():d()},t.close=async function(e){const t=s.getClient();return t?t.close(e):(i.DEBUG_BUILD&&r.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},t.endSession=l,t.flush=async function(e){const t=s.getClient();return t?t.flush(e):(i.DEBUG_BUILD&&r.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},t.isEnabled=function(){const e=s.getClient();return!!e&&!1!==e.getOptions().enabled&&!!e.getTransport()},t.isInitialized=function(){return!!s.getClient()},t.lastEventId=function(){return s.getIsolationScope().lastEventId()},t.setContext=function(e,t){s.getIsolationScope().setContext(e,t)},t.setExtra=function(e,t){s.getIsolationScope().setExtra(e,t)},t.setExtras=function(e){s.getIsolationScope().setExtras(e)},t.setTag=function(e,t){s.getIsolationScope().setTag(e,t)},t.setTags=function(e){s.getIsolationScope().setTags(e)},t.setUser=function(e){s.getIsolationScope().setUser(e)},t.startSession=function(e){const t=s.getClient(),n=s.getIsolationScope(),i=s.getCurrentScope(),{release:c,environment:u=o.DEFAULT_ENVIRONMENT}=t&&t.getOptions()||{},{userAgent:d}=r.GLOBAL_OBJ.navigator||{},p=a.makeSession({release:c,environment:u,user:i.getUser()||n.getUser(),...d&&{userAgent:d},...e}),h=n.getSession();return h&&"ok"===h.status&&a.updateSession(h,{status:"exited"}),l(),n.setSession(p),i.setSession(p),p},t.withMonitor=function(e,t,n){const o=u({monitorSlug:e,status:"in_progress"},n),i=r.timestampInSeconds();function a(t){u({monitorSlug:e,status:t,checkInId:o,duration:r.timestampInSeconds()-i})}return s.withIsolationScope((()=>{let e;try{e=t()}catch(e){throw a("error"),e}return r.isThenable(e)?Promise.resolve(e).then((()=>{a("ok")}),(()=>{a("error")})):a("ok"),e}))}},6933:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564);t.captureFeedback=function(e,t={},n=o.getCurrentScope()){const{message:s,name:i,email:a,url:c,source:u,associatedEventId:l,tags:d}=e,p={contexts:{feedback:r.dropUndefinedKeys({contact_email:a,name:i,message:s,url:c,source:u,associated_event_id:l})},type:"feedback",level:"info",tags:d},h=n&&n.getClient()||o.getClient();return h&&h.emit("beforeSendFeedback",p,t),n.captureEvent(p,t)}},31096:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(52751);n(44038),n(68974);const i=n(60073),a=n(54583),c=n(67392),u=n(15363),l=n(55908),d=n(93754);function p(e,t,n,s,i){const c=o.getIsolationScope(),{traceId:u,spanId:l,sampled:p,dsc:h}={...c.getPropagationContext(),...n.getPropagationContext()},f=i?a.spanToTraceHeader(i):r.generateSentryTraceHeader(u,l,p),m=r.dynamicSamplingContextToSentryBaggageHeader(h||(i?d.getDynamicSamplingContextFromSpan(i):d.getDynamicSamplingContextFromClient(u,t))),g=s.headers||("undefined"!=typeof Request&&r.isInstanceOf(e,Request)?e.headers:void 0);if(g){if("undefined"!=typeof Headers&&r.isInstanceOf(g,Headers)){const e=new Headers(g);return e.append("sentry-trace",f),m&&e.append(r.BAGGAGE_HEADER_NAME,m),e}if(Array.isArray(g)){const e=[...g,["sentry-trace",f]];return m&&e.push([r.BAGGAGE_HEADER_NAME,m]),e}{const e="baggage"in g?g.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),m&&t.push(m),{...g,"sentry-trace":f,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":f,baggage:m}}t.addTracingHeadersToFetchRequest=p,t.instrumentFetchRequest=function(e,t,n,d,h="auto.http.browser"){if(!e.fetchData)return;const f=i.hasTracingEnabled()&&t(e.fetchData.url);if(e.endTimestamp&&f){const t=e.fetchData.__span;if(!t)return;const n=d[t];return void(n&&(function(e,t){if(t.response){u.setHttpStatus(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"});e.end()}(n,e),delete d[t]))}const m=o.getCurrentScope(),g=o.getClient(),{method:_,url:y}=e.fetchData,S=function(e){try{return new URL(e).href}catch(e){return}}(y),b=S?r.parseUrl(S).host:void 0,E=!!a.getActiveSpan(),v=f&&E?l.startInactiveSpan({name:`${_} ${y}`,attributes:{url:y,type:"fetch","http.method":_,"http.url":S,"server.address":b,[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:h,[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new c.SentryNonRecordingSpan;if(e.fetchData.__span=v.spanContext().spanId,d[v.spanContext().spanId]=v,n(e.fetchData.url)&&g){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=p(t,g,m,n,i.hasTracingEnabled()&&E?v:void 0)}return v}},67249:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(87990),o=n(49564),s=n(79183);function i(){return{bindClient(e){o.getCurrentScope().setClient(e)},withScope:o.withScope,getClient:()=>o.getClient(),getScope:o.getCurrentScope,getIsolationScope:o.getIsolationScope,captureException:(e,t)=>o.getCurrentScope().captureException(e,t),captureMessage:(e,t,n)=>o.getCurrentScope().captureMessage(e,t,n),captureEvent:s.captureEvent,addBreadcrumb:r.addBreadcrumb,setUser:s.setUser,setTags:s.setTags,setTag:s.setTag,setExtra:s.setExtra,setExtras:s.setExtras,setContext:s.setContext,getIntegration(e){const t=o.getClient();return t&&t.getIntegrationByName(e.id)||null},startSession:s.startSession,endSession:s.endSession,captureSession(e){if(e)return s.endSession();!function(){const e=o.getCurrentScope(),t=o.getClient(),n=e.getSession();t&&n&&t.captureSession(n)}()}}}const a=i;t.getCurrentHub=a,t.getCurrentHubShim=i},37872:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(44038),o=n(64284),s=n(12188),i=n(57011),a=n(30242),c=n(67392),u=n(15363),l=n(55908),d=n(93754),p=n(28945),h=n(79816),f=n(8346),m=n(52751),g=n(30238),_=n(79183),y=n(49564),S=n(37320),b=n(42810),E=n(73220),v=n(11348),T=n(84751),I=n(69640),R=n(51929),A=n(85740),C=n(29564),O=n(24842),N=n(27008),P=n(64450),w=n(52256),L=n(14082),M=n(82430),x=n(5013),k=n(31485),G=n(60251),U=n(60073),V=n(46877),H=n(76354),D=n(72979),j=n(54583),B=n(10393),F=n(55303),Z=n(20647),W=n(145),X=n(42501),Y=n(87990),K=n(68360),J=n(66492),z=n(92958),$=n(52213),q=n(92215),Q=n(75003),ee=n(39097),te=n(431),ne=n(41312),re=n(17536),oe=n(200),se=n(24208),ie=n(80699),ae=n(92177),ce=n(9133),ue=n(92094),le=n(14021),de=n(31096),pe=n(36033),he=n(6933),fe=n(67249),me=n(24320);t.registerSpanErrorInstrumentation=r.registerSpanErrorInstrumentation,t.getCapturedScopesOnSpan=o.getCapturedScopesOnSpan,t.setCapturedScopesOnSpan=o.setCapturedScopesOnSpan,t.addTracingExtensions=s.addTracingExtensions,t.TRACING_DEFAULTS=i.TRACING_DEFAULTS,t.startIdleSpan=i.startIdleSpan,t.SentrySpan=a.SentrySpan,t.SentryNonRecordingSpan=c.SentryNonRecordingSpan,t.SPAN_STATUS_ERROR=u.SPAN_STATUS_ERROR,t.SPAN_STATUS_OK=u.SPAN_STATUS_OK,t.SPAN_STATUS_UNSET=u.SPAN_STATUS_UNSET,t.getSpanStatusFromHttpCode=u.getSpanStatusFromHttpCode,t.setHttpStatus=u.setHttpStatus,t.continueTrace=l.continueTrace,t.startInactiveSpan=l.startInactiveSpan,t.startNewTrace=l.startNewTrace,t.startSpan=l.startSpan,t.startSpanManual=l.startSpanManual,t.suppressTracing=l.suppressTracing,t.withActiveSpan=l.withActiveSpan,t.getDynamicSamplingContextFromClient=d.getDynamicSamplingContextFromClient,t.getDynamicSamplingContextFromSpan=d.getDynamicSamplingContextFromSpan,t.spanToBaggageHeader=d.spanToBaggageHeader,t.setMeasurement=p.setMeasurement,t.timedEventsToMeasurements=p.timedEventsToMeasurements,t.sampleSpan=h.sampleSpan,t.logSpanEnd=f.logSpanEnd,t.logSpanStart=f.logSpanStart,t.SEMANTIC_ATTRIBUTE_CACHE_HIT=m.SEMANTIC_ATTRIBUTE_CACHE_HIT,t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=m.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,t.SEMANTIC_ATTRIBUTE_CACHE_KEY=m.SEMANTIC_ATTRIBUTE_CACHE_KEY,t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=m.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,t.SEMANTIC_ATTRIBUTE_PROFILE_ID=m.SEMANTIC_ATTRIBUTE_PROFILE_ID,t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=m.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=m.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=m.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=m.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=m.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.createEventEnvelope=g.createEventEnvelope,t.createSessionEnvelope=g.createSessionEnvelope,t.createSpanEnvelope=g.createSpanEnvelope,t.addEventProcessor=_.addEventProcessor,t.captureCheckIn=_.captureCheckIn,t.captureEvent=_.captureEvent,t.captureException=_.captureException,t.captureMessage=_.captureMessage,t.captureSession=_.captureSession,t.close=_.close,t.endSession=_.endSession,t.flush=_.flush,t.isEnabled=_.isEnabled,t.isInitialized=_.isInitialized,t.lastEventId=_.lastEventId,t.setContext=_.setContext,t.setExtra=_.setExtra,t.setExtras=_.setExtras,t.setTag=_.setTag,t.setTags=_.setTags,t.setUser=_.setUser,t.startSession=_.startSession,t.withMonitor=_.withMonitor,t.getClient=y.getClient,t.getCurrentScope=y.getCurrentScope,t.getGlobalScope=y.getGlobalScope,t.getIsolationScope=y.getIsolationScope,t.withIsolationScope=y.withIsolationScope,t.withScope=y.withScope,t.getDefaultCurrentScope=S.getDefaultCurrentScope,t.getDefaultIsolationScope=S.getDefaultIsolationScope,t.setAsyncContextStrategy=b.setAsyncContextStrategy,t.getMainCarrier=E.getMainCarrier,t.closeSession=v.closeSession,t.makeSession=v.makeSession,t.updateSession=v.updateSession,t.SessionFlusher=T.SessionFlusher,t.Scope=I.Scope,t.notifyEventProcessors=R.notifyEventProcessors,t.getEnvelopeEndpointWithUrlEncodedAuth=A.getEnvelopeEndpointWithUrlEncodedAuth,t.getReportDialogEndpoint=A.getReportDialogEndpoint,t.BaseClient=C.BaseClient,t.ServerRuntimeClient=O.ServerRuntimeClient,t.initAndBind=N.initAndBind,t.setCurrentClient=N.setCurrentClient,t.createTransport=P.createTransport,t.makeOfflineTransport=w.makeOfflineTransport,t.makeMultiplexedTransport=L.makeMultiplexedTransport,t.addIntegration=M.addIntegration,t.defineIntegration=M.defineIntegration,t.getIntegrationsToSetup=M.getIntegrationsToSetup,t.applyScopeDataToEvent=x.applyScopeDataToEvent,t.mergeScopeData=x.mergeScopeData,t.prepareEvent=k.prepareEvent,t.createCheckInEnvelope=G.createCheckInEnvelope,t.hasTracingEnabled=U.hasTracingEnabled,t.isSentryRequestUrl=V.isSentryRequestUrl,t.handleCallbackErrors=H.handleCallbackErrors,t.parameterize=D.parameterize,t.addChildSpanToSpan=j.addChildSpanToSpan,t.getActiveSpan=j.getActiveSpan,t.getRootSpan=j.getRootSpan,t.getSpanDescendants=j.getSpanDescendants,t.getStatusMessage=j.getStatusMessage,t.spanIsSampled=j.spanIsSampled,t.spanTimeInputToSeconds=j.spanTimeInputToSeconds,t.spanToJSON=j.spanToJSON,t.spanToTraceContext=j.spanToTraceContext,t.spanToTraceHeader=j.spanToTraceHeader,t.parseSampleRate=B.parseSampleRate,t.applySdkMetadata=F.applySdkMetadata,t.getTraceData=Z.getTraceData,t.getTraceMetaTags=W.getTraceMetaTags,t.DEFAULT_ENVIRONMENT=X.DEFAULT_ENVIRONMENT,t.addBreadcrumb=Y.addBreadcrumb,t.functionToStringIntegration=K.functionToStringIntegration,t.inboundFiltersIntegration=J.inboundFiltersIntegration,t.linkedErrorsIntegration=z.linkedErrorsIntegration,t.moduleMetadataIntegration=$.moduleMetadataIntegration,t.requestDataIntegration=q.requestDataIntegration,t.captureConsoleIntegration=Q.captureConsoleIntegration,t.debugIntegration=ee.debugIntegration,t.dedupeIntegration=te.dedupeIntegration,t.extraErrorDataIntegration=ne.extraErrorDataIntegration,t.rewriteFramesIntegration=re.rewriteFramesIntegration,t.sessionTimingIntegration=oe.sessionTimingIntegration,t.zodErrorsIntegration=se.zodErrorsIntegration,t.thirdPartyErrorFilterIntegration=ie.thirdPartyErrorFilterIntegration,t.metrics=ae.metrics,t.metricsDefault=ce.metricsDefault,t.BrowserMetricsAggregator=ue.BrowserMetricsAggregator,t.getMetricSummaryJsonForSpan=le.getMetricSummaryJsonForSpan,t.addTracingHeadersToFetchRequest=de.addTracingHeadersToFetchRequest,t.instrumentFetchRequest=de.instrumentFetchRequest,t.trpcMiddleware=pe.trpcMiddleware,t.captureFeedback=he.captureFeedback,t.getCurrentHub=fe.getCurrentHub,t.getCurrentHubShim=fe.getCurrentHubShim,t.SDK_VERSION=me.SDK_VERSION},82430:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(68974),i=[];function a(e,t,n){if(n[t.name])s.DEBUG_BUILD&&r.logger.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===i.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),i.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}s.DEBUG_BUILD&&r.logger.log(`Integration installed: ${t.name}`)}}t.addIntegration=function(e){const t=o.getClient();t?t.addIntegration(e):s.DEBUG_BUILD&&r.logger.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},t.afterSetupIntegrations=function(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)},t.defineIntegration=function(e){return e},t.getIntegrationsToSetup=function(e){const t=e.defaultIntegrations||[],n=e.integrations;let o;t.forEach((e=>{e.isDefaultInstance=!0})),o=Array.isArray(n)?[...t,...n]:"function"==typeof n?r.arrayify(n(t)):t;const s=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(o),i=s.findIndex((e=>"Debug"===e.name));if(i>-1){const[e]=s.splice(i,1);s.push(e)}return s},t.installedIntegrations=i,t.setupIntegration=a,t.setupIntegrations=function(e,t){const n={};return t.forEach((t=>{t&&a(e,t,n)})),n}},75003:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(79183),i=n(82430).defineIntegration(((e={})=>{const t=e.levels||r.CONSOLE_LEVELS;return{name:"CaptureConsole",setup(e){"console"in r.GLOBAL_OBJ&&r.addConsoleInstrumentationHandler((({args:n,level:i})=>{o.getClient()===e&&t.includes(i)&&function(e,t){const n={level:r.severityLevelFromString(t),extra:{arguments:e}};o.withScope((o=>{if(o.addEventProcessor((e=>(e.logger="console",r.addExceptionMechanism(e,{handled:!1,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${r.safeJoin(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),s.captureMessage(t,n)}return}const i=e.find((e=>e instanceof Error));if(i)return void s.captureException(i,n);const a=r.safeJoin(e," ");s.captureMessage(a,n)}))}(n,i)}))}}}));t.captureConsoleIntegration=i},39097:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430).defineIntegration(((e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:"Debug",setup(e){e.on("beforeSendEvent",((e,n)=>{t.debugger,r.consoleSandbox((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}}));t.debugIntegration=o},431:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430),s=n(68974),i=o.defineIntegration((()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(a(t,e))return s.DEBUG_BUILD&&r.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}}));function a(e,t){return!(!t||!function(e,t){const n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!u(e,t)&&!!c(e,t))))}(e,t)&&!function(e,t){const n=l(t),r=l(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!u(e,t)&&!!c(e,t)))}(e,t))}function c(e,t){let n=r.getFramesFromEvent(e),o=r.getFramesFromEvent(t);if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++){const t=o[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function u(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function l(e){return e.exception&&e.exception.values&&e.exception.values[0]}t._shouldDropEvent=a,t.dedupeIntegration=i},41312:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430),s=n(68974),i=o.defineIntegration(((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,o,i){const{maxValueLength:a=250}=i.getOptions();return function(e,t={},n,o,i){if(!t.originalException||!r.isError(t.originalException))return e;const a=t.originalException.name||t.originalException.constructor.name,c=function(e,t,n){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const t of Object.keys(e)){if(-1!==o.indexOf(t))continue;const i=e[t];s[t]=r.isError(i)||"string"==typeof i?r.truncate(`${i}`,n):i}if(t&&void 0!==e.cause&&(s.cause=r.isError(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];s[e]=r.isError(n)?n.toString():n}}return s}catch(e){s.DEBUG_BUILD&&r.logger.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,o,i);if(c){const t={...e.contexts},o=r.normalize(c,n);return r.isPlainObject(o)&&(r.addNonEnumerableProperty(o,"__sentry_skip_normalization__",!0),t[a]=o),{...e,contexts:t}}return e}(e,o,t,n,a)}}}));t.extraErrorDataIntegration=i},68360:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(82430);let i;const a=new WeakMap,c=s.defineIntegration((()=>({name:"FunctionToString",setupOnce(){i=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=r.getOriginalFunction(this),n=a.has(o.getClient())&&void 0!==t?t:this;return i.apply(n,e)}}catch(e){}},setup(e){a.set(e,!0)}})));t.functionToStringIntegration=c},66492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974),s=n(82430),i=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],a=s.defineIntegration(((e={})=>({name:"InboundFilters",processEvent(t,n,s){const a=s.getOptions(),u=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:i],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,a);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${r.getEventDescription(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(e){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}(e).some((e=>r.stringMatchesSomePattern(e,t)))}(e,t.ignoreErrors)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${r.getEventDescription(e)}`),!0):function(e){return!e.type&&(!(!e.exception||!e.exception.values||0===e.exception.values.length)&&(!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))))}(e)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${r.getEventDescription(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&r.stringMatchesSomePattern(n,t)}(e,t.ignoreTransactions)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${r.getEventDescription(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=c(e);return!!n&&r.stringMatchesSomePattern(n,t)}(e,t.denyUrls)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${r.getEventDescription(e)}.\nUrl: ${c(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=c(e);return!n||r.stringMatchesSomePattern(n,t)}(e,t.allowUrls)&&(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${r.getEventDescription(e)}.\nUrl: ${c(e)}`),!0)}(t,u)?null:t}})));function c(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return o.DEBUG_BUILD&&r.logger.error(`Cannot extract url for event ${r.getEventDescription(e)}`),null}}t.inboundFiltersIntegration=a},92958:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430).defineIntegration(((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,o,s){const i=s.getOptions();r.applyAggregateErrorsToEvent(r.exceptionFromError,i.stackParser,i.maxValueLength,n,t,e,o)}}}));t.linkedErrorsIntegration=o},52213:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430),s=n(36823),i=o.defineIntegration((()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{r.forEachEnvelopeItem(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(s.stripMetadataFromStackFrames(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;const n=e.getOptions().stackParser;s.addMetadataToStackFrames(n,t)}))}})));t.moduleMetadataIntegration=i},92215:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430),s={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},i=o.defineIntegration(((e={})=>{const t={...s,...e,include:{...s.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...s.include.user,...(e.include||{}).user}}};return{name:"RequestData",processEvent(e){const{sdkProcessingMetadata:n={}}=e,o=n.request;if(!o)return e;const s=function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...o}}=e,s=["method"];for(const[e,t]of Object.entries(o))t&&s.push(e);let i;if(void 0===r)i=!0;else if("boolean"==typeof r)i=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);i=e}return{include:{ip:n,user:i,request:0!==s.length?s:void 0,transaction:t}}}(t);return r.addRequestDataToEvent(e,o,s)}}}));t.requestDataIntegration=i},17536:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430).defineIntegration(((e={})=>{const t=e.root,n=e.prefix||"app:///",o="window"in r.GLOBAL_OBJ&&void 0!==r.GLOBAL_OBJ.window,i=e.iteratee||s({isBrowser:o,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>i(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}}));function s({isBrowser:e,root:t,prefix:n}){return o=>{if(!o.filename)return o;const s=/^[a-zA-Z]:\\/.test(o.filename)||o.filename.includes("\\")&&!o.filename.includes("/"),i=/^\//.test(o.filename);if(e){if(t){const e=o.filename;0===e.indexOf(t)&&(o.filename=e.replace(t,n))}}else if(s||i){const e=s?o.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):o.filename,i=t?r.relative(t,e):r.basename(e);o.filename=`${n}${i}`}return o}}t.generateIteratee=s,t.rewriteFramesIntegration=o},200:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430).defineIntegration((()=>{const e=1e3*r.timestampInSeconds();return{name:"SessionTiming",processEvent(t){const n=1e3*r.timestampInSeconds();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}));t.sessionTimingIntegration=o},80699:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(82430),s=n(36823),i=o.defineIntegration((e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{r.forEachEnvelopeItem(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(s.stripMetadataFromStackFrames(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;const n=e.getOptions().stackParser;s.addMetadataToStackFrames(n,t)}))},processEvent(t){const n=function(e){const t=r.getFramesFromEvent(e);if(t)return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(a))).map((e=>e.slice(a.length))):[]))}(t);if(n&&n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))))){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}return t}}))),a="_sentryBundlerPluginAppKey:";t.thirdPartyErrorFilterIntegration=i},24208:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);function o(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function s(e){const t=new Set;for(const n of e.issues)n.path&&n.path[0]&&t.add(n.path[0]);const n=Array.from(t);return`Failed to validate keys: ${r.truncate(n.join(", "),100)}`}function i(e,t,n){return t.exception&&t.exception.values&&n&&n.originalException&&(i=n.originalException,r.isError(i)&&"ZodError"===i.name&&Array.isArray(i.errors))&&0!==n.originalException.issues.length?{...t,exception:{...t.exception,values:[{...t.exception.values[0],value:s(n.originalException)},...t.exception.values.slice(1)]},extra:{...t.extra,"zoderror.issues":n.originalException.errors.slice(0,e).map(o)}}:t;var i}const a=n(82430).defineIntegration(((e={})=>{const t=e.limit||10;return{name:"ZodErrors",processEvent:(e,n)=>i(t,e,n)}}));t.applyZodErrorsToEvent=i,t.zodErrorsIntegration=a},36823:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=new Map,s=new Set;function i(e,t){return function(e){if(r.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(r.GLOBAL_OBJ._sentryModuleMetadata)){const n=r.GLOBAL_OBJ._sentryModuleMetadata[t];if(s.has(t))continue;s.add(t);const i=e(t);for(const e of i.reverse())if(e.filename){o.set(e.filename,n);break}}}(e),o.get(t)}t.addMetadataToStackFrames=function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=i(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}},t.getMetadataForUrl=i,t.stripMetadataFromStackFrames=function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}},30885:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(54583),s=n(89371),i=n(8844),a=n(38423),c=n(3227);t.MetricsAggregator=class{constructor(e){this._client=e,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval((()=>this._flush()),s.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*s.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(e,t,n,i="none",u={},l=r.timestampInSeconds()){const d=Math.floor(l),p=c.sanitizeMetricKey(t),h=c.sanitizeTags(u),f=c.sanitizeUnit(i),m=c.getBucketKey(e,p,f,h);let g=this._buckets.get(m);const _=g&&e===s.SET_METRIC_TYPE?g.metric.weight:0;g?(g.metric.add(n),g.timestamp<d&&(g.timestamp=d)):(g={metric:new a.METRIC_MAP[e](n),timestamp:d,metricType:e,name:p,unit:f,tags:h},this._buckets.set(m,g));const y="string"==typeof n?g.metric.weight-_:n;o.updateMetricSummaryOnActiveSpan(e,p,y,f,u,m),this._bucketsTotalWeight+=g.metric.weight,this._bucketsTotalWeight>=s.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush)return this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),void this._buckets.clear();const e=Math.floor(r.timestampInSeconds())-s.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,t=new Map;for(const[n,r]of this._buckets)r.timestamp<=e&&(t.set(n,r),this._bucketsTotalWeight-=r.metric.weight);for(const[e]of t)this._buckets.delete(e);this._captureMetrics(t)}_captureMetrics(e){if(e.size>0){const t=Array.from(e).map((([,e])=>e));i.captureAggregateMetrics(this._client,t)}}}},92094:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(54583),s=n(89371),i=n(8844),a=n(38423),c=n(3227);t.BrowserMetricsAggregator=class{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),s.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(e,t,n,i="none",u={},l=r.timestampInSeconds()){const d=Math.floor(l),p=c.sanitizeMetricKey(t),h=c.sanitizeTags(u),f=c.sanitizeUnit(i),m=c.getBucketKey(e,p,f,h);let g=this._buckets.get(m);const _=g&&e===s.SET_METRIC_TYPE?g.metric.weight:0;g?(g.metric.add(n),g.timestamp<d&&(g.timestamp=d)):(g={metric:new a.METRIC_MAP[e](n),timestamp:d,metricType:e,name:p,unit:f,tags:h},this._buckets.set(m,g));const y="string"==typeof n?g.metric.weight-_:n;o.updateMetricSummaryOnActiveSpan(e,p,y,f,u,m)}flush(){if(0===this._buckets.size)return;const e=Array.from(this._buckets.values());i.captureAggregateMetrics(this._client,e),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}},89371:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.COUNTER_METRIC_TYPE="c",t.DEFAULT_BROWSER_FLUSH_INTERVAL=5e3,t.DEFAULT_FLUSH_INTERVAL=1e4,t.DISTRIBUTION_METRIC_TYPE="d",t.GAUGE_METRIC_TYPE="g",t.MAX_WEIGHT=1e4,t.SET_METRIC_TYPE="s"},8844:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(3227);function s(e,t,n,s){const i={sent_at:(new Date).toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),s&&t&&(i.dsn=r.dsnToString(t));const a=function(e){const t=o.serializeMetricBuckets(e);return[{type:"statsd",length:t.length},t]}(e);return r.createEnvelope(i,[a])}t.captureAggregateMetrics=function(e,t){r.logger.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=s(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel);e.sendEnvelope(n)},t.createMetricEnvelope=s},9133:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(30885),o=n(92177),s={increment:function(e,t=1,n){o.metrics.increment(r.MetricsAggregator,e,t,n)},distribution:function(e,t,n){o.metrics.distribution(r.MetricsAggregator,e,t,n)},set:function(e,t,n){o.metrics.set(r.MetricsAggregator,e,t,n)},gauge:function(e,t,n){o.metrics.gauge(r.MetricsAggregator,e,t,n)},timing:function(e,t,n="second",s){return o.metrics.timing(r.MetricsAggregator,e,t,n,s)},getMetricsAggregatorForClient:function(e){return o.metrics.getMetricsAggregatorForClient(e,r.MetricsAggregator)}};t.metricsDefault=s},92177:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(68974);n(44038);const i=n(54583),a=n(55908),c=n(76354),u=n(89371);function l(e,t){const n=r.getGlobalSingleton("globalMetricsAggregators",(()=>new WeakMap)),o=n.get(e);if(o)return o;const s=new t(e);return e.on("flush",(()=>s.flush())),e.on("close",(()=>s.close())),n.set(e,s),s}function d(e,t,n,a,c={}){const u=c.client||o.getClient();if(!u)return;const d=i.getActiveSpan(),p=d?i.getRootSpan(d):void 0,h=p&&i.spanToJSON(p).description,{unit:f,tags:m,timestamp:g}=c,{release:_,environment:y}=u.getOptions(),S={};_&&(S.release=_),y&&(S.environment=y),h&&(S.transaction=h),s.DEBUG_BUILD&&r.logger.log(`Adding value of ${a} to ${t} metric ${n}`),l(u,e).add(t,n,a,f,{...S,...m},g)}function p(e,t,n,r){d(e,u.DISTRIBUTION_METRIC_TYPE,t,f(n),r)}const h={increment:function(e,t,n=1,r){d(e,u.COUNTER_METRIC_TYPE,t,f(n),r)},distribution:p,set:function(e,t,n,r){d(e,u.SET_METRIC_TYPE,t,n,r)},gauge:function(e,t,n,r){d(e,u.GAUGE_METRIC_TYPE,t,f(n),r)},timing:function(e,t,n,o="second",s){if("function"==typeof n){const o=r.timestampInSeconds();return a.startSpanManual({op:"metrics.timing",name:t,startTime:o,onlyIfParent:!0},(i=>c.handleCallbackErrors((()=>n()),(()=>{}),(()=>{const n=r.timestampInSeconds();p(e,t,n-o,{...s,unit:"second"}),i.end(n)}))))}p(e,t,n,{...s,unit:o})},getMetricsAggregatorForClient:l};function f(e){return"string"==typeof e?parseInt(e):e}t.metrics=h},38423:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(89371),o=n(3227);class s{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}}class i{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class a{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}}class c{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?o.simpleHash(e):e)).join(":")}}const u={[r.COUNTER_METRIC_TYPE]:s,[r.GAUGE_METRIC_TYPE]:i,[r.DISTRIBUTION_METRIC_TYPE]:a,[r.SET_METRIC_TYPE]:c};t.CounterMetric=s,t.DistributionMetric=a,t.GaugeMetric=i,t.METRIC_MAP=u,t.SetMetric=c},14021:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o="_sentryMetrics";t.getMetricSummaryJsonForSpan=function(e){const t=e[o];if(!t)return;const n={};for(const[,[e,o]]of t)(n[e]||(n[e]=[])).push(r.dropUndefinedKeys(o));return n},t.updateMetricSummaryOnSpan=function(e,t,n,r,s,i,a){const c=e[o]||(e[o]=new Map),u=`${t}:${n}@${s}`,l=c.get(a);if(l){const[,e]=l;c.set(a,[u,{min:Math.min(e.min,r),max:Math.max(e.max,r),count:e.count+=1,sum:e.sum+=r,tags:e.tags}])}else c.set(a,[u,{min:r,max:r,count:1,sum:r,tags:i}])}},3227:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);function o(e){return e.replace(/[^\w\-./]+/gi,"")}const s=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];t.getBucketKey=function(e,t,n,o){return`${e}${t}${n}${Object.entries(r.dropUndefinedKeys(o)).sort(((e,t)=>e[0].localeCompare(t[0])))}`},t.sanitizeMetricKey=function(e){return e.replace(/[^\w\-.]+/gi,"_")},t.sanitizeTags=function(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[o(r)]=(n=String(e[r]),[...n].reduce(((e,t)=>e+function(e){for(const[t,n]of s)if(e===t)return n;return e}(t)),"")));var n;return t},t.sanitizeUnit=function(e){return e.replace(/[^\w]+/gi,"_")},t.serializeMetricBuckets=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t},t.simpleHash=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}},69640:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(11348),s=n(64865);class i{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=r.generatePropagationContext()}clone(){const e=new i;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,s._setSpanForScope(e,s._getSpanForScope(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&o.updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,o]=t instanceof a?[t.getScopeData(),t.getRequestSession()]:r.isPlainObject(t)?[e,e.requestSession]:[],{tags:s,extra:i,user:c,contexts:u,level:l,fingerprint:d=[],propagationContext:p}=n||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...u},c&&Object.keys(c).length&&(this._user=c),l&&(this._level=l),d.length&&(this._fingerprint=d),p&&(this._propagationContext=p),o&&(this._requestSession=o),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,s._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=r.generatePropagationContext(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const o={timestamp:r.dateTimestampInSeconds(),...e},s=this._breadcrumbs;return s.push(o),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:s._getSpanForScope(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:r.uuid4();if(!this._client)return r.logger.warn("No client configured on scope - will not capture exception!"),n;const o=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:o,...t,event_id:n},this),n}captureMessage(e,t,n){const o=n&&n.event_id?n.event_id:r.uuid4();if(!this._client)return r.logger.warn("No client configured on scope - will not capture message!"),o;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:o},this),o}captureEvent(e,t){const n=t&&t.event_id?t.event_id:r.uuid4();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(r.logger.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const a=i;t.Scope=a},27008:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(68974);function i(e){o.getCurrentScope().setClient(e)}t.initAndBind=function(e,t){!0===t.debug&&(s.DEBUG_BUILD?r.logger.enable():r.consoleSandbox((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),o.getCurrentScope().update(t.initialScope);const n=new e(t);return i(n),n.init(),n},t.setCurrentClient=i},52751:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SEMANTIC_ATTRIBUTE_CACHE_HIT="cache.hit",t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE="cache.item_size",t.SEMANTIC_ATTRIBUTE_CACHE_KEY="cache.key",t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME="sentry.exclusive_time",t.SEMANTIC_ATTRIBUTE_PROFILE_ID="sentry.profile_id",t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON="sentry.idle_span_finish_reason",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT="sentry.measurement_unit",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE="sentry.measurement_value",t.SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source"},24842:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(29564),s=n(60251),i=n(49564),a=n(68974),c=n(84751),u=n(44038),l=n(64865),d=n(54583),p=n(93754);class h extends o.BaseClient{constructor(e){u.registerSpanErrorInstrumentation(),super(e)}eventFromException(e,t){return r.resolvedSyncPromise(r.eventFromUnknownInput(this,this._options.stackParser,e,t))}eventFromMessage(e,t="info",n){return r.resolvedSyncPromise(r.eventFromMessage(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureException(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher){const e=i.getIsolationScope().getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureException(e,t,n)}captureEvent(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&"exception"===(e.type||"exception")&&e.exception&&e.exception.values&&e.exception.values.length>0){const e=i.getIsolationScope().getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureEvent(e,t,n)}close(e){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(e)}initSessionFlusher(){const{release:e,environment:t}=this._options;e?this._sessionFlusher=new c.SessionFlusher(this,{release:e,environment:t}):a.DEBUG_BUILD&&r.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(e,t,n){const o="checkInId"in e&&e.checkInId?e.checkInId:r.uuid4();if(!this._isEnabled())return a.DEBUG_BUILD&&r.logger.warn("SDK not enabled, will not capture checkin."),o;const i=this.getOptions(),{release:c,environment:u,tunnel:l}=i,d={check_in_id:o,monitor_slug:e.monitorSlug,status:e.status,release:c,environment:u};"duration"in e&&(d.duration=e.duration),t&&(d.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone,failure_issue_threshold:t.failureIssueThreshold,recovery_threshold:t.recoveryThreshold});const[p,h]=this._getTraceInfoFromScope(n);h&&(d.contexts={trace:h});const f=s.createCheckInEnvelope(d,p,this.getSdkMetadata(),l,this.getDsn());return a.DEBUG_BUILD&&r.logger.info("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(f),o}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():a.DEBUG_BUILD&&r.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(e,t,n,r){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:(e.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,t,n,r)}_getTraceInfoFromScope(e){if(!e)return[void 0,void 0];const t=l._getSpanForScope(e);if(t){const e=d.getRootSpan(t);return[p.getDynamicSamplingContextFromSpan(e),d.spanToTraceContext(e)]}const{traceId:n,spanId:r,parentSpanId:o,dsc:s}=e.getPropagationContext(),i={trace_id:n,span_id:r,parent_span_id:o};return s?[s,i]:[p.getDynamicSamplingContextFromClient(n,this),i]}}t.ServerRuntimeClient=h},11348:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);function o(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||r.timestampInSeconds(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:r.uuid4()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}t.closeSession=function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),o(e,n)},t.makeSession=function(e){const t=r.timestampInSeconds(),n={sid:r.uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return r.dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&o(n,e),n},t.updateSession=o},84751:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564);t.SessionFlusher=class{constructor(e,t){this._client=e,this.flushTimeout=60,this._pendingAggregates=new Map,this._isEnabled=!0,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=t}flush(){const e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates=new Map,this._client.sendSession(e))}getSessionAggregates(){const e=Array.from(this._pendingAggregates.values()),t={attrs:this._sessionAttrs,aggregates:e};return r.dropUndefinedKeys(t)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const e=o.getIsolationScope(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}_incrementSessionStatusCount(e,t){const n=new Date(t).setSeconds(0,0);let r=this._pendingAggregates.get(n);switch(r||(r={started:new Date(n).toISOString()},this._pendingAggregates.set(n,r)),e){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}}}},93754:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(42501),s=n(49564),i=n(52751),a=n(54583),c="_frozenDsc";function u(e,t){const n=t.getOptions(),{publicKey:s}=t.getDsn()||{},i=r.dropUndefinedKeys({environment:n.environment||o.DEFAULT_ENVIRONMENT,release:n.release,public_key:s,trace_id:e});return t.emit("createDsc",i),i}function l(e){const t=s.getClient();if(!t)return{};const n=u(a.spanToJSON(e).trace_id||"",t),o=a.getRootSpan(e),l=o[c];if(l)return l;const d=o.spanContext().traceState,p=d&&d.get("sentry.dsc"),h=p&&r.baggageHeaderToDynamicSamplingContext(p);if(h)return h;const f=a.spanToJSON(o),m=f.data||{},g=m[i.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];null!=g&&(n.sample_rate=`${g}`);const _=m[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],y=f.description;return"url"!==_&&y&&(n.transaction=y),n.sampled=String(a.spanIsSampled(o)),t.emit("createDsc",n,o),n}t.freezeDscOnSpan=function(e,t){const n=e;r.addNonEnumerableProperty(n,c,t)},t.getDynamicSamplingContextFromClient=u,t.getDynamicSamplingContextFromSpan=l,t.spanToBaggageHeader=function(e){const t=l(e);return r.dynamicSamplingContextToSentryBaggageHeader(t)}},44038:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974),s=n(54583),i=n(15363);let a=!1;function c(){const e=s.getActiveSpan(),t=e&&s.getRootSpan(e);if(t){const e="internal_error";o.DEBUG_BUILD&&r.logger.log(`[Tracing] Root span: ${e} -> Global error occured`),t.setStatus({code:i.SPAN_STATUS_ERROR,message:e})}}c.tag="sentry_tracingErrorCallback",t.registerSpanErrorInstrumentation=function(){a||(a=!0,r.addGlobalErrorInstrumentationHandler(c),r.addGlobalUnhandledRejectionInstrumentationHandler(c))}},12188:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(44038);t.addTracingExtensions=function(){r.registerSpanErrorInstrumentation()}},57011:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(68974),i=n(52751),a=n(60073),c=n(64865),u=n(54583),l=n(67392),d=n(15363),p=n(55908),h={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};t.TRACING_DEFAULTS=h,t.startIdleSpan=function(e,t={}){const n=new Map;let f,m=!1,g="externalFinish",_=!t.disableAutoFinish;const y=[],{idleTimeout:S=h.idleTimeout,finalTimeout:b=h.finalTimeout,childSpanTimeout:E=h.childSpanTimeout,beforeSpanEnd:v}=t,T=o.getClient();if(!T||!a.hasTracingEnabled())return new l.SentryNonRecordingSpan;const I=o.getCurrentScope(),R=u.getActiveSpan(),A=function(e){const t=p.startInactiveSpan(e);return c._setSpanForScope(o.getCurrentScope(),t),s.DEBUG_BUILD&&r.logger.log("[Tracing] Started span is an idle span"),t}(e);function C(){f&&(clearTimeout(f),f=void 0)}function O(e){C(),f=setTimeout((()=>{!m&&0===n.size&&_&&(g="idleTimeout",A.end(e))}),S)}function N(e){f=setTimeout((()=>{!m&&_&&(g="heartbeatFailed",A.end(e))}),E)}function P(e){m=!0,n.clear(),y.forEach((e=>e())),c._setSpanForScope(I,R);const t=u.spanToJSON(A),{start_timestamp:o}=t;if(!o)return;(t.data||{})[i.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||A.setAttribute(i.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,g),r.logger.log(`[Tracing] Idle span "${t.op}" finished`);const a=u.getSpanDescendants(A).filter((e=>e!==A));let l=0;a.forEach((t=>{t.isRecording()&&(t.setStatus({code:d.SPAN_STATUS_ERROR,message:"cancelled"}),t.end(e),s.DEBUG_BUILD&&r.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=u.spanToJSON(t),{timestamp:o=0,start_timestamp:i=0}=n,a=i<=e,c=o-i<=(b+S)/1e3;if(s.DEBUG_BUILD){const e=JSON.stringify(t,void 0,2);a?c||r.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",e):r.logger.log("[Tracing] Discarding span since it happened after idle span was finished",e)}c&&a||(u.removeChildSpanFromSpan(A,t),l++)})),l>0&&A.setAttribute("sentry.idle_span_discarded_spans",l)}return A.end=new Proxy(A.end,{apply(e,t,n){v&&v(A);const[o,...s]=n,i=o||r.timestampInSeconds(),a=u.spanTimeInputToSeconds(i),c=u.getSpanDescendants(A).filter((e=>e!==A));if(!c.length)return P(a),Reflect.apply(e,t,[a,...s]);const l=c.map((e=>u.spanToJSON(e).timestamp)).filter((e=>!!e)),d=l.length?Math.max(...l):void 0,p=u.spanToJSON(A).start_timestamp,h=Math.min(p?p+b/1e3:1/0,Math.max(p||-1/0,Math.min(a,d||1/0)));return P(h),Reflect.apply(e,t,[h,...s])}}),y.push(T.on("spanStart",(e=>{var t;m||e===A||u.spanToJSON(e).timestamp||u.getSpanDescendants(A).includes(e)&&(t=e.spanContext().spanId,C(),n.set(t,!0),N(r.timestampInSeconds()+E/1e3))}))),y.push(T.on("spanEnd",(e=>{var t;m||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&O(r.timestampInSeconds()+S/1e3))}))),y.push(T.on("idleSpanEnableAutoFinish",(e=>{e===A&&(_=!0,O(),n.size&&N())}))),t.disableAutoFinish||O(),setTimeout((()=>{m||(A.setStatus({code:d.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),g="finalTimeout",A.end())}),b),A}},8346:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974),s=n(54583);t.logSpanEnd=function(e){if(!o.DEBUG_BUILD)return;const{description:t="< unknown name >",op:n="< unknown op >"}=s.spanToJSON(e),{spanId:i}=e.spanContext(),a=`[Tracing] Finishing "${n}" ${s.getRootSpan(e)===e?"root ":""}span "${t}" with ID ${i}`;r.logger.log(a)},t.logSpanStart=function(e){if(!o.DEBUG_BUILD)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:i}=s.spanToJSON(e),{spanId:a}=e.spanContext(),c=s.spanIsSampled(e),u=s.getRootSpan(e),l=u===e,d=`[Tracing] Starting ${c?"sampled":"unsampled"} ${l?"root ":""}span`,p=[`op: ${n}`,`name: ${t}`,`ID: ${a}`];if(i&&p.push(`parent ID: ${i}`),!l){const{op:e,description:t}=s.spanToJSON(u);p.push(`root ID: ${u.spanContext().spanId}`),e&&p.push(`root op: ${e}`),t&&p.push(`root description: ${t}`)}r.logger.log(`${d}\n  ${p.join("\n  ")}`)}},28945:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(52751),o=n(54583);t.setMeasurement=function(e,t,n){const s=o.getActiveSpan(),i=s&&o.getRootSpan(s);i&&i.addEvent(e,{[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t,[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:n})},t.timedEventsToMeasurements=function(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},o=n[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],s=n[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];"string"==typeof o&&"number"==typeof s&&(t[e.name]={value:s,unit:o})})),t}},79816:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974),s=n(60073),i=n(10393);t.sampleSpan=function(e,t){if(!s.hasTracingEnabled(e))return[!1];let n;n="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const a=i.parseSampleRate(n);return void 0===a?(o.DEBUG_BUILD&&r.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):a?Math.random()<a?[!0,a]:(o.DEBUG_BUILD&&r.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,a]):(o.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,a])}},67392:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(54583);t.SentryNonRecordingSpan=class{constructor(e={}){this._traceId=e.traceId||r.uuid4(),this._spanId=e.spanId||r.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:o.TRACE_FLAG_NONE}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}},30242:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(68974),i=n(30238),a=n(14021),c=n(52751),u=n(54583),l=n(93754),d=n(8346),p=n(28945),h=n(64284);class f{constructor(e={}){this._traceId=e.traceId||r.uuid4(),this._spanId=e.spanId||r.uuid4().substring(16),this._startTime=e.startTimestamp||r.timestampInSeconds(),this._attributes={},this.setAttributes({[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[c.SEMANTIC_ATTRIBUTE_SENTRY_OP]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?u.TRACE_FLAG_SAMPLED:u.TRACE_FLAG_NONE}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=u.spanTimeInputToSeconds(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=u.spanTimeInputToSeconds(e),d.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return r.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:u.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[c.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[c.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:p.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&u.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?u.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){s.DEBUG_BUILD&&r.logger.log("[Tracing] Adding an event to span:",e);const o=m(t)?t:n||r.timestampInSeconds(),i=m(t)?{}:t||{},a={name:e,time:u.spanTimeInputToSeconds(o),attributes:i};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=o.getClient();if(e&&e.emit("spanEnd",this),!this._isStandaloneSpan&&this!==u.getRootSpan(this))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=o.getClient();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");const i=t.getTransport();i&&i.send(e).then(null,(e=>{s.DEBUG_BUILD&&r.logger.error("Error while sending span:",e)}))}(i.createSpanEnvelope([this],e)):(s.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();t&&(h.getCapturedScopesOnSpan(this).scope||o.getCurrentScope()).captureEvent(t)}_convertSpanToTransaction(){if(!g(u.spanToJSON(this)))return;this._name||(s.DEBUG_BUILD&&r.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=h.getCapturedScopesOnSpan(this),n=(e||o.getCurrentScope()).getClient()||o.getClient();if(!0!==this._sampled)return s.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const i=u.getSpanDescendants(this).filter((e=>e!==this&&!function(e){return e instanceof f&&e.isStandaloneSpan()}(e))).map((e=>u.spanToJSON(e))).filter(g),d=this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],m={contexts:{trace:u.spanToTransactionTraceContext(this)},spans:i.length>1e3?i.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...r.dropUndefinedKeys({dynamicSamplingContext:l.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:a.getMetricSummaryJsonForSpan(this),...d&&{transaction_info:{source:d}}},_=p.timedEventsToMeasurements(this._events);return _&&Object.keys(_).length&&(s.DEBUG_BUILD&&r.logger.log("[Measurements] Adding measurements to transaction event",JSON.stringify(_,void 0,2)),m.measurements=_),m}}function m(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function g(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}t.SentrySpan=f},15363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});function n(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}t.SPAN_STATUS_ERROR=2,t.SPAN_STATUS_OK=1,t.SPAN_STATUS_UNSET=0,t.getSpanStatusFromHttpCode=n,t.setHttpStatus=function(e,t){e.setAttribute("http.response.status_code",t);const r=n(t);"unknown_error"!==r.message&&e.setStatus(r)}},55908:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(73220),s=n(49564),i=n(42810),a=n(68974),c=n(52751),u=n(76354),l=n(60073),d=n(64865),p=n(54583),h=n(93754),f=n(8346),m=n(79816),g=n(67392),_=n(30242),y=n(15363),S=n(64284),b="__SENTRY_SUPPRESS_TRACING__";function E(e,t){const n=I();return n.withActiveSpan?n.withActiveSpan(e,t):s.withScope((n=>(d._setSpanForScope(n,e||void 0),t(n))))}function v({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!l.hasTracingEnabled())return new g.SentryNonRecordingSpan;const o=s.getIsolationScope();let i;if(e&&!n)i=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),i=!t.getScopeData().sdkProcessingMetadata[b]&&p.spanIsSampled(e),a=i?new _.SentrySpan({...n,parentSpanId:r,traceId:o,sampled:i}):new g.SentryNonRecordingSpan({traceId:o});p.addChildSpanToSpan(e,a);const c=s.getClient();return c&&(c.emit("spanStart",a),n.endTimestamp&&c.emit("spanEnd",a)),a}(e,r,t),p.addChildSpanToSpan(e,i);else if(e){const n=h.getDynamicSamplingContextFromSpan(e),{traceId:o,spanId:s}=e.spanContext(),a=p.spanIsSampled(e);i=R({traceId:o,parentSpanId:s,...t},r,a),h.freezeDscOnSpan(i,n)}else{const{traceId:e,dsc:n,parentSpanId:s,sampled:a}={...o.getPropagationContext(),...r.getPropagationContext()};i=R({traceId:e,parentSpanId:s,...t},r,a),n&&h.freezeDscOnSpan(i,n)}return f.logSpanStart(i),S.setCapturedScopesOnSpan(i,r,o),i}function T(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=p.spanTimeInputToSeconds(e.startTime),delete n.startTime,n}return t}function I(){const e=o.getMainCarrier();return i.getAsyncContextStrategy(e)}function R(e,t,n){const r=s.getClient(),o=r&&r.getOptions()||{},{name:i="",attributes:a}=e,[u,l]=t.getScopeData().sdkProcessingMetadata[b]?[!1]:m.sampleSpan(o,{name:i,parentSampled:n,attributes:a,transactionContext:{name:i,parentSampled:n}}),d=new _.SentrySpan({...e,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...e.attributes},sampled:u});return void 0!==l&&d.setAttribute(c.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l),r&&r.emit("spanStart",d),d}function A(e){const t=d._getSpanForScope(e);if(!t)return;const n=s.getClient();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?p.getRootSpan(t):t}function C(e){return void 0!==e?t=>E(e,t):e=>e()}t.continueTrace=({sentryTrace:e,baggage:t},n)=>s.withScope((o=>{const s=r.propagationContextFromHeaders(e,t);return o.setPropagationContext(s),n()})),t.startInactiveSpan=function(e){const t=I();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=T(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>s.withScope(e.scope,t):void 0!==o?e=>E(o,e):e=>e())((()=>{const t=s.getCurrentScope(),o=A(t);return e.onlyIfParent&&!o?new g.SentryNonRecordingSpan:v({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))},t.startNewTrace=function(e){return s.withScope((t=>(t.setPropagationContext(r.generatePropagationContext()),a.DEBUG_BUILD&&r.logger.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),E(null,e))))},t.startSpan=function(e,t){const n=I();if(n.startSpan)return n.startSpan(e,t);const r=T(e),{forceTransaction:o,parentSpan:i}=e;return s.withScope(e.scope,(()=>C(i)((()=>{const n=s.getCurrentScope(),i=A(n),a=e.onlyIfParent&&!i?new g.SentryNonRecordingSpan:v({parentSpan:i,spanArguments:r,forceTransaction:o,scope:n});return d._setSpanForScope(n,a),u.handleCallbackErrors((()=>t(a)),(()=>{const{status:e}=p.spanToJSON(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:y.SPAN_STATUS_ERROR,message:"internal_error"})}),(()=>a.end()))}))))},t.startSpanManual=function(e,t){const n=I();if(n.startSpanManual)return n.startSpanManual(e,t);const r=T(e),{forceTransaction:o,parentSpan:i}=e;return s.withScope(e.scope,(()=>C(i)((()=>{const n=s.getCurrentScope(),i=A(n),a=e.onlyIfParent&&!i?new g.SentryNonRecordingSpan:v({parentSpan:i,spanArguments:r,forceTransaction:o,scope:n});function c(){a.end()}return d._setSpanForScope(n,a),u.handleCallbackErrors((()=>t(a,c)),(()=>{const{status:e}=p.spanToJSON(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:y.SPAN_STATUS_ERROR,message:"internal_error"})}))}))))},t.suppressTracing=function(e){const t=I();return t.suppressTracing?t.suppressTracing(e):s.withScope((t=>(t.setSDKProcessingMetadata({[b]:!0}),e())))},t.withActiveSpan=E},64284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o="_sentryScope",s="_sentryIsolationScope";t.stripUrlQueryAndFragment=r.stripUrlQueryAndFragment,t.getCapturedScopesOnSpan=function(e){return{scope:e[o],isolationScope:e[s]}},t.setCapturedScopesOnSpan=function(e,t,n){e&&(r.addNonEnumerableProperty(e,s,n),r.addNonEnumerableProperty(e,o,t))}},64450:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974);function s(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}t.DEFAULT_TRANSPORT_BUFFER_SIZE=64,t.createTransport=function(e,t,n=r.makePromiseBuffer(e.bufferSize||64)){let i={};return{send:function(a){const c=[];if(r.forEachEnvelopeItem(a,((t,n)=>{const o=r.envelopeItemTypeToDataCategory(n);if(r.isRateLimited(i,o)){const r=s(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else c.push(t)})),0===c.length)return r.resolvedSyncPromise({});const u=r.createEnvelope(a[0],c),l=t=>{r.forEachEnvelopeItem(u,((n,o)=>{const i=s(n,o);e.recordDroppedEvent(t,r.envelopeItemTypeToDataCategory(o),i)}))};return n.add((()=>t({body:r.serializeEnvelope(u)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&o.DEBUG_BUILD&&r.logger.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),i=r.updateRateLimits(i,e),e)),(e=>{throw l("network_error"),e})))).then((e=>e),(e=>{if(e instanceof r.SentryError)return o.DEBUG_BUILD&&r.logger.error("Skipped sending event because buffer is full."),l("queue_overflow"),r.resolvedSyncPromise({});throw e}))},flush:e=>n.drain(e)}}},14082:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(85740);function s(e,t){let n;return r.forEachEnvelopeItem(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}t.eventFromEnvelope=s,t.makeMultiplexedTransport=function(e,t){return n=>{const i=e(n),a=new Map;function c(t,i){const c=i?`${t}:${i}`:t;let u=a.get(c);if(!u){const l=r.dsnFromString(t);if(!l)return;const d=o.getEnvelopeEndpointWithUrlEncodedAuth(l,n.tunnel);u=i?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=s(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,i)({...n,url:d}):e({...n,url:d}),a.set(c,u)}return[t,u]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return s(e,n)}}).map((e=>"string"==typeof e?c(e,void 0):c(e.dsn,e.release))).filter((e=>!!e)),o=n.length?n:[["",i]];return(await Promise.all(o.map((([t,n])=>n.send(function(e,t){return r.createEnvelope(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...a.values(),i];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}},52256:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974),s=5e3;t.MIN_DELAY=100,t.START_DELAY=s,t.makeOfflineTransport=function(e){function t(...e){o.DEBUG_BUILD&&r.logger.info("[Offline]:",...e)}return n=>{const o=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const i=n.createStore(n);let a,c=s;function u(e){a&&clearTimeout(a),a=setTimeout((async()=>{a=void 0;const e=await i.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),d(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof a&&a.unref&&a.unref()}function l(){a||(u(c),c=Math.min(2*c,36e5))}async function d(e,a=!1){if(!a&&r.envelopeContainsItemType(e,["replay_event","replay_recording"]))return await i.push(e),u(100),{};try{const t=await o.send(e);let n=100;if(t)if(t.headers&&t.headers["retry-after"])n=r.parseRetryAfterHeader(t.headers["retry-after"]);else if(t.headers&&t.headers["x-sentry-rate-limits"])n=6e4;else if((t.statusCode||0)>=400)return t;return u(n),c=s,t}catch(o){if(await function(e,t,o){return!r.envelopeContainsItemType(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,o))}(e,o,c))return a?await i.unshift(e):await i.push(e),l(),t("Error sending. Event queued.",o),{};throw o}}return n.flushAtStartup&&l(),{send:d,flush:e=>o.flush(e)}}}},36033:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564),s=n(79183),i=n(52751);n(44038),n(68974);const a=n(55908),c={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};t.trpcMiddleware=function(e={}){return function(t){const{path:n,type:u,next:l,rawInput:d}=t,p=o.getClient(),h=p&&p.getOptions(),f={procedure_type:u};function m(e){"object"==typeof e&&null!==e&&"ok"in e&&!e.ok&&"error"in e&&s.captureException(e.error,c)}return(void 0!==e.attachRpcInput?e.attachRpcInput:h&&h.sendDefaultPii)&&(f.input=r.normalize(d)),s.setContext("trpc",f),a.startSpanManual({name:`trpc/${n}`,op:"rpc.server",attributes:{[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},(e=>{let t;try{t=l()}catch(t){throw s.captureException(t,c),e.end(),t}return r.isThenable(t)?t.then((t=>(m(t),e.end(),t)),(t=>{throw s.captureException(t,c),e.end(),t})):(m(t),e.end(),t)}))}}},5013:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(93754),s=n(54583);function i(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}t.applyScopeDataToEvent=function(e,t){const{fingerprint:n,span:i,breadcrumbs:a,sdkProcessingMetadata:c}=t;!function(e,t){const{extra:n,tags:o,user:s,contexts:i,level:a,transactionName:c}=t,u=r.dropUndefinedKeys(n);u&&Object.keys(u).length&&(e.extra={...u,...e.extra});const l=r.dropUndefinedKeys(o);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const d=r.dropUndefinedKeys(s);d&&Object.keys(d).length&&(e.user={...d,...e.user});const p=r.dropUndefinedKeys(i);p&&Object.keys(p).length&&(e.contexts={...p,...e.contexts}),a&&(e.level=a),c&&"transaction"!==e.type&&(e.transaction=c)}(e,t),i&&function(e,t){e.contexts={trace:s.spanToTraceContext(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:o.getDynamicSamplingContextFromSpan(t),...e.sdkProcessingMetadata};const n=s.getRootSpan(t),r=s.spanToJSON(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,i),function(e,t){e.fingerprint=e.fingerprint?r.arrayify(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,a),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,c)},t.mergeAndOverwriteScopeData=i,t.mergeScopeData=function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:l,eventProcessors:d,attachments:p,propagationContext:h,transactionName:f,span:m}=t;i(e,"extra",n),i(e,"tags",r),i(e,"user",o),i(e,"contexts",s),i(e,"sdkProcessingMetadata",c),a&&(e.level=a),f&&(e.transactionName=f),m&&(e.span=m),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),p.length&&(e.attachments=[...e.attachments,...p]),e.propagationContext={...e.propagationContext,...h}}},76354:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);t.handleCallbackErrors=function(e,t,n=()=>{}){let o;try{o=e()}catch(e){throw t(e),n(),e}return function(e,t,n){return r.isThenable(e)?e.then((e=>(n(),e)),(e=>{throw t(e),n(),e})):(n(),e)}(o,t,n)}},60073:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(49564);t.hasTracingEnabled=function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=r.getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}},46877:(e,t)=>{function n(e){return"/"===e[e.length-1]?e.slice(0,-1):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isSentryRequestUrl=function(e,t){const r=t&&t.getDsn(),o=t&&t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){return!!t&&n(e)===n(t)}(e,o)}},145:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(20647);t.getTraceMetaTags=function(e,t,n){return Object.entries(r.getTraceData(e,t,n)).map((([e,t])=>`<meta name="${e}" content="${t}"/>`)).join("\n")}},72979:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parameterize=function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}},10393:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(68974);t.parseSampleRate=function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;o.DEBUG_BUILD&&r.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}},31485:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(42501),s=n(49564),i=n(51929),a=n(69640),c=n(5013),u=new WeakMap;function l(e,t){const n=r.GLOBAL_OBJ._sentryDebugIds;if(!n)return;let o;const s=u.get(t);s?o=s:(o=new Map,u.set(t,o));const i=Object.entries(n).reduce(((e,[n,r])=>{let s;const i=o.get(n);i?s=i:(s=t(n),o.set(n,s));for(let t=s.length-1;t>=0;t--){const n=s[t];if(n.filename){e[n.filename]=r;break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}function d(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}function p(e,t){if(!t)return e;const n=e?e.clone():new a.Scope;return n.update(t),n}const h=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];t.applyDebugIds=l,t.applyDebugMeta=d,t.parseEventHintOrCaptureContext=function(e){if(e)return function(e){return e instanceof a.Scope||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>h.includes(e)))}(e)?{captureContext:e}:e},t.prepareEvent=function(e,t,n,a,u,h){const{normalizeDepth:f=3,normalizeMaxBreadth:m=1e3}=e,g={...t,event_id:t.event_id||n.event_id||r.uuid4(),timestamp:t.timestamp||r.dateTimestampInSeconds()},_=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:s,dist:i,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:o.DEFAULT_ENVIRONMENT),void 0===e.release&&void 0!==s&&(e.release=s),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=r.truncate(e.message,a));const c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=r.truncate(c.value,a));const u=e.request;u&&u.url&&(u.url=r.truncate(u.url,a))}(g,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(g,_),u&&u.emit("applyFrameMetadata",t),void 0===t.type&&l(g,e.stackParser);const y=p(a,n.captureContext);n.mechanism&&r.addExceptionMechanism(g,n.mechanism);const S=u?u.getEventProcessors():[],b=s.getGlobalScope().getScopeData();if(h){const e=h.getScopeData();c.mergeScopeData(b,e)}if(y){const e=y.getScopeData();c.mergeScopeData(b,e)}const E=[...n.attachments||[],...b.attachments];E.length&&(n.attachments=E),c.applyScopeDataToEvent(g,b);const v=[...S,...b.eventProcessors];return i.notifyEventProcessors(v,g,n).then((e=>(e&&d(e),"number"==typeof f&&f>0?function(e,t,n){if(!e)return null;const o={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:r.normalize(e.data,t,n)}})))},...e.user&&{user:r.normalize(e.user,t,n)},...e.contexts&&{contexts:r.normalize(e.contexts,t,n)},...e.extra&&{extra:r.normalize(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&o.contexts&&(o.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(o.contexts.trace.data=r.normalize(e.contexts.trace.data,t,n))),e.spans&&(o.spans=e.spans.map((e=>({...e,...e.data&&{data:r.normalize(e.data,t,n)}})))),o}(e,f,m):e)))}},55303:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);t.applySdkMetadata=function(e,t,n=[t],o="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${o}:@sentry/${e}`,version:r.SDK_VERSION}))),version:r.SDK_VERSION}),e._metadata=s}},64865:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o="_sentrySpan";t._getSpanForScope=function(e){return e[o]},t._setSpanForScope=function(e,t){t?r.addNonEnumerableProperty(e,o,t):delete e[o]}},54583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(42810),s=n(73220),i=n(49564),a=n(14021),c=n(52751),u=n(15363),l=n(64865);function d(e){return"number"==typeof e?p(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?p(e.getTime()):r.timestampInSeconds()}function p(e){return e>9999999999?e/1e3:e}function h(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:o,startTime:s,name:i,endTime:u,parentSpanId:l,status:p}=e;return r.dropUndefinedKeys({span_id:t,trace_id:n,data:o,description:i,parent_span_id:l,start_timestamp:d(s),timestamp:d(u)||void 0,status:m(p),op:o[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:o[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function f(e){const{traceFlags:t}=e.spanContext();return 1===t}function m(e){if(e&&e.code!==u.SPAN_STATUS_UNSET)return e.code===u.SPAN_STATUS_OK?"ok":e.message||"unknown_error"}const g="_sentryChildSpans",_="_sentryRootSpan";function y(){const e=s.getMainCarrier(),t=o.getAsyncContextStrategy(e);return t.getActiveSpan?t.getActiveSpan():l._getSpanForScope(i.getCurrentScope())}t.TRACE_FLAG_NONE=0,t.TRACE_FLAG_SAMPLED=1,t.addChildSpanToSpan=function(e,t){const n=e[_]||e;r.addNonEnumerableProperty(t,_,n),e[g]?e[g].add(t):r.addNonEnumerableProperty(e,g,new Set([t]))},t.getActiveSpan=y,t.getRootSpan=function(e){return e[_]||e},t.getSpanDescendants=function(e){const t=new Set;return function e(n){if(!t.has(n)&&f(n)){t.add(n);const r=n[g]?Array.from(n[g]):[];for(const t of r)e(t)}}(e),Array.from(t)},t.getStatusMessage=m,t.removeChildSpanFromSpan=function(e,t){e[g]&&e[g].delete(t)},t.spanIsSampled=f,t.spanTimeInputToSeconds=d,t.spanToJSON=h,t.spanToTraceContext=function(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:o}=h(e);return r.dropUndefinedKeys({parent_span_id:o,span_id:t,trace_id:n})},t.spanToTraceHeader=function(e){const{traceId:t,spanId:n}=e.spanContext(),o=f(e);return r.generateSentryTraceHeader(t,n,o)},t.spanToTransactionTraceContext=function(e){const{spanId:t,traceId:n}=e.spanContext(),{data:o,op:s,parent_span_id:i,status:a,origin:c}=h(e);return r.dropUndefinedKeys({parent_span_id:i,span_id:t,trace_id:n,data:o,op:s,status:a,origin:c})},t.updateMetricSummaryOnActiveSpan=function(e,t,n,r,o,s){const i=y();i&&a.updateMetricSummaryOnSpan(i,e,t,n,r,o,s)}},20647:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(49564);n(44038),n(68974);const s=n(54583),i=n(93754);function a(e){if(!e||!e.length)return!1;const t="[-!#$%&'*+.^_`|~A-Za-z0-9]+",n="[!#-+-./0-9:<=>?@A-Z\\[\\]a-z{-}]+",r="\\s*";return new RegExp(`^${t}${r}=${r}${n}(${r},${r}${t}${r}=${r}${n})*$`).test(e)}t.getTraceData=function(e,t,n){const c=n||o.getClient(),u=t||o.getCurrentScope(),l=e||s.getActiveSpan(),{dsc:d,sampled:p,traceId:h}=u.getPropagationContext(),f=l&&s.getRootSpan(l),m=l?s.spanToTraceHeader(l):r.generateSentryTraceHeader(h,void 0,p),g=f?i.getDynamicSamplingContextFromSpan(f):d||(c?i.getDynamicSamplingContextFromClient(h,c):void 0),_=r.dynamicSamplingContextToSentryBaggageHeader(g);if(!r.TRACEPARENT_REGEXP.test(m))return r.logger.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const y=a(_);return y||r.logger.warn('Invalid baggage data. Not returning "baggage" value'),{"sentry-trace":m,...y&&{baggage:_}}},t.isValidBaggageString=a},5695:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=[["january","1"],["february","2"],["march","3"],["april","4"],["may","5"],["june","6"],["july","7"],["august","8"],["september","9"],["october","10"],["november","11"],["december","12"],["jan","1"],["feb","2"],["mar","3"],["apr","4"],["may","5"],["jun","6"],["jul","7"],["aug","8"],["sep","9"],["oct","10"],["nov","11"],["dec","12"],["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]];t.replaceCronNames=function(e){return n.reduce(((e,[t,n])=>e.replace(new RegExp(t,"gi"),n)),e)}},11734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872),o=n(5695),s="Automatic instrumentation of CronJob only supports crontab string";t.instrumentCron=function(e,t){let n=!1;return new Proxy(e,{construct(e,i){const[a,c,u,l,d,...p]=i;if("string"!=typeof a)throw new Error(s);if(n)throw new Error(`A job named '${t}' has already been scheduled`);n=!0;const h=o.replaceCronNames(a);return new e(a,(async function(e,n){return r.withMonitor(t,(async()=>{try{await c(e,n)}catch(e){throw r.captureException(e),e}}),{schedule:{type:"crontab",value:h},timezone:d||void 0})}),u,l,d,...p)},get:(e,i)=>"from"===i?i=>{const{cronTime:a,onTick:c,timeZone:u}=i;if("string"!=typeof a)throw new Error(s);if(n)throw new Error(`A job named '${t}' has already been scheduled`);n=!0;const l=o.replaceCronNames(a);return i.onTick=async(e,n)=>r.withMonitor(t,(async()=>{try{await c(e,n)}catch(e){throw r.captureException(e),e}}),{schedule:{type:"crontab",value:l},timezone:u||void 0}),e.from(i)}:e[i]})}},83284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(11734),o=n(15991),s=n(42069),i={instrumentCron:r.instrumentCron,instrumentNodeCron:o.instrumentNodeCron,instrumentNodeSchedule:s.instrumentNodeSchedule};t.cron=i},15991:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(37872),s=n(5695);t.instrumentNodeCron=function(e){return new Proxy(e,{get:(e,t)=>"schedule"===t&&e.schedule?new Proxy(e.schedule,{apply(e,t,n){const[i,a,c]=n;if(!r([c,"optionalAccess",e=>e.name]))throw new Error('Missing "name" for scheduled job. A name is required for Sentry check-in monitoring.');return e.apply(t,[i,async function(){return o.withMonitor(c.name,(async()=>{try{return await a()}catch(e){throw o.captureException(e),e}}),{schedule:{type:"crontab",value:s.replaceCronNames(i)},timezone:r([c,"optionalAccess",e=>e.timezone])})},c])}}):e[t]})}},42069:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(37872),s=n(5695);t.instrumentNodeSchedule=function(e){return new Proxy(e,{get:(e,t)=>"scheduleJob"===t?new Proxy(e.scheduleJob,{apply(e,t,n){const[i,a,c]=n;if("string"!=typeof i||"string"!=typeof a||"function"!=typeof c)throw new Error("Automatic instrumentation of 'node-schedule' requires the first parameter of 'scheduleJob' to be a job name string and the second parameter to be a crontab string");const u=i,l=a;return e.apply(t,[u,l,async function(){return o.withMonitor(u,(async()=>{await r([c,"optionalCall",e=>e()])}),{schedule:{type:"crontab",value:s.replaceCronNames(l)}})}])}}):e[t]})}},13169:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},62251:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(69195),o=n(76474),s=n(95022),i=n(82660),a=n(8421),c=n(85055),u=n(9558),l=n(82644),d=n(99804),p=n(41759),h=n(29606),f=n(24214),m=n(55203),g=n(80642),_=n(9853),y=n(20160),S=n(85576),b=n(76649),E=n(86715),v=n(81799),T=n(81732),I=n(90871),R=n(41939),A=n(98276),C=n(29871),O=n(73086),N=n(40013),P=n(34220),w=n(23310),L=n(45874),M=n(75376),x=n(32477),k=n(60700),G=n(14709),U=n(83284),V=n(24320),H=n(32858),D=n(37872);t.httpIntegration=r.httpIntegration,t.nativeNodeFetchIntegration=o.nativeNodeFetchIntegration,t.consoleIntegration=s.consoleIntegration,t.nodeContextIntegration=i.nodeContextIntegration,t.contextLinesIntegration=a.contextLinesIntegration,t.localVariablesIntegration=c.localVariablesIntegration,t.modulesIntegration=u.modulesIntegration,t.onUncaughtExceptionIntegration=l.onUncaughtExceptionIntegration,t.onUnhandledRejectionIntegration=d.onUnhandledRejectionIntegration,t.anrIntegration=p.anrIntegration,t.expressErrorHandler=h.expressErrorHandler,t.expressIntegration=h.expressIntegration,t.setupExpressErrorHandler=h.setupExpressErrorHandler,t.fastifyIntegration=f.fastifyIntegration,t.setupFastifyErrorHandler=f.setupFastifyErrorHandler,t.graphqlIntegration=m.graphqlIntegration,t.mongoIntegration=g.mongoIntegration,t.mongooseIntegration=_.mongooseIntegration,t.mysqlIntegration=y.mysqlIntegration,t.mysql2Integration=S.mysql2Integration,t.redisIntegration=b.redisIntegration,t.nestIntegration=E.nestIntegration,t.setupNestErrorHandler=E.setupNestErrorHandler,t.postgresIntegration=v.postgresIntegration,t.prismaIntegration=T.prismaIntegration,t.hapiIntegration=I.hapiIntegration,t.setupHapiErrorHandler=I.setupHapiErrorHandler,t.koaIntegration=R.koaIntegration,t.setupKoaErrorHandler=R.setupKoaErrorHandler,t.connectIntegration=A.connectIntegration,t.setupConnectErrorHandler=A.setupConnectErrorHandler,t.spotlightIntegration=C.spotlightIntegration,t.SentryContextManager=O.SentryContextManager,t.generateInstrumentOnce=N.generateInstrumentOnce,t.getDefaultIntegrations=P.getDefaultIntegrations,t.getDefaultIntegrationsWithoutPerformance=P.getDefaultIntegrationsWithoutPerformance,t.init=P.init,t.initWithoutDefaultIntegrations=P.initWithoutDefaultIntegrations,t.validateOpenTelemetrySetup=P.validateOpenTelemetrySetup,t.initOpenTelemetry=w.initOpenTelemetry,t.preloadOpenTelemetry=w.preloadOpenTelemetry,t.getAutoPerformanceIntegrations=L.getAutoPerformanceIntegrations,t.defaultStackParser=M.defaultStackParser,t.getSentryRelease=M.getSentryRelease,t.createGetModuleFromFilename=x.createGetModuleFromFilename,t.makeNodeTransport=k.makeNodeTransport,t.NodeClient=G.NodeClient,t.cron=U.cron,t.DEFAULT_USER_INCLUDES=V.DEFAULT_USER_INCLUDES,t.addRequestDataToEvent=V.addRequestDataToEvent,t.extractRequestData=V.extractRequestData,t.addOpenTelemetryInstrumentation=H.addOpenTelemetryInstrumentation,t.continueTrace=H.continueTrace,t.setNodeAsyncContextStrategy=H.setOpenTelemetryContextAsyncContextStrategy,t.SDK_VERSION=D.SDK_VERSION,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=D.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=D.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=D.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=D.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.Scope=D.Scope,t.addBreadcrumb=D.addBreadcrumb,t.addEventProcessor=D.addEventProcessor,t.addIntegration=D.addIntegration,t.captureCheckIn=D.captureCheckIn,t.captureConsoleIntegration=D.captureConsoleIntegration,t.captureEvent=D.captureEvent,t.captureException=D.captureException,t.captureFeedback=D.captureFeedback,t.captureMessage=D.captureMessage,t.captureSession=D.captureSession,t.close=D.close,t.createTransport=D.createTransport,t.debugIntegration=D.debugIntegration,t.dedupeIntegration=D.dedupeIntegration,t.endSession=D.endSession,t.extraErrorDataIntegration=D.extraErrorDataIntegration,t.flush=D.flush,t.functionToStringIntegration=D.functionToStringIntegration,t.getActiveSpan=D.getActiveSpan,t.getClient=D.getClient,t.getCurrentHub=D.getCurrentHub,t.getCurrentScope=D.getCurrentScope,t.getGlobalScope=D.getGlobalScope,t.getIsolationScope=D.getIsolationScope,t.getRootSpan=D.getRootSpan,t.getSpanDescendants=D.getSpanDescendants,t.getSpanStatusFromHttpCode=D.getSpanStatusFromHttpCode,t.getTraceData=D.getTraceData,t.getTraceMetaTags=D.getTraceMetaTags,t.inboundFiltersIntegration=D.inboundFiltersIntegration,t.isInitialized=D.isInitialized,t.lastEventId=D.lastEventId,t.linkedErrorsIntegration=D.linkedErrorsIntegration,t.metrics=D.metricsDefault,t.parameterize=D.parameterize,t.requestDataIntegration=D.requestDataIntegration,t.rewriteFramesIntegration=D.rewriteFramesIntegration,t.sessionTimingIntegration=D.sessionTimingIntegration,t.setContext=D.setContext,t.setCurrentClient=D.setCurrentClient,t.setExtra=D.setExtra,t.setExtras=D.setExtras,t.setHttpStatus=D.setHttpStatus,t.setMeasurement=D.setMeasurement,t.setTag=D.setTag,t.setTags=D.setTags,t.setUser=D.setUser,t.spanToBaggageHeader=D.spanToBaggageHeader,t.spanToJSON=D.spanToJSON,t.spanToTraceHeader=D.spanToTraceHeader,t.startInactiveSpan=D.startInactiveSpan,t.startNewTrace=D.startNewTrace,t.startSession=D.startSession,t.startSpan=D.startSpan,t.startSpanManual=D.startSpanManual,t.trpcMiddleware=D.trpcMiddleware,t.withActiveSpan=D.withActiveSpan,t.withIsolationScope=D.withIsolationScope,t.withMonitor=D.withMonitor,t.withScope=D.withScope,t.zodErrorsIntegration=D.zodErrorsIntegration},41759:(e,t,n)=>{var{_optionalChain:r,_optionalChainDelete:o}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const s=n(75919),i=n(37872),a=n(24320),c=n(51055),u="LyohIEBzZW50cnkvbm9kZSA4LjI1LjAgKGVmYWRiZjIpIHwgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdCAqLwppbXBvcnR7U2Vzc2lvbiBhcyB0fWZyb20ibm9kZTppbnNwZWN0b3IiO2ltcG9ydHtwYXJlbnRQb3J0IGFzIG4sd29ya2VyRGF0YSBhcyBlfWZyb20ibm9kZTp3b3JrZXJfdGhyZWFkcyI7aW1wb3J0e3Bvc2l4IGFzIHIsc2VwIGFzIG99ZnJvbSJub2RlOnBhdGgiO2ltcG9ydCphcyBzIGZyb20ibm9kZTpodHRwIjtpbXBvcnQqYXMgaSBmcm9tIm5vZGU6aHR0cHMiO2ltcG9ydHtSZWFkYWJsZSBhcyBjfWZyb20ibm9kZTpzdHJlYW0iO2ltcG9ydHtjcmVhdGVHemlwIGFzIHV9ZnJvbSJub2RlOnpsaWIiO2ltcG9ydCphcyBhIGZyb20ibm9kZTpuZXQiO2ltcG9ydCphcyBmIGZyb20ibm9kZTp0bHMiO2NvbnN0IGg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBwKHQsbil7cmV0dXJuIGguY2FsbCh0KT09PWBbb2JqZWN0ICR7bn1dYH1mdW5jdGlvbiBkKHQpe3JldHVybiBwKHQsIlN0cmluZyIpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIHAodCwiT2JqZWN0Iil9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gQm9vbGVhbih0JiZ0LnRoZW4mJiJmdW5jdGlvbiI9PXR5cGVvZiB0LnRoZW4pfWZ1bmN0aW9uIHkodCxuKXt0cnl7cmV0dXJuIHQgaW5zdGFuY2VvZiBufWNhdGNoKHQpe3JldHVybiExfX1jb25zdCBnPSI4LjI1LjAiLGI9Z2xvYmFsVGhpcztmdW5jdGlvbiB2KHQsbixlKXtjb25zdCByPWV8fGIsbz1yLl9fU0VOVFJZX189ci5fX1NFTlRSWV9ffHx7fSxzPW9bZ109b1tnXXx8e307cmV0dXJuIHNbdF18fChzW3RdPW4oKSl9Y29uc3QgXz1iLHc9ODA7ZnVuY3Rpb24gUyh0LG4pe2NvbnN0IGU9dCxyPVtdO2lmKCFlfHwhZS50YWdOYW1lKXJldHVybiIiO2lmKF8uSFRNTEVsZW1lbnQmJmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmZS5kYXRhc2V0KXtpZihlLmRhdGFzZXQuc2VudHJ5Q29tcG9uZW50KXJldHVybiBlLmRhdGFzZXQuc2VudHJ5Q29tcG9uZW50O2lmKGUuZGF0YXNldC5zZW50cnlFbGVtZW50KXJldHVybiBlLmRhdGFzZXQuc2VudHJ5RWxlbWVudH1yLnB1c2goZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpO2NvbnN0IG89biYmbi5sZW5ndGg/bi5maWx0ZXIoKHQ9PmUuZ2V0QXR0cmlidXRlKHQpKSkubWFwKCh0PT5bdCxlLmdldEF0dHJpYnV0ZSh0KV0pKTpudWxsO2lmKG8mJm8ubGVuZ3RoKW8uZm9yRWFjaCgodD0+e3IucHVzaChgWyR7dFswXX09IiR7dFsxXX0iXWApfSkpO2Vsc2V7ZS5pZCYmci5wdXNoKGAjJHtlLmlkfWApO2NvbnN0IHQ9ZS5jbGFzc05hbWU7aWYodCYmZCh0KSl7Y29uc3Qgbj10LnNwbGl0KC9ccysvKTtmb3IoY29uc3QgdCBvZiBuKXIucHVzaChgLiR7dH1gKX19Y29uc3Qgcz1bImFyaWEtbGFiZWwiLCJ0eXBlIiwibmFtZSIsInRpdGxlIiwiYWx0Il07Zm9yKGNvbnN0IHQgb2Ygcyl7Y29uc3Qgbj1lLmdldEF0dHJpYnV0ZSh0KTtuJiZyLnB1c2goYFske3R9PSIke259Il1gKX1yZXR1cm4gci5qb2luKCIiKX1jb25zdCAkPSJ1bmRlZmluZWQiPT10eXBlb2YgX19TRU5UUllfREVCVUdfX3x8X19TRU5UUllfREVCVUdfXyxFPVsiZGVidWciLCJpbmZvIiwid2FybiIsImVycm9yIiwibG9nIiwiYXNzZXJ0IiwidHJhY2UiXSx4PXt9O2Z1bmN0aW9uIE4odCl7aWYoISgiY29uc29sZSJpbiBiKSlyZXR1cm4gdCgpO2NvbnN0IG49Yi5jb25zb2xlLGU9e30scj1PYmplY3Qua2V5cyh4KTtyLmZvckVhY2goKHQ9Pntjb25zdCByPXhbdF07ZVt0XT1uW3RdLG5bdF09cn0pKTt0cnl7cmV0dXJuIHQoKX1maW5hbGx5e3IuZm9yRWFjaCgodD0+e25bdF09ZVt0XX0pKX19Y29uc3Qgaz1mdW5jdGlvbigpe2xldCB0PSExO2NvbnN0IG49e2VuYWJsZTooKT0+e3Q9ITB9LGRpc2FibGU6KCk9Pnt0PSExfSxpc0VuYWJsZWQ6KCk9PnR9O3JldHVybiAkP0UuZm9yRWFjaCgoZT0+e25bZV09KC4uLm4pPT57dCYmTigoKCk9PntiLmNvbnNvbGVbZV0oYFNlbnRyeSBMb2dnZXIgWyR7ZX1dOmAsLi4ubil9KSl9fSkpOkUuZm9yRWFjaCgodD0+e25bdF09KCk9Pnt9fSkpLG59KCk7ZnVuY3Rpb24gQyh0LG49ITEpe2NvbnN0e2hvc3Q6ZSxwYXRoOnIscGFzczpvLHBvcnQ6cyxwcm9qZWN0SWQ6aSxwcm90b2NvbDpjLHB1YmxpY0tleTp1fT10O3JldHVybmAke2N9Oi8vJHt1fSR7biYmbz9gOiR7b31gOiIifUAke2V9JHtzP2A6JHtzfWA6IiJ9LyR7cj9gJHtyfS9gOnJ9JHtpfWB9Y2xhc3MgRCBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsbj0id2FybiIpe3N1cGVyKHQpLHRoaXMubWVzc2FnZT10LHRoaXMubmFtZT1uZXcudGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG5ldy50YXJnZXQucHJvdG90eXBlKSx0aGlzLmxvZ0xldmVsPW59fWZ1bmN0aW9uIFQodCl7aWYoZnVuY3Rpb24odCl7c3dpdGNoKGguY2FsbCh0KSl7Y2FzZSJbb2JqZWN0IEVycm9yXSI6Y2FzZSJbb2JqZWN0IEV4Y2VwdGlvbl0iOmNhc2UiW29iamVjdCBET01FeGNlcHRpb25dIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiB5KHQsRXJyb3IpfX0odCkpcmV0dXJue21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2ssLi4uaih0KX07aWYobj10LCJ1bmRlZmluZWQiIT10eXBlb2YgRXZlbnQmJnkobixFdmVudCkpe2NvbnN0IG49e3R5cGU6dC50eXBlLHRhcmdldDpPKHQudGFyZ2V0KSxjdXJyZW50VGFyZ2V0Ok8odC5jdXJyZW50VGFyZ2V0KSwuLi5qKHQpfTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEN1c3RvbUV2ZW50JiZ5KHQsQ3VzdG9tRXZlbnQpJiYobi5kZXRhaWw9dC5kZXRhaWwpLG59cmV0dXJuIHQ7dmFyIG59ZnVuY3Rpb24gTyh0KXt0cnl7cmV0dXJuIG49dCwidW5kZWZpbmVkIiE9dHlwZW9mIEVsZW1lbnQmJnkobixFbGVtZW50KT9mdW5jdGlvbih0LG49e30pe2lmKCF0KXJldHVybiI8dW5rbm93bj4iO3RyeXtsZXQgZT10O2NvbnN0IHI9NSxvPVtdO2xldCBzPTAsaT0wO2NvbnN0IGM9IiA+ICIsdT1jLmxlbmd0aDtsZXQgYTtjb25zdCBmPUFycmF5LmlzQXJyYXkobik/bjpuLmtleUF0dHJzLGg9IUFycmF5LmlzQXJyYXkobikmJm4ubWF4U3RyaW5nTGVuZ3RofHx3O2Zvcig7ZSYmcysrPHImJihhPVMoZSxmKSwhKCJodG1sIj09PWF8fHM+MSYmaStvLmxlbmd0aCp1K2EubGVuZ3RoPj1oKSk7KW8ucHVzaChhKSxpKz1hLmxlbmd0aCxlPWUucGFyZW50Tm9kZTtyZXR1cm4gby5yZXZlcnNlKCkuam9pbihjKX1jYXRjaCh0KXtyZXR1cm4iPHVua25vd24+In19KHQpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1jYXRjaCh0KXtyZXR1cm4iPHVua25vd24+In12YXIgbn1mdW5jdGlvbiBqKHQpe2lmKCJvYmplY3QiPT10eXBlb2YgdCYmbnVsbCE9PXQpe2NvbnN0IG49e307Zm9yKGNvbnN0IGUgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSYmKG5bZV09dFtlXSk7cmV0dXJuIG59cmV0dXJue319ZnVuY3Rpb24gUih0KXtyZXR1cm4gQSh0LG5ldyBNYXApfWZ1bmN0aW9uIEEodCxuKXtpZihmdW5jdGlvbih0KXtpZighbCh0KSlyZXR1cm4hMTt0cnl7Y29uc3Qgbj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IubmFtZTtyZXR1cm4hbnx8Ik9iamVjdCI9PT1ufWNhdGNoKHQpe3JldHVybiEwfX0odCkpe2NvbnN0IGU9bi5nZXQodCk7aWYodm9pZCAwIT09ZSlyZXR1cm4gZTtjb25zdCByPXt9O24uc2V0KHQscik7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXModCkpdm9pZCAwIT09dFtlXSYmKHJbZV09QSh0W2VdLG4pKTtyZXR1cm4gcn1pZihBcnJheS5pc0FycmF5KHQpKXtjb25zdCBlPW4uZ2V0KHQpO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU7Y29uc3Qgcj1bXTtyZXR1cm4gbi5zZXQodCxyKSx0LmZvckVhY2goKHQ9PntyLnB1c2goQSh0LG4pKX0pKSxyfXJldHVybiB0fWNvbnN0IEk9NTAsUD0iPyIsVT0vY2FwdHVyZU1lc3NhZ2V8Y2FwdHVyZUV4Y2VwdGlvbi87ZnVuY3Rpb24gTSh0KXtyZXR1cm4gdFt0Lmxlbmd0aC0xXXx8e319Y29uc3QgTD0iPGFub255bW91cz4iO2NvbnN0IEI9MWUzO2Z1bmN0aW9uIEcoKXtyZXR1cm4gRGF0ZS5ub3coKS9CfWNvbnN0IEo9ZnVuY3Rpb24oKXtjb25zdHtwZXJmb3JtYW5jZTp0fT1iO2lmKCF0fHwhdC5ub3cpcmV0dXJuIEc7Y29uc3Qgbj1EYXRlLm5vdygpLXQubm93KCksZT1udWxsPT10LnRpbWVPcmlnaW4/bjp0LnRpbWVPcmlnaW47cmV0dXJuKCk9PihlK3Qubm93KCkpL0J9KCk7ZnVuY3Rpb24geigpe2NvbnN0IHQ9YixuPXQuY3J5cHRvfHx0Lm1zQ3J5cHRvO2xldCBlPSgpPT4xNipNYXRoLnJhbmRvbSgpO3RyeXtpZihuJiZuLnJhbmRvbVVVSUQpcmV0dXJuIG4ucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywiIik7biYmbi5nZXRSYW5kb21WYWx1ZXMmJihlPSgpPT57Y29uc3QgdD1uZXcgVWludDhBcnJheSgxKTtyZXR1cm4gbi5nZXRSYW5kb21WYWx1ZXModCksdFswXX0pfWNhdGNoKHQpe31yZXR1cm4oWzFlN10rMWUzKzRlMys4ZTMrMWUxMSkucmVwbGFjZSgvWzAxOF0vZywodD0+KHReKDE1JmUoKSk+PnQvNCkudG9TdHJpbmcoMTYpKSl9ZnVuY3Rpb24gSCh0LG49MTAwLGU9MS8wKXt0cnl7cmV0dXJuIFcoIiIsdCxuLGUpfWNhdGNoKHQpe3JldHVybntFUlJPUjpgKipub24tc2VyaWFsaXphYmxlKiogKCR7dH0pYH19fWZ1bmN0aW9uIFcodCxuLGU9MS8wLHI9MS8wLG89ZnVuY3Rpb24oKXtjb25zdCB0PSJmdW5jdGlvbiI9PXR5cGVvZiBXZWFrU2V0LG49dD9uZXcgV2Vha1NldDpbXTtyZXR1cm5bZnVuY3Rpb24oZSl7aWYodClyZXR1cm4hIW4uaGFzKGUpfHwobi5hZGQoZSksITEpO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKWlmKG5bdF09PT1lKXJldHVybiEwO3JldHVybiBuLnB1c2goZSksITF9LGZ1bmN0aW9uKGUpe2lmKHQpbi5kZWxldGUoZSk7ZWxzZSBmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKylpZihuW3RdPT09ZSl7bi5zcGxpY2UodCwxKTticmVha319XX0oKSl7Y29uc3RbcyxpXT1vO2lmKG51bGw9PW58fFsibnVtYmVyIiwiYm9vbGVhbiIsInN0cmluZyJdLmluY2x1ZGVzKHR5cGVvZiBuKSYmIU51bWJlci5pc05hTihuKSlyZXR1cm4gbjtjb25zdCBjPWZ1bmN0aW9uKHQsbil7dHJ5e2lmKCJkb21haW4iPT09dCYmbiYmIm9iamVjdCI9PXR5cGVvZiBuJiZuLnQpcmV0dXJuIltEb21haW5dIjtpZigiZG9tYWluRW1pdHRlciI9PT10KXJldHVybiJbRG9tYWluRW1pdHRlcl0iO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZuPT09Z2xvYmFsKXJldHVybiJbR2xvYmFsXSI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJm49PT13aW5kb3cpcmV0dXJuIltXaW5kb3ddIjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50JiZuPT09ZG9jdW1lbnQpcmV0dXJuIltEb2N1bWVudF0iO2lmKCJvYmplY3QiPT10eXBlb2YoZT1uKSYmbnVsbCE9PWUmJihlLl9faXNWdWV8fGUubykpcmV0dXJuIltWdWVWaWV3TW9kZWxdIjtpZihmdW5jdGlvbih0KXtyZXR1cm4gbCh0KSYmIm5hdGl2ZUV2ZW50ImluIHQmJiJwcmV2ZW50RGVmYXVsdCJpbiB0JiYic3RvcFByb3BhZ2F0aW9uImluIHR9KG4pKXJldHVybiJbU3ludGhldGljRXZlbnRdIjtpZigibnVtYmVyIj09dHlwZW9mIG4mJm4hPW4pcmV0dXJuIltOYU5dIjtpZigiZnVuY3Rpb24iPT10eXBlb2YgbilyZXR1cm5gW0Z1bmN0aW9uOiAke2Z1bmN0aW9uKHQpe3RyeXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQubmFtZXx8TH1jYXRjaCh0KXtyZXR1cm4gTH19KG4pfV1gO2lmKCJzeW1ib2wiPT10eXBlb2YgbilyZXR1cm5gWyR7U3RyaW5nKG4pfV1gO2lmKCJiaWdpbnQiPT10eXBlb2YgbilyZXR1cm5gW0JpZ0ludDogJHtTdHJpbmcobil9XWA7Y29uc3Qgcj1mdW5jdGlvbih0KXtjb25zdCBuPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4gbj9uLmNvbnN0cnVjdG9yLm5hbWU6Im51bGwgcHJvdG90eXBlIn0obik7cmV0dXJuL15IVE1MKFx3KilFbGVtZW50JC8udGVzdChyKT9gW0hUTUxFbGVtZW50OiAke3J9XWA6YFtvYmplY3QgJHtyfV1gfWNhdGNoKHQpe3JldHVybmAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHt0fSlgfXZhciBlfSh0LG4pO2lmKCFjLnN0YXJ0c1dpdGgoIltvYmplY3QgIikpcmV0dXJuIGM7aWYobi5fX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXylyZXR1cm4gbjtjb25zdCB1PSJudW1iZXIiPT10eXBlb2Ygbi5fX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18/bi5fX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX186ZTtpZigwPT09dSlyZXR1cm4gYy5yZXBsYWNlKCJvYmplY3QgIiwiIik7aWYocyhuKSlyZXR1cm4iW0NpcmN1bGFyIH5dIjtjb25zdCBhPW47aWYoYSYmImZ1bmN0aW9uIj09dHlwZW9mIGEudG9KU09OKXRyeXtyZXR1cm4gVygiIixhLnRvSlNPTigpLHUtMSxyLG8pfWNhdGNoKHQpe31jb25zdCBmPUFycmF5LmlzQXJyYXkobik/W106e307bGV0IGg9MDtjb25zdCBwPVQobik7Zm9yKGNvbnN0IHQgaW4gcCl7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwLHQpKWNvbnRpbnVlO2lmKGg+PXIpe2ZbdF09IltNYXhQcm9wZXJ0aWVzIH5dIjticmVha31jb25zdCBuPXBbdF07Zlt0XT1XKHQsbix1LTEscixvKSxoKyt9cmV0dXJuIGkobiksZn1mdW5jdGlvbiBZKHQsbil7Y29uc3QgZT1uLnJlcGxhY2UoL1xcL2csIi8iKS5yZXBsYWNlKC9bfFxce30oKVtcXV4kKyo/Ll0vZywiXFwkJiIpO2xldCByPXQ7dHJ5e3I9ZGVjb2RlVVJJKHQpfWNhdGNoKHQpe31yZXR1cm4gci5yZXBsYWNlKC9cXC9nLCIvIikucmVwbGFjZSgvd2VicGFjazpcLz8vZywiIikucmVwbGFjZShuZXcgUmVnRXhwKGAoZmlsZTovLyk/Lyoke2V9LypgLCJpZyIpLCJhcHA6Ly8vIil9KCgpPT57Y29uc3R7cGVyZm9ybWFuY2U6dH09YjtpZighdHx8IXQubm93KXJldHVybjtjb25zdCBuPTM2ZTUsZT10Lm5vdygpLHI9RGF0ZS5ub3coKSxvPXQudGltZU9yaWdpbj9NYXRoLmFicyh0LnRpbWVPcmlnaW4rZS1yKTpuLHM9bzxuLGk9dC50aW1pbmcmJnQudGltaW5nLm5hdmlnYXRpb25TdGFydCxjPSJudW1iZXIiPT10eXBlb2YgaT9NYXRoLmFicyhpK2Utcik6bjsoc3x8YzxuKSYmKG88PWMmJnQudGltZU9yaWdpbil9KSgpO2NvbnN0IHE9L14oXFMrOlxcfFwvPykoW1xzXFNdKj8pKCg/OlwuezEsMn18W14vXFxdKz98KShcLlteLi9cXF0qfCkpKD86Wy9cXF0qKSQvO2Z1bmN0aW9uIEYodCl7Y29uc3Qgbj1mdW5jdGlvbih0KXtjb25zdCBuPXQubGVuZ3RoPjEwMjQ/YDx0cnVuY2F0ZWQ+JHt0LnNsaWNlKC0xMDI0KX1gOnQsZT1xLmV4ZWMobik7cmV0dXJuIGU/ZS5zbGljZSgxKTpbXX0odCksZT1uWzBdfHwiIjtsZXQgcj1uWzFdO3JldHVybiBlfHxyPyhyJiYocj1yLnNsaWNlKDAsci5sZW5ndGgtMSkpLGUrcik6Ii4ifXZhciBLO2Z1bmN0aW9uIFYodCl7cmV0dXJuIG5ldyBaKChuPT57bih0KX0pKX0hZnVuY3Rpb24odCl7dFt0LlBFTkRJTkc9MF09IlBFTkRJTkciO3RbdC5SRVNPTFZFRD0xXT0iUkVTT0xWRUQiO3RbdC5SRUpFQ1RFRD0yXT0iUkVKRUNURUQifShLfHwoSz17fSkpO2NsYXNzIFp7Y29uc3RydWN0b3IodCl7Wi5wcm90b3R5cGUuX19pbml0LmNhbGwodGhpcyksWi5wcm90b3R5cGUuX19pbml0Mi5jYWxsKHRoaXMpLFoucHJvdG90eXBlLl9faW5pdDMuY2FsbCh0aGlzKSxaLnByb3RvdHlwZS5fX2luaXQ0LmNhbGwodGhpcyksdGhpcy5pPUsuUEVORElORyx0aGlzLnU9W107dHJ5e3QodGhpcy5oLHRoaXMucCl9Y2F0Y2godCl7dGhpcy5wKHQpfX10aGVuKHQsbil7cmV0dXJuIG5ldyBaKCgoZSxyKT0+e3RoaXMudS5wdXNoKFshMSxuPT57aWYodCl0cnl7ZSh0KG4pKX1jYXRjaCh0KXtyKHQpfWVsc2UgZShuKX0sdD0+e2lmKG4pdHJ5e2Uobih0KSl9Y2F0Y2godCl7cih0KX1lbHNlIHIodCl9XSksdGhpcy5sKCl9KSl9Y2F0Y2godCl7cmV0dXJuIHRoaXMudGhlbigodD0+dCksdCl9ZmluYWxseSh0KXtyZXR1cm4gbmV3IFooKChuLGUpPT57bGV0IHIsbztyZXR1cm4gdGhpcy50aGVuKChuPT57bz0hMSxyPW4sdCYmdCgpfSksKG49PntvPSEwLHI9bix0JiZ0KCl9KSkudGhlbigoKCk9PntvP2Uocik6bihyKX0pKX0pKX1fX2luaXQoKXt0aGlzLmg9dD0+e3RoaXMubShLLlJFU09MVkVELHQpfX1fX2luaXQyKCl7dGhpcy5wPXQ9Pnt0aGlzLm0oSy5SRUpFQ1RFRCx0KX19X19pbml0Mygpe3RoaXMubT0odCxuKT0+e3RoaXMuaT09PUsuUEVORElORyYmKG0obik/bi50aGVuKHRoaXMuaCx0aGlzLnApOih0aGlzLmk9dCx0aGlzLnY9bix0aGlzLmwoKSkpfX1fX2luaXQ0KCl7dGhpcy5sPSgpPT57aWYodGhpcy5pPT09Sy5QRU5ESU5HKXJldHVybjtjb25zdCB0PXRoaXMudS5zbGljZSgpO3RoaXMudT1bXSx0LmZvckVhY2goKHQ9Pnt0WzBdfHwodGhpcy5pPT09Sy5SRVNPTFZFRCYmdFsxXSh0aGlzLnYpLHRoaXMuaT09PUsuUkVKRUNURUQmJnRbMl0odGhpcy52KSx0WzBdPSEwKX0pKX19fWZ1bmN0aW9uIFEodCl7Y29uc3Qgbj1bXTtmdW5jdGlvbiBlKHQpe3JldHVybiBuLnNwbGljZShuLmluZGV4T2YodCksMSlbMF18fFByb21pc2UucmVzb2x2ZSh2b2lkIDApfXJldHVybnskOm4sYWRkOmZ1bmN0aW9uKHIpe2lmKCEodm9pZCAwPT09dHx8bi5sZW5ndGg8dCkpcmV0dXJuIG89bmV3IEQoIk5vdCBhZGRpbmcgUHJvbWlzZSBiZWNhdXNlIGJ1ZmZlciBsaW1pdCB3YXMgcmVhY2hlZC4iKSxuZXcgWigoKHQsbik9PntuKG8pfSkpO3ZhciBvO2NvbnN0IHM9cigpO3JldHVybi0xPT09bi5pbmRleE9mKHMpJiZuLnB1c2gocykscy50aGVuKCgoKT0+ZShzKSkpLnRoZW4obnVsbCwoKCk9PmUocykudGhlbihudWxsLCgoKT0+e30pKSkpLHN9LGRyYWluOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWigoKGUscik9PntsZXQgbz1uLmxlbmd0aDtpZighbylyZXR1cm4gZSghMCk7Y29uc3Qgcz1zZXRUaW1lb3V0KCgoKT0+e3QmJnQ+MCYmZSghMSl9KSx0KTtuLmZvckVhY2goKHQ9PntWKHQpLnRoZW4oKCgpPT57LS1vfHwoY2xlYXJUaW1lb3V0KHMpLGUoITApKX0pLHIpfSkpfSkpfX19ZnVuY3Rpb24gWCh0LG49ITEpe3JldHVybiEobnx8dCYmIXQuc3RhcnRzV2l0aCgiLyIpJiYhdC5tYXRjaCgvXltBLVpdOi8pJiYhdC5zdGFydHNXaXRoKCIuIikmJiF0Lm1hdGNoKC9eW2EtekEtWl0oW2EtekEtWjAtOS5cLStdKSo6XC9cLy8pKSYmdm9pZCAwIT09dCYmIXQuaW5jbHVkZXMoIm5vZGVfbW9kdWxlcy8iKX1jb25zdCB0dD0ic2VudHJ5LSIsbnQ9L15zZW50cnktLztmdW5jdGlvbiBldCh0KXtjb25zdCBuPWZ1bmN0aW9uKHQpe2lmKCF0fHwhZCh0KSYmIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuO2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHQucmVkdWNlKCgodCxuKT0+e2NvbnN0IGU9cnQobik7cmV0dXJuIE9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKChbbixlXSk9Pnt0W25dPWV9KSksdH0pLHt9KTtyZXR1cm4gcnQodCl9KHQpO2lmKCFuKXJldHVybjtjb25zdCBlPU9iamVjdC5lbnRyaWVzKG4pLnJlZHVjZSgoKHQsW24sZV0pPT57aWYobi5tYXRjaChudCkpe3Rbbi5zbGljZSh0dC5sZW5ndGgpXT1lfXJldHVybiB0fSkse30pO3JldHVybiBPYmplY3Qua2V5cyhlKS5sZW5ndGg+MD9lOnZvaWQgMH1mdW5jdGlvbiBydCh0KXtyZXR1cm4gdC5zcGxpdCgiLCIpLm1hcCgodD0+dC5zcGxpdCgiPSIpLm1hcCgodD0+ZGVjb2RlVVJJQ29tcG9uZW50KHQudHJpbSgpKSkpKSkucmVkdWNlKCgodCxbbixlXSk9PihuJiZlJiYodFtuXT1lKSx0KSkse30pfWZ1bmN0aW9uIG90KHQsbj1bXSl7cmV0dXJuW3Qsbl19ZnVuY3Rpb24gc3QodCxuKXtjb25zdCBlPXRbMV07Zm9yKGNvbnN0IHQgb2YgZSl7aWYobih0LHRbMF0udHlwZSkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gaXQodCl7cmV0dXJuIGIuX19TRU5UUllfXyYmYi5fX1NFTlRSWV9fLmVuY29kZVBvbHlmaWxsP2IuX19TRU5UUllfXy5lbmNvZGVQb2x5ZmlsbCh0KToobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCl9ZnVuY3Rpb24gY3QodCl7Y29uc3RbbixlXT10O2xldCByPUpTT04uc3RyaW5naWZ5KG4pO2Z1bmN0aW9uIG8odCl7InN0cmluZyI9PXR5cGVvZiByP3I9InN0cmluZyI9PXR5cGVvZiB0P3IrdDpbaXQociksdF06ci5wdXNoKCJzdHJpbmciPT10eXBlb2YgdD9pdCh0KTp0KX1mb3IoY29uc3QgdCBvZiBlKXtjb25zdFtuLGVdPXQ7aWYobyhgXG4ke0pTT04uc3RyaW5naWZ5KG4pfVxuYCksInN0cmluZyI9PXR5cGVvZiBlfHxlIGluc3RhbmNlb2YgVWludDhBcnJheSlvKGUpO2Vsc2V7bGV0IHQ7dHJ5e3Q9SlNPTi5zdHJpbmdpZnkoZSl9Y2F0Y2gobil7dD1KU09OLnN0cmluZ2lmeShIKGUpKX1vKHQpfX1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIHI/cjpmdW5jdGlvbih0KXtjb25zdCBuPXQucmVkdWNlKCgodCxuKT0+dCtuLmxlbmd0aCksMCksZT1uZXcgVWludDhBcnJheShuKTtsZXQgcj0wO2Zvcihjb25zdCBuIG9mIHQpZS5zZXQobixyKSxyKz1uLmxlbmd0aDtyZXR1cm4gZX0ocil9Y29uc3QgdXQ9e3Nlc3Npb246InNlc3Npb24iLHNlc3Npb25zOiJzZXNzaW9uIixhdHRhY2htZW50OiJhdHRhY2htZW50Iix0cmFuc2FjdGlvbjoidHJhbnNhY3Rpb24iLGV2ZW50OiJlcnJvciIsY2xpZW50X3JlcG9ydDoiaW50ZXJuYWwiLHVzZXJfcmVwb3J0OiJkZWZhdWx0Iixwcm9maWxlOiJwcm9maWxlIixwcm9maWxlX2NodW5rOiJwcm9maWxlIixyZXBsYXlfZXZlbnQ6InJlcGxheSIscmVwbGF5X3JlY29yZGluZzoicmVwbGF5IixjaGVja19pbjoibW9uaXRvciIsZmVlZGJhY2s6ImZlZWRiYWNrIixzcGFuOiJzcGFuIixzdGF0c2Q6Im1ldHJpY19idWNrZXQifTtmdW5jdGlvbiBhdCh0KXtyZXR1cm4gdXRbdF19ZnVuY3Rpb24gZnQodCl7aWYoIXR8fCF0LnNkaylyZXR1cm47Y29uc3R7bmFtZTpuLHZlcnNpb246ZX09dC5zZGs7cmV0dXJue25hbWU6bix2ZXJzaW9uOmV9fWNvbnN0IGh0PTZlNDtmdW5jdGlvbiBwdCh0LHtzdGF0dXNDb2RlOm4saGVhZGVyczplfSxyPURhdGUubm93KCkpe2NvbnN0IG89ey4uLnR9LHM9ZSYmZVsieC1zZW50cnktcmF0ZS1saW1pdHMiXSxpPWUmJmVbInJldHJ5LWFmdGVyIl07aWYocylmb3IoY29uc3QgdCBvZiBzLnRyaW0oKS5zcGxpdCgiLCIpKXtjb25zdFtuLGUsLCxzXT10LnNwbGl0KCI6Iiw1KSxpPXBhcnNlSW50KG4sMTApLGM9MWUzKihpc05hTihpKT82MDppKTtpZihlKWZvcihjb25zdCB0IG9mIGUuc3BsaXQoIjsiKSkibWV0cmljX2J1Y2tldCI9PT10JiZzJiYhcy5zcGxpdCgiOyIpLmluY2x1ZGVzKCJjdXN0b20iKXx8KG9bdF09citjKTtlbHNlIG8uYWxsPXIrY31lbHNlIGk/by5hbGw9citmdW5jdGlvbih0LG49RGF0ZS5ub3coKSl7Y29uc3QgZT1wYXJzZUludChgJHt0fWAsMTApO2lmKCFpc05hTihlKSlyZXR1cm4gMWUzKmU7Y29uc3Qgcj1EYXRlLnBhcnNlKGAke3R9YCk7cmV0dXJuIGlzTmFOKHIpP2h0OnItbn0oaSxyKTo0Mjk9PT1uJiYoby5hbGw9cis2ZTQpO3JldHVybiBvfWZ1bmN0aW9uIGR0KCl7cmV0dXJue3RyYWNlSWQ6eigpLHNwYW5JZDp6KCkuc3Vic3RyaW5nKDE2KX19Y29uc3QgbHQ9InVuZGVmaW5lZCI9PXR5cGVvZiBfX1NFTlRSWV9ERUJVR19ffHxfX1NFTlRSWV9ERUJVR19fO2Z1bmN0aW9uIG10KCl7cmV0dXJuIHl0KGIpLGJ9ZnVuY3Rpb24geXQodCl7Y29uc3Qgbj10Ll9fU0VOVFJZX189dC5fX1NFTlRSWV9ffHx7fTtyZXR1cm4gbi52ZXJzaW9uPW4udmVyc2lvbnx8ZyxuW2ddPW5bZ118fHt9fWZ1bmN0aW9uIGd0KHQpe2NvbnN0IG49SigpLGU9e3NpZDp6KCksaW5pdDohMCx0aW1lc3RhbXA6bixzdGFydGVkOm4sZHVyYXRpb246MCxzdGF0dXM6Im9rIixlcnJvcnM6MCxpZ25vcmVEdXJhdGlvbjohMSx0b0pTT046KCk9PmZ1bmN0aW9uKHQpe3JldHVybiBSKHtzaWQ6YCR7dC5zaWR9YCxpbml0OnQuaW5pdCxzdGFydGVkOm5ldyBEYXRlKDFlMyp0LnN0YXJ0ZWQpLnRvSVNPU3RyaW5nKCksdGltZXN0YW1wOm5ldyBEYXRlKDFlMyp0LnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKSxzdGF0dXM6dC5zdGF0dXMsZXJyb3JzOnQuZXJyb3JzLGRpZDoibnVtYmVyIj09dHlwZW9mIHQuZGlkfHwic3RyaW5nIj09dHlwZW9mIHQuZGlkP2Ake3QuZGlkfWA6dm9pZCAwLGR1cmF0aW9uOnQuZHVyYXRpb24sYWJub3JtYWxfbWVjaGFuaXNtOnQuYWJub3JtYWxfbWVjaGFuaXNtLGF0dHJzOntyZWxlYXNlOnQucmVsZWFzZSxlbnZpcm9ubWVudDp0LmVudmlyb25tZW50LGlwX2FkZHJlc3M6dC5pcEFkZHJlc3MsdXNlcl9hZ2VudDp0LnVzZXJBZ2VudH19KX0oZSl9O3JldHVybiB0JiZidChlLHQpLGV9ZnVuY3Rpb24gYnQodCxuPXt9KXtpZihuLnVzZXImJighdC5pcEFkZHJlc3MmJm4udXNlci5pcF9hZGRyZXNzJiYodC5pcEFkZHJlc3M9bi51c2VyLmlwX2FkZHJlc3MpLHQuZGlkfHxuLmRpZHx8KHQuZGlkPW4udXNlci5pZHx8bi51c2VyLmVtYWlsfHxuLnVzZXIudXNlcm5hbWUpKSx0LnRpbWVzdGFtcD1uLnRpbWVzdGFtcHx8SigpLG4uYWJub3JtYWxfbWVjaGFuaXNtJiYodC5hYm5vcm1hbF9tZWNoYW5pc209bi5hYm5vcm1hbF9tZWNoYW5pc20pLG4uaWdub3JlRHVyYXRpb24mJih0Lmlnbm9yZUR1cmF0aW9uPW4uaWdub3JlRHVyYXRpb24pLG4uc2lkJiYodC5zaWQ9MzI9PT1uLnNpZC5sZW5ndGg/bi5zaWQ6eigpKSx2b2lkIDAhPT1uLmluaXQmJih0LmluaXQ9bi5pbml0KSwhdC5kaWQmJm4uZGlkJiYodC5kaWQ9YCR7bi5kaWR9YCksIm51bWJlciI9PXR5cGVvZiBuLnN0YXJ0ZWQmJih0LnN0YXJ0ZWQ9bi5zdGFydGVkKSx0Lmlnbm9yZUR1cmF0aW9uKXQuZHVyYXRpb249dm9pZCAwO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBuLmR1cmF0aW9uKXQuZHVyYXRpb249bi5kdXJhdGlvbjtlbHNle2NvbnN0IG49dC50aW1lc3RhbXAtdC5zdGFydGVkO3QuZHVyYXRpb249bj49MD9uOjB9bi5yZWxlYXNlJiYodC5yZWxlYXNlPW4ucmVsZWFzZSksbi5lbnZpcm9ubWVudCYmKHQuZW52aXJvbm1lbnQ9bi5lbnZpcm9ubWVudCksIXQuaXBBZGRyZXNzJiZuLmlwQWRkcmVzcyYmKHQuaXBBZGRyZXNzPW4uaXBBZGRyZXNzKSwhdC51c2VyQWdlbnQmJm4udXNlckFnZW50JiYodC51c2VyQWdlbnQ9bi51c2VyQWdlbnQpLCJudW1iZXIiPT10eXBlb2Ygbi5lcnJvcnMmJih0LmVycm9ycz1uLmVycm9ycyksbi5zdGF0dXMmJih0LnN0YXR1cz1uLnN0YXR1cyl9Y29uc3QgdnQ9Il9zZW50cnlTcGFuIjtmdW5jdGlvbiBfdCh0LG4pe24/ZnVuY3Rpb24odCxuLGUpe3RyeXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWNhdGNoKGUpeyQmJmsubG9nKGBGYWlsZWQgdG8gYWRkIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5ICIke259IiB0byBvYmplY3RgLHQpfX0odCx2dCxuKTpkZWxldGUgdFt2dF19ZnVuY3Rpb24gd3QodCl7cmV0dXJuIHRbdnRdfWNsYXNzIFN0e2NvbnN0cnVjdG9yKCl7dGhpcy5fPSExLHRoaXMuUz1bXSx0aGlzLk49W10sdGhpcy5rPVtdLHRoaXMuQz1bXSx0aGlzLkQ9e30sdGhpcy5UPXt9LHRoaXMuTz17fSx0aGlzLmo9e30sdGhpcy5SPXt9LHRoaXMuQT1kdCgpfWNsb25lKCl7Y29uc3QgdD1uZXcgU3Q7cmV0dXJuIHQuaz1bLi4udGhpcy5rXSx0LlQ9ey4uLnRoaXMuVH0sdC5PPXsuLi50aGlzLk99LHQuaj17Li4udGhpcy5qfSx0LkQ9dGhpcy5ELHQuST10aGlzLkksdC5QPXRoaXMuUCx0LlU9dGhpcy5VLHQuTT10aGlzLk0sdC5OPVsuLi50aGlzLk5dLHQuTD10aGlzLkwsdC5DPVsuLi50aGlzLkNdLHQuUj17Li4udGhpcy5SfSx0LkE9ey4uLnRoaXMuQX0sdC5CPXRoaXMuQix0Lkc9dGhpcy5HLF90KHQsd3QodGhpcykpLHR9c2V0Q2xpZW50KHQpe3RoaXMuQj10fXNldExhc3RFdmVudElkKHQpe3RoaXMuRz10fWdldENsaWVudCgpe3JldHVybiB0aGlzLkJ9bGFzdEV2ZW50SWQoKXtyZXR1cm4gdGhpcy5HfWFkZFNjb3BlTGlzdGVuZXIodCl7dGhpcy5TLnB1c2godCl9YWRkRXZlbnRQcm9jZXNzb3IodCl7cmV0dXJuIHRoaXMuTi5wdXNoKHQpLHRoaXN9c2V0VXNlcih0KXtyZXR1cm4gdGhpcy5EPXR8fHtlbWFpbDp2b2lkIDAsaWQ6dm9pZCAwLGlwX2FkZHJlc3M6dm9pZCAwLHVzZXJuYW1lOnZvaWQgMH0sdGhpcy5QJiZidCh0aGlzLlAse3VzZXI6dH0pLHRoaXMuSigpLHRoaXN9Z2V0VXNlcigpe3JldHVybiB0aGlzLkR9Z2V0UmVxdWVzdFNlc3Npb24oKXtyZXR1cm4gdGhpcy5MfXNldFJlcXVlc3RTZXNzaW9uKHQpe3JldHVybiB0aGlzLkw9dCx0aGlzfXNldFRhZ3ModCl7cmV0dXJuIHRoaXMuVD17Li4udGhpcy5ULC4uLnR9LHRoaXMuSigpLHRoaXN9c2V0VGFnKHQsbil7cmV0dXJuIHRoaXMuVD17Li4udGhpcy5ULFt0XTpufSx0aGlzLkooKSx0aGlzfXNldEV4dHJhcyh0KXtyZXR1cm4gdGhpcy5PPXsuLi50aGlzLk8sLi4udH0sdGhpcy5KKCksdGhpc31zZXRFeHRyYSh0LG4pe3JldHVybiB0aGlzLk89ey4uLnRoaXMuTyxbdF06bn0sdGhpcy5KKCksdGhpc31zZXRGaW5nZXJwcmludCh0KXtyZXR1cm4gdGhpcy5NPXQsdGhpcy5KKCksdGhpc31zZXRMZXZlbCh0KXtyZXR1cm4gdGhpcy5JPXQsdGhpcy5KKCksdGhpc31zZXRUcmFuc2FjdGlvbk5hbWUodCl7cmV0dXJuIHRoaXMuVT10LHRoaXMuSigpLHRoaXN9c2V0Q29udGV4dCh0LG4pe3JldHVybiBudWxsPT09bj9kZWxldGUgdGhpcy5qW3RdOnRoaXMualt0XT1uLHRoaXMuSigpLHRoaXN9c2V0U2Vzc2lvbih0KXtyZXR1cm4gdD90aGlzLlA9dDpkZWxldGUgdGhpcy5QLHRoaXMuSigpLHRoaXN9Z2V0U2Vzc2lvbigpe3JldHVybiB0aGlzLlB9dXBkYXRlKHQpe2lmKCF0KXJldHVybiB0aGlzO2NvbnN0IG49ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dCh0aGlzKTp0LFtlLHJdPW4gaW5zdGFuY2VvZiAkdD9bbi5nZXRTY29wZURhdGEoKSxuLmdldFJlcXVlc3RTZXNzaW9uKCldOmwobik/W3QsdC5yZXF1ZXN0U2Vzc2lvbl06W10se3RhZ3M6byxleHRyYTpzLHVzZXI6aSxjb250ZXh0czpjLGxldmVsOnUsZmluZ2VycHJpbnQ6YT1bXSxwcm9wYWdhdGlvbkNvbnRleHQ6Zn09ZXx8e307cmV0dXJuIHRoaXMuVD17Li4udGhpcy5ULC4uLm99LHRoaXMuTz17Li4udGhpcy5PLC4uLnN9LHRoaXMuaj17Li4udGhpcy5qLC4uLmN9LGkmJk9iamVjdC5rZXlzKGkpLmxlbmd0aCYmKHRoaXMuRD1pKSx1JiYodGhpcy5JPXUpLGEubGVuZ3RoJiYodGhpcy5NPWEpLGYmJih0aGlzLkE9ZiksciYmKHRoaXMuTD1yKSx0aGlzfWNsZWFyKCl7cmV0dXJuIHRoaXMuaz1bXSx0aGlzLlQ9e30sdGhpcy5PPXt9LHRoaXMuRD17fSx0aGlzLmo9e30sdGhpcy5JPXZvaWQgMCx0aGlzLlU9dm9pZCAwLHRoaXMuTT12b2lkIDAsdGhpcy5MPXZvaWQgMCx0aGlzLlA9dm9pZCAwLF90KHRoaXMsdm9pZCAwKSx0aGlzLkM9W10sdGhpcy5BPWR0KCksdGhpcy5KKCksdGhpc31hZGRCcmVhZGNydW1iKHQsbil7Y29uc3QgZT0ibnVtYmVyIj09dHlwZW9mIG4/bjoxMDA7aWYoZTw9MClyZXR1cm4gdGhpcztjb25zdCByPXt0aW1lc3RhbXA6RygpLC4uLnR9LG89dGhpcy5rO3JldHVybiBvLnB1c2gociksdGhpcy5rPW8ubGVuZ3RoPmU/by5zbGljZSgtZSk6byx0aGlzLkooKSx0aGlzfWdldExhc3RCcmVhZGNydW1iKCl7cmV0dXJuIHRoaXMua1t0aGlzLmsubGVuZ3RoLTFdfWNsZWFyQnJlYWRjcnVtYnMoKXtyZXR1cm4gdGhpcy5rPVtdLHRoaXMuSigpLHRoaXN9YWRkQXR0YWNobWVudCh0KXtyZXR1cm4gdGhpcy5DLnB1c2godCksdGhpc31jbGVhckF0dGFjaG1lbnRzKCl7cmV0dXJuIHRoaXMuQz1bXSx0aGlzfWdldFNjb3BlRGF0YSgpe3JldHVybnticmVhZGNydW1iczp0aGlzLmssYXR0YWNobWVudHM6dGhpcy5DLGNvbnRleHRzOnRoaXMuaix0YWdzOnRoaXMuVCxleHRyYTp0aGlzLk8sdXNlcjp0aGlzLkQsbGV2ZWw6dGhpcy5JLGZpbmdlcnByaW50OnRoaXMuTXx8W10sZXZlbnRQcm9jZXNzb3JzOnRoaXMuTixwcm9wYWdhdGlvbkNvbnRleHQ6dGhpcy5BLHNka1Byb2Nlc3NpbmdNZXRhZGF0YTp0aGlzLlIsdHJhbnNhY3Rpb25OYW1lOnRoaXMuVSxzcGFuOnd0KHRoaXMpfX1zZXRTREtQcm9jZXNzaW5nTWV0YWRhdGEodCl7cmV0dXJuIHRoaXMuUj17Li4udGhpcy5SLC4uLnR9LHRoaXN9c2V0UHJvcGFnYXRpb25Db250ZXh0KHQpe3JldHVybiB0aGlzLkE9dCx0aGlzfWdldFByb3BhZ2F0aW9uQ29udGV4dCgpe3JldHVybiB0aGlzLkF9Y2FwdHVyZUV4Y2VwdGlvbih0LG4pe2NvbnN0IGU9biYmbi5ldmVudF9pZD9uLmV2ZW50X2lkOnooKTtpZighdGhpcy5CKXJldHVybiBrLndhcm4oIk5vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBleGNlcHRpb24hIiksZTtjb25zdCByPW5ldyBFcnJvcigiU2VudHJ5IHN5bnRoZXRpY0V4Y2VwdGlvbiIpO3JldHVybiB0aGlzLkIuY2FwdHVyZUV4Y2VwdGlvbih0LHtvcmlnaW5hbEV4Y2VwdGlvbjp0LHN5bnRoZXRpY0V4Y2VwdGlvbjpyLC4uLm4sZXZlbnRfaWQ6ZX0sdGhpcyksZX1jYXB0dXJlTWVzc2FnZSh0LG4sZSl7Y29uc3Qgcj1lJiZlLmV2ZW50X2lkP2UuZXZlbnRfaWQ6eigpO2lmKCF0aGlzLkIpcmV0dXJuIGsud2FybigiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIG1lc3NhZ2UhIikscjtjb25zdCBvPW5ldyBFcnJvcih0KTtyZXR1cm4gdGhpcy5CLmNhcHR1cmVNZXNzYWdlKHQsbix7b3JpZ2luYWxFeGNlcHRpb246dCxzeW50aGV0aWNFeGNlcHRpb246bywuLi5lLGV2ZW50X2lkOnJ9LHRoaXMpLHJ9Y2FwdHVyZUV2ZW50KHQsbil7Y29uc3QgZT1uJiZuLmV2ZW50X2lkP24uZXZlbnRfaWQ6eigpO3JldHVybiB0aGlzLkI/KHRoaXMuQi5jYXB0dXJlRXZlbnQodCx7Li4ubixldmVudF9pZDplfSx0aGlzKSxlKTooay53YXJuKCJObyBjbGllbnQgY29uZmlndXJlZCBvbiBzY29wZSAtIHdpbGwgbm90IGNhcHR1cmUgZXZlbnQhIiksZSl9Sigpe3RoaXMuX3x8KHRoaXMuXz0hMCx0aGlzLlMuZm9yRWFjaCgodD0+e3QodGhpcyl9KSksdGhpcy5fPSExKX19Y29uc3QgJHQ9U3Q7Y2xhc3MgRXR7Y29uc3RydWN0b3IodCxuKXtsZXQgZSxyO2U9dHx8bmV3ICR0LHI9bnx8bmV3ICR0LHRoaXMuSD1be3Njb3BlOmV9XSx0aGlzLlc9cn13aXRoU2NvcGUodCl7Y29uc3Qgbj10aGlzLlkoKTtsZXQgZTt0cnl7ZT10KG4pfWNhdGNoKHQpe3Rocm93IHRoaXMucSgpLHR9cmV0dXJuIG0oZSk/ZS50aGVuKCh0PT4odGhpcy5xKCksdCkpLCh0PT57dGhyb3cgdGhpcy5xKCksdH0pKToodGhpcy5xKCksZSl9Z2V0Q2xpZW50KCl7cmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5jbGllbnR9Z2V0U2NvcGUoKXtyZXR1cm4gdGhpcy5nZXRTdGFja1RvcCgpLnNjb3BlfWdldElzb2xhdGlvblNjb3BlKCl7cmV0dXJuIHRoaXMuV31nZXRTdGFja1RvcCgpe3JldHVybiB0aGlzLkhbdGhpcy5ILmxlbmd0aC0xXX1ZKCl7Y29uc3QgdD10aGlzLmdldFNjb3BlKCkuY2xvbmUoKTtyZXR1cm4gdGhpcy5ILnB1c2goe2NsaWVudDp0aGlzLmdldENsaWVudCgpLHNjb3BlOnR9KSx0fXEoKXtyZXR1cm4hKHRoaXMuSC5sZW5ndGg8PTEpJiYhIXRoaXMuSC5wb3AoKX19ZnVuY3Rpb24geHQoKXtjb25zdCB0PXl0KG10KCkpO3JldHVybiB0LnN0YWNrPXQuc3RhY2t8fG5ldyBFdCh2KCJkZWZhdWx0Q3VycmVudFNjb3BlIiwoKCk9Pm5ldyAkdCkpLHYoImRlZmF1bHRJc29sYXRpb25TY29wZSIsKCgpPT5uZXcgJHQpKSl9ZnVuY3Rpb24gTnQodCl7cmV0dXJuIHh0KCkud2l0aFNjb3BlKHQpfWZ1bmN0aW9uIGt0KHQsbil7Y29uc3QgZT14dCgpO3JldHVybiBlLndpdGhTY29wZSgoKCk9PihlLmdldFN0YWNrVG9wKCkuc2NvcGU9dCxuKHQpKSkpfWZ1bmN0aW9uIEN0KHQpe3JldHVybiB4dCgpLndpdGhTY29wZSgoKCk9PnQoeHQoKS5nZXRJc29sYXRpb25TY29wZSgpKSkpfWZ1bmN0aW9uIER0KHQpe2NvbnN0IG49eXQodCk7cmV0dXJuIG4uYWNzP24uYWNzOnt3aXRoSXNvbGF0aW9uU2NvcGU6Q3Qsd2l0aFNjb3BlOk50LHdpdGhTZXRTY29wZTprdCx3aXRoU2V0SXNvbGF0aW9uU2NvcGU6KHQsbik9PkN0KG4pLGdldEN1cnJlbnRTY29wZTooKT0+eHQoKS5nZXRTY29wZSgpLGdldElzb2xhdGlvblNjb3BlOigpPT54dCgpLmdldElzb2xhdGlvblNjb3BlKCl9fWZ1bmN0aW9uIFR0KCl7cmV0dXJuIER0KG10KCkpLmdldEN1cnJlbnRTY29wZSgpLmdldENsaWVudCgpfWNvbnN0IE90PSJfc2VudHJ5TWV0cmljcyI7ZnVuY3Rpb24ganQodCl7Y29uc3Qgbj10W090XTtpZighbilyZXR1cm47Y29uc3QgZT17fTtmb3IoY29uc3RbLFt0LHJdXW9mIG4peyhlW3RdfHwoZVt0XT1bXSkpLnB1c2goUihyKSl9cmV0dXJuIGV9Y29uc3QgUnQ9InNlbnRyeS5zb3VyY2UiLEF0PSJzZW50cnkuc2FtcGxlX3JhdGUiLEl0PSJzZW50cnkub3AiLFB0PSJzZW50cnkub3JpZ2luIixVdD0wLE10PTEsTHQ9MTtmdW5jdGlvbiBCdCh0KXtjb25zdHtzcGFuSWQ6bix0cmFjZUlkOmV9PXQuc3BhbkNvbnRleHQoKSx7cGFyZW50X3NwYW5faWQ6cn09enQodCk7cmV0dXJuIFIoe3BhcmVudF9zcGFuX2lkOnIsc3Bhbl9pZDpuLHRyYWNlX2lkOmV9KX1mdW5jdGlvbiBHdCh0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/SnQodCk6QXJyYXkuaXNBcnJheSh0KT90WzBdK3RbMV0vMWU5OnQgaW5zdGFuY2VvZiBEYXRlP0p0KHQuZ2V0VGltZSgpKTpKKCl9ZnVuY3Rpb24gSnQodCl7cmV0dXJuIHQ+OTk5OTk5OTk5OT90LzFlMzp0fWZ1bmN0aW9uIHp0KHQpe2lmKGZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0LmdldFNwYW5KU09OfSh0KSlyZXR1cm4gdC5nZXRTcGFuSlNPTigpO3RyeXtjb25zdHtzcGFuSWQ6bix0cmFjZUlkOmV9PXQuc3BhbkNvbnRleHQoKTtpZihmdW5jdGlvbih0KXtjb25zdCBuPXQ7cmV0dXJuISEobi5hdHRyaWJ1dGVzJiZuLnN0YXJ0VGltZSYmbi5uYW1lJiZuLmVuZFRpbWUmJm4uc3RhdHVzKX0odCkpe2NvbnN0e2F0dHJpYnV0ZXM6cixzdGFydFRpbWU6byxuYW1lOnMsZW5kVGltZTppLHBhcmVudFNwYW5JZDpjLHN0YXR1czp1fT10O3JldHVybiBSKHtzcGFuX2lkOm4sdHJhY2VfaWQ6ZSxkYXRhOnIsZGVzY3JpcHRpb246cyxwYXJlbnRfc3Bhbl9pZDpjLHN0YXJ0X3RpbWVzdGFtcDpHdChvKSx0aW1lc3RhbXA6R3QoaSl8fHZvaWQgMCxzdGF0dXM6SHQodSksb3A6cltJdF0sb3JpZ2luOnJbUHRdLF9tZXRyaWNzX3N1bW1hcnk6anQodCl9KX1yZXR1cm57c3Bhbl9pZDpuLHRyYWNlX2lkOmV9fWNhdGNoKHQpe3JldHVybnt9fX1mdW5jdGlvbiBIdCh0KXtpZih0JiZ0LmNvZGUhPT1VdClyZXR1cm4gdC5jb2RlPT09TXQ/Im9rIjp0Lm1lc3NhZ2V8fCJ1bmtub3duX2Vycm9yIn1jb25zdCBXdD0iX3NlbnRyeVJvb3RTcGFuIjtmdW5jdGlvbiBZdCh0KXtyZXR1cm4gdFtXdF18fHR9Y29uc3QgcXQ9InByb2R1Y3Rpb24iLEZ0PSJfZnJvemVuRHNjIjtmdW5jdGlvbiBLdCh0KXtjb25zdCBuPVR0KCk7aWYoIW4pcmV0dXJue307Y29uc3QgZT1mdW5jdGlvbih0LG4pe2NvbnN0IGU9bi5nZXRPcHRpb25zKCkse3B1YmxpY0tleTpyfT1uLmdldERzbigpfHx7fSxvPVIoe2Vudmlyb25tZW50OmUuZW52aXJvbm1lbnR8fHF0LHJlbGVhc2U6ZS5yZWxlYXNlLHB1YmxpY19rZXk6cix0cmFjZV9pZDp0fSk7cmV0dXJuIG4uZW1pdCgiY3JlYXRlRHNjIixvKSxvfSh6dCh0KS50cmFjZV9pZHx8IiIsbikscj1ZdCh0KSxvPXJbRnRdO2lmKG8pcmV0dXJuIG87Y29uc3Qgcz1yLnNwYW5Db250ZXh0KCkudHJhY2VTdGF0ZSxpPXMmJnMuZ2V0KCJzZW50cnkuZHNjIiksYz1pJiZldChpKTtpZihjKXJldHVybiBjO2NvbnN0IHU9enQociksYT11LmRhdGF8fHt9LGY9YVtBdF07bnVsbCE9ZiYmKGUuc2FtcGxlX3JhdGU9YCR7Zn1gKTtjb25zdCBoPWFbUnRdLHA9dS5kZXNjcmlwdGlvbjtyZXR1cm4idXJsIiE9PWgmJnAmJihlLnRyYW5zYWN0aW9uPXApLGUuc2FtcGxlZD1TdHJpbmcoZnVuY3Rpb24odCl7Y29uc3R7dHJhY2VGbGFnczpufT10LnNwYW5Db250ZXh0KCk7cmV0dXJuIG49PT1MdH0ocikpLG4uZW1pdCgiY3JlYXRlRHNjIixlLHIpLGV9ZnVuY3Rpb24gVnQodCxuLGUscil7Y29uc3Qgbz1mdChlKSxzPXQudHlwZSYmInJlcGxheV9ldmVudCIhPT10LnR5cGU/dC50eXBlOiJldmVudCI7IWZ1bmN0aW9uKHQsbil7biYmKHQuc2RrPXQuc2RrfHx7fSx0LnNkay5uYW1lPXQuc2RrLm5hbWV8fG4ubmFtZSx0LnNkay52ZXJzaW9uPXQuc2RrLnZlcnNpb258fG4udmVyc2lvbix0LnNkay5pbnRlZ3JhdGlvbnM9Wy4uLnQuc2RrLmludGVncmF0aW9uc3x8W10sLi4ubi5pbnRlZ3JhdGlvbnN8fFtdXSx0LnNkay5wYWNrYWdlcz1bLi4udC5zZGsucGFja2FnZXN8fFtdLC4uLm4ucGFja2FnZXN8fFtdXSl9KHQsZSYmZS5zZGspO2NvbnN0IGk9ZnVuY3Rpb24odCxuLGUscil7Y29uc3Qgbz10LnNka1Byb2Nlc3NpbmdNZXRhZGF0YSYmdC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEuZHluYW1pY1NhbXBsaW5nQ29udGV4dDtyZXR1cm57ZXZlbnRfaWQ6dC5ldmVudF9pZCxzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi5uJiZ7c2RrOm59LC4uLiEhZSYmciYme2RzbjpDKHIpfSwuLi5vJiZ7dHJhY2U6Uih7Li4ub30pfX19KHQsbyxyLG4pO2RlbGV0ZSB0LnNka1Byb2Nlc3NpbmdNZXRhZGF0YTtyZXR1cm4gb3QoaSxbW3t0eXBlOnN9LHRdXSl9Y29uc3QgWnQ9Il9fU0VOVFJZX1NVUFBSRVNTX1RSQUNJTkdfXyI7ZnVuY3Rpb24gUXQodCl7Y29uc3Qgbj1EdChtdCgpKTtyZXR1cm4gbi5zdXBwcmVzc1RyYWNpbmc/bi5zdXBwcmVzc1RyYWNpbmcodCk6ZnVuY3Rpb24oLi4udCl7Y29uc3Qgbj1EdChtdCgpKTtpZigyPT09dC5sZW5ndGgpe2NvbnN0W2Uscl09dDtyZXR1cm4gZT9uLndpdGhTZXRTY29wZShlLHIpOm4ud2l0aFNjb3BlKHIpfXJldHVybiBuLndpdGhTY29wZSh0WzBdKX0oKG49PihuLnNldFNES1Byb2Nlc3NpbmdNZXRhZGF0YSh7W1p0XTohMH0pLHQoKSkpKX1mdW5jdGlvbiBYdCh0LG4pe2NvbnN0e2ZpbmdlcnByaW50OmUsc3BhbjpyLGJyZWFkY3J1bWJzOm8sc2RrUHJvY2Vzc2luZ01ldGFkYXRhOnN9PW47IWZ1bmN0aW9uKHQsbil7Y29uc3R7ZXh0cmE6ZSx0YWdzOnIsdXNlcjpvLGNvbnRleHRzOnMsbGV2ZWw6aSx0cmFuc2FjdGlvbk5hbWU6Y309bix1PVIoZSk7dSYmT2JqZWN0LmtleXModSkubGVuZ3RoJiYodC5leHRyYT17Li4udSwuLi50LmV4dHJhfSk7Y29uc3QgYT1SKHIpO2EmJk9iamVjdC5rZXlzKGEpLmxlbmd0aCYmKHQudGFncz17Li4uYSwuLi50LnRhZ3N9KTtjb25zdCBmPVIobyk7ZiYmT2JqZWN0LmtleXMoZikubGVuZ3RoJiYodC51c2VyPXsuLi5mLC4uLnQudXNlcn0pO2NvbnN0IGg9UihzKTtoJiZPYmplY3Qua2V5cyhoKS5sZW5ndGgmJih0LmNvbnRleHRzPXsuLi5oLC4uLnQuY29udGV4dHN9KTtpJiYodC5sZXZlbD1pKTtjJiYidHJhbnNhY3Rpb24iIT09dC50eXBlJiYodC50cmFuc2FjdGlvbj1jKX0odCxuKSxyJiZmdW5jdGlvbih0LG4pe3QuY29udGV4dHM9e3RyYWNlOkJ0KG4pLC4uLnQuY29udGV4dHN9LHQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhPXtkeW5hbWljU2FtcGxpbmdDb250ZXh0Okt0KG4pLC4uLnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhfTtjb25zdCBlPVl0KG4pLHI9enQoZSkuZGVzY3JpcHRpb247ciYmIXQudHJhbnNhY3Rpb24mJiJ0cmFuc2FjdGlvbiI9PT10LnR5cGUmJih0LnRyYW5zYWN0aW9uPXIpfSh0LHIpLGZ1bmN0aW9uKHQsbil7dC5maW5nZXJwcmludD10LmZpbmdlcnByaW50P2Z1bmN0aW9uKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3Q6W3RdfSh0LmZpbmdlcnByaW50KTpbXSxuJiYodC5maW5nZXJwcmludD10LmZpbmdlcnByaW50LmNvbmNhdChuKSk7dC5maW5nZXJwcmludCYmIXQuZmluZ2VycHJpbnQubGVuZ3RoJiZkZWxldGUgdC5maW5nZXJwcmludH0odCxlKSxmdW5jdGlvbih0LG4pe2NvbnN0IGU9Wy4uLnQuYnJlYWRjcnVtYnN8fFtdLC4uLm5dO3QuYnJlYWRjcnVtYnM9ZS5sZW5ndGg/ZTp2b2lkIDB9KHQsbyksZnVuY3Rpb24odCxuKXt0LnNka1Byb2Nlc3NpbmdNZXRhZGF0YT17Li4udC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEsLi4ubn19KHQscyl9Y29uc3QgdG49IjciO2Z1bmN0aW9uIG5uKHQsbil7cmV0dXJuIGU9e3NlbnRyeV9rZXk6dC5wdWJsaWNLZXksc2VudHJ5X3ZlcnNpb246dG4sLi4ubiYme3NlbnRyeV9jbGllbnQ6YCR7bi5uYW1lfS8ke24udmVyc2lvbn1gfX0sT2JqZWN0LmtleXMoZSkubWFwKCh0PT5gJHtlbmNvZGVVUklDb21wb25lbnQodCl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGVbdF0pfWApKS5qb2luKCImIik7dmFyIGV9Y29uc3QgZW49NjQ7ZnVuY3Rpb24gcm4odCxuLGU9USh0LmJ1ZmZlclNpemV8fGVuKSl7bGV0IHI9e307cmV0dXJue3NlbmQ6ZnVuY3Rpb24obyl7Y29uc3Qgcz1bXTtpZihzdChvLCgobixlKT0+e2NvbnN0IG89YXQoZSk7aWYoZnVuY3Rpb24odCxuLGU9RGF0ZS5ub3coKSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7cmV0dXJuIHRbbl18fHQuYWxsfHwwfSh0LG4pPmV9KHIsbykpe2NvbnN0IHI9b24obixlKTt0LnJlY29yZERyb3BwZWRFdmVudCgicmF0ZWxpbWl0X2JhY2tvZmYiLG8scil9ZWxzZSBzLnB1c2gobil9KSksMD09PXMubGVuZ3RoKXJldHVybiBWKHt9KTtjb25zdCBpPW90KG9bMF0scyksYz1uPT57c3QoaSwoKGUscik9Pntjb25zdCBvPW9uKGUscik7dC5yZWNvcmREcm9wcGVkRXZlbnQobixhdChyKSxvKX0pKX07cmV0dXJuIGUuYWRkKCgoKT0+bih7Ym9keTpjdChpKX0pLnRoZW4oKHQ9Pih2b2lkIDAhPT10LnN0YXR1c0NvZGUmJih0LnN0YXR1c0NvZGU8MjAwfHx0LnN0YXR1c0NvZGU+PTMwMCkmJmx0JiZrLndhcm4oYFNlbnRyeSByZXNwb25kZWQgd2l0aCBzdGF0dXMgY29kZSAke3Quc3RhdHVzQ29kZX0gdG8gc2VudCBldmVudC5gKSxyPXB0KHIsdCksdCkpLCh0PT57dGhyb3cgYygibmV0d29ya19lcnJvciIpLHR9KSkpKS50aGVuKCh0PT50KSwodD0+e2lmKHQgaW5zdGFuY2VvZiBEKXJldHVybiBsdCYmay5lcnJvcigiU2tpcHBlZCBzZW5kaW5nIGV2ZW50IGJlY2F1c2UgYnVmZmVyIGlzIGZ1bGwuIiksYygicXVldWVfb3ZlcmZsb3ciKSxWKHt9KTt0aHJvdyB0fSkpfSxmbHVzaDp0PT5lLmRyYWluKHQpfX1mdW5jdGlvbiBvbih0LG4pe2lmKCJldmVudCI9PT1ufHwidHJhbnNhY3Rpb24iPT09bilyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90WzFdOnZvaWQgMH1jb25zdCBzbj1TeW1ib2woIkFnZW50QmFzZUludGVybmFsU3RhdGUiKTtjbGFzcyBjbiBleHRlbmRzIHMuQWdlbnR7W3NuXTtvcHRpb25zO2tlZXBBbGl2ZTtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzW3NuXT17fX1pc1NlY3VyZUVuZHBvaW50KHQpe2lmKHQpe2lmKCJib29sZWFuIj09dHlwZW9mIHQuc2VjdXJlRW5kcG9pbnQpcmV0dXJuIHQuc2VjdXJlRW5kcG9pbnQ7aWYoInN0cmluZyI9PXR5cGVvZiB0LnByb3RvY29sKXJldHVybiJodHRwczoiPT09dC5wcm90b2NvbH1jb25zdHtzdGFjazpufT1uZXcgRXJyb3I7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBuJiZuLnNwbGl0KCJcbiIpLnNvbWUoKHQ9Pi0xIT09dC5pbmRleE9mKCIoaHR0cHMuanM6Iil8fC0xIT09dC5pbmRleE9mKCJub2RlOmh0dHBzOiIpKSl9Y3JlYXRlU29ja2V0KHQsbixlKXtjb25zdCByPXsuLi5uLHNlY3VyZUVuZHBvaW50OnRoaXMuaXNTZWN1cmVFbmRwb2ludChuKX07UHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKCk9PnRoaXMuY29ubmVjdCh0LHIpKSkudGhlbigobz0+e2lmKG8gaW5zdGFuY2VvZiBzLkFnZW50KXJldHVybiBvLmFkZFJlcXVlc3QodCxyKTt0aGlzW3NuXS5jdXJyZW50U29ja2V0PW8sc3VwZXIuY3JlYXRlU29ja2V0KHQsbixlKX0pLGUpfWNyZWF0ZUNvbm5lY3Rpb24oKXtjb25zdCB0PXRoaXNbc25dLmN1cnJlbnRTb2NrZXQ7aWYodGhpc1tzbl0uY3VycmVudFNvY2tldD12b2lkIDAsIXQpdGhyb3cgbmV3IEVycm9yKCJObyBzb2NrZXQgd2FzIHJldHVybmVkIGluIHRoZSBgY29ubmVjdCgpYCBmdW5jdGlvbiIpO3JldHVybiB0fWdldCBkZWZhdWx0UG9ydCgpe3JldHVybiB0aGlzW3NuXS5kZWZhdWx0UG9ydD8/KCJodHRwczoiPT09dGhpcy5wcm90b2NvbD80NDM6ODApfXNldCBkZWZhdWx0UG9ydCh0KXt0aGlzW3NuXSYmKHRoaXNbc25dLmRlZmF1bHRQb3J0PXQpfWdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzW3NuXS5wcm90b2NvbD8/KHRoaXMuaXNTZWN1cmVFbmRwb2ludCgpPyJodHRwczoiOiJodHRwOiIpfXNldCBwcm90b2NvbCh0KXt0aGlzW3NuXSYmKHRoaXNbc25dLnByb3RvY29sPXQpfX1mdW5jdGlvbiB1biguLi50KXtrLmxvZygiW2h0dHBzLXByb3h5LWFnZW50OnBhcnNlLXByb3h5LXJlc3BvbnNlXSIsLi4udCl9ZnVuY3Rpb24gYW4odCl7cmV0dXJuIG5ldyBQcm9taXNlKCgobixlKT0+e2xldCByPTA7Y29uc3Qgbz1bXTtmdW5jdGlvbiBzKCl7Y29uc3QgYz10LnJlYWQoKTtjP2Z1bmN0aW9uKGMpe28ucHVzaChjKSxyKz1jLmxlbmd0aDtjb25zdCB1PUJ1ZmZlci5jb25jYXQobyxyKSxhPXUuaW5kZXhPZigiXHJcblxyXG4iKTtpZigtMT09PWEpcmV0dXJuIHVuKCJoYXZlIG5vdCByZWNlaXZlZCBlbmQgb2YgSFRUUCBoZWFkZXJzIHlldC4uLiIpLHZvaWQgcygpO2NvbnN0IGY9dS5zbGljZSgwLGEpLnRvU3RyaW5nKCJhc2NpaSIpLnNwbGl0KCJcclxuIiksaD1mLnNoaWZ0KCk7aWYoIWgpcmV0dXJuIHQuZGVzdHJveSgpLGUobmV3IEVycm9yKCJObyBoZWFkZXIgcmVjZWl2ZWQgZnJvbSBwcm94eSBDT05ORUNUIHJlc3BvbnNlIikpO2NvbnN0IHA9aC5zcGxpdCgiICIpLGQ9KyhwWzFdfHwwKSxsPXAuc2xpY2UoMikuam9pbigiICIpLG09e307Zm9yKGNvbnN0IG4gb2YgZil7aWYoIW4pY29udGludWU7Y29uc3Qgcj1uLmluZGV4T2YoIjoiKTtpZigtMT09PXIpcmV0dXJuIHQuZGVzdHJveSgpLGUobmV3IEVycm9yKGBJbnZhbGlkIGhlYWRlciBmcm9tIHByb3h5IENPTk5FQ1QgcmVzcG9uc2U6ICIke259ImApKTtjb25zdCBvPW4uc2xpY2UoMCxyKS50b0xvd2VyQ2FzZSgpLHM9bi5zbGljZShyKzEpLnRyaW1TdGFydCgpLGk9bVtvXTsic3RyaW5nIj09dHlwZW9mIGk/bVtvXT1baSxzXTpBcnJheS5pc0FycmF5KGkpP2kucHVzaChzKTptW29dPXN9dW4oImdvdCBwcm94eSBzZXJ2ZXIgcmVzcG9uc2U6ICVvICVvIixoLG0pLGkoKSxuKHtjb25uZWN0OntzdGF0dXNDb2RlOmQsc3RhdHVzVGV4dDpsLGhlYWRlcnM6bX0sYnVmZmVyZWQ6dX0pfShjKTp0Lm9uY2UoInJlYWRhYmxlIixzKX1mdW5jdGlvbiBpKCl7dC5yZW1vdmVMaXN0ZW5lcigiZW5kIixjKSx0LnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsdSksdC5yZW1vdmVMaXN0ZW5lcigicmVhZGFibGUiLHMpfWZ1bmN0aW9uIGMoKXtpKCksdW4oIm9uZW5kIiksZShuZXcgRXJyb3IoIlByb3h5IGNvbm5lY3Rpb24gZW5kZWQgYmVmb3JlIHJlY2VpdmluZyBDT05ORUNUIHJlc3BvbnNlIikpfWZ1bmN0aW9uIHUodCl7aSgpLHVuKCJvbmVycm9yICVvIix0KSxlKHQpfXQub24oImVycm9yIix1KSx0Lm9uKCJlbmQiLGMpLHMoKX0pKX1mdW5jdGlvbiBmbiguLi50KXtrLmxvZygiW2h0dHBzLXByb3h5LWFnZW50XSIsLi4udCl9Y2xhc3MgaG4gZXh0ZW5kcyBjbntzdGF0aWMgcHJvdG9jb2xzPVsiaHR0cCIsImh0dHBzIl07cHJveHk7cHJveHlIZWFkZXJzO2Nvbm5lY3RPcHRzO2NvbnN0cnVjdG9yKHQsbil7c3VwZXIobiksdGhpcy5vcHRpb25zPXt9LHRoaXMucHJveHk9InN0cmluZyI9PXR5cGVvZiB0P25ldyBVUkwodCk6dCx0aGlzLnByb3h5SGVhZGVycz1uPy5oZWFkZXJzPz97fSxmbigiQ3JlYXRpbmcgbmV3IEh0dHBzUHJveHlBZ2VudCBpbnN0YW5jZTogJW8iLHRoaXMucHJveHkuaHJlZik7Y29uc3QgZT0odGhpcy5wcm94eS5ob3N0bmFtZXx8dGhpcy5wcm94eS5ob3N0KS5yZXBsYWNlKC9eXFt8XF0kL2csIiIpLHI9dGhpcy5wcm94eS5wb3J0P3BhcnNlSW50KHRoaXMucHJveHkucG9ydCwxMCk6Imh0dHBzOiI9PT10aGlzLnByb3h5LnByb3RvY29sPzQ0Mzo4MDt0aGlzLmNvbm5lY3RPcHRzPXtBTFBOUHJvdG9jb2xzOlsiaHR0cC8xLjEiXSwuLi5uP2RuKG4sImhlYWRlcnMiKTpudWxsLGhvc3Q6ZSxwb3J0OnJ9fWFzeW5jIGNvbm5lY3QodCxuKXtjb25zdHtwcm94eTplfT10aGlzO2lmKCFuLmhvc3QpdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gImhvc3QiIHByb3ZpZGVkJyk7bGV0IHI7aWYoImh0dHBzOiI9PT1lLnByb3RvY29sKXtmbigiQ3JlYXRpbmcgYHRscy5Tb2NrZXRgOiAlbyIsdGhpcy5jb25uZWN0T3B0cyk7Y29uc3QgdD10aGlzLmNvbm5lY3RPcHRzLnNlcnZlcm5hbWV8fHRoaXMuY29ubmVjdE9wdHMuaG9zdDtyPWYuY29ubmVjdCh7Li4udGhpcy5jb25uZWN0T3B0cyxzZXJ2ZXJuYW1lOnQmJmEuaXNJUCh0KT92b2lkIDA6dH0pfWVsc2UgZm4oIkNyZWF0aW5nIGBuZXQuU29ja2V0YDogJW8iLHRoaXMuY29ubmVjdE9wdHMpLHI9YS5jb25uZWN0KHRoaXMuY29ubmVjdE9wdHMpO2NvbnN0IG89ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucHJveHlIZWFkZXJzP3RoaXMucHJveHlIZWFkZXJzKCk6ey4uLnRoaXMucHJveHlIZWFkZXJzfSxzPWEuaXNJUHY2KG4uaG9zdCk/YFske24uaG9zdH1dYDpuLmhvc3Q7bGV0IGk9YENPTk5FQ1QgJHtzfToke24ucG9ydH0gSFRUUC8xLjFcclxuYDtpZihlLnVzZXJuYW1lfHxlLnBhc3N3b3JkKXtjb25zdCB0PWAke2RlY29kZVVSSUNvbXBvbmVudChlLnVzZXJuYW1lKX06JHtkZWNvZGVVUklDb21wb25lbnQoZS5wYXNzd29yZCl9YDtvWyJQcm94eS1BdXRob3JpemF0aW9uIl09YEJhc2ljICR7QnVmZmVyLmZyb20odCkudG9TdHJpbmcoImJhc2U2NCIpfWB9by5Ib3N0PWAke3N9OiR7bi5wb3J0fWAsb1siUHJveHktQ29ubmVjdGlvbiJdfHwob1siUHJveHktQ29ubmVjdGlvbiJdPXRoaXMua2VlcEFsaXZlPyJLZWVwLUFsaXZlIjoiY2xvc2UiKTtmb3IoY29uc3QgdCBvZiBPYmplY3Qua2V5cyhvKSlpKz1gJHt0fTogJHtvW3RdfVxyXG5gO2NvbnN0IGM9YW4ocik7ci53cml0ZShgJHtpfVxyXG5gKTtjb25zdHtjb25uZWN0OnUsYnVmZmVyZWQ6aH09YXdhaXQgYztpZih0LmVtaXQoInByb3h5Q29ubmVjdCIsdSksdGhpcy5lbWl0KCJwcm94eUNvbm5lY3QiLHUsdCksMjAwPT09dS5zdGF0dXNDb2RlKXtpZih0Lm9uY2UoInNvY2tldCIscG4pLG4uc2VjdXJlRW5kcG9pbnQpe2ZuKCJVcGdyYWRpbmcgc29ja2V0IGNvbm5lY3Rpb24gdG8gVExTIik7Y29uc3QgdD1uLnNlcnZlcm5hbWV8fG4uaG9zdDtyZXR1cm4gZi5jb25uZWN0KHsuLi5kbihuLCJob3N0IiwicGF0aCIsInBvcnQiKSxzb2NrZXQ6cixzZXJ2ZXJuYW1lOmEuaXNJUCh0KT92b2lkIDA6dH0pfXJldHVybiByfXIuZGVzdHJveSgpO2NvbnN0IHA9bmV3IGEuU29ja2V0KHt3cml0YWJsZTohMX0pO3JldHVybiBwLnJlYWRhYmxlPSEwLHQub25jZSgic29ja2V0IiwodD0+e2ZuKCJSZXBsYXlpbmcgcHJveHkgYnVmZmVyIGZvciBmYWlsZWQgcmVxdWVzdCIpLHQucHVzaChoKSx0LnB1c2gobnVsbCl9KSkscH19ZnVuY3Rpb24gcG4odCl7dC5yZXN1bWUoKX1mdW5jdGlvbiBkbih0LC4uLm4pe2NvbnN0IGU9e307bGV0IHI7Zm9yKHIgaW4gdCluLmluY2x1ZGVzKHIpfHwoZVtyXT10W3JdKTtyZXR1cm4gZX1jb25zdCBsbj0zMjc2ODtmdW5jdGlvbiBtbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9eW0EtWl06LywiIikucmVwbGFjZSgvXFwvZywiLyIpfWNvbnN0IHluPWU7bGV0IGduLGJuPSExO2Z1bmN0aW9uIHZuKHQpe3luLmRlYnVnJiZjb25zb2xlLmxvZyhgW0FOUiBXb3JrZXJdICR7dH1gKX12YXIgX24sd24sU247Y29uc3QgJG49ZnVuY3Rpb24odCl7bGV0IG47dHJ5e249bmV3IFVSTCh0LnVybCl9Y2F0Y2gobil7cmV0dXJuIE4oKCgpPT57Y29uc29sZS53YXJuKCJbQHNlbnRyeS9ub2RlXTogSW52YWxpZCBkc24gb3IgdHVubmVsIG9wdGlvbiwgd2lsbCBub3Qgc2VuZCBhbnkgZXZlbnRzLiBUaGUgdHVubmVsIG9wdGlvbiBtdXN0IGJlIGEgZnVsbCBVUkwgd2hlbiB1c2VkLiIpfSkpLHJuKHQsKCgpPT5Qcm9taXNlLnJlc29sdmUoe30pKSl9Y29uc3QgZT0iaHR0cHM6Ij09PW4ucHJvdG9jb2wscj1mdW5jdGlvbih0LG4pe2NvbnN0e25vX3Byb3h5OmV9PXByb2Nlc3MuZW52O3JldHVybiBlJiZlLnNwbGl0KCIsIikuc29tZSgobj0+dC5ob3N0LmVuZHNXaXRoKG4pfHx0Lmhvc3RuYW1lLmVuZHNXaXRoKG4pKSk/dm9pZCAwOm59KG4sdC5wcm94eXx8KGU/cHJvY2Vzcy5lbnYuaHR0cHNfcHJveHk6dm9pZCAwKXx8cHJvY2Vzcy5lbnYuaHR0cF9wcm94eSksbz1lP2k6cyxhPXZvaWQgMCE9PXQua2VlcEFsaXZlJiZ0LmtlZXBBbGl2ZSxmPXI/bmV3IGhuKHIpOm5ldyBvLkFnZW50KHtrZWVwQWxpdmU6YSxtYXhTb2NrZXRzOjMwLHRpbWVvdXQ6MmUzfSk7cmV0dXJuIFF0KCgoKT0+e2NvbnN0IG49ZnVuY3Rpb24odCxuLGUpe2NvbnN0e2hvc3RuYW1lOnIscGF0aG5hbWU6byxwb3J0OnMscHJvdG9jb2w6aSxzZWFyY2g6YX09bmV3IFVSTCh0LnVybCk7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBuZXcgUHJvbWlzZSgoKGgscCk9PntsZXQgZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGMoe3JlYWQoKXt0aGlzLnB1c2godCksdGhpcy5wdXNoKG51bGwpfX0pfShmLmJvZHkpO2NvbnN0IGw9ey4uLnQuaGVhZGVyc307Zi5ib2R5Lmxlbmd0aD5sbiYmKGxbImNvbnRlbnQtZW5jb2RpbmciXT0iZ3ppcCIsZD1kLnBpcGUodSgpKSk7Y29uc3QgbT1uLnJlcXVlc3Qoe21ldGhvZDoiUE9TVCIsYWdlbnQ6ZSxoZWFkZXJzOmwsaG9zdG5hbWU6cixwYXRoOmAke299JHthfWAscG9ydDpzLHByb3RvY29sOmksY2E6dC5jYUNlcnRzfSwodD0+e3Qub24oImRhdGEiLCgoKT0+e30pKSx0Lm9uKCJlbmQiLCgoKT0+e30pKSx0LnNldEVuY29kaW5nKCJ1dGY4Iik7Y29uc3Qgbj10LmhlYWRlcnNbInJldHJ5LWFmdGVyIl0/P251bGwsZT10LmhlYWRlcnNbIngtc2VudHJ5LXJhdGUtbGltaXRzIl0/P251bGw7aCh7c3RhdHVzQ29kZTp0LnN0YXR1c0NvZGUsaGVhZGVyczp7InJldHJ5LWFmdGVyIjpuLCJ4LXNlbnRyeS1yYXRlLWxpbWl0cyI6QXJyYXkuaXNBcnJheShlKT9lWzBdfHxudWxsOmV9fSl9KSk7bS5vbigiZXJyb3IiLHApLGQucGlwZShtKX0pKX19KHQsdC5odHRwTW9kdWxlPz9vLGYpO3JldHVybiBybih0LG4pfSkpfSh7dXJsOihfbj15bi5kc24sd249eW4udHVubmVsLFNuPXluLnNka01ldGFkYXRhLnNkayx3bnx8YCR7ZnVuY3Rpb24odCl7cmV0dXJuYCR7ZnVuY3Rpb24odCl7Y29uc3Qgbj10LnByb3RvY29sP2Ake3QucHJvdG9jb2x9OmA6IiIsZT10LnBvcnQ/YDoke3QucG9ydH1gOiIiO3JldHVybmAke259Ly8ke3QuaG9zdH0ke2V9JHt0LnBhdGg/YC8ke3QucGF0aH1gOiIifS9hcGkvYH0odCl9JHt0LnByb2plY3RJZH0vZW52ZWxvcGUvYH0oX24pfT8ke25uKF9uLFNuKX1gKSxyZWNvcmREcm9wcGVkRXZlbnQ6KCk9Pnt9fSk7YXN5bmMgZnVuY3Rpb24gRW4oKXtpZihnbil7dm4oIlNlbmRpbmcgYWJub3JtYWwgc2Vzc2lvbiIpLGJ0KGduLHtzdGF0dXM6ImFibm9ybWFsIixhYm5vcm1hbF9tZWNoYW5pc206ImFucl9mb3JlZ3JvdW5kIn0pO2NvbnN0IHQ9ZnVuY3Rpb24odCxuLGUscil7Y29uc3Qgbz1mdChlKTtyZXR1cm4gb3Qoe3NlbnRfYXQ6KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLC4uLm8mJntzZGs6b30sLi4uISFyJiZuJiZ7ZHNuOkMobil9fSxbImFnZ3JlZ2F0ZXMiaW4gdD9be3R5cGU6InNlc3Npb25zIn0sdF06W3t0eXBlOiJzZXNzaW9uIn0sdC50b0pTT04oKV1dKX0oZ24seW4uZHNuLHluLnNka01ldGFkYXRhLHluLnR1bm5lbCk7dm4oSlNPTi5zdHJpbmdpZnkodCkpLGF3YWl0ICRuLnNlbmQodCk7dHJ5e24/LnBvc3RNZXNzYWdlKCJzZXNzaW9uLWVuZGVkIil9Y2F0Y2godCl7fX19ZnVuY3Rpb24geG4odCl7aWYoIXQpcmV0dXJuO2NvbnN0IG49ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybltdO2NvbnN0IG49QXJyYXkuZnJvbSh0KTtyZXR1cm4vc2VudHJ5V3JhcHBlZC8udGVzdChNKG4pLmZ1bmN0aW9ufHwiIikmJm4ucG9wKCksbi5yZXZlcnNlKCksVS50ZXN0KE0obikuZnVuY3Rpb258fCIiKSYmKG4ucG9wKCksVS50ZXN0KE0obikuZnVuY3Rpb258fCIiKSYmbi5wb3AoKSksbi5zbGljZSgwLEkpLm1hcCgodD0+KHsuLi50LGZpbGVuYW1lOnQuZmlsZW5hbWV8fE0obikuZmlsZW5hbWUsZnVuY3Rpb246dC5mdW5jdGlvbnx8UH0pKSl9KHQpO2lmKHluLmFwcFJvb3RQYXRoKWZvcihjb25zdCB0IG9mIG4pdC5maWxlbmFtZSYmKHQuZmlsZW5hbWU9WSh0LmZpbGVuYW1lLHluLmFwcFJvb3RQYXRoKSk7cmV0dXJuIG59YXN5bmMgZnVuY3Rpb24gTm4odCxuKXtpZihibilyZXR1cm47Ym49ITAsYXdhaXQgRW4oKSx2bigiU2VuZGluZyBldmVudCIpO2NvbnN0IGU9e2V2ZW50X2lkOnooKSxjb250ZXh0czp5bi5jb250ZXh0cyxyZWxlYXNlOnluLnJlbGVhc2UsZW52aXJvbm1lbnQ6eW4uZW52aXJvbm1lbnQsZGlzdDp5bi5kaXN0LHBsYXRmb3JtOiJub2RlIixsZXZlbDoiZXJyb3IiLGV4Y2VwdGlvbjp7dmFsdWVzOlt7dHlwZToiQXBwbGljYXRpb25Ob3RSZXNwb25kaW5nIix2YWx1ZTpgQXBwbGljYXRpb24gTm90IFJlc3BvbmRpbmcgZm9yIGF0IGxlYXN0ICR7eW4uYW5yVGhyZXNob2xkfSBtc2Asc3RhY2t0cmFjZTp7ZnJhbWVzOnhuKHQpfSxtZWNoYW5pc206e3R5cGU6IkFOUiJ9fV19LHRhZ3M6eW4uc3RhdGljVGFnc307biYmZnVuY3Rpb24odCxuKXtpZihYdCh0LG4pLCF0LmNvbnRleHRzPy50cmFjZSl7Y29uc3R7dHJhY2VJZDplLHNwYW5JZDpyLHBhcmVudFNwYW5JZDpvfT1uLnByb3BhZ2F0aW9uQ29udGV4dDt0LmNvbnRleHRzPXt0cmFjZTp7dHJhY2VfaWQ6ZSxzcGFuX2lkOnIscGFyZW50X3NwYW5faWQ6b30sLi4udC5jb250ZXh0c319fShlLG4pO2NvbnN0IHI9VnQoZSx5bi5kc24seW4uc2RrTWV0YWRhdGEseW4udHVubmVsKTt2bihKU09OLnN0cmluZ2lmeShyKSksYXdhaXQgJG4uc2VuZChyKSxhd2FpdCAkbi5mbHVzaCgyZTMpLHNldFRpbWVvdXQoKCgpPT57cHJvY2Vzcy5leGl0KDApfSksNWUzKX1sZXQga247aWYodm4oIlN0YXJ0ZWQiKSx5bi5jYXB0dXJlU3RhY2tUcmFjZSl7dm4oIkNvbm5lY3RpbmcgdG8gZGVidWdnZXIiKTtjb25zdCBuPW5ldyB0O24uY29ubmVjdFRvTWFpblRocmVhZCgpLHZuKCJDb25uZWN0ZWQgdG8gZGVidWdnZXIiKTtjb25zdCBlPW5ldyBNYXA7bi5vbigiRGVidWdnZXIuc2NyaXB0UGFyc2VkIiwodD0+e2Uuc2V0KHQucGFyYW1zLnNjcmlwdElkLHQucGFyYW1zLnVybCl9KSksbi5vbigiRGVidWdnZXIucGF1c2VkIiwodD0+e2lmKCJvdGhlciI9PT10LnBhcmFtcy5yZWFzb24pdHJ5e3ZuKCJEZWJ1Z2dlciBwYXVzZWQiKTtjb25zdCBzPVsuLi50LnBhcmFtcy5jYWxsRnJhbWVzXSxpPXluLmFwcFJvb3RQYXRoP2Z1bmN0aW9uKHQ9KHByb2Nlc3MuYXJndlsxXT9GKHByb2Nlc3MuYXJndlsxXSk6cHJvY2Vzcy5jd2QoKSksbj0iXFwiPT09byl7Y29uc3QgZT1uP21uKHQpOnQ7cmV0dXJuIHQ9PntpZighdClyZXR1cm47Y29uc3Qgbz1uP21uKHQpOnQ7bGV0e2RpcjpzLGJhc2U6aSxleHQ6Y309ci5wYXJzZShvKTsiLmpzIiE9PWMmJiIubWpzIiE9PWMmJiIuY2pzIiE9PWN8fChpPWkuc2xpY2UoMCwtMSpjLmxlbmd0aCkpLHN8fChzPSIuIik7Y29uc3QgdT1zLmxhc3RJbmRleE9mKCIvbm9kZV9tb2R1bGVzIik7aWYodT4tMSlyZXR1cm5gJHtzLnNsaWNlKHUrMTQpLnJlcGxhY2UoL1wvL2csIi4iKX06JHtpfWA7aWYocy5zdGFydHNXaXRoKGUpKXtsZXQgdD1zLnNsaWNlKGUubGVuZ3RoKzEpLnJlcGxhY2UoL1wvL2csIi4iKTtyZXR1cm4gdCYmKHQrPSI6IiksdCs9aSx0fXJldHVybiBpfX0oeW4uYXBwUm9vdFBhdGgpOigpPT57fSxjPXMubWFwKCh0PT5mdW5jdGlvbih0LG4sZSl7Y29uc3Qgcj1uP24ucmVwbGFjZSgvXmZpbGU6XC9cLy8sIiIpOnZvaWQgMCxvPXQubG9jYXRpb24uY29sdW1uTnVtYmVyP3QubG9jYXRpb24uY29sdW1uTnVtYmVyKzE6dm9pZCAwLHM9dC5sb2NhdGlvbi5saW5lTnVtYmVyP3QubG9jYXRpb24ubGluZU51bWJlcisxOnZvaWQgMDtyZXR1cm4gUih7ZmlsZW5hbWU6cixtb2R1bGU6ZShyKSxmdW5jdGlvbjp0LmZ1bmN0aW9uTmFtZXx8UCxjb2xubzpvLGxpbmVubzpzLGluX2FwcDpyP1gocik6dm9pZCAwfSl9KHQsZS5nZXQodC5sb2NhdGlvbi5zY3JpcHRJZCksaSkpKSx1PXNldFRpbWVvdXQoKCgpPT57Tm4oYykudGhlbihudWxsLCgoKT0+e3ZuKCJTZW5kaW5nIEFOUiBldmVudCBmYWlsZWQuIil9KSl9KSw1ZTMpO24ucG9zdCgiUnVudGltZS5ldmFsdWF0ZSIse2V4cHJlc3Npb246Imdsb2JhbC5fX1NFTlRSWV9HRVRfU0NPUEVTX18oKTsiLHNpbGVudDohMCxyZXR1cm5CeVZhbHVlOiEwfSwoKHQsZSk9Pnt0JiZ2bihgRXJyb3IgZXhlY3V0aW5nIHNjcmlwdDogJyR7dC5tZXNzYWdlfSdgKSxjbGVhclRpbWVvdXQodSk7Y29uc3Qgcj1lJiZlLnJlc3VsdD9lLnJlc3VsdC52YWx1ZTp2b2lkIDA7bi5wb3N0KCJEZWJ1Z2dlci5yZXN1bWUiKSxuLnBvc3QoIkRlYnVnZ2VyLmRpc2FibGUiKSxObihjLHIpLnRoZW4obnVsbCwoKCk9Pnt2bigiU2VuZGluZyBBTlIgZXZlbnQgZmFpbGVkLiIpfSkpfSkpfWNhdGNoKHQpe3Rocm93IG4ucG9zdCgiRGVidWdnZXIucmVzdW1lIiksbi5wb3N0KCJEZWJ1Z2dlci5kaXNhYmxlIiksdH19KSksa249KCk9Pnt0cnl7bi5wb3N0KCJEZWJ1Z2dlci5lbmFibGUiLCgoKT0+e24ucG9zdCgiRGVidWdnZXIucGF1c2UiKX0pKX1jYXRjaCh0KXt9fX1jb25zdHtwb2xsOkNufT1mdW5jdGlvbih0LG4sZSxyKXtjb25zdCBvPXQoKTtsZXQgcz0hMSxpPSEwO3JldHVybiBzZXRJbnRlcnZhbCgoKCk9Pntjb25zdCB0PW8uZ2V0VGltZU1zKCk7ITE9PT1zJiZ0Pm4rZSYmKHM9ITAsaSYmcigpKSx0PG4rZSYmKHM9ITEpfSksMjApLHtwb2xsOigpPT57by5yZXNldCgpfSxlbmFibGVkOnQ9PntpPXR9fX0oKGZ1bmN0aW9uKCl7bGV0IHQ9cHJvY2Vzcy5ocnRpbWUoKTtyZXR1cm57Z2V0VGltZU1zOigpPT57Y29uc3RbbixlXT1wcm9jZXNzLmhydGltZSh0KTtyZXR1cm4gTWF0aC5mbG9vcigxZTMqbitlLzFlNil9LHJlc2V0OigpPT57dD1wcm9jZXNzLmhydGltZSgpfX19KSx5bi5wb2xsSW50ZXJ2YWwseW4uYW5yVGhyZXNob2xkLChmdW5jdGlvbigpe3ZuKCJXYXRjaGRvZyB0aW1lb3V0Iiksa24/KHZuKCJQYXVzaW5nIGRlYnVnZ2VyIHRvIGNhcHR1cmUgc3RhY2sgdHJhY2UiKSxrbigpKToodm4oIkNhcHR1cmluZyBldmVudCB3aXRob3V0IGEgc3RhY2sgdHJhY2UiKSxObigpLnRoZW4obnVsbCwoKCk9Pnt2bigiU2VuZGluZyBBTlIgZXZlbnQgZmFpbGVkIG9uIHdhdGNoZG9nIHRpbWVvdXQuIil9KSkpfSkpO24/Lm9uKCJtZXNzYWdlIiwodD0+e3Quc2Vzc2lvbiYmKGduPWd0KHQuc2Vzc2lvbikpLENuKCl9KSk7";function l(e,...t){a.logger.log(`[ANR] ${e}`,...t)}function d(){const e=i.getGlobalScope().getScopeData();return i.mergeScopeData(e,i.getIsolationScope().getScopeData()),i.mergeScopeData(e,i.getCurrentScope().getScopeData()),e.attachments=[],e.eventProcessors=[],e}const p=i.defineIntegration(((e={})=>{if(c.NODE_VERSION.major<16||16===c.NODE_VERSION.major&&c.NODE_VERSION.minor<17)throw new Error("ANR detection requires Node 16.17.0 or later");let t,p;return a.GLOBAL_OBJ.__SENTRY_GET_SCOPES__=d,{name:"Anr",startWorker:()=>{t||p&&(t=async function(e,t){const c=e.getDsn();if(!c)return()=>{};const d=await async function(e){let t={message:"ANR"};const n={};for(const r of e.getEventProcessors()){if(null===t)break;t=await r(t,n)}return r([t,"optionalAccess",e=>e.contexts])||{}}(e);o([d,"access",e=>e.app,"optionalAccess",e=>delete e.app_memory]),o([d,"access",e=>e.device,"optionalAccess",e=>delete e.free_memory]);const p=e.getOptions(),h=e.getSdkMetadata()||{};h.sdk&&(h.sdk.integrations=p.integrations.map((e=>e.name)));const f={debug:a.logger.isEnabled(),dsn:c,tunnel:p.tunnel,environment:p.environment||"production",release:p.release,dist:p.dist,sdkMetadata:h,appRootPath:t.appRootPath,pollInterval:t.pollInterval||50,anrThreshold:t.anrThreshold||5e3,captureStackTrace:!!t.captureStackTrace,staticTags:t.staticTags||{},contexts:d};if(f.captureStackTrace){const e=await Promise.resolve().then(n.t.bind(n,86592,23));e.url()||e.open(0)}const m=new s.Worker(new URL(`data:application/javascript;base64,${u}`),{workerData:f,execArgv:[]});process.on("exit",(()=>{m.terminate()}));const g=setInterval((()=>{try{const e=i.getCurrentScope().getSession(),t=e?{...e,toJSON:void 0}:void 0;m.postMessage({session:t})}catch(e){}}),f.pollInterval);return g.unref(),m.on("message",(e=>{"session-ended"===e&&(l("ANR event sent from ANR worker. Clearing session in this thread."),i.getCurrentScope().setSession(void 0))})),m.once("error",(e=>{clearInterval(g),l("ANR worker error",e)})),m.once("exit",(e=>{clearInterval(g),l("ANR worker exit",e)})),m.unref(),()=>{m.terminate(),clearInterval(g)}}(p,e))},stopWorker:()=>{t&&t.then((e=>{e(),t=void 0}))},setup(e){p=e,setImmediate((()=>this.startWorker()))}}}));t.anrIntegration=p,t.base64WorkerScript=u},95022:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(57975),o=n(37872),s=n(24320),i=o.defineIntegration((()=>({name:"Console",setup(e){s.addConsoleInstrumentationHandler((({args:t,level:n})=>{o.getClient()===e&&o.addBreadcrumb({category:"console",level:s.severityLevelFromString(n),message:r.format.apply(void 0,t)},{input:[...t],level:n})}))}})));t.consoleIntegration=i},82660:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(31421),s=n(73024),i=n(48161),a=n(76760),c=n(57975),u=n(37872),l=c.promisify(s.readFile),d=c.promisify(s.readdir),p=u.defineIntegration(((e={})=>{let t;const n={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...e};return{name:"Context",processEvent:e=>async function(e){void 0===t&&(t=async function(){const e={};if(n.os&&(e.os=await async function(){const e=i.platform();switch(e){case"darwin":return async function(){const e={kernel_version:i.release(),name:"Mac OS X",version:"10."+(Number(i.release().split(".")[0])-4)};try{const t=await new Promise(((e,t)=>{o.execFile("/usr/bin/sw_vers",((n,r)=>{n?t(n):e(r)}))}));e.name=y(/^ProductName:\s+(.*)$/m,t),e.version=y(/^ProductVersion:\s+(.*)$/m,t),e.build=y(/^BuildVersion:\s+(.*)$/m,t)}catch(e){}return e}();case"linux":return async function(){const e={kernel_version:i.release(),name:"Linux"};try{const t=await d("/etc"),n=g.find((e=>t.includes(e.name)));if(!n)return e;const o=a.join("/etc",n.name),s=(await l(o,{encoding:"utf-8"})).toLowerCase(),{distros:i}=n;e.name=i.find((e=>s.indexOf(S(e))>=0))||i[0];const c=S(e.name);e.version=r([_,"access",e=>e[c],"optionalCall",e=>e(s)])}catch(e){}return e}();default:return{name:m[e]||e,version:i.release()}}}()),n.app&&(e.app=h()),n.device&&(e.device=f(n.device)),n.culture){const t=function(){try{if("string"!=typeof process.versions.icu)return;const e=new Date(9e8);if("enero"===new Intl.DateTimeFormat("es",{month:"long"}).format(e)){const e=Intl.DateTimeFormat().resolvedOptions();return{locale:e.locale,timezone:e.timeZone}}}catch(e){}}();t&&(e.culture=t)}return n.cloudResource&&(e.cloud_resource=process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0),e}());const s=function(e){if(r([e,"optionalAccess",e=>e.app,"optionalAccess",e=>e.app_memory])&&(e.app.app_memory=process.memoryUsage().rss),r([e,"optionalAccess",e=>e.app,"optionalAccess",e=>e.free_memory])&&"function"==typeof process.availableMemory){const t=r([process,"access",e=>e.availableMemory,"optionalCall",e=>e()]);null!=t&&(e.app.free_memory=t)}return r([e,"optionalAccess",e=>e.device,"optionalAccess",e=>e.free_memory])&&(e.device.free_memory=i.freemem()),e}(await t);return e.contexts={...e.contexts,app:{...s.app,...r([e,"access",e=>e.contexts,"optionalAccess",e=>e.app])},os:{...s.os,...r([e,"access",e=>e.contexts,"optionalAccess",e=>e.os])},device:{...s.device,...r([e,"access",e=>e.contexts,"optionalAccess",e=>e.device])},culture:{...s.culture,...r([e,"access",e=>e.contexts,"optionalAccess",e=>e.culture])},cloud_resource:{...s.cloud_resource,...r([e,"access",e=>e.contexts,"optionalAccess",e=>e.cloud_resource])}},e}(e)}}));function h(){const e=process.memoryUsage().rss,t={app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:e};if("function"==typeof process.availableMemory){const e=r([process,"access",e=>e.availableMemory,"optionalCall",e=>e()]);null!=e&&(t.free_memory=e)}return t}function f(e){const t={};let n;try{n=i.uptime&&i.uptime()}catch(e){}if("number"==typeof n&&(t.boot_time=new Date(Date.now()-1e3*n).toISOString()),t.arch=i.arch(),(!0===e||e.memory)&&(t.memory_size=i.totalmem(),t.free_memory=i.freemem()),!0===e||e.cpu){const e=i.cpus(),n=e&&e[0];n&&(t.processor_count=e.length,t.cpu_description=n.model,t.processor_frequency=n.speed)}return t}const m={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},g=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],_={alpine:e=>e,arch:e=>y(/distrib_release=(.*)/,e),centos:e=>y(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>y(/release (..)/,e),mint:e=>y(/distrib_release=(.*)/,e),red:e=>y(/release ([^ ]+)/,e),suse:e=>y(/VERSION = (.*)\n/,e),ubuntu:e=>y(/distrib_release=(.*)/,e)};function y(e,t){const n=e.exec(t);return n?n[1]:void 0}function S(e){return e.split(" ")[0].toLowerCase()}t.getAppContext=h,t.getDeviceContext=f,t.nodeContextIntegration=p,t.readDirAsync=d,t.readFileAsync=l},8421:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(73024),s=n(80481),i=n(37872),a=n(24320),c=n(13169),u=new a.LRUMap(10),l=new a.LRUMap(20);function d(e,t,n){const r=e.get(t);return void 0===r?(e.set(t,n),n):r}function p(e){return void 0!==e.lineno&&e.lineno>1e4||void 0!==e.colno&&e.colno>1e3}function h(e,t){const n=u.get(e);if(void 0===n)return!1;for(let e=t[0];e<=t[1];e++)if(void 0===n[e])return!1;return!0}function f(e,t){if(!e.length)return[];let n=0;const r=e[0];if("number"!=typeof r)return[];let o=E(r,t);const s=[];for(;;){if(n===e.length-1){s.push(o);break}const r=e[n+1];if("number"!=typeof r)break;r<=o[1]?o[1]=r+t:(s.push(o),o=E(r,t)),n++}return s}function m(e,t,n){return new Promise(((r,i)=>{const u=o.createReadStream(e),d=s.createInterface({input:u});let p=0,h=0;const f=t[h];if(void 0===f)return void r();let m=f[0],g=f[1];function _(t){l.set(e,1),c.DEBUG_BUILD&&a.logger.error(`Failed to read file: ${e}. Error: ${t}`),d.close(),d.removeAllListeners(),r()}u.on("error",_),d.on("error",_),d.on("close",r),d.on("line",(e=>{if(p++,!(p<m)&&(n[p]=a.snipLine(e,0),p>=g)){if(h===t.length-1)return d.close(),void d.removeAllListeners();h++;const e=t[h];if(void 0===e)return d.close(),void d.removeAllListeners();m=e[0],g=e[1]}}))}))}function g(e,t,n){for(const r of e)if(r.filename&&void 0===r.context_line&&"number"==typeof r.lineno){const e=n.get(r.filename);if(void 0===e)continue;y(r.lineno,r,t,e)}}function _(e){delete e.pre_context,delete e.context_line,delete e.post_context}function y(e,t,n,r){if(void 0===t.lineno||void 0===r)return void(c.DEBUG_BUILD&&a.logger.error("Cannot resolve context for frame with no lineno or file contents"));t.pre_context=[];for(let o=S(e,n);o<e;o++){const e=r[o];if(void 0===e)return _(t),void(c.DEBUG_BUILD&&a.logger.error(`Could not find line ${o} in file ${t.filename}`));t.pre_context.push(e)}if(void 0===r[e])return _(t),void(c.DEBUG_BUILD&&a.logger.error(`Could not find line ${e} in file ${t.filename}`));t.context_line=r[e];const o=b(e,n);t.post_context=[];for(let n=e+1;n<=o;n++){const e=r[n];if(void 0===e)break;t.post_context.push(e)}}function S(e,t){return Math.max(1,e-t)}function b(e,t){return e+t}function E(e,t){return[S(e,t),b(e,t)]}const v=(e={})=>{const t=void 0!==e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>async function(e,t){const n={};if(t>0&&r([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const t of e.exception.values)if(r([t,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e.length]))for(let e=t.stacktrace.frames.length-1;e>=0;e--){const s=t.stacktrace.frames[e],i=r([s,"optionalAccess",e=>e.filename]);!s||"string"!=typeof i||"number"!=typeof s.lineno||(o=i).startsWith("node:")||o.endsWith(".min.js")||o.endsWith(".min.cjs")||o.endsWith(".min.mjs")||o.startsWith("data:")||p(s)||(n[i]||(n[i]=[]),n[i].push(s.lineno))}var o;const s=Object.keys(n);if(0==s.length)return e;const i=[];for(const e of s){if(l.get(e))continue;const r=n[e];if(!r)continue;r.sort(((e,t)=>e-t));const o=f(r,t);if(o.every((t=>h(e,t))))continue;const s=d(u,e,{});i.push(m(e,o,s))}if(await Promise.all(i).catch((()=>{c.DEBUG_BUILD&&a.logger.log("Failed to read one or more source files and resolve context lines")})),t>0&&r([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const n of e.exception.values)n.stacktrace&&n.stacktrace.frames&&n.stacktrace.frames.length>0&&g(n.stacktrace.frames,t,u);return e}(e,t)}},T=i.defineIntegration(v);t.MAX_CONTEXTLINES_COLNO=1e3,t.MAX_CONTEXTLINES_LINENO=1e4,t._contextLinesIntegration=v,t.addContextToFrame=y,t.contextLinesIntegration=T},69195:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(86520),s=n(32858),i=n(37872),a=n(24320),c=n(74764),u=n(64061),l=n(1247),d="Http";let p,h={};const f=Object.assign((function(){if(p)return;const e=h._instrumentation||o.HttpInstrumentation;p=new e({...r([h,"access",e=>e.instrumentation,"optionalAccess",e=>e._experimentalConfig]),ignoreOutgoingRequestHook:e=>{const t=l.getRequestUrl(e);if(!t)return!1;if(i.isSentryRequestUrl(t,s.getClient()))return!0;const n=h.ignoreOutgoingRequests;return!(!n||!n(t,e))},ignoreIncomingRequestHook:e=>{const t=e.url,n=r([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()]);if("OPTIONS"===n||"HEAD"===n)return!0;const o=h.ignoreIncomingRequests;return!!(t&&o&&o(t,e))},requireParentforOutgoingSpans:!1,requireParentforIncomingSpans:!1,requestHook:(e,t)=>{if(u.addOriginToSpan(e,"auto.http.otel.http"),g(t))return void r([h,"access",e=>e.instrumentation,"optionalAccess",e=>e.requestHook,"optionalCall",n=>n(e,t)]);const n=i.getCapturedScopesOnSpan(e),o=(n.isolationScope||i.getIsolationScope()).clone(),l=n.scope||i.getCurrentScope();o.setSDKProcessingMetadata({request:t});const d=s.getClient();d&&d.getOptions().autoSessionTracking&&o.setRequestSession({status:"ok"}),c.setIsolationScope(o),i.setCapturedScopesOnSpan(e,l,o);const p=`${(t.method||"GET").toUpperCase()} ${a.stripUrlQueryAndFragment(t.url||"/")}`;o.setTransactionName(p),r([h,"access",e=>e.instrumentation,"optionalAccess",e=>e.requestHook,"optionalCall",n=>n(e,t)])},responseHook:(e,t)=>{const n=s.getClient();n&&n.getOptions().autoSessionTracking&&setImmediate((()=>{n._captureRequestSession()})),r([h,"access",e=>e.instrumentation,"optionalAccess",e=>e.responseHook,"optionalCall",n=>n(e,t)])},applyCustomAttributesOnSpan:(e,t,n)=>{(void 0===h.breadcrumbs||h.breadcrumbs)&&function(e,t){if(!g(e))return;const n=function(e){try{const t=e.getHeader("host")||e.host,n=new URL(e.path,`${e.protocol}//${t}`),r=a.parseUrl(n.toString()),o={url:a.getSanitizedUrlString(r),"http.method":e.method||"GET"};return r.search&&(o["http.query"]=r.search),r.hash&&(o["http.fragment"]=r.hash),o}catch(e){return{}}}(e);i.addBreadcrumb({category:"http",data:{status_code:t.statusCode,...n},type:"http"},{event:"response",request:e,response:t})}(t,n),r([h,"access",e=>e.instrumentation,"optionalAccess",e=>e.applyCustomAttributesOnSpan,"optionalCall",r=>r(e,t,n)])}}),s.addOpenTelemetryInstrumentation(p)}),{id:d}),m=i.defineIntegration(((e={})=>({name:d,setupOnce(){h=e,f()}})));function g(e){return"outputData"in e&&"outputSize"in e&&!("client"in e)&&!("statusCode"in e)}t.httpIntegration=m,t.instrumentHttp=f},77518:(e,t)=>{function n(e){return void 0!==e&&(0===e.length||"?"===e||"<anonymous>"===e)}function r(e){if(void 0!==e)return e.slice(-10).reduce(((e,t)=>`${e},${t.function},${t.lineno},${t.colno}`),"")}Object.defineProperty(t,"__esModule",{value:!0}),t.createRateLimiter=function(e,t,n){let r=0,o=5,s=0;return setInterval((()=>{0===s?r>e&&(o*=2,n(o),o>86400&&(o=86400),s=o):(s-=1,0===s&&t()),r=0}),1e3).unref(),()=>{r+=1}},t.functionNamesMatch=function(e,t){return e===t||n(e)&&n(t)},t.hashFrames=r,t.hashFromStack=function(e,t){if(void 0!==t)return r(e(t,1))},t.isAnonymous=n},85055:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(51055),o=n(2649),s=n(55842);t.localVariablesIntegration=(e={})=>r.NODE_VERSION.major<19?s.localVariablesSyncIntegration(e):o.localVariablesAsyncIntegration(e)},2649:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(75919),s=n(37872),i=n(24320),a=n(77518),c="LyohIEBzZW50cnkvbm9kZSA4LjI1LjAgKGVmYWRiZjIpIHwgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdCAqLwppbXBvcnR7U2Vzc2lvbiBhcyBlfWZyb20ibm9kZTppbnNwZWN0b3IvcHJvbWlzZXMiO2ltcG9ydHt3b3JrZXJEYXRhIGFzIG4scGFyZW50UG9ydCBhcyB0fWZyb20ibm9kZTp3b3JrZXJfdGhyZWFkcyI7aW1wb3J0e3Bvc2l4IGFzIG8sc2VwIGFzIHJ9ZnJvbSJub2RlOnBhdGgiO2NvbnN0IGk9NTAscz0iPyIsYz0vXChlcnJvcjogKC4qKVwpLyxhPS9jYXB0dXJlTWVzc2FnZXxjYXB0dXJlRXhjZXB0aW9uLztmdW5jdGlvbiB1KGUpe3JldHVybiBlW2UubGVuZ3RoLTFdfHx7fX1jb25zdCBmPS9eKFxTKzpcXHxcLz8pKFtcc1xTXSo/KSgoPzpcLnsxLDJ9fFteL1xcXSs/fCkoXC5bXi4vXFxdKnwpKSg/OlsvXFxdKikkLztmdW5jdGlvbiBsKGUpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3Qgbj1lLmxlbmd0aD4xMDI0P2A8dHJ1bmNhdGVkPiR7ZS5zbGljZSgtMTAyNCl9YDplLHQ9Zi5leGVjKG4pO3JldHVybiB0P3Quc2xpY2UoMSk6W119KGUpLHQ9blswXXx8IiI7bGV0IG89blsxXTtyZXR1cm4gdHx8bz8obyYmKG89by5zbGljZSgwLG8ubGVuZ3RoLTEpKSx0K28pOiIuIn1mdW5jdGlvbiBkKGUsbj0hMSl7cmV0dXJuIShufHxlJiYhZS5zdGFydHNXaXRoKCIvIikmJiFlLm1hdGNoKC9eW0EtWl06LykmJiFlLnN0YXJ0c1dpdGgoIi4iKSYmIWUubWF0Y2goL15bYS16QS1aXShbYS16QS1aMC05LlwtK10pKjpcL1wvLykpJiZ2b2lkIDAhPT1lJiYhZS5pbmNsdWRlcygibm9kZV9tb2R1bGVzLyIpfWZ1bmN0aW9uIHAoZSl7Y29uc3Qgbj0vXlxzKlstXXs0LH0kLyx0PS9hdCAoPzphc3luYyApPyg/OiguKz8pXHMrXCgpPyg/OiguKyk6KFxkKyk6KFxkKyk/fChbXildKykpXCk/LztyZXR1cm4gbz0+e2NvbnN0IHI9by5tYXRjaCh0KTtpZihyKXtsZXQgbix0LG8saSxjO2lmKHJbMV0pe289clsxXTtsZXQgZT1vLmxhc3RJbmRleE9mKCIuIik7aWYoIi4iPT09b1tlLTFdJiZlLS0sZT4wKXtuPW8uc2xpY2UoMCxlKSx0PW8uc2xpY2UoZSsxKTtjb25zdCByPW4uaW5kZXhPZigiLk1vZHVsZSIpO3I+MCYmKG89by5zbGljZShyKzEpLG49bi5zbGljZSgwLHIpKX1pPXZvaWQgMH10JiYoaT1uLGM9dCksIjxhbm9ueW1vdXM+Ij09PXQmJihjPXZvaWQgMCxvPXZvaWQgMCksdm9pZCAwPT09byYmKGM9Y3x8cyxvPWk/YCR7aX0uJHtjfWA6Yyk7bGV0IGE9clsyXSYmclsyXS5zdGFydHNXaXRoKCJmaWxlOi8vIik/clsyXS5zbGljZSg3KTpyWzJdO2NvbnN0IHU9Im5hdGl2ZSI9PT1yWzVdO3JldHVybiBhJiZhLm1hdGNoKC9cL1tBLVpdOi8pJiYoYT1hLnNsaWNlKDEpKSxhfHwhcls1XXx8dXx8KGE9cls1XSkse2ZpbGVuYW1lOmEsbW9kdWxlOmU/ZShhKTp2b2lkIDAsZnVuY3Rpb246byxsaW5lbm86ZyhyWzNdKSxjb2xubzpnKHJbNF0pLGluX2FwcDpkKGF8fCIiLHUpfX1pZihvLm1hdGNoKG4pKXJldHVybntmaWxlbmFtZTpvfX19ZnVuY3Rpb24gZyhlKXtyZXR1cm4gcGFyc2VJbnQoZXx8IiIsMTApfHx2b2lkIDB9ZnVuY3Rpb24gbShlKXtyZXR1cm4gZS5yZXBsYWNlKC9eW0EtWl06LywiIikucmVwbGFjZSgvXFwvZywiLyIpfWNvbnN0IGI9biwkPWZ1bmN0aW9uKC4uLmUpe2NvbnN0IG49ZS5zb3J0KCgoZSxuKT0+ZVswXS1uWzBdKSkubWFwKChlPT5lWzFdKSk7cmV0dXJuKGUsdD0wLG89MCk9Pntjb25zdCByPVtdLGY9ZS5zcGxpdCgiXG4iKTtmb3IobGV0IGU9dDtlPGYubGVuZ3RoO2UrKyl7Y29uc3QgdD1mW2VdO2lmKHQubGVuZ3RoPjEwMjQpY29udGludWU7Y29uc3Qgcz1jLnRlc3QodCk/dC5yZXBsYWNlKGMsIiQxIik6dDtpZighcy5tYXRjaCgvXFMqRXJyb3I6IC8pKXtmb3IoY29uc3QgZSBvZiBuKXtjb25zdCBuPWUocyk7aWYobil7ci5wdXNoKG4pO2JyZWFrfX1pZihyLmxlbmd0aD49aStvKWJyZWFrfX1yZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWUubGVuZ3RoKXJldHVybltdO2NvbnN0IG49QXJyYXkuZnJvbShlKTsvc2VudHJ5V3JhcHBlZC8udGVzdCh1KG4pLmZ1bmN0aW9ufHwiIikmJm4ucG9wKCk7bi5yZXZlcnNlKCksYS50ZXN0KHUobikuZnVuY3Rpb258fCIiKSYmKG4ucG9wKCksYS50ZXN0KHUobikuZnVuY3Rpb258fCIiKSYmbi5wb3AoKSk7cmV0dXJuIG4uc2xpY2UoMCxpKS5tYXAoKGU9Pih7Li4uZSxmaWxlbmFtZTplLmZpbGVuYW1lfHx1KG4pLmZpbGVuYW1lLGZ1bmN0aW9uOmUuZnVuY3Rpb258fHN9KSkpfShyLnNsaWNlKG8pKX19KFs5MCxwKGZ1bmN0aW9uKGU9KHByb2Nlc3MuYXJndlsxXT9sKHByb2Nlc3MuYXJndlsxXSk6cHJvY2Vzcy5jd2QoKSksbj0iXFwiPT09cil7Y29uc3QgdD1uP20oZSk6ZTtyZXR1cm4gZT0+e2lmKCFlKXJldHVybjtjb25zdCByPW4/bShlKTplO2xldHtkaXI6aSxiYXNlOnMsZXh0OmN9PW8ucGFyc2Uocik7Ii5qcyIhPT1jJiYiLm1qcyIhPT1jJiYiLmNqcyIhPT1jfHwocz1zLnNsaWNlKDAsLTEqYy5sZW5ndGgpKSxpfHwoaT0iLiIpO2NvbnN0IGE9aS5sYXN0SW5kZXhPZigiL25vZGVfbW9kdWxlcyIpO2lmKGE+LTEpcmV0dXJuYCR7aS5zbGljZShhKzE0KS5yZXBsYWNlKC9cLy9nLCIuIil9OiR7c31gO2lmKGkuc3RhcnRzV2l0aCh0KSl7bGV0IGU9aS5zbGljZSh0Lmxlbmd0aCsxKS5yZXBsYWNlKC9cLy9nLCIuIik7cmV0dXJuIGUmJihlKz0iOiIpLGUrPXMsZX1yZXR1cm4gc319KGIuYmFzZVBhdGgpKV0pO2Z1bmN0aW9uIHYoLi4uZSl7Yi5kZWJ1ZyYmY29uc29sZS5sb2coIltMb2NhbFZhcmlhYmxlcyBXb3JrZXJdIiwuLi5lKX1hc3luYyBmdW5jdGlvbiB3KGUsbix0LG8pe2NvbnN0IHI9YXdhaXQgZS5wb3N0KCJSdW50aW1lLmdldFByb3BlcnRpZXMiLHtvYmplY3RJZDpuLG93blByb3BlcnRpZXM6ITB9KTtvW3RdPXIucmVzdWx0LmZpbHRlcigoZT0+Imxlbmd0aCIhPT1lLm5hbWUmJiFpc05hTihwYXJzZUludChlLm5hbWUsMTApKSkpLnNvcnQoKChlLG4pPT5wYXJzZUludChlLm5hbWUsMTApLXBhcnNlSW50KG4ubmFtZSwxMCkpKS5tYXAoKGU9PmUudmFsdWU/LnZhbHVlKSl9YXN5bmMgZnVuY3Rpb24geShlLG4sdCxvKXtjb25zdCByPWF3YWl0IGUucG9zdCgiUnVudGltZS5nZXRQcm9wZXJ0aWVzIix7b2JqZWN0SWQ6bixvd25Qcm9wZXJ0aWVzOiEwfSk7b1t0XT1yLnJlc3VsdC5tYXAoKGU9PltlLm5hbWUsZS52YWx1ZT8udmFsdWVdKSkucmVkdWNlKCgoZSxbbix0XSk9PihlW25dPXQsZSkpLHt9KX1mdW5jdGlvbiBoKGUsbil7ZS52YWx1ZSYmKCJ2YWx1ZSJpbiBlLnZhbHVlP3ZvaWQgMD09PWUudmFsdWUudmFsdWV8fG51bGw9PT1lLnZhbHVlLnZhbHVlP25bZS5uYW1lXT1gPCR7ZS52YWx1ZS52YWx1ZX0+YDpuW2UubmFtZV09ZS52YWx1ZS52YWx1ZToiZGVzY3JpcHRpb24iaW4gZS52YWx1ZSYmImZ1bmN0aW9uIiE9PWUudmFsdWUudHlwZT9uW2UubmFtZV09YDwke2UudmFsdWUuZGVzY3JpcHRpb259PmA6InVuZGVmaW5lZCI9PT1lLnZhbHVlLnR5cGUmJihuW2UubmFtZV09Ijx1bmRlZmluZWQ+IikpfWFzeW5jIGZ1bmN0aW9uIFAoZSxuKXtjb25zdCB0PWF3YWl0IGUucG9zdCgiUnVudGltZS5nZXRQcm9wZXJ0aWVzIix7b2JqZWN0SWQ6bixvd25Qcm9wZXJ0aWVzOiEwfSksbz17fTtmb3IoY29uc3QgbiBvZiB0LnJlc3VsdClpZihuPy52YWx1ZT8ub2JqZWN0SWQmJiJBcnJheSI9PT1uPy52YWx1ZS5jbGFzc05hbWUpe2NvbnN0IHQ9bi52YWx1ZS5vYmplY3RJZDthd2FpdCB3KGUsdCxuLm5hbWUsbyl9ZWxzZSBpZihuPy52YWx1ZT8ub2JqZWN0SWQmJiJPYmplY3QiPT09bj8udmFsdWU/LmNsYXNzTmFtZSl7Y29uc3QgdD1uLnZhbHVlLm9iamVjdElkO2F3YWl0IHkoZSx0LG4ubmFtZSxvKX1lbHNlIG4/LnZhbHVlJiZoKG4sbyk7cmV0dXJuIG99bGV0IHg7KGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3Qgbj1uZXcgZTtuLmNvbm5lY3RUb01haW5UaHJlYWQoKSx2KCJDb25uZWN0ZWQgdG8gbWFpbiB0aHJlYWQiKTtsZXQgbz0hMTtuLm9uKCJEZWJ1Z2dlci5yZXN1bWVkIiwoKCk9PntvPSExfSkpLG4ub24oIkRlYnVnZ2VyLnBhdXNlZCIsKGU9PntvPSEwLGFzeW5jIGZ1bmN0aW9uKGUsbix7cmVhc29uOm8sZGF0YTpyLGNhbGxGcmFtZXM6aX0pe2lmKCJleGNlcHRpb24iIT09byYmInByb21pc2VSZWplY3Rpb24iIT09bylyZXR1cm47eD8uKCk7Y29uc3Qgcz1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PW4pcmV0dXJuIGZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUpcmV0dXJuIGUuc2xpY2UoLTEwKS5yZWR1Y2UoKChlLG4pPT5gJHtlfSwke24uZnVuY3Rpb259LCR7bi5saW5lbm99LCR7bi5jb2xub31gKSwiIil9KGUobiwxKSl9KG4scj8uZGVzY3JpcHRpb24pO2lmKG51bGw9PXMpcmV0dXJuO2NvbnN0IGM9W107Zm9yKGxldCBuPTA7bjxpLmxlbmd0aDtuKyspe2NvbnN0e3Njb3BlQ2hhaW46dCxmdW5jdGlvbk5hbWU6byx0aGlzOnJ9PWlbbl0scz10LmZpbmQoKGU9PiJsb2NhbCI9PT1lLnR5cGUpKSxhPSJnbG9iYWwiIT09ci5jbGFzc05hbWUmJnIuY2xhc3NOYW1lP2Ake3IuY2xhc3NOYW1lfS4ke299YDpvO2lmKHZvaWQgMD09PXM/Lm9iamVjdC5vYmplY3RJZCljW25dPXtmdW5jdGlvbjphfTtlbHNle2NvbnN0IHQ9YXdhaXQgUChlLHMub2JqZWN0Lm9iamVjdElkKTtjW25dPXtmdW5jdGlvbjphLHZhcnM6dH19fXQ/LnBvc3RNZXNzYWdlKHtleGNlcHRpb25IYXNoOnMsZnJhbWVzOmN9KX0obiwkLGUucGFyYW1zKS50aGVuKCgoKT0+bz9uLnBvc3QoIkRlYnVnZ2VyLnJlc3VtZSIpOlByb21pc2UucmVzb2x2ZSgpKSwoZT0+e30pKX0pKSxhd2FpdCBuLnBvc3QoIkRlYnVnZ2VyLmVuYWJsZSIpO2NvbnN0IHI9ITEhPT1iLmNhcHR1cmVBbGxFeGNlcHRpb25zO2lmKGF3YWl0IG4ucG9zdCgiRGVidWdnZXIuc2V0UGF1c2VPbkV4Y2VwdGlvbnMiLHtzdGF0ZTpyPyJhbGwiOiJ1bmNhdWdodCJ9KSxyKXtjb25zdCBlPWIubWF4RXhjZXB0aW9uc1BlclNlY29uZHx8NTA7eD1mdW5jdGlvbihlLG4sdCl7bGV0IG89MCxyPTUsaT0wO3JldHVybiBzZXRJbnRlcnZhbCgoKCk9PnswPT09aT9vPmUmJihyKj0yLHQocikscj44NjQwMCYmKHI9ODY0MDApLGk9cik6KGktPTEsMD09PWkmJm4oKSksbz0wfSksMWUzKS51bnJlZigpLCgpPT57bys9MX19KGUsKGFzeW5jKCk9Pnt2KCJSYXRlLWxpbWl0IGxpZnRlZC4iKSxhd2FpdCBuLnBvc3QoIkRlYnVnZ2VyLnNldFBhdXNlT25FeGNlcHRpb25zIix7c3RhdGU6ImFsbCJ9KX0pLChhc3luYyBlPT57dihgUmF0ZS1saW1pdCBleGNlZWRlZC4gRGlzYWJsaW5nIGNhcHR1cmluZyBvZiBjYXVnaHQgZXhjZXB0aW9ucyBmb3IgJHtlfSBzZWNvbmRzLmApLGF3YWl0IG4ucG9zdCgiRGVidWdnZXIuc2V0UGF1c2VPbkV4Y2VwdGlvbnMiLHtzdGF0ZToidW5jYXVnaHQifSl9KSl9fSkoKS5jYXRjaCgoZT0+e3YoIkZhaWxlZCB0byBzdGFydCBkZWJ1Z2dlciIsZSl9KSksc2V0SW50ZXJ2YWwoKCgpPT57fSksMWU0KTs=";function u(...e){i.logger.log("[LocalVariables]",...e)}const l=s.defineIntegration(((e={})=>{const t=new i.LRUMap(20);function s(e){const n=a.hashFrames(r([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames]));if(void 0===n)return;const o=t.remove(n);if(void 0===o)return;const s=(r([e,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames])||[]).filter((e=>"new Promise"!==e.function));for(let e=0;e<s.length;e++){const t=s.length-e-1,n=o[e],r=s[t];if(!r||!n)break;void 0!==n.vars&&!1!==r.in_app&&a.functionNamesMatch(r.function,n.function)&&(r.vars=n.vars)}}return{name:"LocalVariablesAsync",setup(r){if(!r.getOptions().includeLocalVariables)return;const s={...e,debug:i.logger.isEnabled()};(async function(){const e=await Promise.resolve().then(n.t.bind(n,86592,23));e.url()||e.open(0)})().then((()=>{try{!function(e){const n=new o.Worker(new URL(`data:application/javascript;base64,${c}`),{workerData:e,execArgv:[]});process.on("exit",(()=>{n.terminate()})),n.on("message",(({exceptionHash:e,frames:n})=>{t.set(e,n)})),n.once("error",(e=>{u("Worker error",e)})),n.once("exit",(e=>{u("Worker exit",e)})),n.unref()}(s)}catch(e){i.logger.error("Failed to start worker",e)}}),(e=>{i.logger.error("Failed to start inspector",e)}))},processEvent:e=>function(e){for(const t of r([e,"access",e=>e.exception,"optionalAccess",e=>e.values])||[])s(t);return e}(e)}}));t.base64WorkerScript=c,t.localVariablesAsyncIntegration=l},55842:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(37872),s=n(24320),i=n(51055),a=n(77518);function c(e){let t=[],n=!1;function r(r){t=[],n||(n=!0,e(r))}return t.push(r),{add:function(e){t.push(e)},next:function(e){const n=t.pop()||r;try{n(e)}catch(t){r(e)}}}}class u{constructor(e){this._session=e}static async create(e){if(e)return e;const t=await Promise.resolve().then(n.t.bind(n,86592,23));return new u(new t.Session)}configureAndConnect(e,t){this._session.connect(),this._session.on("Debugger.paused",(t=>{e(t,(()=>{this._session.post("Debugger.resume")}))})),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}setPauseOnExceptions(e){this._session.post("Debugger.setPauseOnExceptions",{state:e?"all":"uncaught"})}getLocalVariables(e,t){this._getProperties(e,(e=>{const{add:n,next:o}=c(t);for(const t of e)if(r([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Array"===r([t,"optionalAccess",e=>e.value,"access",e=>e.className])){const e=t.value.objectId;n((n=>this._unrollArray(e,t.name,n,o)))}else if(r([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Object"===r([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.className])){const e=t.value.objectId;n((n=>this._unrollObject(e,t.name,n,o)))}else r([t,"optionalAccess",e=>e.value])&&n((e=>this._unrollOther(t,e,o)));o({})}))}_getProperties(e,t){this._session.post("Runtime.getProperties",{objectId:e,ownProperties:!0},((e,n)=>{t(e?[]:n.result)}))}_unrollArray(e,t,n,o){this._getProperties(e,(e=>{n[t]=e.filter((e=>"length"!==e.name&&!isNaN(parseInt(e.name,10)))).sort(((e,t)=>parseInt(e.name,10)-parseInt(t.name,10))).map((e=>r([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value]))),o(n)}))}_unrollObject(e,t,n,o){this._getProperties(e,(e=>{n[t]=e.map((e=>[e.name,r([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])])).reduce(((e,[t,n])=>(e[t]=n,e)),{}),o(n)}))}_unrollOther(e,t,n){e.value&&("value"in e.value?void 0===e.value.value||null===e.value.value?t[e.name]=`<${e.value.value}>`:t[e.name]=e.value.value:"description"in e.value&&"function"!==e.value.type?t[e.name]=`<${e.value.description}>`:"undefined"===e.value.type&&(t[e.name]="<undefined>")),n(t)}}const l=o.defineIntegration(((e={},t)=>{const n=new s.LRUMap(20);let l,d=!1;function p(e){const t=a.hashFrames(r([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames]));if(void 0===t)return;const o=n.remove(t);if(void 0===o)return;const s=(r([e,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames])||[]).filter((e=>"new Promise"!==e.function));for(let e=0;e<s.length;e++){const t=s.length-e-1,n=o[e],r=s[t];if(!r||!n)break;void 0!==n.vars&&!1!==r.in_app&&a.functionNamesMatch(r.function,n.function)&&(r.vars=n.vars)}}return{name:"LocalVariables",setupOnce(){const p=o.getClient(),h=r([p,"optionalAccess",e=>e.getOptions,"call",e=>e()]);r([h,"optionalAccess",e=>e.includeLocalVariables])&&(i.NODE_MAJOR<18?s.logger.log("The `LocalVariables` integration is only supported on Node >= v18."):u.create(t).then((t=>{const o=!1!==e.captureAllExceptions;if(t.configureAndConnect(((e,o)=>function(e,{params:{reason:o,data:s,callFrames:i}},u){if("exception"!==o&&"promiseRejection"!==o)return void u();r([l,"optionalCall",e=>e()]);const d=a.hashFromStack(e,r([s,"optionalAccess",e=>e.description]));if(null==d)return void u();const{add:p,next:h}=c((e=>{n.set(d,e),u()}));for(let e=0;e<Math.min(i.length,5);e++){const{scopeChain:n,functionName:o,this:s}=i[e],a=n.find((e=>"local"===e.type)),c="global"!==s.className&&s.className?`${s.className}.${o}`:o;if(void 0===r([a,"optionalAccess",e=>e.object,"access",e=>e.objectId]))p((t=>{t[e]={function:c},h(t)}));else{const n=a.object.objectId;p((o=>r([t,"optionalAccess",e=>e.getLocalVariables,"call",t=>t(n,(t=>{o[e]={function:c,vars:t},h(o)}))])))}}h([])}(h.stackParser,e,o)),o),o){const n=e.maxExceptionsPerSecond||50;l=a.createRateLimiter(n,(()=>{s.logger.log("Local variables rate-limit lifted."),r([t,"optionalAccess",e=>e.setPauseOnExceptions,"call",e=>e(!0)])}),(e=>{s.logger.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${e} seconds.`),r([t,"optionalAccess",e=>e.setPauseOnExceptions,"call",e=>e(!1)])}))}d=!0}),(e=>{s.logger.log("The `LocalVariables` integration failed to start.",e)})))},processEvent:e=>d?function(e){for(const t of r([e,"optionalAccess",e=>e.exception,"optionalAccess",e=>e.values])||[])p(t);return e}(e):e,_getCachedFramesCount:()=>n.size,_getFirstCachedFrame:()=>n.values()[0]}}));t.createCallbackList=c,t.localVariablesSyncIntegration=l},9558:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(73024),o=n(76760);let s;const i=n(37872).defineIntegration((()=>({name:"Modules",processEvent:e=>(e.modules={...e.modules,...(s||(s=a()),s)},e)})));function a(){const e=n.c[n.s]&&n.c[n.s].paths||[],t=function(){try{return n.c?Object.keys(n.c):[]}catch(e){return[]}}(),s={},i={};return t.forEach((t=>{let n=t;const a=()=>{const t=n;if(n=o.dirname(t),!n||t===n||i[t])return;if(e.indexOf(n)<0)return a();const c=o.join(t,"package.json");if(i[t]=!0,!r.existsSync(c))return a();try{const e=JSON.parse(r.readFileSync(c,"utf8"));s[e.name]=e.version}catch(e){}};a()})),s}t.modulesIntegration=i},76474:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(74681),s=n(37872),i=n(32858),a=n(24320),c=n(13169),u=n(51055),l=n(64061),d=s.defineIntegration(((e={})=>{const t=void 0===e.breadcrumbs||e.breadcrumbs,d=e.ignoreOutgoingRequests;return{name:"NodeFetch",setupOnce(){(async function(){if(u.NODE_MAJOR<18)c.DEBUG_BUILD&&a.logger.log("NodeFetch is not supported on Node < 18, skipping instrumentation...");else try{const e=await n.e(74).then(n.t.bind(n,35074,23)),{FetchInstrumentation:c}=e;class u extends c{onHeaders({request:e,response:n}){return t&&function(e,t){const n=function(e){try{const t=new URL(e.path,e.origin),n=a.parseUrl(t.toString()),r={url:a.getSanitizedUrlString(n),"http.method":e.method||"GET"};return n.search&&(r["http.query"]=n.search),n.hash&&(r["http.fragment"]=n.hash),r}catch(e){return{}}}(e);s.addBreadcrumb({category:"http",data:{status_code:t.statusCode,...n},type:"http"},{event:"response",request:e,response:t})}(e,n),super.onHeaders({request:e,response:n})}}return new u({ignoreRequestHook:e=>{const t=function(e,t="/"){const n=`${e}`;return e.endsWith("/")&&t.startsWith("/")?`${n}${t.slice(1)}`:e.endsWith("/")||t.startsWith("/")?`${n}${t}`:`${n}/${t.slice(1)}`}(e.origin,e.path),n=!s.hasTracingEnabled();if(d&&t&&d(t))return!0;if(n){const n=o.context.active(),a={},c=o.trace.getSpan(n),u=c?i.getPropagationContextFromSpan(c):s.getCurrentScope().getPropagationContext(),l=i.generateSpanContextForPropagationContext(u);l.traceState=r([l,"access",e=>e.traceState,"optionalAccess",e=>e.set,"call",e=>e("sentry.url",t)]);const d=o.trace.setSpanContext(n,l);o.propagation.inject(d,a);const p=e.headers;return Array.isArray(p)?Object.entries(a).forEach((e=>p.push(...e))):e.headers+=Object.entries(a).map((([e,t])=>`${e}: ${t}\r\n`)).join(""),!0}return!1},onRequest:({span:e})=>{!function(e){l.addOriginToSpan(e,"auto.http.otel.node_fetch")}(e)}})}catch(e){c.DEBUG_BUILD&&a.logger.log("Error while loading NodeFetch instrumentation: \n",e)}})().then((e=>{e&&i.addOpenTelemetryInstrumentation(e)}))}}}));t.nativeNodeFetchIntegration=d},82644:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872),o=n(24320),s=n(13169),i=n(96450),a=r.defineIntegration(((e={})=>{const t={exitEvenIfOtherHandlersAreRegistered:!1,...e};return{name:"OnUncaughtException",setup(e){global.process.on("uncaughtException",c(e,t))}}}));function c(e,t){let n,a=!1,c=!1,u=!1;const l=e.getOptions();return Object.assign((d=>{let p=i.logAndExitProcess;t.onFatalError?p=t.onFatalError:l.onFatalError&&(p=l.onFatalError);const h=0===global.process.listeners("uncaughtException").filter((e=>"domainUncaughtExceptionClear"!==e.name&&"sentry_tracingErrorCallback"!==e.tag&&!0!==e._errorHandler)).length,f=t.exitEvenIfOtherHandlersAreRegistered||h;a?f&&(u?(s.DEBUG_BUILD&&o.logger.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),i.logAndExitProcess(d)):c||(c=!0,setTimeout((()=>{u||(u=!0,p(n,d))}),2e3))):(n=d,a=!0,r.getClient()===e&&r.captureException(d,{originalException:d,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"onuncaughtexception"}}),!u&&f&&(u=!0,p(d)))}),{_errorHandler:!0})}t.makeErrorHandler=c,t.onUncaughtExceptionIntegration=a},99804:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872),o=n(24320),s=n(96450),i=r.defineIntegration(((e={})=>{const t=e.mode||"warn";return{name:"OnUnhandledRejection",setup(e){global.process.on("unhandledRejection",a(e,{mode:t}))}}}));function a(e,t){return function(n,i){r.getClient()===e&&(r.captureException(n,{originalException:i,captureContext:{extra:{unhandledPromiseRejection:!0}},mechanism:{handled:!1,type:"onunhandledrejection"}}),function(e,t){const n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===t.mode?o.consoleSandbox((()=>{console.warn(n),console.error(e&&e.stack?e.stack:e)})):"strict"===t.mode&&(o.consoleSandbox((()=>{console.warn(n)})),s.logAndExitProcess(e))}(n,t))}}t.makeUnhandledPromiseHandler=a,t.onUnhandledRejectionIntegration=i},29871:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37067),o=n(37872),s=n(24320),i=o.defineIntegration(((e={})=>{const t={sidecarUrl:e.sidecarUrl||"http://localhost:8969/stream"};return{name:"Spotlight",setup(e){"object"==typeof process&&process.env&&s.logger.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?"),function(e,t){const n=function(e){try{return new URL(`${e}`)}catch(t){return void s.logger.warn(`[Spotlight] Invalid sidecar URL: ${e}`)}}(t.sidecarUrl);if(!n)return;let r=0;e.on("beforeEnvelope",(e=>{if(r>3)return void s.logger.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");const t=s.serializeEnvelope(e),o=a()({method:"POST",path:n.pathname,hostname:n.hostname,port:n.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(e=>{e.on("data",(()=>{})),e.on("end",(()=>{})),e.setEncoding("utf8")}));o.on("error",(()=>{r++,s.logger.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")})),o.write(t),o.end()}))}(e,t)}}}));function a(){const{request:e}=r;return"__sentry_original__"in e?e.__sentry_original__:e}t.getNativeHttpRequest=a,t.spotlightIntegration=i},98276:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(68202),o=n(37872),s=n(40013),i=n(46478),a="Connect",c=s.generateInstrumentOnce(a,(()=>new r.ConnectInstrumentation)),u=o.defineIntegration((()=>({name:a,setupOnce(){c()}})));function l(e,t,n,r){o.captureException(e),r(e)}t.connectIntegration=u,t.instrumentConnect=c,t.setupConnectErrorHandler=e=>{e.use(l);const t=o.getClient();t&&t.on("spanStart",(e=>{!function(e){const t=o.spanToJSON(e).data||{},n=t["connect.type"];if(t[o.SEMANTIC_ATTRIBUTE_SENTRY_OP]||!n)return;e.setAttributes({[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.otel.connect",[o.SEMANTIC_ATTRIBUTE_SENTRY_OP]:`${n}.connect`});const r=t["connect.name"];"string"==typeof r&&e.updateName(r)}(e)})),i.ensureIsWrapped(e.use,"connect")}},29606:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(46012),s=n(37872),i=n(24320),a=n(13169),c=n(40013),u=n(64061),l=n(46478),d="Express",p=c.generateInstrumentOnce(d,(()=>new o.ExpressInstrumentation({requestHook(e){u.addOriginToSpan(e,"auto.http.otel.express");const t=s.spanToJSON(e).data||{},n=t["express.type"];n&&e.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_OP,`${n}.express`);const r=t["express.name"];"string"==typeof r&&e.updateName(r)},spanNameHook(e,t){if(s.getIsolationScope()===s.getDefaultIsolationScope())return a.DEBUG_BUILD&&i.logger.warn("Isolation scope is still default isolation scope - skipping setting transactionName"),t;if("request_handler"===e.layerType){const t=e.request,n=t.method?t.method.toUpperCase():"GET";s.getIsolationScope().setTransactionName(`${n} ${e.route}`)}return t}}))),h=s.defineIntegration((()=>({name:d,setupOnce(){p()}})));function f(e){return function(t,n,o,i){if((r([e,"optionalAccess",e=>e.shouldHandleError])||m)(t)){const e=s.getClient();if(e&&e.getOptions().autoSessionTracking&&void 0!==e._sessionFlusher){const e=s.getIsolationScope().getRequestSession();e&&void 0!==e.status&&(e.status="crashed")}const n=s.captureException(t,{mechanism:{type:"middleware",handled:!1}});return o.sentry=n,void i(t)}i(t)}}function m(e){const t=function(e){const t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}(e);return t>=500}t.expressErrorHandler=f,t.expressIntegration=h,t.instrumentExpress=p,t.setupExpressErrorHandler=function(e,t){e.use(f(t)),l.ensureIsWrapped(e.use,"express")}},24214:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(90224),s=n(37872),i=n(40013),a=n(46478),c="Fastify",u=i.generateInstrumentOnce(c,(()=>new o.FastifyInstrumentation({requestHook(e){d(e)}}))),l=s.defineIntegration((()=>({name:c,setupOnce(){u()}})));function d(e){const t=s.spanToJSON(e).data||{},n=t["fastify.type"];if(t[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]||!n)return;e.setAttributes({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.otel.fastify",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:`${n}.fastify`});const r=t["fastify.name"]||t["plugin.name"]||t["hook.name"];"string"==typeof r&&e.updateName(r.replace(/^fastify -> /,""))}t.fastifyIntegration=l,t.instrumentFastify=u,t.setupFastifyErrorHandler=function(e){const t=Object.assign((function(e,t,n){e.addHook("onError",(async(e,t,n)=>{s.captureException(n)})),e.addHook("onRequest",(async(e,t)=>{const n=e,o=r([n,"access",e=>e.routeOptions,"optionalAccess",e=>e.url])||n.routerPath,i=r([n,"access",e=>e.routeOptions,"optionalAccess",e=>e.method])||"GET";s.getIsolationScope().setTransactionName(`${i} ${o}`)})),n()}),{[Symbol.for("skip-override")]:!0,[Symbol.for("fastify.display-name")]:"sentry-fastify-error-handler"});e.register(t);const n=s.getClient();n&&n.on("spanStart",(e=>{d(e)})),a.ensureIsWrapped(e.addHook,"fastify")}},55203:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(57317),o=n(37872),s=n(32858),i=n(40013),a=n(64061),c="Graphql",u=i.generateInstrumentOnce(c,((e={})=>{const t={ignoreResolveSpans:!0,ignoreTrivialResolveSpans:!0,useOperationNameForRootSpan:!0,...e};return new r.GraphQLInstrumentation({...t,responseHook(e){a.addOriginToSpan(e,"auto.graphql.otel.graphql");const n=o.spanToJSON(e).data||{},r=n["graphql.operation.type"],i=n["graphql.operation.name"];if(t.useOperationNameForRootSpan&&r){const t=o.getRootSpan(e),n=(o.spanToJSON(t).data||{})[s.SEMANTIC_ATTRIBUTE_SENTRY_GRAPHQL_OPERATION]||[],a=i?`${r} ${i}`:`${r}`;Array.isArray(n)?(n.push(a),t.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_GRAPHQL_OPERATION,n)):n?t.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_GRAPHQL_OPERATION,[n,a]):t.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_GRAPHQL_OPERATION,a)}}})})),l=o.defineIntegration(((e={})=>({name:c,setupOnce(){u(e)}})));t.graphqlIntegration=l,t.instrumentGraphql=u},90871:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(87496),s=n(37872),i=n(24320),a=n(13169),c=n(40013),u=n(46478),l="Hapi",d=c.generateInstrumentOnce(l,(()=>new o.HapiInstrumentation)),p=s.defineIntegration((()=>({name:l,setupOnce(){d()}}))),h={name:"SentryHapiErrorPlugin",version:s.SDK_VERSION,register:async function(e){e.events.on({name:"request",channels:["error"]},((e,t)=>{if(s.getIsolationScope()!==s.getDefaultIsolationScope()){const t=e.route;t&&t.path&&s.getIsolationScope().setTransactionName(`${r([t,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()])||"GET"} ${t.path}`)}else a.DEBUG_BUILD&&i.logger.warn("Isolation scope is still the default isolation scope - skipping setting transactionName");var n;(function(e){return e&&void 0!==e.error})(t)&&(n=t.error,s.captureException(n,{mechanism:{type:"hapi",handled:!1,data:{function:"hapiErrorPlugin"}}}))}))}};t.hapiErrorPlugin=h,t.hapiIntegration=p,t.instrumentHapi=d,t.setupHapiErrorHandler=async function(e){await e.register(h);const t=s.getClient();t&&t.on("spanStart",(e=>{!function(e){const t=s.spanToJSON(e).data||{},n=t["hapi.type"];!t[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]&&n&&e.setAttributes({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.otel.hapi",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:`${n}.hapi`})}(e)})),u.ensureIsWrapped(e.register,"hapi")}},45874:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(69195),o=n(98276),s=n(29606),i=n(24214),a=n(55203),c=n(90871),u=n(41939),l=n(80642),d=n(9853),p=n(20160),h=n(85576),f=n(86715),m=n(81799),g=n(76649);t.getAutoPerformanceIntegrations=function(){return[s.expressIntegration(),i.fastifyIntegration(),a.graphqlIntegration(),l.mongoIntegration(),d.mongooseIntegration(),p.mysqlIntegration(),h.mysql2Integration(),g.redisIntegration(),m.postgresIntegration(),f.nestIntegration(),c.hapiIntegration(),u.koaIntegration(),o.connectIntegration()]},t.getOpenTelemetryInstrumentationToPreload=function(){return[r.instrumentHttp,s.instrumentExpress,o.instrumentConnect,i.instrumentFastify,c.instrumentHapi,u.instrumentKoa,f.instrumentNest,l.instrumentMongo,d.instrumentMongoose,p.instrumentMysql,h.instrumentMysql2,m.instrumentPostgres,c.instrumentHapi,a.instrumentGraphql,g.instrumentRedis]}},41939:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(45845),s=n(74813),i=n(37872),a=n(24320),c=n(13169),u=n(40013),l=n(46478),d=u.generateInstrumentOnce("Koa",(()=>new o.KoaInstrumentation({requestHook(e,t){if(function(e){e.setAttribute(i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,"auto.http.otel.koa");const t=i.spanToJSON(e).data||{},n=t["koa.type"];n&&e.setAttribute(i.SEMANTIC_ATTRIBUTE_SENTRY_OP,`${n}.koa`);const r=t["koa.name"];"string"==typeof r&&e.updateName(r||"< unknown >")}(e),i.getIsolationScope()===i.getDefaultIsolationScope())return void(c.DEBUG_BUILD&&a.logger.warn("Isolation scope is default isolation scope - skipping setting transactionName"));const n=i.spanToJSON(e).data,o=n&&n[s.SEMATTRS_HTTP_ROUTE],u=r([t,"optionalAccess",e=>e.context,"optionalAccess",e=>e.request,"optionalAccess",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()])||"GET";o&&i.getIsolationScope().setTransactionName(`${u} ${o}`)}}))),p=i.defineIntegration((()=>({name:"Koa",setupOnce(){d()}})));t.instrumentKoa=d,t.koaIntegration=p,t.setupKoaErrorHandler=e=>{e.use((async(e,t)=>{try{await t()}catch(e){throw i.captureException(e),e}})),l.ensureIsWrapped(e.use,"koa")}},80642:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(71526),o=n(37872),s=n(40013),i=n(64061),a="Mongo",c=s.generateInstrumentOnce(a,(()=>new r.MongoDBInstrumentation({responseHook(e){i.addOriginToSpan(e,"auto.db.otel.mongo")}}))),u=o.defineIntegration((()=>({name:a,setupOnce(){c()}})));t.instrumentMongo=c,t.mongoIntegration=u},9853:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(57125),o=n(37872),s=n(40013),i=n(64061),a="Mongoose",c=s.generateInstrumentOnce(a,(()=>new r.MongooseInstrumentation({responseHook(e){i.addOriginToSpan(e,"auto.db.otel.mongoose")}}))),u=o.defineIntegration((()=>({name:a,setupOnce(){c()}})));t.instrumentMongoose=c,t.mongooseIntegration=u},20160:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(90450),o=n(37872),s=n(40013),i="Mysql",a=s.generateInstrumentOnce(i,(()=>new r.MySQLInstrumentation({}))),c=o.defineIntegration((()=>({name:i,setupOnce(){a()}})));t.instrumentMysql=a,t.mysqlIntegration=c},85576:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(73932),o=n(37872),s=n(40013),i=n(64061),a="Mysql2",c=s.generateInstrumentOnce(a,(()=>new r.MySQL2Instrumentation({responseHook(e){i.addOriginToSpan(e,"auto.db.otel.mysql2")}}))),u=o.defineIntegration((()=>({name:a,setupOnce(){c()}})));t.instrumentMysql2=c,t.mysql2Integration=u},66796:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872),o=n(24320);t.getMiddlewareSpanOptions=function(e){return{name:e.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"middleware.nestjs",[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.middleware.nestjs"}}},t.isPatched=function(e){return!!e.sentryPatched||(o.addNonEnumerableProperty(e,"sentryPatched",!0),!1)}},86715:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(84455),s=n(37872),i=n(24320),a=n(40013),c=n(74742),u="Nest",l=a.generateInstrumentOnce("Nest-Core",(()=>new o.NestInstrumentation)),d=a.generateInstrumentOnce("Nest-Common",(()=>new c.SentryNestInstrumentation)),p=Object.assign((()=>{l(),d()}),{id:u}),h=s.defineIntegration((()=>({name:u,setupOnce(){p()}})));t.instrumentNest=p,t.nestIntegration=h,t.setupNestErrorHandler=function(e,t){const n=s.getClient();n&&n.on("spanStart",(e=>{!function(e){const t=s.spanToJSON(e).data||{},n=t["nestjs.type"];!t[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]&&n&&e.setAttributes({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.otel.nestjs",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:`${n}.nestjs`})}(e)})),e.useGlobalInterceptors({intercept(e,t){if(s.getIsolationScope()===s.getDefaultIsolationScope())return i.logger.warn("Isolation scope is still the default isolation scope, skipping setting transactionName."),t.handle();if("http"===e.getType()){const t=e.switchToHttp().getRequest();t.route&&s.getIsolationScope().setTransactionName(`${r([t,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()])||"GET"} ${t.route.path}`)}return t.handle()}});const o=new Proxy(t,{get(e,t,n){if("catch"===t){const r=Reflect.get(e,t,n);return(t,n)=>{const o="object"==typeof t&&null!==t,i=o&&"status"in t?t.status:null,a=o&&"error"in t?t.error:null;return null!==i||null!==a||s.captureException(t),r.apply(e,[t,n])}}return Reflect.get(e,t,n)}});e.useGlobalFilters(o)}},74742:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(72477),o=n(25907),s=n(37872),i=n(24320),a=n(66796),c=[">=8.0.0 <11"];class u extends o.InstrumentationBase{static __initStatic(){this.COMPONENT="@nestjs/common"}static __initStatic2(){this.COMMON_ATTRIBUTES={component:u.COMPONENT}}constructor(e={}){super("sentry-nestjs",i.SDK_VERSION,e)}init(){const e=new o.InstrumentationNodeModuleDefinition(u.COMPONENT,c);return e.files.push(this._getInjectableFileInstrumentation(c),this._getCatchFileInstrumentation(c)),e}_getInjectableFileInstrumentation(e){return new o.InstrumentationNodeModuleFile("@nestjs/common/decorators/core/injectable.decorator.js",e,(e=>(r.isWrapped(e.Injectable)&&this._unwrap(e,"Injectable"),this._wrap(e,"Injectable",this._createWrapInjectable()),e)),(e=>{this._unwrap(e,"Injectable")}))}_getCatchFileInstrumentation(e){return new o.InstrumentationNodeModuleFile("@nestjs/common/decorators/core/catch.decorator.js",e,(e=>(r.isWrapped(e.Catch)&&this._unwrap(e,"Catch"),this._wrap(e,"Catch",this._createWrapCatch()),e)),(e=>{this._unwrap(e,"Catch")}))}_createWrapInjectable(){return function(e){return function(t){return function(n){if("function"==typeof n.prototype.use&&!n.__SENTRY_INTERNAL__){if(a.isPatched(n))return e(t)(n);n.prototype.use=new Proxy(n.prototype.use,{apply:(e,t,r)=>{const[o,i,c,...u]=r,l=s.getActiveSpan();return s.startSpanManual(a.getMiddlewareSpanOptions(n),(n=>{const r=new Proxy(c,{apply:(e,t,r)=>(n.end(),l?s.withActiveSpan(l,(()=>Reflect.apply(e,t,r))):Reflect.apply(e,t,r))});return e.apply(t,[o,i,r,u])}))}})}if("function"==typeof n.prototype.canActivate&&!n.__SENTRY_INTERNAL__){if(a.isPatched(n))return e(t)(n);n.prototype.canActivate=new Proxy(n.prototype.canActivate,{apply:(e,t,r)=>s.startSpan(a.getMiddlewareSpanOptions(n),(()=>e.apply(t,r)))})}if("function"==typeof n.prototype.transform&&!n.__SENTRY_INTERNAL__){if(a.isPatched(n))return e(t)(n);n.prototype.transform=new Proxy(n.prototype.transform,{apply:(e,t,r)=>s.startSpan(a.getMiddlewareSpanOptions(n),(()=>e.apply(t,r)))})}if("function"==typeof n.prototype.intercept&&!n.__SENTRY_INTERNAL__){if(a.isPatched(n))return e(t)(n);n.prototype.intercept=new Proxy(n.prototype.intercept,{apply:(e,t,r)=>{const[o,i,c]=r,u=s.getActiveSpan();return s.startSpanManual(a.getMiddlewareSpanOptions(n),(r=>{const a=new Proxy(i,{get:(e,t,o)=>{if("handle"===t){const n=Reflect.get(e,t,o);return(...t)=>(r.end(),u?s.withActiveSpan(u,(()=>Reflect.apply(n,e,t))):Reflect.apply(n,e,t))}return Reflect.get(n,t,o)}});return e.apply(t,[o,a,c])}))}})}return e(t)(n)}}}}_createWrapCatch(){return function(e){return function(...t){return function(n){if("function"==typeof n.prototype.catch&&!n.__SENTRY_INTERNAL__){if(a.isPatched(n))return e(...t)(n);n.prototype.catch=new Proxy(n.prototype.catch,{apply:(e,t,r)=>s.startSpan(a.getMiddlewareSpanOptions(n),(()=>e.apply(t,r)))})}return e(...t)(n)}}}}}u.__initStatic(),u.__initStatic2(),t.SentryNestInstrumentation=u},81799:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(65),o=n(37872),s=n(40013),i=n(64061),a="Postgres",c=s.generateInstrumentOnce(a,(()=>new r.PgInstrumentation({requireParentSpan:!0,requestHook(e){i.addOriginToSpan(e,"auto.db.otel.postgres")}}))),u=o.defineIntegration((()=>({name:a,setupOnce(){c()}})));t.instrumentPostgres=c,t.postgresIntegration=u},81732:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(57991),s=n(37872),i=n(40013),a="Prisma",c=i.generateInstrumentOnce(a,(()=>new(r([o,"access",e=>e.default,"optionalAccess",e=>e.PrismaInstrumentation])||o.PrismaInstrumentation)({}))),u=s.defineIntegration((()=>({name:a,setupOnce(){c()},setup(e){e.on("spanStart",(e=>{const t=s.spanToJSON(e);r([t,"access",e=>e.description,"optionalAccess",e=>e.startsWith,"call",e=>e("prisma:")])&&e.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,"auto.db.otel.prisma"),"prisma:engine:db_query"===t.description&&e.setAttribute("db.system","prisma")}))}})));t.instrumentPrisma=c,t.prismaIntegration=u},76649:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(83251),s=n(92554),i=n(37872),a=n(24320),c=n(40013),u=n(35278),l="Redis";let d={};const p=(e,t,n,o)=>{e.setAttribute(i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,"auto.db.otel.redis");const s=u.getCacheKeySafely(t,n),c=u.getCacheOperation(t);if(!(s&&c&&r([d,"optionalAccess",e=>e.cachePrefixes])&&u.shouldConsiderForCache(t,s,d.cachePrefixes)))return;const l=r([i.spanToJSON,"call",t=>t(e),"access",e=>e.data,"optionalAccess",e=>e["net.peer.name"]]),p=r([i.spanToJSON,"call",t=>t(e),"access",e=>e.data,"optionalAccess",e=>e["net.peer.port"]]);p&&l&&e.setAttributes({"network.peer.address":l,"network.peer.port":p});const h=u.calculateCacheItemSize(o);h&&e.setAttribute(i.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,h),u.isInCommands(u.GET_COMMANDS,t)&&void 0!==h&&e.setAttribute(i.SEMANTIC_ATTRIBUTE_CACHE_HIT,h>0),e.setAttributes({[i.SEMANTIC_ATTRIBUTE_SENTRY_OP]:c,[i.SEMANTIC_ATTRIBUTE_CACHE_KEY]:s});const f=s.join(", ");e.updateName(a.truncate(f,1024))},h=c.generateInstrumentOnce("IORedis",(()=>new o.IORedisInstrumentation({responseHook:p}))),f=c.generateInstrumentOnce("Redis-4",(()=>new s.RedisInstrumentation({responseHook:p}))),m=Object.assign((()=>{h(),f()}),{id:l}),g=i.defineIntegration(((e={})=>({name:l,setupOnce(){d=e,m()}})));t.instrumentRedis=m,t.redisIntegration=g},51055:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320).parseSemver(process.versions.node),o=r.major;t.NODE_MAJOR=o,t.NODE_VERSION=r},73086:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(81376),o=n(32858).wrapContextManagerClass(r.AsyncLocalStorageContextManager);t.SentryContextManager=o},40013:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(32858),o={};t.generateInstrumentOnce=function(e,t){return Object.assign((n=>{const s=o[e];if(s)return void(n&&s.setConfig(n));const i=t(n);o[e]=i,r.addOpenTelemetryInstrumentation(i)}),{id:e})}},50575:(e,t,n)=>{var{_nullishCoalesce:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(37067);n(44708);const s=Symbol("AgentBaseInternalState");class i extends o.Agent{constructor(e){super(e),this[s]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}const{stack:t}=new Error;return"string"==typeof t&&t.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}createSocket(e,t,n){const r={...t,secureEndpoint:this.isSecureEndpoint(t)};Promise.resolve().then((()=>this.connect(e,r))).then((i=>{if(i instanceof o.Agent)return i.addRequest(e,r);this[s].currentSocket=i,super.createSocket(e,t,n)}),n)}createConnection(){const e=this[s].currentSocket;if(this[s].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return r(this[s].defaultPort,(()=>"https:"===this.protocol?443:80))}set defaultPort(e){this[s]&&(this[s].defaultPort=e)}get protocol(){return r(this[s].protocol,(()=>this.isSecureEndpoint()?"https:":"http:"))}set protocol(e){this[s]&&(this[s].protocol=e)}}t.Agent=i},86160:(e,t,n)=>{var{_nullishCoalesce:r,_optionalChain:o}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const s=n(77030),i=n(41692),a=n(24320),c=n(50575),u=n(5244);function l(...e){a.logger.log("[https-proxy-agent]",...e)}class d extends c.Agent{static __initStatic(){this.protocols=["http","https"]}constructor(e,t){super(t),this.options={},this.proxy="string"==typeof e?new URL(e):e,this.proxyHeaders=r(o([t,"optionalAccess",e=>e.headers]),(()=>({}))),l("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),s=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?h(t,"headers"):null,host:n,port:s}}async connect(e,t){const{proxy:n}=this;if(!t.host)throw new TypeError('No "host" provided');let r;if("https:"===n.protocol){l("Creating `tls.Socket`: %o",this.connectOpts);const e=this.connectOpts.servername||this.connectOpts.host;r=i.connect({...this.connectOpts,servername:e&&s.isIP(e)?void 0:e})}else l("Creating `net.Socket`: %o",this.connectOpts),r=s.connect(this.connectOpts);const o="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},a=s.isIPv6(t.host)?`[${t.host}]`:t.host;let c=`CONNECT ${a}:${t.port} HTTP/1.1\r\n`;if(n.username||n.password){const e=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}o.Host=`${a}:${t.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const e of Object.keys(o))c+=`${e}: ${o[e]}\r\n`;const d=u.parseProxyResponse(r);r.write(`${c}\r\n`);const{connect:f,buffered:m}=await d;if(e.emit("proxyConnect",f),this.emit("proxyConnect",f,e),200===f.statusCode){if(e.once("socket",p),t.secureEndpoint){l("Upgrading socket connection to TLS");const e=t.servername||t.host;return i.connect({...h(t,"host","path","port"),socket:r,servername:s.isIP(e)?void 0:e})}return r}r.destroy();const g=new s.Socket({writable:!1});return g.readable=!0,e.once("socket",(e=>{l("Replaying proxy buffer for failed request"),e.push(m),e.push(null)})),g}}function p(e){e.resume()}function h(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}d.__initStatic(),t.HttpsProxyAgent=d},5244:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320);function o(...e){r.logger.log("[https-proxy-agent:parse-proxy-response]",...e)}t.parseProxyResponse=function(e){return new Promise(((t,n)=>{let r=0;const s=[];function i(){const c=e.read();c?function(c){s.push(c),r+=c.length;const u=Buffer.concat(s,r),l=u.indexOf("\r\n\r\n");if(-1===l)return o("have not received end of HTTP headers yet..."),void i();const d=u.slice(0,l).toString("ascii").split("\r\n"),p=d.shift();if(!p)return e.destroy(),n(new Error("No header received from proxy CONNECT response"));const h=p.split(" "),f=+(h[1]||0),m=h.slice(2).join(" "),g={};for(const t of d){if(!t)continue;const r=t.indexOf(":");if(-1===r)return e.destroy(),n(new Error(`Invalid header from proxy CONNECT response: "${t}"`));const o=t.slice(0,r).toLowerCase(),s=t.slice(r+1).trimStart(),i=g[o];"string"==typeof i?g[o]=[i,s]:Array.isArray(i)?i.push(s):g[o]=s}o("got proxy server response: %o %o",p,g),a(),t({connect:{statusCode:f,statusText:m,headers:g},buffered:u})}(c):e.once("readable",i)}function a(){e.removeListener("end",c),e.removeListener("error",u),e.removeListener("readable",i)}function c(){a(),o("onend"),n(new Error("Proxy connection ended before receiving CONNECT response"))}function u(e){a(),o("onerror %o",e),n(e)}e.on("error",u),e.on("end",c),i()}))}},75376:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=n(32477),s=r.createStackParser(r.nodeStackLineParser(o.createGetModuleFromFilename()));t.defaultStackParser=s,t.getSentryRelease=function(e){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(r.GLOBAL_OBJ.SENTRY_RELEASE&&r.GLOBAL_OBJ.SENTRY_RELEASE.id)return r.GLOBAL_OBJ.SENTRY_RELEASE.id;const t=process.env.GITHUB_SHA||process.env.CI_MERGE_REQUEST_SOURCE_BRANCH_SHA||process.env.CI_BUILD_REF||process.env.CI_COMMIT_SHA||process.env.BITBUCKET_COMMIT,n=process.env.APPVEYOR_PULL_REQUEST_HEAD_COMMIT||process.env.APPVEYOR_REPO_COMMIT||process.env.CODEBUILD_RESOLVED_SOURCE_VERSION||process.env.AWS_COMMIT_ID||process.env.BUILD_SOURCEVERSION||process.env.GIT_CLONE_COMMIT_HASH||process.env.BUDDY_EXECUTION_REVISION||process.env.BUILDKITE_COMMIT||process.env.CIRCLE_SHA1||process.env.CIRRUS_CHANGE_IN_REPO||process.env.CF_REVISION||process.env.CM_COMMIT||process.env.CF_PAGES_COMMIT_SHA||process.env.DRONE_COMMIT_SHA||process.env.FC_GIT_COMMIT_SHA||process.env.HEROKU_TEST_RUN_COMMIT_VERSION||process.env.HEROKU_SLUG_COMMIT||process.env.RENDER_GIT_COMMIT||process.env.SEMAPHORE_GIT_SHA||process.env.TRAVIS_PULL_REQUEST_SHA||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA,o=process.env.CI_COMMIT_ID||process.env.SOURCE_COMMIT||process.env.SOURCE_VERSION||process.env.GIT_COMMIT||process.env.COMMIT_REF||process.env.BUILD_VCS_NUMBER||process.env.CI_COMMIT_SHA;return t||n||o||e}},14709:(e,t,n)=>{var{_nullishCoalesce:r,_optionalChain:o}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const s=n(48161),i=n(74681),a=n(37872),c=n(24320),u=n(28167),l=n(13169);class d extends a.ServerRuntimeClient{constructor(e){const t={...e,platform:"node",runtime:{name:"node",version:global.process.version},serverName:e.serverName||global.process.env.SENTRY_NAME||s.hostname()};a.applySdkMetadata(t,"node"),c.logger.log(`Initializing Sentry: process: ${process.pid}, thread: ${u.isMainThread?"main":`worker-${u.threadId}`}.`),super(t)}get tracer(){if(this._tracer)return this._tracer;const e=a.SDK_VERSION,t=i.trace.getTracer("@sentry/node",e);return this._tracer=t,t}async flush(e){const t=this.traceProvider,n=o([t,"optionalAccess",e=>e.activeSpanProcessor]);return n&&await n.forceFlush(),this.getOptions().sendClientReports&&this._flushOutcomes(),super.flush(e)}close(e){return this._clientReportInterval&&clearInterval(this._clientReportInterval),this._clientReportOnExitFlushListener&&process.off("beforeExit",this._clientReportOnExitFlushListener),super.close(e)}startClientReportTracking(){const e=this.getOptions();e.sendClientReports&&(this._clientReportOnExitFlushListener=()=>{this._flushOutcomes()},this._clientReportInterval=setInterval((()=>{l.DEBUG_BUILD&&c.logger.log("Flushing client reports based on interval."),this._flushOutcomes()}),r(e.clientReportFlushInterval,(()=>6e4))).unref(),process.on("beforeExit",this._clientReportOnExitFlushListener))}}t.NodeClient=d},34220:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872),o=n(32858),s=n(24320),i=n(13169),a=n(95022),c=n(82660),u=n(8421),l=n(69195),d=n(85055),p=n(9558),h=n(76474),f=n(82644),m=n(99804),g=n(29871),_=n(45874),y=n(60700),S=n(13955),b=n(75376),E=n(14709),v=n(23310);function T(){return[r.inboundFiltersIntegration(),r.functionToStringIntegration(),r.linkedErrorsIntegration(),r.requestDataIntegration(),a.consoleIntegration(),l.httpIntegration(),h.nativeNodeFetchIntegration(),f.onUncaughtExceptionIntegration(),m.onUnhandledRejectionIntegration(),u.contextLinesIntegration(),d.localVariablesIntegration(),c.nodeContextIntegration(),...S.isCjs()?[p.modulesIntegration()]:[]]}function I(e){return[...T(),...R(e)?_.getAutoPerformanceIntegrations():[]]}function R(e){return!!r.hasTracingEnabled(e)&&(e.enableTracing||null!=e.tracesSampleRate||"tracesSampler"in e)}function A(e={},t){const n=function(e,t){const n=function(e){if(void 0!==e)return e;const t=b.getSentryRelease();return void 0!==t?t:void 0}(e.release),o="string"==typeof n&&(void 0===e.autoSessionTracking||e.autoSessionTracking),i=function(e){if(void 0!==e)return e;const t=process.env.SENTRY_TRACES_SAMPLE_RATE;if(!t)return;const n=parseFloat(t);return isFinite(n)?n:void 0}(e.tracesSampleRate),a=s.dropUndefinedKeys({transport:y.makeNodeTransport,dsn:process.env.SENTRY_DSN,environment:process.env.SENTRY_ENVIRONMENT,sendClientReports:!0}),c=s.dropUndefinedKeys({release:n,autoSessionTracking:o,tracesSampleRate:i}),u={...a,...e,...c};void 0===e.defaultIntegrations&&(e.defaultIntegrations=t(u));return{...u,stackParser:s.stackParserFromStackParserOptions(e.stackParser||b.defaultStackParser),integrations:r.getIntegrationsToSetup({defaultIntegrations:e.defaultIntegrations,integrations:e.integrations})}}(e,t);!0===n.debug&&(i.DEBUG_BUILD?s.logger.enable():s.consoleSandbox((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),S.isCjs()||!1===n.registerEsmLoaderHooks||v.maybeInitializeEsmLoader(!0===n.registerEsmLoaderHooks?void 0:n.registerEsmLoaderHooks),o.setOpenTelemetryContextAsyncContextStrategy(),r.getCurrentScope().update(n.initialScope);const a=new E.NodeClient(n);if(r.getCurrentScope().setClient(a),function(e){return!1!==e.getOptions().enabled&&void 0!==e.getTransport()}(a)&&a.init(),s.logger.log(`Running in ${S.isCjs()?"CommonJS":"ESM"} mode.`),n.autoSessionTracking&&function(){const e=r.getClient();e&&e.getOptions().autoSessionTracking&&e.initSessionFlusher(),r.startSession(),process.on("beforeExit",(()=>{const e=r.getIsolationScope().getSession();e&&"ok"!==e.status&&r.endSession()}))}(),a.startClientReportTracking(),function(){const e=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(e)){const e=process.env.SENTRY_TRACE,t=process.env.SENTRY_BAGGAGE,n=s.propagationContextFromHeaders(e,t);r.getCurrentScope().setPropagationContext(n)}}(),n.spotlight){const e=a.getOptions().integrations;for(const t of e)a.addIntegration(t);a.addIntegration(g.spotlightIntegration({sidecarUrl:"string"==typeof n.spotlight?n.spotlight:void 0}))}return n.skipOpenTelemetrySetup||(v.initOpenTelemetry(a),C()),o.enhanceDscWithOpenTelemetryRootSpanName(a),o.setupEventContextTrace(a),a}function C(){if(!i.DEBUG_BUILD)return;const e=o.openTelemetrySetupCheck(),t=["SentryContextManager","SentryPropagator"];r.hasTracingEnabled()&&t.push("SentrySpanProcessor");for(const n of t)e.includes(n)||s.logger.error(`You have to set up the ${n}. Without this, the OpenTelemetry & Sentry integration will not work properly.`);e.includes("SentrySampler")||s.logger.warn("You have to set up the SentrySampler. Without this, the OpenTelemetry & Sentry integration may still work, but sample rates set for the Sentry SDK will not be respected. If you use a custom sampler, make sure to use `wrapSamplingDecision`.")}t.getDefaultIntegrations=I,t.getDefaultIntegrationsWithoutPerformance=T,t.init=function(e={}){return A(e,I)},t.initWithoutDefaultIntegrations=function(e={}){return A(e,(()=>[]))},t.validateOpenTelemetrySetup=C},23310:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(73339),o=n(74681),s=n(2733),i=n(71426),a=n(74813),c=n(37872),u=n(32858),l=n(24320),d=n(45874),p=n(73086),h=n(13955);var f="undefined"!=typeof document?document.currentScript:null;function m(e){const[t=0,o=0]=process.versions.node.split(".").map(Number);if(t>=22||20===t&&o>=6||18===t&&o>=19){const t=void 0!==("undefined"==typeof document?n(87016).pathToFileURL(__filename).href:f&&f.src||new URL("sdk/initOtel.js",document.baseURI).href)?"undefined"==typeof document?n(87016).pathToFileURL(__filename).href:f&&f.src||new URL("sdk/initOtel.js",document.baseURI).href:void 0;if(!l.GLOBAL_OBJ._sentryEsmLoaderHookRegistered&&t)try{r.default.register("import-in-the-middle/hook.mjs",t,{data:e}),l.GLOBAL_OBJ._sentryEsmLoaderHookRegistered=!0}catch(e){l.logger.warn("Failed to register ESM hook",e)}}else l.consoleSandbox((()=>{console.warn('[Sentry] You are using Node.js in ESM mode ("import syntax"). The Sentry Node.js SDK is not compatible with ESM in Node.js versions before 18.19.0 or before 20.6.0. Please either build your application with CommonJS ("require() syntax"), or use version 7.x of the Sentry Node.js SDK.')}))}function g(e){const t=new i.BasicTracerProvider({sampler:new u.SentrySampler(e),resource:new s.Resource({[a.SEMRESATTRS_SERVICE_NAME]:"node",[a.SEMRESATTRS_SERVICE_NAMESPACE]:"sentry",[a.SEMRESATTRS_SERVICE_VERSION]:c.SDK_VERSION}),forceFlushTimeoutMillis:500});return t.addSpanProcessor(new u.SentrySpanProcessor({timeout:e.getOptions().maxSpanWaitDuration})),t.register({propagator:new u.SentryPropagator,contextManager:new p.SentryContextManager}),t}function _(){const e=new Proxy(l.logger,{get(e,t,n){const r="verbose"===t?"debug":t;return Reflect.get(e,r,n)}});o.diag.disable(),o.diag.setLogger(e,o.DiagLogLevel.DEBUG)}t.initOpenTelemetry=function(e){e.getOptions().debug&&_();const t=g(e);e.traceProvider=t},t.maybeInitializeEsmLoader=m,t.preloadOpenTelemetry=function(e={}){const{debug:t}=e;t&&(l.logger.enable(),_()),h.isCjs()||m(e.registerEsmLoaderHooks),function(e){const t=d.getOpenTelemetryInstrumentationToPreload();return e?t.filter((t=>e.includes(t.id))):t}(e.integrations).forEach((e=>{e(),t&&l.logger.log(`[Sentry] Preloaded ${e.id} instrumentation`)}))},t.setupOtel=g},74764:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(74681),o=n(32858);t.setIsolationScope=function(e){const t=o.getScopesFromContext(r.context.active());t&&(t.isolationScope=e)}},60700:(e,t,n)=>{var{_nullishCoalesce:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(37067),s=n(44708),i=n(57075),a=n(38522),c=n(37872),u=n(24320),l=n(86160);t.makeNodeTransport=function(e){let t;try{t=new URL(e.url)}catch(t){return u.consoleSandbox((()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")})),c.createTransport(e,(()=>Promise.resolve({})))}const n="https:"===t.protocol,d=function(e,t){const{no_proxy:n}=process.env;return n&&n.split(",").some((t=>e.host.endsWith(t)||e.hostname.endsWith(t)))?void 0:t}(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),p=n?s:o,h=void 0!==e.keepAlive&&e.keepAlive,f=d?new l.HttpsProxyAgent(d):new p.Agent({keepAlive:h,maxSockets:30,timeout:2e3});return c.suppressTracing((()=>{const t=function(e,t,n){const{hostname:o,pathname:s,port:c,protocol:u,search:l}=new URL(e.url);return function(d){return new Promise(((p,h)=>{let f=function(e){return new i.Readable({read(){this.push(e),this.push(null)}})}(d.body);const m={...e.headers};d.body.length>32768&&(m["content-encoding"]="gzip",f=f.pipe(a.createGzip()));const g=t.request({method:"POST",agent:n,headers:m,hostname:o,path:`${s}${l}`,port:c,protocol:u,ca:e.caCerts},(e=>{e.on("data",(()=>{})),e.on("end",(()=>{})),e.setEncoding("utf8");const t=r(e.headers["retry-after"],(()=>null)),n=r(e.headers["x-sentry-rate-limits"],(()=>null));p({statusCode:e.statusCode,headers:{"retry-after":t,"x-sentry-rate-limits":Array.isArray(n)?n[0]||null:n}})}));g.on("error",h),f.pipe(g)}))}}(e,r(e.httpModule,(()=>p)),f);return c.createTransport(e,t)}))}},64061:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872);t.addOriginToSpan=function(e,t){e.setAttribute(r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t)}},13955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCjs=function(){return!0}},14660:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(13955);t.createMissingInstrumentationContext=e=>({package:e,"javascript.is_cjs":r.isCjs()})},46478:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(72477),o=n(37872),s=n(24320),i=n(13955),a=n(14660);t.ensureIsWrapped=function(e,t){!r.isWrapped(e)&&o.isEnabled()&&o.hasTracingEnabled()&&(s.consoleSandbox((()=>{i.isCjs()?console.warn(`[Sentry] ${t} is not instrumented. This is likely because you required/imported ${t} before calling \`Sentry.init()\`.`):console.warn(`[Sentry] ${t} is not instrumented. Please make sure to initialize Sentry in a separate file that you \`--import\` when running node, see: https://docs.sentry.io/platforms/javascript/guides/${t}/install/esm/.`)})),o.getGlobalScope().setContext("missing_instrumentation",a.createMissingInstrumentationContext(t)))}},96450:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(37872),o=n(24320),s=n(13169);t.logAndExitProcess=function(e){o.consoleSandbox((()=>{console.error(e)}));const t=r.getClient();if(void 0===t)return s.DEBUG_BUILD&&o.logger.warn("No NodeClient was defined, we are exiting the process now."),void global.process.exit(1);const n=t.getOptions(),i=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||2e3;t.close(i).then((e=>{e||s.DEBUG_BUILD&&o.logger.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}),(e=>{s.DEBUG_BUILD&&o.logger.error(e)}))}},1247:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRequestUrl=function(e){const t=e.protocol||"",n=e.hostname||e.host||"";return`${t}//${n}${!e.port||80===e.port||443===e.port||/^(.*):(\d+)$/.test(n)?"":`:${e.port}`}${e.path?e.path:"/"}`}},32477:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(76760),o=n(24320);function s(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}t.createGetModuleFromFilename=function(e=(process.argv[1]?o.dirname(process.argv[1]):process.cwd()),t="\\"===r.sep){const n=t?s(e):e;return e=>{if(!e)return;const o=t?s(e):e;let{dir:i,base:a,ext:c}=r.posix.parse(o);".js"!==c&&".mjs"!==c&&".cjs"!==c||(a=a.slice(0,-1*c.length)),i||(i=".");const u=i.lastIndexOf("/node_modules");if(u>-1)return`${i.slice(u+14).replace(/\//g,".")}:${a}`;if(i.startsWith(n)){let e=i.slice(n.length+1).replace(/\//g,".");return e&&(e+=":"),e+=a,e}return a}}},35278:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(24320),o=["get","set","setex"],s=["get","mget"],i=["set","setex"];function a(e,t){return e.includes(t.toLowerCase())}function c(e){return a(s,e)?"cache.get":a(i,e)?"cache.put":void 0}function u(e,t){return t.some((t=>e.startsWith(t)))}t.GET_COMMANDS=s,t.SET_COMMANDS=i,t.calculateCacheItemSize=function(e){const t=e=>{try{return Buffer.isBuffer(e)?e.byteLength:"string"==typeof e?e.length:"number"==typeof e?e.toString().length:null==e?0:JSON.stringify(e).length}catch(e){return}};return Array.isArray(e)?e.reduce(((e,n)=>{const r=t(n);return"number"==typeof r?void 0!==e?e+r:r:e}),0):t(e)},t.getCacheKeySafely=function(e,t){try{if(0===t.length)return;const n=e=>"string"==typeof e||"number"==typeof e||Buffer.isBuffer(e)?[e.toString()]:Array.isArray(e)?r.flatten(e.map((e=>n(e)))):["<unknown>"],s=t[0];return a(o,e)&&null!=s?n(s):r.flatten(t.map((e=>n(e))))}catch(e){return}},t.getCacheOperation=c,t.isInCommands=a,t.shouldConsiderForCache=function(e,t,n){if(!c(e))return!1;for(const e of t)if(u(e,n))return!0;return!1}},32858:(e,t,n)=>{var{_optionalChain:r}=n(24320);Object.defineProperty(t,"__esModule",{value:!0});const o=n(74813),s=n(24320),i=n(74681),a=n(37872),c=n(72477),u=n(71426),l=n(25907),d="sentry.parentIsRemote",p="sentry.graphql.operation";function h(e){const t=e;return!!t.attributes&&"object"==typeof t.attributes}function f(e){return"number"==typeof e.kind}function m(e){return!!e.status}function g(e){return!!e.name}function _(e){return!!e.parentSpanId}function y(e){if(!h(e))return{};const t={url:e.attributes[o.SEMATTRS_HTTP_URL],"http.method":e.attributes[o.SEMATTRS_HTTP_METHOD]};!t["http.method"]&&t.url&&(t["http.method"]="GET");try{const n=e.attributes[o.SEMATTRS_HTTP_URL];if("string"==typeof n){const e=s.parseUrl(n);t.url=s.getSanitizedUrlString(e),e.search&&(t["http.query"]=e.search),e.hash&&(t["http.fragment"]=e.hash)}}catch(e){}return t}function S(e){return f(e)?e.kind:i.SpanKind.INTERNAL}const b="sentry-trace",E="baggage",v="sentry.dsc",T="sentry.parent_span_id",I="sentry.sampled_not_recording",R="sentry.url",A=i.createContextKey("sentry_scopes"),C=i.createContextKey("sentry_fork_isolation_scope"),O=i.createContextKey("sentry_fork_set_scope"),N=i.createContextKey("sentry_fork_set_isolation_scope"),P="_scopeContext";function w(e){return e.getValue(A)}function L(e,t){return e.setValue(A,t)}function M(e,t,n){if(t["sentry.skip_span_data_inference"])return{op:void 0,description:e,source:"custom",data:{"sentry.skip_span_data_inference":void 0}};const r=t["http.request.method"]||t[o.SEMATTRS_HTTP_METHOD];if(r)return function({name:e,kind:t,attributes:n},r){const a=["http"];switch(t){case i.SpanKind.CLIENT:a.push("client");break;case i.SpanKind.SERVER:a.push("server")}const{urlPath:c,url:u,query:l,fragment:d,hasRoute:h}=function(e,t){const n=e[o.SEMATTRS_HTTP_TARGET],r=e[o.SEMATTRS_HTTP_URL],a=e[o.SEMATTRS_HTTP_ROUTE],c="string"==typeof r?s.parseUrl(r):void 0,u=c?s.getSanitizedUrlString(c):void 0,l=c&&c.search?c.search:void 0,d=c&&c.hash?c.hash:void 0;return"string"==typeof a?{urlPath:a,url:u,query:l,fragment:d,hasRoute:!0}:t===i.SpanKind.SERVER&&"string"==typeof n?{urlPath:s.stripUrlQueryAndFragment(n),url:u,query:l,fragment:d,hasRoute:!1}:c?{urlPath:u,url:u,query:l,fragment:d,hasRoute:!1}:"string"==typeof n?{urlPath:s.stripUrlQueryAndFragment(n),url:u,query:l,fragment:d,hasRoute:!1}:{urlPath:void 0,url:u,query:l,fragment:d,hasRoute:!1}}(n,t);if(!c)return{op:a.join("."),description:e,source:"custom"};const f=n[p],m=`${r} ${c}`,g=f?`${m} (${function(e){if(Array.isArray(e)){const t=e.slice().sort();return t.length<=5?t.join(", "):`${t.slice(0,5).join(", ")}, +${t.length-5}`}return`${e}`}(f)})`:m,_=h||"/"===c?"route":"url",y={};return u&&(y.url=u),l&&(y["http.query"]=l),d&&(y["http.fragment"]=d),{op:a.join("."),description:g,source:_,data:y}}({attributes:t,name:e,kind:n},r);const c=t[o.SEMATTRS_DB_SYSTEM],u="string"==typeof t[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]&&t[a.SEMANTIC_ATTRIBUTE_SENTRY_OP].startsWith("cache.");if(c&&!u)return function({attributes:e,name:t}){const n=e[o.SEMATTRS_DB_STATEMENT];return{op:"db",description:n?n.toString():t,source:"task"}}({attributes:t,name:e});if(t[o.SEMATTRS_RPC_SERVICE])return{op:"rpc",description:e,source:"route"};if(t[o.SEMATTRS_MESSAGING_SYSTEM])return{op:"message",description:e,source:"route"};const l=t[o.SEMATTRS_FAAS_TRIGGER];return l?{op:l.toString(),description:e,source:"route"}:{op:void 0,description:e,source:"custom"}}function x(e){const t=h(e)?e.attributes:{};return M(g(e)?e.name:"<unknown>",t,S(e))}function k({parentSpanId:e,dsc:t,sampled:n}){const r=t?s.dynamicSamplingContextToSentryBaggageHeader(t):void 0,o=(new c.TraceState).set(T,e||""),i=r?o.set(v,r):o;return!1===n?i.set(I,"1"):i}function G(e){const t=k({parentSpanId:e.parentSpanId,dsc:e.dsc,sampled:e.sampled});return{traceId:e.traceId,spanId:e.parentSpanId||"",isRemote:!0,traceFlags:e.sampled?i.TraceFlags.SAMPLED:i.TraceFlags.NONE,traceState:t}}function U(){return i.trace.getActiveSpan()}const V="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function H(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function D(e){const{traceFlags:t,traceState:n}=e,r=!!n&&"1"===n.get(I);if(t===i.TraceFlags.SAMPLED)return!0;if(r)return!1;const o=n?n.get(v):void 0,a=o?s.baggageHeaderToDynamicSamplingContext(o):void 0;return"true"===H([a,"optionalAccess",e=>e.sampled])||"false"!==H([a,"optionalAccess",e=>e.sampled])&&void 0}const j=new Set;function B(e){j.add(e)}function F(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Z(e){const t=e.spanContext(),{traceId:n,spanId:r,traceState:o}=t,i=o?o.get(v):void 0,c=i?s.baggageHeaderToDynamicSamplingContext(i):void 0,u=o&&o.get(T)||void 0;return{traceId:n,spanId:r,sampled:D(t),parentSpanId:u,dsc:c||a.getDynamicSamplingContextFromSpan(a.getRootSpan(e))}}class W extends c.W3CBaggagePropagator{constructor(){super(),B("SentryPropagator"),this._urlMatchesTargetsMap=new s.LRUMap(100)}inject(e,t,n){if(c.isTracingSuppressed(e))return void(V&&s.logger.log("[Tracing] Not injecting trace data for url because tracing is suppressed."));const r=i.trace.getSpan(e),u=r&&function(e){const t=F([a.spanToJSON,"call",t=>t(e),"access",e=>e.data,"optionalAccess",e=>e[o.SEMATTRS_HTTP_URL]]);if(t)return t;const n=F([e,"access",e=>e.spanContext,"call",e=>e(),"access",e=>e.traceState,"optionalAccess",e=>e.get,"call",e=>e(R)]);return n||void 0}(r),l=F([a.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e(),"optionalAccess",e=>e.tracePropagationTargets]);if("string"==typeof u&&l&&!this._shouldInjectTraceData(l,u))return void(V&&s.logger.log("[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:",u));const d=function(e){try{const t=e[E];return Array.isArray(t)?t.join(","):t}catch(e){return}}(t);let p=i.propagation.getBaggage(e)||i.propagation.createBaggage({});const{dynamicSamplingContext:h,traceId:f,spanId:m,sampled:g}=function(e){const t=a.hasTracingEnabled()?i.trace.getSpan(e):void 0,n=F([t,"optionalAccess",e=>e.spanContext,"call",e=>e(),"access",e=>e.isRemote]);if(t&&!n){const e=t.spanContext();return{dynamicSamplingContext:X(Z(t),e.traceId),traceId:e.traceId,spanId:e.spanId,sampled:D(e)}}const r=(F([w,"call",t=>t(e),"optionalAccess",e=>e.scope])||a.getCurrentScope()).getPropagationContext();return{dynamicSamplingContext:X(r,r.traceId),traceId:r.traceId,spanId:r.spanId,sampled:r.sampled}}(e);if(d){const e=s.parseBaggageHeader(d);e&&Object.entries(e).forEach((([e,t])=>{p=p.setEntry(e,{value:t})}))}h&&(p=Object.entries(h).reduce(((e,[t,n])=>n?e.setEntry(`${s.SENTRY_BAGGAGE_KEY_PREFIX}${t}`,{value:n}):e),p)),f&&f!==i.INVALID_TRACEID&&n.set(t,b,s.generateSentryTraceHeader(f,m,g)),super.inject(i.propagation.setBaggage(e,p),t,n)}extract(e,t,n){const r=n.get(t,b),o=n.get(t,E),i=r?Array.isArray(r)?r[0]:r:void 0,c=s.propagationContextFromHeaders(i,o),u=Y(e,{sentryTrace:i,baggage:o}),l=w(u),d={scope:l?l.scope.clone():a.getCurrentScope().clone(),isolationScope:l?l.isolationScope:a.getIsolationScope()};return d.scope.setPropagationContext(c),L(u,d)}fields(){return[b,E]}_shouldInjectTraceData(e,t){if(void 0===e)return!0;const n=this._urlMatchesTargetsMap.get(t);if(void 0!==n)return n;const r=s.stringMatchesSomePattern(t,e);return this._urlMatchesTargetsMap.set(t,r),r}}function X(e,t){if(F([e,"optionalAccess",e=>e.dsc]))return e.dsc;const n=a.getClient();return n?a.getDynamicSamplingContextFromClient(t||e.traceId,n):void 0}function Y(e,{sentryTrace:t,baggage:n}){const r=G(s.propagationContextFromHeaders(t,n));return i.trace.setSpanContext(e,r)}function K(e,t){const n=q(),{name:r,parentSpan:o}=e;return te(o)((()=>{const o=ee(e.scope,e.forceTransaction),s=e.onlyIfParent&&!i.trace.getSpan(o)?c.suppressTracing(o):o,u=Q(e);return n.startActiveSpan(r,u,s,(e=>a.handleCallbackErrors((()=>t(e)),(()=>{void 0===a.spanToJSON(e).status&&e.setStatus({code:i.SpanStatusCode.ERROR})}),(()=>e.end()))))}))}function J(e,t){const n=q(),{name:r,parentSpan:o}=e;return te(o)((()=>{const o=ee(e.scope,e.forceTransaction),s=e.onlyIfParent&&!i.trace.getSpan(o)?c.suppressTracing(o):o,u=Q(e);return n.startActiveSpan(r,u,s,(e=>a.handleCallbackErrors((()=>t(e,(()=>e.end()))),(()=>{void 0===a.spanToJSON(e).status&&e.setStatus({code:i.SpanStatusCode.ERROR})}))))}))}function z(e){const t=q(),{name:n,parentSpan:r}=e;return te(r)((()=>{const r=ee(e.scope,e.forceTransaction),o=e.onlyIfParent&&!i.trace.getSpan(r)?c.suppressTracing(r):r,s=Q(e);return t.startSpan(n,s,o)}))}function $(e,t){const n=e?i.trace.setSpan(i.context.active(),e):i.trace.deleteSpan(i.context.active());return i.context.with(n,(()=>t(a.getCurrentScope())))}function q(){const e=a.getClient();return e&&e.tracer||i.trace.getTracer("@sentry/opentelemetry",a.SDK_VERSION)}function Q(e){const{startTime:t,attributes:n,kind:r,op:o}=e,s="number"==typeof t?(i=t)<9999999999?1e3*i:i:t;var i;return{attributes:o?{[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]:o,...n}:n,kind:r,startTime:s}}function ee(e,t){const n=function(e){if(e){const t=function(e){return e[P]}(e);if(t)return t}return i.context.active()}(e),r=function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}([w,"call",e=>e(n),"optionalAccess",e=>e.scope]),o=i.trace.getSpan(n);if(!o){const e=a.getClient();if(r&&e){const e=r.getPropagationContext(),t=k({parentSpanId:e.parentSpanId,dsc:void 0,sampled:e.sampled}),o={traceId:e.traceId,spanId:e.parentSpanId||e.spanId,isRemote:!0,traceFlags:e.sampled?i.TraceFlags.SAMPLED:i.TraceFlags.NONE,traceState:t};return i.trace.setSpanContext(n,o)}return n}if(!t)return n;const s=i.trace.deleteSpan(n),{spanId:c,traceId:u}=o.spanContext(),l=D(o.spanContext()),d=a.getRootSpan(o),p=k({dsc:a.getDynamicSamplingContextFromSpan(d),parentSpanId:c!==i.INVALID_SPANID?c:void 0,sampled:l}),h={traceId:u,spanId:c,isRemote:!0,traceFlags:l?i.TraceFlags.SAMPLED:i.TraceFlags.NONE,traceState:p};return i.trace.setSpanContext(s,h)}function te(e){return void 0!==e?t=>$(e,t):e=>e()}function ne(e){const t=c.suppressTracing(i.context.active());return i.context.with(t,e)}function re(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function oe(e){return!0===e.attributes[d]?void 0:e.parentSpanId}function se(e,t){const n=t.spanContext().spanId,r=oe(t);if(!r)return void ie(e,{id:n,span:t,children:[]});const o=function(e,t){const n=e.get(t);return n||ie(e,{id:t,children:[]})}(e,r),s=ie(e,{id:n,span:t,parentNode:o,children:[]});o.children.push(s)}function ie(e,t){const n=e.get(t.id);return n&&n.span?n:n&&!n.span?(n.span=t.span,n.parentNode=t.parentNode,n):(e.set(t.id,t),t)}const ae={1:"cancelled",2:"unknown_error",3:"invalid_argument",4:"deadline_exceeded",5:"not_found",6:"already_exists",7:"permission_denied",8:"resource_exhausted",9:"failed_precondition",10:"aborted",11:"out_of_range",12:"unimplemented",13:"internal_error",14:"unavailable",15:"data_loss",16:"unauthenticated"},ce=e=>Object.values(ae).includes(e);function ue(e){const t=h(e)?e.attributes:{},n=m(e)?e.status:void 0;if(n){if(n.code===i.SpanStatusCode.OK)return{code:a.SPAN_STATUS_OK};if(n.code===i.SpanStatusCode.ERROR){if(void 0===n.message){const e=le(t);if(e)return e}return n.message&&ce(n.message)?{code:a.SPAN_STATUS_ERROR,message:n.message}:{code:a.SPAN_STATUS_ERROR,message:"unknown_error"}}}return le(t)||(n&&n.code===i.SpanStatusCode.UNSET?{code:a.SPAN_STATUS_OK}:{code:a.SPAN_STATUS_ERROR,message:"unknown_error"})}function le(e){const t=e[o.SEMATTRS_HTTP_STATUS_CODE],n=e[o.SEMATTRS_RPC_GRPC_STATUS_CODE],r="number"==typeof t?t:"string"==typeof t?parseInt(t):void 0;return"number"==typeof r?a.getSpanStatusFromHttpCode(r):"string"==typeof n?{code:a.SPAN_STATUS_ERROR,message:ae[n]||"unknown_error"}:void 0}function de(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class pe{constructor(e){this._finishedSpans=[],this._timeout=de([e,"optionalAccess",e=>e.timeout])||300}export(e){if(this._finishedSpans.push(e),oe(e)){const e=this._finishedSpans.length;return V&&s.logger.log(`SpanExporter has ${e} unsent spans remaining`),void this._cleanupOldSpans()}this._clearTimeout(),this._flushTimeout=setTimeout((()=>{this.flush()}),1)}flush(){this._clearTimeout();const e=this._finishedSpans.length,t=function(e){const t=function(e){const t=new Map;for(const n of e)se(t,n);return Array.from(t,(function([e,t]){return t}))}(e),n=new Set(t);return(r=t,r.filter(he)).forEach((e=>{n.delete(e);const t=e.span,r=function(e){const{op:t,description:n,data:r,origin:o="manual",source:i}=me(e),c=a.getCapturedScopesOnSpan(e),u=e.attributes[a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE],l=s.dropUndefinedKeys({[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:i,[a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]:u,[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]:t,[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:o,...r,...ge(e.attributes)}),{traceId:d,spanId:p}=e.spanContext(),h=de([e,"access",e=>e.spanContext,"call",e=>e(),"access",e=>e.traceState,"optionalAccess",e=>e.get,"call",e=>e(T)]),f="string"==typeof h?h||void 0:e.parentSpanId,m=ue(e);return{contexts:{trace:s.dropUndefinedKeys({parent_span_id:f,span_id:p,trace_id:d,data:l,origin:o,op:t,status:a.getStatusMessage(m)}),otel:{resource:e.resource.attributes}},spans:[],start_timestamp:a.spanTimeInputToSeconds(e.startTime),timestamp:a.spanTimeInputToSeconds(e.endTime),transaction:n,type:"transaction",sdkProcessingMetadata:{...s.dropUndefinedKeys({capturedSpanScope:c.scope,capturedSpanIsolationScope:c.isolationScope,sampleRate:u,dynamicSamplingContext:a.getDynamicSamplingContextFromSpan(e)})},...i&&{transaction_info:{source:i}},_metrics_summary:a.getMetricSummaryJsonForSpan(e)}}(t),o=r.spans||[];e.children.forEach((e=>{fe(e,o,n)})),r.spans=o.length>1e3?o.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):o;const i=a.timedEventsToMeasurements(t.events);i&&(r.measurements=i),a.captureEvent(r)})),Array.from(n).map((e=>e.span)).filter((e=>!!e));var r}(this._finishedSpans),n=t.length,r=e-n;V&&s.logger.log(`SpanExporter exported ${r} spans, ${n} unsent spans remaining`),this._cleanupOldSpans(t)}clear(){this._finishedSpans=[],this._clearTimeout()}_clearTimeout(){this._flushTimeout&&(clearTimeout(this._flushTimeout),this._flushTimeout=void 0)}_cleanupOldSpans(e=this._finishedSpans){this._finishedSpans=e.filter((e=>{const t=function(e,t){const n=Date.now()/1e3-t;return a.spanTimeInputToSeconds(e.startTime)<n}(e,this._timeout);return V&&t&&s.logger.log(`SpanExporter dropping span ${e.name} (${e.spanContext().spanId}) because it is pending for more than 5 minutes.`),!t}))}}function he(e){return!!e.span&&!e.parentNode}function fe(e,t,n){n.delete(e);const r=e.span;if(!r)return void e.children.forEach((e=>{fe(e,t,n)}));const o=r.spanContext().spanId,i=r.spanContext().traceId,{attributes:c,startTime:u,endTime:l,parentSpanId:d}=r,{op:p,description:h,data:f,origin:m="manual"}=me(r),g=s.dropUndefinedKeys({[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:m,[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]:p,...ge(c),...f}),_=ue(r),y=s.dropUndefinedKeys({span_id:o,trace_id:i,data:g,description:h,parent_span_id:d,start_timestamp:a.spanTimeInputToSeconds(u),timestamp:a.spanTimeInputToSeconds(l)||void 0,status:a.getStatusMessage(_),op:p,origin:m,_metrics_summary:a.getMetricSummaryJsonForSpan(r),measurements:a.timedEventsToMeasurements(r.events)});t.push(y),e.children.forEach((e=>{fe(e,t,n)}))}function me(e){const{op:t,source:n,origin:r}=function(e){const t=e.attributes;return{origin:t[a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],op:t[a.SEMANTIC_ATTRIBUTE_SENTRY_OP],source:t[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]}}(e),{op:o,description:s,source:i,data:c}=x(e);return{op:t||o,description:s,source:n||i,origin:r,data:{...c,..._e(e)}}}function ge(e){const t={...e};return delete t[a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE],delete t[d],t}function _e(e){const t=e.attributes,n={};if(e.kind!==i.SpanKind.INTERNAL&&(n["otel.kind"]=i.SpanKind[e.kind]),t[o.SEMATTRS_HTTP_STATUS_CODE]){const e=t[o.SEMATTRS_HTTP_STATUS_CODE];n["http.response.status_code"]=e}const r=y(e);return r.url&&(n.url=r.url),r["http.query"]&&(n["http.query"]=r["http.query"].slice(1)),r["http.fragment"]&&(n["http.fragment"]=r["http.fragment"].slice(1)),n}function ye(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Se({decision:e,context:t,spanAttributes:n}){const s=function(e,t){const n=i.trace.getSpan(e),s=r([n,"optionalAccess",e=>e.spanContext,"call",e=>e()]);let a=r([s,"optionalAccess",e=>e.traceState])||new c.TraceState;const u=t[o.SEMATTRS_HTTP_URL];return u&&"string"==typeof u&&(a=a.set(R,u)),a}(t,n);return null==e?{decision:u.SamplingDecision.NOT_RECORD,traceState:s}:e===u.SamplingDecision.NOT_RECORD?{decision:e,traceState:s.set(I,"1")}:{decision:e,traceState:s}}t.getClient=a.getClient,t.getCurrentHubShim=a.getCurrentHubShim,t.getDynamicSamplingContextFromSpan=a.getDynamicSamplingContextFromSpan,t.SEMANTIC_ATTRIBUTE_SENTRY_GRAPHQL_OPERATION=p,t.SentryPropagator=W,t.SentrySampler=class{constructor(e){this._client=e,B("SentrySampler")}shouldSample(e,t,n,c,l,d){const p=this._client.getOptions(),h=i.trace.getSpan(e),f=r([h,"optionalAccess",e=>e.spanContext,"call",e=>e()]);if(!a.hasTracingEnabled(p))return Se({decision:void 0,context:e,spanAttributes:l});if(c===i.SpanKind.CLIENT&&l[o.SEMATTRS_HTTP_METHOD]&&(!h||r([f,"optionalAccess",e=>e.isRemote])))return Se({decision:void 0,context:e,spanAttributes:l});const m=h?function(e,t,n){const r=e.spanContext();if(i.isSpanContextValid(r)&&r.traceId===t){if(r.isRemote){const t=function(e){const t=e.spanContext().traceId,n=Z(e);return n&&t===n.traceId?n.sampled:void 0}(e);return V&&s.logger.log(`[Tracing] Inheriting remote parent's sampled decision for ${n}: ${t}`),t}const t=D(r);return V&&s.logger.log(`[Tracing] Inheriting parent's sampled decision for ${n}: ${t}`),t}}(h,t,n):void 0,{description:g,data:_,op:y}=M(n,l,c),S={..._,...l};y&&(S[a.SEMANTIC_ATTRIBUTE_SENTRY_OP]=y);const b={decision:!0};if(this._client.emit("beforeSampling",{spanAttributes:S,spanName:g,parentSampled:m,parentContext:f},b),!b.decision)return Se({decision:void 0,context:e,spanAttributes:l});const[E,v]=a.sampleSpan(p,{name:g,attributes:S,transactionContext:{name:g,parentSampled:m},parentSampled:m}),T={[a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]:v},I=`${l[o.SEMATTRS_HTTP_METHOD]}`.toUpperCase();return"OPTIONS"===I||"HEAD"===I?(V&&s.logger.log(`[Tracing] Not sampling span because HTTP method is '${I}' for ${n}`),{...Se({decision:u.SamplingDecision.NOT_RECORD,context:e,spanAttributes:l}),attributes:T}):E?{...Se({decision:u.SamplingDecision.RECORD_AND_SAMPLED,context:e,spanAttributes:l}),attributes:T}:{...Se({decision:u.SamplingDecision.NOT_RECORD,context:e,spanAttributes:l}),attributes:T}}toString(){return"SentrySampler"}},t.SentrySpanProcessor=class{constructor(e){B("SentrySpanProcessor"),this._exporter=new pe(e)}async forceFlush(){this._exporter.flush()}async shutdown(){this._exporter.clear()}onStart(e,t){!function(e,t){const n=i.trace.getSpan(t);let r=w(t);n&&!n.spanContext().isRemote&&a.addChildSpanToSpan(n,e),n&&n.spanContext().isRemote&&e.setAttribute(d,!0),t===i.ROOT_CONTEXT&&(r={scope:a.getDefaultCurrentScope(),isolationScope:a.getDefaultIsolationScope()}),r&&a.setCapturedScopesOnSpan(e,r.scope,r.isolationScope),a.logSpanStart(e),ye([a.getClient(),"optionalAccess",e=>e.emit,"call",t=>t("spanStart",e)])}(e,t)}onEnd(e){!function(e){a.logSpanEnd(e),ye([a.getClient(),"optionalAccess",e=>e.emit,"call",t=>t("spanEnd",e)])}(e),this._exporter.export(e)}},t.addOpenTelemetryInstrumentation=function(...e){l.registerInstrumentations({instrumentations:e})},t.continueTrace=function(e,t){return a.continueTrace(e,(()=>function(e,t,n){const r=Y(e,t);return i.context.with(r,n)}(i.context.active(),e,t)))},t.enhanceDscWithOpenTelemetryRootSpanName=function(e){e.on("createDsc",((e,t)=>{if(t){const n=(a.spanToJSON(t).data||{})[a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],{description:r}=g(t)?x(t):{description:void 0};"url"!==n&&r&&(e.transaction=r)}}))},t.generateSpanContextForPropagationContext=G,t.getActiveSpan=U,t.getPropagationContextFromSpan=Z,t.getRequestSpanData=y,t.getScopesFromContext=w,t.getSpanKind=S,t.isSentryRequestSpan=function(e){if(!h(e))return!1;const{attributes:t}=e,n=t[o.SEMATTRS_HTTP_URL];return!!n&&a.isSentryRequestUrl(n.toString(),a.getClient())},t.openTelemetrySetupCheck=function(){return Array.from(j)},t.setOpenTelemetryContextAsyncContextStrategy=function(){function e(){return w(i.context.active())||{scope:a.getDefaultCurrentScope(),isolationScope:a.getDefaultIsolationScope()}}function t(){return e().scope}function n(){return e().isolationScope}a.setAsyncContextStrategy({withScope:function(e){const n=i.context.active();return i.context.with(n,(()=>e(t())))},withSetScope:function(e,t){const n=i.context.active();return i.context.with(n.setValue(O,e),(()=>t(e)))},withSetIsolationScope:function(e,t){const r=i.context.active();return i.context.with(r.setValue(N,e),(()=>t(n())))},withIsolationScope:function(e){const t=i.context.active();return i.context.with(t.setValue(C,!0),(()=>e(n())))},getCurrentScope:t,getIsolationScope:n,startSpan:K,startSpanManual:J,startInactiveSpan:z,getActiveSpan:U,withActiveSpan:$,suppressTracing:ne})},t.setupEventContextTrace=function(e){e.on("preprocessEvent",(e=>{const t=U();if(!t||"transaction"===e.type)return;const n=t.spanContext(),r=function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}([n,"access",e=>e.traceState,"optionalAccess",e=>e.get,"call",e=>e(T)]),o="string"==typeof r?r||void 0:_(t)?t.parentSpanId:void 0;e.contexts={trace:s.dropUndefinedKeys({trace_id:n.traceId,span_id:n.spanId,parent_span_id:o}),...e.contexts};const i=a.getRootSpan(t);return e.sdkProcessingMetadata={dynamicSamplingContext:a.getDynamicSamplingContextFromSpan(i),...e.sdkProcessingMetadata},e}))},t.spanHasAttributes=h,t.spanHasEvents=function(e){const t=e;return Array.isArray(t.events)},t.spanHasKind=f,t.spanHasName=g,t.spanHasParentId=_,t.spanHasStatus=m,t.startInactiveSpan=z,t.startSpan=K,t.startSpanManual=J,t.suppressTracing=ne,t.withActiveSpan=$,t.wrapClientClass=function(e){return class extends e{constructor(...e){super(...e)}get tracer(){if(this._tracer)return this._tracer;const e=a.SDK_VERSION,t=i.trace.getTracer("@sentry/opentelemetry",e);return this._tracer=t,t}async flush(e){const t=function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}([this.traceProvider,"optionalAccess",e=>e.activeSpanProcessor]);return t&&await t.forceFlush(),super.flush(e)}}},t.wrapContextManagerClass=function(e){return class extends e{constructor(...e){super(...e),B("SentryContextManager")}with(e,t,n,...r){const o=w(e),i=re([o,"optionalAccess",e=>e.scope])||a.getCurrentScope(),c=re([o,"optionalAccess",e=>e.isolationScope])||a.getIsolationScope(),u=!0===e.getValue(C),l=e.getValue(O),d=e.getValue(N),p=l||i.clone(),h=L(e,{scope:p,isolationScope:d||(u?c.clone():c)}).deleteValue(C).deleteValue(O).deleteValue(N);return function(e,t){s.addNonEnumerableProperty(e,P,t)}(p,h),super.with(h,t,n,...r)}}},t.wrapSamplingDecision=Se},17939:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518),o=n(25551);function s(e,t,n,o,c,u,l,d){if(u.length>=n+1)return u;let p=[...u];if(r.isInstanceOf(o[c],Error)){i(l,d);const r=e(t,o[c]),u=p.length;a(r,c,u,d),p=s(e,t,n,o[c],c,[r,...p],r,u)}return Array.isArray(o.errors)&&o.errors.forEach(((o,u)=>{if(r.isInstanceOf(o,Error)){i(l,d);const r=e(t,o),h=p.length;a(r,`errors[${u}]`,h,d),p=s(e,t,n,o,c,[r,...p],r,h)}})),p}function i(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function a(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}t.applyAggregateErrorsToEvent=function(e,t,n=250,i,a,c,u){if(!(c.exception&&c.exception.values&&u&&r.isInstanceOf(u.originalException,Error)))return;const l=c.exception.values.length>0?c.exception.values[c.exception.values.length-1]:void 0;var d,p;l&&(c.exception.values=(d=s(e,t,a,u.originalException,i,c.exception.values,l,0),p=n,d.map((e=>(e.value&&(e.value=o.truncate(e.value,p)),e)))))}},2275:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(13227),o=n(73877),s=n(64683);t.callFrameToStackFrame=function(e,t,n){const i=t?t.replace(/^file:\/\//,""):void 0,a=e.location.columnNumber?e.location.columnNumber+1:void 0,c=e.location.lineNumber?e.location.lineNumber+1:void 0;return o.dropUndefinedKeys({filename:i,module:n(i),function:e.functionName||s.UNKNOWN_FUNCTION,colno:a,lineno:c,in_app:i?r.filenameIsInApp(i):void 0})},t.watchdogTimer=function(e,t,n,r){const o=e();let s=!1,i=!0;return setInterval((()=>{const e=o.getTimeMs();!1===s&&e>t+n&&(s=!0,i&&r()),e<t+n&&(s=!1)}),20),{poll:()=>{o.reset()},enabled:e=>{i=e}}}},91545:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=function(e){const t=[],n=e=>{e.forEach((e=>{Array.isArray(e)?n(e):t.push(e)}))};return n(e),t}},47542:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(98750),o=n(70518),s=n(68030),i="sentry-",a=/^sentry-/;function c(e){if(e&&(o.isString(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce(((e,t)=>{const n=u(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{}):u(e)}function u(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}t.BAGGAGE_HEADER_NAME="baggage",t.MAX_BAGGAGE_STRING_LENGTH=8192,t.SENTRY_BAGGAGE_KEY_PREFIX=i,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=a,t.baggageHeaderToDynamicSamplingContext=function(e){const t=c(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(a)&&(e[t.slice(7)]=n),e)),{});return Object.keys(n).length>0?n:void 0},t.dynamicSamplingContextToSentryBaggageHeader=function(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce(((e,[t,n],o)=>{const i=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===o?i:`${e},${i}`;return a.length>8192?(r.DEBUG_BUILD&&s.logger.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${i}${t}`]=n),e)),{}))},t.parseBaggageHeader=c},64796:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518),o=n(28355).GLOBAL_OBJ;function s(e,t){const n=e,s=[];if(!n||!n.tagName)return"";if(o.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}s.push(n.tagName.toLowerCase());const i=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(i&&i.length)i.forEach((e=>{s.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&s.push(`#${n.id}`);const e=n.className;if(e&&r.isString(e)){const t=e.split(/\s+/);for(const e of t)s.push(`.${e}`)}}const a=["aria-label","type","name","title","alt"];for(const e of a){const t=n.getAttribute(e);t&&s.push(`[${e}="${t}"]`)}return s.join("")}t.getComponentName=function(e){if(!o.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null},t.getDomElement=function(e){return o.document&&o.document.querySelector?o.document.querySelector(e):null},t.getLocationHref=function(){try{return o.document.location.href}catch(e){return""}},t.htmlTreeAsString=function(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,a=0;const c=" > ",u=c.length;let l;const d=Array.isArray(t)?t:t.keyAttrs,p=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(l=s(n,d),!("html"===l||i>1&&a+o.length*u+l.length>=p));)o.push(l),a+=l.length,n=n.parentNode;return o.reverse().join(c)}catch(e){return"<unknown>"}}},50652:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(33050);t._asyncNullishCoalesce=async function(e,t){return r._nullishCoalesce(e,t)}},96885:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._asyncOptionalChain=async function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=await s(n)):"call"!==o&&"optionalCall"!==o||(n=await s(((...e)=>n.call(t,...e))),t=void 0)}return n}},6798:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(96885);t._asyncOptionalChainDelete=async function(e){const t=await r._asyncOptionalChain(e);return null==t||t}},33050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._nullishCoalesce=function(e,t){return null!=e?e:t()}},40271:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._optionalChain=function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}},72160:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(40271);t._optionalChainDelete=function(e){const t=r._optionalChain(e);return null==t||t}},38646:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeFifoCache=function(e){let t=[],n={};return{add(r,o){for(;t.length>=e;){const e=t.shift();void 0!==e&&delete n[e]}n[r]&&this.delete(r),t.push(r),n[r]=o},clear(){n={},t=[]},get:e=>n[e],size:()=>t.length,delete(e){if(!n[e])return!1;delete n[e];for(let n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}return!0}}}},55371:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(23374),o=n(86867);t.createClientReportEnvelope=function(e,t,n){const s=[{type:"client_report"},{timestamp:n||o.dateTimestampInSeconds(),discarded_events:e}];return r.createEnvelope(t?{dsn:t}:{},[s])}},65396:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookie=function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let o=e.indexOf(";",n);if(-1===o)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}const s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,o).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[s]=n}}n=o+1}return t}},98750:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},27605:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(98750),o=n(68030),s=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function i(e){const t=s.exec(e);if(!t)return void o.consoleSandbox((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,i="",c="",u="",l=""]=t.slice(1);let d="",p=l;const h=p.split("/");if(h.length>1&&(d=h.slice(0,-1).join("/"),p=h.pop()),p){const e=p.match(/^\d+/);e&&(p=e[0])}return a({host:c,pass:i,path:d,projectId:p,port:u,protocol:n,publicKey:r})}function a(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}t.dsnFromString=i,t.dsnToString=function(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`},t.makeDsn=function(e){const t="string"==typeof e?i(e):a(e);if(t&&function(e){if(!r.DEBUG_BUILD)return!0;const{port:t,projectId:n,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(o.logger.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(s)?t&&isNaN(parseInt(t,10))&&(o.logger.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(o.logger.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(o.logger.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}},62827:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKSource=function(){return"npm"},t.isBrowserBundle=function(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}},23374:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(27605),o=n(95027),s=n(73877),i=n(28355);function a(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function c(e){return i.GLOBAL_OBJ.__SENTRY__&&i.GLOBAL_OBJ.__SENTRY__.encodePolyfill?i.GLOBAL_OBJ.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}const u={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};t.addItemToEnvelope=function(e,t){const[n,r]=e;return[n,[...r,t]]},t.createAttachmentEnvelopeItem=function(e){const t="string"==typeof e.data?c(e.data):e.data;return[s.dropUndefinedKeys({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]},t.createEnvelope=function(e,t=[]){return[e,t]},t.createEventEnvelopeHeaders=function(e,t,n,o){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&o&&{dsn:r.dsnToString(o)},...i&&{trace:s.dropUndefinedKeys({...i})}}},t.createSpanEnvelopeItem=function(e){return[{type:"span"},e]},t.envelopeContainsItemType=function(e,t){return a(e,((e,n)=>t.includes(n)))},t.envelopeItemTypeToDataCategory=function(e){return u[e]},t.forEachEnvelopeItem=a,t.getSdkMetadataForEnvelopeHeader=function(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}},t.parseEnvelope=function(e){let t="string"==typeof e?c(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse((r=n(e),i.GLOBAL_OBJ.__SENTRY__&&i.GLOBAL_OBJ.__SENTRY__.decodePolyfill?i.GLOBAL_OBJ.__SENTRY__.decodePolyfill(r):(new TextDecoder).decode(r)));var r}const o=r(),s=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;s.push([e,t?n(t):r()])}return[o,s]},t.serializeEnvelope=function(e){const[t,n]=e;let r=JSON.stringify(t);function s(e){"string"==typeof r?r="string"==typeof e?r+e:[c(r),e]:r.push("string"==typeof e?c(e):e)}for(const e of n){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(o.normalize(n))}s(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}},74610:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}t.SentryError=n},94521:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518),o=n(5258),s=n(95027),i=n(73877);function a(e,t){return e(t.stack||"",1)}function c(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=a(e,t);return r.length&&(n.stacktrace={frames:r}),n}function u(e,t,n,o){if(r.isError(n))return[n,void 0];if(t.synthetic=!0,r.isPlainObject(n)){const t=e&&e.getOptions().normalizeDepth,a={__serialized__:s.normalizeToSize(n,t)},c=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(n);if(c)return[c,a];const u=function(e){if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message '${e.message}'`),t}if("message"in e&&"string"==typeof e.message)return e.message;const t=i.extractExceptionKeysForMessage(e);if(r.isErrorEvent(e))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;const n=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e);return`${n&&"Object"!==n?`'${n}'`:"Object"} captured as exception with keys: ${t}`}(n),l=o&&o.syntheticException||new Error(u);return l.message=u,[l,a]}const a=o&&o.syntheticException||new Error(n);return a.message=`${n}`,[a,void 0]}t.eventFromMessage=function(e,t,n="info",o,s){const i={event_id:o&&o.event_id,level:n};if(s&&o&&o.syntheticException){const n=a(e,o.syntheticException);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(r.isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i},t.eventFromUnknownInput=function(e,t,n,r){const s=r&&r.data&&r.data.mechanism||{handled:!0,type:"generic"},[i,a]=u(e,s,n,r),l={exception:{values:[c(t,i)]}};return a&&(l.extra=a),o.addExceptionTypeValue(l,void 0,void 0),o.addExceptionMechanism(l,s),{...l,event_id:r&&r.event_id}},t.exceptionFromError=c,t.parseStackFrames=a},24320:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(17939),o=n(91545),s=n(64796),i=n(27605),a=n(74610),c=n(28355),u=n(92717),l=n(77560),d=n(6127),p=n(85855),h=n(17951),f=n(70518),m=n(47756),g=n(68030),_=n(76536),y=n(5258),S=n(19950),b=n(95027),E=n(73877),v=n(37417),T=n(93731),I=n(653),R=n(78773),A=n(64683),C=n(13227),O=n(25551),N=n(28786),P=n(64920),w=n(86867),L=n(68578),M=n(62827),x=n(23374),k=n(55371),G=n(42469),U=n(47542),V=n(90465),H=n(38646),D=n(94521),j=n(2275),B=n(49461),F=n(50652),Z=n(96885),W=n(6798),X=n(33050),Y=n(40271),K=n(72160),J=n(18871),z=n(79276),$=n(59747),q=n(54551);t.applyAggregateErrorsToEvent=r.applyAggregateErrorsToEvent,t.flatten=o.flatten,t.getComponentName=s.getComponentName,t.getDomElement=s.getDomElement,t.getLocationHref=s.getLocationHref,t.htmlTreeAsString=s.htmlTreeAsString,t.dsnFromString=i.dsnFromString,t.dsnToString=i.dsnToString,t.makeDsn=i.makeDsn,t.SentryError=a.SentryError,t.GLOBAL_OBJ=c.GLOBAL_OBJ,t.getGlobalSingleton=c.getGlobalSingleton,t.addConsoleInstrumentationHandler=u.addConsoleInstrumentationHandler,t.addFetchEndInstrumentationHandler=l.addFetchEndInstrumentationHandler,t.addFetchInstrumentationHandler=l.addFetchInstrumentationHandler,t.addGlobalErrorInstrumentationHandler=d.addGlobalErrorInstrumentationHandler,t.addGlobalUnhandledRejectionInstrumentationHandler=p.addGlobalUnhandledRejectionInstrumentationHandler,t.addHandler=h.addHandler,t.maybeInstrument=h.maybeInstrument,t.resetInstrumentationHandlers=h.resetInstrumentationHandlers,t.triggerHandlers=h.triggerHandlers,t.isDOMError=f.isDOMError,t.isDOMException=f.isDOMException,t.isElement=f.isElement,t.isError=f.isError,t.isErrorEvent=f.isErrorEvent,t.isEvent=f.isEvent,t.isInstanceOf=f.isInstanceOf,t.isParameterizedString=f.isParameterizedString,t.isPlainObject=f.isPlainObject,t.isPrimitive=f.isPrimitive,t.isRegExp=f.isRegExp,t.isString=f.isString,t.isSyntheticEvent=f.isSyntheticEvent,t.isThenable=f.isThenable,t.isVueViewModel=f.isVueViewModel,t.isBrowser=m.isBrowser,t.CONSOLE_LEVELS=g.CONSOLE_LEVELS,t.consoleSandbox=g.consoleSandbox,t.logger=g.logger,t.originalConsoleMethods=g.originalConsoleMethods,t.memoBuilder=_.memoBuilder,t.addContextToFrame=y.addContextToFrame,t.addExceptionMechanism=y.addExceptionMechanism,t.addExceptionTypeValue=y.addExceptionTypeValue,t.arrayify=y.arrayify,t.checkOrSetAlreadyCaught=y.checkOrSetAlreadyCaught,t.getEventDescription=y.getEventDescription,t.parseSemver=y.parseSemver,t.uuid4=y.uuid4,t.dynamicRequire=S.dynamicRequire,t.isNodeEnv=S.isNodeEnv,t.loadModule=S.loadModule,t.normalize=b.normalize,t.normalizeToSize=b.normalizeToSize,t.normalizeUrlToBase=b.normalizeUrlToBase,t.addNonEnumerableProperty=E.addNonEnumerableProperty,t.convertToPlainObject=E.convertToPlainObject,t.dropUndefinedKeys=E.dropUndefinedKeys,t.extractExceptionKeysForMessage=E.extractExceptionKeysForMessage,t.fill=E.fill,t.getOriginalFunction=E.getOriginalFunction,t.markFunctionWrapped=E.markFunctionWrapped,t.objectify=E.objectify,t.urlEncode=E.urlEncode,t.basename=v.basename,t.dirname=v.dirname,t.isAbsolute=v.isAbsolute,t.join=v.join,t.normalizePath=v.normalizePath,t.relative=v.relative,t.resolve=v.resolve,t.makePromiseBuffer=T.makePromiseBuffer,t.DEFAULT_USER_INCLUDES=I.DEFAULT_USER_INCLUDES,t.addRequestDataToEvent=I.addRequestDataToEvent,t.extractPathForTransaction=I.extractPathForTransaction,t.extractRequestData=I.extractRequestData,t.winterCGHeadersToDict=I.winterCGHeadersToDict,t.winterCGRequestToRequestData=I.winterCGRequestToRequestData,t.severityLevelFromString=R.severityLevelFromString,t.validSeverityLevels=R.validSeverityLevels,t.UNKNOWN_FUNCTION=A.UNKNOWN_FUNCTION,t.createStackParser=A.createStackParser,t.getFramesFromEvent=A.getFramesFromEvent,t.getFunctionName=A.getFunctionName,t.stackParserFromStackParserOptions=A.stackParserFromStackParserOptions,t.stripSentryFramesAndReverse=A.stripSentryFramesAndReverse,t.filenameIsInApp=C.filenameIsInApp,t.node=C.node,t.nodeStackLineParser=C.nodeStackLineParser,t.isMatchingPattern=O.isMatchingPattern,t.safeJoin=O.safeJoin,t.snipLine=O.snipLine,t.stringMatchesSomePattern=O.stringMatchesSomePattern,t.truncate=O.truncate,t.isNativeFunction=N.isNativeFunction,t.supportsDOMError=N.supportsDOMError,t.supportsDOMException=N.supportsDOMException,t.supportsErrorEvent=N.supportsErrorEvent,t.supportsFetch=N.supportsFetch,t.supportsNativeFetch=N.supportsNativeFetch,t.supportsReferrerPolicy=N.supportsReferrerPolicy,t.supportsReportingObserver=N.supportsReportingObserver,t.SyncPromise=P.SyncPromise,t.rejectedSyncPromise=P.rejectedSyncPromise,t.resolvedSyncPromise=P.resolvedSyncPromise,Object.defineProperty(t,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>w._browserPerformanceTimeOriginMode}),t.browserPerformanceTimeOrigin=w.browserPerformanceTimeOrigin,t.dateTimestampInSeconds=w.dateTimestampInSeconds,t.timestampInSeconds=w.timestampInSeconds,t.TRACEPARENT_REGEXP=L.TRACEPARENT_REGEXP,t.extractTraceparentData=L.extractTraceparentData,t.generateSentryTraceHeader=L.generateSentryTraceHeader,t.propagationContextFromHeaders=L.propagationContextFromHeaders,t.getSDKSource=M.getSDKSource,t.isBrowserBundle=M.isBrowserBundle,t.addItemToEnvelope=x.addItemToEnvelope,t.createAttachmentEnvelopeItem=x.createAttachmentEnvelopeItem,t.createEnvelope=x.createEnvelope,t.createEventEnvelopeHeaders=x.createEventEnvelopeHeaders,t.createSpanEnvelopeItem=x.createSpanEnvelopeItem,t.envelopeContainsItemType=x.envelopeContainsItemType,t.envelopeItemTypeToDataCategory=x.envelopeItemTypeToDataCategory,t.forEachEnvelopeItem=x.forEachEnvelopeItem,t.getSdkMetadataForEnvelopeHeader=x.getSdkMetadataForEnvelopeHeader,t.parseEnvelope=x.parseEnvelope,t.serializeEnvelope=x.serializeEnvelope,t.createClientReportEnvelope=k.createClientReportEnvelope,t.DEFAULT_RETRY_AFTER=G.DEFAULT_RETRY_AFTER,t.disabledUntil=G.disabledUntil,t.isRateLimited=G.isRateLimited,t.parseRetryAfterHeader=G.parseRetryAfterHeader,t.updateRateLimits=G.updateRateLimits,t.BAGGAGE_HEADER_NAME=U.BAGGAGE_HEADER_NAME,t.MAX_BAGGAGE_STRING_LENGTH=U.MAX_BAGGAGE_STRING_LENGTH,t.SENTRY_BAGGAGE_KEY_PREFIX=U.SENTRY_BAGGAGE_KEY_PREFIX,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=U.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,t.baggageHeaderToDynamicSamplingContext=U.baggageHeaderToDynamicSamplingContext,t.dynamicSamplingContextToSentryBaggageHeader=U.dynamicSamplingContextToSentryBaggageHeader,t.parseBaggageHeader=U.parseBaggageHeader,t.getNumberOfUrlSegments=V.getNumberOfUrlSegments,t.getSanitizedUrlString=V.getSanitizedUrlString,t.parseUrl=V.parseUrl,t.stripUrlQueryAndFragment=V.stripUrlQueryAndFragment,t.makeFifoCache=H.makeFifoCache,t.eventFromMessage=D.eventFromMessage,t.eventFromUnknownInput=D.eventFromUnknownInput,t.exceptionFromError=D.exceptionFromError,t.parseStackFrames=D.parseStackFrames,t.callFrameToStackFrame=j.callFrameToStackFrame,t.watchdogTimer=j.watchdogTimer,t.LRUMap=B.LRUMap,t._asyncNullishCoalesce=F._asyncNullishCoalesce,t._asyncOptionalChain=Z._asyncOptionalChain,t._asyncOptionalChainDelete=W._asyncOptionalChainDelete,t._nullishCoalesce=X._nullishCoalesce,t._optionalChain=Y._optionalChain,t._optionalChainDelete=K._optionalChainDelete,t.generatePropagationContext=J.generatePropagationContext,t.SDK_VERSION=z.SDK_VERSION,t.escapeStringForRegex=$.escapeStringForRegex,t.supportsHistory=q.supportsHistory},92717:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(68030),o=n(73877),s=n(28355),i=n(17951);function a(){"console"in s.GLOBAL_OBJ&&r.CONSOLE_LEVELS.forEach((function(e){e in s.GLOBAL_OBJ.console&&o.fill(s.GLOBAL_OBJ.console,e,(function(t){return r.originalConsoleMethods[e]=t,function(...t){const n={args:t,level:e};i.triggerHandlers("console",n);const o=r.originalConsoleMethods[e];o&&o.apply(s.GLOBAL_OBJ.console,t)}}))}))}t.addConsoleInstrumentationHandler=function(e){const t="console";i.addHandler(t,e),i.maybeInstrument(t,a)}},77560:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518),o=n(73877),s=n(28786),i=n(86867),a=n(28355),c=n(17951);function u(e,t=!1){t&&!s.supportsNativeFetch()||o.fill(a.GLOBAL_OBJ,"fetch",(function(t){return function(...n){const{method:s,url:u}=h(n),l={args:n,fetchData:{method:s,url:u},startTimestamp:1e3*i.timestampInSeconds()};e||c.triggerHandlers("fetch",{...l});const d=(new Error).stack;return t.apply(a.GLOBAL_OBJ,n).then((async t=>(e?e(t):c.triggerHandlers("fetch",{...l,endTimestamp:1e3*i.timestampInSeconds(),response:t}),t)),(e=>{throw c.triggerHandlers("fetch",{...l,endTimestamp:1e3*i.timestampInSeconds(),error:e}),r.isError(e)&&void 0===e.stack&&(e.stack=d,o.addNonEnumerableProperty(e,"framesToPop",1)),e}))}}))}async function l(e){let t;try{t=e.clone()}catch(e){return}await async function(t){if(t&&t.body&&t.body.getReader){const n=t.body.getReader();return n.read().then((async function e({done:t}){if(t)return Promise.resolve();try{const t=await Promise.race([n.read(),new Promise((e=>{setTimeout((()=>{e({done:!0})}),5e3)}))]);await e(t)}catch(e){}})).then((()=>{c.triggerHandlers("fetch-body-resolved",{endTimestamp:1e3*i.timestampInSeconds(),response:e})})).catch((()=>{}))}}(t)}function d(e,t){return!!e&&"object"==typeof e&&!!e[t]}function p(e){return"string"==typeof e?e:e?d(e,"url")?e.url:e.toString?e.toString():"":""}function h(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:p(t),method:d(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:p(t),method:d(t,"method")?String(t.method).toUpperCase():"GET"}}t.addFetchEndInstrumentationHandler=function(e){const t="fetch-body-resolved";c.addHandler(t,e),c.maybeInstrument(t,(()=>u(l)))},t.addFetchInstrumentationHandler=function(e,t){const n="fetch";c.addHandler(n,e),c.maybeInstrument(n,(()=>u(void 0,t)))},t.parseFetchArgs=h},6127:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(28355),o=n(17951);let s=null;function i(){s=r.GLOBAL_OBJ.onerror,r.GLOBAL_OBJ.onerror=function(e,t,n,r,i){const a={column:r,error:i,line:n,msg:e,url:t};return o.triggerHandlers("error",a),!(!s||s.__SENTRY_LOADER__)&&s.apply(this,arguments)},r.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}t.addGlobalErrorInstrumentationHandler=function(e){const t="error";o.addHandler(t,e),o.maybeInstrument(t,i)}},85855:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(28355),o=n(17951);let s=null;function i(){s=r.GLOBAL_OBJ.onunhandledrejection,r.GLOBAL_OBJ.onunhandledrejection=function(e){const t=e;return o.triggerHandlers("unhandledrejection",t),!(s&&!s.__SENTRY_LOADER__)||s.apply(this,arguments)},r.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}t.addGlobalUnhandledRejectionInstrumentationHandler=function(e){const t="unhandledrejection";o.addHandler(t,e),o.maybeInstrument(t,i)}},17951:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(98750),o=n(68030),s=n(64683),i={},a={};t.addHandler=function(e,t){i[e]=i[e]||[],i[e].push(t)},t.maybeInstrument=function(e,t){a[e]||(t(),a[e]=!0)},t.resetInstrumentationHandlers=function(){Object.keys(i).forEach((e=>{i[e]=void 0}))},t.triggerHandlers=function(e,t){const n=e&&i[e];if(n)for(const i of n)try{i(t)}catch(t){r.DEBUG_BUILD&&o.logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${s.getFunctionName(i)}\nError:`,t)}}},70518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=Object.prototype.toString;function r(e,t){return n.call(e)===`[object ${t}]`}function o(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function s(e){return r(e,"Object")}function i(e,t){try{return e instanceof t}catch(e){return!1}}t.isDOMError=function(e){return r(e,"DOMError")},t.isDOMException=function(e){return r(e,"DOMException")},t.isElement=function(e){return"undefined"!=typeof Element&&i(e,Element)},t.isError=function(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return i(e,Error)}},t.isErrorEvent=function(e){return r(e,"ErrorEvent")},t.isEvent=function(e){return"undefined"!=typeof Event&&i(e,Event)},t.isInstanceOf=i,t.isParameterizedString=o,t.isPlainObject=s,t.isPrimitive=function(e){return null===e||o(e)||"object"!=typeof e&&"function"!=typeof e},t.isRegExp=function(e){return r(e,"RegExp")},t.isString=function(e){return r(e,"String")},t.isSyntheticEvent=function(e){return s(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e},t.isThenable=function(e){return Boolean(e&&e.then&&"function"==typeof e.then)},t.isVueViewModel=function(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}},47756:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(19950),o=n(28355);t.isBrowser=function(){return"undefined"!=typeof window&&(!r.isNodeEnv()||void 0!==o.GLOBAL_OBJ.process&&"renderer"===o.GLOBAL_OBJ.process.type)}},68030:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(98750),o=n(28355),s=["debug","info","warn","error","log","assert","trace"],i={};function a(e){if(!("console"in o.GLOBAL_OBJ))return e();const t=o.GLOBAL_OBJ.console,n={},r=Object.keys(i);r.forEach((e=>{const r=i[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const c=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return r.DEBUG_BUILD?s.forEach((n=>{t[n]=(...t)=>{e&&a((()=>{o.GLOBAL_OBJ.console[n](`Sentry Logger [${n}]:`,...t)}))}})):s.forEach((e=>{t[e]=()=>{}})),t}();t.CONSOLE_LEVELS=s,t.consoleSandbox=a,t.logger=c,t.originalConsoleMethods=i},49461:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=class{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){const t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(e,t)}remove(e){const t=this._cache.get(e);return t&&this._cache.delete(e),t}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const e=[];return this._cache.forEach((t=>e.push(t))),e}}},76536:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoBuilder=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}},5258:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(73877),o=n(25551),s=n(28355);function i(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function c(e){return parseInt(e||"",10)}t.addContextToFrame=function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map((e=>o.snipLine(e,0)));const i=Math.min(r-1,s);t.context_line=o.snipLine(e[i],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map((e=>o.snipLine(e,0)))},t.addExceptionMechanism=function(e,t){const n=i(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}},t.addExceptionTypeValue=function(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")},t.arrayify=function(e){return Array.isArray(e)?e:[e]},t.checkOrSetAlreadyCaught=function(e){if(e&&e.__sentry_captured__)return!0;try{r.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1},t.getEventDescription=function(e){const{message:t,event_id:n}=e;if(t)return t;const r=i(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"},t.parseSemver=function(e){const t=e.match(a)||[],n=c(t[1]),r=c(t[2]),o=c(t[3]);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(o)?void 0:o,prerelease:t[4]}},t.uuid4=function(){const e=s.GLOBAL_OBJ,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}},13227:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(64683);function o(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//)||void 0===e||e.includes("node_modules/"))}function s(e){const t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return s=>{const a=s.match(n);if(a){let t,n,s,c,u;if(a[1]){s=a[1];let e=s.lastIndexOf(".");if("."===s[e-1]&&e--,e>0){t=s.slice(0,e),n=s.slice(e+1);const r=t.indexOf(".Module");r>0&&(s=s.slice(r+1),t=t.slice(0,r))}c=void 0}n&&(c=t,u=n),"<anonymous>"===n&&(u=void 0,s=void 0),void 0===s&&(u=u||r.UNKNOWN_FUNCTION,s=c?`${c}.${u}`:u);let l=a[2]&&a[2].startsWith("file://")?a[2].slice(7):a[2];const d="native"===a[5];return l&&l.match(/\/[A-Z]:/)&&(l=l.slice(1)),l||!a[5]||d||(l=a[5]),{filename:l,module:e?e(l):void 0,function:s,lineno:i(a[3]),colno:i(a[4]),in_app:o(l||"",d)}}if(s.match(t))return{filename:s}}}function i(e){return parseInt(e||"",10)||void 0}t.filenameIsInApp=o,t.node=s,t.nodeStackLineParser=function(e){return[90,s(e)]}},19950:(e,t,n)=>{e=n.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});const r=n(62827);function o(e,t){return e.require(t)}t.dynamicRequire=o,t.isNodeEnv=function(){return!r.isBrowserBundle()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},t.loadModule=function(t){let n;try{n=o(e,t)}catch(e){}try{const{cwd:r}=o(e,"process");n=o(e,`${r()}/node_modules/${t}`)}catch(e){}return n}},95027:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518),o=n(76536),s=n(73877),i=n(64683);function a(e,t=100,n=1/0){try{return c("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function c(e,t,n=1/0,a=1/0,u=o.memoBuilder()){const[l,d]=u;if(null==t||["number","boolean","string"].includes(typeof t)&&!Number.isNaN(t))return t;const p=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(r.isVueViewModel(t))return"[VueViewModel]";if(r.isSyntheticEvent(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${i.getFunctionName(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!p.startsWith("[object "))return p;if(t.__sentry_skip_normalization__)return t;const h="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===h)return p.replace("object ","");if(l(t))return"[Circular ~]";const f=t;if(f&&"function"==typeof f.toJSON)try{return c("",f.toJSON(),h-1,a,u)}catch(e){}const m=Array.isArray(t)?[]:{};let g=0;const _=s.convertToPlainObject(t);for(const e in _){if(!Object.prototype.hasOwnProperty.call(_,e))continue;if(g>=a){m[e]="[MaxProperties ~]";break}const t=_[e];m[e]=c(e,t,h-1,a,u),g++}return d(t),m}t.normalize=a,t.normalizeToSize=function e(t,n=3,r=102400){const o=a(t,n);return s=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>r?e(t,n-1,r):o;var s},t.normalizeUrlToBase=function(e,t){const n=t.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let r=e;try{r=decodeURI(e)}catch(e){}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${n}/*`,"ig"),"app:///")}},73877:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(64796),o=n(98750),s=n(70518),i=n(68030),a=n(25551);function c(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){o.DEBUG_BUILD&&i.logger.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function u(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,c(e,"__sentry_original__",t)}catch(e){}}function l(e){if(s.isError(e))return{message:e.message,name:e.name,stack:e.stack,...p(e)};if(s.isEvent(e)){const t={type:e.type,target:d(e.target),currentTarget:d(e.currentTarget),...p(e)};return"undefined"!=typeof CustomEvent&&s.isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}return e}function d(e){try{return s.isElement(e)?r.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function p(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function h(e,t){if(function(e){if(!s.isPlainObject(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=h(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(h(e,t))})),r}return e}t.addNonEnumerableProperty=c,t.convertToPlainObject=l,t.dropUndefinedKeys=function(e){return h(e,new Map)},t.extractExceptionKeysForMessage=function(e,t=40){const n=Object.keys(l(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return a.truncate(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:a.truncate(r,t)}return""},t.fill=function(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&u(o,r),e[t]=o},t.getOriginalFunction=function(e){return e.__sentry_original__},t.markFunctionWrapped=u,t.objectify=function(e){let t;switch(!0){case null==e:t=new String(e);break;case"symbol"==typeof e||"bigint"==typeof e:t=Object(e);break;case s.isPrimitive(e):t=new e.constructor(e);break;default:t=e}return t},t.urlEncode=function(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}},37417:(e,t)=>{function n(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Object.defineProperty(t,"__esModule",{value:!0});const r=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function o(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=r.exec(t);return n?n.slice(1):[]}function s(...e){let t="",r=!1;for(let n=e.length-1;n>=-1&&!r;n--){const o=n>=0?e[n]:"/";o&&(t=`${o}/${t}`,r="/"===o.charAt(0))}return t=n(t.split("/").filter((e=>!!e)),!r).join("/"),(r?"/":"")+t||"."}function i(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function a(e){const t=c(e),r="/"===e.slice(-1);let o=n(e.split("/").filter((e=>!!e)),!t).join("/");return o||t||(o="."),o&&r&&(o+="/"),(t?"/":"")+o}function c(e){return"/"===e.charAt(0)}t.basename=function(e,t){let n=o(e)[2]||"";return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n},t.dirname=function(e){const t=o(e),n=t[0]||"";let r=t[1];return n||r?(r&&(r=r.slice(0,r.length-1)),n+r):"."},t.isAbsolute=c,t.join=function(...e){return a(e.join("/"))},t.normalizePath=a,t.relative=function(e,t){e=s(e).slice(1),t=s(t).slice(1);const n=i(e.split("/")),r=i(t.split("/")),o=Math.min(n.length,r.length);let a=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){a=e;break}let c=[];for(let e=a;e<n.length;e++)c.push("..");return c=c.concat(r.slice(a)),c.join("/")},t.resolve=s},93731:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(74610),o=n(64920);t.makePromiseBuffer=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(s){if(!(void 0===e||t.length<e))return o.rejectedSyncPromise(new r.SentryError("Not adding Promise because buffer limit was reached."));const i=s();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new o.SyncPromise(((n,r)=>{let s=t.length;if(!s)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{o.resolvedSyncPromise(e).then((()=>{--s||(clearTimeout(i),n(!0))}),r)}))}))}}}},18871:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5258);t.generatePropagationContext=function(){return{traceId:r.uuid4(),spanId:r.uuid4().substring(16)}}},42469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});function n(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function r(e,t){return e[t]||e.all||0}t.DEFAULT_RETRY_AFTER=6e4,t.disabledUntil=r,t.isRateLimited=function(e,t,n=Date.now()){return r(e,t)>n},t.parseRetryAfterHeader=n,t.updateRateLimits=function(e,{statusCode:t,headers:r},o=Date.now()){const s={...e},i=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,r]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&r&&!r.split(";").includes("custom")||(s[e]=o+a);else s.all=o+a}else a?s.all=o+n(a,o):429===t&&(s.all=o+6e4);return s}},653:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(65396),o=n(98750),s=n(70518),i=n(68030),a=n(95027),c=n(90465),u=n(25972),l={ip:!1,request:!0,transaction:!0,user:!0},d=["cookies","data","headers","method","query_string","url"],p=["id","username","email"];function h(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",o="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,o="route"):(e.originalUrl||e.url)&&(r=c.stripUrlQueryAndFragment(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,o]}function f(e,t={}){const{include:n=d}=t,o={},i=e.headers||{},c=e.method,l=i.host||e.hostname||e.host||"<no host>",p="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",h=e.originalUrl||e.url||"",f=h.startsWith(p)?h:`${p}://${l}${h}`;return n.forEach((t=>{switch(t){case"headers":o.headers=i,n.includes("cookies")||delete o.headers.cookie,n.includes("ip")||u.ipHeaderNames.forEach((e=>{delete o.headers[e]}));break;case"method":o.method=c;break;case"url":o.url=f;break;case"cookies":o.cookies=e.cookies||i.cookie&&r.parseCookie(i.cookie)||{};break;case"query_string":o.query_string=function(e){let t=e.originalUrl||e.url||"";if(t){t.startsWith("/")&&(t=`http://dogs.are.great${t}`);try{const n=e.query||new URL(t).search.slice(1);return n.length?n:void 0}catch(e){return}}}(e);break;case"data":if("GET"===c||"HEAD"===c)break;void 0!==e.body&&(o.data=s.isString(e.body)?e.body:JSON.stringify(a.normalize(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(o[t]=e[t])}})),o}function m(e){const t={};try{e.forEach(((e,n)=>{"string"==typeof e&&(t[n]=e)}))}catch(e){o.DEBUG_BUILD&&i.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return t}t.DEFAULT_USER_INCLUDES=p,t.addRequestDataToEvent=function(e,t,n){const r={...l,...n&&n.include};if(r.request){const n=Array.isArray(r.request)?[...r.request]:[...d];r.ip&&n.push("ip");const o=f(t,{include:n});e.request={...e.request,...o}}if(r.user){const n=t.user&&s.isPlainObject(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:p).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.headers&&u.getClientIPAddress(t.headers)||t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&"transaction"===e.type&&(e.transaction=function(e,t){switch(t){case"path":return h(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return h(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e},t.extractPathForTransaction=h,t.extractRequestData=f,t.winterCGHeadersToDict=m,t.winterCGRequestToRequestData=function(e){const t=m(e.headers);return{method:e.method,url:e.url,headers:t}}},78773:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=["fatal","error","warning","log","info","debug"];t.severityLevelFromString=function(e){return"warn"===e?"warning":n.includes(e)?e:"log"},t.validSeverityLevels=n},64683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=50,r="?",o=/\(error: (.*)\)/,s=/captureMessage|captureException/;function i(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0,s=0)=>{const i=[],c=e.split("\n");for(let e=r;e<c.length;e++){const r=c[e];if(r.length>1024)continue;const a=o.test(r)?r.replace(o,"$1"):r;if(!a.match(/\S*Error: /)){for(const e of t){const t=e(a);if(t){i.push(t);break}}if(i.length>=n+s)break}}return a(i.slice(s))}}function a(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(c(t).function||"")&&t.pop(),t.reverse(),s.test(c(t).function||"")&&(t.pop(),s.test(c(t).function||"")&&t.pop()),t.slice(0,n).map((e=>({...e,filename:e.filename||c(t).filename,function:e.function||r})))}function c(e){return e[e.length-1]||{}}const u="<anonymous>";t.UNKNOWN_FUNCTION=r,t.createStackParser=i,t.getFramesFromEvent=function(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}},t.getFunctionName=function(e){try{return e&&"function"==typeof e&&e.name||u}catch(e){return u}},t.stackParserFromStackParserOptions=function(e){return Array.isArray(e)?i(...e):e},t.stripSentryFramesAndReverse=a},25551:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518);function o(e,t,n=!1){return!!r.isString(e)&&(r.isRegExp(t)?t.test(e):!!r.isString(t)&&(n?e===t:e.includes(t)))}t.isMatchingPattern=o,t.safeJoin=function(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const o=e[t];try{r.isVueViewModel(o)?n.push("[VueViewModel]"):n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)},t.snipLine=function(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n},t.stringMatchesSomePattern=function(e,t=[],n=!1){return t.some((t=>o(e,t,n)))},t.truncate=function(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}},28786:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(98750),o=n(68030),s=n(28355).GLOBAL_OBJ;function i(){if(!("fetch"in s))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function a(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}t.isNativeFunction=a,t.supportsDOMError=function(){try{return new DOMError(""),!0}catch(e){return!1}},t.supportsDOMException=function(){try{return new DOMException(""),!0}catch(e){return!1}},t.supportsErrorEvent=function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},t.supportsFetch=i,t.supportsNativeFetch=function(){if("string"==typeof EdgeRuntime)return!0;if(!i())return!1;if(a(s.fetch))return!0;let e=!1;const t=s.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=a(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){r.DEBUG_BUILD&&o.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e},t.supportsReferrerPolicy=function(){if(!i())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}},t.supportsReportingObserver=function(){return"ReportingObserver"in s}},64920:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(70518);var o;!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(o||(o={}));class s{constructor(e){s.prototype.__init.call(this),s.prototype.__init2.call(this),s.prototype.__init3.call(this),s.prototype.__init4.call(this),this._state=o.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new s(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new s(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(o.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(o.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===o.PENDING&&(r.isThenable(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===o.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===o.RESOLVED&&e[1](this._value),this._state===o.REJECTED&&e[2](this._value),e[0]=!0)}))}}}t.SyncPromise=s,t.rejectedSyncPromise=function(e){return new s(((t,n)=>{n(e)}))},t.resolvedSyncPromise=function(e){return new s((t=>{t(e)}))}},86867:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(28355);function o(){return Date.now()/1e3}const s=function(){const{performance:e}=r.GLOBAL_OBJ;if(!e||!e.now)return o;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();t._browserPerformanceTimeOriginMode=void 0;const i=(()=>{const{performance:e}=r.GLOBAL_OBJ;if(!e||!e.now)return void(t._browserPerformanceTimeOriginMode="none");const n=36e5,o=e.now(),s=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+o-s):n,a=i<n,c=e.timing&&e.timing.navigationStart,u="number"==typeof c?Math.abs(c+o-s):n;return a||u<n?i<=u?(t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(t._browserPerformanceTimeOriginMode="navigationStart",c):(t._browserPerformanceTimeOriginMode="dateNow",s)})();t.browserPerformanceTimeOrigin=i,t.dateTimestampInSeconds=o,t.timestampInSeconds=s},68578:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(47542),o=n(5258),s=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function i(e){if(!e)return;const t=e.match(s);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}t.TRACEPARENT_REGEXP=s,t.extractTraceparentData=i,t.generateSentryTraceHeader=function(e=o.uuid4(),t=o.uuid4().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`},t.propagationContextFromHeaders=function(e,t){const n=i(e),s=r.baggageHeaderToDynamicSamplingContext(t),{traceId:a,parentSpanId:c,parentSampled:u}=n||{};return n?{traceId:a||o.uuid4(),parentSpanId:c||o.uuid4().substring(16),spanId:o.uuid4().substring(16),sampled:u,dsc:s||{}}:{traceId:a||o.uuid4(),spanId:o.uuid4().substring(16)}}},90465:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberOfUrlSegments=function(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length},t.getSanitizedUrlString=function(e){const{protocol:t,host:n,path:r}=e;return`${t?`${t}://`:""}${n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||""}${r}`},t.parseUrl=function(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}},t.stripUrlQueryAndFragment=function(e){return e.split(/[?#]/,1)[0]}},59747:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.escapeStringForRegex=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},25972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"];t.getClientIPAddress=function(e){return n.map((t=>{const n=e[t],r=Array.isArray(n)?n.join(";"):n;return"Forwarded"===t?function(e){if(!e)return null;for(const t of e.split(";"))if(t.startsWith("for="))return t.slice(4);return null}(r):r&&r.split(",").map((e=>e.trim()))})).reduce(((e,t)=>t?e.concat(t):e),[]).find((e=>null!==e&&/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(e)))||null},t.ipHeaderNames=n},54551:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(28355).GLOBAL_OBJ;t.supportsHistory=function(){const e=r.chrome,t=e&&e.app&&e.app.runtime,n="history"in r&&!!r.history.pushState&&!!r.history.replaceState;return!t&&n}},79276:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_VERSION="8.25.0"},28355:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(79276),o=globalThis;t.GLOBAL_OBJ=o,t.getGlobalSingleton=function(e,t,n){const s=n||o,i=s.__SENTRY__=s.__SENTRY__||{},a=i[r.SDK_VERSION]=i[r.SDK_VERSION]||{};return a[e]||(a[e]=t())}},56284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},r=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},o=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},s=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},i=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:s(e.r,0,255),g:s(e.g,0,255),b:s(e.b,0,255),a:s(e.a)}},c=function(e){return{r:o(e.r),g:o(e.g),b:o(e.b),a:o(e.a,3)}},u=/^#([0-9a-f]{3,8})$/i,l=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,s=Math.max(t,n,r),i=s-Math.min(t,n,r),a=i?s===t?(n-r)/i:s===n?2+(r-t)/i:4+(t-n)/i:0;return{h:60*(a<0?a+6:a),s:s?i/s*100:0,v:s/255*100,a:o}},p=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),i=r*(1-n),a=r*(1-(t-s)*n),c=r*(1-(1-t+s)*n),u=s%6;return{r:255*[r,a,i,i,c,r][u],g:255*[c,r,r,a,i,i][u],b:255*[i,i,c,r,r,a][u],a:o}},h=function(e){return{h:i(e.h),s:s(e.s,0,100),l:s(e.l,0,100),a:s(e.a)}},f=function(e){return{h:o(e.h),s:o(e.s),l:o(e.l),a:o(e.a,3)}},m=function(e){return p((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},g=function(e){return{h:(t=d(e)).h,s:(o=(200-(n=t.s))*(r=t.v)/100)>0&&o<200?n*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,r,o},_=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,E={string:[[function(e){var t=u.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?o(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?o(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=S.exec(e)||b.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=_.exec(e)||y.exec(e);if(!t)return null;var r,o,s=h({h:(r=t[1],o=t[2],void 0===o&&(o="deg"),Number(r)*(n[o]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return m(s)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,o=e.b,s=e.a,i=void 0===s?1:s;return r(t)&&r(n)&&r(o)?a({r:Number(t),g:Number(n),b:Number(o),a:Number(i)}):null},"rgb"],[function(e){var t=e.h,n=e.s,o=e.l,s=e.a,i=void 0===s?1:s;if(!r(t)||!r(n)||!r(o))return null;var a=h({h:Number(t),s:Number(n),l:Number(o),a:Number(i)});return m(a)},"hsl"],[function(e){var t=e.h,n=e.s,o=e.v,a=e.a,c=void 0===a?1:a;if(!r(t)||!r(n)||!r(o))return null;var u=function(e){return{h:i(e.h),s:s(e.s,0,100),v:s(e.v,0,100),a:s(e.a)}}({h:Number(t),s:Number(n),v:Number(o),a:Number(c)});return p(u)},"hsv"]]},v=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},T=function(e){return"string"==typeof e?v(e.trim(),E.string):"object"==typeof e&&null!==e?v(e,E.object):[null,void 0]},I=function(e,t){var n=g(e);return{h:n.h,s:s(n.s+100*t,0,100),l:n.l,a:n.a}},R=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},A=function(e,t){var n=g(e);return{h:n.h,s:n.s,l:s(n.l+100*t,0,100),a:n.a}},C=function(){function e(e){this.parsed=T(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return o(R(this.rgba),2)},e.prototype.isDark=function(){return R(this.rgba)<.5},e.prototype.isLight=function(){return R(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,i=(s=e.a)<1?l(o(255*s)):"","#"+l(t)+l(n)+l(r)+i;var e,t,n,r,s,i},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,(o=e.a)<1?"rgba("+t+", "+n+", "+r+", "+o+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,o},e.prototype.toHsl=function(){return f(g(this.rgba))},e.prototype.toHslString=function(){return t=(e=f(g(this.rgba))).h,n=e.s,r=e.l,(o=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+o+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,o},e.prototype.toHsv=function(){return e=d(this.rgba),{h:o(e.h),s:o(e.s),v:o(e.v),a:o(e.a,3)};var e},e.prototype.invert=function(){return O({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),O(I(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),O(I(this.rgba,-e))},e.prototype.grayscale=function(){return O(I(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),O(A(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),O(A(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?O({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):o(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=g(this.rgba);return"number"==typeof e?O({h:e,s:t.s,l:t.l,a:t.a}):o(t.h)},e.prototype.isEqual=function(e){return this.toHex()===O(e).toHex()},e}(),O=function(e){return e instanceof C?e:new C(e)},N=[];t.Colord=C,t.colord=O,t.extend=function(e){e.forEach((function(e){N.indexOf(e)<0&&(e(C,E),N.push(e))}))},t.getFormat=function(e){return T(e)[1]},t.random=function(){return new C({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},17833:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(40736)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},40736:(e,t,n)=>{e.exports=function(e){function t(e){let n,o,s,i=null;function a(...e){if(!a.enabled)return;const r=a,o=Number(new Date),s=o-(n||o);r.diff=s,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";i++;const s=t.formatters[o];if("function"==typeof s){const t=e[i];n=s.call(r,t),e.splice(i,1),i--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==t.namespaces&&(o=t.namespaces,s=t.enabled(e)),s),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},45753:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(17833):e.exports=n(76033)},76033:(e,t,n)=>{const r=n(52018),o=n(39023);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(o.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:o}=this;if(o){const t=this.color,o="[3"+(t<8?t:"8;5;"+t),s=`  ${o};1m${r} [0m`;n[0]=s+n[0].split("\n").join("\n"+s),n.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=o.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(27687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(40736)(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},20602:(e,t,n)=>{"use strict";const{Transform:r,PassThrough:o}=n(2203),s=n(43106),i=n(97157);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const n="br"===t;if(n&&"function"!=typeof s.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new r({transform(e,t,n){a=!1,n(null,e)},flush(e){e()}}),u=new o({autoDestroy:!1,destroy(t,n){e.destroy(),n(t)}}),l=n?s.createBrotliDecompress():s.createUnzip();return l.once("error",(t=>{!a||e.readable?u.destroy(t):u.end()})),i(e,u),e.pipe(c).pipe(l).pipe(u),u}},97157:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,n)=>{if(n._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set(Object.keys(e).concat(t)),o={};for(const t of r)t in n||(o[t]={get(){const n=e[t];return"function"==typeof n?n.bind(e):n},set(n){e[t]=n},enumerable:!0,configurable:!1});return Object.defineProperties(n,o),e.once("aborted",(()=>{n.destroy(),n.emit("aborted")})),e.once("close",(()=>{e.complete&&n.readable?n.once("end",(()=>{n.emit("close")})):n.emit("close")})),n}},20687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=(e,t)=>{let n;n="function"==typeof t?{connect:t}:t;const r="function"==typeof n.connect,o="function"==typeof n.secureConnect,s="function"==typeof n.close,i=()=>{r&&n.connect(),function(e){return e.encrypted}(e)&&o&&(e.authorized?n.secureConnect():e.authorizationError||e.once("secureConnect",n.secureConnect)),s&&e.once("close",n.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&s&&n.close(e._hadError)};t.default=n,e.exports=n,e.exports.default=n},16022:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===r(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=o,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var r,o,s=(o=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return s}}(r,o)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=s[0],a=s[1];return e[i]=a,e}),{})},t.isArguments=function(e){return null!=e&&o(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var s={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=s,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(s.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),r=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},o=0;o<64;o++)n[r(o)]=o;var s=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},i={encode:function(e){if("string"==typeof e){var t=e;e=s(t.length);for(var n=0;n<t.length;n++){var o=t.charCodeAt(n);if(o>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=o}}for(var i=[],a=null,c=null,u=null,l=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,u=(15&e[d])<<2;break;case 2:u|=e[d]>>6&3,l=63&e[d],i.push(r(a)),i.push(r(c)),i.push(r(u)),i.push(r(l)),a=null,c=null,u=null,l=null}return null!=a&&(i.push(r(a)),i.push(r(c)),null==u?i.push("="):i.push(r(u)),null==l&&i.push("=")),i.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var r,o=s(t),i=null,a=null,c=null,u=0,l=0;l<e.length;l++){var d="="===(r=e.charAt(l))?-1:n[r];switch(l%4){case 0:if(d<0)throw new Error("invalid base64 string");i=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");i|=d>>4,o[u++]=i,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,o[u++]=a,c=(3&d)<<6);break;case 3:d>=0&&(o[u++]=c|d)}}return o},newBinary:s};t.Base64=i},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function e(t,o,s,i,a){var c=o[t];switch(n(c)){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var u,l=i+s,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,h=0;h<p;h+=1)d[h]=e(h,c,s,l,a)||"null";return u=0===d.length?"[]":l?"[\n"+l+d.join(",\n"+l)+"\n"+i+"]":"["+d.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach((function(t){(u=e(t,c,s,l,a))&&d.push(r(t)+(l?": ":":")+u)})),u=0===d.length?"{}":l?"{\n"+l+d.join(",\n"+l)+"\n"+i+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var r="",s=0;s<n.indent;s++)r+=" ";n.indent=r}return o("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}var o={};!function(){var e=o,t=r(2).Base64,n=r(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var s=r(1),i={};e.EJSON=i;var a=new Map;i.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$date")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$regexp")&&(0,s.hasOwn)(e,"$flags")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$InfNaN")&&1===(0,s.lengthOf)(e)},matchObject:s.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$binary")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,s.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$escape")&&1===(0,s.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,s.lengthOf)(e);1!==n&&2!==n||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,s.keysOf)(e).forEach((function(n){t[n]=i.toJSONValue(e[n])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,s.keysOf)(e.$escape).forEach((function(n){t[n]=i.fromJSONValue(e.$escape[n])})),t}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$type")&&(0,s.hasOwn)(e,"$value")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return i._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var r=a.get(t);return n._noYieldsAllowed((function(){return r(e.$value)}))}}];i._isCustomType=function(e){return e&&(0,s.isFunction)(e.toJSONValue)&&(0,s.isFunction)(e.typeName)&&a.has(e.typeName())},i._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,s.convertMapToObject)(a)},i._getConverters=function(){return c};var u=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}},l=function e(t){if(null===t)return null;var n=u(t);return void 0!==n?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var r=t[n];if((0,s.isObject)(r)||void 0===r||(0,s.isInfOrNaN)(r)){var o=u(r);o?t[n]=o:e(r)}})),t):t};i._adjustTypesToJSONValue=l,i.toJSONValue=function(e){var t=u(e);if(void 0!==t)return t;var n=e;return(0,s.isObject)(e)&&(n=i.clone(e),l(n)),n};var d=function(e){if((0,s.isObject)(e)&&null!==e){var t=(0,s.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var n=0;n<c.length;n++){var r=c[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var n=d(t);return n!==t?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var r=t[n];if((0,s.isObject)(r)){var o=d(r);if(r!==o)return void(t[n]=o);e(r)}})),t):t};i._adjustTypesFromJSONValue=p,i.fromJSONValue=function(e){var t=d(e);return t===e&&(0,s.isObject)(e)&&(t=i.clone(e),p(t)),t},i.stringify=(0,s.handleError)((function(e,t){var n=i.toJSONValue(e);return t&&(t.canonical||t.indent)?r(4)(n,t):JSON.stringify(n)})),i.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return i.fromJSONValue(JSON.parse(e))},i.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},i.equals=function(e,t,n){var r,o=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,s.isObject)(e)||!(0,s.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(i.isBinary(e)&&i.isBinary(t)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if((0,s.isFunction)(e.equals))return e.equals(t,n);if((0,s.isFunction)(t.equals))return t.equals(e,n);var a,c=Array.isArray(e),u=Array.isArray(t);if(c!==u)return!1;if(c&&u){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!i.equals(e[r],t[r],n))return!1;return!0}switch(i._isCustomType(e)+i._isCustomType(t)){case 1:return!1;case 2:return i.equals(i.toJSONValue(e),i.toJSONValue(t))}var l=(0,s.keysOf)(e),d=(0,s.keysOf)(t);return o?(r=0,a=l.every((function(o){return!(r>=d.length||o!==d[r]||!i.equals(e[o],t[d[r]],n)||(r++,0))}))):(r=0,a=l.every((function(o){return!!(0,s.hasOwn)(t,o)&&!!i.equals(e[o],t[o],n)&&(r++,!0)}))),a&&r===d.length},i.clone=function(e){var t;if(!(0,s.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(i.isBinary(e)){t=i.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(i.clone):(0,s.isArguments)(e)?Array.from(e).map(i.clone):(0,s.isFunction)(e.clone)?e.clone():i._isCustomType(e)?i.fromJSONValue(i.clone(i.toJSONValue(e)),!0):(t={},(0,s.keysOf)(e).forEach((function(n){t[n]=i.clone(e[n])})),t)},i.newBinary=t.newBinary}(),e.exports=o.EJSON}()},30228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,s||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,s,i){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,s),!0;case 6:return l.fn.call(l.context,t,r,o,s,i),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||i(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},32017:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;0!=o--;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n}},89353:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var o=0;o<t.length;o+=1)n[o+e.length]=t[o];return n};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var s,i=function(e){for(var t=[],n=1,r=0;n<e.length;n+=1,r+=1)t[r]=e[n];return t}(arguments),a=n(0,o.length-i.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(s=Function("binder","return function ("+function(e){for(var t="",n=0;n<e.length;n+=1)t+=e[n],n+1<e.length&&(t+=",");return t}(c)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var t=o.apply(this,r(i,arguments));return Object(t)===t?t:this}return o.apply(e,r(i,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,s.prototype=new l,l.prototype=null}return s}},66743:(e,t,n)=>{"use strict";var r=n(89353);e.exports=Function.prototype.bind||r},55635:(e,t,n)=>{"use strict";const{PassThrough:r}=n(2203);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:n}=e;const o="buffer"===n;let s=!1;t?s=!(n||o):n=n||"utf8",o&&(n=null);const i=new r({objectMode:s});n&&i.setEncoding(n);let a=0;const c=[];return i.on("data",(e=>{c.push(e),s?a=c.length:a+=e.length})),i.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},4594:(e,t,n)=>{"use strict";const{constants:r}=n(20181),o=n(2203),{promisify:s}=n(39023),i=n(55635),a=s(o.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function u(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:n}=t,o=i(t);return await new Promise(((t,s)=>{const i=e=>{e&&o.getBufferedLength()<=r.MAX_LENGTH&&(e.bufferedData=o.getBufferedValue()),s(e)};(async()=>{try{await a(e,o),t()}catch(e){i(e)}})(),o.on("data",(()=>{o.getBufferedLength()>n&&i(new c)}))})),o.getBufferedValue()}e.exports=u,e.exports.buffer=(e,t)=>u(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>u(e,{...t,array:!0}),e.exports.MaxBufferError=c},25884:e=>{"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),o=t.indexOf("--");return-1!==r&&(-1===o||r<o)}},9957:(e,t,n)=>{"use strict";var r=Function.prototype.call,o=Object.prototype.hasOwnProperty,s=n(66743);e.exports=s.call(r,o)},37234:e=>{"use strict";const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),n=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),r=new Set([500,502,503,504]),o={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},s={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(e){const t=parseInt(e,10);return isFinite(t)?t:0}function a(e){const t={};if(!e)return t;const n=e.trim().split(/,/);for(const e of n){const[n,r]=e.split(/=/,2);t[n.trim()]=void 0===r||r.trim().replace(/^"|"$/g,"")}return t}function c(e){let t=[];for(const n in e){const r=e[n];t.push(!0===r?n:n+"="+r)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:n,cacheHeuristic:r,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==n,this._cacheHeuristic=void 0!==r?r:.1,this._immutableMinTtl=void 0!==o?o:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!n.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=a(e.headers["cache-control"]);return!t["no-cache"]&&!/no-cache/.test(e.headers.pragma)&&(!(t["max-age"]&&this.age()>t["max-age"])&&(!(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])&&(!(this.stale()&&(!t["max-stale"]||this._rescc["must-revalidate"]||!(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(e,!1))))}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const n of t)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const n in e)o[n]||(t[n]=e[n]);if(e.connection){const n=e.connection.trim().split(/\s*,\s*/);for(const e of n)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<t?0:Math.max(e,(n-t)/1e3)}if(this._resHeaders["last-modified"]){const n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&t>n)return Math.max(e,(t-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+i(this._rescc["stale-if-error"]),n=e+i(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,n)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+i(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||r.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let n=!1;if(void 0!==t.status&&304!=t.status?n=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(n=!0),!n)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const o={};for(const e in this._resHeaders)o[e]=e in t.headers&&!s[e]?t.headers[e]:this._resHeaders[e];const i=Object.assign({},t,{status:this._status,method:this._method,headers:o});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},17444:(e,t,n)=>{"use strict";const{URL:r}=n(87016),o=n(24434),s=n(64756),i=n(85675),a=n(87392),c=n(62822),u=Symbol("currentStreamCount"),l=Symbol("request"),d=Symbol("cachedOriginSet"),p=Symbol("gracefullyClosing"),h=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,g=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];r[d].length>0&&r[d].length<t[d].length&&r[d].every((e=>t[d].includes(e)))&&r[u]+t[u]<=t.remoteSettings.maxConcurrentStreams&&y(r)}},_=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(t[d].length>0&&t[d].length<r[d].length&&t[d].every((e=>r[d].includes(e)))&&t[u]+r[u]<=r.remoteSettings.maxConcurrentStreams)return y(t),!0}return!1},y=e=>{e[p]=!0,0===e[u]&&e.close()};class S extends o{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:n=10,maxCachedTlsSessions:r=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxEmptySessions=n,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:r})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let n=0;n<f.length;n++){const r=f[n];t+=":",e&&void 0!==e[r]&&(t+=e[r])}return t}_processQueue(){if(this._sessionCount>=this.maxSessions)this.closeEmptySessions(this.maxSessions-this._sessionCount+1);else for(const e in this.queue)for(const t in this.queue[e]){const n=this.queue[e][t];n.completed||(n.completed=!0,n())}}_isBetterSession(e,t){return e>t}_accept(e,t,n,r){let o=0;for(;o<t.length&&e[u]<e.remoteSettings.maxConcurrentStreams;)t[o].resolve(e),o++;t.splice(0,o),t.length>0&&(this.getSession(n,r,t),t.length=0)}getSession(e,t,n){return new Promise(((o,s)=>{Array.isArray(n)&&n.length>0?(n=[...n],o()):n=[{resolve:o,reject:s}];try{if("string"==typeof e)e=new r(e);else if(!(e instanceof r))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(t){const{servername:n}=t,{hostname:r}=e;if(n&&r!==n)throw new Error(`Origin ${r} differs from servername ${n}`)}}catch(e){for(let t=0;t<n.length;t++)n[t].reject(e);return}const a=this.normalizeOptions(t),c=e.origin;if(a in this.sessions){const e=this.sessions[a];let r,o=-1,s=-1;for(let t=0;t<e.length;t++){const n=e[t],i=n.remoteSettings.maxConcurrentStreams;if(i<o)break;if(!n[d].includes(c))continue;const a=n[u];a>=i||n[p]||n.destroyed||(r||(o=i),this._isBetterSession(a,s)&&(r=n,s=a))}if(r)return void this._accept(r,n,c,t)}if(a in this.queue){if(c in this.queue[a])return void this.queue[a][c].listeners.push(...n)}else this.queue[a]={[h]:0};const f=()=>{a in this.queue&&this.queue[a][c]===y&&(delete this.queue[a][c],0==--this.queue[a][h]&&delete this.queue[a])},y=async()=>{this._sessionCount++;const r=`${c}:${a}`;let o,s=!1;try{const S={...t};void 0===S.settings&&(S.settings=this.settings),void 0===S.session&&(S.session=this.tlsSessionCache.get(r));const b=S.createConnection||this.createConnection;o=await b.call(this,e,S),S.createConnection=()=>o;const E=i.connect(e,S);E[u]=0,E[p]=!1;const v=()=>{const{socket:e}=E;let t;return!1===e.servername?(e.servername=e.remoteAddress,t=E.originSet,e.servername=!1):t=E.originSet,t},T=()=>E[u]<E.remoteSettings.maxConcurrentStreams;E.socket.once("session",(e=>{this.tlsSessionCache.set(r,e)})),E.once("error",(e=>{for(let t=0;t<n.length;t++)n[t].reject(e);this.tlsSessionCache.delete(r)})),E.setTimeout(this.timeout,(()=>{E.destroy()})),E.once("close",(()=>{if(this._sessionCount--,s){this._emptySessionCount--;const e=this.sessions[a];1===e.length?delete this.sessions[a]:e.splice(e.indexOf(E),1)}else{f();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<n.length;t++)n[t].reject(e)}this._processQueue()}));const I=()=>{const e=this.queue[a];if(!e)return;const t=E[d];for(let n=0;n<t.length;n++){const r=t[n];if(r in e){const{listeners:t,completed:n}=e[r];let o=0;for(;o<t.length&&T();)t[o].resolve(E),o++;if(e[r].listeners.splice(0,o),0===e[r].listeners.length&&!n&&(delete e[r],0==--e[h])){delete this.queue[a];break}if(!T())break}}};E.on("origin",(()=>{E[d]=v()||[],E[p]=!1,_(this.sessions[a],E),!E[p]&&T()&&(I(),T()&&g(this.sessions[a],E))})),E.once("remoteSettings",(()=>{if(y.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<n.length;t++)n[t].reject(e);E.destroy()}else{if(E.setLocalWindowSize&&E.setLocalWindowSize(4194304),E[d]=v()||[],E.socket.encrypted){const e=E[d][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<n.length;e++)n[e].reject(t);return void E.destroy()}}f();{const e=this.sessions;if(a in e){const t=e[a];t.splice(((e,t,n)=>{let r=0,o=e.length;for(;r<o;){const s=r+o>>>1;n(e[s],t)?r=s+1:o=s}return r})(t,E,m),0,E)}else e[a]=[E]}s=!0,this._emptySessionCount++,this.emit("session",E),this._accept(E,n,c,t),0===E[u]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),E.on("remoteSettings",(()=>{T()&&(I(),T()&&g(this.sessions[a],E))}))}})),E[l]=E.request,E.request=(e,t)=>{if(E[p])throw new Error("The session is gracefully closing. No new streams are allowed.");const n=E[l](e,t);return E.ref(),0==E[u]++&&this._emptySessionCount--,n.once("close",(()=>{0==--E[u]&&(this._emptySessionCount++,E.unref(),this._emptySessionCount>this.maxEmptySessions||E[p])?E.close():E.destroyed||E.closed||T()&&!_(this.sessions[a],E)&&(g(this.sessions[a],E),I(),0===E[u]&&this._processQueue())})),n}}catch(e){f(),this._sessionCount--;for(let t=0;t<n.length;t++)n[t].reject(e)}};y.listeners=n,y.completed=!1,y.destroyed=!1,this.queue[a][c]=y,this.queue[a][h]++,this._processQueue()}))}request(e,t,n,r){return new Promise(((o,s)=>{this.getSession(e,t,[{reject:s,resolve:e=>{try{const t=e.request(n,r);c(t),o(t)}catch(e){s(e)}}}])}))}async createConnection(e,t){return S.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const n=e.port||443,r=e.hostname;void 0===t.servername&&(t.servername=r);const o=s.connect(n,r,t);return t.socket&&(o._peername={family:void 0,address:void 0,port:n}),o}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:n}=this;for(const r in n){const o=n[r];for(let n=0;n<o.length;n++){const r=o[n];if(0===r[u]&&(t++,r.close(),t>=e))return t}}return t}destroy(e){const{sessions:t,queue:n}=this;for(const n in t){const r=t[n];for(let t=0;t<r.length;t++)r[t].destroy(e)}for(const e in n){const t=n[e];for(const e in t)t[e].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}S.kCurrentStreamCount=u,S.kGracefullyClosing=p,e.exports={Agent:S,globalAgent:new S}},22094:(e,t,n)=>{"use strict";const{URL:r,urlToHttpOptions:o}=n(87016),s=n(58611),i=n(65692),a=n(51169),c=n(87392),{Agent:u,globalAgent:l}=n(17444),d=n(22734),p=n(50491),h=n(62822),f=new c({maxSize:100}),m=(e,t=new Map,n=void 0)=>async r=>{const o=`${r.host}:${r.port}:${r.ALPNProtocols.sort()}`;if(!e.has(o)){if(t.has(o))return{alpnProtocol:(await t.get(o)).alpnProtocol};const{path:s}=r;r.path=r.socketPath;const i=a(r,n);t.set(o,i);try{const n=await i;return e.set(o,n.alpnProtocol),t.delete(o),r.path=s,n}catch(e){throw t.delete(o),r.path=s,e}}return{alpnProtocol:e.get(o)}},g=m(f,new Map);e.exports=async(e,t,n)=>{if(e="string"==typeof e?o(new r(e)):e instanceof r?o(e):{...e},"function"==typeof t||void 0===t?(n=t,t=e):t=Object.assign(e,t),t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"],!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const a="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||p(t.headers&&t.headers.host||t.host),t.port=t.port||(a?443:80),t._defaultAgent=a?i.globalAgent:s.globalAgent;const c=t.resolveProtocol||g;let{agent:f}=t;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){t.resolveSocket=!0;let{socket:e,alpnProtocol:r,timeout:o}=await c(t);if(o){e&&e.destroy();const n=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);throw n.code="ETIMEDOUT",n.ms=t.timeout,n}e&&t.createConnection&&(e.destroy(),e=void 0),delete t.resolveSocket;const s="h2"===r;if(f&&(f=s?f.http2:f.https,t.agent=f),void 0===f&&(f=s?l:i.globalAgent),e)if(!1===f)e.destroy();else{const n=(s?u:i.Agent).prototype.createConnection;f.createConnection===n?s?t._reuseSocket=e:((e,t,n)=>{t._httpMessage={shouldKeepAlive:!0};const r=()=>{e.emit("free",t,n)};t.on("free",r);const o=()=>{e.removeSocket(t,n)};t.on("close",o);const s=()=>{const{freeSockets:n}=e;for(const e of Object.values(n))if(e.includes(t))return void t.destroy()};t.on("timeout",s);const i=()=>{e.removeSocket(t,n),t.off("close",o),t.off("free",r),t.off("timeout",s),t.off("agentRemove",i)};t.on("agentRemove",i),e.emit("free",t,n)})(f,e,t):e.destroy()}if(s)return h(new d(t,n))}else f&&(t.agent=f.http);return t.headers&&(t.headers={...t.headers},t.headers[":authority"]&&(t.headers.host||(t.headers.host=t.headers[":authority"]),delete t.headers[":authority"]),delete t.headers[":method"],delete t.headers[":scheme"],delete t.headers[":path"]),h(s.request(t,n))},e.exports.protocolCache=f,e.exports.resolveProtocol=g,e.exports.createResolveProtocol=m},22734:(e,t,n)=>{"use strict";const{URL:r,urlToHttpOptions:o}=n(87016),s=n(85675),{Writable:i}=n(2203),{Agent:a,globalAgent:c}=n(17444),u=n(87235),l=n(21125),{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_PROTOCOL:p,ERR_HTTP_HEADERS_SENT:h}=n(73876),f=n(45711),m=n(39879),g=n(95332),{HTTP2_HEADER_STATUS:_,HTTP2_HEADER_METHOD:y,HTTP2_HEADER_PATH:S,HTTP2_HEADER_AUTHORITY:b,HTTP2_METHOD_CONNECT:E}=s.constants,v=Symbol("headers"),T=Symbol("origin"),I=Symbol("session"),R=Symbol("options"),A=Symbol("flushedHeaders"),C=Symbol("jobs"),O=Symbol("pendingAgentPromise");e.exports=class extends i{constructor(e,t,n){if(super({autoDestroy:!1,emitClose:!1}),e="string"==typeof e?o(new r(e)):e instanceof r?o(e):{...e},"function"==typeof t||void 0===t?(n=t,t=e):t=Object.assign(e,t),t.h2session){if(this[I]=t.h2session,this[I].destroyed)throw new Error("The session has been closed already");this.protocol=this[I].socket.encrypted?"https:":"http:"}else if(!1===t.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===t.agent||null===t.agent)this.agent=c;else{if("function"!=typeof t.agent.request)throw new d("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(this.agent&&(this.protocol=this.agent.protocol),t.protocol&&t.protocol!==this.protocol)throw new p(t.protocol,this.protocol);t.port||(t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443),t.host=t.hostname||t.host||"localhost",delete t.hostname;const{timeout:s}=t;t.timeout=void 0,this[v]=Object.create(null),this[C]=[],this[O]=void 0,this.socket=null,this.connection=null,this.method=t.method||"GET",("CONNECT"!==this.method||"/"!==t.path&&void 0!==t.path)&&(this.path=t.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;const{headers:i}=t;if(i)for(const e in i)this.setHeader(e,i[e]);t.auth&&!("authorization"in this[v])&&(this[v].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[R]=t,this[T]=new r(`${this.protocol}//${t.servername||t.host}:${t.port}`);const u=t._reuseSocket;u&&(t.createConnection=(...e)=>u.destroyed?this.agent.createConnection(...e):u,this.agent.getSession(this[T],this[R]).catch((()=>{}))),s&&this.setTimeout(s),n&&this.once("response",n),this[A]=!1}get method(){return this[v][y]}set method(e){e&&(this[v][y]=e.toUpperCase())}get path(){const e="CONNECT"===this.method?b:S;return this[v][e]}set path(e){if(e){const t="CONNECT"===this.method?b:S;this[v][t]=e}}get host(){return this[T].hostname}set host(e){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,n){if(this._mustNotHaveABody)return void n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const r=()=>this._request.write(e,t,n);this._request?r():this[C].push(r)}_final(e){this.flushHeaders();const t=()=>{this._mustNotHaveABody||"CONNECT"===this.method?e():this._request.end(e)};this._request?t():this[C].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick((()=>this.emit("abort"))),this.aborted=!0,this.destroy())}async _destroy(e,t){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick((()=>{this.emit("close")}));try{await this[O]}catch(t){this.aborted&&(e=t)}t(e)}async flushHeaders(){if(this[A]||this.destroyed)return;this[A]=!0;const e=this.method===E,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||l(t,this,["timeout","continue"]),t.once("error",(e=>{this.destroy(e)})),t.once("aborted",(()=>{const{res:e}=this;e?(e.aborted=!0,e.emit("aborted"),e.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))}));const n=(n,r,o)=>{const s=new u(this.socket,t.readableHighWaterMark);this.res=s,s.url=`${this[T].origin}${this.path}`,s.req=this,s.statusCode=n[_],s.headers=n,s.rawHeaders=o,s.once("end",(()=>{s.complete=!0,s.socket=null,s.connection=null})),e?(s.upgrade=!0,this.emit("connect",s,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",(e=>{s._dumped||s.push(e)||t.pause()})),t.once("end",(()=>{this.aborted||s.push(null)})),this.emit("response",s)||s._dump())};t.once("response",n),t.once("headers",(e=>this.emit("information",{statusCode:e[_]}))),t.once("trailers",((e,t,r)=>{const{res:o}=this;null!==o?(o.trailers=e,o.rawTrailers=r):n(e,0,r)})),t.once("close",(()=>{const{aborted:e,res:t}=this;if(t){e&&(t.aborted=!0,t.emit("aborted"),t.destroy());const n=()=>{t.emit("close"),this.destroy(),this.emit("close")};t.readable?t.once("end",n):n()}else{if(!this.destroyed)return this.destroy(new Error("The HTTP/2 stream has been early terminated")),void this.emit("close");this.destroy(),this.emit("close")}})),this.socket=new Proxy(t,g);for(const e of this[C])e();this[C].length=0,this.emit("socket",this.socket)};if(b in this[v]||e||(this[v][b]=this[T].host),this[I])try{t(this[I].request(this[v]))}catch(e){this.destroy(e)}else{this.reusedSocket=!0;try{const e=this.agent.request(this[T],this[R],this[v]);this[O]=e,t(await e),this[O]=!1}catch(e){this[O]=!1,this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[v])}hasHeader(e){if("string"!=typeof e)throw new d("name","string",e);return Boolean(this[v][e.toLowerCase()])}getHeader(e){if("string"!=typeof e)throw new d("name","string",e);return this[v][e.toLowerCase()]}get headersSent(){return this[A]}removeHeader(e){if("string"!=typeof e)throw new d("name","string",e);if(this.headersSent)throw new h("remove");delete this[v][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new h("set");f(e),m(e,t);const n=e.toLowerCase();if("connection"===n){if("keep-alive"===t.toLowerCase())return;throw new Error(`Invalid 'connection' header: ${t}`)}"host"===n&&"CONNECT"===this.method?this[v][b]=t:this[v][n]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const n=()=>this._request.setTimeout(e,t);return this._request?n():this[C].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},87235:(e,t,n)=>{"use strict";const{Readable:r}=n(2203);e.exports=class extends r{constructor(e,t){super({emitClose:!1,autoDestroy:!0,highWaterMark:t}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){this.readableEnded||(this.aborted=!0),t(),this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},5769:(e,t,n)=>{"use strict";const r=n(85675),{Agent:o,globalAgent:s}=n(17444),i=n(22734),a=n(87235),c=n(22094),{HttpOverHttp2:u,HttpsOverHttp2:l}=n(80201),d=n(50312),{Http2OverHttp:p,Http2OverHttps:h}=n(80449),f=n(45711),m=n(39879);e.exports={...r,ClientRequest:i,IncomingMessage:a,Agent:o,globalAgent:s,request:(e,t,n)=>new i(e,t,n),get:(e,t,n)=>{const r=new i(e,t,n);return r.end(),r},auto:c,proxies:{HttpOverHttp2:u,HttpsOverHttp2:l,Http2OverHttp2:d,Http2OverHttp:p,Http2OverHttps:h},validateHeaderName:f,validateHeaderValue:m}},29350:e=>{"use strict";e.exports=e=>{const{username:t,password:n}=e.proxyOptions.url;if(t||n){const e=`${t}:${n}`,r=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":r,authorization:r}}return{}}},80201:(e,t,n)=>{"use strict";const r=n(64756),o=n(58611),s=n(65692),i=n(36559),{globalAgent:a}=n(17444),c=n(43305),u=n(24394),l=n(29350),d=(e,t,n)=>{(async()=>{try{const{proxyOptions:o}=e,{url:u,headers:d,raw:p}=o,h=await a.request(u,o,{...l(e),...d,":method":"CONNECT",":authority":`${t.host}:${t.port}`});h.once("error",n),h.once("response",(o=>{const a=o[":status"];if(200!==a)return void n(new c(a,""));const u=e instanceof s.Agent;if(p&&u){t.socket=h;const e=r.connect(t);return e.once("close",(()=>{h.destroy()})),void n(null,e)}const l=new i(h);l.encrypted=!1,l._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},n(null,l)}))}catch(e){n(e)}})()};class p extends o.Agent{constructor(e){super(e),u(this,e.proxyOptions)}createConnection(e,t){d(this,e,t)}}class h extends s.Agent{constructor(e){super(e),u(this,e.proxyOptions)}createConnection(e,t){d(this,e,t)}}e.exports={HttpOverHttp2:p,HttpsOverHttp2:h}},80449:(e,t,n)=>{"use strict";const r=n(58611),o=n(65692),s=n(86538),i=n(29350);class a extends s{async _getProxyStream(e){const{proxyOptions:t}=this,{url:n,headers:s}=this.proxyOptions;return a=("https:"===n.protocol?o:r).request({...t,hostname:n.hostname,port:n.port,path:e,headers:{...i(this),...s,host:e},method:"CONNECT"}).end(),new Promise(((e,t)=>{a.once("error",t),a.once("connect",((n,r,o)=>{r.unshift(o),a.off("error",t),e([r,n.statusCode,n.statusMessage])}))}));var a}}e.exports={Http2OverHttp:a,Http2OverHttps:a}},50312:(e,t,n)=>{"use strict";const{globalAgent:r}=n(17444),o=n(86538),s=n(29350);e.exports=class extends o{async _getProxyStream(e){const{proxyOptions:t}=this,n={...s(this),...t.headers,":method":"CONNECT",":authority":e},o=await r.request(t.url,t,n),i=await(e=>new Promise(((t,n)=>{e.once("error",n),e.once("response",(r=>{e.off("error",n),t(r[":status"])}))})))(o);return[o,i,""]}}},86538:(e,t,n)=>{"use strict";const{Agent:r}=n(17444),o=n(36559),s=n(43305),i=n(24394);e.exports=class extends r{constructor(e){super(e),i(this,e.proxyOptions)}async createConnection(e,t){const n=`${e.hostname}:${e.port||443}`,[r,i,a]=await this._getProxyStream(n);if(200!==i)throw new s(i,a);if(!this.proxyOptions.raw){const e=new o(r);return e.encrypted=!1,e._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},e}return t.socket=r,super.createConnection(e,t)}}},24394:(e,t,n)=>{"use strict";const{URL:r}=n(87016),o=n(9420);e.exports=(e,t)=>{o("proxyOptions",t,["object"]),o("proxyOptions.headers",t.headers,["object","undefined"]),o("proxyOptions.raw",t.raw,["boolean","undefined"]),o("proxyOptions.url",t.url,[r,"string"]);const n=new r(t.url);e.proxyOptions={raw:!0,...t,headers:{...t.headers},url:n}}},43305:e=>{"use strict";class t extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`),this.statusCode=e,this.statusMessage=t}}e.exports=t},50491:(e,t,n)=>{"use strict";const{isIP:r}=n(69278),o=n(42613);e.exports=e=>{const t=(e=>{if("["===e[0]){const t=e.indexOf("]");return o(-1!==t),e.slice(1,t)}const t=e.indexOf(":");return-1===t?e:e.slice(0,t)})(e);return r(t)?"":t}},9420:e=>{"use strict";e.exports=(e,t,n)=>{if(!n.some((e=>"string"==typeof e?typeof t===e:t instanceof e))){const r=n.map((e=>"string"==typeof e?e:e.name));throw new TypeError(`Expected '${e}' to be a type of ${r.join(" or ")}, got ${typeof t}`)}}},62822:e=>{"use strict";e.exports=e=>{if(0!==e.listenerCount("error"))return e;e.__destroy=e._destroy,e._destroy=(...t)=>{const n=t.pop();e.__destroy(...t,(async e=>{await Promise.resolve(),n(e)}))};const t=t=>{Promise.resolve().then((()=>{e.emit("error",t)}))};return e.once("error",t),Promise.resolve().then((()=>{e.off("error",t)})),e}},73876:e=>{"use strict";const t=(t,n,r)=>{e.exports[n]=class extends t{constructor(...e){super("string"==typeof r?r:r(e)),this.name=`${super.name} [${n}]`,this.code=n}}};t(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let n=e[1];const r=Array.isArray(n);return r&&(n=`${n.slice(0,-1).join(", ")} or ${n.slice(-1)}`),`The "${e[0]}" ${t} must be ${r?"one of":"of"} type ${n}. Received ${typeof e[2]}`})),t(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`)),t(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`)),t(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`)),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`)),t(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`)),t(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},33610:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},36559:(e,t,n)=>{"use strict";const r=n(2203),o=new(n(64756).TLSSocket)(new r.PassThrough)._handle._parentWrap.constructor;e.exports=o},21125:e=>{"use strict";e.exports=(e,t,n)=>{for(const r of n)e.on(r,((...e)=>t.emit(r,...e)))}},95332:(e,t,n)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=n(73876),o={has(e,t){const n=void 0===e.session?e:e.session.socket;return t in e||t in n},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":return!e.destroyed&&e.readable;case"setTimeout":{const{session:t}=e;return void 0!==t?t.setTimeout.bind(t):e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new r;default:{const n=void 0===e.session?e:e.session.socket,r=n[t];return"function"==typeof r?r.bind(n):r}}},getPrototypeOf:e=>void 0!==e.session?Reflect.getPrototypeOf(e.session.socket):Reflect.getPrototypeOf(e),set(e,t,n){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return e[t]=n,!0;case"setTimeout":{const{session:t}=e;return void 0===t?e.setTimeout=n:t.setTimeout=n,!0}case"write":case"read":case"pause":case"resume":throw new r;default:return(void 0===e.session?e:e.session.socket)[t]=n,!0}}};e.exports=o},45711:(e,t,n)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:r}=n(73876),o=n(33610),s=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if("string"!=typeof e||!s.test(e)&&!o(e))throw new r("Header name",e)}},39879:(e,t,n)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:o}=n(73876),s=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(void 0===t)throw new r(t,e);if(s.test(t))throw new o("header content",e)}},30616:(e,t,n)=>{const r=n(16928),o=n(55335),{fileURLToPath:s}=n(87016),{MessageChannel:i}=n(28167),{importHooks:a,specifiers:c,toHook:u}=n(16467);function l(e){a.push(e),u.forEach((([t,n])=>e(t,n)))}function d(e){const t=a.indexOf(e);t>-1&&a.splice(t,1)}function p(e,t,n,r){const o=e(t,n,r);o&&o!==t&&(t.default=o)}let h;function f(e,t,n){if(this instanceof f==0)return new f(e,t,n);"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null);const i=!!t&&!0===t.internals;h&&Array.isArray(e)&&h(e),this._iitmHook=(t,a)=>{const u=t;let l;if(t.startsWith("node:"))t=t.replace(/^node:/,"");else{if(t.startsWith("file://"))try{t=s(t)}catch(e){}const e=o(t);e&&(t=e.name,l=e.basedir)}if(e){for(const o of e)if(o===t){if(l)if(i)t=t+r.sep+r.relative(l,s(u));else if(!l.endsWith(c.get(u)))continue;p(n,a,t,l)}}else p(n,a,t,l)},l(this._iitmHook)}f.prototype.unhook=function(){d(this._iitmHook)},e.exports=f,e.exports.Hook=f,e.exports.addHook=l,e.exports.removeHook=d,e.exports.createAddHookMessageChannel=function(){const{port1:e,port2:t}=new i;let n,r=0;return h=t=>{r++,e.postMessage(t)},e.on("message",(()=>{r--,n&&r<=0&&n()})).unref(),{registerOptions:{data:{addHookMessagePort:t,include:[]},transferList:[t]},addHookMessagePort:t,waitForAllMessagesAcknowledged:function(){const e=setInterval((()=>{}),1e3),t=new Promise((e=>{n=e})).then((()=>{clearInterval(e)}));return 0===r&&n(),t}}}},16467:(e,t)=>{const n=[],r=new WeakMap,o=new Map,s=[],i={set:(e,t,n)=>r.get(e)[t](n),defineProperty(e,t,n){if(!("value"in n))throw new Error("Getters/setters are not supported for exports property descriptors.");return r.get(e)[t](n.value)}};t.register=function(e,t,a,c){o.set(e,c),r.set(t,a);const u=new Proxy(t,i);n.forEach((t=>t(e,u))),s.push([e,u])},t.importHooks=n,t.specifiers=o,t.toHook=s},69230:(e,t,n)=>{"use strict";var r=n(9957);function o(e,t){for(var n=e.split("."),r=t.split(" "),o=r.length>1?r[0]:"=",s=(r.length>1?r[1]:r[0]).split("."),i=0;i<3;++i){var a=parseInt(n[i]||0,10),c=parseInt(s[i]||0,10);if(a!==c)return"<"===o?a<c:">="===o&&a>=c}return">="===o}function s(e,t){var n=t.split(/ ?&& ?/);if(0===n.length)return!1;for(var r=0;r<n.length;++r)if(!o(e,n[r]))return!1;return!0}var i=n(17324);e.exports=function(e,t){return r(i,e)&&function(e,t){if("boolean"==typeof t)return t;var n=void 0===e?process.versions&&process.versions.node:e;if("string"!=typeof n)throw new TypeError(void 0===e?"Unable to determine current node version":"If provided, a valid node version is required");if(t&&"object"==typeof t){for(var r=0;r<t.length;++r)if(s(n,t[r]))return!0;return!1}return s(n,t)}(t,i[e])}},75516:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var n="",r=Array.isArray(t);n=r?"[":"{";var o=!0;for(var s in t){var i="function"==typeof t[s]||!r&&void 0===t[s];Object.hasOwnProperty.call(t,s)&&!i&&(o||(n+=","),o=!1,r?null==t[s]?n+="null":n+=e(t[s]):void 0!==t[s]&&(n+=e(s)+":"+e(t[s])))}return n+(r?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},58387:(e,t,n)=>{"use strict";const r=n(24434),o=n(75516),s=["sqlite","postgres","mysql","mongo","redis","tiered"];e.exports=class extends r{constructor(e,{emitErrors:t=!0,...r}={}){if(super(),this.opts={namespace:"keyv",serialize:o.stringify,deserialize:o.parse,..."string"==typeof e?{uri:e}:e,...r},!this.opts.store){const e={...this.opts};this.opts.store=(e=>{const t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){const r=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(n(16478)(t[r]))(e)}return new Map})(e)}if(this.opts.compression){const e=this.opts.compression;this.opts.serialize=e.serialize.bind(e),this.opts.deserialize=e.deserialize.bind(e)}"function"==typeof this.opts.store.on&&t&&this.opts.store.on("error",(e=>this.emit("error",e))),this.opts.store.namespace=this.opts.namespace;const s=e=>async function*(){for await(const[t,n]of"function"==typeof e?e(this.opts.store.namespace):e){const e=await this.opts.deserialize(n);this.opts.store.namespace&&!t.includes(this.opts.store.namespace)||("number"==typeof e.expires&&Date.now()>e.expires?this.delete(t):yield[this._getKeyUnprefix(t),e.value])}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return s.includes(this.opts.store.opts.dialect)||s.findIndex((e=>this.opts.store.opts.url.includes(e)))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map((e=>`${this.opts.namespace}:${e}`))}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){const{store:n}=this.opts,r=Array.isArray(e),o=r?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(r&&void 0===n.getMany){const e=[];for(const r of o)e.push(Promise.resolve().then((()=>n.get(r))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((e=>{if(null!=e)return"number"==typeof e.expires&&Date.now()>e.expires?this.delete(r).then((()=>{})):t&&t.raw?e:e.value})));return Promise.allSettled(e).then((e=>{const t=[];for(const n of e)t.push(n.value);return t}))}return Promise.resolve().then((()=>r?n.getMany(o):n.get(o))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((n=>{if(null!=n)return r?n.map(((n,r)=>{if("string"==typeof n&&(n=this.opts.deserialize(n)),null!=n){if(!("number"==typeof n.expires&&Date.now()>n.expires))return t&&t.raw?n:n.value;this.delete(e[r]).then((()=>{}))}})):"number"==typeof n.expires&&Date.now()>n.expires?this.delete(e).then((()=>{})):t&&t.raw?n:n.value}))}set(e,t,n){const r=this._getKeyPrefix(e);void 0===n&&(n=this.opts.ttl),0===n&&(n=void 0);const{store:o}=this.opts;return Promise.resolve().then((()=>{const e="number"==typeof n?Date.now()+n:null;return"symbol"==typeof t&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:e},this.opts.serialize(t)})).then((e=>o.set(r,e,n))).then((()=>!0))}delete(e){const{store:t}=this.opts;if(Array.isArray(e)){const n=this._getKeyPrefixArray(e);if(void 0===t.deleteMany){const e=[];for(const r of n)e.push(t.delete(r));return Promise.allSettled(e).then((e=>e.every((e=>!0===e.value))))}return Promise.resolve().then((()=>t.deleteMany(n)))}const n=this._getKeyPrefix(e);return Promise.resolve().then((()=>t.delete(n)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}has(e){const t=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then((async()=>"function"==typeof n.has?n.has(t):void 0!==await n.get(t)))}disconnect(){const{store:e}=this.opts;if("function"==typeof e.disconnect)return e.disconnect()}}},16478:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=16478,e.exports=t},84865:e=>{"use strict";const t=(e,t,r,o)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const s=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!n(s,i)&&o||Object.defineProperty(e,r,i)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},r=(e,t)=>`/* Wrapped ${e}*/\n${t}`,o=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),s=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:i=!1}={})=>{const{name:a}=e;for(const r of Reflect.ownKeys(n))t(e,n,r,i);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const i=""===n?"":`with ${n.trim()}() `,a=r.bind(null,i,t.toString());Object.defineProperty(a,"name",s),Object.defineProperty(e,"toString",{...o,value:a})})(e,n,a),e}},55335:(e,t,n)=>{"use strict";var r=n(16928);e.exports=function(e){var t=e.split(r.sep),n=t.lastIndexOf("node_modules");if(-1!==n&&t[n+1]){var o="@"===t[n+1][0],s=o?3:2;return{name:o?t[n+1]+"/"+t[n+2]:t[n+1],basedir:t.slice(0,n+s).join(r.sep),path:t.slice(n+s).join(r.sep)}}}},6585:e=>{var t=1e3,n=60*t,r=60*n,o=24*r,s=7*o;function i(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,a){a=a||{};var c,u,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===l&&isFinite(e))return a.long?(c=e,(u=Math.abs(c))>=o?i(c,u,o,"day"):u>=r?i(c,u,r,"hour"):u>=n?i(c,u,n,"minute"):u>=t?i(c,u,t,"second"):c+" ms"):function(e){var s=Math.abs(e);return s>=o?Math.round(e/o)+"d":s>=r?Math.round(e/r)+"h":s>=n?Math.round(e/n)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},44617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},26368:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,s||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,s,i){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,s),!0;case 6:return l.fn.call(l.context,t,r,o,s,i),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||i(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},70992:e=>{"use strict";var t="win32"===process.platform,n=/^(((?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/,r={parse:function(e){if("string"!=typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t,r=(t=e,n.exec(t).slice(1));if(!r||5!==r.length)throw new TypeError("Invalid path '"+e+"'");return{root:r[1],dir:r[0]===r[1]?r[0]:r[0].slice(0,-1),base:r[2],ext:r[4],name:r[3]}}},o=/^((\/?)(?:[^\/]*\/)*)((\.{1,2}|[^\/]+?|)(\.[^.\/]*|))[\/]*$/,s={parse:function(e){if("string"!=typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t,n=(t=e,o.exec(t).slice(1));if(!n||5!==n.length)throw new TypeError("Invalid path '"+e+"'");return{root:n[1],dir:n[0].slice(0,-1),base:n[2],ext:n[4],name:n[3]}}};e.exports=t?r.parse:s.parse,e.exports.posix=s.parse,e.exports.win32=r.parse},87392:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},69136:(e,t,n)=>{"use strict";const r=n(16928),o=n(73339),s=n(69607),i=n(45753)("require-in-the-middle"),a=n(55335);let c;if(e.exports=d,e.exports.Hook=d,o.isBuiltin)c=o.isBuiltin;else{const[e,t]=process.versions.node.split(".").map(Number);c=8===e&&t<8?e=>"http2"===e||!!s.core[e]:e=>!!s.core[e]}const u=/([/\\]index)?(\.js)?$/;class l{constructor(){this._localCache=new Map,this._kRitmExports=Symbol("RitmExports")}has(e,t){if(this._localCache.has(e))return!0;if(t)return!1;{const t=n.c[e];return!(!t||!(this._kRitmExports in t))}}get(e,t){const r=this._localCache.get(e);if(void 0!==r)return r;if(!t){const t=n.c[e];return t&&t[this._kRitmExports]}}set(e,t,r){r?this._localCache.set(e,t):e in n.c?n.c[e][this._kRitmExports]=t:(i('non-core module is unexpectedly not in require.cache: "%s"',e),this._localCache.set(e,t))}}function d(e,t,p){if(this instanceof d==0)return new d(e,t,p);if("function"==typeof e?(p=e,e=null,t=null):"function"==typeof t&&(p=t,t=null),"function"!=typeof o._resolveFilename)return console.error("Error: Expected Module._resolveFilename to be a function (was: %s) - aborting!",typeof o._resolveFilename),void console.error("Please report this error as an issue related to Node.js %s at %s",process.version,n(36667).SN.O);this._cache=new l,this._unhooked=!1,this._origRequire=o.prototype.require;const h=this,f=new Set,m=!!t&&!0===t.internals,g=Array.isArray(e);function _(t,n){const l=t[0],d=c(l);let _,y,S;if(d){if(_=l,l.startsWith("node:")){const e=l.slice(5);c(e)&&(_=e)}}else{if(n)return i("call to process.getBuiltinModule with unknown built-in id"),h._origGetBuiltinModule.apply(this,t);try{_=o._resolveFilename(l,this)}catch(e){return i('Module._resolveFilename("%s") threw %j, calling original Module.require',l,e.message),h._origRequire.apply(this,t)}}if(i("processing %s module require('%s'): %s",!0===d?"core":"non-core",l,_),!0===h._cache.has(_,d))return i("returning already patched cached module: %s",_),h._cache.get(_,d);const b=f.has(_);!1===b&&f.add(_);const E=n?h._origGetBuiltinModule.apply(this,t):h._origRequire.apply(this,t);if(!0===b)return i("module is in the process of being patched already - ignoring: %s",_),E;if(f.delete(_),!0===d){if(!0===g&&!1===e.includes(_))return i("ignoring core module not on whitelist: %s",_),E;y=_}else if(!0===g&&e.includes(_)){const e=r.parse(_);y=e.name,S=e.dir}else{const t=a(_);if(void 0===t)return i("could not parse filename: %s",_),E;y=t.name,S=t.basedir;const n=function(e){const t="/"!==r.sep?e.path.split(r.sep).join("/"):e.path;return r.posix.join(e.name,t).replace(u,"")}(t);i("resolved filename to module: %s (id: %s, resolved: %s, basedir: %s)",y,l,n,S);let o=!1;if(g){if(!l.startsWith(".")&&e.includes(l)&&(y=l,o=!0),!e.includes(y)&&!e.includes(n))return E;e.includes(n)&&n!==y&&(y=n,o=!0)}if(!o){let e;try{e=s.sync(y,{basedir:S})}catch(e){return i("could not resolve module: %s",y),h._cache.set(_,E,d),E}if(e!==_){if(!0!==m)return i("ignoring require of non-main module file: %s",e),h._cache.set(_,E,d),E;y=y+r.sep+r.relative(S,_),i("preparing to process require of internal file: %s",y)}}}h._cache.set(_,E,d),i("calling require hook: %s",y);const v=p(E,y,S);return h._cache.set(_,v,d),i("returning module: %s",y),v}i("registering require hook"),this._require=o.prototype.require=function(e){return!0===h._unhooked?(i("ignoring require call - module is soft-unhooked"),h._origRequire.apply(this,arguments)):_.call(this,arguments,!1)},"function"==typeof process.getBuiltinModule&&(this._origGetBuiltinModule=process.getBuiltinModule,this._getBuiltinModule=process.getBuiltinModule=function(e){return!0===h._unhooked?(i("ignoring process.getBuiltinModule call - module is soft-unhooked"),h._origGetBuiltinModule.apply(this,arguments)):_.call(this,arguments,!0)})}d.prototype.unhook=function(){this._unhooked=!0,this._require===o.prototype.require?(o.prototype.require=this._origRequire,i("require unhook successful")):i("require unhook unsuccessful"),void 0!==process.getBuiltinModule&&(this._getBuiltinModule===process.getBuiltinModule?(process.getBuiltinModule=this._origGetBuiltinModule,i("process.getBuiltinModule unhook successful")):i("process.getBuiltinModule unhook unsuccessful"))}},51169:(e,t,n)=>{"use strict";const r=n(64756);e.exports=(e={},t=r.connect)=>new Promise(((n,r)=>{let o,s=!1;const i=async()=>{await c,o.off("timeout",a),o.off("error",r),e.resolveSocket?(n({alpnProtocol:o.alpnProtocol,socket:o,timeout:s}),s&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),n({alpnProtocol:o.alpnProtocol,timeout:s}))},a=async()=>{s=!0,i()},c=(async()=>{try{o=await t(e,i),o.on("error",r),o.once("timeout",a)}catch(e){r(e)}})()}))},69607:(e,t,n)=>{var r=n(1295);r.core=n(11088),r.isCore=n(99359),r.sync=n(46244),e.exports=r},1295:(e,t,n)=>{var r=n(79896),o=n(25573),s=n(16928),i=n(94664),a=n(67730),c=n(11287),u=n(69230),l="win32"!==process.platform&&r.realpath&&"function"==typeof r.realpath.native?r.realpath.native:r.realpath,d=o(),p=function(e,t){r.stat(e,(function(e,n){return e?"ENOENT"===e.code||"ENOTDIR"===e.code?t(null,!1):t(e):t(null,n.isFile()||n.isFIFO())}))},h=function(e,t){r.stat(e,(function(e,n){return e?"ENOENT"===e.code||"ENOTDIR"===e.code?t(null,!1):t(e):t(null,n.isDirectory())}))},f=function(e,t){l(e,(function(n,r){n&&"ENOENT"!==n.code?t(n):t(null,n?e:r)}))},m=function(e,t,n,r){n&&!1===n.preserveSymlinks?e(t,r):r(null,t)},g=function(e,t,n){e(t,(function(e,t){if(e)n(e);else try{var r=JSON.parse(t);n(null,r)}catch(e){n(null)}}))};e.exports=function(e,t,n){var o=n,l=t;if("function"==typeof t&&(o=l,l={}),"string"!=typeof e){var _=new TypeError("Path must be a string.");return process.nextTick((function(){o(_)}))}var y=(l=c(e,l)).isFile||p,S=l.isDirectory||h,b=l.readFile||r.readFile,E=l.realpath||f,v=l.readPackage||g;if(l.readFile&&l.readPackage){var T=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick((function(){o(T)}))}var I=l.packageIterator,R=l.extensions||[".js"],A=!1!==l.includeCoreModules,C=l.basedir||s.dirname(i()),O=l.filename||C;l.paths=l.paths||[s.join(d,".node_modules"),s.join(d,".node_libraries")];var N,P=s.resolve(C);function w(t,n,r){t?o(t):n?o(null,n,r):x(N,(function(t,n,r){if(t)o(t);else if(n)m(E,n,l,(function(e,t){e?o(e):o(null,t,r)}));else{var s=new Error("Cannot find module '"+e+"' from '"+O+"'");s.code="MODULE_NOT_FOUND",o(s)}}))}function L(e,t,n){var r=t,o=n;"function"==typeof r&&(o=r,r=void 0),function e(t,n,r){if(0===t.length)return o(null,void 0,r);var i=n+t[0],a=r;function c(r,c,d){if(a=c,r)return o(r);if(d&&a&&l.pathFilter){var p=s.relative(d,i),h=p.slice(0,p.length-t[0].length),f=l.pathFilter(a,n,h);if(f)return e([""].concat(R.slice()),s.resolve(d,f),a)}y(i,u)}function u(r,s){return r?o(r):s?o(null,i,a):void e(t.slice(1),n,a)}a?c(null,a):M(s.dirname(i),c)}([""].concat(R),e,r)}function M(e,t){return""===e||"/"===e||"win32"===process.platform&&/^\w:[/\\]*$/.test(e)||/[/\\]node_modules[/\\]*$/.test(e)?t(null):void m(E,e,l,(function(n,r){if(n)return M(s.dirname(e),t);var o=s.join(r,"package.json");y(o,(function(n,r){if(!r)return M(s.dirname(e),t);v(b,o,(function(n,r){n&&t(n);var s=r;s&&l.packageFilter&&(s=l.packageFilter(s,o)),t(null,s,e)}))}))}))}function x(e,t,n){var r=n,o=t;"function"==typeof o&&(r=o,o=l.package),m(E,e,l,(function(t,n){if(t)return r(t);var i=s.join(n,"package.json");y(i,(function(t,n){return t?r(t):n?void v(b,i,(function(t,n){if(t)return r(t);var o=n;if(o&&l.packageFilter&&(o=l.packageFilter(o,i)),o&&o.main){if("string"!=typeof o.main){var a=new TypeError("package "+o.name+" `main` must be a string");return a.code="INVALID_PACKAGE_MAIN",r(a)}return"."!==o.main&&"./"!==o.main||(o.main="index"),void L(s.resolve(e,o.main),o,(function(t,n,o){return t?r(t):n?r(null,n,o):o?void x(s.resolve(e,o.main),o,(function(t,n,o){return t?r(t):n?r(null,n,o):void L(s.join(e,"index"),o,r)})):L(s.join(e,"index"),o,r)}))}L(s.join(e,"/index"),o,r)})):L(s.join(e,"index"),o,r)}))}))}function k(e,t){if(0===t.length)return e(null,void 0);var n=t[0];function r(t,r,s){return t?e(t):r?e(null,r,s):void x(n,l.package,o)}function o(n,r,o){return n?e(n):r?e(null,r,o):void k(e,t.slice(1))}S(s.dirname(n),(function(o,s){return o?e(o):s?void L(n,l.package,r):k(e,t.slice(1))}))}m(E,P,l,(function(t,n){t?o(t):function(t){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e))N=s.resolve(t,e),"."!==e&&".."!==e&&"/"!==e.slice(-1)||(N+="/"),/\/$/.test(e)&&N===t?x(N,l.package,w):L(N,l.package,w);else{if(A&&u(e))return o(null,e);!function(e,t,n){var r=function(){return function(e,t,n){for(var r=a(t,n,e),o=0;o<r.length;o++)r[o]=s.join(r[o],e);return r}(e,t,l)};k(n,I?I(e,t,r,l):r())}(e,t,(function(t,n,r){if(t)o(t);else{if(n)return m(E,n,l,(function(e,t){e?o(e):o(null,t,r)}));var s=new Error("Cannot find module '"+e+"' from '"+O+"'");s.code="MODULE_NOT_FOUND",o(s)}}))}}(n)}))}},94664:e=>{e.exports=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var t=(new Error).stack;return Error.prepareStackTrace=e,t[2].getFileName()}},11088:(e,t,n)=>{"use strict";var r=n(69230),o=n(62035),s={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(s[i]=r(i));e.exports=s},25573:(e,t,n)=>{"use strict";var r=n(70857);e.exports=r.homedir||function(){var e=process.env.HOME,t=process.env.LOGNAME||process.env.USER||process.env.LNAME||process.env.USERNAME;return"win32"===process.platform?process.env.USERPROFILE||process.env.HOMEDRIVE+process.env.HOMEPATH||e||null:"darwin"===process.platform?e||(t?"/Users/"+t:null):"linux"===process.platform?e||(0===process.getuid()?"/root":t?"/home/"+t:null):e||null}},99359:(e,t,n)=>{var r=n(69230);e.exports=function(e){return r(e)}},67730:(e,t,n)=>{var r=n(16928),o=r.parse||n(70992),s=function(e,t){var n="/";/^([A-Za-z]:)/.test(e)?n="":/^\\\\/.test(e)&&(n="\\\\");for(var s=[e],i=o(e);i.dir!==s[s.length-1];)s.push(i.dir),i=o(i.dir);return s.reduce((function(e,o){return e.concat(t.map((function(e){return r.resolve(n,o,e)})))}),[])};e.exports=function(e,t,n){var r=t&&t.moduleDirectory?[].concat(t.moduleDirectory):["node_modules"];if(t&&"function"==typeof t.paths)return t.paths(n,e,(function(){return s(e,r)}),t);var o=s(e,r);return t&&t.paths?o.concat(t.paths):o}},11287:(e,t,n)=>{const r=n(16928);e.exports=function(e,t){if((t=t||{}).forceNodeResolution||!process.versions.pnp)return t;const{findPnpApi:o}=n(73339),s=(e,t)=>{const n=e.match(/^((?:@[^/]+\/)?[^/]+)(\/.*)?/);if(!n)throw new Error(`Assertion failed: Expected the "resolve" package to call the "paths" callback with package names only (got "${e}")`);"/"!==t.charAt(t.length-1)&&(t=r.join(t,"/"));const s=o(t);if(null===s)return;let i;try{i=s.resolveToUnqualified(`${n[1]}/package.json`,t,{considerBuiltins:!1})}catch(e){return null}if(null===i)throw new Error(`Assertion failed: The resolution thinks that "${n[1]}" is a Node builtin`);const a=r.dirname(i);return{packagePath:a,unqualifiedPath:void 0!==n[2]?r.join(a,n[2]):a}},i=(e,t)=>{for(let n=0;n<t.length;n++){const r=s(e,t[n]);if(r||n===t.length-1)return r}return null},a=Array.isArray(t.paths)?t.paths:[];let c=!1;return t.__skipPackageIterator||(t.packageIterator=function(e,t,n,r){c=!0;try{return((e,t,n)=>{const r=[t].concat(a),o=i(e,r);return null==o?n():[o.unqualifiedPath]})(e,t,n)}finally{c=!1}}),t.paths=function(e,t,n,o){return c?n().concat(a):((e,t,n)=>{const o=[t].concat(a),s=i(e,o);if(null==s)return n().concat(a);let c=r.dirname(s.packagePath);return e.match(/^@[^/]+\//)&&(c=r.dirname(c)),[c]})(e,t,n)},t}},46244:(e,t,n)=>{var r=n(69230),o=n(79896),s=n(16928),i=n(25573),a=n(94664),c=n(67730),u=n(11287),l="win32"!==process.platform&&o.realpathSync&&"function"==typeof o.realpathSync.native?o.realpathSync.native:o.realpathSync,d=i(),p=function(e){try{var t=o.statSync(e,{throwIfNoEntry:!1})}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return!1;throw e}return!!t&&(t.isFile()||t.isFIFO())},h=function(e){try{var t=o.statSync(e,{throwIfNoEntry:!1})}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return!1;throw e}return!!t&&t.isDirectory()},f=function(e){try{return l(e)}catch(e){if("ENOENT"!==e.code)throw e}return e},m=function(e,t,n){return n&&!1===n.preserveSymlinks?e(t):t},g=function(e,t){var n=e(t);try{return JSON.parse(n)}catch(e){}};e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Path must be a string.");var n=u(e,t),i=n.isFile||p,l=n.readFileSync||o.readFileSync,_=n.isDirectory||h,y=n.realpathSync||f,S=n.readPackageSync||g;if(n.readFileSync&&n.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var b=n.packageIterator,E=n.extensions||[".js"],v=!1!==n.includeCoreModules,T=n.basedir||s.dirname(a()),I=n.filename||T;n.paths=n.paths||[s.join(d,".node_modules"),s.join(d,".node_libraries")];var R=m(y,s.resolve(T),n);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e)){var A=s.resolve(R,e);"."!==e&&".."!==e&&"/"!==e.slice(-1)||(A+="/");var C=P(A)||L(A);if(C)return m(y,C,n)}else{if(v&&r(e))return e;var O=function(e,t){for(var r=function(){return function(e,t,n){for(var r=c(t,n,e),o=0;o<r.length;o++)r[o]=s.join(r[o],e);return r}(e,t,n)},o=b?b(e,t,r,n):r(),i=0;i<o.length;i++){var a=o[i];if(_(s.dirname(a))){var u=P(a);if(u)return u;var l=L(a);if(l)return l}}}(e,R);if(O)return m(y,O,n)}var N=new Error("Cannot find module '"+e+"' from '"+I+"'");throw N.code="MODULE_NOT_FOUND",N;function P(e){var t=w(s.dirname(e));if(t&&t.dir&&t.pkg&&n.pathFilter){var r=s.relative(t.dir,e),o=n.pathFilter(t.pkg,e,r);o&&(e=s.resolve(t.dir,o))}if(i(e))return e;for(var a=0;a<E.length;a++){var c=e+E[a];if(i(c))return c}}function w(e){if(""!==e&&"/"!==e&&!("win32"===process.platform&&/^\w:[/\\]*$/.test(e)||/[/\\]node_modules[/\\]*$/.test(e))){var t=s.join(m(y,e,n),"package.json");if(!i(t))return w(s.dirname(e));var r=S(l,t);return r&&n.packageFilter&&(r=n.packageFilter(r,e)),{pkg:r,dir:e}}}function L(e){var t=s.join(m(y,e,n),"/package.json");if(i(t)){try{var r=S(l,t)}catch(e){}if(r&&n.packageFilter&&(r=n.packageFilter(r,e)),r&&r.main){if("string"!=typeof r.main){var o=new TypeError("package "+r.name+" `main` must be a string");throw o.code="INVALID_PACKAGE_MAIN",o}"."!==r.main&&"./"!==r.main||(r.main="index");try{var a=P(s.resolve(e,r.main));if(a)return a;var c=L(s.resolve(e,r.main));if(c)return c}catch(e){}}}return P(s.join(e,"/index"))}}},93904:(e,t,n)=>{const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t=s(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=s(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=o;const s=n(98587),{safeRe:i,t:a}=n(99718),c=n(72111),u=n(57272),l=n(53908),d=n(78311)},78311:(e,t,n)=>{const r=/\s+/g;class o{constructor(e,t){if(t=i(t),e instanceof o)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new o(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!_(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&y(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,n=s.get(t);if(n)return n;const r=this.options.loose,o=r?l[d.HYPHENRANGELOOSE]:l[d.HYPHENRANGE];e=e.replace(o,P(this.options.includePrerelease)),c("hyphen replace",e),e=e.replace(l[d.COMPARATORTRIM],p),c("comparator trim",e),e=e.replace(l[d.TILDETRIM],h),c("tilde trim",e),e=e.replace(l[d.CARETTRIM],f),c("caret trim",e);let i=e.split(" ").map((e=>b(e,this.options))).join(" ").split(/\s+/).map((e=>N(e,this.options)));r&&(i=i.filter((e=>(c("loose invalid filter",e,this.options),!!e.match(l[d.COMPARATORLOOSE]))))),c("range list",i);const u=new Map,y=i.map((e=>new a(e,this.options)));for(const e of y){if(_(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const S=[...u.values()];return s.set(t,S),S}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Range is required");return this.set.some((n=>S(n,t)&&e.set.some((e=>S(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(w(this.set[t],e,this.options))return!0;return!1}}e.exports=o;const s=new(n(68794)),i=n(98587),a=n(93904),c=n(57272),u=n(53908),{safeRe:l,t:d,comparatorTrimReplace:p,tildeTrimReplace:h,caretTrimReplace:f}=n(99718),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=n(16874),_=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,S=(e,t)=>{let n=!0;const r=e.slice();let o=r.pop();for(;n&&r.length;)n=r.every((e=>o.intersects(e,t))),o=r.pop();return n},b=(e,t)=>(c("comp",e,t),e=I(e,t),c("caret",e),e=v(e,t),c("tildes",e),e=A(e,t),c("xrange",e),e=O(e,t),c("stars",e),e),E=e=>!e||"x"===e.toLowerCase()||"*"===e,v=(e,t)=>e.trim().split(/\s+/).map((e=>T(e,t))).join(" "),T=(e,t)=>{const n=t.loose?l[d.TILDELOOSE]:l[d.TILDE];return e.replace(n,((t,n,r,o,s)=>{let i;return c("tilde",e,t,n,r,o,s),E(n)?i="":E(r)?i=`>=${n}.0.0 <${+n+1}.0.0-0`:E(o)?i=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:s?(c("replaceTilde pr",s),i=`>=${n}.${r}.${o}-${s} <${n}.${+r+1}.0-0`):i=`>=${n}.${r}.${o} <${n}.${+r+1}.0-0`,c("tilde return",i),i}))},I=(e,t)=>e.trim().split(/\s+/).map((e=>R(e,t))).join(" "),R=(e,t)=>{c("caret",e,t);const n=t.loose?l[d.CARETLOOSE]:l[d.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,o,s,i)=>{let a;return c("caret",e,t,n,o,s,i),E(n)?a="":E(o)?a=`>=${n}.0.0${r} <${+n+1}.0.0-0`:E(s)?a="0"===n?`>=${n}.${o}.0${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${r} <${+n+1}.0.0-0`:i?(c("replaceCaret pr",i),a="0"===n?"0"===o?`>=${n}.${o}.${s}-${i} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}-${i} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s}-${i} <${+n+1}.0.0-0`):(c("no pr"),a="0"===n?"0"===o?`>=${n}.${o}.${s}${r} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s} <${+n+1}.0.0-0`),c("caret return",a),a}))},A=(e,t)=>(c("replaceXRanges",e,t),e.split(/\s+/).map((e=>C(e,t))).join(" ")),C=(e,t)=>{e=e.trim();const n=t.loose?l[d.XRANGELOOSE]:l[d.XRANGE];return e.replace(n,((n,r,o,s,i,a)=>{c("xRange",e,n,r,o,s,i,a);const u=E(o),l=u||E(s),d=l||E(i),p=d;return"="===r&&p&&(r=""),a=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&p?(l&&(s=0),i=0,">"===r?(r=">=",l?(o=+o+1,s=0,i=0):(s=+s+1,i=0)):"<="===r&&(r="<",l?o=+o+1:s=+s+1),"<"===r&&(a="-0"),n=`${r+o}.${s}.${i}${a}`):l?n=`>=${o}.0.0${a} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${a} <${o}.${+s+1}.0-0`),c("xRange return",n),n}))},O=(e,t)=>(c("replaceStars",e,t),e.trim().replace(l[d.STAR],"")),N=(e,t)=>(c("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),P=e=>(t,n,r,o,s,i,a,c,u,l,d,p)=>`${n=E(r)?"":E(o)?`>=${r}.0.0${e?"-0":""}`:E(s)?`>=${r}.${o}.0${e?"-0":""}`:i?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=E(u)?"":E(l)?`<${+u+1}.0.0-0`:E(d)?`<${u}.${+l+1}.0-0`:p?`<=${u}.${l}.${d}-${p}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),w=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(c(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},53908:(e,t,n)=>{const r=n(57272),{MAX_LENGTH:o,MAX_SAFE_INTEGER:s}=n(16874),{safeRe:i,t:a}=n(99718),c=n(98587),{compareIdentifiers:u}=n(61123);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?i[a.LOOSE]:i[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return u(n,o)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(r("build compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return u(n,o)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},57414:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},72111:(e,t,n)=>{const r=n(94641),o=n(13999),s=n(35580),i=n(54089),a=n(7059),c=n(25200);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return o(e,n,u);case">":return s(e,n,u);case">=":return i(e,n,u);case"<":return a(e,n,u);case"<=":return c(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},46170:(e,t,n)=>{const r=n(53908),o=n(30144),{safeRe:s,t:i}=n(99718);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?s[i.COERCERTLFULL]:s[i.COERCERTL];let o;for(;(o=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&o.index+o[0].length===n.index+n[0].length||(n=o),r.lastIndex=o.index+o[1].length+o[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?s[i.COERCEFULL]:s[i.COERCE]);if(null===n)return null;const a=n[2],c=n[3]||"0",u=n[4]||"0",l=t.includePrerelease&&n[5]?`-${n[5]}`:"",d=t.includePrerelease&&n[6]?`+${n[6]}`:"";return o(`${a}.${c}.${u}${l}${d}`,t)}},40909:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n)=>{const o=new r(e,n),s=new r(t,n);return o.compare(s)||o.compareBuild(s)}},11763:(e,t,n)=>{const r=n(50560);e.exports=(e,t)=>r(e,t,!0)},50560:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},51832:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,null,!0),o=r(t,null,!0),s=n.compare(o);if(0===s)return null;const i=s>0,a=i?n:o,c=i?o:n,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return n.major!==o.major?l+"major":n.minor!==o.minor?l+"minor":n.patch!==o.patch?l+"patch":"prerelease"}},94641:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>0===r(e,t,n)},35580:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)>0},54089:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)>=0},93007:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n,o,s)=>{"string"==typeof n&&(s=o,o=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,o,s).version}catch(e){return null}}},7059:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)<0},25200:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(e,t,n)<=0},32938:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).major},46254:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).minor},13999:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>0!==r(e,t,n)},30144:(e,t,n)=>{const r=n(53908);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},24493:(e,t,n)=>{const r=n(53908);e.exports=(e,t)=>new r(e,t).patch},31729:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},9970:(e,t,n)=>{const r=n(50560);e.exports=(e,t,n)=>r(t,e,n)},74277:(e,t,n)=>{const r=n(40909);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},97638:(e,t,n)=>{const r=n(78311);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},43927:(e,t,n)=>{const r=n(40909);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},56953:(e,t,n)=>{const r=n(30144);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},99589:(e,t,n)=>{const r=n(99718),o=n(16874),s=n(53908),i=n(61123),a=n(30144),c=n(56953),u=n(57414),l=n(93007),d=n(51832),p=n(32938),h=n(46254),f=n(24493),m=n(31729),g=n(50560),_=n(9970),y=n(11763),S=n(40909),b=n(43927),E=n(74277),v=n(35580),T=n(7059),I=n(94641),R=n(13999),A=n(54089),C=n(25200),O=n(72111),N=n(46170),P=n(93904),w=n(78311),L=n(97638),M=n(77631),x=n(19628),k=n(270),G=n(41261),U=n(13874),V=n(97075),H=n(75571),D=n(5342),j=n(76780),B=n(72525),F=n(75032);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:p,minor:h,patch:f,prerelease:m,compare:g,rcompare:_,compareLoose:y,compareBuild:S,sort:b,rsort:E,gt:v,lt:T,eq:I,neq:R,gte:A,lte:C,cmp:O,coerce:N,Comparator:P,Range:w,satisfies:L,toComparators:M,maxSatisfying:x,minSatisfying:k,minVersion:G,validRange:U,outside:V,gtr:H,ltr:D,intersects:j,simplifyRange:B,subset:F,SemVer:s,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers}},16874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},57272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},61123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),o=t.test(n);return r&&o&&(e=+e,n=+n),e===n?0:r&&!o?-1:o&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},68794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},98587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},99718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:s}=n(16874),i=n(57272),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[p,o]],f=(e,t,n)=>{const r=(e=>{for(const[t,n]of h)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),o=d++;i(e,o,t),l[e]=o,u[o]=t,a[o]=new RegExp(t,n?"g":void 0),c[o]=new RegExp(r,n?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),f("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${p}+`),f("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),f("FULL",`^${u[l.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),f("LOOSE",`^${u[l.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),f("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),f("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",u[l.COERCE],!0),f("COERCERTLFULL",u[l.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},75571:(e,t,n)=>{const r=n(97075);e.exports=(e,t,n)=>r(e,t,">",n)},76780:(e,t,n)=>{const r=n(78311);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},5342:(e,t,n)=>{const r=n(97075);e.exports=(e,t,n)=>r(e,t,"<",n)},19628:(e,t,n)=>{const r=n(53908),o=n(78311);e.exports=(e,t,n)=>{let s=null,i=null,a=null;try{a=new o(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(s&&-1!==i.compare(e)||(s=e,i=new r(s,n)))})),s}},270:(e,t,n)=>{const r=n(53908),o=n(78311);e.exports=(e,t,n)=>{let s=null,i=null,a=null;try{a=new o(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(s&&1!==i.compare(e)||(s=e,i=new r(s,n)))})),s}},41261:(e,t,n)=>{const r=n(53908),o=n(78311),s=n(35580);e.exports=(e,t)=>{e=new o(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let i=null;o.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!s(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!s(n,i)||(n=i)}return n&&e.test(n)?n:null}},97075:(e,t,n)=>{const r=n(53908),o=n(93904),{ANY:s}=o,i=n(78311),a=n(97638),c=n(35580),u=n(7059),l=n(25200),d=n(54089);e.exports=(e,t,n,p)=>{let h,f,m,g,_;switch(e=new r(e,p),t=new i(t,p),n){case">":h=c,f=l,m=u,g=">",_=">=";break;case"<":h=u,f=d,m=c,g="<",_="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let i=null,a=null;if(r.forEach((e=>{e.semver===s&&(e=new o(">=0.0.0")),i=i||e,a=a||e,h(e.semver,i.semver,p)?i=e:m(e.semver,a.semver,p)&&(a=e)})),i.operator===g||i.operator===_)return!1;if((!a.operator||a.operator===g)&&f(e,a.semver))return!1;if(a.operator===_&&m(e,a.semver))return!1}return!0}},72525:(e,t,n)=>{const r=n(97638),o=n(50560);e.exports=(e,t,n)=>{const s=[];let i=null,a=null;const c=e.sort(((e,t)=>o(e,t,n)));for(const e of c)r(e,t,n)?(a=e,i||(i=e)):(a&&s.push([i,a]),a=null,i=null);i&&s.push([i,null]);const u=[];for(const[e,t]of s)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},75032:(e,t,n)=>{const r=n(78311),o=n(93904),{ANY:s}=o,i=n(97638),a=n(50560),c=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],l=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===s){if(1===t.length&&t[0].semver===s)return!0;e=n.includePrerelease?c:u}if(1===t.length&&t[0].semver===s){if(n.includePrerelease)return!0;t=u}const r=new Set;let o,l,h,f,m,g,_;for(const t of e)">"===t.operator||">="===t.operator?o=d(o,t,n):"<"===t.operator||"<="===t.operator?l=p(l,t,n):r.add(t.semver);if(r.size>1)return null;if(o&&l){if(h=a(o.semver,l.semver,n),h>0)return null;if(0===h&&(">="!==o.operator||"<="!==l.operator))return null}for(const e of r){if(o&&!i(e,String(o),n))return null;if(l&&!i(e,String(l),n))return null;for(const r of t)if(!i(e,String(r),n))return!1;return!0}let y=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver,S=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(_=_||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,o)if(S&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===S.major&&e.semver.minor===S.minor&&e.semver.patch===S.patch&&(S=!1),">"===e.operator||">="===e.operator){if(f=d(o,e,n),f===e&&f!==o)return!1}else if(">="===o.operator&&!i(o.semver,String(e),n))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(m=p(l,e,n),m===e&&m!==l)return!1}else if("<="===l.operator&&!i(l.semver,String(e),n))return!1;if(!e.operator&&(l||o)&&0!==h)return!1}return!(o&&g&&!l&&0!==h||l&&_&&!o&&0!==h||S||y)},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let o=!1;e:for(const r of e.set){for(const e of t.set){const t=l(r,e,n);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},77631:(e,t,n)=>{const r=n(78311);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},13874:(e,t,n)=>{const r=n(78311);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},81132:e=>{"use strict";function t(e){return"function"==typeof e}var n=console.error.bind(console);function r(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function o(e){e&&e.logger&&(t(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function s(e,o,s){if(e&&e[o]){if(!s)return n("no wrapper function"),void n((new Error).stack);if(t(e[o])&&t(s)){var i=e[o],a=s(i,o);return r(a,"__original",i),r(a,"__unwrap",(function(){e[o]===a&&r(e,o,i)})),r(a,"__wrapped",!0),r(e,o,a),a}n("original object and wrapper must be functions")}else n("no original function "+o+" to wrap")}function i(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=s,o.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=i,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){i(e,t)}))})):n("must provide one or more functions to unwrap on modules")},e.exports=o},27687:(e,t,n)=>{"use strict";const r=n(70857),o=n(52018),s=n(25884),{env:i}=process;let a;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(e,t){if(0===a)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const n=a||0;if("dumb"===i.TERM)return n;if("win32"===process.platform){const e=r.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in i))||"codeship"===i.CI_NAME?1:n;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:n}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?a=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(a=1),"FORCE_COLOR"in i&&(a="true"===i.FORCE_COLOR?1:"false"===i.FORCE_COLOR?0:0===i.FORCE_COLOR.length?1:Math.min(parseInt(i.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(u(e,e&&e.isTTY))},stdout:c(u(!0,o.isatty(1))),stderr:c(u(!0,o.isatty(2)))}},42613:e=>{"use strict";e.exports=require("assert")},90290:e=>{"use strict";e.exports=require("async_hooks")},20181:e=>{"use strict";e.exports=require("buffer")},7194:e=>{"use strict";e.exports=require("dgram")},24434:e=>{"use strict";e.exports=require("events")},79896:e=>{"use strict";e.exports=require("fs")},91943:e=>{"use strict";e.exports=require("fs/promises")},58611:e=>{"use strict";e.exports=require("http")},85675:e=>{"use strict";e.exports=require("http2")},65692:e=>{"use strict";e.exports=require("https")},73339:e=>{"use strict";e.exports=require("module")},69278:e=>{"use strict";e.exports=require("net")},31421:e=>{"use strict";e.exports=require("node:child_process")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},73024:e=>{"use strict";e.exports=require("node:fs")},37067:e=>{"use strict";e.exports=require("node:http")},44708:e=>{"use strict";e.exports=require("node:https")},86592:e=>{"use strict";e.exports=require("node:inspector")},77030:e=>{"use strict";e.exports=require("node:net")},48161:e=>{"use strict";e.exports=require("node:os")},76760:e=>{"use strict";e.exports=require("node:path")},80481:e=>{"use strict";e.exports=require("node:readline")},57075:e=>{"use strict";e.exports=require("node:stream")},41692:e=>{"use strict";e.exports=require("node:tls")},57975:e=>{"use strict";e.exports=require("node:util")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},38522:e=>{"use strict";e.exports=require("node:zlib")},70857:e=>{"use strict";e.exports=require("os")},16928:e=>{"use strict";e.exports=require("path")},932:e=>{"use strict";e.exports=require("process")},2203:e=>{"use strict";e.exports=require("stream")},64756:e=>{"use strict";e.exports=require("tls")},52018:e=>{"use strict";e.exports=require("tty")},87016:e=>{"use strict";e.exports=require("url")},39023:e=>{"use strict";e.exports=require("util")},28167:e=>{"use strict";e.exports=require("worker_threads")},43106:e=>{"use strict";e.exports=require("zlib")},4581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},34326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=void 0;const r=n(31635),o=n(19967),s=r.__importDefault(n(91943)),i=n(20360),a=n(62251),c=n(74044),u=r.__importDefault(n(16928));let l,d=!1;t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(d)throw new Error("runEntrypoint can only be called once");d=!0;const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const r=await s.default.readFile(n),p=JSON.parse(r.toString());if(p.runtime?.api!==o.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!p.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let h=p.runtime.apiVersion;if("0.0.0"===h)try{const e=await s.default.readFile(u.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(h=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const f=process.env.CONNECTION_ID;if("string"!=typeof f||!f)throw new Error("Module initialise is missing CONNECTION_ID");const m=process.env.VERIFICATION_TOKEN;if("string"!=typeof m||!m)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const g=process.env.SENTRY_DSN,_=process.env.SENTRY_USERID,y=process.env.SENTRY_COMPANION_VERSION;if(g&&_&&"https://"==g.substring(0,8)){console.log("Sentry enabled"),(0,a.init)({dsn:g,release:`${p.name}@${p.version}`,beforeSend:e=>(e.exception&&console.log("sentry","error",e.exception),e)});{const e=(0,a.getCurrentScope)();e.setUser({id:_}),e.setTag("companion",y)}}else console.log("Sentry disabled");const S=new c.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{S.receivedMessage(e)})),l=new e((0,i.literal)({id:f,upgradeScripts:t,_isInstanceBaseProps:!0})),S.sendWithCb("register",{apiVersion:h,connectionId:f,verificationToken:m}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))}},36160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var r=n(78895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return r.TCPHelper}});var o=n(21118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return o.TelnetHelper}});var s=n(36259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return s.UDPHelper}})},78895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const r=n(31635).__importDefault(n(69278)),o=n(30228),s=n(51400);class i extends o.EventEmitter{#e;#t;_socket;#n;#r=!1;#o=!1;#s=!1;#i;#a;#c;get isConnected(){return this.#r}get isConnecting(){return this.#o}get isDestroyed(){return this.#s}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new r.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#o=!1,this.#r=!1,this.#n.reconnect&&this.#u(),this.#l(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#r=!0,this.#o=!1,this.#l(s.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#r=!1,this.#l(s.InstanceStatus.Disconnected),!this.#o&&this.#n.reconnect&&this.#u(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>this.connect())),this.#c=setTimeout((()=>{this.#c=void 0,this.#s||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#s)throw new Error("Cannot connect destroyed socket");return!this.#o&&(this.#o=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#s||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#r)return!1;try{return new Promise(((t,n)=>{this._socket.write(e,(e=>{e?n(e):t(!0)}))}))}catch(e){this.#r=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#l(s.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#s=!0,void 0!==this.#a&&(clearTimeout(this.#a),this.#a=void 0),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#u(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#l(s.InstanceStatus.Connecting),this.connect()}),this.#n.reconnect_interval)}#l(e,t){this.#i!=e&&(this.#i=e,this.emit("status_change",e,t))}}t.TCPHelper=i},21118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const r=n(31635).__importDefault(n(30228)),o=n(2203),s=n(78895);class i extends r.default{#d;#p;#c;get isConnected(){return this.#d.isConnected}get isConnecting(){return this.#d.isConnecting}get isDestroyed(){return this.#d.isDestroyed}constructor(e,t,n){super(),this.#d=new s.TCPHelper(e,t,n),this.#p=new a,this.#d._socket.pipe(this.#p),this.#d.on("connect",(()=>this.emit("connect"))),this.#d.on("end",(()=>this.emit("end"))),this.#d.on("error",(e=>this.emit("error",e))),this.#d.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#p.on("iac",((e,t)=>this.emit("iac",e,t))),this.#p.on("sb",(e=>this.emit("sb",e))),this.#p.on("data",(e=>this.emit("data",e))),this.#p.on("drain",(()=>this.emit("drain"))),this.#c=setTimeout((()=>{this.#c=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#d.connect()}async send(e){return this.#d.send(e)}destroy(){this.#d.destroy(),void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#p.removeAllListeners(),this.#p.destroy()}}t.TelnetHelper=i;class a extends o.Transform{#h;#f;#m;constructor(e){super(e),this.#h=Buffer.alloc(0),this.#f=Buffer.alloc(0),this.#m=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#g(e[t]);const r=this.#_();r.length&&this.push(r),n()}#g(e){if(0===this.#m){if(255===e)return void(this.#m=255);this.#h=Buffer.concat([this.#h,Buffer.from([e])])}else if(255===this.#m)switch(e){case 250:case 251:case 252:case 253:case 254:this.#m=e;break;default:this.#m=0}else{if(this.#m>=251&&this.#m<=254){let t;switch(this.#m){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#m=0)}if(250===this.#m){if(240===e)return this.emit("sb",this.#f),this.#m=0,void(this.#f=Buffer.alloc(0));this.#f=Buffer.concat([this.#f,Buffer.from([e])])}}}#_(){const e=this.#h;return this.#h=Buffer.alloc(0),e}}},36259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const r=n(31635).__importDefault(n(7194)),o=n(30228),s=n(51400);class i extends o.EventEmitter{#e;#t;#y;#n;#s=!1;#i;#c;get isDestroyed(){return this.#s}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={...n},this.#y=r.default.createSocket("udp4");try{this.#y.bind(this.#n.bind_port||0,this.#n.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#n.bind_ip}:${this.#n.bind_port}`)}this.#n.broadcast&&this.#y.setBroadcast(!0),void 0!==this.#n.ttl&&this.#y.setTTL(this.#n.ttl),void 0!==this.#n.multicast_ttl&&this.#y.setMulticastTTL(this.#n.multicast_ttl),this.#y.on("error",(e=>{this.#l(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#y.on("listening",(()=>{this.#n.multicast_interface&&this.#y.setMulticastInterface(this.#n.multicast_interface),this.#l(s.InstanceStatus.Ok),this.emit("listening")})),this.#y.on("message",(e=>this.emit("data",e))),this.#c=setTimeout((()=>{this.#s||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#s)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,n)=>{this.#y.send(e,this.#t,this.#e,(e=>{e?n(e):t()}))}))}destroy(){this.#s=!0,void 0!==this.#c&&(clearTimeout(this.#c),this.#c=void 0),this.#y.removeAllListeners(),this.#y.close(),this.removeAllListeners()}#l(e,t){this.#i!=e&&(this.#i=e,this.emit("status_change",e,t))}}t.UDPHelper=i},74044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const r=n(31635),o=n(20360),s=r.__importDefault(n(16022));t.IpcWrapper=class{#S;#b;#E;#v=1;#T=new Map;constructor(e,t,n){this.#S=e,this.#b=t,this.#E=n}async sendWithCb(e,t,n,r=0){r<=0&&(r=this.#E);const o={timeout:void 0,resolve:()=>null,reject:()=>null},i=new Promise(((e,t)=>{o.resolve=e,o.reject=t}));this.#v>268435456&&(this.#v=1);const a=this.#v++;this.#T.set(a,o),this.#b({direction:"call",name:String(e),payload:s.default.stringify(t),callbackId:a});const c=new Error("Call timed out");return o.timeout=setTimeout((()=>{o.reject(n?n():c),this.#T.delete(a)}),r),i}sendWithNoCb(e,t){this.#b({direction:"call",name:String(e),payload:s.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#S[e.name];if(!t)return void(e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!1,payload:s.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?s.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!0,payload:s.default.stringify(t)})}),(t=>{e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):s.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#T.get(e.callbackId);if(this.#T.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const n=e.payload?s.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"object"==typeof n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,o.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},19967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},76278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const r=n(31635);r.__exportStar(n(39077),t),r.__exportStar(n(22018),t),r.__exportStar(n(4581),t);var o=n(20360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return o.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return o.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return o.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return o.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return o.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return o.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return o.assertNever}}),r.__exportStar(n(36160),t);var s=n(34326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return s.runEntrypoint}})},94289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const r=n(12593);function o(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#I;#R;#A;#C=new Map;#O=new Map;constructor(e,t,n){this.#I=e,this.#R=t,this.#A=n}async handleExecuteAction(e){const t=this.#C.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#O.get(t);if(e){const t=this.#C.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(o(e),n)).catch((t=>{this.#A("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#O.delete(t);else{this.#O.set(t,n);const e=this.#C.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#I({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(o(n),t)).catch((e=>{this.#A("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#C.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#C.clear();for(const[n,o]of Object.entries(e))o&&(t.push({id:n,name:o.name,description:o.description,options:(0,r.serializeIsVisibleFn)(o.options),hasLearn:!!o.learn,learnTimeout:o.learnTimeout}),this.#C.set(n,o));this.#R({actions:t})}_getAllActions(){return Array.from(this.#O.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#O.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#C.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(o(e),n)).catch((t=>{this.#A("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#O.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#C.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(o(e),n)).catch((t=>{this.#A("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},12593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceBaseProps=t.serializeIsVisibleFn=void 0,t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},58039:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const r=n(31635),o=n(12593),s=r.__importDefault(n(17e3));function i(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#I;#N;#P;#A;#w=new Map;#L=new Map;#M=new Map;#x=new Map;#k;get parseVariablesContext(){return this.#k}constructor(e,t,n,r){this.#I=e,this.#N=t,this.#P=n,this.#A=r}getDefinitionIds(){return Array.from(this.#w.keys())}getInstanceIds(){return Array.from(this.#L.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#L.get(t);if(e){const t=this.#w.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(i(t.type,e),n)).catch((t=>{this.#A("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#L.delete(t);else{this.#L.set(t,{...n,referencedVariables:null});const e=this.#w.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#I({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(i(e.type,n),t)).catch((e=>{this.#A("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}this.#G(t)}}}async handleLearnFeedback(e){const t=this.#w.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#x.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#L.values())if(!this.#x.has(e.id)&&e.referencedVariables)for(const r of e.referencedVariables)if(t.has(r)){n.add(e.id);break}for(const e of n)setImmediate((()=>{this.#G(e)}))}#G(e){const t=this.#x.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#L.get(e);if(!n)return;const r=n,o={needsRecheck:!1,changedVariables:new Set};this.#x.set(e,o),Promise.resolve().then((async()=>{const t=this.#w.get(r.feedbackId);let n;const o=new Set;if(t){this.#k=`Feedback ${r.feedbackId} (${e})`;const s={parseVariablesInString:async t=>{const n=await this.#I({text:t,controlId:r.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)o.add(e);return n.text}};n="boolean"===t.type?t.callback({...i("boolean",r),type:"boolean"},s):t.callback({...i("advanced",r),type:"advanced",image:r.image},s),this.#k=void 0}const s=await n;this.#M.set(e,{id:e,controlId:r.controlId,value:s}),this.#U(),r.referencedVariables=o.size>0?Array.from(o):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#k=void 0,this.#x.delete(e);let t=!1;if(r.referencedVariables)for(const e of r.referencedVariables)if(o.changedVariables.has(e)){t=!0;break}(t||o.needsRecheck)&&setImmediate((()=>{this.#G(e)}))}))}#U=(0,s.default)((()=>{const e=this.#M;this.#M=new Map,e.size>0&&this.#N({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#w.clear();for(const[n,r]of Object.entries(e))r&&(t.push({id:n,name:r.name,description:r.description,options:(0,o.serializeIsVisibleFn)(r.options),type:r.type,defaultStyle:"boolean"===r.type?r.defaultStyle:void 0,hasLearn:!!r.learn,learnTimeout:r.learnTimeout,showInvert:"boolean"===r.type&&r.showInvert}),this.#w.set(n,r));this.#P({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#L.entries())this.#w.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#G(e)}checkFeedbacksById(e){for(const t of e)this.#G(t)}_getAllFeedbacks(){return Array.from(this.#L.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#L.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#w.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(i(t.type,e),n)).catch((t=>{this.#A("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#L.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#w.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#I({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(i(t.type,e),n)).catch((t=>{this.#A("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},11706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=void 0;const r=n(20360);function o(e){return JSON.parse(JSON.stringify(e))}t.runThroughUpgradeScripts=function(e,t,n,s,i,a){const c=new Map,u=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&u(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&u(t).feedbacks.push(e.id)}if(!a)for(let e=n??-1;e<s.length;e++)u(e).config=!0;const l={},d={};let p;if(c.size>0){const a=Array.from(c.keys()).sort(),u=Math.min(...a,n??-1)+1,h=[],f=[],m=s.length;for(let n=u;n<m;n++){const a=c.get(n-1);a&&(h.push(...a.actions),f.push(...a.feedbacks));const u=!!a?.config;if(!u&&0===h.length&&0===f.length)continue;const m=p??i,g=(0,s[n])({currentConfig:o(m)},{config:u?m:null,actions:h.map((t=>{const n=e[t];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?o(n.options):{}})})).filter((e=>!!e)),feedbacks:f.map((e=>{const n=t[e];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?o(n.options):{},isInverted:n.isInverted})})).filter((e=>!!e))});u&&g.updatedConfig&&(p=g.updatedConfig);for(const t of g.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,d[t.id]=n)}for(const e of g.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,l[e.id]={...n,style:l[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,n]of Object.entries(e))d[t]||"number"!=typeof n?.upgradeIndex||(d[t]=n);for(const[e,n]of Object.entries(t))l[e]||"number"!=typeof n?.upgradeIndex||(l[e]=n)}return{updatedActions:d,updatedFeedbacks:l,updatedConfig:p}}},39077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=void 0;const r=n(31635).__importDefault(n(7281));t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,r.default)(e)){const e=r.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}}},13730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const r=n(31635),o=n(20360),s=r.__importDefault(n(18965)),i=n(12593),a=n(11706),c=n(58039),u=n(74044),l=n(94289),d=n(62365);t.InstanceBase=class{#V;#H;id;#D=new s.default({concurrency:1});#j=!1;#B=!1;#F={};#Z;#W;#X=new Map;#Y=new Map;#K=new Map;#n;#J;get instanceOptions(){return this.#n}get label(){return this.#J}constructor(e){if(!(0,i.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#n={disableVariableValidation:!1},this.#V=new u.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this),sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#V.receivedMessage(e)})),this.#Z=new l.ActionManager((async e=>this.#V.sendWithCb("parseVariablesInString",e)),(e=>this.#V.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#W=new c.FeedbackManager((async e=>this.#V.sendWithCb("parseVariablesInString",e)),(e=>this.#V.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#V.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#H=e.upgradeScripts,this.id=e.id,this.#J=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#D.add((async()=>{if(this.#j)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#F=e.config,this.#J=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#F=t,this.saveConfig(this.#F),e.lastUpgradeIndex=this.#H.length-1}const{updatedActions:r,updatedFeedbacks:o,updatedConfig:s}=(0,a.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#H,this.#F,!1);this.#F=s??this.#F;const i=this.#V.sendWithCb("upgradedItems",{updatedActions:r,updatedFeedbacks:o});try{await this.init(this.#F,!!e.isFirstInit),this.#j=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await i}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:n},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#H.length-1,updatedConfig:this.#F}}))}async _handleDestroy(){await this.#D.add((async()=>{if(!this.#j)throw new Error("Not initialized");await this.destroy(),this.#j=!1}))}async _handleConfigUpdateAndLabel(e){await this.#D.add((async()=>{if(!this.#j)throw new Error("Not initialized");this.#J=e.label,this.#F=e.config,await this.configUpdated(this.#F)}))}async _handleExecuteAction(e){return this.#Z.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#H,this.#F,!0);this.#V.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#W.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#H,this.#F,!0);this.#V.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#Z.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,i.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#Z.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#W.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#B)return}else if(!this.#B)return;if(!this.handleStartStopRecordActions)throw this.#B=!1,new Error("Recording actions is not supported by this module!");this.#B=e.recording,this.handleStartStopRecordActions(this.#B)}async _handleVariablesChanged(e){this.#W.handleVariablesChanged(e)}async _handleSharedUdpSocketMessage(e){for(const t of this.#X.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#X.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e){this.#F=e,this.#V.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#Z.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#W.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,r]of Object.entries(e))r&&t.push({...r,id:n});this.#V.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],n=[];this.#Y.clear();for(const r of e)t.push({id:r.variableId,name:r.name}),this.#Y.set(r.variableId,r),this.#K.has(r.variableId)||(this.#K.set(r.variableId,""),n.push({id:r.variableId,value:""}));if(!this.#n.disableVariableValidation){const e=new Set(this.#Y.keys());for(const t of this.#K.keys())e.has(t)||(this.#K.delete(t),n.push({id:t,value:void 0}))}this.#V.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:n})}setVariableValues(e){const t=[];for(const[n,r]of Object.entries(e))this.#n.disableVariableValidation?(void 0===r?this.#K.delete(n):this.#K.set(n,r),t.push({id:n,value:r})):this.#Y.has(n)?(this.#K.set(n,r??""),t.push({id:n,value:r??""})):t.push({id:n,value:void 0});this.#V.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#K.get(e)}async parseVariablesInString(e){const t=this.#W.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#V.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#W.checkFeedbacks(e)}checkFeedbacksById(...e){this.#W.checkFeedbacksById(e)}_getAllActions(){return this.#Z._getAllActions()}subscribeActions(...e){this.#Z.subscribeActions(e)}unsubscribeActions(...e){this.#Z.unsubscribeActions(e)}_getAllFeedbacks(){return this.#W._getAllFeedbacks()}subscribeFeedbacks(...e){this.#W.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#W.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#B)throw new Error("Not currently recording actions");this.#V.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}setCustomVariableValue(e,t){this.#V.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,n,r){this.#V.sendWithNoCb("send-osc",(0,o.literal)({host:e,port:t,path:n,args:r}))}updateStatus(e,t){this.#V.sendWithNoCb("set-status",(0,o.literal)({status:e,message:t??null}))}log(e,t){this.#V.sendWithNoCb("log-message",(0,o.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const n="string"==typeof e?{type:e}:e,r=new d.SharedUdpSocketImpl(this.#V,this.#X,n);return t&&r.on("message",t),r}}},97386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51400:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning"}(n||(t.InstanceStatus=n={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(r||(t.Regex=r={}))},98983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(31635);r.__exportStar(n(13730),t),r.__exportStar(n(51649),t),r.__exportStar(n(97386),t),r.__exportStar(n(51400),t),r.__exportStar(n(98983),t),r.__exportStar(n(68104),t),r.__exportStar(n(73258),t),r.__exportStar(n(90131),t),r.__exportStar(n(83371),t),r.__exportStar(n(39786),t),r.__exportStar(n(36132),t)},73258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},90131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},62365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const r=n(31635).__importDefault(n(30228)),o=n(20360);class s extends r.default{#V;#z;#n;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#m&&"object"==typeof this.#m?this.#m:void 0}#m="pending";constructor(e,t,n){super(),this.#V=e,this.#z=t,this.#n={...n}}bind(e,t,n){if(this.#m&&"object"==typeof this.#m)throw new Error("Socket is already bound");switch(this.#m){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,o.assertNever)(this.#m),new Error("Invalid socket state")}this.#m="binding",n&&this.on("listening",n),this.#V.sendWithCb("sharedUdpSocketJoin",{family:this.#n.type,portNumber:e}).then((t=>{this.#m={portNumber:e,handleId:t},this.#z.set(t,this),this.emit("listening")}),(e=>{this.#m="closed",this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}close(e){if(this.#m&&"object"==typeof this.#m);else switch(this.#m){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,o.assertNever)(this.#m),new Error("Invalid socket state")}const t=this.#m.handleId;this.#m="closed",e&&this.on("close",e),this.#V.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then((()=>{this.#z.delete(t),this.emit("close")}),(e=>{this.#z.delete(t),this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}send(e,t,n,r,o,s){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof n){if("number"!=typeof r||"string"!=typeof o)throw new Error("Invalid arguments");if(void 0!==s&&"number"!=typeof s)throw new Error("Invalid arguments");const i=this.#$(e,t,n);this.#q(i,r,o,s)}else{if("string"!=typeof n)throw new Error("Invalid arguments");{if(void 0!==r&&"function"!=typeof r)throw new Error("Invalid arguments");const o=this.#$(e,0,void 0);this.#q(o,t,n,r)}}}#$(e,t,n){let r;if("string"==typeof e)r=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))r=e;else{if(Array.isArray(e))return Buffer.from(e);r=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return r.subarray(t,void 0!==n?n+t:void 0)}#q(e,t,n,r){if(!this.#m||"object"!=typeof this.#m)throw new Error("Socket is not open");this.#V.sendWithCb("sharedUdpSocketSend",{handleId:this.#m.handleId,message:e,address:n,port:t}).then((()=>{r?.()}),(e=>{this.emit("error",e instanceof Error?e:new Error(e))})).catch((()=>null))}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#m="fatalError";const t=this.boundState;t&&this.#z.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=s},83371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},39786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=t.CreateConvertToBooleanFeedbackUpgradeScript=t.EmptyUpgradeScript=void 0,t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}),t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,o]of Object.entries(n))void 0!==t.options[e]&&(t.style[o]=t.options[e],delete t.options[e],r.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){const n=e[t.feedbackId];if("string"!=typeof n)continue;const o=t.options[n];void 0!==o&&(delete t.options[n],t.isInverted="true"===o||!0===o||Number(o)>0,r.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}}},36132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},20360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.assertNever=t.literal=void 0;const r=n(56284);function o(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,r.colord)(e).isValid()){const t=(0,r.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n,r){let o=(255&e)<<16|(255&t)<<8|255&n;return r&&r>=0&&r<1&&(o+=16777216*Math.round(255*(1-r))),o},t.splitRgb=o,t.splitHsl=function(e){const t=o(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=o(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=o(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()}},7281:(e,t,n)=>{"use strict";e.exports=a,e.exports.default=a;const r={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18"},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"]},o=Object.prototype.hasOwnProperty,s=n(97169).A,i=new RegExp("","u");function a(e,{instancePath:t="",parentData:n,parentDataProperty:c,rootData:u=e}={}){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return a.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=0;for(const n in e)if(!o.call(r.properties,n))return a.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(0===n){if(void 0!==e.$schema){const n=0;if("string"!=typeof e.$schema)return a.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=0===n}else l=!0;if(l){if(void 0!==e.id){const n=0;if("string"!=typeof e.id)return a.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.name){const n=0;if("string"!=typeof e.name)return a.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.shortname){const n=0;if("string"!=typeof e.shortname)return a.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.description){const n=0;if("string"!=typeof e.description)return a.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.version){const n=0;if("string"!=typeof e.version)return a.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.license){const n=0;if("string"!=typeof e.license)return a.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.repository){const n=0;if("string"!=typeof e.repository)return a.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.bugs){const n=0;if("string"!=typeof e.bugs)return a.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.maintainers){let n=e.maintainers;const r=0;if(0===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var d=!0;const e=n.length;for(let r=0;r<e;r++){let e=n[r];const o=0;if(0===o){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return a.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.name){const n=0;if("string"!=typeof e.name)return a.errors=[{instancePath:t+"/maintainers/"+r+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=0===n}else p=!0;if(p){if(void 0!==e.email){const n=0;if("string"!=typeof e.email)return a.errors=[{instancePath:t+"/maintainers/"+r+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=0===n}else p=!0;if(p)if(void 0!==e.github){const n=0;if("string"!=typeof e.github)return a.errors=[{instancePath:t+"/maintainers/"+r+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=0===n}else p=!0}}}if(!(d=0===o))break}if(d){let e,r=n.length;if(r>1)for(;r--;)for(e=r;e--;)if(s(n[r],n[e]))return a.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1}}}l=0===r}else l=!0;if(l){if(void 0!==e.legacyIds){let n=e.legacyIds;const r=0;if(0===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=n.length;for(let r=0;r<e;r++){const e=0;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/legacyIds/"+r,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(h=0===e))break}if(h){let e,r=n.length;if(r>1){const o={};for(;r--;){let s=n[r];if("string"==typeof s){if("number"==typeof o[s])return e=o[s],a.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;o[s]=r}}}}}}l=0===r}else l=!0;if(l){if(void 0!==e.runtime){let n=e.runtime;const o=0;if(0===o){if(!n||"object"!=typeof n||Array.isArray(n))return a.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return a.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){const e=0;if("string"!=typeof n.type)return a.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=0===e}else f=!0;if(f){if(void 0!==n.api){let e=n.api;const o=0;if("string"!=typeof e)return a.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return a.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;f=0===o}else f=!0;if(f){if(void 0!==n.apiVersion){const e=0;if("string"!=typeof n.apiVersion)return a.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=0===e}else f=!0;if(f)if(void 0!==n.entrypoint){const e=0;if("string"!=typeof n.entrypoint)return a.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=0===e}else f=!0}}}}l=0===o}else l=!0;if(l){if(void 0!==e.manufacturer){const n=0;if("string"!=typeof e.manufacturer)return a.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l){if(void 0!==e.products){let n=e.products;const r=0;if(0===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(n.length<1)return a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var m=!0;const e=n.length;for(let r=0;r<e;r++){const e=0;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/products/"+r,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m=0===e))break}if(m){let e,r=n.length;if(r>1){const o={};for(;r--;){let s=n[r];if("string"==typeof s){if("number"==typeof o[s])return e=o[s],a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;o[s]=r}}}}}}l=0===r}else l=!0;if(l){if(void 0!==e.keywords){let n=e.keywords;const r=0;if(0===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var g=!0;const e=n.length;for(let r=0;r<e;r++){const e=0;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/keywords/"+r,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(g=0===e))break}if(g){let e,r=n.length;if(r>1){const o={};for(;r--;){let s=n[r];if("string"==typeof s){if("number"==typeof o[s])return e=o[s],a.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;o[s]=r}}}}}}l=0===r}else l=!0;if(l)if(void 0!==e.bonjourQueries){let n=e.bonjourQueries;const o=0;if(0===o){if(!n||"object"!=typeof n||Array.isArray(n))return a.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=0;for(const e in n)if(!i.test(e))return a.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(0===e)for(const e in n)if(i.test(e)){let o=n[e];const s=0;if(0===s){if(!o||"object"!=typeof o||Array.isArray(o))return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===o.type&&(n="type")||void 0===o.protocol&&(n="protocol"))return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=0;for(const n in o)if("type"!==n&&"protocol"!==n&&"txt"!==n)return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(0===n){if(void 0!==o.type){const n=0;if("string"!=typeof o.type)return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var _=0===n}else _=!0;if(_){if(void 0!==o.protocol){let n=o.protocol;const s=0;if("string"!=typeof n)return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("tcp"!==n&&"udp"!==n)return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/protocol/enum",keyword:"enum",params:{allowedValues:r.properties.bonjourQueries.patternProperties[""].properties.protocol.enum},message:"must be equal to one of the allowed values"}],!1;_=0===s}else _=!0;if(_)if(void 0!==o.txt){let n=o.txt;const r=0;if(0===r){if(!n||"object"!=typeof n||Array.isArray(n))return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const r=0;for(const r in n)if(!i.test(r))return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(0===r)for(const r in n)if(i.test(r)){const o=0;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(0!==o)break}}}_=0===r}else _=!0}}}}}if(0!==s)break}}}l=0===o}else l=!0}}}}}}}}}}}}}}}}}return a.errors=null,!0}},17e3:(e,t,n)=>{"use strict";const r=n(84865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:o=0,before:s=!1,after:i=!0}=t;if(!s&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,u;const l=function(...t){const r=this,l=s&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),i&&(u=e.apply(r,t))}),n),o>0&&!c&&i&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),u=e.apply(r,t)}),o)),l&&(u=e.apply(r,t)),u};return r(l,e),l.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},l}},71803:(e,t,n)=>{"use strict";var r=n(76278),o=n(26368);class s extends Error{constructor(e){super(e),this.name="TimeoutError"}}class i extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const a=e=>void 0===globalThis.DOMException?new i(e):new DOMException(e),c=e=>{const t=void 0===e.reason?a("This operation was aborted."):e.reason;return t instanceof Error?t:a(t)};class u{#Q=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#Q[this.size-1].priority>=t.priority)return void this.#Q.push(n);const r=function(e,t){let n=0,r=e.length;for(;r>0;){const s=Math.trunc(r/2);let i=n+s;o=e[i],t.priority-o.priority<=0?(n=++i,r-=s+1):r=s}var o;return n}(this.#Q,n);this.#Q.splice(r,0,n)}dequeue(){const e=this.#Q.shift();return e?.run}filter(e){return this.#Q.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#Q.length}}class l extends o{#ee;#te;#ne=0;#re;#oe;#se=0;#ie;#ae;#Q;#ce;#ue=0;#le;#de;#pe;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:u,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#ee=e.carryoverConcurrencyCount,this.#te=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#re=e.intervalCap,this.#oe=e.interval,this.#Q=new e.queueClass,this.#ce=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#pe=!0===e.throwOnTimeout,this.#de=!1===e.autoStart}get#he(){return this.#te||this.#ne<this.#re}get#fe(){return this.#ue<this.#le}#me(){this.#ue--,this.#ge(),this.emit("next")}#_e(){this.#ye(),this.#Se(),this.#ae=void 0}get#be(){const e=Date.now();if(void 0===this.#ie){const t=this.#se-e;if(!(t<0))return void 0===this.#ae&&(this.#ae=setTimeout((()=>{this.#_e()}),t)),!0;this.#ne=this.#ee?this.#ue:0}return!1}#ge(){if(0===this.#Q.size)return this.#ie&&clearInterval(this.#ie),this.#ie=void 0,this.emit("empty"),0===this.#ue&&this.emit("idle"),!1;if(!this.#de){const e=!this.#be;if(this.#he&&this.#fe){const t=this.#Q.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#Se(),!0)}}return!1}#Se(){this.#te||void 0!==this.#ie||(this.#ie=setInterval((()=>{this.#ye()}),this.#oe),this.#se=Date.now()+this.#oe)}#ye(){0===this.#ne&&0===this.#ue&&this.#ie&&(clearInterval(this.#ie),this.#ie=void 0),this.#ne=this.#ee?this.#ue:0,this.#Ee()}#Ee(){for(;this.#ge(););}get concurrency(){return this.#le}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#le=e,this.#Ee()}async#ve(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#pe,...t},new Promise(((n,r)=>{this.#Q.enqueue((async()=>{this.#ue++,this.#ne++;try{t.signal?.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=function(e,t){const{milliseconds:n,fallback:r,message:o,customTimers:i={setTimeout,clearTimeout}}=t;let a;const u=new Promise(((u,l)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:e}=t;e.aborted&&l(c(e)),e.addEventListener("abort",(()=>{l(c(e))}))}if(n===Number.POSITIVE_INFINITY)return void e.then(u,l);const d=new s;a=i.setTimeout.call(void 0,(()=>{if(r)try{u(r())}catch(e){l(e)}else"function"==typeof e.cancel&&e.cancel(),!1===o?u():o instanceof Error?l(o):(d.message=o??`Promise timed out after ${n} milliseconds`,l(d))}),n),(async()=>{try{u(await e)}catch(e){l(e)}})()})).finally((()=>{u.clear()}));return u.clear=()=>{i.clearTimeout.call(void 0,a),a=void 0},u}(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#ve(t.signal)]));const o=await r;n(o),this.emit("completed",o)}catch(e){if(e instanceof s&&!t.throwOnTimeout)return void n();r(e),this.emit("error",e)}finally{this.#me()}}),t),this.emit("add"),this.#ge()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#de?(this.#de=!1,this.#Ee(),this):this}pause(){this.#de=!0}clear(){this.#Q=new this.#ce}async onEmpty(){0!==this.#Q.size&&await this.#Te("empty")}async onSizeLessThan(e){this.#Q.size<e||await this.#Te("next",(()=>this.#Q.size<e))}async onIdle(){0===this.#ue&&0===this.#Q.size||await this.#Te("idle")}async#Te(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))}get size(){return this.#Q.size}sizeBy(e){return this.#Q.filter(e).length}get pending(){return this.#ue}get isPaused(){return this.#de}}const d={pollInterval:3};function p(e){let t=!1;return(!e.pollInterval||e.pollInterval<0)&&(e.pollInterval=d.pollInterval,t=!0),t}var h;!function(e){e.IsPlaying="is-playing",e.IsShuffle="is-shuffle",e.IsRepeat="is-repeat",e.ActiveDevice="active-device",e.CurrentContext="current-context"}(h||(h={}));const f=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],m=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...f],g=["null","undefined","string","number","bigint","boolean","symbol"];function _(e){return t=>typeof t===e}const{toString:y}=Object.prototype,S=e=>{const t=y.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&E.domElement(e)?"HTMLElement":(n=t,m.includes(n)?t:void 0);var n},b=e=>t=>S(t)===e;function E(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(E.observable(e))return"Observable";if(E.array(e))return"Array";if(E.buffer(e))return"Buffer";const t=S(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}E.undefined=_("undefined"),E.string=_("string");const v=_("number");E.number=e=>v(e)&&!E.nan(e),E.positiveNumber=e=>E.number(e)&&e>0,E.negativeNumber=e=>E.number(e)&&e<0,E.bigint=_("bigint"),E.function_=_("function"),E.null_=e=>null===e,E.class_=e=>E.function_(e)&&e.toString().startsWith("class "),E.boolean=e=>!0===e||!1===e,E.symbol=_("symbol"),E.numericString=e=>E.string(e)&&!E.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),E.array=(e,t)=>!!Array.isArray(e)&&(!E.function_(t)||e.every((e=>t(e)))),E.buffer=e=>e?.constructor?.isBuffer?.(e)??!1,E.blob=e=>b("Blob")(e),E.nullOrUndefined=e=>E.null_(e)||E.undefined(e),E.object=e=>!E.null_(e)&&("object"==typeof e||E.function_(e)),E.iterable=e=>E.function_(e?.[Symbol.iterator]),E.asyncIterable=e=>E.function_(e?.[Symbol.asyncIterator]),E.generator=e=>E.iterable(e)&&E.function_(e?.next)&&E.function_(e?.throw),E.asyncGenerator=e=>E.asyncIterable(e)&&E.function_(e.next)&&E.function_(e.throw),E.nativePromise=e=>b("Promise")(e),E.promise=e=>E.nativePromise(e)||(e=>E.function_(e?.then)&&E.function_(e?.catch))(e),E.generatorFunction=b("GeneratorFunction"),E.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===S(e),E.asyncFunction=e=>"AsyncFunction"===S(e),E.boundFunction=e=>E.function_(e)&&!e.hasOwnProperty("prototype"),E.regExp=b("RegExp"),E.date=b("Date"),E.error=b("Error"),E.map=e=>b("Map")(e),E.set=e=>b("Set")(e),E.weakMap=e=>b("WeakMap")(e),E.weakSet=e=>b("WeakSet")(e),E.weakRef=e=>b("WeakRef")(e),E.int8Array=b("Int8Array"),E.uint8Array=b("Uint8Array"),E.uint8ClampedArray=b("Uint8ClampedArray"),E.int16Array=b("Int16Array"),E.uint16Array=b("Uint16Array"),E.int32Array=b("Int32Array"),E.uint32Array=b("Uint32Array"),E.float32Array=b("Float32Array"),E.float64Array=b("Float64Array"),E.bigInt64Array=b("BigInt64Array"),E.bigUint64Array=b("BigUint64Array"),E.arrayBuffer=b("ArrayBuffer"),E.sharedArrayBuffer=b("SharedArrayBuffer"),E.dataView=b("DataView"),E.enumCase=(e,t)=>Object.values(t).includes(e),E.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,E.urlInstance=e=>b("URL")(e),E.urlString=e=>{if(!E.string(e))return!1;try{return new URL(e),!0}catch{return!1}},E.truthy=e=>Boolean(e),E.falsy=e=>!e,E.nan=e=>Number.isNaN(e),E.primitive=e=>{return E.null_(e)||(t=typeof e,g.includes(t));var t},E.integer=e=>Number.isInteger(e),E.safeInteger=e=>Number.isSafeInteger(e),E.plainObject=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},E.typedArray=e=>{return t=S(e),f.includes(t);var t},E.arrayLike=e=>!E.nullOrUndefined(e)&&!E.function_(e)&&(e=>E.safeInteger(e)&&e>=0)(e.length),E.tupleLike=(e,t)=>!(!E.array(t)||!E.array(e)||t.length!==e.length)&&t.every(((t,n)=>t(e[n]))),E.inRange=(e,t)=>{if(E.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(E.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const T=["innerHTML","ownerDocument","style","attributes","nodeValue"];E.domElement=e=>E.object(e)&&1===e.nodeType&&E.string(e.nodeName)&&!E.plainObject(e)&&T.every((t=>t in e)),E.observable=e=>!!e&&(e===e[Symbol.observable]?.()||e===e["@@observable"]?.()),E.nodeStream=e=>E.object(e)&&E.function_(e.pipe)&&!E.observable(e),E.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;const I=e=>t=>E.integer(t)&&Math.abs(t%2)===e;E.evenInteger=I(0),E.oddInteger=I(1),E.emptyArray=e=>E.array(e)&&0===e.length,E.nonEmptyArray=e=>E.array(e)&&e.length>0,E.emptyString=e=>E.string(e)&&0===e.length,E.emptyStringOrWhitespace=e=>E.emptyString(e)||(e=>E.string(e)&&!/\S/.test(e))(e),E.nonEmptyString=e=>E.string(e)&&e.length>0,E.nonEmptyStringAndNotWhitespace=e=>E.string(e)&&!E.emptyStringOrWhitespace(e),E.emptyObject=e=>E.object(e)&&!E.map(e)&&!E.set(e)&&0===Object.keys(e).length,E.nonEmptyObject=e=>E.object(e)&&!E.map(e)&&!E.set(e)&&Object.keys(e).length>0,E.emptySet=e=>E.set(e)&&0===e.size,E.nonEmptySet=e=>E.set(e)&&e.size>0,E.emptyMap=e=>E.map(e)&&0===e.size,E.nonEmptyMap=e=>E.map(e)&&e.size>0,E.propertyKey=e=>E.any([E.string,E.number,E.symbol],e),E.formData=e=>b("FormData")(e),E.urlSearchParams=e=>b("URLSearchParams")(e);const R=(e,t,n)=>{if(!E.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===n.length)throw new TypeError("Invalid number of values");return e.call(n,t)};E.any=(e,...t)=>(E.array(e)?e:[e]).some((e=>R(Array.prototype.some,e,t))),E.all=(e,...t)=>R(Array.prototype.every,e,t);const A=(e,t,n,r={})=>{if(!e){const{multipleValues:e}=r,o=e?`received values of types ${[...new Set(n.map((e=>`\`${E(e)}\``)))].join(", ")}`:`received value of type \`${E(n)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${o}.`)}},C={undefined:e=>A(E.undefined(e),"undefined",e),string:e=>A(E.string(e),"string",e),number:e=>A(E.number(e),"number",e),positiveNumber:e=>A(E.positiveNumber(e),"positive number",e),negativeNumber:e=>A(E.negativeNumber(e),"negative number",e),bigint:e=>A(E.bigint(e),"bigint",e),function_:e=>A(E.function_(e),"Function",e),null_:e=>A(E.null_(e),"null",e),class_:e=>A(E.class_(e),"Class",e),boolean:e=>A(E.boolean(e),"boolean",e),symbol:e=>A(E.symbol(e),"symbol",e),numericString:e=>A(E.numericString(e),"string with a number",e),array:(e,t)=>{A(E.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>A(E.buffer(e),"Buffer",e),blob:e=>A(E.blob(e),"Blob",e),nullOrUndefined:e=>A(E.nullOrUndefined(e),"null or undefined",e),object:e=>A(E.object(e),"Object",e),iterable:e=>A(E.iterable(e),"Iterable",e),asyncIterable:e=>A(E.asyncIterable(e),"AsyncIterable",e),generator:e=>A(E.generator(e),"Generator",e),asyncGenerator:e=>A(E.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>A(E.nativePromise(e),"native Promise",e),promise:e=>A(E.promise(e),"Promise",e),generatorFunction:e=>A(E.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>A(E.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>A(E.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>A(E.boundFunction(e),"Function",e),regExp:e=>A(E.regExp(e),"RegExp",e),date:e=>A(E.date(e),"Date",e),error:e=>A(E.error(e),"Error",e),map:e=>A(E.map(e),"Map",e),set:e=>A(E.set(e),"Set",e),weakMap:e=>A(E.weakMap(e),"WeakMap",e),weakSet:e=>A(E.weakSet(e),"WeakSet",e),weakRef:e=>A(E.weakRef(e),"WeakRef",e),int8Array:e=>A(E.int8Array(e),"Int8Array",e),uint8Array:e=>A(E.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>A(E.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>A(E.int16Array(e),"Int16Array",e),uint16Array:e=>A(E.uint16Array(e),"Uint16Array",e),int32Array:e=>A(E.int32Array(e),"Int32Array",e),uint32Array:e=>A(E.uint32Array(e),"Uint32Array",e),float32Array:e=>A(E.float32Array(e),"Float32Array",e),float64Array:e=>A(E.float64Array(e),"Float64Array",e),bigInt64Array:e=>A(E.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>A(E.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>A(E.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>A(E.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>A(E.dataView(e),"DataView",e),enumCase:(e,t)=>A(E.enumCase(e,t),"EnumCase",e),urlInstance:e=>A(E.urlInstance(e),"URL",e),urlString:e=>A(E.urlString(e),"string with a URL",e),truthy:e=>A(E.truthy(e),"truthy",e),falsy:e=>A(E.falsy(e),"falsy",e),nan:e=>A(E.nan(e),"NaN",e),primitive:e=>A(E.primitive(e),"primitive",e),integer:e=>A(E.integer(e),"integer",e),safeInteger:e=>A(E.safeInteger(e),"integer",e),plainObject:e=>A(E.plainObject(e),"plain object",e),typedArray:e=>A(E.typedArray(e),"TypedArray",e),arrayLike:e=>A(E.arrayLike(e),"array-like",e),tupleLike:(e,t)=>A(E.tupleLike(e,t),"tuple-like",e),domElement:e=>A(E.domElement(e),"HTMLElement",e),observable:e=>A(E.observable(e),"Observable",e),nodeStream:e=>A(E.nodeStream(e),"Node.js Stream",e),infinite:e=>A(E.infinite(e),"infinite number",e),emptyArray:e=>A(E.emptyArray(e),"empty array",e),nonEmptyArray:e=>A(E.nonEmptyArray(e),"non-empty array",e),emptyString:e=>A(E.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>A(E.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>A(E.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>A(E.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>A(E.emptyObject(e),"empty object",e),nonEmptyObject:e=>A(E.nonEmptyObject(e),"non-empty object",e),emptySet:e=>A(E.emptySet(e),"empty set",e),nonEmptySet:e=>A(E.nonEmptySet(e),"non-empty set",e),emptyMap:e=>A(E.emptyMap(e),"empty map",e),nonEmptyMap:e=>A(E.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>A(E.propertyKey(e),"PropertyKey",e),formData:e=>A(E.formData(e),"FormData",e),urlSearchParams:e=>A(E.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>A(E.evenInteger(e),"even integer",e),oddInteger:e=>A(E.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>A(E.directInstanceOf(e,t),"T",e),inRange:(e,t)=>A(E.inRange(e,t),"in range",e),any:(e,...t)=>A(E.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>A(E.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(E,{class:{value:E.class_},function:{value:E.function_},null:{value:E.null_}}),Object.defineProperties(C,{class:{value:C.class_},function:{value:C.function_},null:{value:C.null_}});const O=E,N=require("node:events");class P extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class w{static fn(e){return(...t)=>new w(((n,r,o)=>{t.push(o),e(...t).then(n,r)}))}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((t,n)=>{this._reject=n;const r=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};Object.defineProperties(r,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e((e=>{this._isCanceled&&r.shouldReject||(this._isPending=!1,t(e))}),(e=>{this._isPending=!1,n(e)}),r)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new P(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(w.prototype,Promise.prototype);class L extends Error{constructor(e,t,n){var r;if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,r=n,O.object(r)&&"_onResponse"in r?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),this.options=n.options):this.options=n,this.timings=this.request?.timings,O.string(t.stack)&&O.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,n=this.stack.slice(e).split("\n").reverse(),r=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;r.length>0&&r[0]===n[0];)n.shift();this.stack=`${this.stack.slice(0,e)}${n.reverse().join("\n")}${r.reverse().join("\n")}`}}}class M extends L{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class x extends L{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class k extends L{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class G extends L{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class U extends L{constructor(e,t,n){super(e.message,e,n),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}}class V extends L{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class H extends L{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}}class D extends L{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}}const j=require("node:process"),B=require("node:buffer");var F=n(57075);const Z=require("node:url");var W=n(37067),X=n(24434),Y=n(39023),K=n(20687);const J=require("node:crypto"),z=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),$=new Set(["https:","http:","file:"]);var q=n(4594),Q=n(37234);function ee(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}class te extends F.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:n,url:r}){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof r)throw new TypeError("Argument `url` should be a string");super({read(){this.push(n),this.push(null)}}),this.statusCode=e,this.headers=ee(t),this.body=n,this.url=r}}var ne=n(58387);const re=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class oe extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class se extends Error{constructor(e){super(e.message),Object.assign(this,e)}}const ie=Object.entries,ae=e=>{const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},ce=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),ue=e=>{const t=[];for(const n of Object.keys(e))t[n.toLowerCase()]=e[n];return t},le=class{constructor(e,t){this.hooks=new Map,this.request=()=>(e,t)=>{let n;if("string"==typeof e)n=ce(Z.parse(e)),e={};else if(e instanceof Z.URL)n=ce(Z.parse(e.toString())),e={};else{const[t,...r]=(e.path??"").split("?"),o=r.length>0?`?${r.join("?")}`:"";n=ce({...e,pathname:t,search:o})}(e={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...e,...ae(n)}).headers=Object.fromEntries(ie(e.headers).map((([e,t])=>[e.toLowerCase(),t])));const r=new N,o=function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!n)throw new Error(`Invalid URL: ${e}`);let{type:r,data:o,hash:s}=n.groups;const i=r.split(";");s=t?"":s;let a=!1;"base64"===i[i.length-1]&&(i.pop(),a=!0);const c=i.shift()?.toLowerCase()??"",u=[...i.map((e=>{let[t,n=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${t}${n?`=${n}`:""}`})).filter(Boolean)];return a&&u.push("base64"),(u.length>0||c&&"text/plain"!==c)&&u.unshift(c),`data:${u.join(";")},${a?o.trim():o}${s?`#${s}`:""}`})(e,t);if((e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!$.has(t)}catch{return!1}})(e))return e;const n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:"),t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,n="";for(;;){const o=e.exec(r.pathname);if(!o)break;const s=o[0],i=o.index;n+=r.pathname.slice(t,i).replace(/\/{2,}/g,"/"),n+=s,t=i+s.length}n+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=n}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/");const n=e[e.length-1];z(n,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=e.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...r.searchParams.keys()])z(e,t.removeQueryParameters)&&r.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(r.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...r.searchParams.keys()])z(e,t.keepQueryParameters)||r.searchParams.delete(e);if(t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,"")),t.removeExplicitPort&&r.port&&(r.port="");const o=e;return e=r.toString(),t.removeSingleSlash||"/"!==r.pathname||o.endsWith("/")||""!==r.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(Z.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1});let s=`${e.method}:${o}`;e.body&&void 0!==e.method&&["POST","PATCH","PUT"].includes(e.method)&&(e.body instanceof F.Readable?e.cache=!1:s+=`:${J.createHash("md5").update(e.body).digest("hex")}`);let i=!1,a=!1;const c=e=>{a=!0;let n=!1,o=()=>{};const c=new Promise((e=>{o=()=>{n||(n=!0,e())}})),u=async n=>{if(i){n.status=n.statusCode;const t=Q.fromObject(i.cachePolicy).revalidatedPolicy(e,n);if(!t.modified){n.resume(),await new Promise((e=>{n.once("end",e)}));const e=ue(t.policy.responseHeaders());(n=new te({statusCode:i.statusCode,headers:e,body:i.body,url:i.url})).cachePolicy=t.policy,n.fromCache=!0}}let o;n.fromCache||(n.cachePolicy=new Q(e,n,e),n.fromCache=!1),e.cache&&n.cachePolicy.storable()?(o=(e=>{const t=new F.PassThrough({autoDestroy:!1});return function(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const n=new Set([...Object.keys(e),...re]),r={};for(const o of n)o in t||(r[o]={get(){const t=e[o];return"function"==typeof t?t.bind(e):t},set(t){e[o]=t},enumerable:!0,configurable:!1});Object.defineProperties(t,r),e.once("aborted",(()=>{t.destroy(),t.emit("aborted")})),e.once("close",(()=>{e.complete&&t.readable?t.once("end",(()=>{t.emit("close")})):t.emit("close")}))}(e,t),e.pipe(t)})(n),(async()=>{try{const t=q.buffer(n);await Promise.race([c,new Promise((e=>n.once("end",e))),new Promise((e=>n.once("close",e)))]);const r=await t;let o={url:n.url,statusCode:n.fromCache?i.statusCode:n.statusCode,body:r,cachePolicy:n.cachePolicy.toObject()},a=e.strictTtl?n.cachePolicy.timeToLive():void 0;if(e.maxTtl&&(a=a?Math.min(a,e.maxTtl):e.maxTtl),this.hooks.size>0)for(const e of this.hooks.keys())o=await this.runHook(e,o,n);await this.cache.set(s,o,a)}catch(e){r.emit("error",new se(e))}})()):e.cache&&i&&(async()=>{try{await this.cache.delete(s)}catch(e){r.emit("error",new se(e))}})(),r.emit("response",o??n),"function"==typeof t&&t(o??n)};try{const t=this.cacheRequest(e,u);t.once("error",o),t.once("abort",o),t.once("destroy",o),r.emit("request",t)}catch(e){r.emit("error",new oe(e))}};return(async()=>{const n=async e=>{await Promise.resolve();const n=e.cache?await this.cache.get(s):void 0;if(void 0===n&&!e.forceRefresh)return void c(e);const o=Q.fromObject(n.cachePolicy);if(o.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=ue(o.responseHeaders()),s=new te({statusCode:n.statusCode,headers:e,body:n.body,url:n.url});s.cachePolicy=o,s.fromCache=!0,r.emit("response",s),"function"==typeof t&&t(s)}else o.satisfiesWithoutRevalidation(e)&&Date.now()>=o.timeToLive()&&e.forceRefresh?(await this.cache.delete(s),e.headers=o.revalidationHeaders(e),c(e)):(i=n,e.headers=o.revalidationHeaders(e),c(e))},o=e=>r.emit("error",new se(e));if(this.cache instanceof ne){const e=this.cache;e.once("error",o),r.on("error",(()=>e.removeListener("error",o))),r.on("response",(()=>e.removeListener("error",o)))}try{await n(e)}catch(t){e.automaticFailover&&!a&&c(e),r.emit("error",new se(t))}})(),r},this.addHook=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,t)},this.removeHook=e=>this.hooks.delete(e),this.getHook=e=>this.hooks.get(e),this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t),this.cache=t instanceof ne?t:new ne("string"==typeof t?{uri:t,namespace:"cacheable-request"}:{store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}};var de=n(20602);const pe=e=>"function"==typeof e,he=e=>Boolean(e&&pe(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&pe(e.append)&&pe(e.getAll)&&pe(e.entries)&&pe(e[Symbol.iterator])),fe=e=>{if(pe(e[Symbol.asyncIterator]))return e;if(pe(e.getReader))return async function*(e){const t=e.getReader();for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}(e);throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},me=e=>String(e).replace(/\r|\n/g,((e,t,n)=>"\r"===e&&"\n"!==n[t+1]||"\n"===e&&"\r"!==n[t-1]?"\r\n":e));function ge(e){if("object"!==(e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase())(e))return!1;const t=Object.getPrototypeOf(e);return null==t||(t.constructor&&t.constructor.toString())===Object.toString()}function _e(e,t){if("string"==typeof t)for(const[n,r]of Object.entries(e))if(t.toLowerCase()===n.toLowerCase())return r}const ye=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),Se=e=>Boolean(e&&"object"==typeof e&&pe(e.constructor)&&"File"===e[Symbol.toStringTag]&&pe(e.stream)&&null!=e.name);var be,Ee,ve,Te,Ie,Re,Ae,Ce,Oe,Ne,Pe,we=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Le=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const Me={enableAdditionalHeaders:!1},xe={writable:!1,configurable:!1};class ke{constructor(e,t,n){if(be.add(this),Ee.set(this,"\r\n"),ve.set(this,void 0),Te.set(this,void 0),Ie.set(this,"-".repeat(2)),Re.set(this,new TextEncoder),Ae.set(this,void 0),Ce.set(this,void 0),Oe.set(this,void 0),!he(e))throw new TypeError("Expected first argument to be a FormData instance.");let r;if(ge(t)?n=t:r=t,r||(r=function(){let e=16,t="";for(;e--;)t+="abcdefghijklmnopqrstuvwxyz0123456789"[36*Math.random()|0];return t}()),"string"!=typeof r)throw new TypeError("Expected boundary argument to be a string.");if(n&&!ge(n))throw new TypeError("Expected options argument to be an object.");we(this,Ce,Array.from(e.entries()),"f"),we(this,Oe,{...Me,...n},"f"),we(this,ve,Le(this,Re,"f").encode(Le(this,Ee,"f")),"f"),we(this,Te,Le(this,ve,"f").byteLength,"f"),this.boundary=`form-data-boundary-${r}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,we(this,Ae,Le(this,Re,"f").encode(`${Le(this,Ie,"f")}${this.boundary}${Le(this,Ie,"f")}${Le(this,Ee,"f").repeat(2)}`),"f");const o={"Content-Type":this.contentType},s=Le(this,be,"m",Pe).call(this);var i;s&&(this.contentLength=s,o["Content-Length"]=s),this.headers=(i=Object.freeze(o),new Proxy(i,{get:(e,t)=>_e(e,t),has:(e,t)=>void 0!==_e(e,t)})),Object.defineProperties(this,{boundary:xe,contentType:xe,contentLength:xe,headers:xe})}getContentLength(){return null==this.contentLength?void 0:Number(this.contentLength)}*values(){for(const[e,t]of Le(this,Ce,"f")){const n=Se(t)?t:Le(this,Re,"f").encode(me(t));yield Le(this,be,"m",Ne).call(this,e,n),yield n,yield Le(this,ve,"f")}yield Le(this,Ae,"f")}async*encode(){for(const e of this.values())Se(e)?yield*fe(e.stream()):yield e}[(Ee=new WeakMap,ve=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Re=new WeakMap,Ae=new WeakMap,Ce=new WeakMap,Oe=new WeakMap,be=new WeakSet,Ne=function(e,t){let n="";n+=`${Le(this,Ie,"f")}${this.boundary}${Le(this,Ee,"f")}`,n+=`Content-Disposition: form-data; name="${ye(e)}"`,Se(t)&&(n+=`; filename="${ye(t.name)}"${Le(this,Ee,"f")}`,n+=`Content-Type: ${t.type||"application/octet-stream"}`);const r=Se(t)?t.size:t.byteLength;return!0!==Le(this,Oe,"f").enableAdditionalHeaders||null==r||isNaN(r)||(n+=`${Le(this,Ee,"f")}Content-Length: ${Se(t)?t.size:t.byteLength}`),Le(this,Re,"f").encode(`${n}${Le(this,Ee,"f").repeat(2)}`)},Pe=function(){let e=0;for(const[t,n]of Le(this,Ce,"f")){const r=Se(n)?n:Le(this,Re,"f").encode(me(n)),o=Se(r)?r.size:r.byteLength;if(null==o||isNaN(o))return;e+=Le(this,be,"m",Ne).call(this,t,r).byteLength,e+=o,e+=Le(this,Te,"f")}return String(e+Le(this,Ae,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}var Ge=n(57975);function Ue(e){return O.nodeStream(e)&&O.function_(e.getBoundary)}function Ve(e,t,n){const r={};for(const o of n){const n=(...e)=>{t.emit(o,...e)};r[o]=n,e.on(o,n)}return()=>{for(const[t,n]of Object.entries(r))e.off(t,n)}}var He=n(77030);const De=Symbol("reentry"),je=()=>{};class Be extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}}const Fe=({attemptCount:e,retryOptions:t,error:n,retryAfter:r,computedValue:o})=>{if("RetryError"===n.name)return 1;if(e>t.limit)return 0;const s=t.methods.includes(n.options.method),i=t.errorCodes.includes(n.code),a=n.response&&t.statusCodes.includes(n.response.statusCode);if(!s||!i&&!a)return 0;if(n.response){if(r)return r>o?0:r;if(413===n.response.statusCode)return 0}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c};var Ze=n(41692),We=n(44708);const Xe=require("node:dns");var Ye=n(48161);const{Resolver:Ke}=Xe.promises,Je=Symbol("cacheableLookupCreateConnection"),ze=Symbol("cacheableLookupInstance"),$e=Symbol("expires"),qe="number"==typeof Xe.ALL,Qe=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},et=()=>{let e=!1,t=!1;for(const n of Object.values(Ye.networkInterfaces()))for(const r of n)if(!r.internal&&("IPv6"===r.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},tt=e=>e.catch((e=>{if("ENODATA"===e.code||"ENOTFOUND"===e.code||"ENOENT"===e.code)return[];throw e})),nt={ttl:!0},rt={all:!0},ot={all:!0,family:4},st={all:!0,family:6};class it{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:n=3600,errorTtl:r=.15,resolver:o=new Ke,lookup:s=Xe.lookup}={}){if(this.maxTtl=t,this.errorTtl=r,this._cache=e,this._resolver=o,this._dnsLookup=s&&(0,Ge.promisify)(s),this.stats={cache:0,query:0},this._resolver instanceof Ke?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Ge.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Ge.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=et(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=n,n>0){const e=setInterval((()=>{this._hostnamesToFallback.clear()}),1e3*n);e.unref&&e.unref(),this._fallbackInterval=e}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,n){if("function"==typeof t?(n=t,t={}):"number"==typeof t&&(t={family:t}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then((e=>{t.all?n(null,e):n(null,e.address,e.family,e.expires,e.ttl,e.source)}),n)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let n=await this.query(e);if(6===t.family){const e=n.filter((e=>6===e.family));t.hints&Xe.V4MAPPED&&(qe&&t.hints&Xe.ALL||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)})(n):n=e}else 4===t.family&&(n=n.filter((e=>4===e.family)));if(t.hints&Xe.ADDRCONFIG){const{_iface:e}=this;n=n.filter((t=>6===t.family?e.has6:e.has4))}if(0===n.length){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?n:n[0]}async query(e){let t="cache",n=await this._cache.get(e);if(n&&this.stats.cache++,!n){const r=this._pending[e];if(r)this.stats.cache++,n=await r;else{t="query";const r=this.queryAndCache(e);this._pending[e]=r,this.stats.query++;try{n=await r}finally{delete this._pending[e]}}}return n=n.map((e=>({...e,source:t}))),n}async _resolve(e){const[t,n]=await Promise.all([tt(this._resolve4(e,nt)),tt(this._resolve6(e,nt))]);let r=0,o=0,s=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,r=Math.max(r,e.ttl);for(const e of n)e.family=6,e.expires=i+1e3*e.ttl,o=Math.max(o,e.ttl);return s=t.length>0?n.length>0?Math.min(r,o):r:o,{entries:[...t,...n],cacheTtl:s}}async _lookup(e){try{const[t,n]=await Promise.all([tt(this._dnsLookup(e,ot)),tt(this._dnsLookup(e,st))]);return{entries:[...t,...n],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,n){if(this.maxTtl>0&&n>0){n=1e3*Math.min(n,this.maxTtl),t[$e]=Date.now()+n;try{await this._cache.set(e,t,n)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}r=this._cache,Symbol.iterator in r&&this._tick(n)}var r}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,rt);let t=await this._resolve(e);0===t.entries.length&&this._dnsLookup&&(t=await this._lookup(e),0!==t.entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));const n=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,n),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[n,r]of this._cache){const o=r[$e];t>=o?this._cache.delete(n):o<e&&(e=o)}e!==1/0&&this._tick(e-t)}),e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Qe(e),Je in e)throw new Error("CacheableLookup has been already installed");e[Je]=e.createConnection,e[ze]=this,e.createConnection=(t,n)=>("lookup"in t||(t.lookup=this.lookup),e[Je](t,n))}uninstall(e){if(Qe(e),e[Je]){if(e[ze]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Je],delete e[Je],delete e[ze]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=et(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}var at=n(5769);const[ct,ut]=j.versions.node.split(".").map(Number),lt=new Map;let dt;const pt={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate({response:e}){const t=e.headers.link;if("string"!=typeof t||""===t.trim())return!1;const n=function(e){const t=[],n=e.split(",");for(const r of n){const[n,...o]=r.split(";"),s=n.trim();if("<"!==s[0]||">"!==s[s.length-1])throw new Error(`Invalid format of the Link header reference: ${s}`);const i=s.slice(1,-1),a={};if(0===o.length)throw new Error(`Unexpected end of Link header parameters: ${o.join(";")}`);for(const t of o){const n=t.trim(),r=n.indexOf("=");if(-1===r)throw new Error(`Failed to parse Link header: ${e}`);const o=n.slice(0,r).trim(),s=n.slice(r+1).trim();a[o]=s}t.push({reference:i,parameters:a})}return t}(t).find((e=>"next"===e.parameters.rel||'"next"'===e.parameters.rel));return!!n&&{url:new Z.URL(n.reference,e.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},ht=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter((e=>"number"==typeof e));if(t.length>0)return Math.min(...t)},ft=(e,t,n)=>{const r=e.hooks?.init;if(r)for(const e of r)e(t,n)};class mt{constructor(e,t,n){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),C.any([O.string,O.urlInstance,O.object,O.undefined],e),C.any([O.object,O.undefined],t),C.any([O.object,O.undefined],n),e instanceof mt||t instanceof mt)throw new TypeError("The defaults must be passed as the third argument");this._internals=(e=>{const{hooks:t,retry:n}=e,r={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...n,errorCodes:[...n.errorCodes],methods:[...n.methods],statusCodes:[...n.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new Z.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return void 0!==r.url&&(r.prefixUrl=""),r})(n?._internals??n??pt),this._init=[...n?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(O.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(void 0!==t?.url){if(void 0!==e)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");this.url=t.url}else void 0!==e&&(this.url=e)}}catch(e){throw e.options=this,e}}merge(e){if(e)if(e instanceof mt)for(const t of e._init)this.merge(t);else{e=(e=>{const{hooks:t,retry:n}=e,r={...e};return O.object(e.context)&&(r.context={...e.context}),O.object(e.cacheOptions)&&(r.cacheOptions={...e.cacheOptions}),O.object(e.https)&&(r.https={...e.https}),O.object(e.cacheOptions)&&(r.cacheOptions={...r.cacheOptions}),O.object(e.agent)&&(r.agent={...e.agent}),O.object(e.headers)&&(r.headers={...e.headers}),O.object(n)&&(r.retry={...n},O.array(n.errorCodes)&&(r.retry.errorCodes=[...n.errorCodes]),O.array(n.methods)&&(r.retry.methods=[...n.methods]),O.array(n.statusCodes)&&(r.retry.statusCodes=[...n.statusCodes])),O.object(e.timeout)&&(r.timeout={...e.timeout}),O.object(t)&&(r.hooks={...t},O.array(t.init)&&(r.hooks.init=[...t.init]),O.array(t.beforeRequest)&&(r.hooks.beforeRequest=[...t.beforeRequest]),O.array(t.beforeError)&&(r.hooks.beforeError=[...t.beforeError]),O.array(t.beforeRedirect)&&(r.hooks.beforeRedirect=[...t.beforeRedirect]),O.array(t.beforeRetry)&&(r.hooks.beforeRetry=[...t.beforeRetry]),O.array(t.afterResponse)&&(r.hooks.afterResponse=[...t.afterResponse])),O.object(e.pagination)&&(r.pagination={...e.pagination}),r})(e),ft(this,e,this),ft(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(const n in e)if("mutableDefaults"!==n&&"handlers"!==n&&"url"!==n){if(!(n in this))throw new Error(`Unexpected option: ${n}`);this[n]=e[n],t=!0}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){C.any([O.function_,O.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){C.plainObject(e);for(const t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);C.any([O.object,O.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){C.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){C.plainObject(e);for(const t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);C.any([O.number,O.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(C.any([O.string,O.urlInstance],e),""!==e){if((e=e.toString()).endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}else this._internals.prefixUrl=""}get body(){return this._internals.body}set body(e){C.any([O.string,O.buffer,O.nodeStream,O.generator,O.asyncGenerator,he,O.undefined],e),O.nodeStream(e)&&C.truthy(e.readable),void 0!==e&&(C.undefined(this._internals.form),C.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){C.any([O.plainObject,O.undefined],e),void 0!==e&&(C.undefined(this._internals.body),C.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){void 0!==e&&(C.undefined(this._internals.body),C.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(C.any([O.string,O.urlInstance,O.undefined],e),void 0===e)return void(this._internals.url=void 0);if(O.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");const t=`${this.prefixUrl}${e.toString()}`,n=new Z.URL(t);if(this._internals.url=n,"unix:"===n.protocol&&(n.href=`http://unix${n.pathname}${n.search}`),"http:"!==n.protocol&&"https:"!==n.protocol){const e=new Error(`Unsupported protocol: ${n.protocol}`);throw e.code="ERR_UNSUPPORTED_PROTOCOL",e}if(this._internals.username&&(n.username=this._internals.username,this._internals.username=""),this._internals.password&&(n.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(n.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"!==n.hostname)this._unixOptions=void 0;else{if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${n.pathname}${n.search}`);if(e?.groups){const{socketPath:t,path:n}=e.groups;this._unixOptions={socketPath:t,path:n,host:""}}else this._unixOptions=void 0}}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(C.any([O.object,O.undefined],e),void 0===e)return void(this._internals.cookieJar=void 0);let{setCookie:t,getCookieString:n}=e;C.function_(t),C.function_(n),4===t.length&&0===n.length?(t=(0,Ge.promisify)(t.bind(e)),n=(0,Ge.promisify)(n.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:n}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){C.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){C.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new Z.URLSearchParams),this._internals.searchParams)}set searchParams(e){C.any([O.string,O.object,O.undefined],e);const t=this._internals.url;if(void 0===e)return this._internals.searchParams=void 0,void(t&&(t.search=""));const n=this.searchParams;let r;if(O.string(e))r=new Z.URLSearchParams(e);else if(e instanceof Z.URLSearchParams)r=e;else{!function(e){for(const t in e){const n=e[t];C.any([O.string,O.number,O.boolean,O.null_,O.undefined],n)}}(e),r=new Z.URLSearchParams;for(const t in e){const o=e[t];null===o?r.append(t,""):void 0===o?n.delete(t):r.append(t,o)}}if(this._merging){for(const e of r.keys())n.delete(e);for(const[e,t]of r)n.append(e,t)}else t?t.search=n.toString():this._internals.searchParams=n}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){C.any([O.function_,O.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){C.any([O.object,O.boolean,O.undefined],e),this._internals.dnsCache=!0===e?dt||(dt=new it,dt):!1===e?void 0:e}get context(){return this._internals.context}set context(e){C.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){C.object(e);for(const t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);const n=t,r=e[n];if(C.any([O.array,O.undefined],r),r)for(const e of r)C.function_(e);if(this._merging)r&&this._internals.hooks[n].push(...r);else{if(!r)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...r]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){C.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){C.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){C.any([O.object,O.string,O.boolean,O.undefined],e),this._internals.cache=!0===e?lt:!1===e?void 0:e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){C.boolean(e),this._internals.throwHttpErrors=e}get username(){const e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){C.string(e);const t=this._internals.url,n=encodeURIComponent(e);t?t.username=n:this._internals.username=n}get password(){const e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){C.string(e);const t=this._internals.url,n=encodeURIComponent(e);t?t.password=n:this._internals.password=n}get http2(){return this._internals.http2}set http2(e){C.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){C.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){C.plainObject(e),this._merging?Object.assign(this._internals.headers,ee(e)):this._internals.headers=ee(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){C.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(void 0!==e&&4!==e&&6!==e)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){C.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){C.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(C.plainObject(e),C.any([O.function_,O.undefined],e.calculateDelay),C.any([O.number,O.undefined],e.maxRetryAfter),C.any([O.number,O.undefined],e.limit),C.any([O.array,O.undefined],e.methods),C.any([O.array,O.undefined],e.statusCodes),C.any([O.array,O.undefined],e.errorCodes),C.any([O.number,O.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(const t in e)if(!(t in this._internals.retry))throw new Error(`Unexpected retry option: ${t}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map((e=>e.toUpperCase())))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){C.any([O.string,O.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){C.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){C.any([O.function_,O.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){C.plainObject(e),C.any([O.boolean,O.undefined],e.shared),C.any([O.number,O.undefined],e.cacheHeuristic),C.any([O.number,O.undefined],e.immutableMinTimeToLive),C.any([O.boolean,O.undefined],e.ignoreCargoCult);for(const t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){C.plainObject(e),C.any([O.boolean,O.undefined],e.rejectUnauthorized),C.any([O.function_,O.undefined],e.checkServerIdentity),C.any([O.string,O.object,O.array,O.undefined],e.certificateAuthority),C.any([O.string,O.object,O.array,O.undefined],e.key),C.any([O.string,O.object,O.array,O.undefined],e.certificate),C.any([O.string,O.undefined],e.passphrase),C.any([O.string,O.buffer,O.array,O.undefined],e.pfx),C.any([O.array,O.undefined],e.alpnProtocols),C.any([O.string,O.undefined],e.ciphers),C.any([O.string,O.buffer,O.undefined],e.dhparam),C.any([O.string,O.undefined],e.signatureAlgorithms),C.any([O.string,O.undefined],e.minVersion),C.any([O.string,O.undefined],e.maxVersion),C.any([O.boolean,O.undefined],e.honorCipherOrder),C.any([O.number,O.undefined],e.tlsSessionLifetime),C.any([O.string,O.undefined],e.ecdhCurve),C.any([O.string,O.buffer,O.array,O.undefined],e.certificateRevocationLists);for(const t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(null===e)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");C.any([O.string,O.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){C.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){C.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(void 0!==e){if("text"!==e&&"buffer"!==e&&"json"!==e)throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}else this._internals.responseType="text"}get pagination(){return this._internals.pagination}set pagination(e){C.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){C.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){C.any([O.number,O.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){C.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,Ge.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;let t;t="https:"===e.url.protocol?e.http2?e.agent:e.agent.https:e.agent.http;const{https:n}=e;let{pfx:r}=n;return O.array(r)&&O.plainObject(r[0])&&(r=r.map((e=>({buf:e.buffer,passphrase:e.passphrase})))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??Ze.checkServerIdentity,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:t,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?ht(e):void 0,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){const e=this._internals.url;if(e){if("https:"===e.protocol){if(this._internals.http2){if(ct<15||15===ct&&ut<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw e.code="EUNSUPPORTED",e}return at.auto}return We.request}return W.request}}freeze(){const e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}}const gt=e=>{const{statusCode:t}=e,n=e.request.options.followRedirect?299:399;return t>=200&&t<=n||304===t};class _t extends L{constructor(e,t){const{options:n}=t.request;super(`${e.message} in "${n.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}const yt=(e,t,n,r)=>{const{rawBody:o}=e;try{if("text"===t)return o.toString(r);if("json"===t)return 0===o.length?"":n(o.toString(r));if("buffer"===t)return o}catch(t){throw new _t(t,e)}throw new _t({message:`Unknown body type '${t}'`,name:"Error"},e)};function St(e){return"unix:"===e.protocol||"unix"===e.hostname}const{buffer:bt}=q,Et=O.string(j.versions.brotli),vt=new Set(["GET","HEAD"]),Tt=new class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}},It=new Set([300,301,302,303,304,307,308]),Rt=["socket","connect","continue","information","upgrade"],At=()=>{};class Ct extends F.Duplex{constructor(e,t,n){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=At,this._triggerRead=!1,this._cancelTimeouts=At,this._removeListeners=At,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=At,this.on("pipe",(e=>{e?.headers&&Object.assign(this.options.headers,e.headers)})),this.on("newListener",(e=>{if("retry"===e&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")}));try{if(this.options=new mt(e,t,n),!this.options.url){if(""===this.options.prefixUrl)throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;return t&&(this.options=t),void(this.flush=async()=>{this.flush=async()=>{},this.destroy(e)})}const{body:r}=this.options;if(O.nodeStream(r)&&r.once("error",(e=>{this._flushed?this._beforeError(new G(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new G(e,this))}})),this.options.signal){const e=()=>{this.destroy(new D(this))};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal.removeEventListener("abort",e)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed)return void this._request?.destroy();for(const e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;const{response:t,options:n}=this,r=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof L||(e=new L(e.message,e,this));const o=e;(async()=>{if(!t?.readable||t.rawBody||this._request?.socket?.destroyed||(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let s;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3);const i=n.retry;s=await i.calculateDelay({attemptCount:r,retryOptions:i,error:o,retryAfter:e,computedValue:Fe({attemptCount:r,retryOptions:i,error:o,retryAfter:e,computedValue:i.maxRetryAfter??n.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){return void this._error(new L(e.message,e,this))}if(s){if(await new Promise((e=>{const t=setTimeout(e,s);this._stopRetry=()=>{clearTimeout(t),e()}})),this.destroyed)return;try{for(const e of this.options.hooks.beforeRetry)await e(o,this.retryCount+1)}catch(t){return void this._error(new L(t.message,e,this))}if(this.destroyed)return;return this.destroy(),void this.emit("retry",this.retryCount+1,e,(e=>{const t=new Ct(n.url,e,n);return t.retryCount=this.retryCount+1,j.nextTick((()=>{t.flush()})),t}))}}this._error(o)})()}_read(){this._triggerRead=!0;const{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,n){const r=()=>{this._writeRequest(e,t,n)};this._requestInitialized?r():this._jobs.push(r)}_final(e){const t=()=>{this._request&&!this._request.destroyed?this._request.end((t=>{this._request._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(t))})):e()};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){const{body:e}=this.options;O.nodeStream(e)&&e.destroy()}this._request&&this._request.destroy(),null===e||O.undefined(e)||e instanceof L||(e=new L(e.message,e,this)),t(e)}pipe(e,t){return e instanceof W.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof W.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){const{options:e}=this,{headers:t}=e,n=!O.undefined(e.form),r=!O.undefined(e.json),o=!O.undefined(e.body),s=vt.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=s,n||r||o){if(s)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);const r=!O.string(t["content-type"]);if(o){if(he(e.body)){const n=new ke(e.body);r&&(t["content-type"]=n.headers["Content-Type"]),"Content-Length"in n.headers&&(t["content-length"]=n.headers["Content-Length"]),e.body=n.encode()}Ue(e.body)&&r&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(n){r&&(t["content-type"]="application/x-www-form-urlencoded");const{form:n}=e;e.form=void 0,e.body=new Z.URLSearchParams(n).toString()}else{r&&(t["content-type"]="application/json");const{json:n}=e;e.json=void 0,e.body=e.stringifyJson(n)}const i=await async function(e,t){return t&&"content-length"in t?Number(t["content-length"]):e?O.string(e)?B.Buffer.byteLength(e):O.buffer(e)?e.length:Ue(e)?(0,Ge.promisify)(e.getLength.bind(e))():void 0:0}(e.body,e.headers);O.undefined(t["content-length"])&&O.undefined(t["transfer-encoding"])&&!s&&!O.undefined(i)&&(t["content-length"]=String(i))}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;const{options:t}=this,{url:n}=t;this._nativeResponse=e,t.decompress&&(e=de(e));const r=e.statusCode,o=e;o.statusMessage=o.statusMessage??W.STATUS_CODES[r],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirectUrls,o.request=this,o.isFromCache=this._nativeResponse.fromCache??!1,o.ip=this.ip,o.retryCount=this.retryCount,o.ok=gt(o),this._isFromCache=o.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=o,e.once("end",(()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),this._beforeError(new V(t,this))})),e.once("aborted",(()=>{this._aborted=!0,this._beforeError(new V({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))})),this.emit("downloadProgress",this.downloadProgress);const s=e.headers["set-cookie"];if(O.object(t.cookieJar)&&s){let e=s.map((async e=>t.cookieJar.setCookie(e,n.toString())));t.ignoreInvalidCookies&&(e=e.map((async e=>{try{await e}catch{}})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(!this.isAborted)if(t.followRedirect&&e.headers.location&&It.has(r)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects)return void this._beforeError(new M(this));this._request=void 0;const s=new mt(void 0,void 0,this.options),i=303===r&&"GET"!==s.method&&"HEAD"!==s.method,a=307!==r&&308!==r,c=s.methodRewriting&&a;(i||c)&&(s.method="GET",s.body=void 0,s.json=void 0,s.form=void 0,delete s.headers["content-length"]);try{const t=B.Buffer.from(e.headers.location,"binary").toString(),r=new Z.URL(t,n);if(!St(n)&&St(r))return void this._beforeError(new L("Cannot redirect to UNIX socket",{},this));r.hostname!==n.hostname||r.port!==n.port?("host"in s.headers&&delete s.headers.host,"cookie"in s.headers&&delete s.headers.cookie,"authorization"in s.headers&&delete s.headers.authorization,(s.username||s.password)&&(s.username="",s.password="")):(r.username=s.username,r.password=s.password),this.redirectUrls.push(r),s.prefixUrl="",s.url=r;for(const e of s.hooks.beforeRedirect)await e(s,o);this.emit("redirect",s,o),this.options=s,await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!gt(o))this._beforeError(new x(o));else if(e.on("readable",(()=>{this._triggerRead&&this._read()})),this.on("resume",(()=>{e.resume()})),this.on("pause",(()=>{e.pause()})),e.once("end",(()=>{this.push(null)})),this._noPipe)await this._setRawBody()&&this.emit("response",e);else{this.emit("response",e);for(const n of this._pipedServerResponses)if(!n.headersSent){for(const r in e.headers){const o=!t.decompress||"content-encoding"!==r,s=e.headers[r];o&&n.setHeader(r,s)}n.statusCode=r}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{const t=await bt(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:n,url:r}=t;(e=>{if(e.timings)return e.timings;const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const n=e=>{e.once(X.errorMonitor,(()=>{t.error=Date.now(),t.phases.total=t.error-t.start}))};n(e);const r=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",r);const o=e=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,Y.types.isProxy(e))return;const n=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",n),K(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",n),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?o(e.socket):e.prependOnceListener("socket",o);const s=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};e.writableFinished?s():e.prependOnceListener("finish",s),e.prependOnceListener("response",(o=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,o.timings=t,n(o),o.prependOnceListener("end",(()=>{e.off("abort",r),o.off("aborted",r),t.phases.total||(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)})),o.prependOnceListener("aborted",r)}))})(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=function(e,t,n){if(De in e)return je;e[De]=!0;const r=[],{once:o,unhandleAll:s}=function(){const e=[];return{once(t,n,r){t.once(n,r),e.push({origin:t,event:n,fn:r})},unhandleAll(){for(const t of e){const{origin:e,event:n,fn:r}=t;e.removeListener(n,r)}e.length=0}}}(),i=(e,t,n)=>{const o=setTimeout(t,e,e,n);o.unref?.();const s=()=>{clearTimeout(o)};return r.push(s),s},{host:a,hostname:c}=n,u=(t,n)=>{e.destroy(new Be(t,n))},l=()=>{for(const e of r)e();s()};if(e.once("error",(t=>{if(l(),0===e.listenerCount("error"))throw t})),void 0!==t.request){const n=i(t.request,u,"request");o(e,"response",(e=>{o(e,"end",n)}))}if(void 0!==t.socket){const{socket:n}=t,o=()=>{u(n,"socket")};e.setTimeout(n,o),r.push((()=>{e.removeListener("timeout",o)}))}const d=void 0!==t.lookup,p=void 0!==t.connect,h=void 0!==t.secureConnect,f=void 0!==t.send;return(d||p||h||f)&&o(e,"socket",(r=>{const{socketPath:s}=e;if(r.connecting){const e=Boolean(s??0!==He.isIP(c??a??""));if(d&&!e&&void 0===r.address().address){const e=i(t.lookup,u,"lookup");o(r,"lookup",e)}if(p){const n=()=>i(t.connect,u,"connect");e?o(r,"connect",n()):o(r,"lookup",(e=>{null===e&&o(r,"connect",n())}))}h&&"https:"===n.protocol&&o(r,"connect",(()=>{const e=i(t.secureConnect,u,"secureConnect");o(r,"secureConnect",e)}))}if(f){const n=()=>i(t.send,u,"send");r.connecting?o(r,"connect",(()=>{o(e,"upload-complete",n())})):o(e,"upload-complete",n())}})),void 0!==t.response&&o(e,"upload-complete",(()=>{const n=i(t.response,u,"response");o(e,"response",n)})),void 0!==t.read&&o(e,"response",(e=>{const n=i(t.read,u,"read");o(e,"end",n)})),l}(e,n,r);const o=t.cache?"cacheableResponse":"response";e.once(o,(e=>{this._onResponse(e)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),t=t instanceof Be?new U(t,this.timings,this):new L(t.message,t,this),this._beforeError(t)})),this._unproxyEvents=Ve(e,this,Rt),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise(((t,n)=>{super.write(e,(e=>{e?n(e):t()}))}))}_sendBody(){const{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;O.nodeStream(e)?e.pipe(t):O.generator(e)||O.asyncGenerator(e)?(async()=>{try{for await(const t of e)await this._asyncWrite(t);super.end()}catch(e){this._beforeError(e)}})():O.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,(()=>{})),t.end())}_prepareCache(e){if(!Tt.has(e)){const t=new le(((e,t)=>{const n=e._request(e,t);return O.promise(n)&&(n.once=(e,t)=>{if("error"===e)(async()=>{try{await n}catch(e){t(e)}})();else{if("abort"!==e)throw new Error(`Unknown HTTP2 promise event: ${e}`);(async()=>{try{(await n).once("abort",t)}catch{}})()}return n}),n}),e);Tt.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise(((n,r)=>{let o;Object.assign(t,function(e){const t={protocol:e.protocol,hostname:O.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return O.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}(e));const s=Tt.get(t.cache)(t,(async e=>{if(e._readableState.autoDestroy=!1,o){const t=()=>{e.req&&(e.complete=e.req.res.complete)};e.prependOnceListener("end",t),t(),(await o).emit("cacheableResponse",e)}n(e)}));s.once("error",r),s.once("request",(async e=>{o=e,n(o)}))}))}async _makeRequest(){const{options:e}=this,{headers:t,username:n,password:r}=e,o=e.cookieJar;for(const e in t)if(O.undefined(t[e]))delete t[e];else if(O.null_(t[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(e.decompress&&O.undefined(t["accept-encoding"])&&(t["accept-encoding"]=Et?"gzip, deflate, br":"gzip, deflate"),n||r){const e=B.Buffer.from(`${n}:${r}`).toString("base64");t.authorization=`Basic ${e}`}if(o){const n=await o.getCookieString(e.url.toString());O.nonEmptyString(n)&&(t.cookie=n)}let s;e.prefixUrl="";for(const t of e.hooks.beforeRequest){const n=await t(e);if(!O.undefined(n)){s=()=>n;break}}s||(s=e.getRequestFunction());const i=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=s,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));const a=e.cache?this._createCacheableRequest:s;try{let t=a(i,this._requestOptions);O.promise(t)&&(t=await t),O.undefined(t)&&(t=e.getFallbackRequestFunction()(i,this._requestOptions),O.promise(t)&&(t=await t)),(c=t).writable&&!c.writableEnded?this._onRequest(t):this.writable?(this.once("finish",(()=>{this._onResponse(t)})),this._sendBody()):this._onResponse(t)}catch(e){if(e instanceof se)throw new k(e,this);throw e}var c}async _error(e){try{if(e instanceof x&&!this.options.throwHttpErrors);else for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new L(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,n){this._request&&!this._request.destroyed&&this._request.write(e,t,(r=>{if(!r&&!this._request.destroyed){this._uploadedSize+=B.Buffer.byteLength(e,t);const n=this.uploadProgress;n.percent<1&&this.emit("uploadProgress",n)}n(r)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return e=this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return e=this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class Ot extends L{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}const Nt=["request","response","redirect","uploadProgress","downloadProgress"];function Pt(e){let t,n,r;const o=new N.EventEmitter,s=new w(((i,a,c)=>{c((()=>{t.destroy()})),c.shouldReject=!1,c((()=>{a(new Ot(t))}));const u=l=>{c((()=>{}));const d=e??new Ct(void 0,void 0,r);d.retryCount=l,d._noPipe=!0,t=d,d.once("response",(async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase(),r="gzip"===t||"deflate"===t||"br"===t,{options:o}=d;if(r&&!o.decompress)e.body=e.rawBody;else try{e.body=yt(e,o.responseType,o.parseJson,o.encoding)}catch(t){if(e.body=e.rawBody.toString(),gt(e))return void d._beforeError(t)}try{const t=o.hooks.afterResponse;for(const[n,r]of t.entries())if(e=await r(e,(async e=>{throw o.merge(e),o.prefixUrl="",e.url&&(o.url=e.url),o.hooks.afterResponse=o.hooks.afterResponse.slice(0,n),new H(d)})),!O.object(e)||!O.number(e.statusCode)||O.nullOrUndefined(e.body))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(e){return void d._beforeError(e)}n=e,gt(e)?(d.destroy(),i(d.options.resolveBodyOnly?e.body:e)):d._beforeError(new x(e))}));const p=e=>{if(s.isCanceled)return;const{options:t}=d;if(e instanceof x&&!t.throwHttpErrors){const{response:t}=e;return d.destroy(),void i(d.options.resolveBodyOnly?t.body:t)}a(e)};d.once("error",p);const h=d.options?.body;d.once("retry",((t,n)=>{e=void 0;const o=d.options.body;if(h===o&&O.nodeStream(o))return n.message="Cannot retry with consumed body stream",void p(n);r=d.options,u(t)})),Ve(d,o,Nt),O.undefined(e)&&d.flush()};u(0)}));s.on=(e,t)=>(o.on(e,t),s),s.off=(e,t)=>(o.off(e,t),s);const i=e=>{const t=(async()=>{await s;const{options:t}=n.request;return yt(n,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)),t};return s.json=()=>{if(t.options){const{headers:e}=t.options;t.writableFinished||"accept"in e||(e.accept="application/json")}return i("json")},s.buffer=()=>i("buffer"),s.text=()=>i("text"),s}const wt=async e=>new Promise((t=>{setTimeout(t,e)})),Lt=e=>O.function_(e),Mt=["get","post","put","patch","head","delete"],xt=e=>{e={options:new mt(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});const t=(t,n,r=e.options)=>{const o=new Ct(t,n,r);let s;const i=e=>(o.options=e,o._noPipe=!e.isStream,o.flush(),e.isStream?o:(s||(s=Pt(o)),s));let a=0;const c=t=>{const n=(e.handlers[a++]??i)(t,c);if(O.promise(n)&&!o.options.isStream&&(s||(s=Pt(o)),n!==s)){const e=Object.getOwnPropertyDescriptors(s);for(const t in e)t in n&&delete e[t];Object.defineProperties(n,e),n.cancel=s.cancel}return n};return c(o.options)};t.extend=(...t)=>{const n=new mt(void 0,void 0,e.options),r=[...e.handlers];let o;for(const e of t)Lt(e)?(n.merge(e.defaults.options),r.push(...e.defaults.handlers),o=e.defaults.mutableDefaults):(n.merge(e),e.handlers&&r.push(...e.handlers),o=e.mutableDefaults);return xt({options:n,handlers:r,mutableDefaults:Boolean(o)})};const n=async function*(n,r){let o=new mt(n,r,e.options);o.resolveBodyOnly=!1;const{pagination:s}=o;C.function_(s.transform),C.function_(s.shouldContinue),C.function_(s.filter),C.function_(s.paginate),C.number(s.countLimit),C.number(s.requestLimit),C.number(s.backoff);const i=[];let{countLimit:a}=s,c=0;for(;c<s.requestLimit;){0!==c&&await wt(s.backoff);const e=await t(void 0,void 0,o),n=await s.transform(e),r=[];C.array(n);for(const e of n)if(s.filter({item:e,currentItems:r,allItems:i})){if(!s.shouldContinue({item:e,currentItems:r,allItems:i}))return;if(yield e,s.stackAllItems&&i.push(e),r.push(e),--a<=0)return}const u=s.paginate({response:e,currentItems:r,allItems:i});if(!1===u)return;u===e.request.options?o=e.request.options:(o.merge(u),C.any([O.urlInstance,O.undefined],u.url),void 0!==u.url&&(o.prefixUrl="",o.url=u.url)),c++}};(t.paginate=n).all=async(e,t)=>{const r=[];for await(const o of n(e,t))r.push(o);return r},t.paginate.each=n,t.stream=(e,n)=>t(e,{...n,isStream:!0});for(const e of Mt)t[e]=(n,r)=>t(n,{...r,method:e}),t.stream[e]=(n,r)=>t(n,{...r,method:e,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},kt=xt({options:new mt,handlers:[],mutableDefaults:!1}),Gt="https://api.spotify.com",Ut="https://accounts.spotify.com",Vt=1e4;async function Ht(e,t){return Bt(kt.get(Gt+t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},responseType:"json",timeout:{request:Vt},hooks:{}}))}async function Dt(e,t,n,r){return Bt(kt.put(Gt+t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},responseType:"json",timeout:{request:Vt},hooks:{},searchParams:n,json:r}))}async function jt(e,t,n){return Bt(kt.post(Gt+t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},responseType:"json",timeout:{request:Vt},hooks:{},searchParams:n}))}async function Bt(e){try{const t=await e;return{headers:t.headers,statusCode:t.statusCode,body:await e.json()}}catch(e){return e instanceof x?Promise.reject({headers:e.response.headers,statusCode:e.response.statusCode,error:e}):Promise.reject({headers:{},statusCode:500,error:e})}}async function Ft(e){return Ht(e,"/v1/me/player/devices")}async function Zt(e){return Ht(e,"/v1/me/player")}async function Wt(e,t){const n={},r={};return t&&("deviceId"in t&&(n.device_id=t.deviceId),"context_uri"in t&&(r.context_uri=t.context_uri),"uris"in t&&(r.uris=t.uris),"offset"in t&&(r.offset=t.offset),"position_ms"in t&&(r.position_ms=t.position_ms)),Dt(e,"/v1/me/player/play",n,r)}async function Xt(e,t,n){const r={state:t};return n&&"deviceId"in n&&(r.device_id=n.deviceId),Dt(e,"/v1/me/player/shuffle",r,{})}const Yt=5;async function Kt(e,t,n,r,o=0){const s=e.getRequestOptionsBase();if(s)if(isNaN(r))e.log("debug",`Invalid volume change: ${r} isAbsolute=${n}`);else try{const e=await Ft(s),o=e.body?.devices?.find((e=>e.id===t));if(!o||"number"!=typeof o.volume_percent)return;let i=n?r:o.volume_percent+r;i<0&&(i=0),i>100&&(i=100),await async function(e,t,n){const r={volume_percent:t};return n?.deviceId&&(r.device_id=n.deviceId),Dt(e,"/v1/me/player/volume",r,{})}(s,i,{deviceId:t})}catch(s){if(await e.checkIfApiErrorShouldRetry(s)&&o<=Yt)return Kt(e,t,n,r,o+1);throw s}}async function Jt(e,t,n=0){const r=e.getRequestOptionsBase();if(r)try{await async function(e,t){const n={};return t&&"deviceId"in t&&(n.device_id=t.deviceId),jt(e,"/v1/me/player/next",n)}(r,{deviceId:t})}catch(r){if(await e.checkIfApiErrorShouldRetry(r)&&n<=Yt)return Jt(e,t,n+1);throw r}}async function zt(e,t,n=0){const r=e.getRequestOptionsBase();if(r)try{await async function(e,t){const n={};return t&&"deviceId"in t&&(n.device_id=t.deviceId),jt(e,"/v1/me/player/previous",n)}(r,{deviceId:t})}catch(r){if(await e.checkIfApiErrorShouldRetry(r)&&n<=Yt)return zt(e,t,n+1);throw r}}async function $t(e,t,n=0){const r=e.getRequestOptionsBase();if(r)try{await async function(e,t){return Dt(e,"/v1/me/player",{},{play:!0,device_ids:t})}(r,[t])}catch(r){if(await e.checkIfApiErrorShouldRetry(r)&&n<=Yt)return $t(e,t,n+1);throw r}}async function qt(e,t,n,r=0){const o=e.getRequestOptionsBase();if(o)try{const e=await Zt(o);"pause"!==n&&"toggle"!==n||!e.body?.is_playing?"play"!==n&&"toggle"!==n||e.body?.is_playing||await Wt(o,{deviceId:t}):await async function(e,t){const n={};return t&&"deviceId"in t&&(n.device_id=t.deviceId),Dt(e,"/v1/me/player/pause",n,{})}(o,{deviceId:t})}catch(o){if(await e.checkIfApiErrorShouldRetry(o)&&r<=Yt)return qt(e,t,n,r+1);throw o}}async function Qt(e,t,n,r=0){const o=e.getRequestOptionsBase();if(o)try{const e=await Zt(o);if(e.body?.repeat_state===n)return;await async function(e,t){const n={state:t};return Dt(e,"/v1/me/player/repeat",n,{})}(o,n)}catch(o){if(await e.checkIfApiErrorShouldRetry(o)&&r<=Yt)return Qt(e,t,n,r+1);throw o}}async function en(e,t,n,r=0){const o=e.getRequestOptionsBase();if(o)try{const e=await Zt(o);!1!==n&&"toggle"!==n||!e.body?.shuffle_state?!0!==n&&"toggle"!==n||e.body?.shuffle_state||await Xt(o,!0,{deviceId:t}):await Xt(o,!1,{deviceId:t})}catch(o){if(await e.checkIfApiErrorShouldRetry(o)&&r<=Yt)return en(e,t,n,r+1);throw o}}async function tn(e,t,n,r=0){const o=e.getRequestOptionsBase();if(o)try{await async function(e,t){const n={position_ms:t};return Dt(e,"/v1/me/player/seek",n,{})}(o,n)}catch(o){if(await e.checkIfApiErrorShouldRetry(o)&&r<=Yt)return tn(e,t,n,r+1);throw o}}async function nn(e,t,n,r,o=0){const s=e.getRequestOptionsBase();if(s)try{if("force"!==r){const o=await Zt(s);if(o.body?.context?.uri===n)return void("return"==r||"resume"==r&&o.body.is_playing?e.log("warn",`Already playing that ${n}`):"resume"==r&&await Wt(s,{deviceId:t}))}await Wt(s,{deviceId:t,context_uri:n})}catch(s){if(await e.checkIfApiErrorShouldRetry(s)&&o<=Yt)return nn(e,t,n,r,o+1);throw s}}async function rn(e,t,n,r,o=0){const s=e.getRequestOptionsBase();if(s)try{await Wt(s,{deviceId:t,uris:n,position_ms:r})}catch(s){if(await e.checkIfApiErrorShouldRetry(s)&&o<=Yt)return rn(e,t,n,r,o+1);throw s}}var on;function sn(e){return{[on.PlayPause]:{name:"Toggle Play/Pause",options:[],callback:async()=>{await e((async(e,t)=>{t&&await qt(e,t,"toggle")}))}},[on.Play]:{name:"Play",options:[],callback:async()=>{await e((async(e,t)=>{t&&await qt(e,t,"play")}))}},[on.PlaySpecificList]:{name:"Start Specific Album / Artist / Playlist",options:[{id:"type",type:"dropdown",label:"Type",choices:[{id:"album",label:"Album"},{id:"artist",label:"Artist"},{id:"playlist",label:"Playlist"}],default:"album"},{tooltip:"Provide the ID for the item",required:!0,type:"textinput",label:"Item ID",id:"context_uri",useVariables:!0},{type:"dropdown",default:"return",label:"Action Behavior if Provided Item is Currently Playing",id:"behavior",choices:[{id:"return",label:"Do Nothing"},{id:"resume",label:"Play (if paused)"},{id:"force",label:"Force Play (from start)"}]}],callback:async(t,n)=>{if(t.options.type&&t.options.context_uri&&"string"==typeof t.options.behavior){const r=t.options.behavior;await e((async(e,o)=>{if(!o)return;const s=await n.parseVariablesInString(String(t.options.context_uri)),i=`spotify:${t.options.type}:${s}`;await nn(e,o,i,r)}))}}},[on.PlaySpecificTracks]:{name:"Start Specific Track(s)",options:[{id:"tracks",type:"textinput",required:!0,label:"Input Specific Track IDs",tooltip:"IDs should be comma separated (ie. 4ByEFOBuLXpCqvO1kw8Wdm,7BaEFOBuLXpDqvO1kw8Wem)"},{id:"positionMs",type:"number",label:"Start Position of First Track in Milliseconds",default:0,required:!1,min:0,max:1e6}],callback:async t=>{if("string"==typeof t.options.tracks){const n=t.options.tracks.split(",").map((e=>"spotify:track:"+e.trim()));await e((async(e,r)=>{r&&await rn(e,r,n,Number(t.options.positionMs)||0)}))}}},[on.Pause]:{name:"Pause Playback",options:[],callback:async()=>{await e((async(e,t)=>{t&&await qt(e,t,"pause")}))}},[on.VolumeUp]:{name:"Volume Up",options:[{type:"number",label:"Volume",id:"volumeUpAmount",default:5,min:0,max:100,step:1}],callback:async t=>{await e((async(e,n)=>{n&&await Kt(e,n,!1,Number(t.options.volumeUpAmount))}))}},[on.VolumeDown]:{name:"Volume Down",options:[{type:"number",label:"Volume",id:"volumeDownAmount",default:5,min:0,max:100,step:1}],callback:async t=>{await e((async(e,n)=>{n&&await Kt(e,n,!1,-Number(t.options.volumeDownAmount))}))}},[on.VolumeSpecific]:{name:"Set Volume to Specific Value",options:[{type:"number",label:"Volume",id:"value",default:50,min:0,max:100,step:1}],callback:async t=>{await e((async(e,n)=>{n&&await Kt(e,n,!0,Number(t.options.value))}))}},[on.SeekPosition]:{name:"Seek To Position In Currently Playing Track",options:[{type:"textinput",label:"Position (milliseconds)",id:"position",default:""}],callback:async t=>{if("number"==typeof t.options.position){const n=t.options.position;await e((async(e,t)=>{t&&await tn(e,t,n)}))}}},[on.Skip]:{name:"Skip Track",options:[],callback:async()=>{await e((async(e,t)=>{t&&await Jt(e,t)}))}},[on.Previous]:{name:"Previous Track",options:[],callback:async()=>{await e((async(e,t)=>{t&&await zt(e,t)}))}},[on.ShuffleToggle]:{name:"Toggle Shuffle",options:[],callback:async()=>{await e((async(e,t)=>{t&&await en(e,t,"toggle")}))}},[on.ShuffleOn]:{name:"Turn Shuffle On",options:[],callback:async()=>{await e((async(e,t)=>{t&&await en(e,t,!0)}))}},[on.ShuffleOff]:{name:"Turn Shuffle Off",options:[],callback:async()=>{await e((async(e,t)=>{t&&await en(e,t,!1)}))}},[on.RepeatState]:{name:"Set Repeat State",options:[{type:"dropdown",label:"State",id:"state",default:"off",choices:[{id:"off",label:"off"},{id:"context",label:"context"},{id:"track",label:"track"}]}],callback:async t=>{if("string"==typeof t.options.state){const n=t.options.state;await e((async(e,t)=>{t&&await Qt(e,t,n)}))}}},[on.ActiveDeviceToConfig]:{name:"Write the ID of the current Active Device to config",options:[],callback:async()=>{await e((async e=>{const t=e.getRequestOptionsBase();if(!t)return;const n=await Ft(t),r=n.body?.devices?.find((e=>e.is_active));r?.id&&(e.config.deviceId=r.id,e.saveConfig(e.config),e.checkFeedbacks())}))}},[on.SwitchActiveDevice]:{name:"Change Active Device",options:[{type:"textinput",label:"Device ID",id:"deviceId",default:""}],callback:async t=>{await e((async e=>{const n=t.options.deviceId;n&&"string"==typeof n&&(e.config.deviceId=n,e.saveConfig(e.config),e.checkFeedbacks(),await $t(e,n))}))}}}}!function(e){e.PlayPause="play/pause",e.Play="play",e.PlaySpecificList="playSpecificList",e.PlaySpecificTracks="playSpecificTracks",e.Pause="pause",e.VolumeUp="volumeUp",e.VolumeDown="volumeDown",e.VolumeSpecific="volumeSpecific",e.SeekPosition="seekPosition",e.Skip="skip",e.Previous="previous",e.ShuffleToggle="shuffleToggle",e.ShuffleOn="shuffleOn",e.ShuffleOff="shuffleOff",e.RepeatState="repeatState",e.ActiveDeviceToConfig="activeDeviceToConfig",e.SwitchActiveDevice="switchActiveDevice"}(on||(on={}));const an=[(0,r.CreateConvertToBooleanFeedbackUpgradeScript)({[h.IsPlaying]:!0,[h.IsShuffle]:!0,[h.IsRepeat]:!0,[h.ActiveDevice]:!0,[h.CurrentContext]:!0})];var cn=n(87016);async function un(e,t,n){const r=Buffer.from(`${e}:${t}`).toString("base64");return Bt(kt.post(Ut+"/api/token",{headers:{Authorization:`Basic ${r}`,"Content-Type":"application/x-www-form-urlencoded"},responseType:"json",timeout:{request:Vt},hooks:{},form:{grant_type:"refresh_token",refresh_token:n}}))}const ln=["user-read-playback-state","user-modify-playback-state","user-read-currently-playing","streaming","app-remote-control","playlist-read-collaborative","playlist-read-private","user-library-read","user-top-read","user-read-playback-position"];class dn extends r.InstanceBase{config;accessToken=null;pollTimer;state;pollQueue=new l({concurrency:1});constructor(e){super(e),this.state={playbackState:null},this.config={...d}}async checkIfApiErrorShouldRetry(e){if(!("statusCode"in e)||"401"!=e.statusCode){const t="error"in e?e.error.toString():e.toString();return this.log("debug",`Something went wrong with an API Call: ${t}`),!1}if(!this.config.clientId||!this.config.clientSecret||!this.config.refreshToken)return this.log("debug","Missing properties required to refresh access token"),!1;try{const e=await un(this.config.clientId,this.config.clientSecret,this.config.refreshToken);return e.body?.access_token?(this.accessToken=e.body.access_token,this.updateStatus(r.InstanceStatus.Ok),!0):(this.log("debug","No access token in refresh response"),this.accessToken=null,this.updateStatus(r.InstanceStatus.Connecting),!1)}catch(e){return this.log("debug",`Failed to refresh access token: ${e.toString()}`),this.accessToken=null,this.updateStatus(r.InstanceStatus.Connecting),!1}}getRequestOptionsBase(){return this.accessToken?{accessToken:this.accessToken}:null}async configUpdated(e){this.config=e,p(this.config)&&this.saveConfig(this.config),this.setupOrRefreshAuthentication(),this.initActions()}setupOrRefreshAuthentication(){if(this.accessToken=null,this.config.clientId&&this.config.clientSecret&&this.config.redirectUri)if(this.accessToken)this.updateStatus(r.InstanceStatus.Ok);else if(this.config.code){this.updateStatus(r.InstanceStatus.Connecting);const e=this.config.code;delete this.config.code,this.saveConfig(this.config),async function(e,t,n,r){const o=Buffer.from(`${e}:${t}`).toString("base64");return Bt(kt.post(Ut+"/api/token",{headers:{Authorization:`Basic ${o}`,"Content-Type":"application/x-www-form-urlencoded"},responseType:"json",timeout:{request:Vt},hooks:{},form:{grant_type:"authorization_code",redirect_uri:n,code:r,client_id:e,client_secret:t}}))}(this.config.clientId,this.config.clientSecret,this.config.redirectUri,e).then((e=>{e.body?.access_token?this.accessToken=e.body.access_token:this.accessToken=null,e.body?.refresh_token?this.config.refreshToken=e.body.refresh_token:delete this.config.refreshToken,this.saveConfig(this.config),this.updateStatus(r.InstanceStatus.Ok)})).catch((e=>{console.log(e),this.log("debug",`Failed to get access token: ${e?.message??e.toString()}`)}))}else this.config.refreshToken?(this.updateStatus(r.InstanceStatus.Connecting),un(this.config.clientId,this.config.clientSecret,this.config.refreshToken).then((e=>{e.body?.access_token?(this.accessToken=e.body.access_token,this.updateStatus(r.InstanceStatus.Ok)):(this.accessToken=null,this.updateStatus(r.InstanceStatus.Connecting))})).catch((e=>{this.log("warn",`Failed to refresh access token: ${e.toString()}`)}))):(this.updateStatus(r.InstanceStatus.BadConfig),this.config.authURL=function(e,t,n){const r=new cn.URL(Ut+"/authorize");return r.searchParams.append("client_id",e),r.searchParams.append("response_type","code"),r.searchParams.append("redirect_uri",t),r.searchParams.append("scope",n.join(" ")),r}(this.config.clientId,this.config.redirectUri,ln).toString(),this.saveConfig(this.config),this.log("info",`Please visit the following URL to authorize the module: ${this.config.authURL}`));else this.updateStatus(r.InstanceStatus.BadConfig)}async init(e){this.config=e,p(this.config)&&this.saveConfig(this.config),this.updateStatus(r.InstanceStatus.Connecting),this.setupOrRefreshAuthentication(),!this.pollTimer&&this.config.pollInterval&&(this.pollTimer=setInterval((()=>this.queuePoll()),1e3*this.config.pollInterval)),this.initActions(),this.initFeedbacks(),this.initVariables()}async destroy(){this.log("debug","destroy"),this.pollTimer&&(clearInterval(this.pollTimer),delete this.pollTimer)}getConfigFields(){return[{type:"static-text",id:"info",width:12,label:"Setup Information",value:"<strong>PLEASE READ THE HELP FILE.</strong> (Question mark in the top right)"},{type:"textinput",id:"clientId",width:6,label:"Client ID"},{type:"textinput",id:"clientSecret",width:6,label:"Client Secret"},{type:"textinput",id:"redirectUri",width:12,label:"Redirect URL"},{type:"textinput",id:"code",width:12,label:"Approval Code"},{type:"textinput",id:"refreshToken",width:12,label:"Refresh Token"},{type:"textinput",id:"deviceId",width:12,label:"Selected Playback Device ID"},{type:"textinput",id:"authURL",width:12,label:"Auth URL"},{type:"textinput",id:"pollInterval",width:6,label:"API Poll Interval (seconds)"},{type:"static-text",id:"_poll_info_",width:6,label:"",value:"This is how often the module will poll the Spotify API for updates. Default is 3 seconds. This may need to be increased if reaching the api rate limit."}]}initActions(){const e=sn((async e=>{this.canPollOrPost()&&await e(this,this.config.deviceId||null).then((()=>{this.queuePoll()})).catch((e=>{this.log("error",`Execute action failed: ${e.toString()}`)}))}));this.setActionDefinitions(e)}initFeedbacks(){const e=(t=()=>this.state,{[h.IsPlaying]:{type:"boolean",name:"Change button style if music is playing",description:"If there is active playback, set the button to this colour",options:[],defaultStyle:{color:(0,r.combineRgb)(255,255,255),bgcolor:(0,r.combineRgb)(0,255,0)},callback:e=>!!t().playbackState?.isPlaying},[h.IsShuffle]:{type:"boolean",name:"Change button style if shuffle is turned on",description:"If shuffle is enabled, set the button to this colour",options:[],defaultStyle:{color:(0,r.combineRgb)(255,255,255),bgcolor:(0,r.combineRgb)(0,255,0)},callback:e=>!!t().playbackState?.isShuffle},[h.IsRepeat]:{type:"boolean",name:"Change button style based on repeat state",description:"If repeat state matches given state change button colors",options:[{type:"dropdown",label:"Repeat state to match",id:"type",default:"track",choices:[{label:"off",id:"off"},{label:"context",id:"context"},{label:"track",id:"track"}]}],defaultStyle:{color:(0,r.combineRgb)(255,255,255),bgcolor:(0,r.combineRgb)(0,255,0)},callback:e=>t().playbackState?.repeatState==e.options.type},[h.ActiveDevice]:{type:"boolean",name:"Change button style if active device name matches value",description:"If active device name matches value, change button color",options:[{type:"textinput",label:"Device Name (case insensitive)",id:"device"}],defaultStyle:{color:(0,r.combineRgb)(255,255,255),bgcolor:(0,r.combineRgb)(0,255,0)},callback:e=>"string"==typeof e.options.device&&t().playbackState?.deviceInfo?.name?.toLowerCase()==e.options.device.toLowerCase()},[h.CurrentContext]:{type:"boolean",name:"Change button style if current album/artist/playlist id matches value",description:"If active album/artist/playlist matches value, change button color",options:[{type:"textinput",label:"Item ID",id:"id"}],defaultStyle:{color:(0,r.combineRgb)(255,255,255),bgcolor:(0,r.combineRgb)(0,255,0)},callback:e=>t().playbackState?.currentContext==e.options.id}});var t;this.setFeedbackDefinitions(e)}initVariables(){this.setVariableDefinitions([{variableId:"songName",name:"Current Song Name"},{variableId:"albumName",name:"Current Album Name"},{variableId:"artistName",name:"Current Artist Name"},{variableId:"isPlaying",name:"Is Playback Active"},{variableId:"isPlayingIcon",name:"Playback Icon"},{variableId:"isShuffle",name:"Is Shuffle Enabled"},{variableId:"repeat",name:"Is Repeat Enabled"},{variableId:"currentContext",name:"Current Context ID"},{variableId:"songPercentage",name:"Percentage of the current song completed"},{variableId:"songProgressSeconds",name:"Progress of the current song in seconds"},{variableId:"songDurationSeconds",name:"Duration of the current song in seconds"},{variableId:"songTimeRemaining",name:"Time remaining in song (pretty formatted HH:MM:SS)"},{variableId:"songTimeRemainingHours",name:"Hours remaining in song (zero padded)"},{variableId:"songTimeRemainingMinutes",name:"Minutes remaining in song (zero padded)"},{variableId:"songTimeRemainingSeconds",name:"Seconds remaining in song (zero padded)"},{variableId:"volume",name:"Current Volume"},{variableId:"currentAlbumArt",name:"Currently playing album artwork. Use the generic http module to display this on a button"},{variableId:"deviceName",name:"Current device name"},{variableId:"deviceId",name:"Current device id"}])}canPollOrPost(){return!!this.accessToken}queuePoll(){this.canPollOrPost()?this.pollQueue.size>1?this.log("debug","Poll queue overflow"):this.pollQueue.add((async()=>{if(this.canPollOrPost())try{await this.doPollPlaybackState()}catch(e){this.log("debug",`Poll failed: ${e.toString()}`)}})).catch((e=>{this.log("debug",`Failed to queue poll: ${e.toString()}`)})):this.updateStatus(r.InstanceStatus.BadConfig)}async doPollPlaybackState(){const e=this.getRequestOptionsBase();if(e)try{const t=await Zt(e);let n=null;if(t.body){if(n={isPlaying:!!t.body.is_playing,isShuffle:!!t.body.shuffle_state,repeatState:t.body.repeat_state,currentContext:t.body.context&&t.body.context.uri.split(":")[2],trackProgressMs:t.body.progress_ms??0,trackInfo:null,deviceInfo:null},t.body.item){if(n.trackInfo={durationMs:t.body.item.duration_ms,name:t.body.item.name,artistName:null,albumName:null,albumImageUrl:null},"artists"in t.body.item){const e=t.body.item.artists;n.trackInfo.artistName=e.map((e=>e.name)).join(", ")}if("album"in t.body.item){const e=t.body.item.album;n.trackInfo.albumName=e.name,e.images.length>0&&(n.trackInfo.albumImageUrl=e.images[0].url)}}t.body.device&&(n.deviceInfo={id:t.body.device.id,name:t.body.device.name,volumePercent:t.body.device.volume_percent})}this.diffAndSavePlaybackState(n),this.updateStatus(r.InstanceStatus.Ok)}catch(e){this.updateStatus(r.InstanceStatus.ConnectionFailure,"Failed to query Api"),await this.checkIfApiErrorShouldRetry(e)?this.queuePoll():this.diffAndSavePlaybackState(null)}}diffAndSavePlaybackState(e){const t=this.state.playbackState;this.state.playbackState=e;const n=!t&&!!e,r=[],o={};(n||t?.isPlaying!==e?.isPlaying)&&(o.isPlaying=!!e?.isPlaying,o.isPlayingIcon=e?.isPlaying?"":"",r.push(h.IsPlaying)),(n||t?.isShuffle!==e?.isShuffle)&&(r.push(h.IsShuffle),o.isShuffle=!!e?.isShuffle),(n||t?.repeatState!==e?.repeatState)&&(r.push(h.IsRepeat),o.repeat=e?.repeatState??"off"),(n||t?.currentContext!==e?.currentContext)&&(this.checkFeedbacks("current-context"),o.currentContext=e?.currentContext??""),(n||t?.trackInfo?.artistName!==e?.trackInfo?.artistName)&&(o.artistName=e?.trackInfo?.artistName??""),(n||t?.trackInfo?.name!==e?.trackInfo?.name)&&(o.songName=e?.trackInfo?.name??""),(n||t?.trackInfo?.albumName!==e?.trackInfo?.albumName)&&(o.albumName=e?.trackInfo?.albumName??""),(n||t?.trackInfo?.albumImageUrl!==e?.trackInfo?.albumImageUrl)&&(o.currentAlbumArt=e?.trackInfo?.albumImageUrl??"");let s=!1;if((n||t?.trackProgressMs!==e?.trackProgressMs)&&(s=!0,o.songProgressSeconds=((e?.trackProgressMs??0)/1e3).toFixed(0)),(n||t?.trackInfo?.durationMs!==e?.trackInfo?.durationMs)&&(s=!0,o.songDurationSeconds=((e?.trackInfo?.durationMs??0)/1e3).toFixed(0)),n||s){const t=e?.trackProgressMs??0,n=e?.trackInfo?.durationMs??0;o.songPercentage=n>0?(t/n*100).toFixed(0):"-";const r=Math.max(n-t,0),s=Math.floor(r/1e3%60),i=Math.floor(r/6e4%60),a=Math.floor(r/36e5),c=`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;o.songTimeRemaining=c,o.songTimeRemainingHours=a,o.songTimeRemainingMinutes=i,o.songTimeRemainingSeconds=s}(n||t?.deviceInfo?.volumePercent!==e?.deviceInfo?.volumePercent)&&(o.volume=e?.deviceInfo?.volumePercent??"-"),(n||t?.deviceInfo?.name!==e?.deviceInfo?.name)&&(r.push(h.ActiveDevice),o.deviceName=e?.deviceInfo?.name??"-"),(n||t?.deviceInfo?.id!==e?.deviceInfo?.id)&&(r.push(h.ActiveDevice),o.deviceId=e?.deviceInfo?.id??"-"),r.length>0&&this.checkFeedbacks(...r),Object.keys(o).length>0&&this.setVariableValues(o)}}(0,r.runEntrypoint)(dn,an)},31635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>x,__assign:()=>s,__asyncDelegator:()=>R,__asyncGenerator:()=>I,__asyncValues:()=>A,__await:()=>T,__awaiter:()=>f,__classPrivateFieldGet:()=>w,__classPrivateFieldIn:()=>M,__classPrivateFieldSet:()=>L,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>G,__esDecorate:()=>u,__exportStar:()=>_,__extends:()=>o,__generator:()=>m,__importDefault:()=>P,__importStar:()=>N,__makeTemplateObject:()=>C,__metadata:()=>h,__param:()=>c,__propKey:()=>d,__read:()=>S,__rest:()=>i,__runInitializers:()=>l,__setFunctionName:()=>p,__spread:()=>b,__spreadArray:()=>v,__spreadArrays:()=>E,__values:()=>y,default:()=>U});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t,n,r,o,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=r.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?r.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),p=!1,h=n.length-1;h>=0;h--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var g=(0,n[h])("accessor"===c?{get:d.get,set:d.set}:d[u],f);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=i(g.get))&&(d.get=a),(a=i(g.set))&&(d.set=a),(a=i(g.init))&&o.unshift(a)}else(a=i(g))&&("field"===c?o.unshift(a):d[u]=a)}l&&Object.defineProperty(l,r.name,d),p=!0}function l(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))}function m(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function _(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e}function E(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r}function v(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function T(e){return this instanceof T?(this.v=e,this):new T(e)}function I(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof T?Promise.resolve(n.value.v).then(c,u):l(s[0][2],n)}catch(e){l(s[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function R(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:T(e[r](t)),done:!1}:o?o(t):t}:o}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return O(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function L(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function M(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function x(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var k="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function G(e){function t(t){e.error=e.hasError?new k(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var r=e.stack.pop();try{var o=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(o).then(n,(function(e){return t(e),n()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}const U={__extends:o,__assign:s,__rest:i,__decorate:a,__param:c,__metadata:h,__awaiter:f,__generator:m,__createBinding:g,__exportStar:_,__values:y,__read:S,__spread:b,__spreadArrays:E,__spreadArray:v,__await:T,__asyncGenerator:I,__asyncDelegator:R,__asyncValues:A,__makeTemplateObject:C,__importStar:N,__importDefault:P,__classPrivateFieldGet:w,__classPrivateFieldSet:L,__classPrivateFieldIn:M,__addDisposableResource:x,__disposeResources:G}},17324:e=>{"use strict";e.exports=JSON.parse('{"assert":true,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16","async_hooks":">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],"buffer_ieee754":">= 0.5 && < 0.9.7","buffer":true,"node:buffer":[">= 14.18 && < 15",">= 16"],"child_process":true,"node:child_process":[">= 14.18 && < 15",">= 16"],"cluster":">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],"console":true,"node:console":[">= 14.18 && < 15",">= 16"],"constants":true,"node:constants":[">= 14.18 && < 15",">= 16"],"crypto":true,"node:crypto":[">= 14.18 && < 15",">= 16"],"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"node:dgram":[">= 14.18 && < 15",">= 16"],"diagnostics_channel":[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],"dns":true,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16","domain":">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],"events":true,"node:events":[">= 14.18 && < 15",">= 16"],"freelist":"< 6","fs":true,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],"_http_agent":">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],"_http_client":">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],"_http_common":">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],"_http_incoming":">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],"_http_outgoing":">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],"_http_server":">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],"http":true,"node:http":[">= 14.18 && < 15",">= 16"],"http2":">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],"https":true,"node:https":[">= 14.18 && < 15",">= 16"],"inspector":">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],"_linklist":"< 8","module":true,"node:module":[">= 14.18 && < 15",">= 16"],"net":true,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12","os":true,"node:os":[">= 14.18 && < 15",">= 16"],"path":true,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16","perf_hooks":">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],"process":">= 1","node:process":[">= 14.18 && < 15",">= 16"],"punycode":">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],"querystring":true,"node:querystring":[">= 14.18 && < 15",">= 16"],"readline":true,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17","repl":true,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],"_stream_transform":">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],"_stream_wrap":">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],"_stream_passthrough":">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],"_stream_readable":">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],"_stream_writable":">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],"stream":true,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5","string_decoder":true,"node:string_decoder":[">= 14.18 && < 15",">= 16"],"sys":[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3","node:test/mock_loader":">= 22.3","node:test":[">= 16.17 && < 17",">= 18"],"timers":true,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16","_tls_common":">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],"_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],"tls":true,"node:tls":[">= 14.18 && < 15",">= 16"],"trace_events":">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],"tty":true,"node:tty":[">= 14.18 && < 15",">= 16"],"url":true,"node:url":[">= 14.18 && < 15",">= 16"],"util":true,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8":">= 1","node:v8":[">= 14.18 && < 15",">= 16"],"vm":true,"node:vm":[">= 14.18 && < 15",">= 16"],"wasi":[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],"worker_threads":">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],"zlib":">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]}')},36667:e=>{"use strict";e.exports=JSON.parse('{"SN":{"O":"https://github.com/elastic/require-in-the-middle/issues"}}')},62035:e=>{"use strict";e.exports=JSON.parse('{"assert":true,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16","async_hooks":">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],"buffer_ieee754":">= 0.5 && < 0.9.7","buffer":true,"node:buffer":[">= 14.18 && < 15",">= 16"],"child_process":true,"node:child_process":[">= 14.18 && < 15",">= 16"],"cluster":">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],"console":true,"node:console":[">= 14.18 && < 15",">= 16"],"constants":true,"node:constants":[">= 14.18 && < 15",">= 16"],"crypto":true,"node:crypto":[">= 14.18 && < 15",">= 16"],"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"node:dgram":[">= 14.18 && < 15",">= 16"],"diagnostics_channel":[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],"dns":true,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16","domain":">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],"events":true,"node:events":[">= 14.18 && < 15",">= 16"],"freelist":"< 6","fs":true,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],"_http_agent":">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],"_http_client":">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],"_http_common":">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],"_http_incoming":">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],"_http_outgoing":">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],"_http_server":">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],"http":true,"node:http":[">= 14.18 && < 15",">= 16"],"http2":">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],"https":true,"node:https":[">= 14.18 && < 15",">= 16"],"inspector":">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],"_linklist":"< 8","module":true,"node:module":[">= 14.18 && < 15",">= 16"],"net":true,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12","os":true,"node:os":[">= 14.18 && < 15",">= 16"],"path":true,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16","perf_hooks":">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],"process":">= 1","node:process":[">= 14.18 && < 15",">= 16"],"punycode":">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],"querystring":true,"node:querystring":[">= 14.18 && < 15",">= 16"],"readline":true,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17","repl":true,"node:repl":[">= 14.18 && < 15",">= 16"],"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],"_stream_transform":">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],"_stream_wrap":">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],"_stream_passthrough":">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],"_stream_readable":">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],"_stream_writable":">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],"stream":true,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5","string_decoder":true,"node:string_decoder":[">= 14.18 && < 15",">= 16"],"sys":[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"node:test":[">= 16.17 && < 17",">= 18"],"timers":true,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16","_tls_common":">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],"_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],"tls":true,"node:tls":[">= 14.18 && < 15",">= 16"],"trace_events":">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],"tty":true,"node:tty":[">= 14.18 && < 15",">= 16"],"url":true,"node:url":[">= 14.18 && < 15",">= 16"],"util":true,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8":">= 1","node:v8":[">= 14.18 && < 15",">= 16"],"vm":true,"node:vm":[">= 14.18 && < 15",">= 16"],"wasi":[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],"worker_threads":">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],"zlib":">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]}')}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=r,s.c=o,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);s.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,s.d(o,i),o},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>e+".js",s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n={792:1},s.f.require=(e,t)=>{n[e]||(e=>{var t=e.modules,r=e.ids,o=e.runtime;for(var i in t)s.o(t,i)&&(s.m[i]=t[i]);o&&o(s);for(var a=0;a<r.length;a++)n[r[a]]=1})(require("./"+s.u(e)))},s(s.s=71803)})();