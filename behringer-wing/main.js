(()=>{var e={37:e=>{var t=1e3,n=60*t,r=60*n,s=24*r,i=7*s;function o(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*i;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=s?o(c,l,s,"day"):l>=r?o(c,l,r,"hour"):l>=n?o(c,l,n,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var i=Math.abs(e);return i>=s?Math.round(e/s)+"d":i>=r?Math.round(e/r)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},176:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.autoDetect=void 0;const o=i(n(1751)),a=n(6269),c=n(8238),l=n(1363),u=(0,o.default)("serialport/bindings-cpp");s(n(1470),t),s(n(6269),t),s(n(8238),t),s(n(1363),t),s(n(3841),t),t.autoDetect=function(){switch(process.platform){case"win32":return u("loading WindowsBinding"),l.WindowsBinding;case"darwin":return u("loading DarwinBinding"),a.DarwinBinding;default:return u("loading LinuxBinding"),c.LinuxBinding}}},181:e=>{"use strict";e.exports=require("buffer")},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,s,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,s),!0;case 5:return u.fn.call(u.context,t,r,s,i),!0;case 6:return u.fn.call(u.context,t,r,s,i,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,s);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||r&&a.context!==r||o(this,i);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||s&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n,r){let s=(255&e)<<16|(255&t)<<8|255&n;return r&&r>=0&&r<1&&(s+=16777216*Math.round(255*(1-r))),s},t.splitRgb=s,t.splitHsl=function(e){const t=s(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=s(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=s(e);return(0,r.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()},t.parseEscapeCharacters=function(e){return e.replaceAll("\\n","\n").replaceAll("\\r","\r").replaceAll("\\t","\t").replaceAll("\\f","\f").replaceAll("\\v","\v").replaceAll("\\b","\b").replaceAll("\\\\","\\").replaceAll("\\x00","\0").replaceAll("\\x01","").replaceAll("\\x02","").replaceAll("\\x03","")},t.substituteEscapeCharacters=function(e){return e.replaceAll("\n","\\n").replaceAll("\r","\\r").replaceAll("\t","\\t").replaceAll("\f","\\f").replaceAll("\v","\\v").replaceAll("\b","\\b").replaceAll("\\","\\\\").replaceAll("\0","\\x00").replaceAll("","\\x01").replaceAll("","\\x02").replaceAll("","\\x03")};const r=n(6284);function s(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,r.colord)(e).isValid()){const t=(0,r.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}},447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelimiterParser=void 0;const r=n(2203);class s extends r.Transform{includeDelimiter;delimiter;buffer;constructor({delimiter:e,includeDelimiter:t=!1,...n}){if(super(n),void 0===e)throw new TypeError('"delimiter" is not a bufferable object');if(0===e.length)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=t,this.delimiter=Buffer.from(e),this.buffer=Buffer.alloc(0)}_transform(e,t,n){let r,s=Buffer.concat([this.buffer,e]);for(;-1!==(r=s.indexOf(this.delimiter));)this.push(s.slice(0,r+(this.includeDelimiter?this.delimiter.length:0))),s=s.slice(r+this.delimiter.length);this.buffer=s,n()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.DelimiterParser=s},597:(e,t,n)=>{"use strict";const{kForOnEventAttribute:r,kListener:s}=n(2614),i=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),d=Symbol("kType"),h=Symbol("kWasClean");class p{constructor(e){this[u]=null,this[d]=e}get target(){return this[u]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[l]}get wasClean(){return this[h]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class b extends p{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}}Object.defineProperty(b.prototype,"data",{enumerable:!0});const g={addEventListener(e,t,n={}){for(const i of this.listeners(e))if(!n[r]&&i[s]===t&&!i[r])return;let i;if("message"===e)i=function(e,n){const r=new b("message",{data:n?e:e.toString()});r[u]=this,y(t,this,r)};else if("close"===e)i=function(e,n){const r=new f("close",{code:e,reason:n.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[u]=this,y(t,this,r)};else if("error"===e)i=function(e){const n=new m("error",{error:e,message:e.message});n[u]=this,y(t,this,n)};else{if("open"!==e)return;i=function(){const e=new p("open");e[u]=this,y(t,this,e)}}i[r]=!!n[r],i[s]=t,n.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const n of this.listeners(e))if(n[s]===t&&!n[r]){this.removeListener(e,n);break}}};function y(e,t,n){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,n):e.call(t,n)}e.exports={CloseEvent:f,ErrorEvent:m,Event:p,EventTarget:g,MessageEvent:b}},637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegexParser=void 0;const r=n(2203);class s extends r.Transform{regex;data;constructor({regex:e,...t}){const n={encoding:"utf8",...t};if(void 0===e)throw new TypeError('"options.regex" must be a regular expression pattern or object');e instanceof RegExp||(e=new RegExp(e.toString())),super(n),this.regex=e,this.data=""}_transform(e,t,n){const r=(this.data+e).split(this.regex);this.data=r.pop()||"",r.forEach(e=>{this.push(e)}),n()}_flush(e){this.push(this.data),this.data="",e()}}t.RegexParser=s},736:(e,t,n)=>{e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e,t){let n=0,r=0,s=-1,i=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(s=r,i=n,r++):(n++,r++);else{if(-1===s)return!1;r=s+1,i++,n=i}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of n)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const n of t.skips)if(s(e,n))return!1;for(const n of t.names)if(s(e,n))return!0;return!1},t.humanize=n(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},825:(e,t,n)=>{var r=r||n(7026),s=s||n(5170),i=i||n(4434).EventEmitter;!function(){"use strict";r.supportsSerial=!1,r.firePacketEvents=function(e,t,n,s){t.address?e.emit("message",t,n,s):r.fireBundleEvents(e,t,n,s)},r.fireBundleEvents=function(e,t,n,s){e.emit("bundle",t,n,s);for(var i=0;i<t.packets.length;i++){var o=t.packets[i];r.firePacketEvents(e,o,t.timeTag,s)}},r.fireClosedPortSendError=function(e,t){t=t||"Can't send packets on a closed osc.Port object. Please open (or reopen) this Port by calling open().",e.emit("error",t)},r.Port=function(e){this.options=e||{},this.on("data",this.decodeOSC.bind(this))};var t=r.Port.prototype=Object.create(i.prototype);t.constructor=r.Port,t.send=function(e){var t=Array.prototype.slice.call(arguments),n=this.encodeOSC(e),s=r.nativeBuffer(n);t[0]=s,this.sendRaw.apply(this,t)},t.encodeOSC=function(e){var t;e=e.buffer?e.buffer:e;try{t=r.writePacket(e,this.options)}catch(e){this.emit("error",e)}return t},t.decodeOSC=function(e,t){e=r.byteArray(e),this.emit("raw",e,t);try{var n=r.readPacket(e,this.options);this.emit("osc",n,t),r.firePacketEvents(this,n,void 0,t)}catch(e){this.emit("error",e)}},r.SLIPPort=function(e){var t=this,n=this.options=e||{};n.useSLIP=void 0===n.useSLIP||n.useSLIP,this.decoder=new s.Decoder({onMessage:this.decodeOSC.bind(this),onError:function(e){t.emit("error",e)}});var r=n.useSLIP?this.decodeSLIPData:this.decodeOSC;this.on("data",r.bind(this))},(t=r.SLIPPort.prototype=Object.create(r.Port.prototype)).constructor=r.SLIPPort,t.encodeOSC=function(e){var t;e=e.buffer?e.buffer:e;try{var n=r.writePacket(e,this.options);t=s.encode(n)}catch(e){this.emit("error",e)}return t},t.decodeSLIPData=function(e,t){this.decoder.decode(e,t)},r.relay=function(e,t,n,r,s,i){n=n||"message",r=r||"send",s=s||function(){},i=i?[null].concat(i):[];var o=function(e){i[0]=e,e=s(e),t[r].apply(t,i)};return e.on(n,o),{eventName:n,listener:o}},r.relayPorts=function(e,t,n){var s=n.raw?"raw":"osc",i=n.raw?"sendRaw":"send";return r.relay(e,t,s,i,n.transform)},r.stopRelaying=function(e,t){e.removeListener(t.eventName,t.listener)},r.Relay=function(e,t,n){(this.options=n||{}).raw=!1,this.port1=e,this.port2=t,this.listen()},(t=r.Relay.prototype=Object.create(i.prototype)).constructor=r.Relay,t.open=function(){this.port1.open(),this.port2.open()},t.listen=function(){this.port1Spec&&this.port2Spec&&this.close(),this.port1Spec=r.relayPorts(this.port1,this.port2,this.options),this.port2Spec=r.relayPorts(this.port2,this.port1,this.options);var e=this.close.bind(this);this.port1.on("close",e),this.port2.on("close",e)},t.close=function(){r.stopRelaying(this.port1,this.port1Spec),r.stopRelaying(this.port2,this.port2Spec),this.emit("close",this.port1,this.port2)},e.exports&&(e.exports=r)}()},857:e=>{"use strict";e.exports=require("os")},914:(e,t,n)=>{"use strict";const{Duplex:r}=n(2203),{randomFillSync:s}=n(6982),i=n(2971),{EMPTY_BUFFER:o,kWebSocket:a,NOOP:c}=n(2614),{isBlob:l,isValidStatusCode:u}=n(5880),{mask:d,toBuffer:h}=n(3338),p=Symbol("kByteLength"),f=Buffer.alloc(4),m=8192;let b,g=m;class y{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let n,r,i=!1,o=2,a=!1;t.mask&&(n=t.maskBuffer||f,t.generateMask?t.generateMask(n):(g===m&&(void 0===b&&(b=Buffer.alloc(m)),s(b,0,m),g=0),n[0]=b[g++],n[1]=b[g++],n[2]=b[g++],n[3]=b[g++]),a=0===(n[0]|n[1]|n[2]|n[3]),o=6),"string"==typeof e?r=t.mask&&!a||void 0===t[p]?(e=Buffer.from(e)).length:t[p]:(r=e.length,i=t.mask&&t.readOnly&&!a);let c=r;r>=65536?(o+=8,c=127):r>125&&(o+=2,c=126);const l=Buffer.allocUnsafe(i?r+o:o);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(r,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(r,4,6)),t.mask?(l[1]|=128,l[o-4]=n[0],l[o-3]=n[1],l[o-2]=n[2],l[o-1]=n[3],a?[l,e]:i?(d(e,n,l,o,r),[l]):(d(e,n,e,0,r),[l,e])):[l,e]}close(e,t,n,r){let s;if(void 0===e)s=o;else{if("number"!=typeof e||!u(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+n),s.writeUInt16BE(e,0),"string"==typeof t?s.write(t,2):s.set(t,2)}else s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0)}const i={[p]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,s,!1,i,r]):this.sendFrame(y.frame(s,i),r)}ping(e,t,n){let r,s;if("string"==typeof e?(r=Buffer.byteLength(e),s=!1):l(e)?(r=e.size,s=!1):(r=(e=h(e)).length,s=h.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[p]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,i,n]):this.getBlobData(e,!1,i,n):0!==this._state?this.enqueue([this.dispatch,e,!1,i,n]):this.sendFrame(y.frame(e,i),n)}pong(e,t,n){let r,s;if("string"==typeof e?(r=Buffer.byteLength(e),s=!1):l(e)?(r=e.size,s=!1):(r=(e=h(e)).length,s=h.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[p]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,i,n]):this.getBlobData(e,!1,i,n):0!==this._state?this.enqueue([this.dispatch,e,!1,i,n]):this.sendFrame(y.frame(e,i),n)}send(e,t,n){const r=this._extensions[i.extensionName];let s,o,a=t.binary?2:1,c=t.compress;"string"==typeof e?(s=Buffer.byteLength(e),o=!1):l(e)?(s=e.size,o=!1):(s=(e=h(e)).length,o=h.readOnly),this._firstFragment?(this._firstFragment=!1,c&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=s>=r._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const u={[p]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:o,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,n]):this.getBlobData(e,this._compress,u,n):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,n]):this.dispatch(e,this._compress,u,n)}getBlobData(e,t,n,r){this._bufferedBytes+=n[p],this._state=2,e.arrayBuffer().then(e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(v,this,e,r)}this._bufferedBytes-=n[p];const s=h(e);t?this.dispatch(s,t,n,r):(this._state=0,this.sendFrame(y.frame(s,n),r),this.dequeue())}).catch(e=>{process.nextTick(S,this,e,r)})}dispatch(e,t,n,r){if(!t)return void this.sendFrame(y.frame(e,n),r);const s=this._extensions[i.extensionName];this._bufferedBytes+=n[p],this._state=1,s.compress(e,n.fin,(e,t)=>{this._socket.destroyed?v(this,new Error("The socket was closed while data was being compressed"),r):(this._bufferedBytes-=n[p],this._state=0,n.readOnly=!1,this.sendFrame(y.frame(t,n),r),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][p],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][p],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function v(e,t,n){"function"==typeof n&&n(t);for(let n=0;n<e._queue.length;n++){const r=e._queue[n],s=r[r.length-1];"function"==typeof s&&s(t)}}function S(e,t,n){v(e,t,n),e.onerror(t)}e.exports=y},1060:(e,t,n)=>{"use strict";const r=n(4434),s=n(5692),i=n(8611),o=n(9278),a=n(4756),{randomBytes:c,createHash:l}=n(6982),{Duplex:u,Readable:d}=n(2203),{URL:h}=n(7016),p=n(2971),f=n(6286),m=n(914),{isBlob:b}=n(5880),{BINARY_TYPES:g,EMPTY_BUFFER:y,GUID:v,kForOnEventAttribute:S,kListener:w,kStatusCode:_,kWebSocket:C,NOOP:k}=n(2614),{EventTarget:{addEventListener:E,removeEventListener:I}}=n(597),{format:$,parse:x}=n(5926),{toBuffer:O}=n(3338),P=Symbol("kAborted"),N=[8,13],M=["CONNECTING","OPEN","CLOSING","CLOSED"],T=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class A extends r{constructor(e,t,n){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=A.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(n=t,t=[]):t=[t]),D(this,e,t,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const r=new f({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),s=new m(e,this._extensions,n.generateMask);this._receiver=r,this._sender=s,this._socket=e,r[C]=this,s[C]=this,e[C]=this,r.on("conclude",W),r.on("drain",U),r.on("error",V),r.on("message",G),r.on("ping",H),r.on("pong",z),s.onerror=J,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",X),e.on("data",K),e.on("end",Z),e.on("error",ee),this._readyState=A.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=A.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=A.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return void B(this,this._req,e)}this.readyState!==A.CLOSING?(this._readyState=A.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Y(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==A.CONNECTING&&this.readyState!==A.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,n)):j(this,e,n)}pong(e,t,n){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,n)):j(this,e,n)}resume(){this.readyState!==A.CONNECTING&&this.readyState!==A.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==A.OPEN)return void j(this,e,n);const r={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(r.compress=!1),this._sender.send(e||y,r,n)}terminate(){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return void B(this,this._req,e)}this._socket&&(this._readyState=A.CLOSING,this._socket.destroy())}}}function D(e,t,n,r){const o={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:N[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=o.autoPong,!N.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${N.join(", ")})`);let a;if(t instanceof h)a=t;else try{a=new h(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const u="wss:"===a.protocol,d="ws+unix:"===a.protocol;let f;if("ws:"===a.protocol||u||d?d&&!a.pathname?f="The URL's pathname is empty":a.hash&&(f="The URL contains a fragment identifier"):f='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',f){const t=new SyntaxError(f);if(0===e._redirects)throw t;return void L(e,t)}const m=u?443:80,b=c(16).toString("base64"),g=u?s.request:i.request,y=new Set;let S,w;if(o.createConnection=o.createConnection||(u?R:F),o.defaultPort=o.defaultPort||m,o.port=a.port||m,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(S=new p(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=$({[p.extensionName]:S.offer()})),n.length){for(const e of n){if("string"!=typeof e||!T.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}o.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),d){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}if(o.followRedirects){if(0===e._redirects){e._originalIpc=d,e._originalSecure=u,e._originalHostOrSocketPath=d?o.socketPath:a.host;const t=r&&r.headers;if(r={...r,headers:{}},t)for(const[e,n]of Object.entries(t))r.headers[e.toLowerCase()]=n}else if(0===e.listenerCount("redirect")){const t=d?!!e._originalIpc&&o.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete o.headers.authorization,delete o.headers.cookie,t||delete o.headers.host,o.auth=void 0)}o.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")),w=e._req=g(o),e._redirects&&e.emit("redirect",e.url,w)}else w=e._req=g(o);o.timeout&&w.on("timeout",()=>{B(e,w,"Opening handshake has timed out")}),w.on("error",t=>{null===w||w[P]||(w=e._req=null,L(e,t))}),w.on("response",s=>{const i=s.headers.location,a=s.statusCode;if(i&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void B(e,w,"Maximum redirects exceeded");let s;w.abort();try{s=new h(i,t)}catch(t){const n=new SyntaxError(`Invalid URL: ${i}`);return void L(e,n)}D(e,s,n,r)}else e.emit("unexpected-response",w,s)||B(e,w,`Unexpected server response: ${s.statusCode}`)}),w.on("upgrade",(t,n,r)=>{if(e.emit("upgrade",t),e.readyState!==A.CONNECTING)return;w=e._req=null;const s=t.headers.upgrade;if(void 0===s||"websocket"!==s.toLowerCase())return void B(e,n,"Invalid Upgrade header");const i=l("sha1").update(b+v).digest("base64");if(t.headers["sec-websocket-accept"]!==i)return void B(e,n,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?y.size?y.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void B(e,n,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!S)return void B(e,n,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=x(u)}catch(t){return void B(e,n,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(1!==r.length||r[0]!==p.extensionName)return void B(e,n,"Server indicated an extension that was not requested");try{S.accept(t[p.extensionName])}catch(t){return void B(e,n,"Invalid Sec-WebSocket-Extensions header")}e._extensions[p.extensionName]=S}e.setSocket(n,r,{allowSynchronousEvents:o.allowSynchronousEvents,generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}),o.finishRequest?o.finishRequest(w,e):w.end()}function L(e,t){e._readyState=A.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function F(e){return e.path=e.socketPath,o.connect(e)}function R(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function B(e,t,n){e._readyState=A.CLOSING;const r=new Error(n);Error.captureStackTrace(r,B),t.setHeader?(t[P]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(L,e,r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function j(e,t,n){if(t){const n=b(t)?t.size:O(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${M[e.readyState]})`);process.nextTick(n,t)}}function W(e,t){const n=this[C];n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,void 0!==n._socket[C]&&(n._socket.removeListener("data",K),process.nextTick(Q,n._socket),1005===e?n.close():n.close(e,t))}function U(){const e=this[C];e.isPaused||e._socket.resume()}function V(e){const t=this[C];void 0!==t._socket[C]&&(t._socket.removeListener("data",K),process.nextTick(Q,t._socket),t.close(e[_])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function q(){this[C].emitClose()}function G(e,t){this[C].emit("message",e,t)}function H(e){const t=this[C];t._autoPong&&t.pong(e,!this._isServer,k),t.emit("ping",e)}function z(e){this[C].emit("pong",e)}function Q(e){e.resume()}function J(e){const t=this[C];t.readyState!==A.CLOSED&&(t.readyState===A.OPEN&&(t._readyState=A.CLOSING,Y(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function Y(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function X(){const e=this[C];let t;this.removeListener("close",X),this.removeListener("data",K),this.removeListener("end",Z),e._readyState=A.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[C]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",q),e._receiver.on("finish",q))}function K(e){this[C]._receiver.write(e)||this.pause()}function Z(){const e=this[C];e._readyState=A.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[C];this.removeListener("error",ee),this.on("error",k),e&&(e._readyState=A.CLOSING,this.destroy())}Object.defineProperty(A,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(A.prototype,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(A,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(A.prototype,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(A,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(A.prototype,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(A,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),Object.defineProperty(A.prototype,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(A.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(A.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[S])return t[w];return null},set(t){for(const t of this.listeners(e))if(t[S]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[S]:!0})}})}),A.prototype.addEventListener=E,A.prototype.removeEventListener=I,e.exports=A},1078:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unixWrite=void 0;const s=n(9896),i=r(n(1751)),o=n(9023),a=(0,i.default)("serialport/bindings-cpp/unixWrite"),c=(0,o.promisify)(s.write);t.unixWrite=async({binding:e,buffer:n,offset:r=0,fsWriteAsync:s=c})=>{const i=n.length-r;if(a("Starting write",n.length,"bytes offset",r,"bytesToWrite",i),!e.isOpen||!e.fd)throw new Error("Port is not open");try{const{bytesWritten:o}=await s(e.fd,n,r,i);if(a("write returned: wrote",o,"bytes"),o+r<n.length){if(!e.isOpen)throw new Error("Port is not open");return(0,t.unixWrite)({binding:e,buffer:n,offset:o+r,fsWriteAsync:s})}a("Finished writing",o+r,"bytes")}catch(i){if(a("write errored",i),"EAGAIN"===i.code||"EWOULDBLOCK"===i.code||"EINTR"===i.code){if(!e.isOpen)throw new Error("Port is not open");return a("waiting for writable because of code:",i.code),await(e=>new Promise((t,n)=>{e.poller.once("writable",e=>e?n(e):t())}))(e),(0,t.unixWrite)({binding:e,buffer:n,offset:r,fsWriteAsync:s})}throw("EBADF"===i.code||"ENXIO"===i.code||"UNKNOWN"===i.code||-1===i.errno)&&(i.disconnect=!0,a("disconnecting",i)),a("error",i),i}}},1118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const r=n(1635).__importDefault(n(228)),s=n(2203),i=n(8895);class o extends r.default{#e;#t;#n;get isConnected(){return this.#e.isConnected}get isConnecting(){return this.#e.isConnecting}get isDestroyed(){return this.#e.isDestroyed}constructor(e,t,n){super(),this.#e=new i.TCPHelper(e,t,n),this.#t=new a,this.#e._socket.pipe(this.#t),this.#e.on("connect",()=>this.emit("connect")),this.#e.on("end",()=>this.emit("end")),this.#e.on("error",e=>this.emit("error",e)),this.#e.on("status_change",(e,t)=>this.emit("status_change",e,t)),this.#t.on("iac",(e,t)=>this.emit("iac",e,t)),this.#t.on("sb",e=>this.emit("sb",e)),this.#t.on("data",e=>this.emit("data",e)),this.#t.on("drain",()=>this.emit("drain")),this.#n=setTimeout(()=>{this.#n=void 0,this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)},5e3)}connect(){return this.#e.connect()}async send(e){return this.#e.send(e)}destroy(){this.#e.destroy(),void 0!==this.#n&&(clearTimeout(this.#n),this.#n=void 0),this.#t.removeAllListeners(),this.#t.destroy()}}t.TelnetHelper=o;class a extends s.Transform{#r;#s;#i;constructor(e){super(e),this.#r=Buffer.alloc(0),this.#s=Buffer.alloc(0),this.#i=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#o(e[t]);const r=this.#a();r.length&&this.push(r),n()}#o(e){if(0===this.#i){if(255===e)return void(this.#i=255);this.#r=Buffer.concat([this.#r,Buffer.from([e])])}else if(255===this.#i)switch(e){case 250:case 251:case 252:case 253:case 254:this.#i=e;break;default:this.#i=0}else{if(this.#i>=251&&this.#i<=254){let t;switch(this.#i){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#i=0)}if(250===this.#i){if(240===e)return this.emit("sb",this.#s),this.#i=0,void(this.#s=Buffer.alloc(0));this.#s=Buffer.concat([this.#s,Buffer.from([e])])}}}#a(){const e=this.#r;return this.#r=Buffer.alloc(0),e}}},1363:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsPortBinding=t.WindowsBinding=void 0;const s=r(n(1751)),i=n(176),o=n(6237),a=n(5037),c=(0,s.default)("serialport/bindings-cpp");t.WindowsBinding={list:async()=>(await(0,o.asyncList)()).map(e=>{if(e.pnpId&&!e.serialNumber){const t=(0,a.serialNumParser)(e.pnpId);if(t)return Object.assign(Object.assign({},e),{serialNumber:t})}return e}),async open(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');c("open");const t=Object.assign({dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,rtsMode:"handshake",xon:!1,xoff:!1,xany:!1,hupcl:!0},e),n=await(0,o.asyncOpen)(t.path,t);return new l(n,t)}};class l{constructor(e,t){this.fd=e,this.openOptions=t,this.writeOperation=null}get isOpen(){return null!==this.fd}async close(){if(c("close"),!this.isOpen)throw new Error("Port is not open");const e=this.fd;this.fd=null,await(0,o.asyncClose)(e)}async read(e,t,n){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof n||isNaN(n))throw new TypeError(`"length" is not an integer got "${isNaN(n)?"NaN":typeof n}"`);if(c("read"),e.length<t+n)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");try{return{bytesRead:await(0,o.asyncRead)(this.fd,e,t,n),buffer:e}}catch(e){if(!this.isOpen)throw new i.BindingsError(e.message,{canceled:!0});throw e}}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(c("write",e.length,"bytes"),!this.isOpen)throw c("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{0!==e.length&&(await(0,o.asyncWrite)(this.fd,e),this.writeOperation=null)})(),this.writeOperation}async update(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(c("update"),!this.isOpen)throw new Error("Port is not open");await(0,o.asyncUpdate)(this.fd,e)}async set(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(c("set",e),!this.isOpen)throw new Error("Port is not open");await(0,o.asyncSet)(this.fd,e)}async get(){if(c("get"),!this.isOpen)throw new Error("Port is not open");return(0,o.asyncGet)(this.fd)}async getBaudRate(){if(c("getBaudRate"),!this.isOpen)throw new Error("Port is not open");return(0,o.asyncGetBaudRate)(this.fd)}async flush(){if(c("flush"),!this.isOpen)throw new Error("Port is not open");await(0,o.asyncFlush)(this.fd)}async drain(){if(c("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,o.asyncDrain)(this.fd)}}t.WindowsPortBinding=l},1381:(e,t,n)=>{var r=n(9896),s=n(6928),i=n(857),o=require,a=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,l=process.versions.modules,u=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",d=process.env.npm_config_arch||i.arch(),h=process.env.npm_config_platform||i.platform(),p=process.env.LIBC||(function(e){return"linux"===e&&r.existsSync("/etc/alpine-release")}(h)?"musl":"glibc"),f=process.env.ARM_VERSION||("arm64"===d?"8":a.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function b(e){return o(b.resolve(e))}function g(e){try{return r.readdirSync(e)}catch(e){return[]}}function y(e,t){var n=g(e).filter(t);return n[0]&&s.join(e,n[0])}function v(e){return/\.node$/.test(e)}function S(e){var t=e.split("-");if(2===t.length){var n=t[0],r=t[1].split("+");if(n&&r.length&&r.every(Boolean))return{name:e,platform:n,architectures:r}}}function w(e,t){return function(n){return null!=n&&n.platform===e&&n.architectures.includes(t)}}function _(e,t){return e.architectures.length-t.architectures.length}function C(e){var t=e.split("."),n={file:e,specificity:0};if("node"===t.pop()){for(var r=0;r<t.length;r++){var s=t[r];if("node"===s||"electron"===s||"node-webkit"===s)n.runtime=s;else if("napi"===s)n.napi=!0;else if("abi"===s.slice(0,3))n.abi=s.slice(3);else if("uv"===s.slice(0,2))n.uv=s.slice(2);else if("armv"===s.slice(0,4))n.armv=s.slice(4);else{if("glibc"!==s&&"musl"!==s)continue;n.libc=s}n.specificity++}return n}}function k(e,t){return function(n){return!(null==n||n.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(n)||n.abi!==t&&!n.napi||n.uv&&n.uv!==m||n.armv&&n.armv!==f||n.libc&&n.libc!==p)}}function E(e){return function(t,n){return t.runtime!==n.runtime?t.runtime===e?-1:1:t.abi!==n.abi?t.abi?-1:1:t.specificity!==n.specificity?t.specificity>n.specificity?-1:1:0}}e.exports=b,b.resolve=b.path=function(e){e=s.resolve(e||".");try{var t=o(s.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var n=y(s.join(e,"build/Release"),v);if(n)return n;var r=y(s.join(e,"build/Debug"),v);if(r)return r}var i=I(e);if(i)return i;var a=I(s.dirname(process.execPath));if(a)return a;var b=["platform="+h,"arch="+d,"runtime="+u,"abi="+l,"uv="+m,f?"armv="+f:"","libc="+p,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+b+"\n    loaded from: "+e+"\n");function I(e){var t=g(s.join(e,"prebuilds")).map(S).filter(w(h,d)).sort(_)[0];if(t){var n=s.join(e,"prebuilds",t.name),r=g(n).map(C).filter(k(u,l)).sort(E(u))[0];return r?s.join(n,r.file):void 0}}},b.parseTags=C,b.matchTags=k,b.compareTags=E,b.parseTuple=S,b.matchTuple=w,b.compareTuples=_},1400:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,function(e){e.Ok="ok",e.Connecting="connecting",e.Disconnected="disconnected",e.ConnectionFailure="connection_failure",e.BadConfig="bad_config",e.UnknownError="unknown_error",e.UnknownWarning="unknown_warning",e.AuthenticationFailure="authentication_failure"}(n||(t.InstanceStatus=n={})),function(e){e.IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",e.BOOLEAN="/^(true|false|0|1)$/i",e.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",e.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",e.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",e.FLOAT="/^([0-9]*\\.)?[0-9]+$/",e.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",e.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",e.NUMBER="/^\\d+$/",e.SIGNED_NUMBER="/^[+-]?\\d+$/",e.SOMETHING="/^.+$/",e.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"}(r||(t.Regex=r={}))},1470:()=>{},1635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>D,__assign:()=>i,__asyncDelegator:()=>E,__asyncGenerator:()=>k,__asyncValues:()=>I,__await:()=>C,__awaiter:()=>f,__classPrivateFieldGet:()=>M,__classPrivateFieldIn:()=>A,__classPrivateFieldSet:()=>T,__createBinding:()=>b,__decorate:()=>a,__disposeResources:()=>F,__esDecorate:()=>l,__exportStar:()=>g,__extends:()=>s,__generator:()=>m,__importDefault:()=>N,__importStar:()=>P,__makeTemplateObject:()=>$,__metadata:()=>p,__param:()=>c,__propKey:()=>d,__read:()=>v,__rest:()=>o,__rewriteRelativeImportExtension:()=>R,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>S,__spreadArray:()=>_,__spreadArrays:()=>w,__values:()=>y,default:()=>B});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function a(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t,n,r,s,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,p=n.length-1;p>=0;p--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var b=(0,n[p])("accessor"===c?{get:d.get,set:d.set}:d[l],f);if("accessor"===c){if(void 0===b)continue;if(null===b||"object"!=typeof b)throw new TypeError("Object expected");(a=o(b.get))&&(d.get=a),(a=o(b.set))&&(d.set=a),(a=o(b.init))&&s.unshift(a)}else(a=o(b))&&("field"===c?s.unshift(a):d[l]=a)}u&&Object.defineProperty(u,r.name,d),h=!0}function u(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})}function m(e,t){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var b=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function g(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||b(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function S(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function _(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function C(e){return this instanceof C?(this.v=e,this):new C(e)}function k(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,l)}}),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){s[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=s[e](t)).value instanceof C?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function E(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:C(e[r](t)),done:!1}:s?s(t):t}:s}}function I(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,s){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,s,(t=e[n](t)).done,t.value)})}}}function $(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var x=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},O=function(e){return O=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},O(e)};function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=O(e),r=0;r<n.length;r++)"default"!==n[r]&&b(t,e,n[r]);return x(t,e),t}function N(e){return e&&e.__esModule?e:{default:e}}function M(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function T(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}function A(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function D(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function F(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function s(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,function(e){return t(e),s()})}else r|=1}catch(e){t(e)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function R(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,s,i){return n?t?".jsx":".js":!r||s&&i?r+s+"."+i.toLowerCase()+"js":e}):e}const B={__extends:s,__assign:i,__rest:o,__decorate:a,__param:c,__esDecorate:l,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:m,__createBinding:b,__exportStar:g,__values:y,__read:v,__spread:S,__spreadArrays:w,__spreadArray:_,__await:C,__asyncGenerator:k,__asyncDelegator:E,__asyncValues:I,__makeTemplateObject:$,__importStar:P,__importDefault:N,__classPrivateFieldGet:M,__classPrivateFieldSet:T,__classPrivateFieldIn:A,__addDisposableResource:D,__disposeResources:F,__rewriteRelativeImportExtension:R}},1649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const r=n(1635),s=n(360),i=r.__importDefault(n(8965)),o=n(2593),a=n(1706),c=n(8039),l=n(4044),u=n(4289),d=n(2365);t.InstanceBase=class{#c;#l;id;#u=new i.default({concurrency:1});#d=!1;#h=!1;#p={};#f={};#m;#b;#g=new Map;#y=new Map;#v=new Map;#S;#w;get instanceOptions(){return this.#S}get label(){return this.#w}constructor(e){if(!(0,o.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.createSharedUdpSocket=this.createSharedUdpSocket.bind(this),this.#S={disableVariableValidation:!1},this.#c=new l.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),upgradeActionsAndFeedbacks:this._handleUpgradeActionsAndFeedbacks.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:async()=>{},sharedUdpSocketMessage:this._handleSharedUdpSocketMessage.bind(this),sharedUdpSocketError:this._handleSharedUdpSocketError.bind(this)},e=>{process.send(e)},5e3),process.on("message",e=>{this.#c.receivedMessage(e)});const t=async e=>e.text.includes("$(")?this.#c.sendWithCb("parseVariablesInString",e):{text:e.text,variableIds:void 0};this.#m=new u.ActionManager(t,e=>this.#c.sendWithNoCb("setActionDefinitions",e),e=>this.#c.sendWithNoCb("setCustomVariable",e),this.log.bind(this)),this.#b=new c.FeedbackManager(t,e=>this.#c.sendWithNoCb("updateFeedbackValues",e),e=>this.#c.sendWithNoCb("setFeedbackDefinitions",e),this.log.bind(this)),this.#l=e.upgradeScripts,this.id=e.id,this.#w=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#u.add(async()=>{if(this.#d)throw new Error("Already initialized");if(this.#p=e.config,this.#f=e.secrets,this.#w=e.label,e.isFirstInit){const t={},n={},r=this.getConfigFields();for(const e of r)"default"in e&&(e.type.startsWith("secret")?n[e.id]=e.default:t[e.id]=e.default);this.#p=t,this.#f=n,this.saveConfig(this.#p,this.#f),e.lastUpgradeIndex=this.#l.length-1}const{updatedConfig:t,updatedSecrets:n}=(0,a.runThroughUpgradeScripts)([],[],e.lastUpgradeIndex,this.#l,this.#p,this.#f,!1);this.#p=t??this.#p,this.#f=n??this.#f;try{await this.init(this.#p,!!e.isFirstInit,this.#f),this.#d=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}return{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#l.length-1,updatedConfig:this.#p,updatedSecrets:this.#f}})}async _handleDestroy(){await this.#u.add(async()=>{if(!this.#d)throw new Error("Not initialized");await this.destroy(),this.#d=!1})}async _handleConfigUpdateAndLabel(e){await this.#u.add(async()=>{if(!this.#d)throw new Error("Not initialized");this.#w=e.label,this.#p=e.config,this.#f=e.secrets,await this.configUpdated(this.#p,this.#f)})}async _handleExecuteAction(e){return this.#m.handleExecuteAction(e)}async _handleUpdateFeedbacks(e){this.#b.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e){this.#m.handleUpdateActions(e.actions)}async _handleUpgradeActionsAndFeedbacks(e){return(0,a.runThroughUpgradeScripts)(e.actions,e.feedbacks,null,this.#l,this.#p,this.#f,!0)}async _handleGetConfigFields(e){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#m.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#b.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#h)return}else if(!this.#h)return;if(!this.handleStartStopRecordActions)throw this.#h=!1,new Error("Recording actions is not supported by this module!");this.#h=e.recording,this.handleStartStopRecordActions(this.#h)}async _handleSharedUdpSocketMessage(e){for(const t of this.#g.values())t.handleId===e.handleId&&t.receiveSocketMessage(e)}async _handleSharedUdpSocketError(e){for(const t of this.#g.values())t.handleId===e.handleId&&t.receiveSocketError(e.error)}saveConfig(e,t){e&&(this.#p=e),t&&(this.#f=t),this.#c.sendWithNoCb("saveConfig",{config:e,secrets:t})}setActionDefinitions(e){this.#m.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#b.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,r]of Object.entries(e))r&&t.push({...r,id:n});this.#c.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],n=[];this.#y.clear();for(const r of e)t.push({id:r.variableId,name:r.name}),this.#y.set(r.variableId,r),this.#v.has(r.variableId)||(this.#v.set(r.variableId,""),n.push({id:r.variableId,value:""}));if(!this.#S.disableVariableValidation){const e=new Set(this.#y.keys());for(const t of this.#v.keys())e.has(t)||(this.#v.delete(t),n.push({id:t,value:void 0}))}this.#c.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:n})}setVariableValues(e){const t=[];for(const[n,r]of Object.entries(e))this.#S.disableVariableValidation?(void 0===r?this.#v.delete(n):this.#v.set(n,r),t.push({id:n,value:r})):this.#y.has(n)?(this.#v.set(n,r??""),t.push({id:n,value:r??""})):t.push({id:n,value:void 0});this.#c.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#v.get(e)}async parseVariablesInString(e){const t=this.#b.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),e.includes("$(")?(await this.#c.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text:e}checkFeedbacks(...e){this.#b.checkFeedbacks(e)}checkFeedbacksById(...e){this.#b.checkFeedbacksById(e)}subscribeActions(...e){this.#m.subscribeActions(e)}unsubscribeActions(...e){this.#m.unsubscribeActions(e)}subscribeFeedbacks(...e){this.#b.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#b.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#h)throw new Error("Not currently recording actions");this.#c.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options,delay:e.delay})}oscSend(e,t,n,r){this.#c.sendWithNoCb("send-osc",(0,s.literal)({host:e,port:t,path:n,args:r}))}updateStatus(e,t){this.#c.sendWithNoCb("set-status",(0,s.literal)({status:e,message:t??null}))}log(e,t){this.#c.sendWithNoCb("log-message",(0,s.literal)({level:e,message:t}))}createSharedUdpSocket(e,t){const n="string"==typeof e?{type:e}:e,r=new d.SharedUdpSocketImpl(this.#c,this.#g,n);return t&&r.on("message",t),r}}},1693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PacketLengthParser=void 0;const r=n(2203);class s extends r.Transform{buffer;start;opts;constructor(e={}){super(e);const{delimiter:t=170,packetOverhead:n=2,lengthBytes:r=1,lengthOffset:s=1,maxLen:i=255}=e;this.opts={delimiter:t,packetOverhead:n,lengthBytes:r,lengthOffset:s,maxLen:i},this.buffer=Buffer.alloc(0),this.start=!1}_transform(e,t,n){for(let t=0;t<e.length;t++){const n=e[t];if(n===this.opts.delimiter&&(this.start=!0),!0===this.start&&(this.buffer=Buffer.concat([this.buffer,Buffer.from([n])]),this.buffer.length>=this.opts.lengthOffset+this.opts.lengthBytes)){const e=this.buffer.readUIntLE(this.opts.lengthOffset,this.opts.lengthBytes);(this.buffer.length==e+this.opts.packetOverhead||e>this.opts.maxLen)&&(this.push(this.buffer),this.buffer=Buffer.alloc(0),this.start=!1)}}n()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.PacketLengthParser=s},1706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=function(e,t,n,i,o,a,c){const l=new Map,u=e=>{let t=l.get(e);return t||(t={actions:[],feedbacks:[],config:!1},l.set(e,t)),t};for(const t of e){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&u(e).actions.push(t.id)}for(const e of t){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&u(t).feedbacks.push(e.id)}if(!c)for(let e=n??-1;e<i.length;e++)u(e).config=!0;const d=Object.fromEntries(e.map(e=>[e.id,e])),h=Object.fromEntries(t.map(e=>[e.id,e])),p={},f={};let m,b;if(l.size>0){const e=Array.from(l.keys()).sort(),t=Math.min(...e,n??-1)+1,c=[],u=[],g=i.length;for(let e=t;e<g;e++){const t=l.get(e-1);t&&(c.push(...t.actions),u.push(...t.feedbacks));const n=!!t?.config;if(!n&&0===c.length&&0===u.length)continue;const g=m??o,y=b??a,v=(0,i[e])({currentConfig:s(g)},{config:n?g:null,secrets:n?y:null,actions:c.map(e=>{const t=d[e];if(t)return(0,r.literal)({id:t.id,controlId:t.controlId,actionId:t.actionId,options:void 0!==t.options?s(t.options):{}})}).filter(e=>!!e),feedbacks:u.map(e=>{const t=h[e];if(t)return(0,r.literal)({id:t.id,controlId:t.controlId,feedbackId:t.feedbackId,options:void 0!==t.options?s(t.options):{},isInverted:t.isInverted})}).filter(e=>!!e)});n&&v.updatedConfig&&(m=v.updatedConfig),n&&v.updatedSecrets&&(b=v.updatedSecrets);for(const t of v.updatedActions)if(t){const n=d[t.id];n&&(n.actionId=t.actionId,n.options=t.options,n.upgradeIndex=e,f[t.id]=n)}for(const t of v.updatedFeedbacks)if(t){const n=h[t.id];n&&(n.feedbackId=t.feedbackId,n.options=t.options,n.upgradeIndex=e,p[t.id]={...n,style:p[t.id]?.style??t.style,isInverted:t.isInverted??!1})}}for(const[e,t]of Object.entries(d))f[e]||"number"!=typeof t?.upgradeIndex||(f[e]=t);for(const[e,t]of Object.entries(h))p[e]||"number"!=typeof t?.upgradeIndex||(p[e]=t)}return{updatedActions:Object.values(f),updatedFeedbacks:Object.values(p),updatedConfig:m,updatedSecrets:b,latestUpgradeIndex:i.length-1}};const r=n(360);function s(e){return JSON.parse(JSON.stringify(e))}},1722:(e,t,n)=>{"use strict";const r=n(4434),s=n(8611),{Duplex:i}=n(2203),{createHash:o}=n(6982),a=n(5926),c=n(2971),l=n(8237),u=n(1060),{GUID:d,kWebSocket:h}=n(2614),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function m(){this.destroy()}function b(e,t,n,r){n=n||s.STATUS_CODES[t],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...r},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${s.STATUS_CODES[t]}\r\n`+Object.keys(r).map(e=>`${e}: ${r[e]}`).join("\r\n")+"\r\n\r\n"+n)}function g(e,t,n,r,s){if(e.listenerCount("wsClientError")){const r=new Error(s);Error.captureStackTrace(r,g),e.emit("wsClientError",r,n,t)}else b(n,r,s)}e.exports=class extends r{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=s.createServer((e,t)=>{const n=s.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,n,r)=>{this.handleUpgrade(t,n,r,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",()=>{e(new Error("The server is not running"))}),void process.nextTick(f,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{f(this)})}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,r){t.on("error",m);const s=e.headers["sec-websocket-key"],i=e.headers.upgrade,o=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void g(this,e,t,405,"Invalid HTTP method");if(void 0===i||"websocket"!==i.toLowerCase())return void g(this,e,t,400,"Invalid Upgrade header");if(void 0===s||!p.test(s))return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==o&&13!==o)return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void b(t,400);const u=e.headers["sec-websocket-protocol"];let d=new Set;if(void 0!==u)try{d=l.parse(u)}catch(n){return void g(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==h){const n=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(h);e[c.extensionName]&&(n.accept(e[c.extensionName]),f[c.extensionName]=n)}catch(n){return void g(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const i={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,(i,o,a,c)=>{if(!i)return b(t,o||401,a,c);this.completeUpgrade(f,s,d,e,t,n,r)});if(!this.options.verifyClient(i))return b(t,401)}this.completeUpgrade(f,s,d,e,t,n,r)}completeUpgrade(e,t,n,r,s,i,l){if(!s.readable||!s.writable)return s.destroy();if(s[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return b(s,503);const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(t+d).digest("base64")}`],p=new this.options.WebSocket(null,void 0,this.options);if(n.size){const e=this.options.handleProtocols?this.options.handleProtocols(n,r):n.values().next().value;e&&(u.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,n=a.format({[c.extensionName]:[t]});u.push(`Sec-WebSocket-Extensions: ${n}`),p._extensions=e}this.emit("headers",u,r),s.write(u.concat("\r\n").join("\r\n")),s.removeListener("error",m),p.setSocket(s,i,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)})),l(p,r)}}},1751:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(3547):e.exports=n(9095)},1821:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(8220)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1943:e=>{"use strict";e.exports=require("fs/promises")},2017:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!==s--;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},2018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1635);r.__exportStar(n(3730),t),r.__exportStar(n(1649),t),r.__exportStar(n(7386),t),r.__exportStar(n(1400),t),r.__exportStar(n(8983),t),r.__exportStar(n(8104),t),r.__exportStar(n(3258),t),r.__exportStar(n(131),t),r.__exportStar(n(3371),t),r.__exportStar(n(9786),t),r.__exportStar(n(6132),t)},2181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelimiterParser=void 0;const r=n(2203);class s extends r.Transform{constructor({delimiter:e,includeDelimiter:t=!1,...n}){if(super(n),void 0===e)throw new TypeError('"delimiter" is not a bufferable object');if(0===e.length)throw new TypeError('"delimiter" has a 0 or undefined length');this.includeDelimiter=t,this.delimiter=Buffer.from(e),this.buffer=Buffer.alloc(0)}_transform(e,t,n){let r,s=Buffer.concat([this.buffer,e]);for(;-1!==(r=s.indexOf(this.delimiter));)this.push(s.slice(0,r+(this.includeDelimiter?this.delimiter.length:0))),s=s.slice(r+this.delimiter.length);this.buffer=s,n()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.DelimiterParser=s},2203:e=>{"use strict";e.exports=require("stream")},2348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadlineParser=void 0;const r=n(2181);class s extends r.DelimiterParser{constructor(e){const t={delimiter:Buffer.from("\n","utf8"),encoding:"utf8",...e};"string"==typeof t.delimiter&&(t.delimiter=Buffer.from(t.delimiter,t.encoding)),super(t)}}t.ReadlineParser=s},2365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedUdpSocketImpl=void 0;const r=n(1635).__importDefault(n(228)),s=n(360);class i extends r.default{#c;#_;#S;get handleId(){return this.boundState?.handleId}get portNumber(){return this.boundState?.portNumber}get boundState(){return this.#i&&"object"==typeof this.#i?this.#i:void 0}#i="pending";constructor(e,t,n){super(),this.#c=e,this.#_=t,this.#S={...n}}bind(e,t,n){if(this.#i&&"object"==typeof this.#i)throw new Error("Socket is already bound");switch(this.#i){case"fatalError":throw new Error("Socket has encountered fatal error");case"binding":throw new Error("Socket is already bound");case"closed":throw new Error("Socket is closing");case"pending":break;default:throw(0,s.assertNever)(this.#i),new Error("Invalid socket state")}this.#i="binding",n&&this.on("listening",n),this.#c.sendWithCb("sharedUdpSocketJoin",{family:this.#S.type,portNumber:e}).then(t=>{this.#i={portNumber:e,handleId:t},this.#_.set(t,this),this.emit("listening")},e=>{this.#i="closed",this.emit("error",e instanceof Error?e:new Error(e))}).catch(()=>null)}close(e){if(this.#i&&"object"==typeof this.#i);else switch(this.#i){case"fatalError":throw new Error("Socket has encountered fatal error");case"pending":case"closed":case"binding":throw new Error("Socket is not open");default:throw(0,s.assertNever)(this.#i),new Error("Invalid socket state")}const t=this.#i.handleId;this.#i="closed",e&&this.on("close",e),this.#c.sendWithCb("sharedUdpSocketLeave",{handleId:t}).then(()=>{this.#_.delete(t),this.emit("close")},e=>{this.#_.delete(t),this.emit("error",e instanceof Error?e:new Error(e))}).catch(()=>null)}send(e,t,n,r,s,i){if("number"!=typeof t)throw new Error("Invalid arguments");if("number"==typeof n){if("number"!=typeof r||"string"!=typeof s)throw new Error("Invalid arguments");if(void 0!==i&&"function"!=typeof i)throw new Error("Invalid arguments");const o=this.#C(e,t,n);this.#k(o,r,s,i)}else{if("string"!=typeof n)throw new Error("Invalid arguments");{if(void 0!==r&&"function"!=typeof r)throw new Error("Invalid arguments");const s=this.#C(e,0,void 0);this.#k(s,t,n,r)}}}#C(e,t,n){let r;if("string"==typeof e)r=Buffer.from(e,"utf-8");else if(Buffer.isBuffer(e))r=e;else{if(Array.isArray(e))return Buffer.from(e);r=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}return r.subarray(t,void 0!==n?n+t:void 0)}#k(e,t,n,r){if(!this.#i||"object"!=typeof this.#i)throw new Error("Socket is not open");this.#c.sendWithCb("sharedUdpSocketSend",{handleId:this.#i.handleId,message:e,address:n,port:t}).then(()=>{r?.()},e=>{this.emit("error",e instanceof Error?e:new Error(e))}).catch(()=>null)}receiveSocketMessage(e){try{this.emit("message",e.message,e.source)}catch(e){}}receiveSocketError(e){this.#i="fatalError";const t=this.boundState;t&&this.#_.delete(t.handleId);try{this.emit("error",e)}catch(e){}}}t.SharedUdpSocketImpl=i},2415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertHeaderBufferToObj=t.HEADER_LENGTH=void 0,t.HEADER_LENGTH=6,t.convertHeaderBufferToObj=e=>{const n=Array.from(e.slice(0,t.HEADER_LENGTH)).reduce((e,t)=>`${e}${(e=>{let t=Number(e).toString(2);for(;t.length<8;)t=`0${t}`;return t})(t)}`,""),r="000"===n.slice(0,3)?1:"UNKNOWN_VERSION",s=Number(n[3]),i=Number(n[4]),o=parseInt(n.slice(5,16),2),a=parseInt(n.slice(16,18),2);return{versionNumber:r,identification:{apid:o,secondaryHeader:i,type:s},sequenceControl:{packetName:parseInt(n.slice(18,32),2),sequenceFlags:a},dataLength:parseInt(n.slice(-16),2)+1}}},2593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeIsVisibleFn=function(e){return(e??[]).map(e=>"isVisibleExpression"in e&&"string"==typeof e.isVisibleExpression?{...e,isVisibleFnType:"expression",isVisibleFn:e.isVisibleExpression,isVisible:void 0,isVisibleExpression:void 0}:"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisibleFnType:"function",isVisible:void 0,isVisibleExpression:void 0}:{...e,isVisible:void 0,isVisibleFn:void 0,isVisibleFnType:void 0,isVisibleExpression:void 0})},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},2614:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],n="undefined"!=typeof Blob;n&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:n,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},2627:(e,t,n)=>{var r=r||n(7026);!function(){"use strict";r.WebSocket="undefined"!=typeof WebSocket?WebSocket:n(7699),r.WebSocketPort=function(e){r.Port.call(this,e),this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&(1===this.socket.readyState?(r.WebSocketPort.setupSocketForBinary(this.socket),this.emit("open",this.socket)):this.open())};var e=r.WebSocketPort.prototype=Object.create(r.Port.prototype);e.constructor=r.WebSocketPort,e.open=function(){(!this.socket||this.socket.readyState>1)&&(this.socket=new r.WebSocket(this.options.url)),r.WebSocketPort.setupSocketForBinary(this.socket);var e=this;this.socket.onopen=function(){e.emit("open",e.socket)},this.socket.onerror=function(t){e.emit("error",t)}},e.listen=function(){var e=this;this.socket.onmessage=function(t){e.emit("data",t.data,t)},this.socket.onclose=function(t){e.emit("close",t)},e.emit("ready")},e.sendRaw=function(e){this.socket&&1===this.socket.readyState?this.socket.send(e):r.fireClosedPortSendError(this)},e.close=function(e,t){this.socket.close(e,t)},r.WebSocketPort.setupSocketForBinary=function(e){e.binaryType=r.isNode?"nodebuffer":"arraybuffer"}}()},2791:e=>{var t=1e3,n=60*t,r=60*n,s=24*r,i=7*s;function o(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*i;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=s?o(c,l,s,"day"):l>=r?o(c,l,r,"hour"):l>=n?o(c,l,n,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var i=Math.abs(e);return i>=s?Math.round(e/s)+"d":i>=r?Math.round(e/r)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2854:(e,t,n)=>{"use strict";const r=n(4617);class s extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,n)=>new Promise((i,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const a=setTimeout(()=>{if("function"==typeof n){try{i(n())}catch(e){o(e)}return}const r=n instanceof Error?n:new s("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(r)},t);r(e.then(i,o),()=>{clearTimeout(a)})});e.exports=i,e.exports.default=i,e.exports.TimeoutError=s},2920:(e,t,n)=>{var r=r||n(7026),s=n(4987).SerialPort;r.supportsSerial=!0,r.SerialPort=function(e){this.on("open",this.listen.bind(this)),r.SLIPPort.call(this,e),this.options.bitrate=this.options.bitrate||9600,this.serialPort=e.serialPort,this.serialPort&&this.emit("open",this.serialPort)};var i=r.SerialPort.prototype=Object.create(r.SLIPPort.prototype);i.constructor=r.SerialPort,i.open=function(){if(this.serialPort)return this.once("close",this.open.bind(this)),void this.close();var e=this;this.serialPort=new s({path:this.options.devicePath,baudRate:this.options.bitrate,autoOpen:!1}),this.serialPort.on("error",function(t){e.emit("error",t)}),this.serialPort.on("open",function(){e.emit("open",e.serialPort)}),this.serialPort.open()},i.listen=function(){var e=this;this.serialPort.on("data",function(t){e.emit("data",t,void 0)}),this.serialPort.on("close",function(){e.emit("close")}),e.emit("ready")},i.sendRaw=function(e){this.serialPort&&this.serialPort.isOpen?this.serialPort.write(e):r.fireClosedPortSendError(this)},i.close=function(){this.serialPort&&this.serialPort.close()}},2971:(e,t,n)=>{"use strict";const r=n(3106),s=n(3338),i=n(4759),{kStatusCode:o}=n(2614),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),d=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let f;function m(e){this[h].push(e),this[u]+=e.length}function b(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][o]=1009,this.removeListener("data",b),this.reset())}function g(e){this[l]._inflate=null,e[o]=1007,this[d](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){f.add(r=>{this._decompress(e,t,(e,t)=>{r(),n(e,t)})})}compress(e,t,n){f.add(r=>{this._compress(e,t,(e,t)=>{r(),n(e,t)})})}_decompress(e,t,n){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=r.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[h]=[],this._inflate.on("error",g),this._inflate.on("data",b)}this._inflate[d]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void n(e);const r=s.concat(this._inflate[h],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[h]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,r)})}_compress(e,t,n){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=r.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[h]=[],this._deflate.on("data",m)}this._deflate[d]=n,this._deflate.write(e),this._deflate.flush(r.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=s.concat(this._deflate[h],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[d]=null,this._deflate[u]=0,this._deflate[h]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,e)})}}},3069:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(1821):e.exports=n(4037)},3106:e=>{"use strict";e.exports=require("zlib")},3258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3338:(e,t,n)=>{"use strict";const{EMPTY_BUFFER:r}=n(2614),s=Buffer[Symbol.species];function i(e,t,n,r,s){for(let i=0;i<s;i++)n[r+i]=e[i]^t[3&i]}function o(e,t){for(let n=0;n<e.length;n++)e[n]^=t[3&n]}if(e.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const r=e[t];n.set(r,i),i+=r.length}return i<t?new s(n.buffer,n.byteOffset,i):n},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let n;return t instanceof ArrayBuffer?n=new s(t):ArrayBuffer.isView(t)?n=new s(t.buffer,t.byteOffset,t.byteLength):(n=Buffer.from(t),e.readOnly=!1),n},unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{const t=n(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,n,r,s,o){o<48?i(e,n,r,s,o):t.mask(e,n,r,s,o)},e.exports.unmask=function(e,n){e.length<32?o(e,n):t.unmask(e,n)}}catch(e){}},3371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3547:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(4662)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},3662:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCTalkParser=void 0;const r=n(2203);class s extends r.Transform{array;cursor;lastByteFetchTime;maxDelayBetweenBytesMs;constructor(e=50){super(),this.array=[],this.cursor=0,this.lastByteFetchTime=0,this.maxDelayBetweenBytesMs=e}_transform(e,t,n){if(this.maxDelayBetweenBytesMs>0){const e=Date.now();e-this.lastByteFetchTime>this.maxDelayBetweenBytesMs&&(this.array=[],this.cursor=0),this.lastByteFetchTime=e}for(this.cursor+=e.length,Array.from(e).map(e=>this.array.push(e));this.cursor>1&&this.cursor>=this.array[1]+5;){const e=this.array[1]+5,t=Buffer.from(this.array.slice(0,e));this.array=this.array.slice(t.length,this.array.length),this.cursor-=e,this.push(t)}n()}}t.CCTalkParser=s},3719:(e,t,n)=>{"use strict";const{Duplex:r}=n(2203);function s(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0;const a=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,n){const r=!n&&a._readableState.objectMode?t.toString():t;a.push(r)||e.pause()}),e.once("error",function(e){a.destroyed||(n=!1,a.destroy(e))}),e.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(s,a);let i=!1;e.once("error",function(e){i=!0,r(e)}),e.once("close",function(){i||r(t),process.nextTick(s,a)}),n&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",function(){t()}),e.close())):e.once("open",function(){a._final(t)})},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,n,r){e.readyState!==e.CONNECTING?e.send(t,r):e.once("open",function(){a._write(t,n,r)})},a.on("end",i),a.on("error",o),a}},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3819:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(9831),t),s(n(4399),t)},3841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsError=void 0;class n extends Error{constructor(e,{canceled:t=!1}={}){super(e),this.canceled=t}}t.BindingsError=n},4037:(e,t,n)=>{const r=n(9637),s=n(9023);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(s.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:s}=this;if(s){const t=this.color,s="[3"+(t<8?t:"8;5;"+t),i=`  ${s};1m${r} [0m`;n[0]=i+n[0].split("\n").join("\n"+i),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=s.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(8220)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},4044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const r=n(1635),s=n(360),i=r.__importDefault(n(6022));t.IpcWrapper=class{#E;#I;#$;#x=1;#O=new Map;constructor(e,t,n){this.#E=e,this.#I=t,this.#$=n}async sendWithCb(e,t,n,r=0){r<=0&&(r=this.#$);const s={timeout:void 0,resolve:()=>null,reject:()=>null},o=new Promise((e,t)=>{s.resolve=e,s.reject=t});this.#x>268435456&&(this.#x=1);const a=this.#x++;this.#O.set(a,s),this.#I({direction:"call",name:String(e),payload:i.default.stringify(t),callbackId:a});const c=new Error("Call timed out");return s.timeout=setTimeout(()=>{s.reject(n?n():c),this.#O.delete(a)},r),o}sendWithNoCb(e,t){this.#I({direction:"call",name:String(e),payload:i.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#E[e.name];if(!t)return void(e.callbackId&&this.#I({direction:"response",callbackId:e.callbackId,success:!1,payload:i.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?i.default.parse(e.payload):void 0).then(t=>{e.callbackId&&this.#I({direction:"response",callbackId:e.callbackId,success:!0,payload:i.default.stringify(t)})},t=>{e.callbackId&&this.#I({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):i.default.stringify(t)})});break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#O.get(e.callbackId);if(this.#O.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const n=e.payload?i.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"object"==typeof n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,s.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},4289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const r=n(2593);function s(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#P;#N;#M;#T;#A=new Map;#D=new Map;constructor(e,t,n,r){this.#P=e,this.#N=t,this.#M=n,this.#T=r}async handleExecuteAction(e){const t=this.#A.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#P({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:(t,n)=>{this.#M({customVariableId:t,value:n,controlId:e.action.controlId})}};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#D.get(t);if(e){const t=this.#A.get(e.actionId);if(t?.unsubscribe&&!t.skipUnsubscribeOnOptionsChange){const n={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(t.unsubscribe(s(e),n)).catch(t=>{this.#T("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}if(!n||n.disabled)this.#D.delete(t);else{this.#D.set(t,n);const e=this.#A.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during subscribe")}};Promise.resolve(e.subscribe(s(n),t)).catch(e=>{this.#T("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)})}}}}async handleLearnAction(e){const t=this.#A.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#P({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during learn")}};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#A.clear();for(const[n,s]of Object.entries(e))s&&(t.push({id:n,name:s.name,description:s.description,options:(0,r.serializeIsVisibleFn)(s.options),optionsToIgnoreForSubscribe:s.optionsToIgnoreForSubscribe,hasLearn:!!s.learn,learnTimeout:s.learnTimeout,hasLifecycleFunctions:!!s.subscribe||!!s.unsubscribe}),this.#A.set(n,s));this.#N({actions:t})}subscribeActions(e){let t=Array.from(this.#D.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.actionId)));for(const e of t){const t=this.#A.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during subscribe")}};Promise.resolve(t.subscribe(s(e),n)).catch(t=>{this.#T("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}unsubscribeActions(e){let t=Array.from(this.#D.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.actionId)));for(const e of t){const t=this.#A.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async e=>e,setCustomVariableValue:()=>{throw new Error("setCustomVariableValue is not available during unsubscribe")}};Promise.resolve(t.unsubscribe(s(e),n)).catch(t=>{this.#T("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}}},4326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=function(e,t){Promise.resolve().then(async()=>{if(u)throw new Error("runEntrypoint can only be called once");if(u=!0,t||(t=[]),!Array.isArray(t))throw new Error("upgradeScripts must be an array");for(const e of t)if("function"!=typeof e)throw new Error("upgradeScripts must be an array of functions");const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const r=await i.default.readFile(n),d=JSON.parse(r.toString());if(d.runtime?.api!==s.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let h=d.runtime.apiVersion;if("0.0.0"===h)try{const e=await i.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(h=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const p=process.env.CONNECTION_ID;if("string"!=typeof p||!p)throw new Error("Module initialise is missing CONNECTION_ID");const f=process.env.VERIFICATION_TOKEN;if("string"!=typeof f||!f)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const m=new a.IpcWrapper({},e=>{process.send(e)},5e3);process.once("message",e=>{m.receivedMessage(e)}),l=new e((0,o.literal)({id:p,upgradeScripts:t,_isInstanceBaseProps:!0})),m.sendWithCb("register",{apiVersion:h,connectionId:p,verificationToken:f}).then(()=>{console.log("Module-host accepted registration")},e=>{console.error("Module registration failed",e),process.exit(11)})}).catch(e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)})};const r=n(1635),s=n(9967),i=r.__importDefault(n(1943)),o=n(360),a=n(4044),c=r.__importDefault(n(6928));let l,u=!1},4399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlipEncoder=void 0;const r=n(2203);class s extends r.Transform{opts;constructor(e={}){super(e);const{START:t,ESC:n=219,END:r=192,ESC_START:s,ESC_END:i=220,ESC_ESC:o=221,bluetoothQuirk:a=!1}=e;this.opts={START:t,ESC:n,END:r,ESC_START:s,ESC_END:i,ESC_ESC:o,bluetoothQuirk:a}}_transform(e,t,n){const r=e.length;if(this.opts.bluetoothQuirk&&0===r)return n();const s=Buffer.alloc(2*r+2);let i=0;1==this.opts.bluetoothQuirk&&(s[i++]=this.opts.END),void 0!==this.opts.START&&(s[i++]=this.opts.START);for(let t=0;t<r;t++){let n=e[t];n===this.opts.START&&this.opts.ESC_START?(s[i++]=this.opts.ESC,n=this.opts.ESC_START):n===this.opts.END?(s[i++]=this.opts.ESC,n=this.opts.ESC_END):n===this.opts.ESC&&(s[i++]=this.opts.ESC,n=this.opts.ESC_ESC),s[i++]=n}s[i++]=this.opts.END,n(null,s.slice(0,i))}}t.SlipEncoder=s},4434:e=>{"use strict";e.exports=require("events")},4581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},4662:(e,t,n)=>{e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(n=0;n<s;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2791),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},4756:e=>{"use strict";e.exports=require("tls")},4759:e=>{"use strict";const t=Symbol("kDone"),n=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[n]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[n]()}[n](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},4865:e=>{"use strict";const t=(e,t,r,s)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const i=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!n(i,o)&&s||Object.defineProperty(e,r,o)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},r=(e,t)=>`/* Wrapped ${e}*/\n${t}`,s=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),i=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:o=!1}={})=>{const{name:a}=e;for(const r of Reflect.ownKeys(n))t(e,n,r,o);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const o=""===n?"":`with ${n.trim()}() `,a=r.bind(null,o,t.toString());Object.defineProperty(a,"name",i),Object.defineProperty(e,"toString",{...s,value:a})})(e,n,a),e}},4987:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(9847),t),s(n(3662),t),s(n(447),t),s(n(6937),t),s(n(1693),t),s(n(8739),t),s(n(8145),t),s(n(637),t),s(n(3819),t),s(n(7102),t),s(n(8007),t),s(n(9076),t)},5037:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialNumParser=void 0;const n=[/USB\\(?:.+)\\(.+)/,/FTDIBUS\\(?:.+)\+(.+?)A?\\.+/];t.serialNumParser=e=>{if(!e)return null;for(const t of n){const n=e.match(t);if(n)return n[1]}return null}},5158:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5170:function(e,t){!function(e){"use strict";e.slip=t,function(e){var t=e;t.END=192,t.ESC=219,t.ESC_END=220,t.ESC_ESC=221,t.byteArray=function(e,t,n){return e instanceof ArrayBuffer?new Uint8Array(e,t,n):e},t.expandByteArray=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},t.sliceByteArray=function(e,t,n){var r=e.buffer.slice?e.buffer.slice(t,n):e.subarray(t,n);return new Uint8Array(r)},t.encode=function(e,n){(n=n||{}).bufferPadding=n.bufferPadding||4;var r=(e=t.byteArray(e,n.offset,n.byteLength)).length+n.bufferPadding+3&-4,s=new Uint8Array(r),i=1;s[0]=t.END;for(var o=0;o<e.length;o++){i>s.length-3&&(s=t.expandByteArray(s));var a=e[o];a===t.END?(s[i++]=t.ESC,a=t.ESC_END):a===t.ESC&&(s[i++]=t.ESC,a=t.ESC_ESC),s[i++]=a}return s[i]=t.END,t.sliceByteArray(s,0,i+1)},t.Decoder=function(e){e="function"!=typeof e?e||{}:{onMessage:e},this.maxMessageSize=e.maxMessageSize||10485760,this.bufferSize=e.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=e.onMessage,this.onError=e.onError,this.escape=!1};var n=t.Decoder.prototype;n.decode=function(e){var n;e=t.byteArray(e);for(var r=0;r<e.length;r++){var s=e[r];if(this.escape)s===t.ESC_ESC?s=t.ESC:s===t.ESC_END&&(s=t.END);else{if(s===t.ESC){this.escape=!0;continue}if(s===t.END){n=this.handleEnd();continue}}this.addByte(s)||this.handleMessageMaxError()}return n},n.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},n.addByte=function(e){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=t.expandByteArray(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=e,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},n.handleEnd=function(){if(0!==this.msgBufferIdx){var e=t.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx);return this.onMessage&&this.onMessage(e),this.msgBufferIdx=0,e}}}(t)}(this)},5317:e=>{"use strict";e.exports=require("child_process")},5692:e=>{"use strict";e.exports=require("https")},5753:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(7833):e.exports=n(6033)},5802:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SerialPortStream=t.DisconnectedError=void 0;const s=n(2203),i=(0,r(n(3069)).default)("serialport/stream");class o extends Error{disconnected;constructor(e){super(e),this.disconnected=!0}}t.DisconnectedError=o;const a={brk:!1,cts:!1,dtr:!0,rts:!0};function c(e){const t=Buffer.allocUnsafe(e);return t.used=0,t}class l extends s.Duplex{port;_pool;_kMinPoolSpace;opening;closing;settings;constructor(e,t){const n={autoOpen:!0,endOnClose:!1,highWaterMark:65536,...e};if(super({highWaterMark:n.highWaterMark}),!n.binding)throw new TypeError('"Bindings" is invalid pass it as `options.binding`');if(!n.path)throw new TypeError(`"path" is not defined: ${n.path}`);if("number"!=typeof n.baudRate)throw new TypeError(`"baudRate" must be a number: ${n.baudRate}`);this.settings=n,this.opening=!1,this.closing=!1,this._pool=c(this.settings.highWaterMark),this._kMinPoolSpace=128,this.settings.autoOpen&&this.open(t)}get path(){return this.settings.path}get baudRate(){return this.settings.baudRate}get isOpen(){return(this.port?.isOpen??!1)&&!this.closing}_error(e,t){t?t.call(this,e):this.emit("error",e)}_asyncError(e,t){process.nextTick(()=>this._error(e,t))}open(e){if(this.isOpen)return this._asyncError(new Error("Port is already open"),e);if(this.opening)return this._asyncError(new Error("Port is opening"),e);const{highWaterMark:t,binding:n,autoOpen:r,endOnClose:s,...o}=this.settings;this.opening=!0,i("opening",`path: ${this.path}`),this.settings.binding.open(o).then(t=>{i("opened",`path: ${this.path}`),this.port=t,this.opening=!1,this.emit("open"),e&&e.call(this,null)},t=>{this.opening=!1,i("Binding #open had an error",t),this._error(t,e)})}update(e,t){if(!this.isOpen||!this.port)return i("update attempted, but port is not open"),this._asyncError(new Error("Port is not open"),t);i("update",`baudRate: ${e.baudRate}`),this.port.update(e).then(()=>{i("binding.update","finished"),this.settings.baudRate=e.baudRate,t&&t.call(this,null)},e=>(i("binding.update","error",e),this._error(e,t)))}write(e,t,n){return Array.isArray(e)&&(e=Buffer.from(e)),"function"==typeof t?super.write(e,t):super.write(e,t,n)}_write(e,t,n){this.isOpen&&this.port?(i("_write",`${e.length} bytes of data`),this.port.write(e).then(()=>{i("binding.write","write finished"),n(null)},e=>{i("binding.write","error",e),e.canceled||this._disconnected(e),n(e)})):this.once("open",()=>{this._write(e,t,n)})}_writev(e,t){i("_writev",`${e.length} chunks of data`);const n=e.map(e=>e.chunk);this._write(Buffer.concat(n),void 0,t)}_read(e){if(!this.isOpen||!this.port)return i("_read","queueing _read for after open"),void this.once("open",()=>{this._read(e)});(!this._pool||this._pool.length-this._pool.used<this._kMinPoolSpace)&&(i("_read","discarding the read buffer pool because it is below kMinPoolSpace"),this._pool=c(this.settings.highWaterMark));const t=this._pool,n=Math.min(t.length-t.used,e),r=t.used;i("_read","reading",{start:r,toRead:n}),this.port.read(t,r,n).then(({bytesRead:e})=>{if(i("binding.read","finished",{bytesRead:e}),0===e)return i("binding.read","Zero bytes read closing readable stream"),void this.push(null);t.used+=e,this.push(t.slice(r,r+e))},t=>{i("binding.read","error",t),t.canceled||this._disconnected(t),this._read(e)})}_disconnected(e){this.isOpen?(i("disconnected",e),this.close(void 0,new o(e.message))):i("disconnected aborted because already closed",e)}close(e,t=null){if(!this.isOpen||!this.port)return i("close attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);this.closing=!0,i("#close"),this.port.close().then(()=>{this.closing=!1,i("binding.close","finished"),this.emit("close",t),this.settings.endOnClose&&this.emit("end"),e&&e.call(this,t)},t=>(this.closing=!1,i("binding.close","had an error",t),this._error(t,e)))}set(e,t){if(!this.isOpen||!this.port)return i("set attempted, but port is not open"),this._asyncError(new Error("Port is not open"),t);const n={...a,...e};i("#set",n),this.port.set(n).then(()=>{i("binding.set","finished"),t&&t.call(this,null)},e=>(i("binding.set","had an error",e),this._error(e,t)))}get(e){if(!this.isOpen||!this.port)return i("get attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);i("#get"),this.port.get().then(t=>{i("binding.get","finished"),e.call(this,null,t)},t=>(i("binding.get","had an error",t),this._error(t,e)))}flush(e){if(!this.isOpen||!this.port)return i("flush attempted, but port is not open"),this._asyncError(new Error("Port is not open"),e);i("#flush"),this.port.flush().then(()=>{i("binding.flush","finished"),e&&e.call(this,null)},t=>(i("binding.flush","had an error",t),this._error(t,e)))}drain(e){if(i("drain"),!this.isOpen||!this.port)return i("drain queuing on port open"),void this.once("open",()=>{this.drain(e)});this.port.drain().then(()=>{i("binding.drain","finished"),e&&e.call(this,null)},t=>(i("binding.drain","had an error",t),this._error(t,e)))}}t.SerialPortStream=l},5880:(e,t,n)=>{"use strict";const{isUtf8:r}=n(181),{hasBlob:s}=n(2614);function i(e){const t=e.length;let n=0;for(;n<t;)if(128&e[n])if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}else n++;return!0}if(e.exports={isBlob:function(e){return s&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:i,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},r)e.exports.isValidUTF8=function(e){return e.length<24?i(e):r(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=n(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?i(e):t(e)}}catch(e){}},5884:e=>{"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),s=t.indexOf("--");return-1!==r&&(-1===s||r<s)}},5926:(e,t,n)=>{"use strict";const{tokenChars:r}=n(5880);function s(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);let n,i,o=Object.create(null),a=!1,c=!1,l=!1,u=-1,d=-1,h=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===n)if(-1===h&&1===r[d])-1===u&&(u=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const r=e.slice(u,h);44===d?(s(t,r,o),o=Object.create(null)):n=r,u=h=-1}}else-1===h&&-1!==u&&(h=p);else if(void 0===i)if(-1===h&&1===r[d])-1===u&&(u=p);else if(32===d||9===d)-1===h&&-1!==u&&(h=p);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),s(o,e.slice(u,h),!0),44===d&&(s(t,n,o),o=Object.create(null),n=void 0),u=h=-1}else{if(61!==d||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);i=e.slice(u,p),u=h=-1}else if(c){if(1!==r[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:a||(a=!0),c=!1}else if(l)if(1===r[d])-1===u&&(u=p);else if(34===d&&-1!==u)l=!1,h=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===d&&61===e.charCodeAt(p-1))l=!0;else if(-1===h&&1===r[d])-1===u&&(u=p);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let r=e.slice(u,h);a&&(r=r.replace(/\\/g,""),a=!1),s(o,i,r),44===d&&(s(t,n,o),o=Object.create(null),n=void 0),i=void 0,u=h=-1}}else-1===h&&(h=p);if(-1===u||l||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const f=e.slice(u,h);return void 0===n?s(t,f,o):(void 0===i?s(o,f,!0):s(o,i,a?f.replace(/\\/g,""):f),s(t,n,o)),t}}},6022:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===r(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var s=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=s,t.convertMapToObject=function(e){return Array.from(e).reduce(function(e,t){var r,s,i=(s=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}return i}}(r,s)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return e[o]=a,e},{})},t.isArguments=function(e){return null!=e&&s(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var i={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=i,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(i.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),r=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},s=function(e){return"="===e?-1:n[e]},i=0;i<64;i++)n[r(i)]=i;var o=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},a={encode:function(e){if("string"==typeof e){var t=e;e=o(t.length);for(var n=0;n<t.length;n++){var s=t.charCodeAt(n);if(s>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=s}}for(var i=[],a=null,c=null,l=null,u=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,l=(15&e[d])<<2;break;case 2:l|=e[d]>>6&3,u=63&e[d],i.push(r(a)),i.push(r(c)),i.push(r(l)),i.push(r(u)),a=null,c=null,l=null,u=null}return null!=a&&(i.push(r(a)),i.push(r(c)),null==l?i.push("="):i.push(r(l)),null==u&&i.push("=")),i.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var n=o(t),r=null,i=null,a=null,c=0,l=0;l<e.length;l++){var u=e.charAt(l),d=s(u);switch(l%4){case 0:if(d<0)throw new Error("invalid base64 string");r=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");r|=d>>4,n[c++]=r,i=(15&d)<<4;break;case 2:d>=0&&(i|=d>>2,n[c++]=i,a=(3&d)<<6);break;case 3:d>=0&&(n[c++]=a|d)}}return n},newBinary:o};t.Base64=a},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function e(t,s,i,o,a){var c=s[t];switch(n(c)){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var l,u=o+i,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var h=c.length,p=0;p<h;p+=1)d[p]=e(p,c,i,u,a)||"null";return l=0===d.length?"[]":u?"[\n"+u+d.join(",\n"+u)+"\n"+o+"]":"["+d.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach(function(t){(l=e(t,c,i,u,a))&&d.push(r(t)+(u?": ":":")+l)}),l=0===d.length?"{}":u?"{\n"+u+d.join(",\n"+u)+"\n"+o+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var r="",i=0;i<n.indent;i++)r+=" ";n.indent=r}return s("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}var s={};!function(){var e=s,t=r(2).Base64,n=r(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var i=r(1),o={};e.EJSON=o;var a=new Map;o.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$date")&&1===(0,i.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$regexp")&&(0,i.hasOwn)(e,"$flags")&&2===(0,i.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$InfNaN")&&1===(0,i.lengthOf)(e)},matchObject:i.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$binary")&&1===(0,i.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,i.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$escape")&&1===(0,i.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,i.lengthOf)(e);1!==n&&2!==n||(t=c.some(function(t){return t.matchJSONValue(e)}))}return t},toJSONValue:function(e){var t={};return(0,i.keysOf)(e).forEach(function(n){t[n]=o.toJSONValue(e[n])}),{$escape:t}},fromJSONValue:function(e){var t={};return(0,i.keysOf)(e.$escape).forEach(function(n){t[n]=o.fromJSONValue(e.$escape[n])}),t}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$type")&&(0,i.hasOwn)(e,"$value")&&2===(0,i.lengthOf)(e)},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed(function(){return e.toJSONValue()});return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var r=a.get(t);return n._noYieldsAllowed(function(){return r(e.$value)})}}];o._isCustomType=function(e){return e&&(0,i.isFunction)(e.toJSONValue)&&(0,i.isFunction)(e.typeName)&&a.has(e.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,i.convertMapToObject)(a)},o._getConverters=function(){return c};var l=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}},u=function e(t){if(null===t)return null;var n=l(t);return void 0!==n?n:(0,i.isObject)(t)?((0,i.keysOf)(t).forEach(function(n){var r=t[n];if((0,i.isObject)(r)||void 0===r||(0,i.isInfOrNaN)(r)){var s=l(r);s?t[n]=s:e(r)}}),t):t};o._adjustTypesToJSONValue=u,o.toJSONValue=function(e){var t=l(e);if(void 0!==t)return t;var n=e;return(0,i.isObject)(e)&&(n=o.clone(e),u(n)),n};var d=function(e){if((0,i.isObject)(e)&&null!==e){var t=(0,i.keysOf)(e);if(t.length<=2&&t.every(function(e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var n=0;n<c.length;n++){var r=c[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}}return e},h=function e(t){if(null===t)return null;var n=d(t);return n!==t?n:(0,i.isObject)(t)?((0,i.keysOf)(t).forEach(function(n){var r=t[n];if((0,i.isObject)(r)){var s=d(r);if(r!==s)return void(t[n]=s);e(r)}}),t):t};o._adjustTypesFromJSONValue=h,o.fromJSONValue=function(e){var t=d(e);return t===e&&(0,i.isObject)(e)&&(t=o.clone(e),h(t)),t},o.stringify=(0,i.handleError)(function(e,t){var n=o.toJSONValue(e);return t&&(t.canonical||t.indent)?r(4)(n,t):JSON.stringify(n)}),o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,t,n){var r,s=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,i.isObject)(e)||!(0,i.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(o.isBinary(e)&&o.isBinary(t)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if((0,i.isFunction)(e.equals))return e.equals(t,n);if((0,i.isFunction)(t.equals))return t.equals(e,n);var a,c=Array.isArray(e),l=Array.isArray(t);if(c!==l)return!1;if(c&&l){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!o.equals(e[r],t[r],n))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(t)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(t))}var u=(0,i.keysOf)(e),d=(0,i.keysOf)(t);return s?(r=0,a=u.every(function(s){return!(r>=d.length||s!==d[r]||!o.equals(e[s],t[d[r]],n)||(r++,0))})):(r=0,a=u.every(function(s){return!!(0,i.hasOwn)(t,s)&&!!o.equals(e[s],t[s],n)&&(r++,!0)})),a&&r===d.length},o.clone=function(e){var t;if(!(0,i.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){t=o.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(o.clone):(0,i.isArguments)(e)?Array.from(e).map(o.clone):(0,i.isFunction)(e.clone)?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(t={},(0,i.keysOf)(e).forEach(function(n){t[n]=o.clone(e[n])}),t)},o.newBinary=t.newBinary}(),e.exports=s.EJSON}()},6033:(e,t,n)=>{const r=n(9637),s=n(9023);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(s.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:s}=this;if(s){const t=this.color,s="[3"+(t<8?t:"8;5;"+t),i=`  ${s};1m${r} [0m`;n[0]=i+n[0].split("\n").join("\n"+i),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=s.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(736)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},6132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var r=n(8895);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return r.TCPHelper}});var s=n(1118);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return s.TelnetHelper}});var i=n(6259);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return i.UDPHelper}})},6237:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.asyncWrite=t.asyncRead=t.asyncUpdate=t.asyncSet=t.asyncOpen=t.asyncList=t.asyncGetBaudRate=t.asyncGet=t.asyncFlush=t.asyncDrain=t.asyncClose=void 0;const s=r(n(8169)),i=n(9023),o=n(6928),a=(0,s.default)((0,o.join)(__dirname,"../"));t.asyncClose=a.close?(0,i.promisify)(a.close):async()=>{throw new Error('"binding.close" Method not implemented')},t.asyncDrain=a.drain?(0,i.promisify)(a.drain):async()=>{throw new Error('"binding.drain" Method not implemented')},t.asyncFlush=a.flush?(0,i.promisify)(a.flush):async()=>{throw new Error('"binding.flush" Method not implemented')},t.asyncGet=a.get?(0,i.promisify)(a.get):async()=>{throw new Error('"binding.get" Method not implemented')},t.asyncGetBaudRate=a.getBaudRate?(0,i.promisify)(a.getBaudRate):async()=>{throw new Error('"binding.getBaudRate" Method not implemented')},t.asyncList=a.list?(0,i.promisify)(a.list):async()=>{throw new Error('"binding.list" Method not implemented')},t.asyncOpen=a.open?(0,i.promisify)(a.open):async()=>{throw new Error('"binding.open" Method not implemented')},t.asyncSet=a.set?(0,i.promisify)(a.set):async()=>{throw new Error('"binding.set" Method not implemented')},t.asyncUpdate=a.update?(0,i.promisify)(a.update):async()=>{throw new Error('"binding.update" Method not implemented')},t.asyncRead=a.read?(0,i.promisify)(a.read):async()=>{throw new Error('"binding.read" Method not implemented')},t.asyncWrite=a.write?(0,i.promisify)(a.write):async()=>{throw new Error('"binding.write" Method not implemented')}},6250:(e,t,n)=>{"use strict";const r=n(2017);r.code='require("ajv/dist/runtime/equal").default',t.A=r},6259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const r=n(1635).__importDefault(n(7194)),s=n(228),i=n(1400);class o extends s.EventEmitter{#L;#F;#R;#S;#B=!1;#j;#n;get isDestroyed(){return this.#B}constructor(e,t,n){super(),this.#L=e,this.#F=t,this.#S={...n},this.#R=r.default.createSocket("udp4");try{this.#R.bind(this.#S.bind_port||0,this.#S.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#S.bind_ip||"0.0.0.0"}:${this.#S.bind_port||0}`)}void 0!==this.#S.ttl&&this.#R.setTTL(this.#S.ttl),void 0!==this.#S.multicast_ttl&&this.#R.setMulticastTTL(this.#S.multicast_ttl),this.#R.on("error",e=>{this.#W(i.InstanceStatus.UnknownError,e.message),this.emit("error",e)}),this.#R.on("listening",()=>{this.#S.broadcast&&this.#R.setBroadcast(!0),this.#S.multicast_interface&&this.#R.setMulticastInterface(this.#S.multicast_interface),this.#W(i.InstanceStatus.Ok),this.emit("listening")}),this.#R.on("message",(e,t)=>this.emit("data",e,t)),this.#n=setTimeout(()=>{this.#B||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#L}:${this.#F} is missing an error handler!`)},5e3)}async send(e){if(this.#B)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise((t,n)=>{this.#R.send(e,this.#F,this.#L,e=>{e?n(e):t()})})}destroy(){this.#B=!0,void 0!==this.#n&&(clearTimeout(this.#n),this.#n=void 0),this.#R.removeAllListeners(),this.#R.close(),this.removeAllListeners()}#W(e,t){this.#j!=e&&(this.#j=e,this.emit("status_change",e,t))}}t.UDPHelper=o},6269:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DarwinPortBinding=t.DarwinBinding=void 0;const s=r(n(1751)),i=n(6237),o=n(6924),a=n(9269),c=n(1078),l=(0,s.default)("serialport/bindings-cpp");t.DarwinBinding={list:()=>(l("list"),(0,i.asyncList)()),async open(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');l("open");const t=Object.assign({vmin:1,vtime:0,dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},e),n=await(0,i.asyncOpen)(t.path,t);return new u(n,t)}};class u{constructor(e,t){this.fd=e,this.openOptions=t,this.poller=new o.Poller(e),this.writeOperation=null}get isOpen(){return null!==this.fd}async close(){if(l("close"),!this.isOpen)throw new Error("Port is not open");const e=this.fd;this.poller.stop(),this.poller.destroy(),this.fd=null,await(0,i.asyncClose)(e)}async read(e,t,n){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof n||isNaN(n))throw new TypeError(`"length" is not an integer got "${isNaN(n)?"NaN":typeof n}"`);if(l("read"),e.length<t+n)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");return(0,a.unixRead)({binding:this,buffer:e,offset:t,length:n})}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(l("write",e.length,"bytes"),!this.isOpen)throw l("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{0!==e.length&&(await(0,c.unixWrite)({binding:this,buffer:e}),this.writeOperation=null)})(),this.writeOperation}async update(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(l("update"),!this.isOpen)throw new Error("Port is not open");await(0,i.asyncUpdate)(this.fd,e)}async set(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(l("set",e),!this.isOpen)throw new Error("Port is not open");await(0,i.asyncSet)(this.fd,e)}async get(){if(l("get"),!this.isOpen)throw new Error("Port is not open");return(0,i.asyncGet)(this.fd)}async getBaudRate(){if(l("getBaudRate"),!this.isOpen)throw new Error("Port is not open");throw new Error("getBaudRate is not implemented on darwin")}async flush(){if(l("flush"),!this.isOpen)throw new Error("Port is not open");await(0,i.asyncFlush)(this.fd)}async drain(){if(l("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,i.asyncDrain)(this.fd)}}t.DarwinPortBinding=u},6278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.substituteEscapeCharacters=t.parseEscapeCharacters=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const r=n(1635);r.__exportStar(n(9077),t),r.__exportStar(n(2018),t),r.__exportStar(n(4581),t),r.__exportStar(n(5158),t);var s=n(360);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return s.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return s.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return s.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return s.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return s.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return s.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return s.assertNever}}),Object.defineProperty(t,"parseEscapeCharacters",{enumerable:!0,get:function(){return s.parseEscapeCharacters}}),Object.defineProperty(t,"substituteEscapeCharacters",{enumerable:!0,get:function(){return s.substituteEscapeCharacters}}),r.__exportStar(n(6160),t);var i=n(4326);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return i.runEntrypoint}})},6284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},r=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},s=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},i=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},o=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},a=function(e){return{r:i(e.r,0,255),g:i(e.g,0,255),b:i(e.b,0,255),a:i(e.a)}},c=function(e){return{r:s(e.r),g:s(e.g),b:s(e.b),a:s(e.a,3)}},l=/^#([0-9a-f]{3,8})$/i,u=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},d=function(e){var t=e.r,n=e.g,r=e.b,s=e.a,i=Math.max(t,n,r),o=i-Math.min(t,n,r),a=o?i===t?(n-r)/o:i===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:s}},h=function(e){var t=e.h,n=e.s,r=e.v,s=e.a;t=t/360*6,n/=100,r/=100;var i=Math.floor(t),o=r*(1-n),a=r*(1-(t-i)*n),c=r*(1-(1-t+i)*n),l=i%6;return{r:255*[r,a,o,o,c,r][l],g:255*[c,r,r,a,o,o][l],b:255*[o,o,c,r,r,a][l],a:s}},p=function(e){return{h:o(e.h),s:i(e.s,0,100),l:i(e.l,0,100),a:i(e.a)}},f=function(e){return{h:s(e.h),s:s(e.s),l:s(e.l),a:s(e.a,3)}},m=function(e){return h((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},b=function(e){return{h:(t=d(e)).h,s:(s=(200-(n=t.s))*(r=t.v)/100)>0&&s<200?n*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,n,r,s},g=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w={string:[[function(e){var t=l.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?s(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?s(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v.exec(e)||S.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=g.exec(e)||y.exec(e);if(!t)return null;var r,s,i=p({h:(r=t[1],s=t[2],void 0===s&&(s="deg"),Number(r)*(n[s]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return m(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,s=e.b,i=e.a,o=void 0===i?1:i;return r(t)&&r(n)&&r(s)?a({r:Number(t),g:Number(n),b:Number(s),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,s=e.l,i=e.a,o=void 0===i?1:i;if(!r(t)||!r(n)||!r(s))return null;var a=p({h:Number(t),s:Number(n),l:Number(s),a:Number(o)});return m(a)},"hsl"],[function(e){var t=e.h,n=e.s,s=e.v,a=e.a,c=void 0===a?1:a;if(!r(t)||!r(n)||!r(s))return null;var l=function(e){return{h:o(e.h),s:i(e.s,0,100),v:i(e.v,0,100),a:i(e.a)}}({h:Number(t),s:Number(n),v:Number(s),a:Number(c)});return h(l)},"hsv"]]},_=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},C=function(e){return"string"==typeof e?_(e.trim(),w.string):"object"==typeof e&&null!==e?_(e,w.object):[null,void 0]},k=function(e,t){var n=b(e);return{h:n.h,s:i(n.s+100*t,0,100),l:n.l,a:n.a}},E=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},I=function(e,t){var n=b(e);return{h:n.h,s:n.s,l:i(n.l+100*t,0,100),a:n.a}},$=function(){function e(e){this.parsed=C(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return s(E(this.rgba),2)},e.prototype.isDark=function(){return E(this.rgba)<.5},e.prototype.isLight=function(){return E(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,o=(i=e.a)<1?u(s(255*i)):"","#"+u(t)+u(n)+u(r)+o;var e,t,n,r,i,o},e.prototype.toRgb=function(){return c(this.rgba)},e.prototype.toRgbString=function(){return t=(e=c(this.rgba)).r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+r+", "+s+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,s},e.prototype.toHsl=function(){return f(b(this.rgba))},e.prototype.toHslString=function(){return t=(e=f(b(this.rgba))).h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+s+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,s},e.prototype.toHsv=function(){return e=d(this.rgba),{h:s(e.h),s:s(e.s),v:s(e.v),a:s(e.a,3)};var e},e.prototype.invert=function(){return x({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),x(k(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),x(k(this.rgba,-e))},e.prototype.grayscale=function(){return x(k(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),x(I(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),x(I(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?x({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):s(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=b(this.rgba);return"number"==typeof e?x({h:e,s:t.s,l:t.l,a:t.a}):s(t.h)},e.prototype.isEqual=function(e){return this.toHex()===x(e).toHex()},e}(),x=function(e){return e instanceof $?e:new $(e)},O=[];t.Colord=$,t.colord=x,t.extend=function(e){e.forEach(function(e){O.indexOf(e)<0&&(e($,w),O.push(e))})},t.getFormat=function(e){return C(e)[1]},t.random=function(){return new $({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},6286:(e,t,n)=>{"use strict";const{Writable:r}=n(2203),s=n(2971),{BINARY_TYPES:i,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=n(2614),{concat:l,toArrayBuffer:u,unmask:d}=n(3338),{isValidStatusCode:h,isValidUTF8:p}=n(5880),f=Buffer[Symbol.species];e.exports=class extends r{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],r=t.length-e;e>=n.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),r),this._buffers[0]=new f(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const n=!(64&~t[0]);if(!n||this._extensions[s.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(n)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=n}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(n)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),n=t.readUInt32BE(0);n>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=n*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!==(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&d(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[s.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(n)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(n,t):"arraybuffer"===this._binaryType?u(l(n,t)):"blob"===this._binaryType?new Blob(n):n,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!0),this._state=0,this.startLoop(e)}))}else{const r=l(n,t);if(!this._skipUTF8Validation&&!p(r)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,o),this.end();else{const n=e.readUInt16BE(0);if(!h(n)){const e=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const r=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(r)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",n,r),this.end()}this._state=0}}createError(e,t,n,r,s){this._loop=!1,this._errored=!0;const i=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,this.createError),i.code=s,i[a]=r,i}}},6509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,s=e.length;for(;s>0;){const i=s/2|0;let o=r+i;n(e[o],t)<=0?(r=++o,s-=i+1):s=i}return r}},6585:e=>{var t=1e3,n=60*t,r=60*n,s=24*r,i=7*s;function o(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*i;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=s?o(c,l,s,"day"):l>=r?o(c,l,r,"hour"):l>=n?o(c,l,n,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var i=Math.abs(e);return i>=s?Math.round(e/s)+"d":i>=r?Math.round(e/r)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6848:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(5753)).default("serialport/binding-mock");let i={},o=0;function a(){return new Promise(e=>process.nextTick(()=>e()))}class c extends Error{constructor(e){super(e),this.canceled=!0}}const l={reset(){i={},o=0},createPort(e,t={}){o++;const n=Object.assign({echo:!1,record:!1,manufacturer:"The J5 Robotics Company",vendorId:void 0,productId:void 0,maxReadSize:1024},t);i[e]={data:Buffer.alloc(0),echo:n.echo,record:n.record,readyData:n.readyData,maxReadSize:n.maxReadSize,info:{path:e,manufacturer:n.manufacturer,serialNumber:`${o}`,pnpId:void 0,locationId:void 0,vendorId:n.vendorId,productId:n.productId}},s(o,"created port",JSON.stringify({path:e,opt:t}))},list:async()=>(s(null,"list"),Object.values(i).map(e=>e.info)),async open(e){var t;if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');const n=Object.assign({dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},e),{path:r}=n;s(null,`open: opening path ${r}`);const o=i[r];if(await a(),!o)throw new Error(`Port does not exist - please call MockBinding.createPort('${r}') first`);const c=o.info.serialNumber;if(null===(t=o.openOpt)||void 0===t?void 0:t.lock)throw s(c,"open: Port is locked cannot open"),new Error("Port is locked cannot open");return s(c,`open: opened path ${r}`),o.openOpt=Object.assign({},n),new u(o,n)}};class u{constructor(e,t){if(this.port=e,this.openOptions=t,this.pendingRead=null,this.isOpen=!0,this.lastWrite=null,this.recording=Buffer.alloc(0),this.writeOperation=null,this.serialNumber=e.info.serialNumber,e.readyData){const t=e.readyData;process.nextTick(()=>{this.isOpen&&(s(this.serialNumber,"emitting ready data"),this.emitData(t))})}}emitData(e){if(!this.isOpen||!this.port)throw new Error("Port must be open to pretend to receive data");const t=Buffer.isBuffer(e)?e:Buffer.from(e);s(this.serialNumber,"emitting data - pending read:",Boolean(this.pendingRead)),this.port.data=Buffer.concat([this.port.data,t]),this.pendingRead&&(process.nextTick(this.pendingRead),this.pendingRead=null)}async close(){if(s(this.serialNumber,"close"),!this.isOpen)throw new Error("Port is not open");const e=this.port;if(!e)throw new Error("already closed");e.openOpt=void 0,e.data=Buffer.alloc(0),s(this.serialNumber,"port is closed"),this.serialNumber=void 0,this.isOpen=!1,this.pendingRead&&this.pendingRead(new c("port is closed"))}async read(e,t,n){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof n||isNaN(n))throw new TypeError(`"length" is not an integer got "${isNaN(n)?"NaN":typeof n}"`);if(e.length<t+n)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");if(s(this.serialNumber,"read",n,"bytes"),await a(),!this.isOpen||!this.port)throw new c("Read canceled");if(this.port.data.length<=0)return new Promise((r,s)=>{this.pendingRead=i=>{if(i)return s(i);this.read(e,t,n).then(r,s)}});const r=this.port.maxReadSize>n?n:this.port.maxReadSize,i=this.port.data.slice(0,r).copy(e,t);return this.port.data=this.port.data.slice(r),s(this.serialNumber,"read",i,"bytes"),{bytesRead:i,buffer:e}}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(!this.isOpen||!this.port)throw s("write","error port is not open"),new Error("Port is not open");if(s(this.serialNumber,"write",e.length,"bytes"),this.writeOperation)throw new Error("Overlapping writes are not supported and should be queued by the serialport object");return this.writeOperation=(async()=>{if(await a(),!this.isOpen||!this.port)throw new Error("Write canceled");const t=this.lastWrite=Buffer.from(e);this.port.record&&(this.recording=Buffer.concat([this.recording,t])),this.port.echo&&process.nextTick(()=>{this.isOpen&&this.emitData(t)}),this.writeOperation=null,s(this.serialNumber,"writing finished")})(),this.writeOperation}async update(e){if("object"!=typeof e)throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(s(this.serialNumber,"update"),!this.isOpen||!this.port)throw new Error("Port is not open");await a(),this.port.openOpt&&(this.port.openOpt.baudRate=e.baudRate)}async set(e){if("object"!=typeof e)throw new TypeError('"options" is not an object');if(s(this.serialNumber,"set"),!this.isOpen)throw new Error("Port is not open");await a()}async get(){if(s(this.serialNumber,"get"),!this.isOpen)throw new Error("Port is not open");return await a(),{cts:!0,dsr:!1,dcd:!1}}async getBaudRate(){var e;if(s(this.serialNumber,"getBaudRate"),!this.isOpen||!this.port)throw new Error("Port is not open");if(await a(),!(null===(e=this.port.openOpt)||void 0===e?void 0:e.baudRate))throw new Error("Internal Error");return{baudRate:this.port.openOpt.baudRate}}async flush(){if(s(this.serialNumber,"flush"),!this.isOpen||!this.port)throw new Error("Port is not open");await a(),this.port.data=Buffer.alloc(0)}async drain(){if(s(this.serialNumber,"drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await a()}}t.CanceledError=c,t.MockBinding=l,t.MockPortBinding=u},6924:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Poller=t.EVENTS=void 0;const s=r(n(1751)),i=n(4434),o=n(6928),a=r(n(8169)),c=n(3841),{Poller:l}=(0,a.default)((0,o.join)(__dirname,"../")),u=(0,s.default)("serialport/bindings-cpp/poller");function d(e,n){if(e)return u("error",e),this.emit("readable",e),this.emit("writable",e),void this.emit("disconnect",e);n&t.EVENTS.UV_READABLE&&(u('received "readable"'),this.emit("readable",null)),n&t.EVENTS.UV_WRITABLE&&(u('received "writable"'),this.emit("writable",null)),n&t.EVENTS.UV_DISCONNECT&&(u('received "disconnect"'),this.emit("disconnect",null))}t.EVENTS={UV_READABLE:1,UV_WRITABLE:2,UV_DISCONNECT:4};class h extends i.EventEmitter{constructor(e,t=l){u("Creating poller"),super(),this.poller=new t(e,d.bind(this))}once(e,n){switch(e){case"readable":this.poll(t.EVENTS.UV_READABLE);break;case"writable":this.poll(t.EVENTS.UV_WRITABLE);break;case"disconnect":this.poll(t.EVENTS.UV_DISCONNECT)}return super.once(e,n)}poll(e=0){e&t.EVENTS.UV_READABLE&&u('Polling for "readable"'),e&t.EVENTS.UV_WRITABLE&&u('Polling for "writable"'),e&t.EVENTS.UV_DISCONNECT&&u('Polling for "disconnect"'),this.poller.poll(e)}stop(){u("Stopping poller"),this.poller.stop(),this.emitCanceled()}destroy(){u("Destroying poller"),this.poller.destroy(),this.emitCanceled()}emitCanceled(){const e=new c.BindingsError("Canceled",{canceled:!0});this.emit("readable",e),this.emit("writable",e),this.emit("disconnect",e)}}t.Poller=h},6928:e=>{"use strict";e.exports=require("path")},6937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterByteTimeoutParser=void 0;const r=n(2203);class s extends r.Transform{maxBufferSize;currentPacket;interval;intervalID;constructor({maxBufferSize:e=65536,interval:t,...n}){if(super(n),!t)throw new TypeError('"interval" is required');if("number"!=typeof t||Number.isNaN(t))throw new TypeError('"interval" is not a number');if(t<1)throw new TypeError('"interval" is not greater than 0');if("number"!=typeof e||Number.isNaN(e))throw new TypeError('"maxBufferSize" is not a number');if(e<1)throw new TypeError('"maxBufferSize" is not greater than 0');this.maxBufferSize=e,this.currentPacket=[],this.interval=t}_transform(e,t,n){this.intervalID&&clearTimeout(this.intervalID);for(let t=0;t<e.length;t++)this.currentPacket.push(e[t]),this.currentPacket.length>=this.maxBufferSize&&this.emitPacket();this.intervalID=setTimeout(this.emitPacket.bind(this),this.interval),n()}emitPacket(){this.intervalID&&clearTimeout(this.intervalID),this.currentPacket.length>0&&this.push(Buffer.from(this.currentPacket)),this.currentPacket=[]}_flush(e){this.emitPacket(),e()}}t.InterByteTimeoutParser=s},6982:e=>{"use strict";e.exports=require("crypto")},7e3:(e,t,n)=>{"use strict";const r=n(4865);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:s=0,before:i=!1,after:o=!0}=t;if(!i&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,l;const u=function(...t){const r=this,u=i&&!a;return clearTimeout(a),a=setTimeout(()=>{a=void 0,c&&(clearTimeout(c),c=void 0),o&&(l=e.apply(r,t))},n),s>0&&!c&&o&&(c=setTimeout(()=>{c=void 0,a&&(clearTimeout(a),a=void 0),l=e.apply(r,t)},s)),u&&(l=e.apply(r,t)),l};return r(u,e),u.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},u}},7016:e=>{"use strict";e.exports=require("url")},7026:(e,t,n)=>{var r=r||{};!function(){"use strict";r.SECS_70YRS=2208988800,r.TWO_32=4294967296,r.defaults={metadata:!1,unpackSingleArgs:!0},r.isCommonJS=!!e.exports,r.isNode=r.isCommonJS&&"undefined"==typeof window,r.isElectron=!("undefined"==typeof process||!process.versions||!process.versions.electron),r.isBufferEnv=r.isNode||r.isElectron,r.isArray=function(e){return e&&"[object Array]"===Object.prototype.toString.call(e)},r.isTypedArrayView=function(e){return e.buffer&&e.buffer instanceof ArrayBuffer},r.isBuffer=function(e){return r.isBufferEnv&&e instanceof Buffer},r.Long="undefined"!=typeof Long?Long:r.isNode?n(8570):void 0,r.TextDecoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):"undefined"!=typeof util&&(util.TextDecoder,1)?new util.TextDecoder("utf-8"):void 0,r.TextEncoder="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):"undefined"!=typeof util&&(util.TextEncoder,1)?new util.TextEncoder("utf-8"):void 0,r.dataView=function(e,t,n){return e.buffer?new DataView(e.buffer,t,n):e instanceof ArrayBuffer?new DataView(e,t,n):new DataView(new Uint8Array(e),t,n)},r.byteArray=function(e){if(e instanceof Uint8Array)return e;var t=e.buffer?e.buffer:e;if(!(t instanceof ArrayBuffer||void 0!==t.length&&"string"!=typeof t))throw new Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(e,null,2));return new Uint8Array(t)},r.nativeBuffer=function(e){return r.isBufferEnv?r.isBuffer(e)?e:Buffer.from(e.buffer?e:new Uint8Array(e)):r.isTypedArrayView(e)?e:new Uint8Array(e)},r.copyByteArray=function(e,t,n){if(r.isTypedArrayView(e)&&r.isTypedArrayView(t))t.set(e,n);else for(var s=void 0===n?0:n,i=Math.min(t.length-n,e.length),o=0,a=s;o<i;o++,a++)t[a]=e[o];return t},r.readString=function(e,t){for(var n=[],s=t.idx;s<e.byteLength;s++){var i=e.getUint8(s);if(0===i){s++;break}n.push(i)}return s=s+3&-4,t.idx=s,(r.isBufferEnv?r.readString.withBuffer:r.TextDecoder?r.readString.withTextDecoder:r.readString.raw)(n)},r.readString.raw=function(e){for(var t="",n=0;n<e.length;n+=1e4)t+=String.fromCharCode.apply(null,e.slice(n,n+1e4));return t},r.readString.withTextDecoder=function(e){var t=new Int8Array(e);return r.TextDecoder.decode(t)},r.readString.withBuffer=function(e){return Buffer.from(e).toString("utf-8")},r.writeString=function(e){var t,n=r.isBufferEnv?r.writeString.withBuffer:r.TextEncoder?r.writeString.withTextEncoder:null,s=e+"\0";n&&(t=n(s));for(var i=n?t.length:s.length,o=new Uint8Array(i+3&-4),a=0;a<i-1;a++){var c=n?t[a]:s.charCodeAt(a);o[a]=c}return o},r.writeString.withTextEncoder=function(e){return r.TextEncoder.encode(e)},r.writeString.withBuffer=function(e){return Buffer.from(e)},r.readPrimitive=function(e,t,n,r){var s=e[t](r.idx,!1);return r.idx+=n,s},r.writePrimitive=function(e,t,n,r,s){var i;return s=void 0===s?0:s,t?i=new Uint8Array(t.buffer):(i=new Uint8Array(r),t=new DataView(i.buffer)),t[n](s,e,!1),i},r.readInt32=function(e,t){return r.readPrimitive(e,"getInt32",4,t)},r.writeInt32=function(e,t,n){return r.writePrimitive(e,t,"setInt32",4,n)},r.readInt64=function(e,t){var n=r.readPrimitive(e,"getInt32",4,t),s=r.readPrimitive(e,"getInt32",4,t);return r.Long?new r.Long(s,n):{high:n,low:s,unsigned:!1}},r.writeInt64=function(e,t,n){var s=new Uint8Array(8);return s.set(r.writePrimitive(e.high,t,"setInt32",4,n),0),s.set(r.writePrimitive(e.low,t,"setInt32",4,n+4),4),s},r.readFloat32=function(e,t){return r.readPrimitive(e,"getFloat32",4,t)},r.writeFloat32=function(e,t,n){return r.writePrimitive(e,t,"setFloat32",4,n)},r.readFloat64=function(e,t){return r.readPrimitive(e,"getFloat64",8,t)},r.writeFloat64=function(e,t,n){return r.writePrimitive(e,t,"setFloat64",8,n)},r.readChar32=function(e,t){var n=r.readPrimitive(e,"getUint32",4,t);return String.fromCharCode(n)},r.writeChar32=function(e,t,n){var s=e.charCodeAt(0);if(!(void 0===s||s<-1))return r.writePrimitive(s,t,"setUint32",4,n)},r.readBlob=function(e,t){var n=r.readInt32(e,t),s=n+3&-4,i=new Uint8Array(e.buffer,t.idx,n);return t.idx+=s,i},r.writeBlob=function(e){var t=(e=r.byteArray(e)).byteLength,n=new Uint8Array(4+(t+3&-4)),s=new DataView(n.buffer);return r.writeInt32(t,s),n.set(e,4),n},r.readMIDIBytes=function(e,t){var n=new Uint8Array(e.buffer,t.idx,4);return t.idx+=4,n},r.writeMIDIBytes=function(e){e=r.byteArray(e);var t=new Uint8Array(4);return t.set(e),t},r.readColor=function(e,t){var n=new Uint8Array(e.buffer,t.idx,4),r=n[3]/255;return t.idx+=4,{r:n[0],g:n[1],b:n[2],a:r}},r.writeColor=function(e){var t=Math.round(255*e.a);return new Uint8Array([e.r,e.g,e.b,t])},r.readTrue=function(){return!0},r.readFalse=function(){return!1},r.readNull=function(){return null},r.readImpulse=function(){return 1},r.readTimeTag=function(e,t){var n=r.readPrimitive(e,"getUint32",4,t),s=r.readPrimitive(e,"getUint32",4,t);return{raw:[n,s],native:0===n&&1===s?Date.now():r.ntpToJSTime(n,s)}},r.writeTimeTag=function(e){var t=e.raw?e.raw:r.jsToNTPTime(e.native),n=new Uint8Array(8),s=new DataView(n.buffer);return r.writeInt32(t[0],s,0),r.writeInt32(t[1],s,4),n},r.timeTag=function(e,t){e=e||0;var n=(t=t||Date.now())/1e3,s=Math.floor(n),i=n-s,o=Math.floor(e),a=i+(e-o);if(a>1){var c=Math.floor(a);o+=c,a-=c}return{raw:[s+o+r.SECS_70YRS,Math.round(r.TWO_32*a)]}},r.ntpToJSTime=function(e,t){return 1e3*(e-r.SECS_70YRS+t/r.TWO_32)},r.jsToNTPTime=function(e){var t=e/1e3,n=Math.floor(t),s=t-n;return[n+r.SECS_70YRS,Math.round(r.TWO_32*s)]},r.readArguments=function(e,t,n){var s=r.readString(e,n);if(0!==s.indexOf(","))throw new Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+s," at offset: "+n.idx);var i=s.substring(1).split(""),o=[];return r.readArgumentsIntoArray(o,i,s,e,t,n),o},r.readArgument=function(e,t,n,s,i){var o=r.argumentTypes[e];if(!o)throw new Error("'"+e+"' is not a valid OSC type tag. Type tag string was: "+t);var a=o.reader,c=r[a](n,i);return s.metadata&&(c={type:e,value:c}),c},r.readArgumentsIntoArray=function(e,t,n,s,i,o){for(var a=0;a<t.length;){var c,l=t[a];if("["===l){var u=t.slice(a+1),d=u.indexOf("]");if(d<0)throw new Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+n);var h=u.slice(0,d);c=r.readArgumentsIntoArray([],h,n,s,i,o),a+=d+2}else c=r.readArgument(l,n,s,i,o),a++;e.push(c)}return e},r.writeArguments=function(e,t){var n=r.collectArguments(e,t);return r.joinParts(n)},r.joinParts=function(e){for(var t=new Uint8Array(e.byteLength),n=e.parts,s=0,i=0;i<n.length;i++){var o=n[i];r.copyByteArray(o,t,s),s+=o.length}return t},r.addDataPart=function(e,t){t.parts.push(e),t.byteLength+=e.length},r.writeArrayArguments=function(e,t){for(var n="[",s=0;s<e.length;s++){var i=e[s];n+=r.writeArgument(i,t)}return n+"]"},r.writeArgument=function(e,t){if(r.isArray(e))return r.writeArrayArguments(e,t);var n=e.type,s=r.argumentTypes[n].writer;if(s){var i=r[s](e.value);r.addDataPart(i,t)}return e.type},r.collectArguments=function(e,t,n){r.isArray(e)||(e=void 0===e?[]:[e]),n=n||{byteLength:0,parts:[]},t.metadata||(e=r.annotateArguments(e));for(var s=",",i=n.parts.length,o=0;o<e.length;o++){var a=e[o];s+=r.writeArgument(a,n)}var c=r.writeString(s);return n.byteLength+=c.byteLength,n.parts.splice(i,0,c),n},r.readMessage=function(e,t,n){t=t||r.defaults;var s=r.dataView(e,e.byteOffset,e.byteLength);n=n||{idx:0};var i=r.readString(s,n);return r.readMessageContents(i,s,t,n)},r.readMessageContents=function(e,t,n,s){if(0!==e.indexOf("/"))throw new Error("A malformed OSC address was found while reading an OSC message. String was: "+e);var i=r.readArguments(t,n,s);return{address:e,args:1===i.length&&n.unpackSingleArgs?i[0]:i}},r.collectMessageParts=function(e,t,n){return n=n||{byteLength:0,parts:[]},r.addDataPart(r.writeString(e.address),n),r.collectArguments(e.args,t,n)},r.writeMessage=function(e,t){if(t=t||r.defaults,!r.isValidMessage(e))throw new Error("An OSC message must contain a valid address. Message was: "+JSON.stringify(e,null,2));var n=r.collectMessageParts(e,t);return r.joinParts(n)},r.isValidMessage=function(e){return e.address&&0===e.address.indexOf("/")},r.readBundle=function(e,t,n){return r.readPacket(e,t,n)},r.collectBundlePackets=function(e,t,n){n=n||{byteLength:0,parts:[]},r.addDataPart(r.writeString("#bundle"),n),r.addDataPart(r.writeTimeTag(e.timeTag),n);for(var s=0;s<e.packets.length;s++){var i=e.packets[s],o=(i.address?r.collectMessageParts:r.collectBundlePackets)(i,t);n.byteLength+=o.byteLength,r.addDataPart(r.writeInt32(o.byteLength),n),n.parts=n.parts.concat(o.parts)}return n},r.writeBundle=function(e,t){if(!r.isValidBundle(e))throw new Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(e,null,2));t=t||r.defaults;var n=r.collectBundlePackets(e,t);return r.joinParts(n)},r.isValidBundle=function(e){return void 0!==e.timeTag&&void 0!==e.packets},r.readBundleContents=function(e,t,n,s){for(var i=r.readTimeTag(e,n),o=[];n.idx<s;){var a=r.readInt32(e,n),c=n.idx+a,l=r.readPacket(e,t,n,c);o.push(l)}return{timeTag:i,packets:o}},r.readPacket=function(e,t,n,s){var i=r.dataView(e,e.byteOffset,e.byteLength);s=void 0===s?i.byteLength:s,n=n||{idx:0};var o=r.readString(i,n),a=o[0];if("#"===a)return r.readBundleContents(i,t,n,s);if("/"===a)return r.readMessageContents(o,i,t,n);throw new Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+o)},r.writePacket=function(e,t){if(r.isValidMessage(e))return r.writeMessage(e,t);if(r.isValidBundle(e))return r.writeBundle(e,t);throw new Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(e,null,2))},r.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}},r.inferTypeForArgument=function(e){switch(typeof e){case"boolean":return e?"T":"F";case"string":return"s";case"number":return"f";case"undefined":return"N";case"object":if(null===e)return"N";if(e instanceof Uint8Array||e instanceof ArrayBuffer)return"b";if("number"==typeof e.high&&"number"==typeof e.low)return"h"}throw new Error("Can't infer OSC argument type for value: "+JSON.stringify(e,null,2))},r.annotateArguments=function(e){for(var t=[],n=0;n<e.length;n++){var s,i=e[n];s="object"==typeof i&&i.type&&void 0!==i.value?i:r.isArray(i)?r.annotateArguments(i):{type:r.inferTypeForArgument(i),value:i},t.push(s)}return t},r.isCommonJS&&(e.exports=r)}()},7102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpacePacketParser=void 0;const r=n(2203),s=n(2415);class i extends r.Transform{timeCodeFieldLength;ancillaryDataFieldLength;dataBuffer;headerBuffer;dataLength;expectingHeader;dataSlice;header;constructor(e={}){super({...e,objectMode:!0}),this.timeCodeFieldLength=e.timeCodeFieldLength||0,this.ancillaryDataFieldLength=e.ancillaryDataFieldLength||0,this.dataSlice=this.timeCodeFieldLength+this.ancillaryDataFieldLength,this.dataBuffer=Buffer.alloc(0),this.headerBuffer=Buffer.alloc(0),this.dataLength=0,this.expectingHeader=!0}pushCompletedPacket(){if(!this.header)throw new Error("Missing header");const e=Buffer.from(this.dataBuffer.slice(0,this.timeCodeFieldLength)),t=Buffer.from(this.dataBuffer.slice(this.timeCodeFieldLength,this.timeCodeFieldLength+this.ancillaryDataFieldLength)),n=Buffer.from(this.dataBuffer.slice(this.dataSlice,this.dataLength)),r={header:{...this.header},data:n.toString()};(e.length>0||t.length>0)&&(r.secondaryHeader={},e.length&&(r.secondaryHeader.timeCode=e.toString()),t.length&&(r.secondaryHeader.ancillaryData=t.toString())),this.push(r);const i=Buffer.from(this.dataBuffer.slice(this.dataLength));i.length>=s.HEADER_LENGTH?this.extractHeader(i):(this.headerBuffer=i,this.dataBuffer=Buffer.alloc(0),this.expectingHeader=!0,this.dataLength=0,this.header=void 0)}extractHeader(e){const t=Buffer.concat([this.headerBuffer,e]),n=t.slice(s.HEADER_LENGTH);t.length>=s.HEADER_LENGTH?(this.header=(0,s.convertHeaderBufferToObj)(t),this.dataLength=this.header.dataLength,this.headerBuffer=Buffer.alloc(0),this.expectingHeader=!1):this.headerBuffer=t,n.length>0&&(this.dataBuffer=Buffer.from(n),this.dataBuffer.length>=this.dataLength&&this.pushCompletedPacket())}_transform(e,t,n){this.expectingHeader?this.extractHeader(e):(this.dataBuffer=Buffer.concat([this.dataBuffer,e]),this.dataBuffer.length>=this.dataLength&&this.pushCompletedPacket()),n()}_flush(e){const t=Buffer.concat([this.headerBuffer,this.dataBuffer]),n=Array.from(t);this.push(n),e()}}t.SpacePacketParser=i},7194:e=>{"use strict";e.exports=require("dgram")},7281:(e,t,n)=>{"use strict";e.exports=a,e.exports.default=a;const r={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},isPrerelease:{type:"boolean",description:"Is this a pre-release version"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"},url:{type:"string"}},required:["name"],additionalProperties:!1}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18 or node22",enum:["node18","node22"]},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"},permissions:{type:"object",description:"Permissions required by the module. This is used to inform the user of the permissions required by the module.\nNote: this requires the node22 or newer runtime",properties:{"worker-threads":{type:"boolean",description:"Enable if the module uses worker threads"},"child-process":{type:"boolean",description:"Enable if the module uses child processes"},"native-addons":{type:"boolean",description:"Enable if the module uses native addons"},filesystem:{type:"boolean",description:"Enable if the module requires read/write access to the filesystem"}},additionalProperties:!1}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"},minItems:1},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{oneOf:[{$ref:"#/definitions/bonjourQuery"},{type:"array",items:{$ref:"#/definitions/bonjourQuery"}}]}}}},required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"],definitions:{bonjourQuery:{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},port:{type:"number"},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}}}},required:["type","protocol"]}}},s={type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},port:{type:"number"},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}}}},required:["type","protocol"]},i=n(6250).A,o=new RegExp("","u");function a(e,{instancePath:t="",parentData:n,parentDataProperty:c,rootData:l=e}={}){let u=null,d=0;if(0===d){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return a.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.$schema){const n=d;if("string"!=typeof e.$schema)return a.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=n===d}else h=!0;if(h){if(void 0!==e.id){const n=d;if("string"!=typeof e.id)return a.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.name){const n=d;if("string"!=typeof e.name)return a.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.shortname){const n=d;if("string"!=typeof e.shortname)return a.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.description){const n=d;if("string"!=typeof e.description)return a.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.version){const n=d;if("string"!=typeof e.version)return a.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.isPrerelease){const n=d;if("boolean"!=typeof e.isPrerelease)return a.errors=[{instancePath:t+"/isPrerelease",schemaPath:"#/properties/isPrerelease/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.license){const n=d;if("string"!=typeof e.license)return a.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.repository){const n=d;if("string"!=typeof e.repository)return a.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.bugs){const n=d;if("string"!=typeof e.bugs)return a.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.maintainers){let n=e.maintainers;const r=d;if(d===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var p=!0;const e=n.length;for(let r=0;r<e;r++){let e=n[r];const s=d;if(d===s){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return a.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;{const n=d;for(const n in e)if("name"!==n&&"email"!==n&&"github"!==n&&"url"!==n)return a.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===d){if(void 0!==e.name){const n=d;if("string"!=typeof e.name)return a.errors=[{instancePath:t+"/maintainers/"+r+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=n===d}else f=!0;if(f){if(void 0!==e.email){const n=d;if("string"!=typeof e.email)return a.errors=[{instancePath:t+"/maintainers/"+r+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===d}else f=!0;if(f){if(void 0!==e.github){const n=d;if("string"!=typeof e.github)return a.errors=[{instancePath:t+"/maintainers/"+r+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===d}else f=!0;if(f)if(void 0!==e.url){const n=d;if("string"!=typeof e.url)return a.errors=[{instancePath:t+"/maintainers/"+r+"/url",schemaPath:"#/properties/maintainers/items/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;f=n===d}else f=!0}}}}}}if(!(p=s===d))break}if(p){let e,r=n.length;if(r>1)for(;r--;)for(e=r;e--;)if(i(n[r],n[e]))return a.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1}}}h=r===d}else h=!0;if(h){if(void 0!==e.legacyIds){let n=e.legacyIds;const r=d;if(d===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var m=!0;const e=n.length;for(let r=0;r<e;r++){const e=d;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/legacyIds/"+r,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m=e===d))break}if(m){let e,r=n.length;if(r>1){const s={};for(;r--;){let i=n[r];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],a.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[i]=r}}}}}}h=r===d}else h=!0;if(h){if(void 0!==e.runtime){let n=e.runtime;const s=d;if(d===s){if(!n||"object"!=typeof n||Array.isArray(n))return a.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return a.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){let e=n.type;const s=d;if("string"!=typeof e)return a.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("node18"!==e&&"node22"!==e)return a.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var b=s===d}else b=!0;if(b){if(void 0!==n.api){let e=n.api;const s=d;if("string"!=typeof e)return a.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return a.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;b=s===d}else b=!0;if(b){if(void 0!==n.apiVersion){const e=d;if("string"!=typeof n.apiVersion)return a.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;b=e===d}else b=!0;if(b){if(void 0!==n.entrypoint){const e=d;if("string"!=typeof n.entrypoint)return a.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;b=e===d}else b=!0;if(b)if(void 0!==n.permissions){let e=n.permissions;const r=d;if(d===r){if(!e||"object"!=typeof e||Array.isArray(e))return a.errors=[{instancePath:t+"/runtime/permissions",schemaPath:"#/properties/runtime/properties/permissions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const n=d;for(const n in e)if("worker-threads"!==n&&"child-process"!==n&&"native-addons"!==n&&"filesystem"!==n)return a.errors=[{instancePath:t+"/runtime/permissions",schemaPath:"#/properties/runtime/properties/permissions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(n===d){if(void 0!==e["worker-threads"]){const n=d;if("boolean"!=typeof e["worker-threads"])return a.errors=[{instancePath:t+"/runtime/permissions/worker-threads",schemaPath:"#/properties/runtime/properties/permissions/properties/worker-threads/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var g=n===d}else g=!0;if(g){if(void 0!==e["child-process"]){const n=d;if("boolean"!=typeof e["child-process"])return a.errors=[{instancePath:t+"/runtime/permissions/child-process",schemaPath:"#/properties/runtime/properties/permissions/properties/child-process/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;g=n===d}else g=!0;if(g){if(void 0!==e["native-addons"]){const n=d;if("boolean"!=typeof e["native-addons"])return a.errors=[{instancePath:t+"/runtime/permissions/native-addons",schemaPath:"#/properties/runtime/properties/permissions/properties/native-addons/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;g=n===d}else g=!0;if(g)if(void 0!==e.filesystem){const n=d;if("boolean"!=typeof e.filesystem)return a.errors=[{instancePath:t+"/runtime/permissions/filesystem",schemaPath:"#/properties/runtime/properties/permissions/properties/filesystem/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;g=n===d}else g=!0}}}}}b=r===d}else b=!0}}}}}h=s===d}else h=!0;if(h){if(void 0!==e.manufacturer){const n=d;if("string"!=typeof e.manufacturer)return a.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;h=n===d}else h=!0;if(h){if(void 0!==e.products){let n=e.products;const r=d;if(d===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(n.length<1)return a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var y=!0;const e=n.length;for(let r=0;r<e;r++){const e=d;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/products/"+r,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(y=e===d))break}if(y){let e,r=n.length;if(r>1){const s={};for(;r--;){let i=n[r];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],a.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[i]=r}}}}}}h=r===d}else h=!0;if(h){if(void 0!==e.keywords){let n=e.keywords;const r=d;if(d===r){if(!Array.isArray(n))return a.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var v=!0;const e=n.length;for(let r=0;r<e;r++){const e=d;if("string"!=typeof n[r])return a.errors=[{instancePath:t+"/keywords/"+r,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v=e===d))break}if(v){let e,r=n.length;if(r>1){const s={};for(;r--;){let i=n[r];if("string"==typeof i){if("number"==typeof s[i])return e=s[i],a.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;s[i]=r}}}}}}h=r===d}else h=!0;if(h)if(void 0!==e.bonjourQueries){let n=e.bonjourQueries;const r=d;if(d===r){if(!n||"object"!=typeof n||Array.isArray(n))return a.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(const e in n)if(o.test(e)){let r=n[e];const i=d,c=d;let l=!1,h=null;const p=d;if(d==d)if(r&&"object"==typeof r&&!Array.isArray(r)){let n;if(void 0===r.type&&(n="type")||void 0===r.protocol&&(n="protocol")){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"};null===u?u=[r]:u.push(r),d++}else{if(void 0!==r.type){const n=d;if("string"!=typeof r.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}var S=n===d}else S=!0;if(S){if(void 0!==r.protocol){let n=r.protocol;const i=d;if("string"!=typeof n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}if("tcp"!==n&&"udp"!==n){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:s.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===u?u=[n]:u.push(n),d++}S=i===d}else S=!0;if(S){if(void 0!==r.port){let n=r.port;const s=d;if("number"!=typeof n||!isFinite(n)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/port",schemaPath:"#/definitions/bonjourQuery/properties/port/type",keyword:"type",params:{type:"number"},message:"must be number"};null===u?u=[n]:u.push(n),d++}S=s===d}else S=!0;if(S)if(void 0!==r.txt){let n=r.txt;const s=d;if(d===s)if(n&&"object"==typeof n&&!Array.isArray(n)){for(const r in n)if(o.test(r)){const s=d;if("string"!=typeof n[r]){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}if(s!==d)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}S=s===d}else S=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}p===d&&(l=!0,h=0);const f=d;if(d===f)if(Array.isArray(r)){const n=r.length;for(let i=0;i<n;i++){let n=r[i];const a=d;if(d==d)if(n&&"object"==typeof n&&!Array.isArray(n)){let r;if(void 0===n.type&&(r="type")||void 0===n.protocol&&(r="protocol")){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/definitions/bonjourQuery/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===u?u=[n]:u.push(n),d++}else{if(void 0!==n.type){const r=d;if("string"!=typeof n.type){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/type",schemaPath:"#/definitions/bonjourQuery/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}var w=r===d}else w=!0;if(w){if(void 0!==n.protocol){let r=n.protocol;const o=d;if("string"!=typeof r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[n]:u.push(n),d++}if("tcp"!==r&&"udp"!==r){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/protocol",schemaPath:"#/definitions/bonjourQuery/properties/protocol/enum",keyword:"enum",params:{allowedValues:s.properties.protocol.enum},message:"must be equal to one of the allowed values"};null===u?u=[n]:u.push(n),d++}w=o===d}else w=!0;if(w){if(void 0!==n.port){let r=n.port;const s=d;if("number"!=typeof r||!isFinite(r)){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/port",schemaPath:"#/definitions/bonjourQuery/properties/port/type",keyword:"type",params:{type:"number"},message:"must be number"};null===u?u=[n]:u.push(n),d++}w=s===d}else w=!0;if(w)if(void 0!==n.txt){let r=n.txt;const s=d;if(d===s)if(r&&"object"==typeof r&&!Array.isArray(r)){for(const n in r)if(o.test(n)){const s=d;if("string"!=typeof r[n]){const r={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/txt/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/bonjourQuery/properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[r]:u.push(r),d++}if(s!==d)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i+"/txt",schemaPath:"#/definitions/bonjourQuery/properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}w=s===d}else w=!0}}}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/definitions/bonjourQuery/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[n]:u.push(n),d++}if(a!==d)break}}else{const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[n]:u.push(n),d++}var _;if((_=f===d)&&l?(l=!1,h=[h,1]):_&&(l=!0,h=1),!l){const n={instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//oneOf",keyword:"oneOf",params:{passingSchemas:h},message:"must match exactly one schema in oneOf"};return null===u?u=[n]:u.push(n),d++,a.errors=u,!1}if(d=c,null!==u&&(c?u.length=c:u=null),i!==d)break}}h=r===d}else h=!0}}}}}}}}}}}}}}}}}return a.errors=u,0===d}},7386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7542:(e,t,n)=>{var r=r||n(7026);try{n(4987),n(2920)}catch(e){r.SerialPort=function(){throw new Error("The Node.js SerialPort library is not installed. osc.js' serial transport is unavailable.")}}},7687:(e,t,n)=>{"use strict";const r=n(857),s=n(9637),i=n(5884),{env:o}=process;let a;function c(e,t={}){return 0!==(n=function(e,{streamIsTTY:t,sniffFlags:n=!0}={}){const s=function(){if("FORCE_COLOR"in o)return"true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(Number.parseInt(o.FORCE_COLOR,10),3)}();void 0!==s&&(a=s);const c=n?a:s;if(0===c)return 0;if(n){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===c)return 0;const l=c||0;if("dumb"===o.TERM)return l;if("win32"===process.platform){const e=r.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(e=>e in o)||"codeship"===o.CI_NAME?1:l;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=Number.parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:l}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:n,hasBasic:!0,has256:n>=2,has16m:n>=3};var n}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?a=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=1),e.exports={supportsColor:c,stdout:c({isTTY:s.isatty(1)}),stderr:c({isTTY:s.isatty(2)})}},7699:(e,t,n)=>{"use strict";const r=n(1060);r.createWebSocketStream=n(3719),r.Server=n(1722),r.Receiver=n(6286),r.Sender=n(914),r.WebSocket=r,r.WebSocketServer=r.Server,e.exports=r},7833:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(736)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},8007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialPortMock=void 0;const r=n(5802),s=n(6848);class i extends r.SerialPortStream{static list=s.MockBinding.list;static binding=s.MockBinding;constructor(e,t){super({binding:s.MockBinding,...e},t)}}t.SerialPortMock=i},8039:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const r=n(1635),s=n(2593),i=r.__importDefault(n(7e3)),o=n(360);function a(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#P;#U;#V;#T;#q=new Map;#G=new Map;#H=new Map;#z=new Map;#Q;get parseVariablesContext(){return this.#Q}constructor(e,t,n,r){this.#P=e,this.#U=t,this.#V=n,this.#T=r}getDefinitionIds(){return Array.from(this.#q.keys())}getInstanceIds(){return Array.from(this.#G.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#G.get(t);if(e&&!n){const t=this.#q.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async e=>e};Promise.resolve(t.unsubscribe(a(t.type,e),n)).catch(t=>{this.#T("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}if(!n||n.disabled)this.#G.delete(t);else{if(this.#G.set(t,{...n}),!e){const e=this.#q.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>e};Promise.resolve(e.subscribe(a(e.type,n),t)).catch(e=>{this.#T("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)})}}this.#J(t)}}}async handleLearnFeedback(e){const t=this.#q.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#P({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}#J(e){const t=this.#z.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#G.get(e);if(!n)return;const r=n,s={needsRecheck:!1};this.#z.set(e,s),Promise.resolve().then(async()=>{const t=this.#q.get(r.feedbackId);let n;if(t){this.#Q=`Feedback ${r.feedbackId} (${e})`;const s={parseVariablesInString:async t=>(await this.#P({text:t,controlId:r.controlId,actionInstanceId:void 0,feedbackInstanceId:e})).text};switch(t.type){case"boolean":n=t.callback({...a("boolean",r),type:"boolean"},s);break;case"value":n=t.callback({...a("value",r),type:"value"},s);break;case"advanced":n=t.callback({...a("advanced",r),type:"advanced",image:r.image},s);break;default:(0,o.assertNever)(t)}this.#Q=void 0}const s=await n;this.#H.set(e,{id:e,controlId:r.controlId,value:s}),this.#Y()}).catch(e=>{console.error(`Feedback check failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)}).finally(()=>{this.#Q=void 0,this.#z.delete(e),s.needsRecheck&&setImmediate(()=>{this.#J(e)})})}#Y=(0,i.default)(()=>{const e=this.#H;this.#H=new Map,e.size>0&&this.#U({values:Array.from(e.values())})},{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#q.clear();for(const[n,r]of Object.entries(e))r&&(t.push({id:n,name:r.name,description:r.description,options:(0,s.serializeIsVisibleFn)(r.options),type:r.type,defaultStyle:"boolean"===r.type?r.defaultStyle:void 0,hasLearn:!!r.learn,learnTimeout:r.learnTimeout,showInvert:"boolean"===r.type&&r.showInvert}),this.#q.set(n,r));this.#V({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#G.entries())this.#q.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#J(e)}checkFeedbacksById(e){for(const t of e)this.#J(t)}subscribeFeedbacks(e){let t=Array.from(this.#G.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.feedbackId)));for(const e of t){const t=this.#q.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async e=>e};Promise.resolve(t.subscribe(a(t.type,e),n)).catch(t=>{this.#T("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}unsubscribeFeedbacks(e){let t=Array.from(this.#G.values());const n=new Set(e);n.size&&(t=t.filter(e=>n.has(e.feedbackId)));for(const e of t){const t=this.#q.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async e=>e};Promise.resolve(t.unsubscribe(a(t.type,e),n)).catch(t=>{this.#T("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)})}}}}},8104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadyParser=void 0;const r=n(2203);class s extends r.Transform{delimiter;readOffset;ready;constructor({delimiter:e,...t}){if(void 0===e)throw new TypeError('"delimiter" is not a bufferable object');if(0===e.length)throw new TypeError('"delimiter" has a 0 or undefined length');super(t),this.delimiter=Buffer.from(e),this.readOffset=0,this.ready=!1}_transform(e,t,n){if(this.ready)return this.push(e),n();const r=this.delimiter;let s=0;for(;this.readOffset<r.length&&s<e.length;)r[this.readOffset]===e[s]?this.readOffset++:this.readOffset=0,s++;if(this.readOffset===r.length){this.ready=!0,this.emit("ready");const t=e.slice(s);t.length>0&&this.push(t)}n()}}t.ReadyParser=s},8167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6509);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const s=r.default(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(s,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},8169:(e,t,n)=>{"function"==typeof process.addon?e.exports=process.addon.bind(process):e.exports=n(1381)},8220:(e,t,n)=>{e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(s),...t.skips.map(s).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(n=0;n<s;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(37),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},8237:(e,t,n)=>{"use strict";const{tokenChars:r}=n(5880);e.exports={parse:function(e){const t=new Set;let n=-1,s=-1,i=0;for(;i<e.length;i++){const o=e.charCodeAt(i);if(-1===s&&1===r[o])-1===n&&(n=i);else if(0===i||32!==o&&9!==o){if(44!==o)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===n)throw new SyntaxError(`Unexpected character at index ${i}`);-1===s&&(s=i);const r=e.slice(n,s);if(t.has(r))throw new SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),n=s=-1}}else-1===s&&-1!==n&&(s=i)}if(-1===n||-1!==s)throw new SyntaxError("Unexpected end of input");const o=e.slice(n,i);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}},8238:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinuxPortBinding=t.LinuxBinding=void 0;const s=r(n(1751)),i=n(8583),o=n(6924),a=n(9269),c=n(1078),l=n(6237),u=(0,s.default)("serialport/bindings-cpp");t.LinuxBinding={list:()=>(u("list"),(0,i.linuxList)()),async open(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(!e.path)throw new TypeError('"path" is not a valid port');if(!e.baudRate)throw new TypeError('"baudRate" is not a valid baudRate');u("open");const t=Object.assign({vmin:1,vtime:0,dataBits:8,lock:!0,stopBits:1,parity:"none",rtscts:!1,xon:!1,xoff:!1,xany:!1,hupcl:!0},e),n=await(0,l.asyncOpen)(t.path,t);return this.fd=n,new d(n,t)}};class d{constructor(e,t){this.fd=e,this.openOptions=t,this.poller=new o.Poller(e),this.writeOperation=null}get isOpen(){return null!==this.fd}async close(){if(u("close"),!this.isOpen)throw new Error("Port is not open");const e=this.fd;this.poller.stop(),this.poller.destroy(),this.fd=null,await(0,l.asyncClose)(e)}async read(e,t,n){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if("number"!=typeof t||isNaN(t))throw new TypeError(`"offset" is not an integer got "${isNaN(t)?"NaN":typeof t}"`);if("number"!=typeof n||isNaN(n))throw new TypeError(`"length" is not an integer got "${isNaN(n)?"NaN":typeof n}"`);if(u("read"),e.length<t+n)throw new Error("buffer is too small");if(!this.isOpen)throw new Error("Port is not open");return(0,a.unixRead)({binding:this,buffer:e,offset:t,length:n})}async write(e){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" is not a Buffer');if(u("write",e.length,"bytes"),!this.isOpen)throw u("write","error port is not open"),new Error("Port is not open");return this.writeOperation=(async()=>{0!==e.length&&(await(0,c.unixWrite)({binding:this,buffer:e}),this.writeOperation=null)})(),this.writeOperation}async update(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError('"options" is not an object');if("number"!=typeof e.baudRate)throw new TypeError('"options.baudRate" is not a number');if(u("update"),!this.isOpen)throw new Error("Port is not open");await(0,l.asyncUpdate)(this.fd,e)}async set(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError('"options" is not an object');if(u("set"),!this.isOpen)throw new Error("Port is not open");await(0,l.asyncSet)(this.fd,e)}async get(){if(u("get"),!this.isOpen)throw new Error("Port is not open");return(0,l.asyncGet)(this.fd)}async getBaudRate(){if(u("getBaudRate"),!this.isOpen)throw new Error("Port is not open");return(0,l.asyncGetBaudRate)(this.fd)}async flush(){if(u("flush"),!this.isOpen)throw new Error("Port is not open");await(0,l.asyncFlush)(this.fd)}async drain(){if(u("drain"),!this.isOpen)throw new Error("Port is not open");await this.writeOperation,await(0,l.asyncDrain)(this.fd)}}t.LinuxPortBinding=d},8443:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,s,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,s),!0;case 5:return u.fn.call(u.context,t,r,s,i),!0;case 6:return u.fn.call(u.context,t,r,s,i,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,s);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||r&&a.context!==r||o(this,i);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||s&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},8570:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var s={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=c(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=s[e])?r:(n=c(e,e<0?-1:0,!1),o&&(s[e]=n),n)}function a(e,t){if(isNaN(e))return t?g:b;if(t){if(e<0)return g;if(e>=p)return _}else{if(e<=-f)return C;if(e+1>=f)return w}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=a,n.fromBits=c;var l=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var s=a(l(n,8)),i=b,o=0;o<e.length;o+=8){var c=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+c),n);if(c<8){var h=a(l(n,c));i=i.mul(h).add(a(d))}else i=(i=i.mul(s)).add(a(d))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?u(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=o(1<<24),b=o(0);n.ZERO=b;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var v=o(1,!0);n.UONE=v;var S=o(-1);n.NEG_ONE=S;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var _=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var C=c(0,-2147483648,!1);n.MIN_VALUE=C;var k=n.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=a(l(e,6),this.unsigned),i=this,o="";;){var c=i.div(s),u=(i.sub(c.mul(s)).toInt()>>>0).toString(e);if((i=c).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return!(1&~this.low)},k.isEven=function(){return!(1&this.low)},k.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(y)},k.neg=k.negate,k.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,s=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,h+=(p+=s+l)>>>16,u+=(h+=n+a)>>>16,u+=t+o,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return b;if(r(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(C))return e.isOdd()?C:b;if(e.eq(C))return this.isOdd()?C:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,s=65535&this.high,i=this.low>>>16,o=65535&this.low,l=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,g=0,y=0,v=0;return y+=(v+=o*p)>>>16,g+=(y+=i*p)>>>16,y&=65535,g+=(y+=o*h)>>>16,f+=(g+=s*p)>>>16,g&=65535,f+=(g+=i*h)>>>16,g&=65535,f+=(g+=o*u)>>>16,f+=n*p+s*h+i*u+o*l,c((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,s,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return v;i=g}else{if(this.eq(C))return e.eq(y)||e.eq(S)?C:e.eq(C)?y:(n=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?y:S:(s=this.sub(e.mul(n)),i=n.add(s.div(e)));if(e.eq(C))return this.unsigned?g:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(s=this;s.gte(e);){n=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:l(2,o-48),h=a(n),p=h.mul(e);p.isNegative()||p.gt(s);)p=(h=a(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),s=s.sub(p)}return i},k.div=k.divide,k.modulo=function(e){return r(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return c(~this.low,~this.high,this.unsigned)},k.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},8583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linuxList=void 0;const r=n(5317),s=n(2348);t.linuxList=function(e=r.spawn){const t=[],n=e("udevadm",["info","-e"]),i=n.stdout.pipe(new s.ReadlineParser);let o=!1,a={path:"",manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0};return i.on("data",e=>{const n=e.slice(0,1),r=e.slice(3);if("P"===n)return a={path:"",manufacturer:void 0,serialNumber:void 0,pnpId:void 0,locationId:void 0,vendorId:void 0,productId:void 0},void(o=!1);var s;if(!o)if("N"!==n){if("E"===n){const e=r.match(/^(.+)=(.*)/);if(!e)return;const t={DEVNAME:"path",ID_VENDOR_ENC:"manufacturer",ID_SERIAL_SHORT:"serialNumber",ID_VENDOR_ID:"vendorId",ID_MODEL_ID:"productId",DEVLINKS:"pnpId",ID_USB_VENDOR_ENC:"manufacturer",ID_USB_SERIAL_SHORT:"serialNumber",ID_USB_VENDOR_ID:"vendorId",ID_USB_MODEL_ID:"productId"}[e[1].toUpperCase()];if(!t)return;a[t]=function(e,t){if("pnpId"===e){const e=t.match(/\/by-id\/([^\s]+)/);return(null==e?void 0:e[1])||void 0}return"manufacturer"===e?t.replace(/\\x([a-fA-F0-9]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16))):/^0x/.test(t)?t.substr(2):t}(t,e[2])}}else/(tty(S|WCH|ACM|USB|AMA|MFD|O|XRUSB)|rfcomm)/.test(s=r)&&s?t.push(a):o=!0}),new Promise((e,r)=>{n.on("close",e=>{e&&r(new Error(`Error listing ports udevadm exited with error code: ${e}`))}),n.on("error",r),i.on("error",r),i.on("finish",()=>e(t))})}},8611:e=>{"use strict";e.exports=require("http")},8739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadlineParser=void 0;const r=n(447);class s extends r.DelimiterParser{constructor(e){const t={delimiter:Buffer.from("\n","utf8"),encoding:"utf8",...e};"string"==typeof t.delimiter&&(t.delimiter=Buffer.from(t.delimiter,t.encoding)),super(t)}}t.ReadlineParser=s},8895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const r=n(1635).__importDefault(n(9278)),s=n(228),i=n(1400);class o extends s.EventEmitter{#L;#F;_socket;#S;#X=!1;#K=!1;#B=!1;#j;#Z;#n;get isConnected(){return this.#X}get isConnecting(){return this.#K}get isDestroyed(){return this.#B}constructor(e,t,n){super(),this.#L=e,this.#F=t,this.#S={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new r.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",e=>{this.#K=!1,this.#X=!1,this.#S.reconnect&&this.#ee(),this.#W(i.InstanceStatus.UnknownError,e.message),this.emit("error",e)}),this._socket.on("ready",()=>{this.#X=!0,this.#K=!1,this.#W(i.InstanceStatus.Ok),this.emit("connect")}),this._socket.on("end",()=>{this.#X=!1,this.#W(i.InstanceStatus.Disconnected),!this.#K&&this.#S.reconnect&&this.#ee(),this.emit("end")}),this._socket.on("data",e=>this.emit("data",e)),this._socket.on("drain",()=>this.emit("drain")),setImmediate(()=>{this.#B||this.connect()}),this.#n=setTimeout(()=>{this.#n=void 0,this.#B||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#L}:${this.#F} is missing an error handler!`)},5e3)}connect(){if(this.#B)throw new Error("Cannot connect destroyed socket");return!this.#K&&(this.#K=!0,this._socket.connect(this.#F,this.#L),!0)}async send(e){if(this.#B||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#X)return!1;try{return new Promise((t,n)=>{this._socket.write(e,e=>{e?n(e):t(!0)})})}catch(e){this.#X=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#W(i.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#B=!0,void 0!==this.#Z&&(clearTimeout(this.#Z),this.#Z=void 0),void 0!==this.#n&&(clearTimeout(this.#n),this.#n=void 0),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#ee(){void 0!==this.#Z&&clearTimeout(this.#Z),this.#Z=setTimeout(()=>{this.#Z=void 0,this.#W(i.InstanceStatus.Connecting),this.connect()},this.#S.reconnect_interval)}#W(e,t){this.#j!=e&&(this.#j=e,this.emit("status_change",e,t))}}t.TCPHelper=o},8965:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8443),s=n(2854),i=n(8167),o=()=>{},a=new s.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(s=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==s?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,r)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():s.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)});n(await i)}catch(e){r(e)}this._next()},t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},8983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9023:e=>{"use strict";e.exports=require("util")},9076:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialPort=void 0;const r=n(5802),s=(0,n(176).autoDetect)();class i extends r.SerialPortStream{static list=s.list;static binding=s;constructor(e,t){super({binding:s,...e},t)}}t.SerialPort=i},9077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=function(e,t){if(!t){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'")}if(e.legacyIds.includes(e.id))throw new Error(`Manifest contains itself '${e.id}' in legacyIds`);if(!(0,r.default)(e)){const e=r.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}};const r=n(1635).__importDefault(n(7281))},9095:(e,t,n)=>{const r=n(9637),s=n(9023);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(s.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:s}=this;if(s){const t=this.color,s="[3"+(t<8?t:"8;5;"+t),i=`  ${s};1m${r} [0m`;n[0]=i+n[0].split("\n").join("\n"+i),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=s.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(4662)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},9269:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unixRead=void 0;const s=n(9023),i=n(9896),o=n(3841),a=(0,r(n(1751)).default)("serialport/bindings-cpp/unixRead"),c=(0,s.promisify)(i.read);t.unixRead=async({binding:e,buffer:n,offset:r,length:s,fsReadAsync:i=c})=>{if(a("Starting read"),!e.isOpen||!e.fd)throw new o.BindingsError("Port is not open",{canceled:!0});try{const{bytesRead:o}=await i(e.fd,n,r,s,null);return 0===o?(0,t.unixRead)({binding:e,buffer:n,offset:r,length:s,fsReadAsync:i}):(a("Finished read",o,"bytes"),{bytesRead:o,buffer:n})}catch(c){if(a("read error",c),"EAGAIN"===c.code||"EWOULDBLOCK"===c.code||"EINTR"===c.code){if(!e.isOpen)throw new o.BindingsError("Port is not open",{canceled:!0});return a("waiting for readable because of code:",c.code),await(e=>new Promise((t,n)=>{if(!e.poller)throw new Error("No poller on bindings");e.poller.once("readable",e=>e?n(e):t())}))(e),(0,t.unixRead)({binding:e,buffer:n,offset:r,length:s,fsReadAsync:i})}throw("EBADF"===c.code||"ENXIO"===c.code||"UNKNOWN"===c.code||-1===c.errno)&&(c.disconnect=!0,a("disconnecting",c)),c}}},9278:e=>{"use strict";e.exports=require("net")},9562:(e,t,n)=>{!function(){"use strict";var t,r,s=n(7194),i=n(9278),o=(n(7699),[n(7026),n(825),n(2627),n(7542)]),a=(t=(t={})||{},void 0===(r=o).forEach&&(r=[r]),r.forEach(function(e){for(var n in e)t[n]=e[n]}),t);a.UDPPort=function(e){a.Port.call(this,e),this.options.localAddress=this.options.localAddress||"127.0.0.1",this.options.localPort=void 0!==this.options.localPort?this.options.localPort:57121,this.options.remoteAddress=this.options.remoteAddress||"127.0.0.1",this.options.remotePort=void 0!==this.options.remotePort?this.options.remotePort:57121,this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&this.emit("open",this.socket)};var c=a.UDPPort.prototype=Object.create(a.Port.prototype);c.constructor=a.UDPPort,c.open=function(){var e=this;this.socket||(this.socket=s.createSocket("udp4"),this.socket.on("error",function(t){e.emit("error",t)}),this.socket.bind(this.options.localPort,this.options.localAddress,function(){a.UDPPort.setupMulticast(e),e.options.broadcast&&e.socket.setBroadcast(e.options.broadcast),e.emit("open",e.socket)}))},c.listen=function(){if(this.socket){var e=this;this.socket.on("message",function(t,n){e.emit("data",t,n)}),this.socket.on("close",function(){e.emit("close")}),e.emit("ready")}},c.sendRaw=function(e,t,n){if(this.socket){var r=void 0!==e.byteLength?e.byteLength:e.length,s=this;t=t||this.options.remoteAddress,n=void 0!==n?n:this.options.remotePort,this.socket.send(e,0,r,n,t,function(e){e&&s.emit("error",e)})}else a.fireClosedPortSendError(this)},c.close=function(){this.socket&&this.socket.close()},a.UDPPort.setupMulticast=function(e){void 0!==e.options.multicastTTL&&e.socket.setMulticastTTL(e.options.multicastTTL),e.options.multicastMembership&&("string"==typeof e.options.multicastMembership&&(e.options.multicastMembership=[e.options.multicastMembership]),e.options.multicastMembership.forEach(function(t){"string"==typeof t?e.socket.addMembership(t):e.socket.addMembership(t.address,t.interface)}))},a.TCPSocketPort=function(e){a.SLIPPort.call(this,e);var t=this.options;t.address=t.address||t.localAddress||"127.0.0.1",t.port=void 0!==t.port?t.port:void 0!==t.localPort?t.localPort:57121,this.on("open",this.listen.bind(this)),this.socket=e.socket,this.socket&&this.emit("open",this.socket)},(c=a.TCPSocketPort.prototype=Object.create(a.SLIPPort.prototype)).constructor=a.TCPSocketPort,c.open=function(e,t){var n=this.options;e=e||n.address,t=void 0!==t?t:n.port,this.socket?this.socket.connect(t,e):this.socket=i.connect({port:t,host:e}),this.emit("open",this.socket)},c.listen=function(){var e=this;this.socket.on("data",function(t){e.emit("data",t,void 0)}),this.socket.on("error",function(t){e.emit("error",t)}),this.socket.on("close",function(t){e.emit("close",t)}),this.socket.on("connect",function(){e.emit("ready")})},c.sendRaw=function(e){if(this.socket){e=Buffer.from(e);try{this.socket.write(e)}catch(e){this.emit("error",e)}}},c.close=function(){this.socket.end()},e.exports=a}()},9637:e=>{"use strict";e.exports=require("tty")},9786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyUpgradeScript=void 0,t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,s]of Object.entries(n))void 0!==t.options[e]&&(t.style[s]=t.options[e],delete t.options[e],r.push(t))}}return{updatedConfig:null,updatedSecrets:null,updatedActions:[],updatedFeedbacks:r}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){const n=e[t.feedbackId];if("string"!=typeof n)continue;const s=t.options[n];void 0!==s&&(delete t.options[n],t.isInverted="true"===s||!0===Boolean(s)||Number(s)>0,r.push(t))}return{updatedConfig:null,updatedSecrets:null,updatedActions:[],updatedFeedbacks:r}}},t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedSecrets:null,updatedActions:[],updatedFeedbacks:[]})},9831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlipDecoder=void 0;const r=n(2203);class s extends r.Transform{opts;buffer;escape;start;constructor(e={}){super(e);const{START:t,ESC:n=219,END:r=192,ESC_START:s,ESC_END:i=220,ESC_ESC:o=221}=e;this.opts={START:t,ESC:n,END:r,ESC_START:s,ESC_END:i,ESC_ESC:o},this.buffer=Buffer.alloc(0),this.escape=!1,this.start=!1}_transform(e,t,n){for(let t=0;t<e.length;t++){let n=e[t];if(n!==this.opts.START){if(null==this.opts.START&&(this.start=!0),this.escape)n===this.opts.ESC_START&&this.opts.START?n=this.opts.START:n===this.opts.ESC_ESC?n=this.opts.ESC:n===this.opts.ESC_END?n=this.opts.END:(this.escape=!1,this.push(this.buffer),this.buffer=Buffer.alloc(0));else{if(n===this.opts.ESC){this.escape=!0;continue}if(n===this.opts.END){this.push(this.buffer),this.buffer=Buffer.alloc(0),this.escape=!1,this.start=!1;continue}}this.escape=!1,this.start&&(this.buffer=Buffer.concat([this.buffer,Buffer.from([n])]))}else this.start=!0}n()}_flush(e){this.push(this.buffer),this.buffer=Buffer.alloc(0),e()}}t.SlipDecoder=s},9847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteLengthParser=void 0;const r=n(2203);class s extends r.Transform{length;position;buffer;constructor(e){if(super(e),"number"!=typeof e.length)throw new TypeError('"length" is not a number');if(e.length<1)throw new TypeError('"length" is not greater than 0');this.length=e.length,this.position=0,this.buffer=Buffer.alloc(this.length)}_transform(e,t,n){let r=0;for(;r<e.length;)this.buffer[this.position]=e[r],r++,this.position++,this.position===this.length&&(this.push(this.buffer),this.buffer=Buffer.alloc(this.length),this.position=0);n()}_flush(e){this.push(this.buffer.slice(0,this.position)),this.buffer=Buffer.alloc(this.length),e()}}t.ByteLengthParser=s},9896:e=>{"use strict";e.exports=require("fs")},9967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(6278),r=n(9562);!function(e){e.Full="full",e.Compact="compact",e.Rack="rack"}(e||(e={}));const s=[{id:e.Full.toString(),label:"Full"},{id:e.Compact.toString(),label:"Compact"},{id:e.Rack.toString(),label:"Rack"}];var i=n(4434);class o extends i.EventEmitter{subscribers=new Set;osc;knownDevices=new Map;queryTimer;noDeviceTimeout;logger;constructor(e){super(),this.logger=e}addLogger(e){this.logger=e}subscribe(e){const t=0===this.subscribers.size;this.subscribers.add(e),t&&this.startListening()}unsubscribe(e){this.subscribers.delete(e)&&0===this.subscribers.size&&this.stopListening()}listKnown(){return Array.from(this.knownDevices.values()).sort((e,t)=>e.deviceName.localeCompare(t.deviceName))}startListening(){this.knownDevices.clear(),0!==this.subscribers.size&&(this.noDeviceTimeout&&clearTimeout(this.noDeviceTimeout),this.noDeviceTimeout=setTimeout(()=>{0===this.knownDevices.size&&this.emit("no-device-detected"),this.noDeviceTimeout=void 0},3e4),this.osc=new r.UDPPort({localAddress:"0.0.0.0",localPort:0,broadcast:!0,metadata:!0,remoteAddress:"255.255.255.255",remotePort:2223}),this.osc.on("error",e=>{this.stopListening(),this.startListening()}),this.osc.on("ready",()=>{this.queryTimer||(this.queryTimer=setInterval(()=>this.sendQuery(),1e4)),this.sendQuery()}),this.osc.on("close",()=>{this.stopListening()}),this.osc.on("message",t=>{this.logger?.debug(`received device detector message ${JSON.stringify(t)}`);const n=t.args;if(!n||0===n.length||"s"!==n[0].type)return;const r=n[0].value.split(","),s={ip:r[1],name:r[2],model:r[3],serial:r[4],version:r[5]},i={address:s.ip,deviceName:s.name,model:e.Full,lastSeen:Date.now()};this.knownDevices.has(i.address)||this.logger?.info(`Detected console ${i.deviceName} at ${i.address}`),this.knownDevices.set(i.address,i);for(const[e,t]of Array.from(this.knownDevices.entries()))t.lastSeen<Date.now()-2e4&&(this.logger?.info(`Removing console ${t.deviceName} at ${t.address} from known devices due to timeout`),this.knownDevices.delete(e));this.noDeviceTimeout&&this.knownDevices.size>0&&(clearTimeout(this.noDeviceTimeout),this.noDeviceTimeout=void 0)}),this.osc.open())}stopListening(){if(this.osc){try{this.osc.close()}catch(e){}delete this.osc}this.knownDevices.clear(),this.queryTimer&&(clearInterval(this.queryTimer),delete this.queryTimer)}sendQuery(){this.osc&&this.osc.send({address:"/?",args:[]})}}const a=new o,c=e=>[{type:"number",label:"Fade Duration (ms)",id:"fadeDuration",default:0,min:0,step:10,max:6e4,tooltip:"Set the desired duration of the transition in milliseconds. Be aware that the minimal temporal resolution is defined by the Fader Update Rate setting of the module.",isVisibleExpression:e},{type:"dropdown",label:"Algorithm",id:"fadeAlgorithm",default:"linear",choices:[{id:"linear",label:"Linear"},{id:"quadratic",label:"Quadratic"},{id:"cubic",label:"Cubic"},{id:"quartic",label:"Quartic"},{id:"quintic",label:"Quintic"},{id:"sinusoidal",label:"Sinusoidal"},{id:"exponential",label:"Exponential"},{id:"circular",label:"Circular"},{id:"elastic",label:"Elastic"},{id:"back",label:"Back"},{id:"bounce",label:"Bounce"}],isVisibleExpression:`$(options:fadeDuration) > 0 && (${e??"true"})`,tooltip:"Select the algorithm with which the fade is performed."},{type:"dropdown",label:"Fade type",id:"fadeType",default:"ease-in-out",choices:[{id:"ease-in",label:"Ease-In"},{id:"ease-out",label:"Ease-Out"},{id:"ease-in-out",label:"Ease-In-Out"}],isVisibleExpression:`$(options:fadeDuration) > 0 && $(options:fadeAlgorithm) != 'linear' && (${e??"true"})`,tooltip:"Select how to ease your algorithm. Easing avoids abrupt changes in value"}];function l(e,t){return{id:e,label:t??e}}function u(e,t,n,r,s){s=s??"true";const i=function(e,t,n,r){return{type:"checkbox",label:e,id:t,default:n??!1,tooltip:r}}(e,t,n,r);return i.isVisibleExpression=`!$(options:${t}_use_variables) && (${s})`,[{type:"checkbox",label:`Use Variables for ${e}`,id:`${t}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:s},i,{type:"textinput",id:`${t}_variables`,label:e,default:"",tooltip:r,useVariables:!0,isVisibleExpression:`$(options:${t}_use_variables) && (${s})`}]}function d(e,t,n,r,s,i,o,a){return{type:"number",label:e,id:t,default:i??0,min:n,step:s,max:r,range:o,tooltip:a}}function h(e,n,r,s,i,o,a,c){return c=c??"true",[{type:"textinput",id:n,label:e,default:o?.toString()??"",tooltip:a+" (Min: "+r+", Max: "+s+")",useVariables:!0,regex:(i??1)%1==0?t.Regex.SIGNED_NUMBER:t.Regex.SIGNED_FLOAT,isVisibleExpression:c}]}function p(e,t,n,r,s){s=s??"true";const i=function(e,t,n,r){return{type:"textinput",label:e,id:t,default:n??"",tooltip:r}}(e,t,n,r);return i.isVisibleExpression=s,i.useVariables=!0,[i]}function f(e,t,n,r,s,i,o){return d(e,t,n,r,s,i,!0,o)}function m(e,t,n,r,s){return 0==n.length?{type:"dropdown",label:e,id:t,default:"",choices:[],tooltip:s}:{type:"dropdown",label:e,id:t,default:r??n[0].id??"",choices:n,tooltip:s}}function b(e,t,n,r,s,i){i=i??"true";const o=n.map(e=>`${e.id}=${e.label}`).join(", "),a=m(e,t,n,r,s??`Available choices: ${o}`);return a.isVisibleExpression=`!$(options:${t}_use_variables) && (${i})`,[{type:"checkbox",label:`Use Variables for ${e}`,id:`${t}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:i},a,{type:"textinput",id:`${t}_variables`,label:e,default:"",tooltip:s??`Available choices: ${o}`,useVariables:!0,isVisibleExpression:`$(options:${t}_use_variables) && (${i})`}]}function g(e,t,n,r){r=r??"true";const s=function(e,t,n){const r=m(t??"Mute",e,[l("1","Mute"),l("0","Unmute")],"1","Select whether to Mute, Unmute or Toggle your selected target");return 0==n?r:{...r,choices:[...r.choices,l("-1","Toggle")],default:"-1"}}(e,t,n);return n=n??!0,s.isVisibleExpression=`!$(options:${e}_use_variables) && (${r})`,[{type:"checkbox",label:`Use Variables for ${t}`,id:`${e}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:r},s,{type:"textinput",id:`${e}_variables`,label:t??"Mute",default:"",tooltip:n?"Mute: 1, Unmute: 0, Toggle: -1":"Mute: 1, Unmute: 0",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && (${r})`}]}function y(e,t,n,r){r=r??"true";const s=function(e,t,n){const r=m(t??"Selection",e,[l("1","On"),l("0","Off")],"1","Select whether to turn On, Off, or Toggle your selected target");return 0==n?r:{...r,choices:[...r.choices,l("-1","Toggle")]}}(e,t,n);return s.isVisibleExpression=`!$(options:${e}_use_variables) && (${r})`,[{type:"checkbox",label:`Use Variables for ${t}`,id:`${e}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:r},s,{type:"textinput",id:`${e}_variables`,label:t??"Selection",default:"",tooltip:"On: 1, Off: 0, Toggle: -1",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && (${r})`}]}function v(e,t,n){n=n??"true";const r=f(t??"Panorama",e,-100,100,1,0,"Set the panorama of the selected target between -100 (Left) and +100 (Right)");return r.isVisibleExpression=`!$(options:${e}_use_variables) && (${n})`,[{type:"checkbox",label:`Use Variables for ${t??"Panorama"}`,id:`${e}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:n},r,{type:"textinput",id:`${e}_variables`,label:t??"Panorama",default:"",tooltip:"Set the panorama of the selected target between -100 (Left) and +100 (Right)",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && (${n})`},...c(n)]}function S(e,t,n){n=n??"true";const r=f(t??"Panorama",e,-200,200,1,0);return r.isVisibleExpression=`!$(options:${e}_use_variables) && (${n})`,[{type:"checkbox",label:`Use Variables for ${t??"Panorama"}`,id:`${e}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:n},r,{type:"textinput",id:`${e}_variables`,label:t??"Panorama",default:"",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && (${n})`},...c(n)]}function w(e,t,n){n=n??"true";const r=d(t??"Level (dB)",e,-144,10,.1,0,!0,"Set the fader level of the selected target");return r.isVisibleExpression=`!$(options:${e}_use_variables) && (${n})`,[{type:"checkbox",label:"Use Variables for "+(t??"Level (dB)"),id:`${e}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:n},r,{type:"textinput",id:`${e}_variables`,label:t??"Level (dB)",default:"",tooltip:"Set the fader level of the selected target",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && (${n})`},...c(n)]}function _(e,t,n){n=n??"true";const r=d(t?t+" (dB)":"Level (dB)",e,-154,154,1,0,!0);r.isVisibleExpression=`!$(options:${e}_use_variables) && !$(options:${e}_use_percentage) && (${n})`;const s=d(t?t+" (%)":"Level (%)",`${e}_percent`,-100,100,1,0,!0);return s.isVisibleExpression=`!$(options:${e}_use_variables) && $(options:${e}_use_percentage) && (${n})`,[{type:"checkbox",label:`Use Variables for ${t??"Level (dB)"}`,id:`${e}_use_variables`,default:!1,tooltip:"Enable to use variables",isVisibleExpression:n},{type:"checkbox",label:"Use Percentage",id:`${e}_use_percentage`,default:!1,tooltip:"Use percentage adjustment (100%) instead of dB.",isVisibleExpression:n},r,{type:"textinput",id:`${e}_variables`,label:t??"Level (dB)",default:"",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && !$(options:${e}_use_percentage) && (${n})`},s,{type:"textinput",id:`${e}_percent_variables`,label:t??"Level (%)",default:"",useVariables:!0,isVisibleExpression:`$(options:${e}_use_variables) && $(options:${e}_use_percentage) && (${n})`},...c(n)]}function C(e,t,n){const r=e.map(e=>`${e.id}=${e.label}`).join(", "),s=t.map(e=>`${e.id}=${e.label}`).join(", ");return[{type:"checkbox",label:"Use Variables for Source and Destination",id:"send_src_dest_use_variables",default:!1,tooltip:"Enable to use variables"},{...m("From","src",e),isVisibleExpression:"!$(options:send_src_dest_use_variables)"},{...m("To","dest",t),isVisibleExpression:"!$(options:send_src_dest_use_variables) && indexOf($(options:src), '/main') != 0"},{...m("To","mainDest",n),isVisibleExpression:"!$(options:send_src_dest_use_variables) && indexOf($(options:src), '/main') == 0"},{type:"textinput",id:"send_src_variables",label:"From",default:"",tooltip:`Available choices: ${r}`,useVariables:!0,isVisibleExpression:"$(options:send_src_dest_use_variables)"},{type:"textinput",id:"send_dest_variables",label:"To",default:"",tooltip:`Available choices: ${s}`,useVariables:!0,isVisibleExpression:"$(options:send_src_dest_use_variables)"}]}var k,E,I,$,x,O,P,N,M;function T(){return[l("OFF","Off"),l("LCL","Local"),l("AUX","Aux"),l("A","AES A"),l("B","AES B"),l("C","AES C"),l("SC","StageConnect"),l("USB","USB Player"),l("CRD","Expansion Card"),l("MOD","Module"),l("PLAY","Player"),l("AES","AES/EBU"),l("USR","User"),l("OSC","Oscillator"),l("BUS","Bus"),l("MAIN","Main"),l("MTX","Matrix")]}function A(e,t){const n=t.get(e);if(!n||0===n.length)return;const r=n[0];return"s"===r.type?r.value:void 0}function D(e,t){const n=`${e}`;return t.popPressValue(n)}function L(e,t){const n=t.get(e);if(!n||0===n.length)return;const r=n[0];if("f"===r.type||"i"===r.type)return r.value;if("s"===r.type){const e=parseFloat(r.value);return isNaN(e)?void 0:e}}function F(e,t){const n=L(e,t);return 0!=n&&(1==n||void 0)}function R(e,t){!function(e,t,n){const r=`${e}`;void 0!==n&&t.setPressValue(r,n)}(e,t,L(e,t))}function B(e){return e.map(e=>({id:e.toString().toLowerCase(),label:e.toString()}))}function j(e,t){return e.options[t]?.toString().split("/")[2]}function W(e){return e.split("/")[2]}function U(e,t,n){const r=e.options[t];if(void 0!==n&&void 0===r)return n;const s=Number(r);if(isNaN(s))throw new Error(`Invalid option '${t}'`);return s}function V(e,t,n){const r=e.options[`${t}_use_variables`];let s="";return!1===r||void 0===r?s=e.options[t]:!0===r&&(s=e.options[`${t}_variables`]),s??n??""}function q(e,t,n){const r=e.options[`${t}_use_variables`];let s=0;if(!1===r||void 0===r)s=Number(e.options[t]);else if(!0===r){const n=e.options[`${t}_variables`];s="-oo"==n?-144:Number(n)}if(isNaN(s)){if(void 0!==n)return n;throw new Error(`Invalid option '${t}'`)}return s}function G(e){let t="",n="";return!0===e.options.send_src_dest_use_variables?(t=e.options.send_src_variables,n=e.options.send_dest_variables):(t=e.options.src,n=t.startsWith("/main")?e.options.mainDest:e.options.dest),{src:t,dest:n}}function H(e,t,n,r,s,i,o){const a=L(e,r),c=i??U(n,t);s.run(e,a,c,U(n,"fadeDuration"),(e=>e.options.fadeAlgorithm)(n),(e=>e.options.fadeType)(n),o),r.set(e,[{type:"f",value:c}])}function z(e,t){let n="";return e.startsWith("/ch")?n=E.InputGain(t):e.startsWith("/aux")&&(n=I.InputGain(t)),n}function Q(e,t){let n="";return e.startsWith("/ch")?n=E.Mute(t):e.startsWith("/aux")?n=I.Mute(t):e.startsWith("/bus")?n=$.Mute(t):e.startsWith("/mtx")?n=x.Mute(t):e.startsWith("/main")?n=O.Mute(t):e.startsWith("/dca")?n=P.Mute(t):e.startsWith("/mgrp")&&(n=N.Mute(t)),n}function J(e,t){let n="";return e.startsWith("/ch")?n=E.Solo(t):e.startsWith("/aux")?n=I.Solo(t):e.startsWith("/bus")?n=$.Solo(t):e.startsWith("/mtx")?n=x.Solo(t):e.startsWith("/main")?n=O.Solo(t):e.startsWith("/dca")&&(n=P.Solo(t)),n}function Y(e,t){let n="";return e.startsWith("/ch")?n=E.Fader(t):e.startsWith("/aux")?n=I.Fader(t):e.startsWith("/bus")?n=$.Fader(t):e.startsWith("/mtx")?n=x.Fader(t):e.startsWith("/main")?n=O.Fader(t):e.startsWith("/dca")&&(n=P.Fader(t)),n}function X(e,t){let n="";return e.startsWith("/ch")?n=E.Pan(t):e.startsWith("/aux")?n=I.Pan(t):e.startsWith("/bus")?n=$.Pan(t):e.startsWith("/mtx")?n=x.Pan(t):e.startsWith("/main")&&(n=O.Pan(t)),n}function K(e,t){let n="";return e.startsWith("/ch")?n=E.DelayAmount(t):e.startsWith("/bus")?n=$.DelayAmount(t):e.startsWith("/mtx")?n=x.DelayAmount(t):e.startsWith("/main")&&(n=O.DelayAmount(t)),n}function Z(e,t){let n="";return e.startsWith("/ch")?t.startsWith("/bus")?n=E.SendOn(W(e),W(t)):t.startsWith("/mtx")?n=E.MatrixSendOn(W(e),W(t)):t.startsWith("/main")&&(n=E.MainSendOn(W(e),W(t))):e.startsWith("/aux")?t.startsWith("/bus")?n=I.SendOn(W(e),W(t)):t.startsWith("/mtx")?n=I.MatrixSendOn(W(e),W(t)):t.startsWith("/main")&&(n=I.MainSendOn(W(e),W(t))):e.startsWith("/bus")?t.startsWith("/bus")?n=$.SendOn(W(e),W(t)):t.startsWith("/mtx")?n=$.MatrixSendOn(W(e),W(t)):t.startsWith("/main")&&(n=$.MainSendOn(W(e),W(t))):e.startsWith("/main")&&t.startsWith("/mtx")&&(n=O.MatrixSendOn(W(e),W(t))),n}function ee(e,t){let n="";return e.startsWith("/ch")?t.startsWith("/bus")?n=E.SendLevel(W(e),W(t)):t.startsWith("/mtx")?n=E.MatrixSendLevel(W(e),W(t)):t.startsWith("/main")&&(n=E.MainSendLevel(W(e),W(t))):e.startsWith("/aux")?t.startsWith("/bus")?n=I.SendLevel(W(e),W(t)):t.startsWith("/mtx")?n=I.MatrixSendLevel(W(e),W(t)):t.startsWith("/main")&&(n=I.MainSendLevel(W(e),W(t))):e.startsWith("/bus")?t.startsWith("/bus")?n=$.SendLevel(W(e),W(t)):t.startsWith("/mtx")?n=$.MatrixSendLevel(W(e),W(t)):t.startsWith("/main")&&(n=$.MainSendLevel(W(e),W(t))):e.startsWith("/main")&&t.startsWith("/mtx")&&(n=O.MatrixSendLevel(W(e),W(t))),n}function te(e,t){let n="";return e.startsWith("/ch")?t.startsWith("/bus")?n=E.SendPan(W(e),W(t)):t.startsWith("/mtx")&&(n=E.MatrixSendPan(W(e),W(t))):e.startsWith("/aux")&&(t.startsWith("/bus")?n=I.SendPan(W(e),W(t)):t.startsWith("/mtx")&&(n=I.MatrixSendPan(W(e),W(t)))),n}function ne(e,t){let n="";const r=t.split("/")[2];return t.startsWith("/bus")?n=M.TalkbackBusAssign(e,r):t.startsWith("/mtx")?n=M.TalkbackMatrixAssign(e,r):t.startsWith("/main")&&(n=M.TalkbackMainAssign(e,r)),n}function re(e,t){let n="";return e.startsWith("/ch")?n=E.PreInsertOn(t):e.startsWith("/aux")?n=I.PreInsertOn(t):e.startsWith("/bus")?n=$.PreInsertOn(t):e.startsWith("/mtx")?n=x.PreInsertOn(t):e.startsWith("/main")&&(n=O.PreInsertOn(t)),n}function se(e,t){let n="";return e.startsWith("/ch")?n=E.PostInsertOn(t):e.startsWith("/bus")?n=$.PostInsertOn(t):e.startsWith("/mtx")?n=x.PostInsertOn(t):e.startsWith("/main")&&(n=O.PostInsertOn(t)),n}function ie(e){if("current"===e)return-1;if("off"==e)return 0;{const t=e.match(/^\/(ch|aux|bus|main|mtx)\/(\d+)$/);if(t){const e=t[1],n=t[2]?parseInt(t[2]):0;switch(e){case"ch":return n;case"aux":return 40+n;case"bus":return 48+n;case"main":return 64+n;case"mtx":return 68+n}}}return 0}function oe(e){return-1===e?"current":0===e?"off":e>=1&&e<=32?`/ch/${e}`:e>=40&&e<=47?"/aux/"+(e-40):e>=48&&e<=63?"/bus/"+(e-48):e>=64&&e<=67?"/main/"+(e-64):e>=68&&e<=71?"/mtx/"+(e-68):""}!function(e){e.Equal="eq",e.NotEqual="ne",e.LessThan="lt",e.LessThanEqual="lte",e.GreaterThan="gt",e.GreaterThanEqual="gte"}(k||(k={})),function(e){function t(e){return`/ch/${e}`}function n(e){return`${t(e)}/in`}function r(e){return`${n(e)}/set`}function s(e){return`${n(e)}/conn`}function i(e){return`${t(e)}/flt`}function o(e){return`${t(e)}/preins`}function a(e,n){return`${t(e)}/main/${n}`}function c(e,n){return`${t(e)}/send/${n}`}function l(e,n){return`${t(e)}/send/MX${n}`}function u(e){return`${t(e)}/postins`}function d(e){return`${t(e)}/gate`}function h(e){return`${t(e)}/eq`}function p(e){return`${t(e)}/dyn`}e.Node=t,e.InputNode=n,e.InputSetNode=r,e.InputAutoSourceSwitch=function(e){return`${r(e)}/srcauto`},e.InputAltSource=function(e){return`${r(e)}/altsrc`},e.InputInvert=function(e){return`${r(e)}/inv`},e.InputTrim=function(e){return`${r(e)}/trim`},e.InputBalance=function(e){return`${r(e)}/bal`},e.InputDelayMode=function(e){return`${r(e)}/dlymode`},e.InputGain=function(e){return`${r(e)}/$g`},e.InputPhantomPower=function(e){return`${r(e)}/$vph`},e.DelayOn=function(e){return`${r(e)}/dlyon`},e.DelayMode=function(e){return`${r(e)}/dlymode`},e.DelayAmount=function(e){return`${r(e)}/dly`},e.InputConnectionNode=s,e.MainInputConnectionGroup=function(e){return`${s(e)}/grp`},e.MainInputConnectionIndex=function(e){return`${s(e)}/in`},e.AltInputConnectionGroup=function(e){return`${s(e)}/altgrp`},e.AltInputConnectionIndex=function(e){return`${s(e)}/altin`},e.FilterNode=i,e.LowCutSwitch=function(e){return`${i(e)}/lc`},e.LowCutFrequency=function(e){return`${i(e)}/lcf`},e.HighCutSwitch=function(e){return`${i(e)}/hc`},e.HighCutFrequency=function(e){return`${i(e)}/hcf`},e.FilterSwitch=function(e){return`${i(e)}/tf`},e.FilterModel=function(e){return`${i(e)}/mdl`},e.FilterTilt=function(e){return`${i(e)}/tilt`},e.CustomLink=function(e){return`${t(e)}/clink`},e.Color=function(e){return`${t(e)}/col`},e.Name=function(e){return`${t(e)}/name`},e.RealName=function(e){return`${t(e)}/$name`},e.Icon=function(e){return`${t(e)}/icon`},e.ScribbleLight=function(e){return`${t(e)}/led`},e.Mute=function(e){return`${t(e)}/mute`},e.Fader=function(e){return`${t(e)}/fdr`},e.Pan=function(e){return`${t(e)}/pan`},e.Width=function(e){return`${t(e)}/wid`},e.Solo=function(e){return`${t(e)}/$solo`},e.SoloLed=function(e){return`${t(e)}/$sololed`},e.SoloSafe=function(e){return`${t(e)}/solosafe`},e.MonitorMode=function(e){return`${t(e)}/mon`},e.ProcessOrder=function(e){return`${t(e)}/proc`},e.PreTap=function(e){return`${t(e)}/ptap`},e.PreSolo=function(e){return`${t(e)}/$presolo`},e.PreInsertNode=o,e.PreInsertOn=function(e){return`${o(e)}/on`},e.MainNode=a,e.MainSendOn=function(e,t){return`${a(e,t)}/on`},e.MainSendLevel=function(e,t){return`${a(e,t)}/lvl`},e.SendNode=c,e.SendOn=function(e,t){return`${c(e,t)}/on`},e.SendLevel=function(e,t){return`${c(e,t)}/lvl`},e.SendPreAlwaysOn=function(e,t){return`${c(e,t)}/pon`},e.SendIndividualTap=function(e,t){return`${c(e,t)}/ind`},e.SendMode=function(e,t){return`${c(e,t)}/mode`},e.SendPanLink=function(e,t){return`${c(e,t)}/plink`},e.SendPan=function(e,t){return`${c(e,t)}/pan`},e.SendWidth=function(e,t){return`${c(e,t)}/wid`},e.MatrixSendNode=l,e.MatrixSendOn=function(e,t){return`${l(e,t)}/on`},e.MatrixSendLevel=function(e,t){return`${l(e,t)}/lvl`},e.MatrixSendPan=function(e,t){return`${l(e,t)}/pan`},e.PostInsertNode=u,e.PostInsertOn=function(e){return`${u(e)}/on`},e.GateNode=d,e.GateOn=function(e){return`${d(e)}/on`},e.EqNode=h,e.EqOn=function(e){return`${h(e)}/on`},e.EqModel=function(e){return`${h(e)}/mdl`},e.DynamicsNode=p,e.DynamicsOn=function(e){return`${p(e)}/on`}}(E||(E={})),function(e){function t(e){return`/aux/${e}`}function n(e){return`${t(e)}/in`}function r(e){return`${n(e)}/set`}function s(e){return`${n(e)}/conn`}function i(e){return`${t(e)}/preins`}function o(e,n){return`${t(e)}/main/${n}`}function a(e,n){return`${t(e)}/send/${n}`}function c(e,n){return`${t(e)}/send/MX${n}`}function l(e){return`${t(e)}/eq`}function u(e){return`${t(e)}/dyn`}e.Node=t,e.InputNode=n,e.InputSetNode=r,e.InputAutoSourceSwitch=function(e){return`${r(e)}/srcauto`},e.InputAltSource=function(e){return`${r(e)}/altsrc`},e.InputInvert=function(e){return`${r(e)}/inv`},e.InputTrim=function(e){return`${r(e)}/trim`},e.InputBalance=function(e){return`${r(e)}/bal`},e.InputGain=function(e){return`${r(e)}/$g`},e.InputPhantomPower=function(e){return`${r(e)}/$vph`},e.InputConnectionNode=s,e.MainInputConnectionGroup=function(e){return`${s(e)}/grp`},e.MainInputConnectionIndex=function(e){return`${s(e)}/in`},e.AltInputConnectionGroup=function(e){return`${s(e)}/altgrp`},e.AltInputConnectionIndex=function(e){return`${s(e)}/altin`},e.CustomLink=function(e){return`${t(e)}/clink`},e.Color=function(e){return`${t(e)}/col`},e.Name=function(e){return`${t(e)}/name`},e.RealName=function(e){return`${t(e)}/$name`},e.Icon=function(e){return`${t(e)}/icon`},e.ScribbleLight=function(e){return`${t(e)}/led`},e.Mute=function(e){return`${t(e)}/mute`},e.Fader=function(e){return`${t(e)}/fdr`},e.Pan=function(e){return`${t(e)}/pan`},e.Width=function(e){return`${t(e)}/wid`},e.Solo=function(e){return`${t(e)}/$solo`},e.SoloLed=function(e){return`${t(e)}/$sololed`},e.SoloSafe=function(e){return`${t(e)}/solosafe`},e.MonitorMode=function(e){return`${t(e)}/mon`},e.PreInsertNode=i,e.PreInsertOn=function(e){return`${i(e)}/on`},e.MainNode=o,e.MainSendOn=function(e,t){return`${o(e,t)}/on`},e.MainSendLevel=function(e,t){return`${o(e,t)}/lvl`},e.SendNode=a,e.SendOn=function(e,t){return`${a(e,t)}/on`},e.SendLevel=function(e,t){return`${a(e,t)}/lvl`},e.SendPan=function(e,t){return`${a(e,t)}/pan`},e.MatrixSendNode=c,e.MatrixSendOn=function(e,t){return`${c(e,t)}/on`},e.MatrixSendLevel=function(e,t){return`${c(e,t)}/lvl`},e.MatrixSendPan=function(e,t){return`${c(e,t)}/pan`},e.EqNode=l,e.EqOn=function(e){return`${l(e)}/on`},e.DynamicsNode=u,e.DynamicsOn=function(e){return`${u(e)}/on`}}(I||(I={})),function(e){function t(e){return`/bus/${e}`}function n(e){return`${t(e)}/in`}function r(e){return`${n(e)}/set`}function s(e,n){return`${t(e)}/main/${n}`}function i(e,n){return`${t(e)}/send/${n}`}function o(e,n){return`${t(e)}/send/MX${n}`}function a(e){return`${t(e)}/dly`}function c(e){return`${t(e)}/eq`}function l(e){return`${t(e)}/dyn`}function u(e){return`${t(e)}/preins`}function d(e){return`${t(e)}/postins`}e.Node=t,e.InputNode=n,e.InputSetNode=r,e.InputInvert=function(e){return`${r(e)}/inv`},e.InputTrim=function(e){return`${r(e)}/trim`},e.InputBalance=function(e){return`${r(e)}/bal`},e.Color=function(e){return`${t(e)}/col`},e.Name=function(e){return`${t(e)}/name`},e.Icon=function(e){return`${t(e)}/icon`},e.ScribbleLight=function(e){return`${t(e)}/led`},e.MonoSwitch=function(e){return`${t(e)}/busmono`},e.Mute=function(e){return`${t(e)}/mute`},e.Fader=function(e){return`${t(e)}/fdr`},e.Pan=function(e){return`${t(e)}/pan`},e.Width=function(e){return`${t(e)}/wid`},e.Solo=function(e){return`${t(e)}/$solo`},e.SoloLed=function(e){return`${t(e)}/$sololed`},e.MonitorMode=function(e){return`${t(e)}/mon`},e.Mode=function(e){return`${t(e)}/busmode`},e.MainNode=s,e.MainSendOn=function(e,t){return`${s(e,t)}/on`},e.MainSendLevel=function(e,t){return`${s(e,t)}/lvl`},e.SendNode=i,e.SendOn=function(e,t){return`${i(e,t)}/on`},e.SendLevel=function(e,t){return`${i(e,t)}/lvl`},e.SendPan=function(e,t){return`${i(e,t)}/pan`},e.MatrixSendNode=o,e.MatrixSendOn=function(e,t){return`${o(e,t)}/on`},e.MatrixSendLevel=function(e,t){return`${o(e,t)}/lvl`},e.MatrixSendPan=function(e,t){return`${o(e,t)}/pan`},e.DelayNode=a,e.DelayOn=function(e){return`${a(e)}/on`},e.DelayMode=function(e){return`${a(e)}/mode`},e.DelayAmount=function(e){return`${a(e)}/dly`},e.EqNode=c,e.EqOn=function(e){return`${c(e)}/on`},e.DynamicsNode=l,e.DynamicsOn=function(e){return`${l(e)}/on`},e.PreInsertNode=u,e.PreInsertOn=function(e){return`${u(e)}/on`},e.PostInsertNode=d,e.PostInsertOn=function(e){return`${d(e)}/on`}}($||($={})),function(e){function t(e){return`/mtx/${e}`}function n(e){return`${t(e)}/in`}function r(e){return`${n(e)}/set`}function s(e){return`${t(e)}/dir`}function i(e){return`${t(e)}/dly`}function o(e){return`${t(e)}/eq`}function a(e){return`${t(e)}/dyn`}function c(e){return`${t(e)}/preins`}function l(e){return`${t(e)}/postins`}e.Node=t,e.InputNode=n,e.InputSetNode=r,e.InputInvert=function(e){return`${r(e)}/inv`},e.InputTrim=function(e){return`${r(e)}/trim`},e.InputBalance=function(e){return`${r(e)}/bal`},e.DirectInputNode=s,e.DirectInputSwitch=function(e){return`${s(e)}/on`},e.DirectInputLevel=function(e){return`${s(e)}/lvl`},e.DirectInputInvert=function(e){return`${s(e)}/inv`},e.DirectInputTap=function(e){return`${s(e)}/tap`},e.DirectInputIn=function(e){return`${s(e)}/in`},e.Color=function(e){return`${t(e)}/col`},e.Name=function(e){return`${t(e)}/name`},e.RealName=function(e){return`${t(e)}/$name`},e.Icon=function(e){return`${t(e)}/icon`},e.ScribbleLight=function(e){return`${t(e)}/led`},e.MonoSwitch=function(e){return`${t(e)}/busmono`},e.Mute=function(e){return`${t(e)}/mute`},e.Fader=function(e){return`${t(e)}/fdr`},e.Pan=function(e){return`${t(e)}/pan`},e.Width=function(e){return`${t(e)}/wid`},e.Solo=function(e){return`${t(e)}/$solo`},e.SoloLed=function(e){return`${t(e)}/$sololed`},e.MonitorMode=function(e){return`${t(e)}/mon`},e.DelayNode=i,e.DelayOn=function(e){return`${i(e)}/on`},e.DelayMode=function(e){return`${i(e)}/mode`},e.DelayAmount=function(e){return`${i(e)}/dly`},e.EqNode=o,e.EqOn=function(e){return`${o(e)}/on`},e.DynamicsNode=a,e.DynamicsOn=function(e){return`${a(e)}/on`},e.PreInsertNode=c,e.PreInsertOn=function(e){return`${c(e)}/on`},e.PostInsertNode=l,e.PostInsertOn=function(e){return`${l(e)}/on`}}(x||(x={})),function(e){function t(e){return`/main/${e}`}function n(e){return`${t(e)}/in`}function r(e){return`${n(e)}/set`}function s(e,n){return`${t(e)}/send/MX${n}`}function i(e){return`${t(e)}/dly`}function o(e){return`${t(e)}/eq`}function a(e){return`${t(e)}/dyn`}function c(e){return`${t(e)}/preins`}function l(e){return`${t(e)}/postins`}e.Node=t,e.InputNode=n,e.InputSetNode=r,e.InputInvert=function(e){return`${r(e)}/inv`},e.InputTrim=function(e){return`${r(e)}/trim`},e.InputBalance=function(e){return`${r(e)}/bal`},e.Color=function(e){return`${t(e)}/col`},e.Name=function(e){return`${t(e)}/name`},e.RealName=function(e){return`${t(e)}/$name`},e.Icon=function(e){return`${t(e)}/icon`},e.ScribbleLight=function(e){return`${t(e)}/led`},e.MonoSwitch=function(e){return`${t(e)}/busmono`},e.Mute=function(e){return`${t(e)}/mute`},e.Fader=function(e){return`${t(e)}/fdr`},e.Pan=function(e){return`${t(e)}/pan`},e.Width=function(e){return`${t(e)}/wid`},e.Solo=function(e){return`${t(e)}/$solo`},e.SoloLed=function(e){return`${t(e)}/$sololed`},e.MonitorMode=function(e){return`${t(e)}/mon`},e.MatrixSendNode=s,e.MatrixSendOn=function(e,t){return`${s(e,t)}/on`},e.MatrixSendLevel=function(e,t){return`${s(e,t)}/lvl`},e.MatrixSendPan=function(e,t){return`${s(e,t)}/pan`},e.DelayNode=i,e.DelayOn=function(e){return`${i(e)}/on`},e.DelayMode=function(e){return`${i(e)}/mode`},e.DelayAmount=function(e){return`${i(e)}/dly`},e.EqNode=o,e.EqOn=function(e){return`${o(e)}/on`},e.DynamicsNode=a,e.DynamicsOn=function(e){return`${a(e)}/on`},e.PreInsertNode=c,e.PreInsertOn=function(e){return`${c(e)}/on`},e.PostInsertNode=l,e.PostInsertOn=function(e){return`${l(e)}/on`}}(O||(O={})),function(e){function t(e){return`/dca/${e}`}e.Node=t,e.Name=function(e){return`${t(e)}/name`},e.Color=function(e){return`${t(e)}/col`},e.Icon=function(e){return`${t(e)}/icon`},e.ScribbleLight=function(e){return`${t(e)}/led`},e.Mute=function(e){return`${t(e)}/mute`},e.Fader=function(e){return`${t(e)}/fdr`},e.Solo=function(e){return`${t(e)}/$solo`},e.SoloLed=function(e){return`${t(e)}/$sololed`},e.MonitorMode=function(e){return`${t(e)}/mon`}}(P||(P={})),function(e){function t(e){return`/mgrp/${e}`}e.Node=t,e.Name=function(e){return`${t(e)}/name`},e.Mute=function(e){return`${t(e)}/mute`}}(N||(N={})),function(e){function t(e){return`/cfg/mon/${e}`}function n(e){return`/cfg/talk/${e}`}e.CLOCK_RATES=[44100,48e3],e.CLOCK_SOURCES=["INT","A","B","C","AES","CARD","MOD"],e.MAIN_LINKS=["OFF","2","2-3","2-4"],e.USB_CONFIGS=["2/2","8/8","16/16","32/32","48/48"],e.SC_CONFIGS=["AUTO","0/32","1/31","2/30","3/29","4/28","5/27","6/26","7/25","8/24","9/23","10/22","11/21","12/20","13/19","14/18","15/17","16/16","17/15","18/14","19/13","20/12","21/11","22/10","23/9","24/8","25/7","26/6","27/5","28/4","29/3","30/2","31/1","32/0"],e.MONITOR_NODES=[1,2],e.MONITOR_EQ_BANDS=[1,2,3,4,5,6],e.MONITOR_SOURCE_OPTIONS=["OFF",...Array.from({length:4},(e,t)=>`MAIN.${t+1}`),...Array.from({length:8},(e,t)=>`MTX.${t+1}`),...Array.from({length:16},(e,t)=>`BUS.${t+1}`),...Array.from({length:8},(e,t)=>`AUX.${t+1}`)],e.getClockRateOptions=function(){return B(e.CLOCK_RATES)},e.getClockSourceOptions=function(){return B(e.CLOCK_SOURCES)},e.getMainLinkOptions=function(){return B(e.MAIN_LINKS)},e.getUsbConfigOptions=function(){return B(e.USB_CONFIGS)},e.getScConfigOptions=function(){return B(e.SC_CONFIGS)},e.getMonitorConfigOptions=function(){return B(e.MONITOR_NODES)},e.ConfigNode=function(){return"/cfg"},e.ClockRate=function(){return"/cfg/clkrate"},e.ClockSource=function(){return"/cfg/clksrc"},e.MainLink=function(){return"/cfg/mainlink"},e.DcaGroup=function(){return"/cfg/dcamgrp"},e.MuteOverride=function(){return"/cfg/muteovr"},e.StartMute=function(){return"/cfg/startmute"},e.UsbConfig=function(){return"/cfg/usbacfg"},e.ScConfig=function(){return"/cfg/sccfg"},e.MonitorNode=t,e.MonitorLevel=function(e){return`${t(e)}/lvl`},e.MonitorEqGain=function(e,n){return`${t(e)}/eq/${n}g`},e.MonitorEqFrequency=function(e,n){return`${t(e)}/eq/${n}f`},e.MonitorEqQ=function(e,n){return`${t(e)}/eq/${n}q`},e.MonitorEqHighShelfGain=function(e){return`${t(e)}/eq/hsg`},e.MonitorEqHighShelfFrequency=function(e){return`${t(e)}/eq/hsf`},e.MonitorLimiterLevel=function(e){return`${t(e)}/lim`},e.MonitorDelayOn=function(e){return`${t(e)}/dly/on`},e.MonitorDelayMeters=function(e){return`${t(e)}/dly/m`},e.MonitorDelayDimLevel=function(e){return`${t(e)}/dim`},e.MonitorPflDim=function(e){return`${t(e)}/pfldim`},e.MonitorEqBandSoloTrim=function(e){return`${t(e)}/eqbdtrim`},e.MonitorSourceLevel=function(e){return`${t(e)}/srclvl`},e.MonitorSourceMix=function(e){return`${t(e)}/srcmix`},e.MonitorSource=function(e){return`${t(e)}/src`},e.SoloNode=function(){return"/cfg/solo"},e.SoloMute=function(){return"/cfg/solo/mute"},e.SoloDim=function(){return"/cfg/solo/$dim"},e.SoloMono=function(){return"/cfg/solo/$mono"},e.SoloLRSwap=function(){return"/cfg/solo/$flip"},e.TalkbackNode=n,e.TalkbackOn=function(e){return`${n(e)}/$on`},e.TalkbackMode=function(e){return`${n(e)}/mode`},e.TalkbackMonitorDim=function(e){return`${n(e)}/mondim`},e.TalkbackBusDim=function(e){return`${n(e)}/busdim`},e.TalkbackIndividual=function(e){return`${n(e)}/indiv`},e.TalkbackBusAssign=function(e,t){return`${n(e)}/B${t}`},e.TalkbackMatrixAssign=function(e,t){return`${n(e)}/MX${t}`},e.TalkbackMainAssign=function(e,t){return`${n(e)}/M${t}`}}(M||(M={}));const ae="STD",ce="SOUL",le="Soul Analog EQ",ue="E88",de="Even 88-Formant EQ",he="E84",pe="Even 84 EQ",fe="F110",me="Focusrite ISA 110 EQ",be="PULSAR",ge="Pulsar P1a/M5 EQ",ye="MACH",ve="Mach EQ4",Se=[l(ae,"Standard EQ"),l(ce,le),l(ue,de),l(he,pe),l(fe,me),l(be,ge),l(ye,ve)];function we(e,t,n){return[{type:"dropdown",label:"Band",id:e,choices:_e(n),default:"l",isVisible:e=>"STD"!=e[t]?.toString()}]}function _e(e){return e?[l("l","Low"),l("1","1"),l("2","2"),l("3","3"),l("4","4"),l("5","5"),l("6","6"),l("h","High")]:[l("l","Low"),l("1","1"),l("2","2"),l("3","3"),l("4","4"),l("h","High")]}var Ce;function ke(e){const t=e.connection.sendCommand.bind(e.connection),n=e.stateHandler.ensureLoaded.bind(e.stateHandler),r=e.stateHandler?.state;if(!r)throw new Error("State handler or state is not available");return{[Ce.SetChannelFilterModel]:{name:"Set Channel Filter Model",description:"Set the filter model for a channel.",options:[...b("Channel","channel",r.namedChoices.channels),...b("Filter","filter",[l("TILT","Tilt Filter"),l("MAX","Maxer Filter"),l("AP1","All-Pass 90"),l("AP2","All-Pass 180")])],callback:async e=>{const n=V(e,"channel"),r=V(e,"filter"),s=E.FilterModel(W(n));await t(s,r)}},[Ce.SetChannelEqType]:{name:"Set Channel EQ Model",description:"Set the EQ model for a channel.",options:[...b("Channel","channel",r.namedChoices.channels),...b("EQ Model","model",Se)],callback:async e=>{const n=V(e,"channel"),r=V(e,"model"),s=E.EqModel(W(n));await t(s,r)}},[Ce.SetChannelEqParameter]:{name:"Set Channel EQ Parameter",description:"Set the parameter of an equalizer in a channel",options:[m("Channel","channel",r.namedChoices.channels),...[{type:"dropdown",label:"Model",id:"model",choices:Se,default:ae}],...we("band","model")],callback:async e=>{const n=E.EqModel(j(e,"channel"));await t(n,function(e){const t=e.options.model;return t}(e))},subscribe:e=>{n(E.EqModel(j(e,"channel")))},learn:e=>({...e.options,model:A(E.EqModel(j(e,"channel")),r)})},[Ce.SetChannelProcessOrder]:{name:"Set Channel Process Order",description:"Set the process order of EQ, gate, dynamics and insert of a channel.",options:[...b("Channel","channel",r.namedChoices.channels),...b("Order","order",[l("GEDI","Gate / EQ / Dynamics / Insert"),l("GEID","Gate / EQ / Insert / Dynamics"),l("GIED","Gate / Insert / EQ / Dynamics"),l("GIDE","Gate / Insert / Dynamics / EQ"),l("GDEI","Gate / Dynamics / EQ / Insert"),l("GDIE","Gate / Dynamics / Insert / EQ"),l("EGDI","EQ / Gate / Dynamics / Insert"),l("EGID","EQ / Gate / Insert / Dynamics"),l("EIGD","EQ / Insert / Gate / Dynamics"),l("EIDG","EQ / Insert / Dynamics / Gate"),l("EDGI","EQ / Dynamics / Gate / Insert"),l("EDIG","EQ / Dynamics / Insert / Gate"),l("IGED","Insert / Gate / EQ / Dynamics"),l("IGDE","Insert / Gate / Dynamics / EQ"),l("IEGD","Insert / EQ / Gate / Dynamics"),l("IEDG","Insert / EQ / Dynamics / Gate"),l("IDGE","Insert / Dynamics / Gate / EQ"),l("IDEG","Insert / Dynamics / EQ / Gate"),l("DGEI","Dynamics / Gate / EQ / Insert"),l("DGIE","Dynamics / Gate / Insert / EQ"),l("DEGI","Dynamics / EQ / Gate / Insert"),l("DEIG","Dynamics / EQ / Insert / Gate"),l("DIGE","Dynamics / Insert / Gate / EQ"),l("DIEG","Dynamics / Insert / EQ / Gate")])],callback:async e=>{const n=V(e,"channel"),r=V(e,"order"),s=E.ProcessOrder(W(n));await t(s,r)}}}}function Ee(){return[l("1","Monitor 1"),l("2","Monitor 2")]}function Ie(){return[l("A","Talkback A"),l("B","Talkback B")]}!function(e){e.SetChannelFilterModel="set-channel-filter-model",e.SetChannelEqType="set-channel-eq-type",e.SetChannelEqParameter="set-channel-eq-parameter",e.SetChannelProcessOrder="set-channel-process-order"}(Ce||(Ce={}));const $e={id:e.Rack,label:"Rack",channels:40,auxes:8,busses:16,matrices:8,mains:4,dcas:16,mutegroups:8,localInputs:8,localOutputs:8,localAuxIn:8,localAuxOut:8,aesIns:2,aesOut:2,stageConnect:1,gpio:4};var xe,Oe,Pe,Ne,Me,Te,Ae,De,Le,Fe,Re,Be,je,We,Ue,Ve,qe,Ge;function He(e){const t=e.connection.sendCommand.bind(e.connection),n=e.stateHandler?.state;if(!n)throw new Error("State handler or state is not available");const r=e.transitions,s=e.model;return{[xe.SetSoloMute]:{name:"Set Solo Mute",description:"Set or toggle the mute state of the solo output.",options:[...g("mute","Mute",!0)],callback:async e=>{const n=q(e,"mute"),r=M.SoloMute();await t(r,n)}},[xe.SetSoloDim]:{name:"Set Solo Dim",description:"Set or toggle the dim state of the solo output.",options:[...y("dim","Dim",!0)],callback:async e=>{const n=M.SoloDim(),r=q(e,"dim");await t(n,r)}},[xe.SetSoloMono]:{name:"Set Solo Mono",description:"Set or toggle the mono state of the solo output.",options:[...y("mono","Mono",!0)],callback:async e=>{const n=M.SoloMono(),r=q(e,"mono");await t(n,r)}},[xe.SetSoloLRSwap]:{name:"Set Solo LR Swap",description:"Set the left-right channel swap of the solo channel.",options:[...b("Swap","swap",[l("1","Swap"),l("0","Don't Swap"),l("-1","Toggle")],"1")],callback:async e=>{const n=M.SoloLRSwap(),r=q(e,"swap");await t(n,r)}},[xe.SetMonitorLevel]:s==$e?{name:"Set Monitor Level",description:"Set the level of a monitor channel. ATTENTION: This command only works on the Rack and Compact Model, due to the full-size Wing having potentiometers as control knobs.",options:[...b("Monitor","mon",Ee(),"1"),...w("level")],callback:async e=>{const t=q(e,"mon"),s=q(e,"level");H(M.MonitorLevel(t),"level",e,n,r,s)}}:void 0,[xe.SetMonitorSourceLevel]:{name:"Set Monitor Source Level",description:"Set the source level of a monitor channel (-144 to 10 dB).",options:[...b("Monitor","mon",Ee(),"1"),...w("level")],callback:async e=>{const t=q(e,"mon"),s=q(e,"level");H(M.MonitorSourceLevel(t),"level",e,n,r,s)}},[xe.SetMonitorPflDim]:{name:"Set Monitor PFL Dim",description:"Set the PFL dim amount of a monitor channel (0 to 40 dB).",options:[...b("Monitor","mon",Ee(),"1"),...h("Dim [dB]","dim",0,40,1,10)],callback:async e=>{const n=q(e,"mon"),r=q(e,"dim"),s=M.MonitorPflDim(n);await t(s,r,!0)}},[xe.TalkbackOn]:{name:"Talkback On",description:"Enable or disable the on state of a talkback.",options:[...b("Talkback","tb",Ie()),...y("solo","Solo",!0)],callback:async e=>{const n=M.TalkbackOn(e.options.tb),r=q(e,"solo");await t(n,r)}},[xe.TalkbackMode]:{name:"Talkback Mode",description:"Set the mode of a talkback channel.",options:[...b("Talkback","tb",Ie()),...b("Mode","mode",[l("AUTO","Automatic"),l("PUSH","Push"),l("LATCH","Latch")])],callback:async e=>{const n=V(e,"tb"),r=M.TalkbackMode(n),s=V(e,"mode");await t(r,s)}},[xe.TalkbackMonitorDim]:{name:"Talkback Monitor Dim",description:"Set the the monitor dim amount of a talkback channel.",options:[...b("Talkback","tb",Ie()),...h("Dim [dB]","dim",0,40,1,10)],callback:async e=>{const n=V(e,"tb"),r=M.TalkbackMonitorDim(n),s=q(e,"dim");await t(r,s,!0)}},[xe.TalkbackBusDim]:{name:"Talkback Bus Dim",description:"Set the the bus dim amount of a talkback channel.",options:[...b("Talkback","tb",Ie()),...h("Dim [dB]","dim",0,40,1,10)],callback:async e=>{const n=V(e,"tb"),r=M.TalkbackBusDim(n),s=q(e,"dim");await t(r,s,!0)}},[xe.TalkbackAssign]:{name:"Talkback Assign",description:"Enable, disable or toggle the assignment of a talkback to a bus, matrix or main.",options:[...b("Talkback","tb",Ie()),...b("Destination","dest",[...n.namedChoices.busses,...n.namedChoices.matrices,...n.namedChoices.mains]),...b("Assign","assign",[l("1","Assign"),l("0","Not Assign"),l("-1","Toggle")])],callback:async e=>{const n=ne(V(e,"tb"),V(e,"dest")),r=q(e,"assign");await t(n,r)}},[xe.TalkbackIndividualLevels]:{name:"Talkback Individual Levels",description:"Enable or disable individual bus and main talkback levels.",options:[...b("Talkback","tb",Ie()),...b("Mode","mode",[l("1","Individual"),l("0","Linked")])],callback:async e=>{const n=V(e,"tb"),r=M.TalkbackIndividual(n),s=q(e,"mode");await t(r,s)}}}}function ze(e){const n=e.connection.sendCommand.bind(e.connection);return{[Oe.SendCommand]:{name:"Send Command",description:"Send an OSC command with no argument to the console.",options:[...p("Command","cmd","")],callback:async e=>{const t=V(e,"cmd");await n(t)}},[Oe.SendCommandWithNumber]:{name:"Send Command with Number",description:"Send an OSC command with a number as an argument to the console.",options:[...p("Command","cmd",""),{type:"textinput",label:"Value",id:"num",default:"1",regex:t.Regex.SIGNED_NUMBER,useVariables:!0}],callback:async e=>{const t=V(e,"cmd"),r=e.options.num;await n(t,parseInt(r))}},[Oe.SendCommandWithString]:{name:"Send Command with String",description:"Send an OSC command with a string as an argument to the console.",options:[...p("Command","cmd",""),...p("Value","val","","The value to send as a string. This can include variables.")],callback:async e=>{const t=V(e,"cmd"),r=V(e,"val");await n(t,r)}}}}function Qe(e){const t=[];return t.push({variableId:"desk_ip",name:"Desk IP Address"}),t.push({variableId:"desk_name",name:"Desk Name"}),t.push({variableId:"main_alt_status",name:"Main/Alt Input Source"}),t.push(...function(e){const t=[];for(let n=1;n<=e.channels;n++){t.push({variableId:`ch${n}_name`,name:`Channel ${n} Name`,path:E.Name(n)}),t.push({variableId:`ch${n}_gain`,name:`Channel ${n} Gain`,path:E.InputGain(n)}),t.push({variableId:`ch${n}_mute`,name:`Channel ${n} Mute`,path:E.Mute(n)}),t.push({variableId:`ch${n}_level`,name:`Channel ${n} Level`,path:E.Fader(n)}),t.push({variableId:`ch${n}_pan`,name:`Channel ${n} Pan`,path:E.Pan(n)});for(let r=1;r<=e.busses;r++)t.push({variableId:`ch${n}_bus${r}_mute`,name:`Channel ${n} to Bus ${r} Mute`,path:E.SendOn(n,r)}),t.push({variableId:`ch${n}_bus${r}_level`,name:`Channel ${n} to Bus ${r} Level`,path:E.SendLevel(n,r)}),t.push({variableId:`ch${n}_bus${r}_pan`,name:`Channel ${n} to Bus ${r} Pan`,path:E.SendPan(n,r)});for(let r=1;r<=e.mains;r++)t.push({variableId:`ch${n}_main${r}_mute`,name:`Channel ${n} to Main ${r} Mute`,path:E.MainSendOn(n,r)}),t.push({variableId:`ch${n}_main${r}_level`,name:`Channel ${n} to Main ${r} Level`,path:E.MainSendLevel(n,r)});for(let r=1;r<=e.matrices;r++)t.push({variableId:`ch${n}_mtx${r}_mute`,name:`Channel ${n} to Matrix ${r} Mute`,path:E.MatrixSendOn(n,r)}),t.push({variableId:`ch${n}_mtx${r}_level`,name:`Channel ${n} to Matrix ${r} Level`,path:E.MatrixSendLevel(n,r)}),t.push({variableId:`ch${n}_mtx${r}_pan`,name:`Channel ${n} to Matrix ${r} Pan`,path:E.MatrixSendPan(n,r)});t.push({variableId:`ch${n}_color`,name:`Channel ${n} Color`,path:E.Color(n)})}return t}(e)),t.push(...function(e){const t=[];for(let n=1;n<=e.auxes;n++){t.push({variableId:`aux${n}_name`,name:`Aux ${n} Name`,path:I.Name(n)}),t.push({variableId:`aux${n}_gain`,name:`Aux ${n} Gain`,path:I.InputGain(n)}),t.push({variableId:`aux${n}_mute`,name:`Aux ${n} Mute`,path:I.Mute(n)}),t.push({variableId:`aux${n}_level`,name:`Aux ${n} Level`,path:I.Fader(n)}),t.push({variableId:`aux${n}_pan`,name:`Aux ${n} Pan`,path:I.Pan(n)});for(let r=1;r<=e.mains;r++)t.push({variableId:`aux${n}_main${r}_mute`,name:`Aux ${n} to Main ${r} Mute`,path:I.MainSendOn(n,r)}),t.push({variableId:`aux${n}_main${r}_level`,name:`Aux ${n} to Main ${r} Level`,path:I.MainSendLevel(n,r)});for(let r=1;r<=e.busses;r++)t.push({variableId:`aux${n}_bus${r}_mute`,name:`Aux ${n} to Bus ${r} Mutes`,path:I.SendOn(n,r)}),t.push({variableId:`aux${n}_bus${r}_level`,name:`Aux ${n} to Bus ${r} Level`,path:I.SendLevel(n,r)}),t.push({variableId:`aux${n}_bus${r}_pan`,name:`Aux ${n} to Bus ${r} Pan`,path:I.SendPan(n,r)});for(let r=1;r<=e.matrices;r++)t.push({variableId:`aux${n}_mtx${r}_mute`,name:`Aux ${n} to Matrix ${r} Mute`,path:I.MatrixSendOn(n,r)}),t.push({variableId:`aux${n}_mtx${r}_level`,name:`Aux ${n} to Matrix ${r} Level`,path:I.MatrixSendLevel(n,r)}),t.push({variableId:`aux${n}_mtx${r}_pan`,name:`Aux ${n} to Matrix ${r} Pan`,path:I.MatrixSendPan(n,r)});t.push({variableId:`aux${n}_color`,name:`Aux ${n} Color`,path:I.Color(n)})}return t}(e)),t.push(...function(e){const t=[];for(let n=1;n<=e.busses;n++){t.push({variableId:`bus${n}_name`,name:`Bus ${n} Name`}),t.push({variableId:`bus${n}_mute`,name:`Bus ${n} Mute`}),t.push({variableId:`bus${n}_level`,name:`Bus ${n} Level`}),t.push({variableId:`bus${n}_pan`,name:`Bus ${n} Pan`});for(let r=1;r<=e.mains;r++)t.push({variableId:`bus${n}_main${r}_mute`,name:`Bus ${n} to Main ${r} Mute`}),t.push({variableId:`bus${n}_main${r}_level`,name:`Bus ${n} to Main ${r} Level`});for(let r=1;r<=e.busses;r++)n!=r&&(t.push({variableId:`bus${n}_bus${r}_mute`,name:`Bus ${n} to Bus ${r} Mute`}),t.push({variableId:`bus${n}_bus${r}_level`,name:`Bus ${n} to Bus ${r} Level`}),t.push({variableId:`bus${n}_bus${r}_pan`,name:`Bus ${n} to Bus ${r} Pan`}));for(let r=1;r<=e.matrices;r++)t.push({variableId:`bus${n}_mtx${r}_mute`,name:`Bus ${n} to Matrix ${r} Mute`}),t.push({variableId:`bus${n}_mtx${r}_level`,name:`Bus ${n} to Matrix ${r} Level`});t.push({variableId:`bus${n}_color`,name:`Bus ${n} Color`})}return t}(e)),t.push(...function(e){const t=[];for(let n=1;n<=e.matrices;n++)t.push({variableId:`mtx${n}_name`,name:`Matrix ${n} Name`,path:x.Name(n)}),t.push({variableId:`mtx${n}_mute`,name:`Matrix ${n} Mute`,path:x.Mute(n)}),t.push({variableId:`mtx${n}_level`,name:`Matrix ${n} Level`,path:x.Fader(n)}),t.push({variableId:`mtx${n}_pan`,name:`Matrix ${n} Pan`,path:x.Pan(n)}),t.push({variableId:`mtx${n}_color`,name:`Matrix ${n} Color`,path:x.Color(n)});return t}(e)),t.push(...function(e){const t=[];for(let n=1;n<=e.mains;n++){t.push({variableId:`main${n}_name`,name:`Main ${n} Name`,path:O.Name(n)}),t.push({variableId:`main${n}_mute`,name:`Main ${n} Mute`,path:O.Mute(n)}),t.push({variableId:`main${n}_level`,name:`Main ${n} Level`,path:O.Fader(n)}),t.push({variableId:`main${n}_pan`,name:`Main ${n} Pan`,path:O.Pan(n)});for(let r=1;r<=e.matrices;r++)t.push({variableId:`main${n}_mtx${r}_mute`,name:`Main ${n} to Matrix ${r} Mute`,path:O.MatrixSendOn(n,r)}),t.push({variableId:`main${n}_mtx${r}_level`,name:`Main ${n} to Matrix ${r} Level`,path:O.MatrixSendLevel(n,r)});t.push({variableId:`main${n}_color`,name:`Main ${n} Color`,path:O.Color(n)})}return t}(e)),t.push(...function(e){const t=[];for(let n=1;n<=e.dcas;n++)t.push({variableId:`dca${n}_name`,name:`DCA ${n} Name`,path:P.Name(n)}),t.push({variableId:`dca${n}_mute`,name:`DCA ${n} Mute`,path:P.Mute(n)}),t.push({variableId:`dca${n}_level`,name:`DCA ${n} Level`,path:P.Fader(n)}),t.push({variableId:`dca${n}_color`,name:`DCA ${n} Color`,path:P.Color(n)});return t}(e)),t.push(...function(e){const t=[];for(let n=1;n<=e.mutegroups;n++)t.push({variableId:`mgrp${n}_name`,name:`Mutegroup ${n} Name`,path:N.Name(n)}),t.push({variableId:`mgrp${n}_mute`,name:`Mutegroup ${n} Mute`,path:N.Mute(n)});return t}(e)),t.push(...function(){const e=[];return e.push({variableId:"usb_record_time_ss",name:"USB Record Time (ss)"}),e.push({variableId:"usb_record_time_mm_ss",name:"USB Record Time (mm:ss)"}),e.push({variableId:"usb_record_time_hh_mm_ss",name:"USB Record Time (hh:mm:ss)"}),e.push({variableId:"usb_record_path",name:"USB Record File Path"}),e.push({variableId:"usb_record_state",name:"USB Record State"}),e.push({variableId:"usb_play_pos_ss",name:"USB Player Position (ss)"}),e.push({variableId:"usb_play_pos_mm_ss",name:"USB Player Position (mm:ss)"}),e.push({variableId:"usb_play_pos_hh_mm_ss",name:"USB Player Position (hh:mm:ss)"}),e.push({variableId:"usb_play_total_ss",name:"USB Player File Length (ss)"}),e.push({variableId:"usb_play_total_mm_ss",name:"USB Player File Length (mm:ss)"}),e.push({variableId:"usb_play_total_hh_mm_ss",name:"USB Player File Length (hh:mm:ss)"}),e.push({variableId:"usb_play_path",name:"USB Player File Path"}),e.push({variableId:"usb_play_state",name:"USB Player State"}),e.push({variableId:"usb_play_name",name:"USB Player File Name"}),e.push({variableId:"usb_play_directory",name:"USB Player File Directory"}),e.push({variableId:"usb_play_playlist",name:"USB Player Active Playlist"}),e.push({variableId:"usb_play_playlist_index",name:"USB Player Playlist Index"}),e.push({variableId:"usb_play_repeat",name:"USB Player Repeat Playlist"}),e}()),t.push(...function(){const e=[];e.push({variableId:"wlive_link_status",name:"Wing Live SD Cards Link Status"});for(let t=1;t<=2;t++)e.push({variableId:`wlive_${t}_state`,name:`Wing Live Card ${t} State`,path:Le.WLiveCardState(t)}),e.push({variableId:`wlive_${t}_sdstate`,name:`Wing Live Card ${t} SD State`,path:Le.WLiveCardSDState(t)}),e.push({variableId:`wlive_${t}_sdsize`,name:`Wing Live Card ${t} SD Size (GB)`,path:Le.WLiveCardSDSize(t)}),e.push({variableId:`wlive_${t}_marker_total`,name:`Wing Live Card ${t} Total Markers`}),e.push({variableId:`wlive_${t}_marker_current`,name:`Wing Live Card ${t} Current Marker`}),e.push({variableId:`wlive_${t}_session_total`,name:`Wing Live Card ${t} Total Sessions`}),e.push({variableId:`wlive_${t}_session_current`,name:`Wing Live Card ${t} Current Session`}),e.push({variableId:`wlive_${t}_marker_time`,name:`Wing Live Card ${t} Marker Time (hh:mm:ss.ss)`}),e.push({variableId:`wlive_${t}_session_len_ss`,name:`Wing Live Card ${t} Session Length (ss)`}),e.push({variableId:`wlive_${t}_session_len_mm_ss`,name:`Wing Live Card ${t} Session Length (mm:ss)`}),e.push({variableId:`wlive_${t}_session_len_hh_mm_ss`,name:`Wing Live Card ${t} Session Length (hh:mm:ss)`}),e.push({variableId:`wlive_${t}_pos_ss`,name:`Wing Live Card ${t} Position (ss)`}),e.push({variableId:`wlive_${t}_pos_mm_ss`,name:`Wing Live Card ${t} Position (mm:ss)`}),e.push({variableId:`wlive_${t}_pos_hh_mm_ss`,name:`Wing Live Card ${t} Position (hh:mm:ss)`}),e.push({variableId:`wlive_${t}_sdfree_ss`,name:`Wing Live Card ${t} Free Space (ss)`}),e.push({variableId:`wlive_${t}_sdfree_mm_ss`,name:`Wing Live Card ${t} Free Space (mm:ss)`}),e.push({variableId:`wlive_${t}_sdfree_hh_mm_ss`,name:`Wing Live Card ${t} Free Space (hh:mm:ss)`});return e}()),t.push(...function(){const e=[];return e.push({variableId:"active_show_name",name:"Active Show Name"}),e.push({variableId:"previous_scene_number",name:"Previous Scene Number"}),e.push({variableId:"active_scene_number",name:"Active Scene Number"}),e.push({variableId:"next_scene_number",name:"Next Scene Number"}),e.push({variableId:"previous_scene_name",name:"Previous Scene Name"}),e.push({variableId:"active_scene_name",name:"Active Scene Name"}),e.push({variableId:"next_scene_name",name:"Next Scene Name"}),e.push({variableId:"active_scene_folder",name:"Active Scene Folder"}),e.push({variableId:"sof_mode_index",name:"Sends on Fader Mode Index"}),e.push({variableId:"sof_mode_string",name:"Sends on Fader Channel String"}),e.push({variableId:"sel_index",name:"Selected Channel Strip Index"}),e.push({variableId:"sel_string",name:"Selected Channel Strip String"}),e}()),t.push(...function(e){const t=[];for(let n=1;n<=e.gpio;n++)t.push({variableId:`gpio${n}`,name:`GPIO ${n} state (true = pressed/connected)`,path:Ae.GpioReadState(n)});return t}(e)),t.push(...function(e){const t=[];return["A","B"].map(n=>{const r=n.toUpperCase(),s=n.toLowerCase();for(let n=1;n<=e.busses;n++)t.push({variableId:`talkback_${s}_bus${n}_assign`,name:`Talkback ${r} to Bus ${n} assign`,path:M.TalkbackBusAssign(r,n)});for(let n=1;n<=e.matrices;n++)t.push({variableId:`talkback_${s}_mtx${n}_assign`,name:`Talkback ${r} to Matrix ${n} assign`,path:M.TalkbackMatrixAssign(r,n)});for(let n=1;n<=e.mains;n++)t.push({variableId:`talkback_${s}_main${n}_assign`,name:`Talkback ${r} to Main ${n} assign`,path:M.TalkbackMainAssign(r,n)})}),t}(e)),t}!function(e){e.SetSoloMute="set-solo-mute",e.SetSoloDim="set-solo-dim",e.SetSoloMono="set-solo-mono",e.SetSoloLRSwap="set-solo-swap",e.SetMonitorLevel="set-monitor-level",e.SetMonitorSourceLevel="set-monitor-source-level",e.SetMonitorPflDim="set-monitor-pfl-dim",e.TalkbackOn="talkback-on",e.TalkbackMode="talkback-mode",e.TalkbackMonitorDim="talkback-monitor-dim",e.TalkbackBusDim="talkback-bus-dim",e.TalkbackAssign="talkback-destination",e.TalkbackIndividualLevels="talkback-individual-levels"}(xe||(xe={})),function(e){e.SendCommand="send-command",e.SendCommandWithNumber="send-command-with-number",e.SendCommandWithString="send-command-with-string"}(Oe||(Oe={})),Pe||(Pe={}),Ne||(Ne={}),Me||(Me={}),function(e){e.Node=function(){return"/io"},e.MainAltSwitch=function(){return"/io/altsw"}}(Te||(Te={})),function(e){function t(e){return`/$ctl/gpio/${e}`}e.Node=function(){return"/$ctl"},e.StatusNode=function(){return"/$ctl/$stat"},e.SetSof=function(){return"/$ctl/$stat/sof"},e.SetSelect=function(){return"/$ctl/$stat/selidx"},e.LibraryNode=function(){return"/$ctl/lib"},e.LibraryScenes=function(){return"/$ctl/lib/$scenes"},e.LibraryActiveSceneIndex=function(){return"/$ctl/lib/$actidx"},e.LibraryActiveSceneName=function(){return"/$ctl/lib/$active"},e.LibraryActiveShowName=function(){return"/$ctl/lib/$actshow"},e.LibraryAction=function(){return"/$ctl/lib/$action"},e.LibrarySceneSelectionIndex=function(){return"/$ctl/lib/$actionidx"},e.GpioNode=t,e.GpioMode=function(e){return`${t(e)}/mode`},e.GpioState=function(e){return`${t(e)}/gpstate`},e.GpioReadState=function(e){return`${t(e)}/$state`},e.ConfigNode=function(){return"/$ctl/cfg"},e.SaveNow=function(){return"/$ctl/cfg/$savenow"},e.LightsNode=function(){return"/$ctl/cfg/lights"},e.ButtonsBacklightIntensity=function(){return"/$ctl/cfg/lights/btns"},e.ButtonsLEDIntensity=function(){return"/$ctl/cfg/lights/leds"},e.MetersIntensity=function(){return"/$ctl/cfg/lights/meters"},e.ColorLEDIntensity=function(){return"/$ctl/cfg/lights/rgbleds"},e.ChannelLCDIntensity=function(){return"/$ctl/cfg/lights/chlcds"},e.ChannelLCDContrast=function(){return"/$ctl/cfg/lights/chlcdctr"},e.ChannelStripIntensity=function(){return"/$ctl/cfg/lights/chedit"},e.TouchscreenIntensity=function(){return"/$ctl/cfg/lights/main"},e.UnderConsoleLightIntensity=function(){return"/$ctl/cfg/lights/glow"},e.PatchPanelLightIntensity=function(){return"/$ctl/cfg/lights/patch"},e.LampLightIntensity=function(){return"/$ctl/cfg/lights/lamp"}}(Ae||(Ae={})),function(e){e.PlayerNode=function(){return"/play"},e.PlayerAction=function(){return"/play/$action"},e.PlayerActiveState=function(){return"/play/$actstate"},e.PlayerActiveFile=function(){return"/play/$actfile"},e.PlayerSong=function(){return"/play/$song"},e.PlayerAlbum=function(){return"/play/$album"},e.PlayerArtist=function(){return"/play/$artist"},e.PlayerPosition=function(){return"/play/$pos"},e.PlayerTotalTime=function(){return"/play/$total"},e.PlayerResolution=function(){return"/play/$resolution"},e.PlayerChannels=function(){return"/play/$channels"},e.PlayerRate=function(){return"/play/$rate"},e.PlayerFormat=function(){return"/play/$format"},e.PlayerRepeat=function(){return"/play/repeat"},e.RecorderNode=function(){return"/rec"},e.RecorderActiveState=function(){return"/rec/$actstate"},e.RecorderActiveFile=function(){return"/rec/$actfile"},e.RecorderAction=function(){return"/rec/$action"},e.RecorderPath=function(){return"/rec/path"},e.RecorderResolution=function(){return"/rec/resolution"},e.RecorderChannels=function(){return"/rec/channels"},e.RecorderTime=function(){return"/rec/$time"}}(De||(De={})),function(e){function t(e){return`/cards/wlive/${e}`}function n(e){return`${t(e)}/$ctl`}function r(e){return`${t(e)}/cfg`}function s(e){return`${t(e)}/$stat`}e.Node=function(){return"/cards"},e.Type=function(){return"/cards/$type"},e.Version=function(){return"/cards/$ver"},e.WLiveNode=function(){return"/cards/wlive"},e.WLiveSDLink=function(){return"/cards/wlive/sdlink"},e.WLiveActLink=function(){return"/cards/wlive/$actlink"},e.WLiveBatteryState=function(){return"/cards/wlive/$battstate"},e.WLiveAutoIn=function(){return"/cards/wlive/autoin"},e.ShowMeters=function(){return"/cards/wlive/meters"},e.WLiveAutoStop=function(){return"/cards/wlive/auto_stop"},e.WLiveAutoPlay=function(){return"/cards/wlive/auto_play"},e.WLiveAutoRecord=function(){return"/cards/wlive/auto_rec"},e.WLiveCardNode=t,e.WLiveCardControlNode=n,e.WLiveCardControl=function(e){return`${n(e)}/control`},e.WLiveCardOpenSession=function(e){return`${n(e)}/opensession`},e.WLiveCardEditMarker=function(e){return`${n(e)}/editmarker`},e.WLiveCardGotoMarker=function(e){return`${n(e)}/gotomarker`},e.WLiveCardDeleteMarker=function(e){return`${n(e)}/deletemarker`},e.WLiveCardDeleteSession=function(e){return`${n(e)}/deletesession`},e.WLiveCardTime=function(e){return`${n(e)}/stime`},e.WLiveCardNameSession=function(e){return`${n(e)}/namesession`},e.WLiveCardSetMarker=function(e){return`${n(e)}/setmarker`},e.WLiveCardFormat=function(e){return`${n(e)}/formatsdcard`},e.WLiveCardConfigNode=r,e.WLiveCardRecTracks=function(e){return`${r(e)}/rectracks`},e.WLiveCardPlayMode=function(e){return`${r(e)}/playmode`},e.WLiveCardStatusNode=s,e.WLiveCardState=function(e){return`${s(e)}/state`},e.WLiveCardETime=function(e){return`${s(e)}/etime`},e.WLiveCardSDFree=function(e){return`${s(e)}/sdfree`},e.WLiveCardSDSize=function(e){return`${s(e)}/sdsize`},e.WLiveCardSDState=function(e){return`${s(e)}/sdstate`},e.WLiveCardSessionList=function(e){return`${s(e)}/sessionlist`},e.WLiveCardMarkerList=function(e){return`${s(e)}/markerlist`},e.WLiveCardSessionNameList=function(e){return`${s(e)}/snamelist`},e.WLiveCardSessions=function(e){return`${s(e)}/sessions`},e.WLiveCardMarkers=function(e){return`${s(e)}/markers`},e.WLiveCardSessionLength=function(e){return`${s(e)}/sessionlen`},e.WLiveCardSessionPosition=function(e){return`${s(e)}/sessionpos`},e.WLiveCardMarkerPosition=function(e){return`${s(e)}/markerpos`},e.WLiveCardTracks=function(e){return`${s(e)}/tracks`},e.WLiveCardRate=function(e){return`${s(e)}/rate`},e.WLiveCardLinkID=function(e){return`${s(e)}/linkid`},e.WLiveCardStart=function(e){return`${s(e)}/start`},e.WLiveCardStop=function(e){return`${s(e)}/stop`},e.WLiveCardErrorMessage=function(e){return`${s(e)}/errormessage`},e.WLiveCardErrorCode=function(e){return`${s(e)}/errorcode`}}(Le||(Le={})),function(e){e.Node=()=>"/$stat",e.ModType=()=>`${e.Node()}/modtype`,e.AesStatus=function(t){return`${e.Node()}/${t}/stat`},e.AesDeviceName=function(t){return`${e.Node()}/${t}/dev`},e.ClockLock=()=>`${e.Node()}/lock`,e.ClockPPM=()=>`${e.Node()}/ppm`,e.Solo=()=>`${e.Node()}/solo`,e.SoloInPlace=()=>`${e.Node()}/sip`,e.RealTimeClockError=()=>`${e.Node()}/rtcerr`,e.ClockTime=()=>`${e.Node()}/time`,e.ClockDate=()=>`${e.Node()}/date`,e.USBState=()=>`${e.Node()}/usbstate`,e.USBVolumeName=()=>`${e.Node()}/usbvolname`,e.StageConnectStatus=()=>`${e.Node()}/sc_stat`,e.StageConnectDevices=()=>`${e.Node()}/sc_devices`,e.StageConnectUpstreamCount=()=>`${e.Node()}/sc_upcnt`,e.StageConnectDownstreamCount=()=>`${e.Node()}/sc_dncnt`,e.StageConnectUpstreamRouting=()=>`${e.Node()}/sc_uprout`}(Fe||(Fe={}));class Je{data;pressStorage;deltaStorage;storedChannel;namedChoices={channels:[],auxes:[],busses:[],matrices:[],mains:[],dcas:[],mutegroups:[],scenes:[]};names={channels:[],auxes:[],busses:[],matrices:[],mains:[],dcas:[],mutegroups:[],scenes:[]};sceneNameToIdMap;constructor(e){this.data=new Map,this.pressStorage=new Map,this.deltaStorage=new Map,this.storedChannel=1,this.sceneNameToIdMap=new Map,this.updateNames(e)}observers=[];attach(e){this.observers.includes(e)||this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)}notify(){for(const e of this.observers)e.storedChannelChanged()}get(e){return this.data.get(e)}set(e,t){const n=e;"-oo"==t[0].value&&(t[0]={type:"f",value:-140}),this.data.set(n,t)}setPressValue(e,t){this.pressStorage.set(e,t)}popPressValue(e){const t=this.pressStorage.get(e);return void 0!==t&&this.pressStorage.delete(e),t}storeDelta(e,t){this.deltaStorage.set(e,t)}restoreDelta(e){const t=this.deltaStorage.get(e);return this.deltaStorage.delete(e),t??0}getRealName(e){const t=this.get(e)?.[0]?.value;return t}getNameForChoice(e,t,n,r,s){const i=this.getRealName(n);return l(t,i?`${s}${e} - ${i}`:`${r} ${e}`)}updateNames(e){this.names={channels:[],auxes:[],busses:[],matrices:[],mains:[],dcas:[],mutegroups:[],scenes:[]},this.namedChoices.channels=[];for(let t=1;t<=e.channels;t++)this.names.channels.push(this.getRealName(E.RealName(t))??`Channel ${t}`),this.namedChoices.channels.push(this.getNameForChoice(t,E.Node(t),E.RealName(t),"Channel","CH"));this.namedChoices.auxes=[];for(let t=1;t<=e.auxes;t++)this.names.auxes.push(this.getRealName(I.RealName(t))??`Aux ${t}`),this.namedChoices.auxes.push(this.getNameForChoice(t,I.Node(t),I.RealName(t),"Aux","A"));this.namedChoices.busses=[];for(let t=1;t<=e.busses;t++)this.names.busses.push(this.getRealName($.Name(t))??`Bus ${t}`),this.namedChoices.busses.push(this.getNameForChoice(t,$.Node(t),$.Name(t),"Bus","B"));this.namedChoices.matrices=[];for(let t=1;t<=e.matrices;t++)this.names.matrices.push(this.getRealName(x.RealName(t))??`Matrix ${t}`),this.namedChoices.matrices.push(this.getNameForChoice(t,x.Node(t),x.RealName(t),"Matrix","MX"));this.namedChoices.mains=[];for(let t=1;t<=e.mains;t++)this.names.mains.push(this.getRealName(O.RealName(t))??`Main ${t}`),this.namedChoices.mains.push(this.getNameForChoice(t,O.Node(t),O.RealName(t),"Main","M"));this.namedChoices.dcas=[];for(let t=1;t<=e.dcas;t++)this.names.dcas.push(this.getRealName(P.Name(t))??`DCA ${t}`),this.namedChoices.dcas.push(this.getNameForChoice(t,P.Node(t),P.Name(t),"DCA","DCA"));this.namedChoices.mutegroups=[];for(let t=1;t<=e.mutegroups;t++)this.names.mutegroups.push(this.getRealName(N.Name(t))??`Mute Group ${t}`),this.namedChoices.mutegroups.push(this.getNameForChoice(t,N.Node(t),N.Name(t),"Mute Group","MGRP"))}requestNames(e){const t=e.model;e.logger?.info("Requesting all names...");const n=e.connection.sendCommand.bind(e.connection);for(let e=1;e<=t.channels;e++)n(E.RealName(e));for(let e=1;e<=t.auxes;e++)n(I.RealName(e));for(let e=1;e<=t.busses;e++)n($.Name(e));for(let e=1;e<=t.matrices;e++)n(x.RealName(e));for(let e=1;e<=t.mains;e++)n(O.RealName(e));for(let e=1;e<=t.dcas;e++)n(P.Name(e));for(let e=1;e<=t.mutegroups;e++)n(N.Name(e))}async requestAllVariables(e){const t=e.model,n=e.connection.sendCommand.bind(e.connection),r=Qe(t),s=e.config.startupVariableRequestChunkSize??500,i=e.config.startupVariableRequestChunkWait??100,o=Math.ceil(r.length/s);for(let e=0;e<o;e++){const t=e*i,o=r.slice(e*s,(e+1)*s);setTimeout(()=>{for(const e of o){const t=e.path;void 0!==t&&n(t,void 0,void 0,!0)}},t)}n(Te.MainAltSwitch()),n(`${Ae.StatusNode()}/sof`),n(`${Ae.StatusNode()}/selidx`),n(Ae.LibraryActiveShowName()),n(Ae.LibraryActiveSceneIndex()),n(Ae.LibraryActiveSceneName()),n(Ae.LibraryNode(),"?"),n(De.PlayerActiveState()),n(De.PlayerActiveFile()),n(De.PlayerPosition()),n(De.PlayerTotalTime()),n(De.PlayerRepeat()),n(De.RecorderActiveState()),n(De.RecorderActiveFile()),n(De.RecorderTime()),n(Le.WLiveActLink()),n(Le.WLiveSDLink());for(let e=1;e<=2;e++)n(Le.WLiveCardState(e)),n(Le.WLiveCardSDState(e)),n(Le.WLiveCardSDSize(e)),n(Le.WLiveCardMarkers(e)),n(Le.WLiveCardMarkerPosition(e)),n(Le.WLiveCardSessions(e)),n(Le.WLiveCardSessionPosition(e)),n(Le.WLiveCardMarkerList(e)),n(Le.WLiveCardETime(e)),n(Le.WLiveCardSessionLength(e)),n(Le.WLiveCardSDFree(e))}setStoredChannel(e){this.storedChannel=e,this.notify()}getStoredChannel(){return this.storedChannel}}class Ye{data;pollData;constructor(){this.data=new Map,this.pollData=new Set}getFeedbacks(e){const t=this.data.get(e);return t?Array.from(new Set(t.values())):[]}subscribe(e,t,n){let r=this.data.get(e);r||(r=new Map,this.data.set(e,r)),r.set(t,n)}unsubscribe(e,t){const n=this.data.get(e);n&&n.delete(t)}getPollPaths(){return Array.from(this.pollData)}subscribePoll(e){this.pollData.add(e)}unsubscribePoll(e){this.pollData.delete(e)}}function Xe(e){const t=e.connection.sendCommand.bind(e.connection),n=e.stateHandler.ensureLoaded.bind(e.stateHandler),r=e.stateHandler?.state;if(!r)throw new Error("State handler or state is not available");const s=e.transitions;return{[Re.MatrixDirectInOn]:{name:"Set Direct Input Mute",description:"Set or toggle the direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),...g("mute","Mute",!0)],callback:async e=>{const n=V(e,"sel"),r=q(e,"mute"),s=x.DirectInputSwitch(W(n));await t(s,r)}},[Re.MatrixDirectInInput]:{name:"Set Direct Input Source",description:"Set the source of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),...b("Source","source",[l("OFF","Off"),l("AES","AES"),l("MON.PH","Monitor Phones"),l("MON.SPK","Monitor Speakers"),l("MON.BUS","Solo Bus")])],callback:async e=>{const n=V(e,"sel"),r=V(e,"source"),s=x.DirectInputIn(W(n));await t(s,r)}},[Re.MatrixDirectInInvert]:{name:"Invert Direct Input",description:"Invert the polarity of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),...y("invert","Invert",!0)],callback:async e=>{const n=V(e,"sel"),r=q(e,"invert"),s=x.DirectInputInvert(W(n));await t(s,r)}},[Re.MatrixDirectInDeltaFader]:{name:"Adjust Direct Input Level",description:"Adjust the level of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),..._("delta","Adjust")],callback:async e=>{const t=V(e,"sel"),n=x.DirectInputLevel(W(t));let i=L(n,r);const o=e.options.delta_use_percentage;let a;a=o?e.options.delta_use_variables?Number(e.options.delta_percent_variables)/100:Number(e.options.delta_percent)/100:q(e,"delta"),r.storeDelta(n,a),null!=i&&(i+=a,H(n,"level",e,r,s,i,!o))},subscribe:e=>{const t=V(e,"sel");n(x.DirectInputLevel(W(t)))}},[Re.MatrixDirectInUndoDeltaFader]:{name:"Undo Direct Input Level Adjustment",description:"Undo the previous level adjustment of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),...c()],callback:async e=>{const t=V(e,"sel"),n=x.DirectInputLevel(W(t));let i=L(n,r);const o=r.restoreDelta(n);null!=i&&(i-=o,H(n,"level",e,r,s,i))},subscribe:e=>{const t=V(e,"sel");n(x.DirectInputLevel(W(t)))}},[Re.MatrixDirectInRecallFader]:{name:"Recall Direct Input Level",description:"Recall the level of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),...c()],callback:async e=>{const t=V(e,"sel"),n=x.DirectInputLevel(W(t)),i=D(n,r);H(n,"level",e,r,s,i)},subscribe:e=>{const t=V(e,"sel");n(x.DirectInputLevel(W(t)))}},[Re.MatrixDirectInSetFader]:{name:"Set Direct Input Level",description:"Set the level of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices),...w("level")],callback:async e=>{const t=V(e,"sel"),n=q(e,"level");H(x.DirectInputLevel(W(t)),"level",e,r,s,n)},subscribe:e=>{const t=V(e,"sel");n(x.DirectInputLevel(W(t)))}},[Re.MatrixDirectInStoreFader]:{name:"Store Direct Input Level",description:"Store the fader level of a direct input on a matrix",options:[...b("Selection","sel",r.namedChoices.matrices)],callback:async e=>{const t=V(e,"sel");R(x.DirectInputLevel(W(t)),r)},subscribe:e=>{const t=V(e,"sel");n(x.DirectInputLevel(W(t)))}}}}function Ke(e){const t=e.connection.sendCommand.bind(e.connection);return{[Be.PlaybackAction]:{name:"USB: Playback Action",description:"Start, stop, pause, jump to previous or next in the USB player.",options:[...b("Action","action",[l("STOP","Stop"),l("PLAY","Play"),l("PAUSE","Pause"),l("NEXT","Next"),l("PREV","Previous")])],callback:async e=>{const n=V(e,"action"),r=De.PlayerAction();await t(r,n)}},[Be.SetRepeat]:{name:"USB: Set Repeat",description:"Enable the repeat functionality of the USB player",options:[...u("Repeat","repeat",!1,"Enable or disable repeat functionality")],callback:async e=>{const n=q(e,"repeat"),r=De.PlayerRepeat();await t(r,1==n?1:0)}},[Be.RecordAction]:{name:"USB: Record Action",description:"Start, stop, pause or create a new file in the USB recorder.",options:[...b("Action","action",[l("STOP","Stop"),l("REC","Record"),l("PAUSE","Pause"),l("NEWFILE","New File")])],callback:async e=>{const n=V(e,"action"),r=De.RecorderAction();await t(r,n)}}}}function Ze(){return[l("KEEP","Keep"),l("MAIN","Main"),l("ALT","Alt")]}function et(){return[l("STOP","Stop"),l("PPAUSE","Pause"),l("PLAY","Play"),l("REC","Record")]}function tt(){return[l("1","Card 1"),l("2","Card 2")]}function nt(e){const t=e.connection.sendCommand.bind(e.connection);return{[je.SetLink]:{name:"WLive: Set Link",description:"Set whether the USB cards should be linked or unlinked.",options:[...b("Link","link",[l("IND","Unlinked"),l("PAR","Linked")])],callback:async e=>{const n=Le.WLiveSDLink(),r=V(e,"link");await t(n,r)}},[je.SetAutoInput]:{name:"WLive: Set Auto Input",description:"Set which cards should be used for auto input selection.",options:[...b("Selection","selection",[l("OFF","Off"),l("1","Card 1"),l("2","Card 2")])],callback:async e=>{const n=Le.WLiveAutoIn(),r=V(e,"selection");await t(n,r)}},[je.SetAutoStop]:{name:"WLive: Set Auto Stop",description:"Set input actions on stop",options:[...b("Selection","selection",Ze())],callback:async e=>{const n=Le.WLiveAutoStop(),r=V(e,"selection");await t(n,r)}},[je.SetAutoPlay]:{name:"WLive: Set Auto Play",description:"Set input actions on play",options:[...b("Selection","selection",Ze())],callback:async e=>{const n=Le.WLiveAutoPlay(),r=V(e,"selection");await t(n,r)}},[je.SetAutoRecord]:{name:"WLive: Set Auto Record",description:"Set input actions on record",options:[...b("Selection","selection",Ze())],callback:async e=>{const n=Le.WLiveAutoRecord(),r=V(e,"selection");await t(n,r)}},[je.CardAction]:{name:"WLive: Card Action",description:"Start, stop, pause or record on a card.",options:[...b("Card","card",tt()),...b("Action","action",et())],callback:async e=>{const n=q(e,"card"),r=Le.WLiveCardControl(n),s=V(e,"action");await t(r,s)}},[je.OpenSession]:{name:"WLive: Open Session",description:"Open a session on a card.",options:[...b("Card","card",tt()),...h("Session Number","session",1,100,1,1)],callback:async e=>{const n=q(e,"card"),r=q(e,"session"),s=Le.WLiveCardOpenSession(n);await t(s,r)}},[je.DeleteSession]:{name:"WLive: Delete Session",description:"Delete a session on a card.",options:[...b("Card","card",tt()),...h("Session Number","session",1,100,1,1)],callback:async e=>{const n=q(e,"card"),r=q(e,"session"),s=Le.WLiveCardDeleteSession(n);await t(s,r)}},[je.NameSession]:{name:"WLive: Name Session",description:"Name the current session on a card.",options:[...b("Card","card",tt()),...p("Session Name","name","","The name to set for the current session on the card.")],callback:async e=>{const n=q(e,"card"),r=V(e,"name"),s=Le.WLiveCardNameSession(n);await t(s,r)}},[je.SetPosition]:{name:"WLive: Set Position",description:"Set the position of a recording on a card.",options:[...b("Card","card",tt()),...h("Position (ms)","position",0,36e6,1,0)],callback:async e=>{const n=q(e,"card"),r=q(e,"position"),s=Le.WLiveCardTime(n);await t(s,r,!0);const i=Le.WLiveCardGotoMarker(n);await t(i,101)}},[je.AddMarker]:{name:"WLive: Add Marker",description:"Add a marker to a recording on a card.",options:[...b("Card","card",tt())],callback:async e=>{const n=q(e,"card"),r=Le.WLiveCardSetMarker(n);await t(r,1)}},[je.EditMarker]:{name:"WLive: Edit Marker",description:"Edit a marker in a recording on a card. Sets the marker number to the current position.",options:[...b("Card","card",tt()),...h("Marker Number","marker",1,100,1,1)],callback:async e=>{const n=q(e,"card"),r=q(e,"marker"),s=Le.WLiveCardEditMarker(n);await t(s,r)}},[je.GotoMarker]:{name:"WLive: Goto Marker",description:"Go to a marker in a recording on a card.",options:[...b("Card","card",tt()),...h("Marker Number","marker",1,100,1,1)],callback:async e=>{const n=q(e,"card"),r=q(e,"marker"),s=Le.WLiveCardGotoMarker(n);await t(s,r)}},[je.DeleteMarker]:{name:"WLive: Delete Marker",description:"Delete a marker from a recording on a card.",options:[...b("Card","card",tt()),...h("Marker Number","marker",1,100,1,1)],callback:async e=>{const n=q(e,"card"),r=q(e,"marker"),s=Le.WLiveCardDeleteMarker(n);await t(s,r)}},[je.FormatCard]:{name:"WLive: Format Card",description:"Format (delete all contents) of a card.",options:[...b("Card","card",tt())],callback:async e=>{const n=q(e,"card"),r=Le.WLiveCardFormat(n);await t(r,1)}}}}function rt(e){const t=e.connection.sendCommand.bind(e.connection),n=e.stateHandler.ensureLoaded.bind(e.stateHandler),r=e.stateHandler?.state,s=e.logger;if(!r)throw s?.error("State handler or state is not available for creating common actions"),new Error("State handler or state is not available");const i=e.transitions,o=[...r.namedChoices.channels,...r.namedChoices.auxes,...r.namedChoices.busses,...r.namedChoices.matrices,...r.namedChoices.mains],a=[...r.namedChoices.channels,...r.namedChoices.auxes,...r.namedChoices.busses,...r.namedChoices.mains],u=[...r.namedChoices.busses,...r.namedChoices.mains,...r.namedChoices.matrices],d=[...r.namedChoices.matrices];return{[We.SetMainConnection]:{name:"Set Channel/Aux Main Connection",description:"Set the index of the main connection of a channel or aux",options:[...b("Channel","channel",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("Group","group",T()),...h("Index","index",1,64,1,1)],callback:async e=>{const n=V(e,"channel"),r=V(e,"group"),s=q(e,"index");let i=function(e){let t="";return e.startsWith("/ch")?t=E.MainInputConnectionGroup(W(e)):e.startsWith("/aux")&&(t=I.MainInputConnectionGroup(W(e))),t}(n);await t(i,r),i=function(e){let t="";return e.startsWith("/ch")?t=E.MainInputConnectionIndex(W(e)):e.startsWith("/aux")&&(t=I.MainInputConnectionIndex(W(e))),t}(n),await t(i,s)}},[We.SetAltConnection]:{name:"Set Channel/Aux Alt Connection",description:"Set the index of the alt connection of a channel or aux",options:[...b("Channel","channel",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("Group","group",T()),...h("Index","index",1,64,1,1)],callback:async e=>{const n=V(e,"channel"),r=V(e,"group"),s=q(e,"index");let i=function(e){let t="";return e.startsWith("/ch")?t=E.AltInputConnectionGroup(W(e)):e.startsWith("/aux")&&(t=I.AltInputConnectionGroup(W(e))),t}(n);await t(i,r),i=function(e){let t="";return e.startsWith("/ch")?t=E.AltInputConnectionIndex(W(e)):e.startsWith("/aux")&&(t=I.AltInputConnectionIndex(W(e))),t}(n),await t(i,s)}},[We.SetAutoSourceSwitch]:{name:"Set Channel/Aux Auto Source Switch",description:"Enable or disable the global switching between main and alt inputs on a channel or aux",options:[...b("Channel","channel",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("Auto Source Switch","auto_source",[l("0","Individual"),l("1","Global"),l("-1","Toggle")])],callback:async e=>{const n=V(e,"channel"),r=q(e,"auto_source"),s=function(e){let t="";return e.startsWith("/ch")?t=E.InputAutoSourceSwitch(W(e)):e.startsWith("/aux")&&(t=I.InputAutoSourceSwitch(W(e))),t}(n);await t(s,r)}},[We.SetMainAlt]:{name:"Set Channel/Aux Main/Alt",description:"Set whether a channel or aux is using the main or alt input",options:[...b("Channel","channel",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("Source","main_alt",[l("0","Main"),l("1","Alt"),l("-1","Toggle")])],callback:async e=>{const n=V(e,"channel"),r=q(e,"main_alt"),s=function(e){let t="";return e.startsWith("/ch")?t=E.InputAltSource(W(e)):e.startsWith("/aux")&&(t=I.InputAltSource(W(e))),t}(n);await t(s,r)}},[We.SetScribbleLight]:{name:"Set Scribble Light",description:"Set or toggle the scribble light state of a channel, aux, bus, dca, matrix, or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),...y("led","Scribble Light",!0)],callback:async e=>{const n=V(e,"sel"),r=q(e,"led"),s=function(e,t){let n="";return e.startsWith("/ch")?n=E.ScribbleLight(t):e.startsWith("/aux")?n=I.ScribbleLight(t):e.startsWith("/bus")?n=$.ScribbleLight(t):e.startsWith("/mtx")?n=x.ScribbleLight(t):e.startsWith("/main")?n=O.ScribbleLight(t):e.startsWith("/dca")&&(n=P.ScribbleLight(t)),n}(n,W(n));await t(s,r)}},[We.SetScribbleLightColor]:{name:"Set Scribble Light Color",description:"Set the scribble light color of a channel, aux, bus, dca, matrix, or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),m("Color","color",[l("1","Gray Blue"),l("2","Medium Blue"),l("3","Dark Blue"),l("4","Turquoise"),l("5","Green"),l("6","Olive Green"),l("7","Yellow"),l("8","Brown"),l("9","Red"),l("10","Coral"),l("11","Magenta"),l("12","Purple"),l("13","Orange"),l("14","Light Blue"),l("15","Salmon"),l("16","Teal"),l("17","Dark Gray"),l("18","Light Gray")],"1","Set the color of the selected target")],callback:async e=>{const n=V(e,"sel"),r=function(e,t){let n="";return e.startsWith("/ch")?n=E.Color(t):e.startsWith("/aux")?n=I.Color(t):e.startsWith("/bus")?n=$.Color(t):e.startsWith("/mtx")?n=x.Color(t):e.startsWith("/main")?n=O.Color(t):e.startsWith("/dca")&&(n=P.Color(t)),n}(n,W(n));await t(r,U(e,"color"))}},[We.SetName]:{name:"Set Name",description:"Set the name of a channel, aux, bus, dca, matrix, main, or a mutegroup.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas,...r.namedChoices.mutegroups]),...p("Name","name")],callback:async e=>{const n=V(e,"name"),r=V(e,"sel"),s=function(e,t){let n="";return e.startsWith("/ch")?n=E.Name(t):e.startsWith("/aux")?n=I.Name(t):e.startsWith("/bus")?n=$.Name(t):e.startsWith("/mtx")?n=x.Name(t):e.startsWith("/main")?n=O.Name(t):e.startsWith("/dca")?n=P.Name(t):e.startsWith("/mute")&&(n=N.Name(t)),n}(r,W(r));await t(s,n)}},[We.SetIcon]:{name:"Set Channel Icon",description:"Set the icon displayed for a channel.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),...b("Icon","icon",[l("0","Empty"),l("1","XLR Connector"),l("2","Jack Connector"),l("3","Mini Jack Connector"),l("4","RCA Connector"),l("5","Fader"),l("6","FX"),l("7","Matrix"),l("8","Bass Clef"),l("9","Treble Clef"),l("10","Routing"),l("11","Bus"),l("12","Sum"),l("13","Smile"),l("14","Wing Logo"),l("100","Microphone"),l("101","Wireless Microphone"),l("102","Handheld Microphone"),l("103","Condenser Microphone"),l("104","Boundary Microphone"),l("105","Lapel Microphone"),l("106","Boundary Microphone (Alternative)"),l("107","Headset Microphone"),l("108","Overhead Microphone"),l("109","Speaker Icon"),l("110","Studio Microphone"),l("111","Podcast Microphone"),l("112","Choir"),l("113","Female Vocal"),l("114","Male Vocal"),l("200","Kick In"),l("201","Kick Out"),l("202","Snare Top"),l("203","Snare Bottom"),l("204","Snare Drum"),l("205","Hi-Hat"),l("206","High Tom"),l("207","Mid Tom"),l("208","Low Tom"),l("209","Floor Tom"),l("210","Drum"),l("211","Crash Cymbal"),l("212","Ride Cymbal"),l("213","Cowbell"),l("214","Tambourine"),l("215","Bongos"),l("216","Conga"),l("217","Timpani"),l("218","Cajon"),l("219","Shaker"),l("220","Marimba"),l("221","Hang Drum"),l("222","Triangle"),l("223","Drum Machine"),l("224","Claps"),l("300","Electric Guitar 1"),l("301","Electric Guitar 2"),l("302","Violin"),l("303","Oud"),l("304","Acoustic Guitar"),l("305","Electric Guitar 3"),l("306","Electric Guitar 4"),l("307","Electric Guitar 5"),l("308","Double Bass"),l("309","Viola"),l("310","Cello"),l("311","Baritone"),l("312","Saxophone"),l("313","Trombone"),l("314","Trumpet"),l("315","Harp"),l("316","Organ"),l("317","Harmonica"),l("318","Transverse Flute"),l("319","Clarinet"),l("400","Grand Piano"),l("401","Upright Piano"),l("402","Synthesizer 1"),l("403","Synthesizer 2"),l("404","Synthesizer 3"),l("405","Synthesizer 4"),l("406","Keytar"),l("407","Piano Stand"),l("408","Piano Cross Stand"),l("409","Hammond Organ"),l("500","Full Amplifier"),l("501","2x2 Cabinet"),l("502","Cabinet"),l("503","Speaker"),l("504","Speaker Pair"),l("505","Speaker with Microphone Set"),l("506","Subwoofer"),l("507","Studio Monitor"),l("508","Studio Monitor 2"),l("509","Column Speaker"),l("510","Wall Speaker"),l("511","Hanging Speaker"),l("512","Speaker Stand"),l("513","Speaker Stand Pair"),l("514","Delay Speakers"),l("515","Left Monitor"),l("516","Right Monitor"),l("517","Monitor"),l("518","Large Monitor"),l("519","Large Monitor Pair"),l("520","Left Wedge Monitor"),l("521","Right Wedge Monitor"),l("522","Center Wedge Monitor"),l("523","Line Array"),l("524","Ceiling Speaker"),l("600","Hand"),l("601","Ear"),l("602","Headphones"),l("603","Speaker A"),l("604","Speaker B"),l("605","Laptop"),l("606","MP3 Player"),l("607","Smartphone"),l("608","USB Drive"),l("609","SD Card"),l("610","CD"),l("611","Turntable"),l("612","Reel-to-Reel Player"),l("613","Cassette Player"),l("614","Patchbay")])],callback:async e=>{const n=V(e,"sel"),r=q(e,"icon"),s=function(e,t){let n="";return e.startsWith("/ch")?n=E.Icon(t):e.startsWith("/aux")?n=I.Icon(t):e.startsWith("/bus")?n=$.Icon(t):e.startsWith("/mtx")?n=x.Icon(t):e.startsWith("/main")?n=O.Icon(t):e.startsWith("/dca")&&(n=P.Icon(t)),n}(n,W(n));await t(s,r)}},[We.SetGain]:{name:"Set Gain",description:"Set the input gain of a channel or aux.",options:[...b("Channel","sel",[...r.namedChoices.channels,...r.namedChoices.auxes]),...h("Gain (dB)","gain",-3,45.5,.5,0),...c()],callback:async e=>{const t=V(e,"sel"),n=q(e,"gain");H(z(t,W(t)),"gain",e,r,i,n,!1)},subscribe:e=>{const t=V(e,"sel"),r=z(t,W(t));n(r)},learn:async e=>{const t=V(e,"sel");return{gain:L(z(t,W(t)),r),gain_use_variables:!1}}},[We.StoreGain]:{name:"Store Gain",description:"Store the gain of a channel or aux.",options:[...b("Selection","sel",o)],callback:async e=>{const t=V(e,"sel");R(z(t,W(t)),r)},subscribe:e=>{const t=V(e,"sel"),r=z(t,W(t));n(r)}},[We.RestoreGain]:{name:"Restore Gain",description:"Restore the gain of a channel or aux.",options:[...b("Selection","sel",o),...c()],callback:async e=>{const t=V(e,"sel"),n=z(t,W(t)),s=D(n,r);H(n,"gain",e,r,i,s,!1)}},[We.DeltaGain]:{name:"Adjust Gain",description:"Adjust the input gain of a channel or aux.",options:[...b("Selection","sel",o),...h("Gain (dB)","gain",-48.5,48.5,.5,0),...c()],callback:async e=>{const t=V(e,"sel"),n=z(t,W(t));let s=L(n,r);const o=q(e,"gain");r.storeDelta(n,o),null!=s&&(s+=o,H(n,"gain",e,r,i,s,!1))},subscribe:e=>{const t=V(e,"sel"),r=z(t,W(t));n(r)}},[We.UndoDeltaGain]:{name:"Undo Gain Adjust",description:"Undo the previous input gain adjustment on a channel or aux.",options:[...b("Selection","sel",o),...c()],callback:async e=>{const t=V(e,"sel"),n=z(t,W(t));let s=L(n,r);const o=r.restoreDelta(n);null!=s&&(s-=o,H(n,"gain",e,r,i,s,!1))},subscribe:e=>{const t=V(e,"sel"),r=z(t,W(t));n(r)}},[We.SetMute]:{name:"Set Mute",description:"Set or toggle the mute state of a channel, aux, bus, dca, matrix or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas,...r.namedChoices.mutegroups]),...g("mute","Mute",!0)],callback:async e=>{const n=V(e,"sel"),r=q(e,"mute"),s=Q(n,W(n));await t(s,r)}},[We.SetFader]:{name:"Set Level",description:"Set the fader level of a channel, aux, bus, dca, matrix or main to a value.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),...w("level")],callback:async e=>{const t=V(e,"sel"),n=q(e,"level");H(Y(t,W(t)),"level",e,r,i,n)},subscribe:e=>{const t=V(e,"sel"),r=Y(t,W(t));n(r)},learn:async e=>{const t=V(e,"sel");return{level:L(Y(t,W(t)),r),level_use_variables:!1}}},[We.StoreFader]:{name:"Store Level",description:"Store the fader level of a channel, aux, bus, dca, matrix or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas])],callback:async e=>{const t=V(e,"sel");R(Y(t,W(t)),r)},subscribe:e=>{const t=V(e,"sel"),r=Y(t,W(t));n(r)}},[We.RestoreFader]:{name:"Restore Level",description:"Restore the fader level of a channel, aux, bus, dca, matrix or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),...c()],callback:async e=>{const t=V(e,"sel"),n=Y(t,W(t)),s=D(n,r);H(n,"level",e,r,i,s)}},[We.DeltaFader]:{name:"Adjust Fader Level",description:"Adjust the level of a channel, aux, bus, dca, matrix or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),..._("delta","Adjust")],callback:async e=>{const t=V(e,"sel"),n=Y(t,W(t));let s=L(n,r);const o=e.options.delta_use_percentage;let a;a=o?e.options.delta_use_variables?Number(e.options.delta_percent_variables)/100:Number(e.options.delta_percent)/100:q(e,"delta"),r.storeDelta(n,a),null!=s&&(!o&&s<-90&&(s=-90),s+=a,H(n,"level",e,r,i,s,!o))},subscribe:e=>{const t=V(e,"sel"),r=Y(t,W(t));n(r)}},[We.UndoDeltaFader]:{name:"Undo Level Adjust",description:"Undo the previous level adjustment on a channel, aux, bus, dca, matrix or main.",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),...c()],callback:async e=>{const t=V(e,"sel"),n=Y(t,W(t));let s=L(n,r);const o=r.restoreDelta(n);null!=s&&(s-=o,H(n,"level",e,r,i,s))},subscribe:e=>{const t=V(e,"sel"),r=Y(t,W(t));n(r)}},[We.SetPanorama]:{name:"Set Panorama",description:"Set the panorama of a channel, aux, bus, matrix or main.",options:[...b("Selection","sel",o),...v("pan")],callback:async e=>{const t=V(e,"sel"),n=q(e,"pan");H(X(t,W(t)),"pan",e,r,i,n,!1)},subscribe:e=>{const t=V(e,"sel"),r=X(t,W(t));n(r)},learn:async e=>{const t=V(e,"sel");return{pan:L(X(t,W(t)),r),pan_use_variables:!1}}},[We.StorePanorama]:{name:"Store Panorama",description:"Store the panorama of a channel, aux, bus, matrix or main.",options:[...b("Selection","sel",o)],callback:async e=>{const t=V(e,"sel");R(X(t,W(t)),r)},subscribe:e=>{const t=V(e,"sel"),r=X(t,W(t));n(r)}},[We.RestorePanorama]:{name:"Restore Panorama",description:"Restore the panorama of a channel, aux, bus, matrix or main.",options:[...b("Selection","sel",o),...c()],callback:async e=>{const t=V(e,"sel"),n=X(t,W(t)),s=D(n,r);H(n,"pan",e,r,i,s,!1)}},[We.DeltaPanorama]:{name:"Adjust Panorama",description:"Adjust the panorama of a channel, aux, bus, matrix or main.",options:[...b("Selection","sel",o),...S("pan","Panorama")],callback:async e=>{const t=V(e,"sel"),n=X(t,W(t));let s=L(n,r);const o=q(e,"pan");r.storeDelta(n,o),null!=s&&(s+=o,H(n,"pan",e,r,i,s,!1))},subscribe:e=>{const t=V(e,"sel"),r=X(t,W(t));n(r)}},[We.UndoDeltaPanorama]:{name:"Undo Panorama Adjust",description:"Undo the previous adjustment on the panorama of a channel, aux, bus, matrix or main.",options:[...b("Selection","sel",o),...c()],callback:async e=>{const t=V(e,"sel"),n=X(t,W(t));let s=L(n,r);const o=r.restoreDelta(n);null!=s&&(s-=o,H(n,"pan",e,r,i,s,!1))},subscribe:e=>{const t=V(e,"sel"),r=X(t,W(t));n(r)}},[We.SetSolo]:{name:"Set Solo",description:"Set the solo state for a channel, aux, bux, matrix or main",options:[...b("Selection","sel",[...o,...r.namedChoices.dcas]),...y("solo","Solo",!0)],callback:async e=>{const n=V(e,"sel"),r=q(e,"solo"),s=J(n,W(n));await t(s,r)}},[We.ClearSolo]:{name:"Clear Solo",description:"Clear the Solo from all channels, auxes, busses, matrices and mains.",options:[],callback:async e=>{const n=e=>{const t=e.match(/\/(\d+)$/);return t?parseInt(t[1],10):null};for(const e of o){const r=e.id,s=n(r);if(null!==s){const e=J(r,s);await t(e,0)}}}},[We.SetDelay]:{name:"Set Delay",description:"Enable or disable the delay of a channel, bus, matrix or main.",options:[...b("Selection","sel",[...r.namedChoices.channels,...r.namedChoices.matrices,...r.namedChoices.busses,...r.namedChoices.mains]),...y("delay","Delay",!0)],callback:async e=>{const n=V(e,"sel"),r=function(e,t){let n="";return e.startsWith("/ch")?n=E.DelayOn(t):e.startsWith("/bus")?n=$.DelayOn(t):e.startsWith("/mtx")?n=x.DelayOn(t):e.startsWith("/main")&&(n=O.DelayOn(t)),n}(n,W(n)),s=q(e,"delay");await t(r,s)}},[We.SetDelayAmount]:{name:"Set Delay Mode",description:"Set the delay mode of a channel, bus, matrix or main.",options:[...b("Selection","sel",[...r.namedChoices.channels,...r.namedChoices.matrices,...r.namedChoices.busses,...r.namedChoices.mains]),m("Delay Mode","mode",[l("M","Meters"),l("FT","Feet"),l("MS","Milliseconds"),l("SMP","Samples")]),...h("Amount (meters)","amount_m",0,150,.1,0,"","$(options:mode) == 'M'"),...h("Amount (ft)","amount_ft",.5,500,.5,.5,"","$(options:mode) == 'FT'"),...h("Amount (ms)","amount_ms",.5,500,.1,.5,"","$(options:mode) == 'MS'"),...h("Amount (samples)","amount_samples",16,500,1,16,"","$(options:mode) == 'SMP'")],callback:async e=>{const n=V(e,"sel"),r=V(e,"mode");switch(await t(function(e,t){let n="";return e.startsWith("/ch")?n=E.DelayMode(t):e.startsWith("/bus")?n=$.DelayMode(t):e.startsWith("/mtx")?n=x.DelayMode(t):e.startsWith("/main")&&(n=O.DelayMode(t)),n}(n,W(n)),r),r){case"M":await t(K(n,W(n)),e.options.amount_m,!0);break;case"FT":await t(K(n,W(n)),e.options.amount_ft,!0);break;case"MS":await t(K(n,W(n)),e.options.amount_ms,!0);break;case"SMP":await t(K(n,W(n)),e.options.amount_samples,!0)}}},[We.SetGateOn]:{name:"Set Gate On",description:"Enable, disable or toggle the on-state of a gate on a channel",options:[...b("Selection","sel",r.namedChoices.channels),...y("enable","Enable",!0)],callback:async e=>{const n=V(e,"sel"),r=q(e,"enable"),s=function(e,t){let n="";return e.startsWith("/ch")&&(n=E.GateOn(t)),n}(n,W(n));await t(s,r)}},[We.SetEqOn]:{name:"Set EQ On",description:"Enable, disable or toggle the on-state of an EQ on a channel, bus, aux, matrix or main.",options:[...b("Selection","sel",o),...y("enable","Enable",!0)],callback:async e=>{const n=V(e,"sel"),r=function(e,t){let n="";return e.startsWith("/ch")?n=E.EqOn(t):e.startsWith("/aux")?n=I.EqOn(t):e.startsWith("/bus")?n=$.EqOn(t):e.startsWith("/mtx")?n=x.EqOn(t):e.startsWith("/main")&&(n=O.EqOn(t)),n}(n,W(n)),s=q(e,"enable");await t(r,s)}},[We.SetDynamicsOn]:{name:"Set Dynamics On",description:"Enable, disable or toggle the on-state of dynamics on a channel, bus, aux, matrix or main.",options:[...b("Selection","sel",o),...y("enable","Enable",!0)],callback:async e=>{const n=V(e,"sel"),r=function(e,t){let n="";return e.startsWith("/ch")?n=E.DynamicsOn(t):e.startsWith("/aux")?n=I.DynamicsOn(t):e.startsWith("/bus")?n=$.DynamicsOn(t):e.startsWith("/mtx")?n=x.DynamicsOn(t):e.startsWith("/main")&&(n=O.DynamicsOn(t)),n}(n,W(n)),s=q(e,"enable");await t(r,s)}},[We.SetSendFader]:{name:"Set Send Level",description:"Set the send level from a destination channel strip to a source",options:[...C(a,u,d),...w("level")],callback:async e=>{const{src:t,dest:n}=G(e),s=q(e,"level");H(ee(t,n),"level",e,r,i,s)},subscribe:e=>{const{src:t,dest:r}=G(e),s=ee(t,r);n(s)}},[We.StoreSendFader]:{name:"Store Send Level",description:"Store the send level from a destination channel strip to a source",options:[...C(a,u,d)],callback:async e=>{const{src:t,dest:n}=G(e);R(ee(t,n),r)},subscribe:e=>{const{src:t,dest:r}=G(e),s=ee(t,r);n(s)}},[We.RestoreSendFader]:{name:"Restore Send Level",description:"Restore the send level from a destination channel strip to a source",options:[...C(a,u,d),...c()],callback:async e=>{const{src:t,dest:n}=G(e),s=ee(t,n),o=D(s,r);H(s,"level",e,r,i,o)}},[We.DeltaSendFader]:{name:"Adjust Send Level",description:"Adjust the send level from a destination channel strip to a source",options:[...C(a,u,d),..._("delta","Adjust")],callback:async e=>{const{src:t,dest:n}=G(e),s=ee(t,n);let o=L(s,r);const a=e.options.delta_use_percentage;let c;c=a?e.options.delta_use_variables?Number(e.options.delta_percent_variables)/100:Number(e.options.delta_percent)/100:q(e,"delta"),r.storeDelta(s,c),null!=o&&(o+=c,H(s,"level",e,r,i,o,!a))},subscribe:e=>{const{src:t,dest:r}=G(e),s=ee(t,r);n(s)}},[We.UndoDeltaSendFader]:{name:"Undo Send Level Adjust",description:"Undo the previous send level adjustment from a destination channel strip to a source",options:[...C(a,u,d),...c()],callback:async e=>{const{src:t,dest:n}=G(e),s=ee(t,n);let o=L(s,r);const a=r.restoreDelta(s);null!=o&&(o-=a,H(s,"level",e,r,i,o))},subscribe:e=>{const{src:t,dest:r}=G(e),s=ee(t,r);n(s)}},[We.SetSendMute]:{name:"Set Send Mute",description:"Set or toggle the mute state of a send from a destination channel strip to a source",options:[...C(a,u,d),...g("mute","Mute",!0)],callback:async e=>{const{src:n,dest:r}=G(e),s=Z(n,r);let i=q(e,"mute");-1!=i&&(i=0==i?1:0),await t(s,i)}},[We.SetSendPanorama]:{name:"Set Send Panorama",description:"Set the panorama of a send from a channel or aux to a bus or matrix.",options:[...b("From","src",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("To","dest",[...r.namedChoices.busses,...r.namedChoices.matrices]),...v("pan")],callback:async e=>{const t=V(e,"src"),n=V(e,"dest"),s=q(e,"pan");H(te(t,n),"pan",e,r,i,s,!1)},subscribe:e=>{const t=te(V(e,"src"),V(e,"dest"));n(t)},learn:async e=>({pan:L(te(V(e,"src"),V(e,"dest")),r),pan_use_variables:!1})},[We.StoreSendPanorama]:{name:"Store Send Panorama",description:"Store the panorama of a send from a channel or aux to a bus or matrix.",options:[...b("From","src",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("To","dest",[...r.namedChoices.busses,...r.namedChoices.matrices])],callback:async e=>{R(te(V(e,"src"),V(e,"dest")),r)},subscribe:e=>{const t=te(V(e,"src"),V(e,"dest"));n(t)}},[We.RestoreSendPanorama]:{name:"Restore Send Panorama",description:"Restore the panorama of a send from a channel or aux to a bus or matrix.",options:[...b("From","src",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("To","dest",[...r.namedChoices.busses,...r.namedChoices.matrices]),...c()],callback:async e=>{const t=te(V(e,"src"),V(e,"dest")),n=D(t,r);H(t,"pan",e,r,i,n,!1)}},[We.DeltaSendPanorama]:{name:"Adjust Send Panorama",description:"Adjust the panorama of a send from a channel or aux to a bus or matrix.",options:[...b("From","src",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("To","dest",[...r.namedChoices.busses,...r.namedChoices.matrices]),...S("delta","Panorama")],callback:async e=>{const t=te(V(e,"src"),V(e,"dest"));let n=L(t,r);const s=q(e,"delta");r.storeDelta(t,s),null!=n&&(n+=s,H(t,"pan",e,r,i,n,!1))},subscribe:e=>{const t=te(V(e,"src"),V(e,"dest"));n(t)}},[We.UndoDeltaSendPanorama]:{name:"Undo Send Panorama Adjust",description:"Undo the panorama adjustment of a send from a channel or aux to a bus or matrix.",options:[...b("From","src",[...r.namedChoices.channels,...r.namedChoices.auxes]),...b("To","dest",[...r.namedChoices.busses,...r.namedChoices.matrices]),...c()],callback:async e=>{const t=te(V(e,"src"),V(e,"dest"));let n=L(t,r);const s=r.restoreDelta(t);null!=n&&(n-=s,H(t,"pan",e,r,i,n,!1))},subscribe:e=>{const t=te(V(e,"src"),V(e,"dest"));n(t)}},[We.SetInsertOn]:{name:"Set Insert On",description:"Enable or disable an insert for a channel, aux, bus, matrix or main.",options:[...b("Insert","insert",[l("pre","Pre-Insert"),l("post","Post-Insert"),l("pre-post","Both")]),...b("Selection","sel",[...o]),...y("enable","Enable",!0)],callback:async e=>{const n=V(e,"insert"),s=V(e,"sel"),i=q(e,"enable"),o=W(s);if(n.includes("pre")){const e=re(s,o),n=F(e,r);i<2?await t(e,i):await t(e,Number(!n))}if(n.includes("post")){const e=se(s,o);if(""==e)return;const n=F(e,r);i<2?await t(e,i):await t(e,Number(!n))}},subscribe:e=>{const t=V(e,"insert"),r=V(e,"sel"),s=W(r);if(t.includes("pre")){const e=re(r,s);n(e)}if(t.includes("post")){const e=re(r,s);n(e)}}}}}function st(e){const t=[];for(let n=1;n<=e;n++)t[n-1]=l(`${n}`,`GPIO ${n}`);return t}function it(e){const n=e.connection.sendCommand.bind(e.connection),r=e.stateHandler?.state;if(!r)throw new Error("State handler or state is not available");const s=e.stateHandler.ensureLoaded.bind(e.stateHandler),i=e.feedbackHandler?.subscriptions;if(!i)throw new Error("Feedback handler or subscriptions are not available");const o=e.model;return{[Ue.RecallSceneByName]:{name:"Recall Scene by Name",description:'ATTENTION: if you have the same scene name twice in your show, you will not be able to recall it by name! In this case, use the "Recall Scene by Number" action instead.',options:[...b("Scene Name","sceneName",r.namedChoices.scenes)],callback:async e=>{const t=V(e,"sceneName"),s=r.sceneNameToIdMap.get(t)??0;await n(Ae.LibrarySceneSelectionIndex(),s),await n(Ae.LibraryAction(),"GO")},subscribe:()=>{i.subscribePoll(Ae.LibraryScenes()),s(Ae.LibraryActiveSceneIndex()),s(Ae.LibraryNode(),"?")},unsubscribe:()=>{i.unsubscribePoll(Ae.LibraryScenes())}},[Ue.RecallSceneByNumber]:{name:"Recall Scene by Number",description:"Recall scene in a show by its number",options:[...h("Scene Number","sceneId",1,16384)],callback:async e=>{const t=q(e,"sceneId");await n(Ae.LibrarySceneSelectionIndex(),t),await n(Ae.LibraryAction(),"GO")},subscribe:()=>{s(Ae.LibraryActiveSceneIndex()),s(Ae.LibraryNode(),"?")},learn:()=>({sceneId:L(Ae.LibraryActiveSceneIndex(),r),sceneId_use_variables:!1})},[Ue.SendLibraryAction]:{name:"Send Library Action",description:"Trigger a library action (Select and navigate scenes in a show)",options:[...b("Action","act",[l("GOPREV","Select Previous and Go"),l("GONEXT","Select Next and Go"),l("GO","Go"),l("PREV","Select Previous"),l("NEXT","Select Next")],"GO")],callback:async e=>{const t=V(e,"act");"GO"===t&&await n(Ae.LibrarySceneSelectionIndex(),0);const r=Ae.LibraryAction();await n(r,t)}},[Ue.SetGpioMode]:{name:"Set GPIO Mode",description:"Configure the mode of a GPIO",options:[...b("Mode","mode",[l("TGLNO","Toggle Normally Open"),l("TGLNC","Toggle Normally Closed"),l("INNO","Input Normally Open"),l("INNC","Input Normally Closed"),l("OUTNO","Output Normally Open"),l("OUTNC","Output Normally Closed")],"TGLNO"),...b("GPIO","gpio",st(o.gpio),"1")],callback:async e=>{const t=q(e,"gpio"),r=V(e,"mode"),s=Ae.GpioMode(t);await n(s,r)}},[Ue.SetGpioState]:{name:"Set GPIO State",description:"Set the state of a GPIO",options:[...b("Selection","sel",st(o.gpio),"1"),...y("state","State",!0)],callback:async e=>{const t=q(e,"sel"),r=q(e,"state"),s=Ae.GpioState(t);await n(s,r)}},[Ue.SaveNow]:{name:"Save",description:"Save console data to internal flash. CAUTION: excessive writes to the internal flash memory can cause it to wear out.",options:[],callback:async()=>{await n(Ae.SaveNow(),1)}},[Ue.SetSOF]:{name:"Set SOF",description:"Set Sends on Fader",options:[{type:"checkbox",label:"Toggle",id:"toggle",default:!1,tooltip:"Toggle the Sends-on-fade state of a selected channel, aux, bus, main or matrix"},...b("Channel","channel",[{id:"current",label:"Currently Selected Channel"},{id:"off",label:"Off"},...r.namedChoices.channels,...r.namedChoices.auxes,...r.namedChoices.busses,...r.namedChoices.mains,...r.namedChoices.matrices],"current")],callback:async e=>{const t=Ae.SetSof(),s=ie(V(e,"channel"));s===(L(t,r)??0)?await n(t,1):await n(t,s+1)}},[Ue.SetSelected]:{name:"Set Selected",description:"Set Selected Channel Strip",options:[...b("Channel","channel",[...r.namedChoices.channels,...r.namedChoices.auxes,...r.namedChoices.busses,...r.namedChoices.mains,...r.namedChoices.matrices])],callback:async e=>{const t=ie(V(e,"channel"));await n(Ae.SetSelect(),t)}},[Ue.SetLightIntensities]:{name:"Set Light Intensities",description:"Set the intensities of console lights. (leave empty for no change)",options:[{type:"textinput",label:"Lamp",id:"lamp",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Lamp light intensity (0-100%)"},{type:"textinput",label:"Buttons",id:"btns",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Button backlight intensity (0-100%)"},{type:"textinput",label:"Layer Buttons",id:"leds",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Layer button LED intensity (5-100%)"},{type:"textinput",label:"Meters",id:"meters",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Meter display intensity (0-100%)"},{type:"textinput",label:"Channel Color",id:"rgbleds",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"RGB LED color indicator intensity (0-100%)"},{type:"textinput",label:"Channel LCD",id:"chlcds",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Channel LCD screen intensity (5-100%)"},{type:"textinput",label:"Channel LCD Contrast",id:"chlcdctr",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Channel LCD screen contrast (0-100%)"},{type:"textinput",label:"Channel Strip LCD",id:"chedit",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Channel edit strip LCD intensity (5-100%)"},{type:"textinput",label:"Touchscreen",id:"main",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Main touchscreen intensity (5-100%)"},{type:"textinput",label:"Under Console",id:"glow",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Under console ambient light intensity (0-100%)"},{type:"textinput",label:"Patch Panel",id:"patch",default:"",useVariables:!0,regex:t.Regex.PERCENT,tooltip:"Patch panel light intensity (0-100%)"},...c()],callback:async t=>{const n=[{id:"btns",cmd:Ae.ButtonsBacklightIntensity},{id:"leds",cmd:Ae.ButtonsLEDIntensity},{id:"meters",cmd:Ae.MetersIntensity},{id:"rgbleds",cmd:Ae.ColorLEDIntensity},{id:"chlcds",cmd:Ae.ChannelLCDIntensity},{id:"chlcdctr",cmd:Ae.ChannelLCDContrast},{id:"chedit",cmd:Ae.ChannelStripIntensity},{id:"main",cmd:Ae.TouchscreenIntensity},{id:"glow",cmd:Ae.UnderConsoleLightIntensity},{id:"patch",cmd:Ae.PatchPanelLightIntensity},{id:"lamp",cmd:Ae.LampLightIntensity}];for(const s of n){const n=V(t,s.id);if(null!=n&&""!==n){const i=parseFloat(n);isNaN(i)||H(s.cmd(),s.id,t,r,e.transitions,i,!1)}}},subscribe:()=>{s(Ae.ButtonsBacklightIntensity()),s(Ae.ButtonsLEDIntensity()),s(Ae.MetersIntensity()),s(Ae.ColorLEDIntensity()),s(Ae.ChannelLCDIntensity()),s(Ae.ChannelLCDContrast()),s(Ae.ChannelStripIntensity()),s(Ae.TouchscreenIntensity()),s(Ae.UnderConsoleLightIntensity()),s(Ae.PatchPanelLightIntensity()),s(Ae.LampLightIntensity())}}}}function ot(e){const t=e.connection.sendCommand.bind(e.connection);return{[Ve.MainAltSwitch]:{name:"Set Main/Alt Switch",description:"Sets the desk to use the configured main/alt input sources.",options:[...b("Selection","sel",[l("1","Alt"),l("0","Main"),l("-1","Toggle")])],callback:async e=>{const n=Te.MainAltSwitch(),r=q(e,"sel");await t(n,r)}}}}function at(e){return{...rt(e),...ze(e),...ke(e),...Xe(e),...Ke(e),...nt(e),...He(e),...it(e),...ot(e)}}function ct(e,t,n,r){t.subscribe(n,r.id,r.feedbackId),e(n)}function lt(e,t,n){e.unsubscribe(t,n.id)}function ut(e){const n=e.stateHandler?.state;if(!n)throw new Error("State handler or state is not available");const r=e.feedbackHandler?.subscriptions;if(!r)throw new Error("Feedback handler or subscriptions are not available");const s=e.stateHandler?.ensureLoaded.bind(e.stateHandler);if(!s)throw new Error("State handler or ensureLoaded is not available");const i=[...n.namedChoices.channels,...n.namedChoices.auxes,...n.namedChoices.busses,...n.namedChoices.matrices,...n.namedChoices.mains],o=[...i,...n.namedChoices.dcas],a=[...n.namedChoices.channels,...n.namedChoices.auxes,...n.namedChoices.busses,...n.namedChoices.mains],c=[...n.namedChoices.busses,...n.namedChoices.mains,...n.namedChoices.matrices],u=[...n.namedChoices.matrices];return{[qe.MainAltSwitch]:{type:"boolean",name:"Main/Alt Input Source",description:"React to the selected input source group (Main or Alt).",options:[...b("Selected","sel",[l("1","Main"),l("0","Alt")])],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=Te.MainAltSwitch(),r=V(e,"sel"),s=L(t,n);return"number"==typeof s&&`${Number(!s)}`===r},subscribe:async e=>{const t=Te.MainAltSwitch();ct(s,r,t,e)},unsubscribe:e=>{const t=Te.MainAltSwitch();lt(r,t,e)}},[qe.Mute]:{type:"boolean",name:"Mute",description:"React to a change in a channel's mute state",options:[...b("Selection","sel",[...o,...n.namedChoices.mutegroups]),...g("mute","State",!1)],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"sel"),r=q(e,"mute"),s=L(Q(t,W(t)),n);return"number"==typeof s&&s==r},subscribe:async e=>{const t=V(e,"sel"),n=Q(t,W(t));ct(s,r,n,e)},unsubscribe:e=>{const t=V(e,"sel"),n=Q(t,W(t));lt(r,n,e)}},[qe.SendMute]:{type:"boolean",name:"Send Mute",description:"React to a change in a channel's send mute state",options:[...C(a,c,u),...g("mute","Mute",!1)],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const{src:t,dest:r}=G(e),s=Z(t,r);let i=q(e,"mute");-1!=i&&(i=0==i?1:0);const o=L(s,n);return"number"==typeof o&&o!=i},subscribe:async e=>{const{src:t,dest:n}=G(e),i=Z(t,n);ct(s,r,i,e)},unsubscribe:e=>{const{src:t,dest:n}=G(e),s=Z(t,n);lt(r,s,e)}},[qe.AesStatus]:{type:"boolean",name:"AES Status",description:"Status of an AES Connection",options:[...b("Interface","aes",[l("A","AES A"),l("B","AES B"),l("C","AES C")]),...b("Status","status",[l("OK","OK"),l("ERR","Error"),l("UPD","Updating"),l("-","Not Connected")])],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"aes"),r=V(e,"status");return A(Fe.AesStatus(t),n)===r},subscribe:async e=>{const t=V(e,"aes"),n=Fe.AesStatus(t);ct(s,r,n,e)},unsubscribe:e=>{const t=V(e,"aes"),n=Fe.AesStatus(t);lt(r,n,e)}},[qe.RecorderState]:{type:"boolean",name:"USB Recorder State",description:"React to the current state of the USB Recorder",options:[...b("State","state",[l("REC","Recording"),l("PAUSE","Paused"),l("STOP","Stopped")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,0,0),color:(0,t.combineRgb)(255,255,255)},callback:e=>{const t=V(e,"state");return A(De.RecorderActiveState(),n)===t},subscribe:async e=>{const t=De.RecorderActiveState();ct(s,r,t,e)},unsubscribe:e=>{const t=De.RecorderActiveState();lt(r,t,e)}},[qe.PlayerState]:{type:"boolean",name:"USB Player State",description:"React to the current state of the USB Player",options:[...b("State","state",[l("PLAY","Playing"),l("PAUSE","Paused"),l("STOP","Stopped")])],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"state");return A(De.PlayerActiveState(),n)===t},subscribe:async e=>{const t=De.PlayerActiveState();ct(s,r,t,e)},unsubscribe:e=>{const t=De.PlayerActiveState();lt(r,t,e)}},[qe.WLiveSDState]:{type:"boolean",name:"WLive SD State",description:"React to the state of the WLive SD Cards.",options:[...b("Card","card",tt()),...b("State","state",[l("NONE","None"),l("READY","Ready"),l("PROTECT","Protected"),l("ERASE","Formatting"),l("ERROR","Error")])],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=q(e,"card"),r=V(e,"state");return A(Le.WLiveCardSDState(t),n)==r},subscribe:async e=>{const t=q(e,"card"),n=Le.WLiveCardSDState(t);ct(s,r,n,e)},unsubscribe:e=>{const t=q(e,"card"),n=Le.WLiveCardSDState(t);lt(r,n,e)}},[qe.WLivePlaybackState]:{type:"boolean",name:"WLive Playback State",description:"React to the playback state of a WLive Card.",options:[...b("Card","card",tt()),...b("State","state",et())],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=q(e,"card"),r=V(e,"state");return A(Le.WLiveCardState(t),n)==r},subscribe:async e=>{const t=q(e,"card"),n=Le.WLiveCardState(t);ct(s,r,n,e)},unsubscribe:e=>{const t=q(e,"card"),n=Le.WLiveCardState(t);lt(r,n,e)}},[qe.GpioState]:{type:"boolean",name:"GPIO State",description:"React to a change in a gpio's state",options:[...b("Selection","sel",st(4)),...b("State","state",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=q(e,"sel"),r=q(e,"state"),s=L(Ae.GpioReadState(t),n);return"number"==typeof s&&s==r},subscribe:async e=>{const t=q(e,"sel"),n=Ae.GpioReadState(t);ct(s,r,n,e)},unsubscribe:e=>{const t=q(e,"sel"),n=Ae.GpioReadState(t);lt(r,n,e)}},[qe.Solo]:{type:"boolean",name:"Solo",description:"React to a change in a channel's solo state",options:[...b("Selection","sel",[l("any","Any"),l("all","All"),...o]),...b("Solo","solo",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"sel"),r=q(e,"solo");if("any"==t)return o.some(e=>{const t=e.id.toString().split("/")[2];return L(J(e.id,t),n)==r});if("all"==t)return o.every(e=>{const t=e.id.toString().split("/")[2];return L(J(e.id,t),n)==r});{const s=L(J(t,j(e,"sel")),n);return"number"==typeof s&&s==r}},subscribe:async e=>{const t=V(e,"sel");if("any"==t||"all"==t)o.forEach(t=>{const n=t.id.toString().split("/")[2],i=J(t.id,n);ct(s,r,i,e)});else{const n=J(t,j(e,"sel"));ct(s,r,n,e)}},unsubscribe:e=>{const t=V(e,"sel");if("any"==t||"all"==t)o.forEach(t=>{const n=t.id.toString().split("/")[2],s=J(t.id,n);lt(r,s,e)});else{const n=J(t,j(e,"sel"));lt(r,n,e)}}},[qe.SoloDim]:{type:"boolean",name:"Solo Dim",description:"React to the dim state of the solo output.",options:[...b("Dim","dim",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=q(e,"dim"),r=L(M.SoloDim(),n);return"number"==typeof r&&r==t},subscribe:e=>{const t=M.SoloDim();ct(s,r,t,e)},unsubscribe:e=>{const t=M.SoloDim();lt(r,t,e)}},[qe.SoloMono]:{type:"boolean",name:"Solo Mono",description:"React to the mono state of the solo output.",options:[...b("Mono","mono",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=q(e,"mono"),r=L(M.SoloMono(),n);return"number"==typeof r&&r==t},subscribe:e=>{const t=M.SoloMono();ct(s,r,t,e)},unsubscribe:e=>{const t=M.SoloMono();lt(r,t,e)}},[qe.SoloLRSwap]:{type:"boolean",name:"Solo LR Swap",description:"React to the left-right channel swap state of the solo output.",options:[...b("Swap","swap",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=q(e,"swap"),r=L(M.SoloLRSwap(),n);return"number"==typeof r&&r==t},subscribe:e=>{const t=M.SoloLRSwap();ct(s,r,t,e)},unsubscribe:e=>{const t=M.SoloLRSwap();lt(r,t,e)}},[qe.Talkback]:{type:"boolean",name:"Talkback",description:"React to the status of a talkback channel.",options:[...b("Talkback","tb",Ie()),...b("On/Off","on",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,0,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"tb"),r=q(e,"on"),s=L(M.TalkbackOn(t),n);return"number"==typeof s&&s==r},subscribe:async e=>{const t=V(e,"tb"),n=M.TalkbackOn(t);ct(s,r,n,e)},unsubscribe:e=>{const t=V(e,"tb"),n=M.TalkbackOn(t);lt(r,n,e)}},[qe.TalkbackAssign]:{type:"boolean",name:"Talkback Assign",description:"React to the assignment of a talkback channel to a bus matrix or main",options:[...b("Talkback","tb",Ie()),...b("Destination","dest",[...n.namedChoices.busses,...n.namedChoices.matrices,...n.namedChoices.mains]),...b("Assign","assign",[l("1","Assigned"),l("0","Not Assigned")])],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"tb"),r=V(e,"dest"),s=q(e,"assign"),i=L(ne(t,r),n);return"number"==typeof i&&i==s},subscribe:async e=>{const t=ne(V(e,"tb"),V(e,"dest"));ct(s,r,t,e)},unsubscribe:e=>{const t=ne(V(e,"tb"),V(e,"dest"));lt(r,t,e)}},[qe.InsertOn]:{type:"boolean",name:"Insert On",description:"React to a change for an insert on a channel, aux, bus, matrix or main.",options:[...b("Insert","insert",[l("pre","Pre-Insert"),l("post","Post-Insert"),l("both","Both"),l("either","Either")]),...b("Selection","sel",[...i]),...b("On/Off","on",[l("1","On"),l("0","Off")])],defaultStyle:{bgcolor:(0,t.combineRgb)(255,0,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=V(e,"insert"),r=V(e,"sel"),s=q(e,"on");let i=!1,o=!1,a=re(r,j(e,"sel")),c=L(a,n);return i=(c??0)==s,a=se(r,j(e,"sel")),c=L(a,n),o=(c??0)==s,"pre"===t?i:"post"===t?o:"both"===t?i&&o:"either"===t&&(i||o)},subscribe:async e=>{const t=V(e,"sel");let n=re(t,j(e,"sel"));ct(s,r,n,e),n=se(t,j(e,"sel")),ct(s,r,n,e)},unsubscribe:e=>{const t=V(e,"sel");let n=re(t,j(e,"sel"));lt(r,n,e),n=se(t,j(e,"sel")),lt(r,n,e)}},[qe.ActiveScene]:{type:"boolean",name:"Active Scene",description:"React to the currently active scene",options:[m("Scene","scene",n.namedChoices.scenes)],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=e.options.scene,r=n.sceneNameToIdMap.get(t)??0,s=L(Ae.LibraryActiveSceneIndex(),n);return"number"==typeof s&&s===r},subscribe:e=>{const t=Ae.LibraryActiveSceneIndex();ct(s,r,t,e)},unsubscribe:e=>{const t=Ae.LibraryActiveSceneIndex();lt(r,t,e)}},[qe.SofActive]:{type:"boolean",name:"SOF Active",description:"React to the Sends on Fade mode",options:[...b("Channel","channel",[{id:"off",label:"Off"},...n.namedChoices.channels,...n.namedChoices.auxes,...n.namedChoices.busses,...n.namedChoices.mains,...n.namedChoices.matrices],"off")],defaultStyle:{bgcolor:(0,t.combineRgb)(0,255,0),color:(0,t.combineRgb)(0,0,0)},callback:e=>{const t=ie(V(e,"channel"));return L(Ae.SetSof(),n)===t},subscribe:async e=>{const t=Ae.SetSof();ct(s,r,t,e)},unsubscribe:e=>{const t=Ae.SetSof();lt(r,t,e)}}}}!function(e){e.MatrixDirectInOn="matrix_direct_in_level_on",e.MatrixDirectInInput="matrix_direct_in_input",e.MatrixDirectInInvert="matrix_direct_in_invert",e.MatrixDirectInDeltaFader="matrix_direct_in_delta_fader",e.MatrixDirectInUndoDeltaFader="matrix_direct_in_undo_delta_fader",e.MatrixDirectInRecallFader="matrix_direct_in_recall_fader",e.MatrixDirectInSetFader="matrix_direct_in_set_fader",e.MatrixDirectInStoreFader="matrix_direct_in_store_fader"}(Re||(Re={})),function(e){e.PlaybackAction="playback-action",e.SetRepeat="set-repeat",e.RecordAction="record-action"}(Be||(Be={})),function(e){e.SetLink="set-link",e.SetAutoInput="set-auto-input",e.SetAutoStop="set-auto-stop",e.SetAutoPlay="set-auto-play",e.SetAutoRecord="set-auto-record",e.CardAction="card-action",e.OpenSession="open-session",e.DeleteSession="delete-session",e.NameSession="name-session",e.SetPosition="set-position",e.AddMarker="add-marker",e.EditMarker="edit-marker",e.GotoMarker="goto-marker",e.DeleteMarker="delete-marker",e.FormatCard="format-card"}(je||(je={})),function(e){e.SetMainConnection="set-main-connection",e.SetAltConnection="set-alt-connection",e.SetAutoSourceSwitch="set-auto-source-switch",e.SetMainAlt="set-main-alt",e.SetScribbleLight="set-scribble-light",e.SetScribbleLightColor="set-scribble-light-color",e.SetName="set-name",e.SetIcon="set-icon",e.SetSolo="set-solo",e.ClearSolo="clear-solo",e.SetGain="set-gain",e.StoreGain="store-gain",e.RestoreGain="restore-gain",e.DeltaGain="delta-gain",e.UndoDeltaGain="undo-delta-gain",e.SetMute="set-mute",e.SetFader="set-fader",e.StoreFader="store-fader",e.RestoreFader="restore-fader",e.DeltaFader="fader-delta",e.UndoDeltaFader="undo-fader-delta",e.SetPanorama="set-panorama",e.StorePanorama="store-panorama",e.RestorePanorama="restore-panorama",e.DeltaPanorama="panorama-delta",e.UndoDeltaPanorama="undo-panorama",e.SetDelay="set-delay",e.SetDelayAmount="set-delay-amount",e.SetGateOn="set-gate-on",e.SetEqOn="set-eq-on",e.SetDynamicsOn="set-dynamics-on",e.SetSendMute="set-send-mute",e.SetSendFader="set-send-fader",e.StoreSendFader="store-send-fader",e.RestoreSendFader="restore-send-fader",e.DeltaSendFader="delta-send-fader",e.UndoDeltaSendFader="undo-send-fader",e.SetSendPanorama="set-send-panorama",e.StoreSendPanorama="store-send-panorama",e.RestoreSendPanorama="restore-send-panorama",e.DeltaSendPanorama="delta-send-panorama",e.UndoDeltaSendPanorama="undo-send-panorama",e.SetInsertOn="set-insert-on"}(We||(We={})),function(e){e.RecallSceneByName="recall-scene-by-name",e.RecallSceneByNumber="recall-scene-by-number",e.SendLibraryAction="send-library-action",e.SetGpioMode="set-gpio-mode",e.SetGpioState="set-gpio-state",e.SaveNow="save-now",e.SetSOF="set-sof",e.SetSelected="set-selected",e.SetLightIntensities="set-light-intensities"}(Ue||(Ue={})),function(e){e.MainAltSwitch="main-alt-swtich"}(Ve||(Ve={})),function(e){e.Mute="mute",e.SendMute="send-mute",e.AesStatus="aes-status",e.RecorderState="recorder-state",e.PlayerState="player-state",e.WLiveSDState="wlive-sd-state",e.WLivePlaybackState="wlive-playback-state",e.GpioState="gpio-state",e.Solo="solo",e.SoloDim="solo-dim",e.SoloMono="solo-mono",e.SoloLRSwap="solo-lr-swap",e.Talkback="talkback",e.TalkbackAssign="talkback-assign",e.InsertOn="insert-on",e.MainAltSwitch="main-alt-switch",e.ActiveScene="active-scene",e.SofActive="sof-active"}(qe||(qe={})),function(e){e.getEasing=function(e,h){return"linear"==e||null==e||null==h?t.None:"quadratic"==e&&"ease-in"==h?n.In:"quadratic"==e&&"ease-out"==h?n.Out:"quadratic"==e&&"ease-in-out"==h?n.InOut:"cubic"==e&&"ease-in"==h?r.In:"cubic"==e&&"ease-out"==h?r.Out:"cubic"==e&&"ease-in-out"==h?r.InOut:"quartic"==e&&"ease-in"==h?s.In:"quartic"==e&&"ease-out"==h?s.Out:"quartic"==e&&"ease-in-out"==h?s.InOut:"quintic"==e&&"ease-in"==h?i.In:"quintic"==e&&"ease-out"==h?i.Out:"quintic"==e&&"ease-in-out"==h?i.InOut:"sinusoidal"==e&&"ease-in"==h?o.In:"sinusoidal"==e&&"ease-out"==h?o.Out:"sinusoidal"==e&&"ease-in-out"==h?o.InOut:"exponential"==e&&"ease-in"==h?a.In:"exponential"==e&&"ease-out"==h?a.Out:"exponential"==e&&"ease-in-out"==h?a.InOut:"circular"==e&&"ease-in"==h?c.In:"circular"==e&&"ease-out"==h?c.Out:"circular"==e&&"ease-in-out"==h?c.InOut:"elastic"==e&&"ease-in"==h?l.In:"elastic"==e&&"ease-out"==h?l.Out:"elastic"==e&&"ease-in-out"==h?l.InOut:"back"==e&&"ease-in"==h?u.In:"back"==e&&"ease-out"==h?u.Out:"back"==e&&"ease-in-out"==h?u.InOut:"bounce"==e&&"ease-in"==h?d.In:"bounce"==e&&"ease-out"==h?d.Out:"bounce"==e&&"ease-in-out"==h?d.InOut:t.None};class t{static None(e){return e}}e.Linear=t;class n{static In(e){return e*e}static Out(e){return e*(2-e)}static InOut(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}e.Quadratic=n;class r{static In(e){return e*e*e}static Out(e){return--e*e*e+1}static InOut(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}e.Cubic=r;class s{static In(e){return e*e*e*e}static Out(e){return 1- --e*e*e*e}static InOut(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}e.Quartic=s;class i{static In(e){return e*e*e*e*e}static Out(e){return--e*e*e*e*e+1}static InOut(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}e.Quintic=i;class o{static In(e){return 1-Math.cos(e*Math.PI/2)}static Out(e){return Math.sin(e*Math.PI/2)}static InOut(e){return.5*(1-Math.cos(Math.PI*e))}}e.Sinusoidal=o;class a{static In(e){return 0===e?0:Math.pow(1024,e-1)}static Out(e){return 1===e?1:1-Math.pow(2,-10*e)}static InOut(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}e.Exponential=a;class c{static In(e){return 1-Math.sqrt(1-e*e)}static Out(e){return Math.sqrt(1- --e*e)}static InOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}e.Circular=c;class l{static In(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}static Out(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}static InOut(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}}e.Elastic=l;class u{static In(e){const t=1.70158;return e*e*((t+1)*e-t)}static Out(e){const t=1.70158;return--e*e*((t+1)*e+t)+1}static InOut(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}e.Back=u;class d{static In(e){return 1-d.Out(1-e)}static Out(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}static InOut(e){return e<.5?.5*d.In(2*e):.5*d.Out(2*e-1)+.5}}e.Bounce=d}(Ge||(Ge={}));class dt{transitions;instance;fadeUpdateRate;tickInterval;constructor(e){this.transitions=new Map,this.instance=e,this.fadeUpdateRate=50}setUpdateRate(e){this.fadeUpdateRate=e}sendOsc(e,t){this.instance.config.host&&this.instance.connection.sendCommand(e,t,!0).catch(()=>{})}stopAll(){this.transitions.clear(),this.tickInterval&&(clearInterval(this.tickInterval),delete this.tickInterval)}runTick(){const e=[];for(const[t,n]of this.transitions.entries()){const r=n.steps.shift();void 0!==r&&this.sendOsc(t,r),0===n.steps.length&&e.push(t)}for(const t of e)this.transitions.delete(t);0===this.transitions.size&&this.stopAll()}run(e,t,n,r,s,i,o){const a=this.fadeUpdateRate,c=Math.ceil(r/a);if(c<=1||"number"!=typeof t)this.transitions.delete(e),this.sendOsc(e,n);else{0!=o&&(t=pt(t),n=pt(n));const r=n-t,a=[],l=Ge.getEasing(s,i);for(let e=1;e<=c;e++){const n=l(e/c);0==o?a.push(t+r*n):a.push(ht(t+r*n))}this.transitions.set(e,{steps:a}),this.tickInterval||(this.tickInterval=setInterval(()=>this.runTick(),this.fadeUpdateRate))}}}function ht(e){return(e>1||e<0)&&console.error(`Illegal value for fader float ([0.0, 1.0]) = ${e}`),e>=.5?40*e-30:e>=.25?80*e-50:e>=.0625?160*e-70:e>=0?480*e-90:Number.NEGATIVE_INFINITY}function pt(e){let t;return(e>1||e<0)&&console.error(`Illegal value for fader ([-144 10]) = ${e}`),t=e<-60?(e+90)/480:e<-30?(e+70)/160:e<-10?(e+50)/80:e<=10?(e+30)/40:1,t}const ft={id:e.Full,label:"Full",channels:40,auxes:8,busses:16,matrices:8,mains:4,dcas:16,mutegroups:8,localInputs:8,localOutputs:8,localAuxIn:8,localAuxOut:8,aesIns:2,aesOut:2,stageConnect:1,gpio:4},mt={id:e.Compact,label:"Compact",channels:40,auxes:8,busses:16,matrices:8,mains:4,dcas:16,mutegroups:8,localInputs:8,localOutputs:8,localAuxIn:8,localAuxOut:8,aesIns:2,aesOut:2,stageConnect:1,gpio:2};function bt(t){switch(t){case e.Full:return ft;case e.Compact:return mt;case e.Rack:return $e;default:return ft}}function gt(e,n){const r=`/${e}/${n}`,s=`${e.toUpperCase()}${n}`;return{name:"Mute Button",category:"Mute",type:"button",style:{text:`let name = 'Mute'const realName = $(wing:${e}${n}_name)let hasNoName = realName === '' || return hasNoName ? 'Mute ${s}' : \`Mute \${realName}\``,textExpression:!0,size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},options:{stepAutoProgress:!0},steps:[{down:[{actionId:We.SetMute,options:{sel:r,mute:-1}}],up:[]}],feedbacks:[{feedbackId:qe.Mute,options:{sel:r,mute:1},style:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(255,0,0)}}]}}function yt(e,n){const r=`/${e}/${n}`,s=`${e.toUpperCase()}${n}`;return{name:"SoloButton",category:"Solo",type:"button",style:{text:`let name = 'Solo'const realName = $(wing:${e}${n}_name)let hasNoName = realName === '' || return hasNoName ? 'Solo ${s}' : \`Solo \${realName}\``,textExpression:!0,size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},options:{stepAutoProgress:!0},steps:[{down:[{actionId:We.SetSolo,options:{sel:`${r}`,solo:-1}}],up:[]}],feedbacks:[{feedbackId:qe.Solo,options:{sel:r,solo:"1"},style:{color:(0,t.combineRgb)(0,0,0),bgcolor:(0,t.combineRgb)(255,255,0)}}]}}function vt(e,n){const r=`/${e}/${n}`,s=`${e.toUpperCase()}${n}`;return{name:"Boost and Center Button",category:"Boost",type:"button",style:{text:`let name = 'Boost & Center'const realName = $(wing:${e}${n}_name)let hasNoName = realName === '' || return hasNoName ? 'Boost & Center ${s}' : \`Boost & Center \${realName}\``,textExpression:!0,size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},options:{stepAutoProgress:!0},steps:[{down:[{actionId:We.StoreFader,options:{sel:r}},{actionId:We.DeltaFader,options:{sel:r,delta:3,fadeDuration:1e3,fadeAlgorithm:"quadratic",fadeType:"ease-in-out"}},{actionId:We.StorePanorama,options:{sel:r}},{actionId:We.SetPanorama,options:{sel:r,pan:0,fadeDuration:1e3,fadeAlgorithm:"quadratic",fadeType:"ease-in-out"}}],up:[]},{down:[{actionId:We.RestoreFader,options:{sel:r,fadeDuration:1e3,fadeAlgorithm:"quadratic",fadeType:"ease-in-out"}},{actionId:We.RestorePanorama,options:{sel:r,fadeDuration:1e3,fadeAlgorithm:"quadratic",fadeType:"ease-in-out"}}],up:[]}],feedbacks:[]}}function St(e){return{name:`Talkback ${e}`,category:"Talkback",type:"button",style:{text:`TB ${e}`,size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},options:{stepAutoProgress:!0},steps:[{down:[{actionId:xe.TalkbackOn,options:{tb:`${e}`,solo:2}}],up:[]}],feedbacks:[{feedbackId:qe.Talkback,options:{tb:`${e}`,on:"1"},style:{color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(255,0,0)}}]}}function wt(e,n){const r=`/${e}/${n}`,s=`${e.toUpperCase()}${n}`;return{name:"Sends on Fader",category:"Sends on Fader",type:"button",style:{text:`let name = 'SOF'const realName = $(wing:${e}${n}_name)let hasNoName = realName === '' || isreturn hasNoName ? 'SOF ${s}' : \`SOF \${realName}\``,textExpression:!0,size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},steps:[{down:[{actionId:Ue.SetSOF,options:{toggle:!0,channel:r}}],up:[]}],feedbacks:[{feedbackId:qe.SofActive,options:{channel:r},style:{bgcolor:(0,t.combineRgb)(255,165,0)}}]}}class _t extends i.EventEmitter{osc;subscriptionTimer;subscriptionInterval=9e3;logger;constructor(e){super(),this.osc=new r.UDPPort({}),this.logger=e}open(e,t,n,s){this.logger?.info(`Opening OSC connection from ${e}:${t} to ${n}:${s}`),this.osc=new r.UDPPort({localAddress:e,localPort:t,remoteAddress:n,remotePort:s,broadcast:!0,metadata:!0}),this.osc.on("ready",()=>{this.emit("ready")}),this.osc.on("error",e=>{this.logger?.error(`OSC error: ${e.message}`),this.emit("error",e)}),this.osc.on("close",()=>{this.logger?.info("OSC connection closed"),this.subscriptionTimer&&(clearInterval(this.subscriptionTimer),this.subscriptionTimer=void 0),this.emit("close")}),this.osc.on("message",e=>{const t=e.args[0].value;this.logger?.debug(`Received ${e.address}: ${t} (string)`),this.emit("message",e)}),this.osc.open()}setSubscriptionInterval(e){this.logger?.info(`Setting subscription interval to ${e} ms`),this.subscriptionInterval=e}startSubscription(){this.sendSubscriptionCommand(),this.logger?.info("Started subscription for OSC updates"),this.subscribeForUpdates()}stopSubscription(){this.subscriptionTimer&&(clearInterval(this.subscriptionTimer),this.subscriptionTimer=void 0,this.logger?.info("Stopped OSC subscription updates"))}subscribeForUpdates(){this.subscriptionTimer=setInterval(()=>{this.sendSubscriptionCommand()},this.subscriptionInterval)}sendSubscriptionCommand(){this.logger?.debug("Sending subscription command"),this.sendCommand("/*S",void 0,void 0,!0).catch(()=>{})}close(){this.osc.close(),this.logger?.info("OSC Handler destroyed")}async sendCommand(e,t,n,r=!1){let s=[];"number"==typeof t?n?(s={type:"f",value:t},r||this.logger?.debug(`Sending OSC command: ${e} ${t} (preferred float)`)):Number.isInteger(t)?(s={type:"i",value:t},r||this.logger?.debug(`Sending OSC command: ${e} ${t} (integer)`)):(s={type:"f",value:t},r||this.logger?.debug(`Sending OSC command: ${e} ${t} (float)`)):"string"==typeof t?(s={type:"s",value:t},r||this.logger?.debug(`Sending OSC command: ${e} ${t} (string)`)):null==t?(s=[],r||this.logger?.debug(`Sending OSC command: ${e} (no argument)`)):this.logger?.error("Unsupported argument type. Command aborted.");const i={address:e,args:s};this.osc.send(i),this.osc.send({address:e,args:[]})}}var Ct=n(228);class kt extends Error{constructor(e){super(e),this.name="TimeoutError"}}class Et extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const It=e=>void 0===globalThis.DOMException?new Et(e):new DOMException(e),$t=e=>{const t=void 0===e.reason?It("This operation was aborted."):e.reason;return t instanceof Error?t:It(t)};class xt{#te=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,id:t.id,run:e};if(0===this.size||this.#te[this.size-1].priority>=t.priority)return void this.#te.push(n);const r=function(e,t,n){let r=0,s=e.length;for(;s>0;){const i=Math.trunc(s/2);let o=r+i;n(e[o],t)<=0?(r=++o,s-=i+1):s=i}return r}(this.#te,n,(e,t)=>t.priority-e.priority);this.#te.splice(r,0,n)}setPriority(e,t){const n=this.#te.findIndex(t=>t.id===e);if(-1===n)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);const[r]=this.#te.splice(n,1);this.enqueue(r.run,{priority:t,id:e})}dequeue(){const e=this.#te.shift();return e?.run}filter(e){return this.#te.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this.#te.length}}class Ot extends Ct{#ne;#re;#se=0;#ie;#oe;#ae=0;#ce;#le;#te;#ue;#de=0;#he;#pe;#fe;#me=1n;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:xt,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#ne=e.carryoverConcurrencyCount,this.#re=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#ie=e.intervalCap,this.#oe=e.interval,this.#te=new e.queueClass,this.#ue=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#fe=!0===e.throwOnTimeout,this.#pe=!1===e.autoStart}get#be(){return this.#re||this.#se<this.#ie}get#ge(){return this.#de<this.#he}#ye(){this.#de--,this.#ve(),this.emit("next")}#Se(){this.#we(),this.#_e(),this.#le=void 0}get#Ce(){const e=Date.now();if(void 0===this.#ce){const t=this.#ae-e;if(!(t<0))return void 0===this.#le&&(this.#le=setTimeout(()=>{this.#Se()},t)),!0;this.#se=this.#ne?this.#de:0}return!1}#ve(){if(0===this.#te.size)return this.#ce&&clearInterval(this.#ce),this.#ce=void 0,this.emit("empty"),0===this.#de&&this.emit("idle"),!1;if(!this.#pe){const e=!this.#Ce;if(this.#be&&this.#ge){const t=this.#te.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#_e(),!0)}}return!1}#_e(){this.#re||void 0!==this.#ce||(this.#ce=setInterval(()=>{this.#we()},this.#oe),this.#ae=Date.now()+this.#oe)}#we(){0===this.#se&&0===this.#de&&this.#ce&&(clearInterval(this.#ce),this.#ce=void 0),this.#se=this.#ne?this.#de:0,this.#ke()}#ke(){for(;this.#ve(););}get concurrency(){return this.#he}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#he=e,this.#ke()}async#Ee(e){return new Promise((t,n)=>{e.addEventListener("abort",()=>{n(e.reason)},{once:!0})})}setPriority(e,t){this.#te.setPriority(e,t)}async add(e,t={}){return t.id??=(this.#me++).toString(),t={timeout:this.timeout,throwOnTimeout:this.#fe,...t},new Promise((n,r)=>{this.#te.enqueue(async()=>{this.#de++;try{t.signal?.throwIfAborted(),this.#se++;let r=e({signal:t.signal});t.timeout&&(r=function(e,t){const{milliseconds:n,fallback:r,message:s,customTimers:i={setTimeout,clearTimeout}}=t;let o,a;const c=new Promise((c,l)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:e}=t;e.aborted&&l($t(e)),a=()=>{l($t(e))},e.addEventListener("abort",a,{once:!0})}if(n===Number.POSITIVE_INFINITY)return void e.then(c,l);const u=new kt;o=i.setTimeout.call(void 0,()=>{if(r)try{c(r())}catch(e){l(e)}else"function"==typeof e.cancel&&e.cancel(),!1===s?c():s instanceof Error?l(s):(u.message=s??`Promise timed out after ${n} milliseconds`,l(u))},n),(async()=>{try{c(await e)}catch(e){l(e)}})()}).finally(()=>{c.clear(),a&&t.signal&&t.signal.removeEventListener("abort",a)});return c.clear=()=>{i.clearTimeout.call(void 0,o),o=void 0},c}(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#Ee(t.signal)]));const s=await r;n(s),this.emit("completed",s)}catch(e){if(e instanceof kt&&!t.throwOnTimeout)return void n();r(e),this.emit("error",e)}finally{this.#ye()}},t),this.emit("add"),this.#ve()})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this.#pe?(this.#pe=!1,this.#ke(),this):this}pause(){this.#pe=!0}clear(){this.#te=new this.#ue}async onEmpty(){0!==this.#te.size&&await this.#Ie("empty")}async onSizeLessThan(e){this.#te.size<e||await this.#Ie("next",()=>this.#te.size<e)}async onIdle(){0===this.#de&&0===this.#te.size||await this.#Ie("idle")}async#Ie(e,t){return new Promise(n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)})}get size(){return this.#te.size}sizeBy(e){return this.#te.filter(e).length}get pending(){return this.#de}get isPaused(){return this.#pe}}const Pt=(e,t,n,r)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const s=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!Nt(s,i)&&r||Object.defineProperty(e,n,i)},Nt=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Mt=(e,t)=>`/* Wrapped ${e}*/\n${t}`,Tt=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),At=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");const Dt=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:r=Number.POSITIVE_INFINITY,before:s=!1,after:i=!0}=t;if(n<0||r<0)throw new RangeError("`wait` and `maxWait` must not be negative.");if(!s&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,a,c;const l=function(...t){const l=this,u=s&&!o;return clearTimeout(o),o=setTimeout(()=>{o=void 0,a&&(clearTimeout(a),a=void 0),i&&(c=e.apply(l,t))},n),r>0&&r!==Number.POSITIVE_INFINITY&&!a&&(a=setTimeout(()=>{a=void 0,o&&(clearTimeout(o),o=void 0),i&&(c=e.apply(l,t))},r)),u&&(c=e.apply(l,t)),c};return function(e,t,{ignoreNonConfigurable:n=!1}={}){const{name:r}=e;for(const r of Reflect.ownKeys(t))Pt(e,t,r,n);((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{const r=""===n?"":`with ${n.trim()}() `,s=Mt.bind(null,r,t.toString());Object.defineProperty(s,"name",At);const{writable:i,enumerable:o,configurable:a}=Tt;Object.defineProperty(e,"toString",{value:s,writable:i,enumerable:o,configurable:a})})(e,t,r)}(l,e),l.cancel=()=>{o&&(clearTimeout(o),o=void 0),a&&(clearTimeout(a),a=void 0)},l};class Lt extends i{model;logger;state;inFlightRequests={};requestQueue=new Ot({concurrency:100,timeout:200,throwOnTimeout:!0});debounceUpdateCompanion;reCtlLib=/\/\$ctl\/lib/;reScenes=/\$scenes\s+list\s+\[([^\]]+)\]/;constructor(e,t){super(),this.model=e,this.logger=t,this.state=new Je(e),this.debounceUpdateCompanion=Dt(this.updateCompanionWithState.bind(this),{wait:200,maxWait:2e3,before:!1,after:!0})}updateCompanionWithState(){this.logger?.debug("Triggering Companion update from changed state"),this.state?.updateNames(this.model),this.emit("update")}setTimeout(e){this.requestQueue.timeout=e}updateLists(e){const t=e.args;if(this.reCtlLib.test(e.address)){const e=String(t[0]?.value??"").match(this.reScenes);if(e){const t=e[1].split(",").map(e=>e.trim()),n=t.map(e=>({id:e,label:e})),r=new Map(t.map((e,t)=>[e,t+1]));if(!((e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(t.get(n)!==r)return!1;return!0})(this.state.sceneNameToIdMap,r))return this.logger?.info("Updating scene map"),this.state.namedChoices.scenes=n,this.state.sceneNameToIdMap=r,!0}}return!1}processMessage(e){for(const t of e){const{address:e,args:n}=t,r=!!this.inFlightRequests[t.address];this.inFlightRequests[t.address]&&(this.logger?.debug(`Received answer for request ${t.address}`),this.inFlightRequests[t.address](),delete this.inFlightRequests[t.address]);const s=n;this.state?.set(e,s);const i=s[0].value;this.logger?.debug(`State updated for ${e}: ${i}`);const o=this.updateLists(t);!r&&o&&this.requestUpdate()}}ensureLoaded(e,t){this.requestQueue.add(async()=>{if(this.inFlightRequests[e])return void this.logger?.debug(`Request already in flight for ${e}, skipping`);this.logger?.debug(`Requesting ${e}`);const n=new Promise(t=>{this.inFlightRequests[e]=t});this.emit("request",e,t),await n}).catch(t=>{delete this.inFlightRequests[e],this.emit("request-failed",e),this.logger?.warn(`Request failed for ${e} after timeout (${t})`)})}clearState(){this.state=new Je(this.model),this.logger?.debug("State cleared")}requestUpdate(){this.debounceUpdateCompanion()}}class Ft extends i{messageFeedbacks=new Set;debounceMessageFeedbacks;pollTimeout;pollInterval=3e3;logger;subscriptions;constructor(e){super(),this.logger=e,this.subscriptions=new Ye,this.debounceMessageFeedbacks=Dt(()=>{const e=Array.from(this.messageFeedbacks).map(e=>e.toString());this.messageFeedbacks.clear(),this.emit("check-feedbacks",e)},{wait:100,maxWait:500,before:!0,after:!0})}processMessage(e){this.logger?.debug("Processing messages for feedbacks");for(const t of e){const e=this.subscriptions?.getFeedbacks(t.address);void 0!==e&&e.length>0&&(e.forEach(e=>this.messageFeedbacks.add(e)),this.debounceMessageFeedbacks())}}startPolling(){const e=this.subscriptions?.getPollPaths()||[];0!==e.length&&(this.clearPollTimeout(),this.pollTimeout=setTimeout(()=>{this.logger?.warn("Poll request was not answered"),this.emit("poll-connection-timeout")},this.pollInterval),this.emit("poll-request",e))}clearPollTimeout(){this.pollTimeout&&(clearTimeout(this.pollTimeout),this.pollTimeout=void 0)}setPollInterval(e){this.pollInterval=e}}const Rt=/\/(\w+)\/(\d+)\/\$?name/,Bt=/\/(\w+)\/(\d+)\/in\/set\/\$g/,jt=/^\/(ch|aux|bus|mtx|main|dca|mgrp)\/(\d+)(?:\/(send|main)\/(?:(MX)(\d+)|(\d+))\/(mute|on)|\/(mute))$/,Wt=/^\/(\w+)\/(\w+)(?:\/(\w+)\/(\w+))?\/(fdr|lvl|\$fdr|\$lvl)$/,Ut=/^\/(\w+)\/(\w+)(?:\/(\w+)\/(\w+))?\/(pan|\$pan)$/,Vt=/^\/(rec|play)\/(\$?\w+)$/,qt=/^\/cards\/wlive\/(\d)\/(\$?\w+)\/(\$?\w+)$/,Gt=/^\/cfg\/talk\/(A|B)\/(B|MX|M)(\d+)$/,Ht=/^\/\$ctl\/gpio\/(\d+)\/\$state$/,zt=/^\/\$ctl\/(lib|\$stat)\/(\$?\w+)/,Qt=/\/(\w+)\/(\d+)\/\$?col/;class Jt extends i{model;messages=new Set;debounceUpdateVariables;logger;variables=[];constructor(e,t,n){super(),this.model=e,this.logger=n,this.debounceUpdateVariables=Dt(()=>{this.updateVariables(),this.messages.clear()},{wait:t??1e3,before:!1,after:!0})}setupVariables(){this.logger?.info("Setting up variables");const e=Qe(this.model);this.variables.push({variableId:"desk_ip",name:"Desk IP Address"}),this.variables.push({variableId:"desk_name",name:"Desk Name"}),this.variables.push({variableId:"main_alt_status",name:"Main/Alt Input Source"}),this.variables.push(...e.map(e=>({variableId:e.variableId,name:e.name}))),this.logger?.info(`Defined ${this.variables.length} variables`),this.emit("create-variables",this.variables)}updateVariables(){const e=[...this.messages];if(0===e.length)return;const t=[];for(const n of e){const e=n.address,r=n.args,s=this.updateNameVariables(e,r[0]?.value)??this.updateGainVariables(e,r[0]?.value)??this.updateMuteVariables(e,r[0]?.value)??this.updateFaderVariables(e,r[0]?.value)??this.updatePanoramaVariables(e,r[0]?.value)??this.updateUsbVariables(e,r[0])??this.updateSdVariables(e,r[0])??this.updateTalkbackVariables(e,r[0])??this.updateGpioVariables(e,r[0]?.value)??this.updateControlVariables(e,r[0])??this.updateIoVariables(e,r[0])??this.updateColorVariables(e,r[0]?.value);s&&t.push(...s)}const n={};for(const{name:e,value:r}of t)void 0!==e&&void 0!==r&&(n[e]=r);this.emit("update-variables",n)}updateNameVariables(e,t){const n=e.match(Rt);if(n)return[{name:`${n[1]}${n[2]}_name`,value:t}]}updateGainVariables(e,t){const n=e.match(Bt);if(n)return[{name:`${n[1]}${n[2]}_gain`,value:t=this.round(t,1)}]}updateMuteVariables(e,t){const n=e.match(jt);if(!n)return;const r=n[1],s=parseInt(n[2]),i=n[3]??null;let o=null,a=null;return"MX"===n[4]?(o="MX",a=parseInt(n[5])):n[6]&&(o=i,a=parseInt(n[6])),"on"===(n[7]??n[8])&&(t=Number(!(1==t))),null==o?[{name:`${r}${s}_mute`,value:t}]:("send"===o?o="bus":"MX"===o&&(o="mtx"),[{name:`${r}${s}_${o}${a}_mute`,value:t}])}updateFaderVariables(e,t){const n=e.match(Wt);if(!n)return;const r=`${n[1]}${n[2]}`;let s=null;n[3]&&n[4]&&(s=`${n[3]}${n[4]}`),s&&(/^send(\d+)$/.test(s)?s=s.replace(/^send(\d+)$/,"bus$1"):/^sendMX(\d+)$/.test(s)&&(s=s.replace(/^sendMX(\d+)$/,"mtx$1")));let i=null;return i=s?`${r}_${s}_level`:`${r}_level`,(t=this.round(t,1))>-140?[{name:i,value:t}]:[{name:i,value:"-oo"}]}updatePanoramaVariables(e,t){const n=e.match(Ut);if(!n)return;const r=`${n[1]}${n[2]}`;let s=null;n[3]&&n[4]&&(s=`${n[3]}${n[4]}`),s&&(/^send(\d+)$/.test(s)?s=s.replace(/^send(\d+)$/,"bus$1"):/^sendMX(\d+)$/.test(s)&&(s=s.replace(/^sendMX(\d+)$/,"mtx$1")));let i=null;return i=s?`${r}_${s}_pan`:`${r}_pan`,t=this.round(t,0),[{name:i,value:Math.round(t)}]}updateUsbVariables(e,t){const n=e.match(Vt);if(!n)return;const r=n[1],s=n[2];if("rec"==r){if("$time"==s){const e=t.value;return[{name:"usb_record_time_ss",value:e.toString()},{name:"usb_record_time_mm_ss",value:`${Math.floor(e/60).toString().padStart(3,"0")}:${(e%60).toString().padStart(2,"0")}`},{name:"usb_record_time_hh_mm_ss",value:`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}]}if("$actfile"==s)return[{name:"usb_record_path",value:t.value}];if("$actstate"==s)return[{name:"usb_record_state",value:t.value}]}else if("play"==r){if("$pos"==s){const e=t.value;return[{name:"usb_play_pos_ss",value:e.toString()},{name:"usb_play_pos_mm_ss",value:`${Math.floor(e/60).toString().padStart(3,"0")}:${(e%60).toString().padStart(2,"0")}`},{name:"usb_play_pos_hh_mm_ss",value:`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}]}if("$total"==s){const e=t.value;return[{name:"usb_play_total_ss",value:e.toString()},{name:"usb_play_total_mm_ss",value:`${Math.floor(e/60).toString().padStart(3,"0")}:${(e%60).toString().padStart(2,"0")}`},{name:"usb_play_total_hh_mm_ss",value:`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}]}if("$actfile"==s)return[{name:"usb_play_path",value:t.value}];if("$actstate"==s)return[{name:"usb_play_state",value:t.value}];if("$song"==s)return[{name:"usb_play_name",value:t.value}];if("$album"==s)return[{name:"usb_play_directory",value:t.value}];if("$actlist"==s)return[{name:"usb_play_playlist",value:t.value}];if("$actidx"==s)return[{name:"usb_play_playlist_index",value:t.value}];if("repeat"==s)return[{name:"usb_play_repeat",value:t.value}]}}updateSdVariables(e,t){if("/cards/wlive/$actlink"===e||"/cards/wlive/sdlink"===e)return[{name:"wlive_link_status",value:t.value}];const n=e.match(qt);if(!n)return;const r=n[1],s=n[2],i=n[3];if("$stat"!=s);else{if("state"==i){let e=t.value;return"PPAUSE"==e&&(e="PAUSE"),[{name:`wlive_${r}_state`,value:e}]}if("sdstate"==i)return[{name:`wlive_${r}_sdstate`,value:t.value}];if("sdsize"==i)return[{name:`wlive_${r}_sdsize`,value:t.value}];if("markers"==i)return[{name:`wlive_${r}_marker_total`,value:t.value}];if("markerpos"==i)return[{name:`wlive_${r}_marker_current`,value:t.value}];if("sessions"==i)return[{name:`wlive_${r}_session_total`,value:t.value}];if("sessionpos"==i)return[{name:`wlive_${r}_session_current`,value:t.value}];if("markerlist"==i)return[{name:`wlive_${r}_marker_time`,value:t.value}];if("etime"==i){const e=Math.floor(t.value/1e3);return[{name:`wlive_${r}_elapsed_time_ss`,value:e.toString()},{name:`wlive_${r}_elapsed_time_mm_ss`,value:`${Math.floor(e/60).toString().padStart(3,"0")}:${(e%60).toString().padStart(2,"0")}`},{name:`wlive_${r}_elapsed_time_hh_mm_ss`,value:`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}]}if("sessionlen"==i){const e=Math.floor(t.value/1e3);return[{name:`wlive_${r}_session_len_ss`,value:e.toString()},{name:`wlive_${r}_session_len_mm_ss`,value:`${Math.floor(e/60).toString().padStart(3,"0")}:${(e%60).toString().padStart(2,"0")}`},{name:`wlive_${r}_session_len_hh_mm_ss`,value:`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}]}if("sdfree"==i){const e=Math.floor(t.value/1e3);return[{name:`wlive_${r}_sdfree_ss`,value:e.toString()},{name:`wlive_${r}_sdfree_mm_ss`,value:`${Math.floor(e/60).toString().padStart(3,"0")}:${(e%60).toString().padStart(2,"0")}`},{name:`wlive_${r}_sdfree_hh_mm_ss`,value:`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}]}}}updateTalkbackVariables(e,t){const n=e.match(Gt);if(!n)return;const r=n[1].toLowerCase();let s="";if("B"==n[2])s="bus";else if("MX"==n[2])s="mtx";else{if("M"!=n[2])return;s="main"}return[{name:`talkback_${r}_${s}${n[3]}_assign`,value:t.value}]}updateGpioVariables(e,t){const n=e.match(Ht);if(n)return[{name:`gpio${n[1]}`,value:t}]}updateControlVariables(e,t){const n=e.match(zt);if(!n)return;const r=n[1],s=n[2];if("lib"!=r)if("$stat"!==r);else{if("sof"===s){let e=Number(t.value);return"i"===t.type&&(e-=1),[{name:"sof_mode_index",value:e},{name:"sof_mode_string",value:oe(e)}]}if("selidx"===s){let e=Number(t.value);return"i"===t.type&&(e+=1),[{name:"sel_index",value:e},{name:"sel_string",value:oe(e)}]}}else{if("$actshow"===s){const e=String(t.value),n=e.match(/([^/\\]+)(?=\.show$)/);return[{name:"active_show_path",value:e},{name:"active_show_name",value:n?.[1]??"N/A"}]}if("$actidx"===s){const e=Number(t.value);return[{name:"active_show_index",value:e},...this.updateShowControlVariables(e)]}if("$active"===s){const e=String(t.value).match(/([^/\\]+)[/\\]([^/\\]+)\..*$/);return[{name:"active_scene_name",value:e?.[2]??"N/A"},{name:"active_scene_folder",value:e?.[1]??"N/A"}]}}}updateShowControlVariables(e){return[{name:"previous_scene_number",value:e>0?e-1:e},{name:"active_scene_number",value:e},{name:"next_scene_number",value:e+1}]}updateIoVariables(e,t){if(e!==Te.MainAltSwitch())return;let n=!1;const r=t?.value;if("number"==typeof r)n=0===r;else if("string"==typeof r){const e=r.trim().toLowerCase();if("main"===e)n=!0;else if("alt"===e)n=!1;else if("0"===e)n=!0;else if("1"===e)n=!1;else{const t=Number.parseFloat(e);Number.isNaN(t)||(n=0===t)}}return[{name:"main_alt_status",value:n?"Main":"Alt"}]}updateColorVariables(e,t){const n=e.match(Qt);if(n)return[{name:`${n[1]}${n[2]}_color`,value:t}]}processMessage(e){e.forEach(e=>this.messages.add(e)),this.debounceUpdateVariables()}destroy(){}round(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}class Yt{port;logger;constructor(e){this.logger=e}setup(e,t,n,s){if(this.close(),this.logger=s,e&&t&&n){this.logger?.info(`Setting up OSC forwarder to ${t}:${n}`);try{this.port=new r.UDPPort({localAddress:"0.0.0.0",localPort:0,metadata:!0,remoteAddress:t,remotePort:n}),this.port.on("error",e=>{this.logger?.warn(`OSC Forwarder Error: ${e.message}`)}),this.port.open(),this.logger?.info(`OSC forwarding enabled to ${t}:${n}`)}catch(e){this.logger?.error(`Failed to setup OSC forwarder: ${e?.message??e}`)}}}send(e){try{this.port?.send(e)}catch(e){this.logger?.warn(`OSC forward send failed: ${e?.message??e}`)}}close(){if(this.port){try{this.port.close()}catch(e){}this.port=void 0}}}class Xt{moduleName;loggerFn;enabled;debugMode;timestamps;constructor(e,t){this.moduleName=e,this.loggerFn=t,this.debugMode=!1,this.timestamps=!1,this.enabled=!0}setLoggerFn(e){this.loggerFn=e}debug(e){if(!this.enabled)return;const t=this.formatMessage(e);this.loggerFn?this.loggerFn("debug",`[${this.moduleName}] ${t}`):console.log(`[${this.moduleName}] ${t}`)}info(e){if(!this.enabled)return;const t=this.formatMessage(e);this.loggerFn?this.loggerFn("info",`[${this.moduleName}] ${t}`):console.log(`[${this.moduleName}] ${t}`)}error(e){if(!this.enabled)return;const t=this.formatMessage(e);this.loggerFn?this.loggerFn("error",`[${this.moduleName}] ${t}`):console.log(`[${this.moduleName}] ${t}`)}warn(e){if(!this.enabled)return;const t=this.formatMessage(e);this.loggerFn?this.loggerFn("warn",`[${this.moduleName}] ${t}`):console.log(`[${this.moduleName}] ${t}`)}enable(){this.enabled=!0}disable(){this.enabled=!1}formatMessage(e){const t=[];return this.timestamps&&t.push(this.getTimestamp()),this.debugMode&&t.push(this.getSourceLocation()),t.push(e),t.join(" ")}getTimestamp(){return(new Date).toISOString()}getSourceLocation(){try{const e=((new Error).stack||"").split("\n"),t=[];let n=0;for(const r of e){if(r.includes("handlers/logger"))continue;const e=r.match(/at\s+(?:(?:new\s+)?(\w+)\.)?(\w+)(?:\s+|$)/);if(e){const s=e[1],i=e[2],o=s&&"Object"!==s?`${s}.${i}`:i;if(t.push(o),1===t.length){const e=r.match(/:(\d+):/);e&&(n=parseInt(e[1],10))}}}if(t.length>0){return`[${t.reverse().slice(-3).join("/")}:${n}]`}}catch(e){return"[unknown - error retrieving source location]"}return"[unknown]"}}class Kt extends t.InstanceBase{debounceHandleMessages;messages=new Set;config;model;connected=!1;deviceDetector;connection;stateHandler;feedbackHandler;variableHandler;transitions;oscForwarder;logger;constructor(t){super(t),this.model=bt(e.Full),this.transitions=new dt(this),this.debounceHandleMessages=Dt(()=>{this.handleMessages(),this.messages.clear()},{wait:20,maxWait:100,before:!1,after:!0})}async init(e){this.logger=new Xt(this.label),this.logger.setLoggerFn((e,t)=>{this.log(e,t)}),this.logger.debugMode=e.debugMode??!1,this.logger.timestamps=e.debugMode??!1,await this.configUpdated(e)}async destroy(){this.deviceDetector?.unsubscribe(this.id),this.transitions.stopAll()}start(e){this.setupDeviceDetector(),this.setupConnectionHandler(),this.setupStateHandler(),this.setupFeedbackHandler(),this.setupVariableHandler(),this.transitions.setUpdateRate(e.fadeUpdateRate??50),this.setupOscForwarder(),this.updateActions(),this.updateFeedbacks()}stop(){this.connection?.close(),this.stateHandler?.clearState(),this.oscForwarder?.close(),this.oscForwarder=void 0,this.variableHandler?.destroy()}async configUpdated(e){this.config=e,this.model=bt(this.config.model),this.stop(),this.start(e)}getConfigFields(){return function(t){const n={type:"static-text",id:"spacer",width:12,label:"",value:""};function r(e){if(e>0){const t=1e3/e;return Number.isInteger(t)?Math.round(t):Math.round(100*t)/100}return 0}return[{type:"static-text",id:"info",width:12,label:"Information",value:'This module works with all Behringer Wing desks. Make sure to have the latest firmware installed. </br>You can find the firmware and more information on the <a href="https://www.behringer.com/product.html?modelCode=0603-AEN" target="_blank">official Behringer website</a>'},n,{type:"dropdown",id:"host",label:"Desk IP",width:6,choices:a.listKnown().map(e=>({id:e.address,label:`${e.address} (${e.deviceName})`})),default:"",allowCustom:!0},{type:"dropdown",id:"model",label:"Desk Type",tooltip:"Select the variant of the desk that is connected. Placed for potential future use.",width:6,choices:s,default:e.Full.toString()},n,{type:"static-text",id:"update-rate-info",width:12,label:"Update Rates",value:"Configure update rates for communication with the console. Update rates are specified in milliseconds (ms).</br>Lower values make the module more responsive but may increase system and network load."},{type:"number",id:"fadeUpdateRate",label:`Fader Update Rate (${r(t.config?.fadeUpdateRate??50)} updates/sec)`,tooltip:"Update rate of the faders in milliseconds. A lower values makes the transitions smoother but increases system load.",width:6,min:20,max:6e4,default:50},{type:"number",id:"statusPollUpdateRate",label:`Status Poll Rate (${r(t.config?.statusPollUpdateRate??3e3)} updates/sec)`,tooltip:"Some values need to be actively requested from the desk, this number sets the interval in milliseconds at which those requests occur.",width:6,min:20,max:6e4,default:3e3},{type:"number",id:"variableUpdateRate",label:`Variable Update Rate (${r(t.config?.variableUpdateRate??100)} updates/sec)`,tooltip:"Defines how many milliseconds elapse between variable updates. A lower number makes variables more responsive but may decrease system performance.",width:6,min:20,max:6e4,default:100},{type:"checkbox",id:"prefetchVariablesOnStartup",label:"Fetch variables on startup",tooltip:"Request values for all variables when establishing a connection to a desk.",width:6,default:!0},{type:"checkbox",id:"show-advanced-options",label:"Show advanced options",tooltip:"Show advanced configuration options. There is no guarantee that these options will work in any combination.",width:12,default:!1},n,{type:"number",id:"requestTimeout",label:"Request Timeout (ms)",tooltip:"Time in milliseconds to wait for a response to a sent command before considering it lost.",width:6,min:50,max:1e4,default:200,isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"checkbox",id:"panicOnLostRequest",label:"Panic on lost request",tooltip:"If enabled, the module will log an error when a sent command does not receive a response within the specified timeframe.",width:6,default:!1,isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"number",id:"startupVariableRequestChunkSize",label:"Variable Request Chunk",tooltip:"When are requested in chunks on startup, waiting between each chunk",width:6,min:200,max:2e3,default:500,isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"number",id:"startupVariableRequestChunkWait",label:"Variable Request Wait Time (ms)",tooltip:"When are requested in chunks on startup, waiting between each chunk",width:6,min:20,max:1e3,default:100,isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"number",id:"subscriptionInterval",label:"Subscription Interval (ms)",tooltip:"Time in milliseconds to wait between subscription requests.",width:6,min:100,max:9999,default:9e3,isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"static-text",id:"osc-forwarding-info",width:12,label:"OSC Forwarding",value:"Allows forwarding all received OSC messages to another OSC endpoint. </br>This can be useful if you want to use multiple OSC clients that rely on subscription data.",isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"checkbox",id:"enableOscForwarding",label:"Enable OSC Forwarding",tooltip:"Forward all received OSC messages to another OSC endpoint",width:12,default:!1,isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"textinput",id:"oscForwardingHost",label:"OSC Forwarding Host",tooltip:"IP address or hostname to forward OSC messages to",width:6,default:"",isVisibleExpression:"$(options:enableOscForwarding) == true && $(options:show-advanced-options) == true"},{type:"number",id:"oscForwardingPort",label:"OSC Forwarding Port",tooltip:"Port number to forward OSC messages to",width:6,min:1,max:65535,default:2223,isVisibleExpression:"$(options:enableOscForwarding) == true && $(options:show-advanced-options) == true"},n,{type:"static-text",id:"debug-mode-info",width:12,label:"Debug Mode",value:"Enables detailed logging including timestamps and source location information. </br>Useful for troubleshooting and development purposes.",isVisibleExpression:"$(options:show-advanced-options) == true"},{type:"checkbox",id:"debugMode",label:"Enable Debug Mode",tooltip:"Enable detailed logging including timestamps and source location information",width:12,default:!1,isVisibleExpression:"$(options:show-advanced-options) == true"}]}(this)}updateActions(){this.setActionDefinitions(at(this))}updateFeedbacks(){this.setFeedbackDefinitions(ut(this))}setupDeviceDetector(){this.deviceDetector=a,void 0!==this.logger&&this.deviceDetector.addLogger(this.logger),this.deviceDetector.subscribe(this.id),this.deviceDetector&&this.deviceDetector.on?.("no-device-detected",()=>{this.logger?.warn("No console detected on the network"),this.updateStatus(t.InstanceStatus.Disconnected,"Unable to detect a console on the network")})}setupConnectionHandler(){this.connection=new _t(this.logger);const e=t.Regex.IP.replace(/^\/|\/$/g,"");new RegExp(e).test(this.config.host??"")||this.updateStatus(t.InstanceStatus.BadConfig,"No host configured"),this.connection.open("0.0.0.0",0,this.config.host,2223),this.connection.setSubscriptionInterval(this.config.subscriptionInterval??9e3),this.connection.startSubscription(),this.connection?.on("ready",()=>{this.updateStatus(t.InstanceStatus.Connecting,"Waiting for answer from console..."),this.feedbackHandler?.startPolling(),this.stateHandler?.state?.requestNames(this),this.config.prefetchVariablesOnStartup&&this.stateHandler?.state?.requestAllVariables(this),this.stateHandler?.requestUpdate()}),this.connection?.on("error",e=>{this.updateStatus(t.InstanceStatus.ConnectionFailure,e.message)}),this.connection?.on("close",()=>{this.updateStatus(t.InstanceStatus.Disconnected,"OSC connection closed"),this.connected=!1,this.feedbackHandler?.startPolling(),this.stateHandler?.clearState()}),this.connection?.on("message",e=>{this.messages.add(e),this.oscForwarder?.send(e),this.debounceHandleMessages()})}handleMessages(){0==this.connected&&(this.updateStatus(t.InstanceStatus.Ok),this.connected=!0,this.logger?.info("OSC connection established")),this.feedbackHandler?.clearPollTimeout(),this.stateHandler?.processMessage(this.messages),this.feedbackHandler?.processMessage(this.messages),this.variableHandler?.processMessage(this.messages)}setupStateHandler(){this.stateHandler=new Lt(this.model,this.logger),this.stateHandler.setTimeout(this.config.requestTimeout??200),this.stateHandler.on("request",(e,t)=>{this.connection?.sendCommand(e,t).catch(()=>{})}),this.stateHandler.on("request-failed",e=>{this.config.panicOnLostRequest&&this.updateStatus(t.InstanceStatus.ConnectionFailure,`Request failed for ${e}`)}),this.stateHandler.on("update",()=>{this.updateActions(),this.updateFeedbacks(),this.setPresetDefinitions(function(e){const n=e.model,r={};for(let e=1;e<=n.channels;e++)r[`ch${e}-mute-button`]=gt("ch",e),r[`ch${e}-solo-button`]=yt("ch",e),r[`ch${e}-boost-and-center-button`]=vt("ch",e),r[`ch${e}-sof-button`]=wt("ch",e);for(let e=1;e<=n.auxes;e++)r[`aux${e}-mute-button`]=gt("aux",e),r[`aux${e}-solo-button`]=yt("aux",e),r[`aux${e}-boost-and-center-button`]=vt("aux",e),r[`aux${e}-sof-button`]=wt("aux",e);for(let e=1;e<=n.busses;e++)r[`bus${e}-mute-button`]=gt("bus",e),r[`bus${e}-solo-button`]=yt("bus",e),r[`bus${e}-sof-button`]=wt("bus",e);for(let e=1;e<=n.matrices;e++)r[`mtx${e}-mute-button`]=gt("mtx",e),r[`mtx${e}-solo-button`]=yt("mtx",e),r[`mtx${e}-sof-button`]=wt("mtx",e);for(let e=1;e<=n.mains;e++)r[`main${e}-mute-button`]=gt("main",e),r[`main${e}-solo-button`]=yt("main",e),r[`main${e}-sof-button`]=wt("main",e);for(let e=1;e<=n.dcas;e++)r[`dca${e}-mute-button`]=gt("dca",e),r[`dca${e}-solo-button`]=yt("dca",e);return r["talkback-a-button"]=St("A"),r["talkback-b-button"]=St("B"),r["lights-bright"]={name:"Lights: Bright",category:"Lighting",type:"button",style:{text:"Lights\\nBright",size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},steps:[{down:[{actionId:Ue.SetLightIntensities,options:{lamp:"100",btns:"100",leds:"100",meters:"100",rgbleds:"100",chlcds:"80",chlcdctr:"",chedit:"100",main:"100",glow:"100",patch:"100",fadeDuration:1e3,fadeAlgorithm:"linear",snapToGrid:!1}}],up:[]}],feedbacks:[]},r["lights-dark"]={name:"Lights: Dark",category:"Lighting",type:"button",style:{text:"Lights\\nDark",size:"auto",color:(0,t.combineRgb)(255,255,255),bgcolor:(0,t.combineRgb)(0,0,0)},steps:[{down:[{actionId:Ue.SetLightIntensities,options:{lamp:"10",btns:"80",leds:"40",meters:"30",rgbleds:"10",chlcds:"30",chlcdctr:"",chedit:"10",main:"10",glow:"10",patch:"10",fadeDuration:1e3,fadeAlgorithm:"linear",snapToGrid:!1}}],up:[]}],feedbacks:[]},r}(this)),this.setActionDefinitions(at(this)),this.setFeedbackDefinitions(ut(this)),this.checkFeedbacks()})}setupFeedbackHandler(){this.feedbackHandler=new Ft(this.logger),this.feedbackHandler.setPollInterval(this.config.statusPollUpdateRate??3e3),this.feedbackHandler.on("check-feedbacks",e=>{this.checkFeedbacks(...e)}),this.feedbackHandler.on("poll-request",e=>{e.forEach(e=>{this.logger?.info(e),this.stateHandler?.ensureLoaded(e)})}),this.feedbackHandler.on("poll-connection-timeout",()=>{this.updateStatus(t.InstanceStatus.Disconnected,"Connection timed out"),this.connected=!1})}setupVariableHandler(){this.variableHandler=new Jt(this.model,this.config.variableUpdateRate,this.logger),this.variableHandler.on("create-variables",e=>{this.setVariableDefinitions(e)}),this.variableHandler.on("update-variables",e=>{this.setVariableValues(e)}),this.variableHandler.on("send",(e,t)=>{this.connection?.sendCommand(e,t).catch(()=>{})}),this.variableHandler?.setupVariables()}setupOscForwarder(){this.oscForwarder||(this.oscForwarder=new Yt(this.logger)),this.oscForwarder?.setup(this.config.enableOscForwarding,this.config.oscForwardingHost,this.config.oscForwardingPort)}}(0,t.runEntrypoint)(Kt,[(e,t)=>{const n=[];for(const e of t.feedbacks)"recorder-state"===e.feedbackId&&n.push({...e,options:{state:"REC"}});return{updatedConfig:{...t.config,fadeUpdateRate:t.config?.fadeUpdateRate??50,statusPollUpdateRate:t.config?.statusPollUpdateRate??3e3,variableUpdateRate:t.config?.variableUpdateRate??100,prefetchVariablesOnStartup:t.config?.prefetchVariablesOnStartup??!0,startupVariableRequestChunkSize:t.config?.startupVariableRequestChunkSize??10,startupVariableRequestChunkWait:t.config?.startupVariableRequestChunkWait??100,requestTimeout:t.config?.requestTimeout??20,panicOnLostRequest:t.config?.panicOnLostRequest??!1,subscriptionInterval:t.config?.subscriptionInterval??9e3,enableOscForwarding:t.config?.enableOscForwarding??!1,oscForwardingHost:t.config?.oscForwardingHost??"",oscForwardingPort:t.config?.oscForwardingPort??0,debugMode:t.config?.debugMode??!1},updatedActions:[],updatedFeedbacks:n}}])})()})();