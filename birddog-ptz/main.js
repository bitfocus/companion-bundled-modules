/*! For license information please see main.js.LICENSE.txt */
(()=>{var e,t={7056:(e,t,a)=>{"use strict";const o=a(4063);o.code='require("ajv/dist/runtime/equal").default',t.Z=o},7513:(e,t,a)=>{"use strict";a.d(t,{X:()=>o});const o="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},758:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});var o=a(5659),n=a(1283),i=a(2176);function r(){(0,n.T)(),(0,i.KV)()&&function(){const t=(0,o.cu)();if(!t.__SENTRY__)return;const a={mongodb:()=>new((0,i.l$)(e,"./node/integrations/mongo").Mongo),mongoose:()=>new((0,i.l$)(e,"./node/integrations/mongo").Mongo),mysql:()=>new((0,i.l$)(e,"./node/integrations/mysql").Mysql),pg:()=>new((0,i.l$)(e,"./node/integrations/postgres").Postgres)},n=Object.keys(a).filter((e=>!!(0,i.$y)(e))).map((e=>{try{return a[e]()}catch(e){return}})).filter((e=>e));n.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...n])}()}e=a.hmd(e)},2716:(e,t,a)=>{"use strict";a.d(t,{_:()=>u});var o=a(4307),n=a(2176),i=a(2343),r=a(535),s=a(2844),l=a(7597),c=a(7513),d=a(7990);class u{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=u.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||(0,n.$y)("@nestjs/graphql"):this._module=this._module||(0,n.$y)("apollo-server-core"),this._module}setupOnce(e,t){if((0,d.K)(t))c.X&&i.kg.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(c.X&&i.kg.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));(0,r.hl)(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...a){return(0,r.hl)(this.resolversExplorerService,"explore",(function(e){return function(){return g((0,s.lE)(e.call(this)),t)}})),e.call(this,...a)}}))}else{const e=this.loadDependency();if(!e)return void(c.X&&i.kg.error("Apollo Integration was unable to require apollo-server-core package."));(0,r.hl)(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return c.X&&(this.config.schema?(i.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),i.kg.warn()):this.config.modules&&i.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),i.kg.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const a=(0,s.lE)(this.config.resolvers);return this.config.resolvers=g(a,t),e.call(this)}}))}}}function g(e,t){return e.map((e=>(Object.keys(e).forEach((a=>{Object.keys(e[a]).forEach((n=>{"function"==typeof e[a][n]&&function(e,t,a,n){(0,r.hl)(e[t],a,(function(e){return function(...i){const r=n().getScope().getSpan(),s=(0,o.x)([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${a}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),c=e.call(this,...i);return(0,l.J8)(c)?c.then((e=>((0,o.x)([s,"optionalAccess",e=>e.end,"call",e=>e()]),e))):((0,o.x)([s,"optionalAccess",e=>e.end,"call",e=>e()]),c)}}))}(e,a,n,t)}))})),e)))}u.__initStatic()},8737:(e,t,a)=>{"use strict";a.d(t,{N1:()=>p});var o=a(4307),n=a(3371),i=a(6754),r=a(2343),s=a(6956),l=a(771),c=a(7597),d=a(1235),u=a(7513),g=a(7990);class p{static __initStatic(){this.id="Express"}constructor(e={}){this.name=p.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?(0,g.K)(t)?u.X&&r.kg.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const a=e[t];return e[t]=function(...e){return a.call(this,...function(e,t){return e.map((e=>"function"==typeof e?m(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?m(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const a=t?e._router:e;if(!a)return u.X&&r.kg.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(u.X&&r.kg.debug("Routing instrumentation is currently only supported in Express 4."));const g=Object.getPrototypeOf(a),p=g.process_params;g.process_params=function(e,t,a,r,u){a._reconstructedRoute||(a._reconstructedRoute="");const{layerRoutePath:g,isRegex:m,isArray:b,numExtraSegments:f}=function(e){let t=(0,o.x)([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const a=(0,c.Kj)(t),n=Array.isArray(t);if(!t){const[a]=d.GLOBAL_OBJ.process.versions.node.split(".").map(Number);a>=16&&(t=h(e.path,e.regexp,e.keys))}if(!t)return{isRegex:a,isArray:n,numExtraSegments:0};const i=n?Math.max(t.reduce(((e,t)=>e+(0,s.$A)(t.toString())),0)-(0,s.$A)(e.path||""),0):0,r=function(e,t){return e?t.map((e=>e.toString())).join(","):t&&t.toString()}(n,t);return{layerRoutePath:r,isRegex:a,isArray:n,numExtraSegments:i}}(e);let I;(g||m||b)&&(a._hasParameters=!0),I=g||function(e,t,a){const n=(0,s.rt)(e||""),i=(0,o.x)([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let r=0;const l=(0,o.x)([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return(0,o.x)([a,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>(0,o.x)([i,"optionalAccess",e=>e[l+r]])===e&&(r+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(a.originalUrl,a._reconstructedRoute,e.path)||"";const _=I.split("/").filter((e=>e.length>0&&(m||b||!e.includes("*")))).join("/");if(_&&_.length>0&&(a._reconstructedRoute+=`/${_}${m?"/":""}`),(0,s.$A)((0,s.rt)(a.originalUrl||""))+f===(0,s.$A)(a._reconstructedRoute)){a._hasParameters||a._reconstructedRoute!==a.originalUrl&&(a._reconstructedRoute=a.originalUrl?(0,s.rt)(a.originalUrl):a.originalUrl);const e=r.__sentry_transaction,t=e&&(0,n.XU)(e).data||{};if(e&&"custom"!==t[i.Zj]){const t=a._reconstructedRoute||"/",[o,n]=(0,l.oA)(a,{path:!0,method:!0,customRoute:t});e.updateName(o),e.setAttribute(i.Zj,n)}}return p.call(this,e,t,a,r,u)}}(this._router)):u.X&&r.kg.error("ExpressIntegration is missing an Express instance")}}function m(e,t){const a=e.length;switch(a){case 2:return function(a,o){const n=o.__sentry_transaction;if(n){const a=n.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});o.once("finish",(()=>{a.end()}))}return e.call(this,a,o)};case 3:return function(a,n,i){const r=n.__sentry_transaction,s=(0,o.x)([r,"optionalAccess",e=>e.startChild,"call",a=>a({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,a,n,(function(...e){(0,o.x)([s,"optionalAccess",e=>e.end,"call",e=>e()]),i.call(this,...e)}))};case 4:return function(a,n,i,r){const s=i.__sentry_transaction,l=(0,o.x)([s,"optionalAccess",e=>e.startChild,"call",a=>a({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,a,n,i,(function(...e){(0,o.x)([l,"optionalAccess",e=>e.end,"call",e=>e()]),r.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${a}`)}}p.__initStatic();const h=(e,t,a)=>{if(!(e&&t&&a&&0!==Object.keys(a).length&&(0,o.x)([a,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const n=a.sort(((e,t)=>e.offset-t.offset)),i=new RegExp(t,`${t.flags}d`).exec(e);if(!i||!i.indices)return;const[,...r]=i.indices;if(r.length!==n.length)return;let s=e,l=0;return r.forEach(((e,t)=>{if(e){const[a,o]=e,i=s.substring(0,a-l),r=`:${n[t].name}`,c=s.substring(o-l);s=i+r+c,l+=o-a-r.length}})),s}},1791:(e,t,a)=>{"use strict";a.d(t,{k:()=>d});var o=a(4307),n=a(2176),i=a(2343),r=a(535),s=a(7597),l=a(7513),c=a(7990);class d{static __initStatic(){this.id="GraphQL"}constructor(){this.name=d.id}loadDependency(){return this._module=this._module||(0,n.$y)("graphql/execution/execute.js")}setupOnce(e,t){if((0,c.K)(t))return void(l.X&&i.kg.log("GraphQL Integration is skipped because of instrumenter configuration."));const a=this.loadDependency();a?(0,r.hl)(a,"execute",(function(e){return function(...a){const n=t().getScope(),i=n.getSpan(),r=(0,o.x)([i,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);(0,o.x)([n,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]);const l=e.call(this,...a);return(0,s.J8)(l)?l.then((e=>((0,o.x)([r,"optionalAccess",e=>e.end,"call",e=>e()]),(0,o.x)([n,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]),e))):((0,o.x)([r,"optionalAccess",e=>e.end,"call",e=>e()]),(0,o.x)([n,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]),l)}})):l.X&&i.kg.error("GraphQL Integration was unable to require graphql/execution package.")}}d.__initStatic()},6046:(e,t,a)=>{"use strict";a.d(t,{G:()=>n});var o=a(2176);e=a.hmd(e);const n=[()=>new((0,o.l$)(e,"./apollo").Apollo),()=>new((0,o.l$)(e,"./apollo").Apollo)({useNestjs:!0}),()=>new((0,o.l$)(e,"./graphql").GraphQL),()=>new((0,o.l$)(e,"./mongo").Mongo),()=>new((0,o.l$)(e,"./mongo").Mongo)({mongoose:!0}),()=>new((0,o.l$)(e,"./mysql").Mysql),()=>new((0,o.l$)(e,"./postgres").Postgres)]},6169:(e,t,a)=>{"use strict";a.d(t,{_:()=>g});var o=a(4307),n=a(2176),i=a(2343),r=a(535),s=a(7597),l=a(7513),c=a(7990);const d=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],u={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class g{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=g.id,this._operations=Array.isArray(e.operations)?e.operations:d,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||(0,n.$y)(e)}setupOnce(e,t){if((0,c.K)(t))return void(l.X&&i.kg.log("Mongo Integration is skipped because of instrumenter configuration."));const a=this.loadDependency();if(a)this._instrumentOperations(a.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";l.X&&i.kg.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,a){t.forEach((t=>this._patchOperation(e,t,a)))}_patchOperation(e,t,a){if(!(t in e.prototype))return;const n=this._getSpanContextFromOperationArguments.bind(this);(0,r.hl)(e.prototype,t,(function(e){return function(...i){const r=i[i.length-1],l=a(),c=l.getScope(),d=l.getClient(),u=c.getSpan(),g=(0,o.x)([d,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof r||"mapReduce"===t&&2===i.length){const a=(0,o.x)([u,"optionalAccess",e=>e.startChild,"call",e=>e(n(this,t,i,g))]),r=e.call(this,...i);if((0,s.J8)(r))return r.then((e=>((0,o.x)([a,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((p=r)&&"object"==typeof p&&p.once&&"function"==typeof p.once){const e=r;try{e.once("close",(()=>{(0,o.x)([a,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){(0,o.x)([a,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return(0,o.x)([a,"optionalAccess",e=>e.end,"call",e=>e()]),r}var p;const m=(0,o.x)([u,"optionalAccess",e=>e.startChild,"call",e=>e(n(this,t,i.slice(0,-1)))]);return e.call(this,...i.slice(0,-1),(function(e,t){(0,o.x)([m,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,a,o=!1){const n={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},i={op:"db",origin:"auto.db.mongo",description:t,data:n},r=u[t],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!r||!s||!o)return i;try{if("mapReduce"===t){const[e,t]=a;n[r[0]]="string"==typeof e?e:e.name||"<anonymous>",n[r[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<r.length;e++)n[`db.mongodb.${r[e]}`]=JSON.stringify(a[e])}catch(e){}return i}}g.__initStatic()},24:(e,t,a)=>{"use strict";a.d(t,{m:()=>c});var o=a(4307),n=a(2176),i=a(2343),r=a(535),s=a(7513),l=a(7990);class c{static __initStatic(){this.id="Mysql"}constructor(){this.name=c.id}loadDependency(){return this._module=this._module||(0,n.$y)("mysql/lib/Connection.js")}setupOnce(e,t){if((0,l.K)(t))return void(s.X&&i.kg.log("Mysql Integration is skipped because of instrumenter configuration."));const a=this.loadDependency();if(!a)return void(s.X&&i.kg.error("Mysql Integration was unable to require `mysql` package."));let n;try{a.prototype.connect=new Proxy(a.prototype.connect,{apply:(e,t,a)=>(n||(n=t.config),e.apply(t,a))})}catch(e){s.X&&i.kg.error("Mysql Integration was unable to instrument `mysql` config.")}function c(e){if(!e)return;const t=n?{"server.address":n.host,"server.port":n.port,"db.user":n.user}:{};Object.keys(t).forEach((a=>{e.setAttribute(a,t[a])})),e.end()}(0,r.hl)(a,"createQuery",(function(e){return function(a,n,i){const r=t().getScope().getSpan(),s=(0,o.x)([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof a?a:a.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof i)return e.call(this,a,n,(function(e,t,a){c(s),i(e,t,a)}));if("function"==typeof n)return e.call(this,a,(function(e,t,a){c(s),n(e,t,a)}));const l=e.call(this,a,n);return l.on("end",(()=>{c(s)})),l}}))}}c.__initStatic()},1370:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var o=a(4307),n=a(2176),i=a(2343),r=a(535),s=a(7597),l=a(7513),c=a(7990);class d{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=d.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||(0,n.$y)("pg")}setupOnce(e,t){if((0,c.K)(t))return void(l.X&&i.kg.log("Postgres Integration is skipped because of instrumenter configuration."));const a=this.loadDependency();if(!a)return void(l.X&&i.kg.error("Postgres Integration was unable to require `pg` package."));const n=this._usePgNative?(0,o.x)([a,"access",e=>e.native,"optionalAccess",e=>e.Client]):a.Client;n?(0,r.hl)(n.prototype,"query",(function(e){return function(a,n,i){const r=t().getScope().getSpan(),l={"db.system":"postgresql"};try{this.database&&(l["db.name"]=this.database),this.host&&(l["server.address"]=this.host),this.port&&(l["server.port"]=this.port),this.user&&(l["db.user"]=this.user)}catch(e){}const c=(0,o.x)([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof a?a:a.text,op:"db",origin:"auto.db.postgres",data:l})]);if("function"==typeof i)return e.call(this,a,n,(function(e,t){(0,o.x)([c,"optionalAccess",e=>e.end,"call",e=>e()]),i(e,t)}));if("function"==typeof n)return e.call(this,a,(function(e,t){(0,o.x)([c,"optionalAccess",e=>e.end,"call",e=>e()]),n(e,t)}));const d=void 0!==n?e.call(this,a,n):e.call(this,a);return(0,s.J8)(d)?d.then((e=>((0,o.x)([c,"optionalAccess",e=>e.end,"call",e=>e()]),e))):((0,o.x)([c,"optionalAccess",e=>e.end,"call",e=>e()]),d)}})):l.X&&i.kg.error("Postgres Integration was unable to access 'pg-native' bindings.")}}d.__initStatic()},9889:(e,t,a)=>{"use strict";a.d(t,{g:()=>c});var o=a(5659),n=a(4317),i=a(535),r=a(2343),s=a(7513),l=a(7990);class c{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=c.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){(0,i.xp)(e.client,"_sentryInstrumented",!0);const t={};try{const a=e.client._engineConfig;if(a){const{activeProvider:e,clientVersion:o}=a;e&&(t["db.system"]=e),o&&(t["db.prisma.version"]=o)}}catch(e){}e.client.$use(((e,a)=>{if((0,l.K)(o.Gd))return a(e);const i=e.action,r=e.model;return(0,n.GK)({name:r?`${r} ${i}`:i,op:"db.prisma",origin:"auto.db.prisma",data:{...t,"db.operation":i}},(()=>a(e)))}))}else s.X&&r.kg.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}c.__initStatic()},7990:(e,t,a)=>{"use strict";a.d(t,{K:()=>n});var o=a(4307);function n(e){const t=(0,o.x)([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==((0,o.x)([t,"optionalAccess",e=>e.instrumenter])||"sentry")}},1131:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});const o="production"},1703:(e,t,a)=>{"use strict";a.d(t,{X:()=>o});const o="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},1195:(e,t,a)=>{"use strict";a.d(t,{RP:()=>d,cc:()=>c,fH:()=>l});var o=a(1235),n=a(6893),i=a(2343),r=a(7597),s=a(1703);function l(){return(0,o.Y)("globalEventProcessors",(()=>[]))}function c(e){l().push(e)}function d(e,t,a,o=0){return new n.cW(((n,l)=>{const c=e[o];if(null===t||"function"!=typeof c)n(t);else{const u=c({...t},a);s.X&&c.id&&null===u&&i.kg.log(`Event processor "${c.id}" dropped event`),(0,r.J8)(u)?u.then((t=>d(e,t,a,o+1).then(n))).then(null,l):d(e,u,a,o+1).then(n).then(null,l)}}))}},4487:(e,t,a)=>{"use strict";a.d(t,{$e:()=>w,TM:()=>E,Tb:()=>p,YA:()=>C,Yr:()=>G,av:()=>A,c:()=>Z,dk:()=>x,e:()=>b,eN:()=>h,eW:()=>V,mG:()=>v,nZ:()=>N,n_:()=>f,rJ:()=>_,s3:()=>R,sU:()=>y,sV:()=>B,uT:()=>m,v:()=>I,wi:()=>S,xv:()=>k,yj:()=>H,yl:()=>W});var o=a(2343),n=a(2844),i=a(1170),r=a(7597),s=a(1235),l=a(1131),c=a(1703),d=a(5659),u=a(9015),g=a(8942);function p(e,t){return(0,d.Gd)().captureException(e,(0,g.U0)(t))}function m(e,t){const a="string"==typeof t?t:void 0,o="string"!=typeof t?{captureContext:t}:void 0;return(0,d.Gd)().captureMessage(e,a,o)}function h(e,t){return(0,d.Gd)().captureEvent(e,t)}function b(e){(0,d.Gd)().configureScope(e)}function f(e,t){(0,d.Gd)().addBreadcrumb(e,t)}function I(e,t){(0,d.Gd)().setContext(e,t)}function _(e){(0,d.Gd)().setExtras(e)}function y(e,t){(0,d.Gd)().setExtra(e,t)}function v(e){(0,d.Gd)().setTags(e)}function C(e,t){(0,d.Gd)().setTag(e,t)}function A(e){(0,d.Gd)().setUser(e)}function w(...e){const t=(0,d.Gd)();if(2===e.length){const[a,o]=e;return a?t.withScope((()=>(t.getStackTop().scope=a,o(a)))):t.withScope(o)}return t.withScope(e[0])}function S(e){return(0,d.Ok)((()=>e((0,d.aF)())))}function G(e,t){return(0,d.Gd)().startTransaction({...e},t)}function Z(e,t){const a=N(),i=R();if(i){if(i.captureCheckIn)return i.captureCheckIn(e,t,a);c.X&&o.kg.warn("Cannot capture check-in. Client does not support sending check-ins.")}else c.X&&o.kg.warn("Cannot capture check-in. No client defined.");return(0,n.DM)()}function B(e,t,a){const o=Z({monitorSlug:e,status:"in_progress"},a),n=(0,i.ph)();function s(t){Z({monitorSlug:e,status:t,checkInId:o,duration:(0,i.ph)()-n})}let l;try{l=t()}catch(e){throw s("error"),e}return(0,r.J8)(l)?Promise.resolve(l).then((()=>{s("ok")}),(()=>{s("error")})):s("ok"),l}async function W(e){const t=R();return t?t.flush(e):(c.X&&o.kg.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function k(e){const t=R();return t?t.close(e):(c.X&&o.kg.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function V(){return(0,d.Gd)().lastEventId()}function R(){return(0,d.Gd)().getClient()}function x(){return!!R()}function N(){return(0,d.Gd)().getScope()}function H(e){const t=R(),a=(0,d.aF)(),o=N(),{release:n,environment:i=l.J}=t&&t.getOptions()||{},{userAgent:r}=s.GLOBAL_OBJ.navigator||{},c=(0,u.Hv)({release:n,environment:i,user:o.getUser()||a.getUser(),...r&&{userAgent:r},...e}),g=a.getSession();return g&&"ok"===g.status&&(0,u.CT)(g,{status:"exited"}),E(),a.setSession(c),o.setSession(c),c}function E(){const e=(0,d.aF)(),t=N(),a=t.getSession()||e.getSession();a&&(0,u.RJ)(a),function(){const e=(0,d.aF)(),t=N(),a=R(),o=t.getSession()||e.getSession();o&&a&&a.captureSession&&a.captureSession(o)}(),e.setSession(),t.setSession()}},5659:(e,t,a)=>{"use strict";a.d(t,{$b:()=>C,Gd:()=>I,Ok:()=>A,Xb:()=>h,aF:()=>_,cu:()=>b,j0:()=>G,pj:()=>f,uZ:()=>v,vi:()=>S});var o=a(7597),n=a(2844),i=a(1170),r=a(2343),s=a(1235),l=a(1131),c=a(1703),d=a(350),u=a(9015),g=a(105);const p=parseFloat(g.J),m=100;class h{constructor(e,t,a,o=p){let n,i;this._version=o,t?n=t:(n=new d.sX,n.setClient(e)),a?i=a:(i=new d.sX,i.setClient(e)),this._stack=[{scope:n}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let a;try{a=e(t)}catch(e){throw this.popScope(),e}return(0,o.J8)(a)?a.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),a)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const a=this._lastEventId=t&&t.event_id?t.event_id:(0,n.DM)(),o=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:o,...t,event_id:a}),a}captureMessage(e,t,a){const o=this._lastEventId=a&&a.event_id?a.event_id:(0,n.DM)(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...a,event_id:o}),o}captureEvent(e,t){const a=t&&t.event_id?t.event_id:(0,n.DM)();return e.type||(this._lastEventId=a),this.getScope().captureEvent(e,{...t,event_id:a}),a}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:a,client:o}=this.getStackTop();if(!o)return;const{beforeBreadcrumb:n=null,maxBreadcrumbs:s=m}=o.getOptions&&o.getOptions()||{};if(s<=0)return;const l={timestamp:(0,i.yW)(),...e},c=n?(0,r.Cf)((()=>n(l,t))):l;null!==c&&(o.emit&&o.emit("beforeAddBreadcrumb",c,t),a.addBreadcrumb(c,s))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:a}=this.getStackTop();a&&e(t)}run(e){const t=f(this);try{e(this)}finally{f(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return c.X&&r.kg.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const a=this._callExtensionMethod("startTransaction",e,t);return c.X&&!a&&(this.getClient()?r.kg.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):r.kg.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),a}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&(0,u.RJ)(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:a}=this.getStackTop(),{release:o,environment:n=l.J}=a&&a.getOptions()||{},{userAgent:i}=s.GLOBAL_OBJ.navigator||{},r=(0,u.Hv)({release:o,environment:n,user:t.getUser(),...i&&{userAgent:i},...e}),c=t.getSession&&t.getSession();return c&&"ok"===c.status&&(0,u.CT)(c,{status:"exited"}),this.endSession(),t.setSession(r),r}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),a=e.getSession();a&&t&&t.captureSession&&t.captureSession(a)}_callExtensionMethod(e,...t){const a=b().__SENTRY__;if(a&&a.extensions&&"function"==typeof a.extensions[e])return a.extensions[e].apply(this,t);c.X&&r.kg.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function b(){return s.GLOBAL_OBJ.__SENTRY__=s.GLOBAL_OBJ.__SENTRY__||{extensions:{},hub:void 0},s.GLOBAL_OBJ}function f(e){const t=b(),a=S(t);return G(t,e),a}function I(){const e=b();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return y(e)}function _(){return I().getIsolationScope()}function y(e=b()){return w(e)&&!S(e).isOlderThan(p)||G(e,new h),S(e)}function v(e,t=y()){if(!w(e)||S(e).isOlderThan(p)){const a=t.getClient(),o=t.getScope(),n=t.getIsolationScope();G(e,new h(a,o.clone(),n.clone()))}}function C(e){const t=b();t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.acs=e}function A(e,t={}){const a=b();return a.__SENTRY__&&a.__SENTRY__.acs?a.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function w(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function S(e){return(0,s.Y)("hub",(()=>new h),e)}function G(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}},2967:(e,t,a)=>{"use strict";a.d(t,{M5:()=>p,RN:()=>m,_I:()=>h,m7:()=>g,m8:()=>d,q4:()=>u});var o=a(2844),n=a(2343),i=a(1703),r=a(1195),s=a(4487),l=a(5659);const c=[];function d(e){const t=e.defaultIntegrations||[],a=e.integrations;let n;t.forEach((e=>{e.isDefaultInstance=!0})),n=Array.isArray(a)?[...t,...a]:"function"==typeof a?(0,o.lE)(a(t)):t;const i=function(e){const t={};return e.forEach((e=>{const{name:a}=e,o=t[a];o&&!o.isDefaultInstance&&e.isDefaultInstance||(t[a]=e)})),Object.keys(t).map((e=>t[e]))}(n),r=function(e,t){for(let t=0;t<e.length;t++)if(!0==("Debug"===e[t].name))return t;return-1}(i);if(-1!==r){const[e]=i.splice(r,1);i.push(e)}return i}function u(e,t){const a={};return t.forEach((t=>{t&&g(e,t,a)})),a}function g(e,t,a){if(a[t.name])i.X&&n.kg.log(`Integration skipped because it was already installed: ${t.name}`);else{if(a[t.name]=t,-1===c.indexOf(t.name)&&(t.setupOnce(r.cc,l.Gd),c.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const a=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,o)=>a(t,o,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const a=t.processEvent.bind(t),o=Object.assign(((t,o)=>a(t,o,e)),{id:t.name});e.addEventProcessor(o)}i.X&&n.kg.log(`Integration installed: ${t.name}`)}}function p(e){const t=(0,s.s3)();t&&t.addIntegration?t.addIntegration(e):i.X&&n.kg.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function m(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function h(e){return e}},350:(e,t,a)=>{"use strict";a.d(t,{lW:()=>g,sX:()=>u});var o=a(7597),n=a(1170),i=a(2844),r=a(2343),s=a(1195),l=a(9015),c=a(3379);let d;class u{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=p()}static clone(e){return e?e.clone():new u}clone(){const e=new u;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&(0,l.CT)(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof u?t:this}return e instanceof u?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):(0,o.PO)(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=p(),this}addBreadcrumb(e,t){const a="number"==typeof t?t:100;if(a<=0)return this;const o={timestamp:(0,n.yW)(),...e},i=this._breadcrumbs;return i.push(o),this._breadcrumbs=i.length>a?i.slice(-a):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:a,_tags:o,_extra:n,_user:i,_level:r,_fingerprint:s,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:d,_transactionName:u,_span:g}=this;return{breadcrumbs:e,attachments:t,contexts:a,tags:o,extra:n,user:i,level:r,fingerprint:s||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:d,transactionName:u,span:g}}applyToEvent(e,t={},a=[]){(0,c.gi)(e,this.getScopeData());const o=[...a,...(0,s.fH)(),...this._eventProcessors];return(0,s.RP)(o,e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const a=t&&t.event_id?t.event_id:(0,i.DM)();if(!this._client)return r.kg.warn("No client configured on scope - will not capture exception!"),a;const o=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:o,...t,event_id:a},this),a}captureMessage(e,t,a){const o=a&&a.event_id?a.event_id:(0,i.DM)();if(!this._client)return r.kg.warn("No client configured on scope - will not capture message!"),o;const n=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:n,...a,event_id:o},this),o}captureEvent(e,t){const a=t&&t.event_id?t.event_id:(0,i.DM)();return this._client?(this._client.captureEvent(e,{...t,event_id:a},this),a):(r.kg.warn("No client configured on scope - will not capture event!"),a)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function g(){return d||(d=new u),d}function p(){return{traceId:(0,i.DM)(),spanId:(0,i.DM)().substring(16)}}},6754:(e,t,a)=>{"use strict";a.d(t,{$J:()=>i,S3:()=>r,TE:()=>n,Zj:()=>o});const o="sentry.source",n="sentry.sample_rate",i="sentry.op",r="sentry.origin"},9015:(e,t,a)=>{"use strict";a.d(t,{CT:()=>s,Hv:()=>r,RJ:()=>l});var o=a(1170),n=a(2844),i=a(535);function r(e){const t=(0,o.ph)(),a={sid:(0,n.DM)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return(0,i.Jr)({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(a)};return e&&s(a,e),a}function s(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,o.ph)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:(0,n.DM)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function l(e,t){let a={};t?a={status:t}:"ok"===e.status&&(a={status:"exited"}),s(e,a)}},454:(e,t,a)=>{"use strict";a.d(t,{_:()=>l,j:()=>c});var o=a(535),n=a(1131),i=a(4487),r=a(5102),s=a(3371);function l(e,t,a){const i=t.getOptions(),{publicKey:r}=t.getDsn()||{},{segment:s}=a&&a.getUser()||{},l=(0,o.Jr)({environment:i.environment||n.J,release:i.release,user_segment:s,public_key:r,trace_id:e});return t.emit&&t.emit("createDsc",l),l}function c(e){const t=(0,i.s3)();if(!t)return{};const a=l((0,s.XU)(e).trace_id||"",t,(0,i.nZ)()),o=(0,r.G)(e);if(!o)return a;const n=o&&o._frozenDynamicSamplingContext;if(n)return n;const{sampleRate:c,source:d}=o.metadata;null!=c&&(a.sample_rate=`${c}`);const u=(0,s.XU)(o);return d&&"url"!==d&&(a.transaction=u.description),a.sampled=String((0,s.Tt)(o)),t.emit&&t.emit("createDsc",a),a}},1283:(e,t,a)=>{"use strict";a.d(t,{T:()=>S,l:()=>w});var o=a(2343),n=a(1703),i=a(5659),r=a(3371),s=a(1235),l=a(9729);let c=null;function d(){c=s.GLOBAL_OBJ.onerror,s.GLOBAL_OBJ.onerror=function(e,t,a,o,n){const i={column:o,error:n,line:a,msg:e,url:t};return(0,l.rK)("error",i),!(!c||c.__SENTRY_LOADER__)&&c.apply(this,arguments)},s.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}let u=null;function g(){u=s.GLOBAL_OBJ.onunhandledrejection,s.GLOBAL_OBJ.onunhandledrejection=function(e){const t=e;return(0,l.rK)("unhandledrejection",t),!(u&&!u.__SENTRY_LOADER__)||u.apply(this,arguments)},s.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var p=a(9791);let m=!1;function h(){const e=(0,p.x1)();if(e){const t="internal_error";n.X&&o.kg.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}h.tag="sentry_tracingErrorCallback";var b=a(5544),f=a(7597),I=a(6754),_=a(7522);function y(e,t,a){if(!(0,_.z)(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(I.TE,Number(e.sampled)),e;let i;return"function"==typeof t.tracesSampler?(i=t.tracesSampler(a),e.setAttribute(I.TE,Number(i))):void 0!==a.parentSampled?i=a.parentSampled:void 0!==t.tracesSampleRate?(i=t.tracesSampleRate,e.setAttribute(I.TE,Number(i))):(i=1,e.setAttribute(I.TE,i)),s=i,((0,f.i2)(s)||"number"!=typeof s&&"boolean"!=typeof s?(n.X&&o.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),0):!(s<0||s>1)||(n.X&&o.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${s}.`),0))?i?(e.sampled=Math.random()<i,e.sampled?(n.X&&o.kg.log(`[Tracing] starting ${e.op} transaction - ${(0,r.XU)(e).description}`),e):(n.X&&o.kg.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),e)):(n.X&&o.kg.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(n.X&&o.kg.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e);var s}var v=a(8069);function C(){const e=this.getScope().getSpan();return e?{"sentry-trace":(0,r.Hb)(e)}:{}}function A(e,t){const a=this.getClient(),i=a&&a.getOptions()||{},r=i.instrumenter||"sentry",s=e.instrumenter||"sentry";r!==s&&(n.X&&o.kg.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${r}\` instrumenter.\nThe transaction will not be sampled. Please use the ${r} instrumentation to start transactions.`),e.sampled=!1);let l=new v.Y(e,this);return l=y(l,i,{parentSampled:e.parentSampled,transactionContext:e,...t}),l.isRecording()&&l.initSpanRecorder(i._experiments&&i._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",l),l}function w(e,t,a,o,n,i,r,s=!1){const l=e.getClient(),c=l&&l.getOptions()||{};let d=new b.io(t,e,a,o,r,n,s);return d=y(d,c,{parentSampled:t.parentSampled,transactionContext:t,...i}),d.isRecording()&&d.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l&&l.emit&&l.emit("startTransaction",d),d}function S(){const e=(0,i.cu)();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=A),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=C),m||(m=!0,function(e){const t="error";(0,l.Hj)(t,e),(0,l.D2)(t,d)}(h),function(e){const t="unhandledrejection";(0,l.Hj)(t,e),(0,l.D2)(t,g)}(h)))}},5544:(e,t,a)=>{"use strict";a.d(t,{AT:()=>c,io:()=>g});var o=a(2343),n=a(1170),i=a(1703),r=a(3371),s=a(8903),l=a(8069);const c={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},d=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class u extends s.gB{constructor(e,t,a,o){super(o),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=a}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...a)=>(this._popActivity(e.spanContext().spanId),t.apply(e,a)),void 0===(0,r.XU)(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class g extends l.Y{constructor(e,t,a=c.idleTimeout,n=c.finalTimeout,r=c.heartbeatInterval,s=!1,l=!1){super(e,t),this._idleHub=t,this._idleTimeout=a,this._finalTimeout=n,this._heartbeatInterval=r,this._onScope=s,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=d[4],this._autoFinishAllowed=!l,s&&(i.X&&o.kg.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),l||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=d[3],this.end())}),this._finalTimeout)}end(e){const t=(0,r.$k)(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){i.X&&o.kg.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;(0,r.XU)(e).timestamp||(e.setStatus("cancelled"),e.end(t),i.X&&o.kg.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:a,timestamp:n}=(0,r.XU)(e),s=a&&a<t,l=(this._finalTimeout+this._idleTimeout)/1e3,c=n&&a&&n-a<l;if(i.X){const t=JSON.stringify(e,void 0,2);s?c||o.kg.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):o.kg.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return s&&c})),i.X&&o.kg.log("[Tracing] flushing IdleTransaction")}else i.X&&o.kg.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},a=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new u(t,a,this.spanContext().spanId,e),i.X&&o.kg.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=d[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(i.X&&o.kg.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=d[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),i.X&&o.kg.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,i.X&&o.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(i.X&&o.kg.log(`[Tracing] popActivity ${e}`),delete this.activities[e],i.X&&o.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=(0,n.ph)();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=d[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(i.X&&o.kg.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=d[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){i.X&&o.kg.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}},9080:(e,t,a)=>{"use strict";a.d(t,{o:()=>n});var o=a(9791);function n(e,t,a){const n=(0,o.x1)();n&&n.setMeasurement(e,t,a)}},8903:(e,t,a)=>{"use strict";a.d(t,{Dr:()=>g,Zd:()=>p,gB:()=>u});var o=a(2844),n=a(1170),i=a(2343),r=a(535),s=a(1703),l=a(6754),c=a(5102),d=a(3371);class u{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class g{constructor(e={}){this._traceId=e.traceId||(0,o.DM)(),this._spanId=e.spanId||(0,o.DM)().substring(16),this._startTime=e.startTimestamp||(0,n.ph)(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this._attributes=e.attributes?{...e.attributes}:{},this.instrumenter=e.instrumenter||"sentry",this.setAttribute(l.S3,e.origin||"manual"),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.op&&this.setAttribute(l.$J,e.op),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp)}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[l.$J]}set op(e){this.setAttribute(l.$J,e)}get origin(){return this._attributes[l.S3]}set origin(e){this.setAttribute(l.S3,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:a}=this;return{spanId:e,traceId:t,traceFlags:a?d.i0:d.ve}}startChild(e){const t=new g({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const a=(0,c.G)(this);if(t.transaction=a,s.X&&a){const o=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${(0,d.XU)(t).description||"< unknown name >"}' (${a.spanContext().spanId}).`;i.kg.log(o),this._logMessage=o}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e)),this.setData("http.response.status_code",e);const t=p(e);return"unknown_error"!==t&&this.setStatus(t),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=(0,c.G)(this);if(s.X&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&i.kg.log(e.replace("Starting","Finishing"))}this._endTime=(0,d.$k)(e)}toTraceparent(){return(0,d.Hb)(this)}toContext(){return(0,r.Jr)({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return(0,d.wy)(this)}getSpanJSON(){return(0,r.Jr)({data:this._getData(),description:this._name,op:this._attributes[l.$J],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[l.S3]})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,a=Object.keys(e).length>0,o=Object.keys(t).length>0;if(a||o)return a&&o?{...e,...t}:a?e:t}}function p(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},4317:(e,t,a)=>{"use strict";a.d(t,{yn:()=>_,HN:()=>I,y_:()=>h,qp:()=>f,GK:()=>m,V0:()=>b,g4:()=>p});var o=a(7638),n=a(2343),i=a(535),r=a(1703),s=a(4487),l=a(5659),c=a(7597);function d(e,t,a=(()=>{})){let o;try{o=e()}catch(e){throw t(e),a(),e}return function(e,t,a){return(0,c.J8)(e)?e.then((e=>(a(),e)),(e=>{throw t(e),a(),e})):(a(),e)}(o,t,a)}var u=a(7522),g=a(3371);function p(e,t,a=(()=>{}),o=(()=>{})){const n=(0,l.Gd)(),i=(0,s.nZ)(),r=i.getSpan(),c=v(e),u=y(n,r,c);return i.setSpan(u),d((()=>t(u)),(e=>{u&&u.setStatus("internal_error"),a(e,u)}),(()=>{u&&u.end(),i.setSpan(r),o()}))}function m(e,t){const a=v(e);return(0,s.$e)(e.scope,(e=>{const o=y((0,l.Gd)(),e.getSpan(),a);return e.setSpan(o),d((()=>t(o)),(()=>{if(o){const{status:e}=(0,g.XU)(o);e&&"ok"!==e||o.setStatus("internal_error")}}),(()=>o&&o.end()))}))}const h=m;function b(e,t){const a=v(e);return(0,s.$e)(e.scope,(e=>{const o=y((0,l.Gd)(),e.getSpan(),a);function n(){o&&o.end()}return e.setSpan(o),d((()=>t(o,n)),(()=>{if(o&&o.isRecording()){const{status:e}=(0,g.XU)(o);e&&"ok"!==e||o.setStatus("internal_error")}}))}))}function f(e){if(!(0,u.z)())return;const t=v(e),a=(0,l.Gd)(),o=e.scope?e.scope.getSpan():I();return o?o.startChild(t):a.startTransaction(t)}function I(){return(0,s.nZ)().getSpan()}function _({sentryTrace:e,baggage:t},a){const l=(0,s.nZ)(),{traceparentData:c,dynamicSamplingContext:d,propagationContext:u}=(0,o.KA)(e,t);l.setPropagationContext(u),r.X&&c&&n.kg.log(`[Tracing] Continuing trace ${c.traceId}.`);const g={...c,metadata:(0,i.Jr)({dynamicSamplingContext:c&&!d?{}:d})};return a?a(g):g}function y(e,t,a){if((0,u.z)())return t?t.startChild(a):e.startTransaction(a)}function v(e){if(e.startTime){const t={...e};return t.startTimestamp=(0,g.$k)(e.startTime),delete t.startTime,t}return e}},8069:(e,t,a)=>{"use strict";a.d(t,{Y:()=>u});var o=a(535),n=a(2343),i=a(1703),r=a(5659),s=a(6754),l=a(3371),c=a(454),d=a(8903);class u extends d.Dr{constructor(e,t){super(e),this._measurements={},this._contexts={},this._hub=t||(0,r.Gd)(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const a=this._metadata.dynamicSamplingContext;a&&(this._frozenDynamicSamplingContext={...a})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[s.Zj]&&{source:this._attributes[s.Zj]},...this._attributes[s.TE]&&{sampleRate:this._attributes[s.TE]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(s.Zj,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new d.gB(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,a=""){this._measurements[e]={value:t,unit:a}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=(0,l.$k)(e),a=this._finishTransaction(t);if(a)return this._hub.captureEvent(a)}toContext(){const e=super.toContext();return(0,o.Jr)({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return(0,c.j)(this)}setHub(e){this._hub=e}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(i.X&&n.kg.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return i.X&&n.kg.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const a=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&(0,l.XU)(e).timestamp)):[];if(this._trimEnd&&a.length>0){const e=a.map((e=>(0,l.XU)(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{metadata:o}=this,{source:r}=o,s={contexts:{...this._contexts,trace:(0,l.wy)(this)},spans:a,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,dynamicSamplingContext:(0,c.j)(this)},...r&&{transaction_info:{source:r}}};return Object.keys(this._measurements).length>0&&(i.X&&n.kg.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),s.measurements=this._measurements),i.X&&n.kg.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),s}}},9791:(e,t,a)=>{"use strict";a.d(t,{qG:()=>r,x1:()=>i});var o=a(7638),n=a(5659);function i(e){return(e||(0,n.Gd)()).getScope().getTransaction()}const r=o.qG},3379:(e,t,a)=>{"use strict";a.d(t,{gi:()=>l,yo:()=>c});var o=a(535),n=a(2844),i=a(454),r=a(5102),s=a(3371);function l(e,t){const{fingerprint:a,span:l,breadcrumbs:c,sdkProcessingMetadata:d,propagationContext:u}=t;!function(e,t){const{extra:a,tags:n,user:i,contexts:r,level:s,transactionName:l}=t,c=(0,o.Jr)(a);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const d=(0,o.Jr)(n);d&&Object.keys(d).length&&(e.tags={...d,...e.tags});const u=(0,o.Jr)(i);u&&Object.keys(u).length&&(e.user={...u,...e.user});const g=(0,o.Jr)(r);g&&Object.keys(g).length&&(e.contexts={...g,...e.contexts}),s&&(e.level=s),l&&(e.transaction=l)}(e,t),l&&function(e,t){e.contexts={trace:(0,s.wy)(t),...e.contexts};const a=(0,r.G)(t);if(a){e.sdkProcessingMetadata={dynamicSamplingContext:(0,i.j)(t),...e.sdkProcessingMetadata};const o=(0,s.XU)(a).description;o&&(e.tags={transaction:o,...e.tags})}}(e,l),function(e,t){e.fingerprint=e.fingerprint?(0,n.lE)(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,a),function(e,t){const a=[...e.breadcrumbs||[],...t];e.breadcrumbs=a.length?a:void 0}(e,c),function(e,t,a){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t,propagationContext:a}}(e,d,u)}function c(e,t){const{extra:a,tags:o,user:n,contexts:i,level:r,sdkProcessingMetadata:s,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:g,propagationContext:p,transactionName:m,span:h}=t;d(e,"extra",a),d(e,"tags",o),d(e,"user",n),d(e,"contexts",i),d(e,"sdkProcessingMetadata",s),r&&(e.level=r),m&&(e.transactionName=m),h&&(e.span=h),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),g.length&&(e.attachments=[...e.attachments,...g]),e.propagationContext={...e.propagationContext,...p}}function d(e,t,a){if(a&&Object.keys(a).length){e[t]={...e[t]};for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[t][o]=a[o])}}},5102:(e,t,a)=>{"use strict";function o(e){return e.transaction}a.d(t,{G:()=>o})},7522:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var o=a(4487);function n(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=(0,o.s3)(),a=e||t&&t.getOptions();return!!a&&(a.enableTracing||"tracesSampleRate"in a||"tracesSampler"in a)}},766:(e,t,a)=>{"use strict";function o(e,t){const a=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,o=a&&a.getDsn(),i=a&&a.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,o)||function(e,t){return!!t&&n(e)===n(t)}(e,i)}function n(e){return"/"===e[e.length-1]?e.slice(0,-1):e}a.d(t,{W:()=>o})},8942:(e,t,a)=>{"use strict";a.d(t,{R:()=>p,U0:()=>h});var o=a(2844),n=a(1170),i=a(7321),r=a(1235),s=a(8007),l=a(1131),c=a(1195),d=a(350),u=a(3379),g=a(3371);function p(e,t,a,p,h,b){const{normalizeDepth:f=3,normalizeMaxBreadth:I=1e3}=e,_={...t,event_id:t.event_id||a.event_id||(0,o.DM)(),timestamp:t.timestamp||(0,n.yW)()},y=a.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:a,release:o,dist:n,maxValueLength:r=250}=t;"environment"in e||(e.environment="environment"in t?a:l.J),void 0===e.release&&void 0!==o&&(e.release=o),void 0===e.dist&&void 0!==n&&(e.dist=n),e.message&&(e.message=(0,i.$G)(e.message,r));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=(0,i.$G)(s.value,r));const c=e.request;c&&c.url&&(c.url=(0,i.$G)(c.url,r))}(_,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(_,y),void 0===t.type&&function(e,t){const a=r.GLOBAL_OBJ._sentryDebugIds;if(!a)return;let o;const n=m.get(t);n?o=n:(o=new Map,m.set(t,o));const i=Object.keys(a).reduce(((e,n)=>{let i;const r=o.get(n);r?i=r:(i=t(n),o.set(n,i));for(let t=i.length-1;t>=0;t--){const o=i[t];if(o.filename){e[o.filename]=a[n];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(_,e.stackParser);const v=function(e,t){if(!t)return e;const a=e?e.clone():new d.sX;return a.update(t),a}(p,a.captureContext);a.mechanism&&(0,o.EG)(_,a.mechanism);const C=h&&h.getEventProcessors?h.getEventProcessors():[],A=(0,d.lW)().getScopeData();if(b){const e=b.getScopeData();(0,u.yo)(A,e)}if(v){const e=v.getScopeData();(0,u.yo)(A,e)}const w=[...a.attachments||[],...A.attachments];w.length&&(a.attachments=w),(0,u.gi)(_,A);const S=[...C,...(0,c.fH)(),...A.eventProcessors];return(0,c.RP)(S,_,a).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const a=e.debug_meta.images;Object.keys(t).forEach((e=>{a.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof f&&f>0?function(e,t,a){if(!e)return null;const o={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:(0,s.Fv)(e.data,t,a)}})))},...e.user&&{user:(0,s.Fv)(e.user,t,a)},...e.contexts&&{contexts:(0,s.Fv)(e.contexts,t,a)},...e.extra&&{extra:(0,s.Fv)(e.extra,t,a)}};return e.contexts&&e.contexts.trace&&o.contexts&&(o.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(o.contexts.trace.data=(0,s.Fv)(e.contexts.trace.data,t,a))),e.spans&&(o.spans=e.spans.map((e=>{const o=(0,g.XU)(e).data;return o&&(e.data=(0,s.Fv)(o,t,a)),e}))),o}(e,f,I):e)))}const m=new WeakMap;function h(e){if(e)return function(e){return e instanceof d.sX||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>b.includes(e)))}(e)?{captureContext:e}:e}const b=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"]},3371:(e,t,a)=>{"use strict";a.d(t,{$k:()=>d,Hb:()=>c,Tt:()=>p,XU:()=>g,i0:()=>s,ve:()=>r,wy:()=>l});var o=a(535),n=a(7638),i=a(1170);const r=0,s=1;function l(e){const{spanId:t,traceId:a}=e.spanContext(),{data:n,op:i,parent_span_id:r,status:s,tags:l,origin:c}=g(e);return(0,o.Jr)({data:n,op:i,parent_span_id:r,span_id:t,status:s,tags:l,trace_id:a,origin:c})}function c(e){const{traceId:t,spanId:a}=e.spanContext(),o=p(e);return(0,n.$p)(t,a,o)}function d(e){return"number"==typeof e?u(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?u(e.getTime()):(0,i.ph)()}function u(e){return e>9999999999?e/1e3:e}function g(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function p(e){const{traceFlags:t}=e.spanContext();return Boolean(t&s)}},105:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});const o="7.98.0"},9818:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DEFAULT_USER_INCLUDES:()=>Ae.rC,Handlers:()=>n,Http:()=>Tt,Hub:()=>Q.Xb,Integrations:()=>ro,NodeClient:()=>Je,SDK_VERSION:()=>We.J,Scope:()=>ke.sX,Undici:()=>_a.Y,addBreadcrumb:()=>j.n_,addEventProcessor:()=>ce,addGlobalEventProcessor:()=>Ve.cc,addIntegration:()=>l.M5,addRequestDataToEvent:()=>Ae.S6,autoDiscoverNodePerformanceMonitoringIntegrations:()=>Te,captureCheckIn:()=>j.c,captureEvent:()=>j.eN,captureException:()=>j.Tb,captureMessage:()=>j.uT,close:()=>j.xv,configureScope:()=>j.e,continueTrace:()=>Re.yn,createGetModuleFromFilename:()=>wa,createTransport:()=>ge,cron:()=>so,deepReadDirSync:()=>Va,defaultIntegrations:()=>Sa,defaultStackParser:()=>ka,enableAnrDetection:()=>xa,extractRequestData:()=>Ae.XQ,extractTraceparentData:()=>xe.qG,flush:()=>j.yl,functionToStringIntegration:()=>u,getActiveSpan:()=>Re.HN,getActiveTransaction:()=>xe.x1,getClient:()=>j.s3,getCurrentHub:()=>Q.Gd,getCurrentScope:()=>j.nZ,getDefaultIntegrations:()=>Ga,getGlobalScope:()=>ke.lW,getHubFromCarrier:()=>Q.vi,getIsolationScope:()=>Q.aF,getModuleFromFilename:()=>io,getSentryRelease:()=>Wa,hapiErrorPlugin:()=>Ja,inboundFiltersIntegration:()=>y,init:()=>Za,isInitialized:()=>j.dk,lastEventId:()=>j.eW,linkedErrorsIntegration:()=>R,makeMain:()=>Q.pj,makeNodeTransport:()=>ut,metrics:()=>ve,parameterize:()=>Ce,requestDataIntegration:()=>Ge,runWithAsyncContext:()=>Q.Ok,setContext:()=>j.v,setCurrentClient:()=>Be,setExtra:()=>j.sU,setExtras:()=>j.rJ,setMeasurement:()=>Ne.o,setTag:()=>j.YA,setTags:()=>j.mG,setUser:()=>j.av,spanStatusfromHttpCode:()=>He.Zd,startActiveSpan:()=>Re.y_,startInactiveSpan:()=>Re.qp,startSpan:()=>Re.GK,startSpanManual:()=>Re.V0,startTransaction:()=>j.Yr,trace:()=>Re.g4,withIsolationScope:()=>j.wi,withMonitor:()=>j.sV,withScope:()=>j.$e});var o={};a.r(o),a.d(o,{FunctionToString:()=>g,InboundFilters:()=>v,LinkedErrors:()=>x});var n={};a.r(n),a.d(n,{errorHandler:()=>Pa,extractRequestData:()=>Ea,parseRequest:()=>Ta,requestHandler:()=>Ya,tracingHandler:()=>Xa,trpcMiddleware:()=>Oa});var i={};a.r(i),a.d(i,{Anr:()=>Ra.q,Console:()=>Bt,Context:()=>ra,ContextLines:()=>qt,Hapi:()=>Da,Http:()=>Tt,LocalVariables:()=>Ia,Modules:()=>jt,OnUncaughtException:()=>Ot,OnUnhandledRejection:()=>Ut,RequestData:()=>Ze,Spotlight:()=>va,Undici:()=>_a.Y});var r={};a.r(r),a.d(r,{Apollo:()=>Ma._,Express:()=>ja.N1,GraphQL:()=>Qa.k,Mongo:()=>$a._,Mysql:()=>qa.m,Postgres:()=>eo.E,Prisma:()=>to.g});var s=a(535),l=a(2967);let c;const d="FunctionToString",u=(0,l._I)((()=>({name:d,setupOnce(){c=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=(0,s.HK)(this)||this;return c.apply(t,e)}}catch(e){}}}))),g=(0,l.RN)(d,u);var p=a(2343),m=a(2844),h=a(7321),b=a(1703);const f=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],I=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],_="InboundFilters",y=(0,l._I)(((e={})=>({name:_,setupOnce(){},processEvent(t,a,o){const n=o.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:f],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:I],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,n);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(b.X&&p.kg.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,m.jH)(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let a;e.message&&t.push(e.message);try{a=e.exception.values[e.exception.values.length-1]}catch(e){}return a&&a.value&&(t.push(a.value),a.type&&t.push(`${a.type}: ${a.value}`)),b.X&&0===t.length&&p.kg.error(`Could not extract message for event ${(0,m.jH)(e)}`),t}(e).some((e=>(0,h.U0)(e,t)))}(e,t.ignoreErrors)?(b.X&&p.kg.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,m.jH)(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const a=e.transaction;return!!a&&(0,h.U0)(a,t)}(e,t.ignoreTransactions)?(b.X&&p.kg.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,m.jH)(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const a=C(e);return!!a&&(0,h.U0)(a,t)}(e,t.denyUrls)?(b.X&&p.kg.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,m.jH)(e)}.\nUrl: ${C(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const a=C(e);return!a||(0,h.U0)(a,t)}(e,t.allowUrls)&&(b.X&&p.kg.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,m.jH)(e)}.\nUrl: ${C(e)}`),!0)}(t,i)?null:t}}))),v=(0,l.RN)(_,y);function C(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const a=e[t];if(a&&"<anonymous>"!==a.filename&&"[native code]"!==a.filename)return a.filename||null}return null}(t):null}catch(t){return b.X&&p.kg.error(`Cannot extract url for event ${(0,m.jH)(e)}`),null}}var A=a(7597);function w(e,t,a=250,o,n,i,r){if(!(i.exception&&i.exception.values&&r&&(0,A.V9)(r.originalException,Error)))return;const s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var l,c;s&&(i.exception.values=(l=S(e,t,n,r.originalException,o,i.exception.values,s,0),c=a,l.map((e=>(e.value&&(e.value=(0,h.$G)(e.value,c)),e)))))}function S(e,t,a,o,n,i,r,s){if(i.length>=a+1)return i;let l=[...i];if((0,A.V9)(o[n],Error)){G(r,s);const i=e(t,o[n]),c=l.length;Z(i,n,c,s),l=S(e,t,a,o[n],n,[i,...l],i,c)}return Array.isArray(o.errors)&&o.errors.forEach(((o,i)=>{if((0,A.V9)(o,Error)){G(r,s);const c=e(t,o),d=l.length;Z(c,`errors[${i}]`,d,s),l=S(e,t,a,o,n,[c,...l],c,d)}})),l}function G(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function Z(e,t,a,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:a,parent_id:o}}var B=a(8007);function W(e,t){return e(t.stack||"",1)}function k(e,t){const a={type:t.name||t.constructor.name,value:t.message},o=W(e,t);return o.length&&(a.stacktrace={frames:o}),a}const V="LinkedErrors",R=(0,l._I)(((e={})=>{const t=e.limit||5,a=e.key||"cause";return{name:V,setupOnce(){},preprocessEvent(e,o,n){const i=n.getOptions();w(k,i.stackParser,i.maxValueLength,a,t,e,o)}}})),x=(0,l.RN)(V,R),N=o;var H=a(3897);const E=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function T(e,t=!1){const{host:a,path:o,pass:n,port:i,projectId:r,protocol:s,publicKey:l}=e;return`${s}://${l}${t&&n?`:${n}`:""}@${a}${i?`:${i}`:""}/${o?`${o}/`:o}${r}`}function X(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}var Y=a(6893);function F(e,t=[]){return[e,t]}function P(e,t){const[a,o]=e;return[a,[...o,t]]}function O(e,t){const a=e[1];for(const e of a)if(t(e,e[0].type))return!0;return!1}function z(e,t){return(t||new TextEncoder).encode(e)}function U(e,t){const[a,o]=e;let n=JSON.stringify(a);function i(e){"string"==typeof n?n="string"==typeof e?n+e:[z(n,t),e]:n.push("string"==typeof e?z(e,t):e)}for(const e of o){const[t,a]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof a||a instanceof Uint8Array)i(a);else{let e;try{e=JSON.stringify(a)}catch(t){e=JSON.stringify((0,B.Fv)(a))}i(e)}}return"string"==typeof n?n:function(e){const t=e.reduce(((e,t)=>e+t.length),0),a=new Uint8Array(t);let o=0;for(const t of e)a.set(t,o),o+=t.length;return a}(n)}function J(e,t){const a="string"==typeof e.data?z(e.data,t):e.data;return[(0,s.Jr)({type:"attachment",length:a.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),a]}const K={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function L(e){return K[e]}function D(e){if(!e||!e.sdk)return;const{name:t,version:a}=e.sdk;return{name:t,version:a}}class M extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}var j=a(4487),Q=a(5659);const $=/[^a-zA-Z0-9_/.-]+/g,q=/[^\w\d_:/@.{}[\]$-]+/g;function ee(e,t,a,o){return`${e}${t}${a}${Object.entries((0,s.Jr)(o)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}function te(e){const t={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a.replace($,"_")]=String(e[a]).replace(q,"_"));return t}var ae=a(9015),oe=a(454),ne=a(8942);const ie="Not capturing exception because it's already been captured.";class re{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=E.exec(e);if(!t)return void(0,p.Cf)((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[a,o,n="",i,r="",s]=t.slice(1);let l="",c=s;const d=c.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),c=d.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return X({host:i,pass:n,path:l,projectId:c,port:r,protocol:a,publicKey:o})}(e):X(e);if(t&&function(e){if(!H.X)return!0;const{port:t,projectId:a,protocol:o}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(p.kg.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(a.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(o)?t&&isNaN(parseInt(t,10))&&(p.kg.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(p.kg.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(p.kg.error(`Invalid Sentry Dsn: Invalid projectId ${a}`),1)))}(t))return t}(e.dsn):b.X&&p.kg.warn("No DSN provided, client will not send events."),this._dsn){const t=function(e,t={}){const a="string"==typeof t?t:t.tunnel,o="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return a||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",a=e.port?`:${e.port}`:"";return`${t}//${e.host}${a}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return(0,s._j)({sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,o)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,a){if((0,m.YO)(e))return void(b.X&&p.kg.log(ie));let o=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,a))).then((e=>{o=e}))),o}captureMessage(e,t,a,o){let n=a&&a.event_id;const i=(0,A.Le)(e)?e:String(e),r=(0,A.pt)(e)?this.eventFromMessage(i,t,a):this.eventFromException(e,a);return this._process(r.then((e=>this._captureEvent(e,a,o))).then((e=>{n=e}))),n}captureEvent(e,t,a){if(t&&t.originalException&&(0,m.YO)(t.originalException))return void(b.X&&p.kg.log(ie));let o=t&&t.event_id;return this._process(this._captureEvent(e,t,a).then((e=>{o=e}))),o}captureSession(e){"string"!=typeof e.release?b.X&&p.kg.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),(0,ae.CT)(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((a=>t.flush(e).then((e=>a&&e))))):(0,Y.WD)(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return b.X&&p.kg.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){(0,l.m7)(this,e,this._integrations)}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let a=function(e,t,a,o){const n=D(a),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,a&&a.sdk);const r=function(e,t,a,o){const n=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!a&&o&&{dsn:T(o)},...n&&{trace:(0,s.Jr)({...n})}}}(e,n,o,t);return delete e.sdkProcessingMetadata,F(r,[[{type:i},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])a=P(a,J(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const o=this._sendEnvelope(a);o&&o.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,a,o){const n=D(a);return F({sent_at:(new Date).toISOString(),...n&&{sdk:n},...!!o&&t&&{dsn:T(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,a){if(this._options.sendClientReports){const a=`${e}:${t}`;b.X&&p.kg.log(`Adding outcome: "${a}"`),this._outcomes[a]=this._outcomes[a]+1||1}}captureAggregateMetrics(e){b.X&&p.kg.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=function(e,t,a,o){const n={sent_at:(new Date).toISOString()};a&&a.sdk&&(n.sdk={name:a.sdk.name,version:a.sdk.version}),o&&t&&(n.dsn=T(t));const i=function(e){const t=function(e){let t="";for(const a of e){const e=Object.entries(a.tags),o=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${a.name}@${a.unit}:${a.metric}|${a.metricType}${o}|T${a.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return F(n,[i])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){this._integrations=(0,l.q4)(this,this._options.integrations),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let a=!1,o=!1;const n=t.exception&&t.exception.values;if(n){o=!0;for(const e of n){const t=e.mechanism;if(t&&!1===t.handled){a=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&a)&&((0,ae.CT)(e,{...a&&{status:"crashed"},errors:e.errors||Number(o||a)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Y.cW((t=>{let a=0;const o=setInterval((()=>{0==this._numProcessing?(clearInterval(o),t(!0)):(a+=1,e&&a>=e&&(clearInterval(o),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,a,o=(0,Q.aF)()){const n=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),(0,ne.R)(n,e,t,a,this,o).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:o,spanId:n,parentSpanId:i,dsc:r}=t;e.contexts={trace:{trace_id:o,span_id:n,parent_span_id:i},...e.contexts};const s=r||(0,oe._)(o,this,a);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},a){return this._processEvent(e,t,a).then((e=>e.event_id),(e=>{if(b.X){const t=e;"log"===t.logLevel?p.kg.log(t.message):p.kg.warn(t)}}))}_processEvent(e,t,a){const o=this.getOptions(),{sampleRate:n}=o,i=le(e),r=se(e),s=e.type||"error",l=`before send for type \`${s}\``;if(r&&"number"==typeof n&&Math.random()>n)return this.recordDroppedEvent("sample_rate","error",e),(0,Y.$2)(new M(`Discarding event because it's not included in the random sample (sampling rate = ${n})`,"log"));const c="replay_event"===s?"replay":s;return this._prepareEvent(e,t,a).then((a=>{if(null===a)throw this.recordDroppedEvent("event_processor",c,e),new M("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return a;const n=function(e,t,a){const{beforeSend:o,beforeSendTransaction:n}=e;return se(t)&&o?o(t,a):le(t)&&n?n(t,a):t}(o,a,t);return function(e,t){const a=`${t} must return \`null\` or a valid event.`;if((0,A.J8)(e))return e.then((e=>{if(!(0,A.PO)(e)&&null!==e)throw new M(a);return e}),(e=>{throw new M(`${t} rejected with ${e}`)}));if(!(0,A.PO)(e)&&null!==e)throw new M(a);return e}(n,l)})).then((o=>{if(null===o)throw this.recordDroppedEvent("before_send",c,e),new M(`${l} returned \`null\`, will not send event.`,"log");const n=a&&a.getSession();!i&&n&&this._updateSessionFromEvent(n,o);const r=o.transaction_info;if(i&&r&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...r,source:e}}return this.sendEvent(o,t),o})).then(null,(e=>{if(e instanceof M)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new M(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{b.X&&p.kg.error("Error while sending event:",e)}));b.X&&p.kg.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[a,o]=t.split(":");return{reason:a,category:o,quantity:e[t]}}))}}function se(e){return void 0===e.type}function le(e){return"transaction"===e.type}function ce(e){const t=(0,j.s3)();t&&t.addEventProcessor&&t.addEventProcessor(e)}const de=6e4;const ue=30;function ge(e,t,a=function(e){const t=[];function a(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(o){if(!(void 0===e||t.length<e))return(0,Y.$2)(new M("Not adding Promise because buffer limit was reached."));const n=o();return-1===t.indexOf(n)&&t.push(n),n.then((()=>a(n))).then(null,(()=>a(n).then(null,(()=>{})))),n},drain:function(e){return new Y.cW(((a,o)=>{let n=t.length;if(!n)return a(!0);const i=setTimeout((()=>{e&&e>0&&a(!1)}),e);t.forEach((e=>{(0,Y.WD)(e).then((()=>{--n||(clearTimeout(i),a(!0))}),o)}))}))}}}(e.bufferSize||ue)){let o={};function n(n){const i=[];if(O(n,((t,a)=>{const n=L(a);if(function(e,t,a=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>a}(o,n)){const o=pe(t,a);e.recordDroppedEvent("ratelimit_backoff",n,o)}else i.push(t)})),0===i.length)return(0,Y.WD)();const r=F(n[0],i),s=t=>{O(r,((a,o)=>{const n=pe(a,o);e.recordDroppedEvent(t,L(o),n)}))};return a.add((()=>t({body:U(r,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&b.X&&p.kg.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),o=function(e,{statusCode:t,headers:a},o=Date.now()){const n={...e},i=a&&a["x-sentry-rate-limits"],r=a&&a["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,a]=e.split(":",2),i=parseInt(t,10),r=1e3*(isNaN(i)?60:i);if(a)for(const e of a.split(";"))n[e]=o+r;else n.all=o+r}else r?n.all=o+function(e,t=Date.now()){const a=parseInt(`${e}`,10);if(!isNaN(a))return 1e3*a;const o=Date.parse(`${e}`);return isNaN(o)?de:o-t}(r,o):429===t&&(n.all=o+6e4);return n}(o,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof M)return b.X&&p.kg.error("Skipped sending event because buffer is full."),s("queue_overflow"),(0,Y.WD)();throw e}))}return n.__sentry__baseTransport__=!0,{send:n,flush:e=>a.drain(e)}}function pe(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}var me=a(3371),he=a(1170);const be={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return t>>>0}(e):e)).join(":")}}};class fe{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,a,o="none",n={},i=(0,he.ph)()){const r=Math.floor(i),s=t.replace($,"_"),l=te(n),c=ee(e,s,o,l),d=this._buckets.get(c);d?(d.metric.add(a),d.timestamp<r&&(d.timestamp=r)):this._buckets.set(c,{metric:new be[e](a),timestamp:r,metricType:e,name:s,unit:o,tags:l})}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Ie="MetricsAggregator",_e=(0,l._I)((()=>({name:Ie,setupOnce(){},setup(e){e.metricsAggregator=new fe(e)}})));function ye(e,t,a,o={}){const n=(0,j.s3)(),i=(0,j.nZ)();if(n){if(!n.metricsAggregator)return void(b.X&&p.kg.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:r,tags:s,timestamp:l}=o,{release:c,environment:d}=n.getOptions(),u=i.getTransaction(),g={};c&&(g.release=c),d&&(g.environment=d),u&&(g.transaction=(0,me.XU)(u).description||""),b.X&&p.kg.log(`Adding value of ${a} to ${e} metric ${t}`),n.metricsAggregator.add(e,t,a,r,{...g,...s},l)}}const ve={increment:function(e,t=1,a){ye("c",e,t,a)},distribution:function(e,t,a){ye("d",e,t,a)},set:function(e,t,a){ye("s",e,t,a)},gauge:function(e,t,a){ye("g",e,t,a)},MetricsAggregator:(0,l.RN)(Ie,_e),metricsAggregatorIntegration:_e};function Ce(e,...t){const a=new String(String.raw(e,...t));return a.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),a.__sentry_template_values__=t,a}var Ae=a(771);const we={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},Se="RequestData",Ge=(0,l._I)(((e={})=>{const t=Ae.S6,a={...we,...e,include:{method:!0,...we.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...we.include.user,...(e.include||{}).user}}};return{name:Se,setupOnce(){},processEvent(e,o,n){const{transactionNamingScheme:i}=a,{sdkProcessingMetadata:r={}}=e,s=r.request;if(!s)return e;const l=r.requestDataOptionsFromExpressHandler||r.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:a,user:o,...n}}=e,i=[];for(const[e,t]of Object.entries(n))t&&i.push(e);let r;if(void 0===o)r=!0;else if("boolean"==typeof o)r=o;else{const e=[];for(const[t,a]of Object.entries(o))a&&e.push(t);r=e}return{include:{ip:a,user:r,request:0!==i.length?i:void 0,transaction:t}}}(a),c=t(e,s,l);if("transaction"===e.type||"handler"===i)return c;const d=s._sentryTransaction;if(d){const e=(0,me.XU)(d).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(n)?e.startsWith("/api"):"path"!==i,[a]=(0,Ae.oA)(s,{path:!0,method:t,customRoute:e});c.transaction=a}return c}}})),Ze=(0,l.RN)(Se,Ge);function Be(e){const t=(0,Q.Gd)().getStackTop();t.client=e,t.scope.setClient(e)}var We=a(105),ke=a(350),Ve=a(1195),Re=a(4317),xe=a(9791),Ne=a(9080),He=a(8903),Ee=a(6046);function Te(){const e=Ee.G.map((e=>{try{return e()}catch(e){return}})).filter((e=>!!e));return 0===e.length&&p.kg.warn("Performance monitoring integrations could not be automatically loaded."),e.filter((e=>!!e.loadDependency()))}const Xe=require("os"),Ye=require("util");class Fe{constructor(e){this._client=e,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval((()=>this._flush()),1e4),this._flushShift=Math.floor(1e4*Math.random()/1e3),this._forceFlush=!1}add(e,t,a,o="none",n={},i=(0,he.ph)()){const r=Math.floor(i),s=t.replace($,"_"),l=te(n),c=ee(e,s,o,l);let d=this._buckets.get(c);d?(d.metric.add(a),d.timestamp<r&&(d.timestamp=r)):(d={metric:new be[e](a),timestamp:r,metricType:e,name:s,unit:o,tags:l},this._buckets.set(c,d)),this._bucketsTotalWeight+=d.metric.weight,this._bucketsTotalWeight>=1e4&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush)return this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),void this._buckets.clear();const e=Math.floor((0,he.ph)())-10-this._flushShift,t=new Map;for(const[a,o]of this._buckets)o.timestamp<=e&&(t.set(a,o),this._bucketsTotalWeight-=o.metric.weight);for(const[e]of t)this._buckets.delete(e);this._captureMetrics(t)}_captureMetrics(e){if(e.size>0&&this._client.captureAggregateMetrics){const t=Array.from(e).map((([,e])=>e));this._client.captureAggregateMetrics(t)}}}class Pe{constructor(e,t){this._client=e,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._sessionAttrs=t}flush(){const e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this._client.sendSession(e))}getSessionAggregates(){const e=Object.keys(this._pendingAggregates).map((e=>this._pendingAggregates[parseInt(e)])),t={attrs:this._sessionAttrs,aggregates:e};return(0,s.Jr)(t)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const e=(0,j.nZ)(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}_incrementSessionStatusCount(e,t){const a=new Date(t).setSeconds(0,0);this._pendingAggregates[a]=this._pendingAggregates[a]||{};const o=this._pendingAggregates[a];switch(o.started||(o.started=new Date(a).toISOString()),e){case"errored":return o.errored=(o.errored||0)+1,o.errored;case"ok":return o.exited=(o.exited||0)+1,o.exited;default:return o.crashed=(o.crashed||0)+1,o.crashed}}}var Oe=a(1283),ze=a(5102);class Ue extends re{constructor(e){(0,Oe.T)(),super(e),e._experiments&&e._experiments.metricsAggregator&&(this.metricsAggregator=new Fe(this))}eventFromException(e,t){return(0,Y.WD)(function(e,t,a,o){const n="function"==typeof e?e().getClient():e;let i=a;const r=o&&o.data&&o.data.mechanism||{handled:!0,type:"generic"};let l;if(!(0,A.VZ)(a)){if((0,A.PO)(a)){const e=n&&n.getOptions().normalizeDepth;l={__serialized__:(0,B.Qy)(a,e)};const t=function(e){if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message '${e.message}'`),t}return"message"in e&&"string"==typeof e.message?e.message:`Object captured as exception with keys: ${(0,s.zf)(e)}`}(a);i=o&&o.syntheticException||new Error(t),i.message=t}else i=o&&o.syntheticException||new Error(a),i.message=a;r.synthetic=!0}const c={exception:{values:[k(t,i)]}};return l&&(c.extra=l),(0,m.Db)(c,void 0,void 0),(0,m.EG)(c,r),{...c,event_id:o&&o.event_id}}((0,j.s3)(),this._options.stackParser,e,t))}eventFromMessage(e,t="info",a){return(0,Y.WD)(function(e,t,a="info",o,n){const i={event_id:o&&o.event_id,level:a};if(n&&o&&o.syntheticException){const a=W(e,o.syntheticException);a.length&&(i.exception={values:[{value:t,stacktrace:{frames:a}}]})}if((0,A.Le)(t)){const{__sentry_template_string__:e,__sentry_template_values__:a}=t;return i.logentry={message:e,params:a},i}return i.message=t,i}(this._options.stackParser,e,t,a,this._options.attachStacktrace))}captureException(e,t,a){if(this._options.autoSessionTracking&&this._sessionFlusher&&a){const e=a.getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureException(e,t,a)}captureEvent(e,t,a){if(this._options.autoSessionTracking&&this._sessionFlusher&&a&&"exception"===(e.type||"exception")&&e.exception&&e.exception.values&&e.exception.values.length>0){const e=a.getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureEvent(e,t,a)}close(e){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(e)}initSessionFlusher(){const{release:e,environment:t}=this._options;e?this._sessionFlusher=new Pe(this,{release:e,environment:t}):b.X&&p.kg.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(e,t,a){const o="checkInId"in e&&e.checkInId?e.checkInId:(0,m.DM)();if(!this._isEnabled())return b.X&&p.kg.warn("SDK not enabled, will not capture checkin."),o;const n=this.getOptions(),{release:i,environment:r,tunnel:l}=n,c={check_in_id:o,monitor_slug:e.monitorSlug,status:e.status,release:i,environment:r};"duration"in e&&(c.duration=e.duration),t&&(c.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone});const[d,u]=this._getTraceInfoFromScope(a);u&&(c.contexts={trace:u});const g=function(e,t,a,o,n){const i={sent_at:(new Date).toISOString()};a&&a.sdk&&(i.sdk={name:a.sdk.name,version:a.sdk.version}),o&&n&&(i.dsn=T(n)),t&&(i.trace=(0,s.Jr)(t));const r=function(e){return[{type:"check_in"},e]}(e);return F(i,[r])}(c,d,this.getSdkMetadata(),l,this.getDsn());return b.X&&p.kg.info("Sending checkin:",e.monitorSlug,e.status),this._sendEnvelope(g),o}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():b.X&&p.kg.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(e,t,a,o){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:(e.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,t,a,o)}_getTraceInfoFromScope(e){if(!e)return[void 0,void 0];const t=e.getSpan();if(t)return[(0,ze.G)(t)?(0,oe.j)(t):void 0,(0,me.wy)(t)];const{traceId:a,spanId:o,parentSpanId:n,dsc:i}=e.getPropagationContext(),r={trace_id:a,span_id:o,parent_span_id:n};return i?[i,r]:[(0,oe._)(a,this,e),r]}}class Je extends Ue{constructor(e){!function(e,t,a=[t],o="npm"){const n=e._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${t}`,packages:a.map((e=>({name:`${o}:@sentry/${e}`,version:We.J}))),version:We.J}),e._metadata=n}(e,"node"),e.transportOptions={textEncoder:new Ye.TextEncoder,...e.transportOptions},super({...e,platform:"node",runtime:{name:"node",version:global.process.version},serverName:e.serverName||global.process.env.SENTRY_NAME||Xe.hostname()})}}function Ke(e,t){return null!=e?e:t()}var Le=a(3685),De=a(5687),Me=a(2781),je=a(7310),Qe=a(9796),$e=a(4307);const qe=require("assert");var et=a.n(qe),tt=a(1808),at=a(4404);const ot=Symbol("AgentBaseInternalState");class nt extends Le.Agent{constructor(e){super(e),this[ot]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}const{stack:t}=new Error;return"string"==typeof t&&t.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}createSocket(e,t,a){const o={...t,secureEndpoint:this.isSecureEndpoint(t)};Promise.resolve().then((()=>this.connect(e,o))).then((n=>{if(n instanceof Le.Agent)return n.addRequest(e,o);this[ot].currentSocket=n,super.createSocket(e,t,a)}),a)}createConnection(){const e=this[ot].currentSocket;if(this[ot].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return Ke(this[ot].defaultPort,(()=>"https:"===this.protocol?443:80))}set defaultPort(e){this[ot]&&(this[ot].defaultPort=e)}get protocol(){return Ke(this[ot].protocol,(()=>this.isSecureEndpoint()?"https:":"http:"))}set protocol(e){this[ot]&&(this[ot].protocol=e)}}function it(...e){p.kg.log("[https-proxy-agent:parse-proxy-response]",...e)}function rt(...e){p.kg.log("[https-proxy-agent]",...e)}class st extends nt{static __initStatic(){this.protocols=["http","https"]}constructor(e,t){super(t),this.options={},this.proxy="string"==typeof e?new je.URL(e):e,this.proxyHeaders=Ke((0,$e.x)([t,"optionalAccess",e=>e.headers]),(()=>({}))),rt("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const a=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?ct(t,"headers"):null,host:a,port:o}}async connect(e,t){const{proxy:a}=this;if(!t.host)throw new TypeError('No "host" provided');let o;if("https:"===a.protocol){rt("Creating `tls.Socket`: %o",this.connectOpts);const e=this.connectOpts.servername||this.connectOpts.host;o=at.connect({...this.connectOpts,servername:e&&tt.isIP(e)?void 0:e})}else rt("Creating `net.Socket`: %o",this.connectOpts),o=tt.connect(this.connectOpts);const n="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},i=tt.isIPv6(t.host)?`[${t.host}]`:t.host;let r=`CONNECT ${i}:${t.port} HTTP/1.1\r\n`;if(a.username||a.password){const e=`${decodeURIComponent(a.username)}:${decodeURIComponent(a.password)}`;n["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}n.Host=`${i}:${t.port}`,n["Proxy-Connection"]||(n["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const e of Object.keys(n))r+=`${e}: ${n[e]}\r\n`;const s=function(e){return new Promise(((t,a)=>{let o=0;const n=[];function i(){const s=e.read();s?function(s){n.push(s),o+=s.length;const l=Buffer.concat(n,o),c=l.indexOf("\r\n\r\n");if(-1===c)return it("have not received end of HTTP headers yet..."),void i();const d=l.slice(0,c).toString("ascii").split("\r\n"),u=d.shift();if(!u)return e.destroy(),a(new Error("No header received from proxy CONNECT response"));const g=u.split(" "),p=+g[1],m=g.slice(2).join(" "),h={};for(const t of d){if(!t)continue;const o=t.indexOf(":");if(-1===o)return e.destroy(),a(new Error(`Invalid header from proxy CONNECT response: "${t}"`));const n=t.slice(0,o).toLowerCase(),i=t.slice(o+1).trimStart(),r=h[n];"string"==typeof r?h[n]=[r,i]:Array.isArray(r)?r.push(i):h[n]=i}it("got proxy server response: %o %o",u,h),r(),t({connect:{statusCode:p,statusText:m,headers:h},buffered:l})}(s):e.once("readable",i)}function r(){e.removeListener("end",s),e.removeListener("error",l),e.removeListener("readable",i)}function s(){r(),it("onend"),a(new Error("Proxy connection ended before receiving CONNECT response"))}function l(e){r(),it("onerror %o",e),a(e)}e.on("error",l),e.on("end",s),i()}))}(o);o.write(`${r}\r\n`);const{connect:l,buffered:c}=await s;if(e.emit("proxyConnect",l),this.emit("proxyConnect",l,e),200===l.statusCode){if(e.once("socket",lt),t.secureEndpoint){rt("Upgrading socket connection to TLS");const e=t.servername||t.host;return at.connect({...ct(t,"host","path","port"),socket:o,servername:tt.isIP(e)?void 0:e})}return o}o.destroy();const d=new tt.Socket({writable:!1});return d.readable=!0,e.once("socket",(e=>{rt("Replaying proxy buffer for failed request"),et()(e.listenerCount("data")>0),e.push(c),e.push(null)})),d}}function lt(e){e.resume()}function ct(e,...t){const a={};let o;for(o in e)t.includes(o)||(a[o]=e[o]);return a}st.__initStatic();const dt=32768;function ut(e){let t;try{t=new je.URL(e.url)}catch(t){return(0,p.Cf)((()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")})),ge(e,(()=>Promise.resolve({})))}const a="https:"===t.protocol,o=function(e,t){const{no_proxy:a}=process.env;return a&&a.split(",").some((t=>e.host.endsWith(t)||e.hostname.endsWith(t)))?void 0:t}(t,e.proxy||(a?process.env.https_proxy:void 0)||process.env.http_proxy),n=a?De:Le,i=void 0!==e.keepAlive&&e.keepAlive,r=o?new st(o):new n.Agent({keepAlive:i,maxSockets:30,timeout:2e3}),s=function(e,t,a){const{hostname:o,pathname:n,port:i,protocol:r,search:s}=new je.URL(e.url);return function(l){return new Promise(((c,d)=>{let u=function(e){return new Me.Readable({read(){this.push(e),this.push(null)}})}(l.body);const g={...e.headers};l.body.length>dt&&(g["content-encoding"]="gzip",u=u.pipe((0,Qe.createGzip)()));const p=t.request({method:"POST",agent:a,headers:g,hostname:o,path:`${n}${s}`,port:i,protocol:r,ca:e.caCerts},(e=>{e.on("data",(()=>{})),e.on("end",(()=>{})),e.setEncoding("utf8");const t=Ke(e.headers["retry-after"],(()=>null)),a=Ke(e.headers["x-sentry-rate-limits"],(()=>null));c({statusCode:e.statusCode,headers:{"retry-after":t,"x-sentry-rate-limits":Array.isArray(a)?a[0]:a}})}));p.on("error",d),u.pipe(p)}))}}(e,Ke(e.httpModule,(()=>n)),r);return ge(e,s)}var gt=a(6147),pt=a(1235),mt=a(7638),ht=a(9656);const bt=require("domain");function ft(){return bt.active}function It(){const e=ft();if(e)return(0,Q.uZ)(e),(0,Q.vi)(e)}function _t(e,t){const a=ft();if(a&&(0,$e.x)([t,"optionalAccess",e=>e.reuseExisting]))return e();const o=bt.create(),n=function(e){const t={};return(0,Q.uZ)(t,e),(0,Q.vi)(t)}(a?(0,Q.vi)(a):void 0);return(0,Q.j0)(o,n),o.bind((()=>e()))()}const yt=require("async_hooks");let vt;function Ct(){ht.V.major>=14?function(){function e(){return vt.getStore()}vt||(vt=new yt.AsyncLocalStorage),(0,Q.$b)({getCurrentHub:e,runWithAsyncContext:function(t,a){const o=e();if(o&&(0,$e.x)([a,"optionalAccess",e=>e.reuseExisting]))return t();const n=function(e){const t={};return(0,Q.uZ)(t,e),(0,Q.vi)(t)}(o);return vt.run(n,(()=>t()))}})}():(0,Q.$b)({getCurrentHub:It,runWithAsyncContext:_t})}var At=a(9729);function wt(){"console"in pt.GLOBAL_OBJ&&p.RU.forEach((function(e){e in pt.GLOBAL_OBJ.console&&(0,s.hl)(pt.GLOBAL_OBJ.console,e,(function(t){return p.LD[e]=t,function(...t){const a={args:t,level:e};(0,At.rK)("console",a);const o=p.LD[e];o&&o.apply(pt.GLOBAL_OBJ.console,t)}}))}))}const St=["fatal","error","warning","log","info","debug"];function Gt(e){return"warn"===e?"warning":St.includes(e)?e:"log"}const Zt="Console",Bt=(0,l.RN)(Zt,(()=>({name:Zt,setupOnce(){},setup(e){!function(t){const a="console";(0,At.Hj)(a,(({args:t,level:a})=>{(0,j.s3)()===e&&(0,j.n_)({category:"console",level:Gt(a),message:Ye.format.apply(void 0,t)},{input:[...t],level:a})})),(0,At.D2)(a,wt)}()}})));var Wt=a(766),kt=a(3641),Vt=a(9181);const Rt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function xt(e){const{protocol:t,hostname:a,port:o}=Et(e),n=e.pathname||"/";return`${t}//${e.auth?function(e){const[t,a]=e.split(":");return`${t?"[Filtered]":""}:${a?"[Filtered]":""}@`}(e.auth):""}${a}${o}${n}`}function Nt(e,t,a){if(!e)return e;let[o,n]=e.split(" ");return t.host&&!t.protocol&&(t.protocol=(0,$e.x)([a,"optionalAccess",e=>e.agent,"optionalAccess",e=>e.protocol]),n=xt(t)),(0,$e.x)([n,"optionalAccess",e=>e.startsWith,"call",e=>e("///")])&&(n=n.slice(2)),`${o} ${n}`}function Ht(e){const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}function Et(e){const t=e.protocol||"",a=e.hostname||e.host||"";return{protocol:t,hostname:a,port:!e.port||80===e.port||443===e.port||/^(.*):(\d+)$/.test(a)?"":`:${e.port}`}}class Tt{static __initStatic(){this.id="Http"}__init(){this.name=Tt.id}constructor(e={}){Tt.prototype.__init.call(this),this._breadcrumbs=void 0===e.breadcrumbs||e.breadcrumbs,this._tracing=e.tracing?!0===e.tracing?{}:e.tracing:void 0}setupOnce(e,t){if(!this._breadcrumbs&&!this._tracing)return;const o=(0,$e.x)([t,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(o&&"sentry"!==o.instrumenter)return void(Rt&&p.kg.log("HTTP Integration is skipped because of instrumenter configuration."));const n=(0,$e.x)([this,"access",e=>e._tracing,"optionalAccess",e=>e.shouldCreateSpanForRequest])||(0,$e.x)([o,"optionalAccess",e=>e.shouldCreateSpanForRequest]),i=(0,$e.x)([o,"optionalAccess",e=>e.tracePropagationTargets])||(0,$e.x)([this,"access",e=>e._tracing,"optionalAccess",e=>e.tracePropagationTargets]),r=a(3685),l=Xt(r,this._breadcrumbs,n,i);if((0,s.hl)(r,"get",l),(0,s.hl)(r,"request",l),ht.V.major>8){const e=a(5687),t=Xt(e,this._breadcrumbs,n,i);(0,s.hl)(e,"get",t),(0,s.hl)(e,"request",t)}}}function Xt(e,t,a,o){const n=new kt.f(100),i=new kt.f(100);function r(e,t,a,o){(0,Q.Gd)().getIntegration(Tt)&&(0,j.n_)({category:"http",data:{status_code:o&&o.statusCode,...t},type:"http"},{event:e,request:a,response:o})}return function(s){return function(...l){const c=function(e,t){let a,o;if("function"==typeof t[t.length-1]&&(a=t.pop()),"string"==typeof t[0])o=Ht(new je.URL(t[0]));else if(t[0]instanceof je.URL)o=Ht(t[0]);else{o=t[0];try{const e=new je.URL(o.path||"",`${o.protocol||"http:"}//${o.hostname}`);o={pathname:e.pathname,search:e.search,hash:e.hash,...o}}catch(e){}}return 2===t.length&&(o={...o,...t[1]}),void 0===o.protocol&&(ht.V.major>8?o.protocol=(0,$e.x)([(0,$e.x)([e,"optionalAccess",e=>e.globalAgent]),"optionalAccess",e=>e.protocol])||(0,$e.x)([o.agent,"optionalAccess",e=>e.protocol])||(0,$e.x)([o._defaultAgent,"optionalAccess",e=>e.protocol]):o.protocol=(0,$e.x)([o.agent,"optionalAccess",e=>e.protocol])||(0,$e.x)([o._defaultAgent,"optionalAccess",e=>e.protocol])||(0,$e.x)([(0,$e.x)([e,"optionalAccess",e=>e.globalAgent]),"optionalAccess",e=>e.protocol])),a?[o,a]:[o]}(e,l),d=c[0],u=function(e){const{protocol:t,hostname:a,port:o}=Et(e);return`${t}//${a}${o}${e.path?e.path:"/"}`}(d),g=xt(d);if((0,Wt.W)(g,(0,j.s3)()))return s.apply(e,c);const m=(0,j.nZ)(),b=(0,Re.HN)(),f=function(e,t){const a={url:e,"http.method":t.method||"GET"};return t.hash&&(a["http.fragment"]=t.hash.substring(1)),t.search&&(a["http.query"]=t.search.substring(1)),a}(g,d),I=(e=>{if(void 0===a)return!0;const t=n.get(e);if(void 0!==t)return t;const o=a(e);return n.set(e,o),o})(u)?(0,$e.x)([b,"optionalAccess",e=>e.startChild,"call",e=>e({op:"http.client",origin:"auto.http.node.http",description:`${f["http.method"]} ${f.url}`,data:f})]):void 0;if((e=>{if(void 0===o)return!0;const t=i.get(e);if(void 0!==t)return t;const a=(0,h.U0)(e,o);return i.set(e,a),a})(u))if(I){const e=(0,me.Hb)(I),t=(0,oe.j)(I);Yt(d,g,e,t)}else{const e=(0,j.s3)(),{traceId:t,sampled:a,dsc:o}=m.getPropagationContext(),n=(0,mt.$p)(t,void 0,a),i=o||(e?(0,oe._)(t,e,m):void 0);Yt(d,g,n,i)}else Rt&&p.kg.log(`[Tracing] Not adding sentry-trace header to outgoing request (${g}) due to mismatching tracePropagationTargets option.`);return s.apply(e,c).once("response",(function(e){t&&r("response",f,this,e),I&&(e.statusCode&&I.setHttpStatus(e.statusCode),I.updateName(Nt((0,me.XU)(I).description||"",d,this)||""),I.end())})).once("error",(function(){t&&r("error",f,this),I&&(I.setHttpStatus(500),I.updateName(Nt((0,me.XU)(I).description||"",d,this)||""),I.end())}))}}}function Yt(e,t,a,o){if((e.headers||{})["sentry-trace"])return;Rt&&p.kg.log(`[Tracing] Adding sentry-trace header ${a} to outgoing request to "${t}": `);const n=(0,Vt.IQ)(o),i=n&&n.length>0?function(e,t){return e.headers&&e.headers.baggage?t?Array.isArray(e.headers.baggage)?[...e.headers.baggage,t]:[e.headers.baggage,t]:e.headers.baggage:t}(e,n):void 0;e.headers={...e.headers,"sentry-trace":a,...i&&{baggage:i}}}Tt.__initStatic();function Ft(e){(0,p.Cf)((()=>{console.error(e)}));const t=(0,j.s3)();void 0===t&&(Rt&&p.kg.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));const a=t.getOptions(),o=a&&a.shutdownTimeout&&a.shutdownTimeout>0&&a.shutdownTimeout||2e3;t.close(o).then((e=>{e||Rt&&p.kg.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}),(e=>{Rt&&p.kg.error(e)}))}const Pt="OnUncaughtException",Ot=(0,l.RN)(Pt,((e={})=>{const t={exitEvenIfOtherHandlersAreRegistered:!0,...e};return{name:Pt,setupOnce(){},setup(e){global.process.on("uncaughtException",function(e,t){let a,o=!1,n=!1,i=!1;const r=e.getOptions();return Object.assign((s=>{let l=Ft;t.onFatalError?l=t.onFatalError:r.onFatalError&&(l=r.onFatalError);const c=0===global.process.listeners("uncaughtException").reduce(((e,t)=>"domainUncaughtExceptionClear"===t.name||t.tag&&"sentry_tracingErrorCallback"===t.tag||t._errorHandler?e:e+1),0),d=t.exitEvenIfOtherHandlersAreRegistered||c;o?d&&(i?(Rt&&p.kg.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),Ft(s)):n||(n=!0,setTimeout((()=>{i||(i=!0,l(a,s))}),2e3))):(a=s,o=!0,(0,j.s3)()===e&&(0,j.Tb)(s,{originalException:s,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"onuncaughtexception"}}),!i&&d&&(i=!0,l(s)))}),{_errorHandler:!0})}(e,t))}}})),zt="OnUnhandledRejection",Ut=(0,l.RN)(zt,((e={})=>{const t=e.mode||"warn";return{name:zt,setupOnce(){},setup(e){global.process.on("unhandledRejection",function(e,t){return function(a,o){(0,j.s3)()===e&&((0,j.Tb)(a,{originalException:o,captureContext:{extra:{unhandledPromiseRejection:!0}},mechanism:{handled:!1,type:"onunhandledrejection"}}),function(e,t){const a="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===t.mode?(0,p.Cf)((()=>{console.warn(a),console.error(e&&e.stack?e.stack:e)})):"strict"===t.mode&&((0,p.Cf)((()=>{console.warn(a)})),Ft(e))}(a,t))}}(e,{mode:t}))}}})),Jt=require("fs");var Kt=a(1017);let Lt;const Dt="Modules";function Mt(){const e=a.c[a.s]&&a.c[a.s].paths||[],t=function(){try{return a.c?Object.keys(a.c):[]}catch(e){return[]}}(),o={},n={};return t.forEach((t=>{let a=t;const i=()=>{const t=a;if(a=(0,Kt.dirname)(t),!a||t===a||n[t])return;if(e.indexOf(a)<0)return i();const r=(0,Kt.join)(t,"package.json");if(n[t]=!0,!(0,Jt.existsSync)(r))return i();try{const e=JSON.parse((0,Jt.readFileSync)(r,"utf8"));o[e.name]=e.version}catch(e){}};i()})),o}const jt=(0,l.RN)(Dt,(()=>({name:Dt,setupOnce(){},processEvent:e=>(e.modules={...e.modules,...(Lt||(Lt=Mt()),Lt)},e)}))),Qt=new kt.f(100),$t="ContextLines",qt=(0,l.RN)($t,((e={})=>{const t=void 0!==e.frameContextLines?e.frameContextLines:7;return{name:$t,setupOnce(){},processEvent:e=>async function(e,t){const a={},o=[];if(t>0&&(0,$e.x)([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const t of e.exception.values)if((0,$e.x)([t,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames]))for(let e=t.stacktrace.frames.length-1;e>=0;e--){const n=t.stacktrace.frames[e];!n.filename||a[n.filename]||Qt.get(n.filename)||(o.push(ta(n.filename)),a[n.filename]=1)}if(o.length>0&&await Promise.all(o),t>0&&(0,$e.x)([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const a of e.exception.values)a.stacktrace&&a.stacktrace.frames&&await ea(a.stacktrace.frames,t);return e}(e,t)}}));function ea(e,t){for(const a of e)if(a.filename&&void 0===a.context_line){const e=Qt.get(a.filename);if(e)try{(0,m.go)(e,a,t)}catch(e){}}}async function ta(e){const t=Qt.get(e);if(null===t)return null;if(void 0!==t)return t;let a=null;try{a=(await(o=e,new Promise(((e,t)=>{(0,Jt.readFile)(o,"utf8",((a,o)=>{a?t(a):e(o)}))})))).split("\n")}catch(e){}var o;return Qt.set(e,a),a}const aa=require("child_process"),oa=(0,Ye.promisify)(Jt.readFile),na=(0,Ye.promisify)(Jt.readdir),ia="Context",ra=(0,l.RN)(ia,((e={})=>{let t;const a={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...e};return{name:ia,setupOnce(){},processEvent:e=>async function(e){void 0===t&&(t=async function(){const e={};if(a.os&&(e.os=await async function(){const e=Xe.platform();switch(e){case"darwin":return async function(){const e={kernel_version:Xe.release(),name:"Mac OS X",version:"10."+(Number(Xe.release().split(".")[0])-4)};try{const t=await new Promise(((e,t)=>{(0,aa.execFile)("/usr/bin/sw_vers",((a,o)=>{a?t(a):e(o)}))}));e.name=da(/^ProductName:\s+(.*)$/m,t),e.version=da(/^ProductVersion:\s+(.*)$/m,t),e.build=da(/^BuildVersion:\s+(.*)$/m,t)}catch(e){}return e}();case"linux":return async function(){const e={kernel_version:Xe.release(),name:"Linux"};try{const t=await na("/etc"),a=la.find((e=>t.includes(e.name)));if(!a)return e;const o=(0,Kt.join)("/etc",a.name),n=(await oa(o,{encoding:"utf-8"})).toLowerCase(),{distros:i}=a;e.name=i.find((e=>n.indexOf(ua(e))>=0))||i[0];const r=ua(e.name);e.version=ca[r](n)}catch(e){}return e}();default:return{name:sa[e]||e,version:Xe.release()}}}()),a.app&&(e.app=function(){const e=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:e}}()),a.device&&(e.device=function(e){const t={};let a;try{a=Xe.uptime&&Xe.uptime()}catch(e){}if("number"==typeof a&&(t.boot_time=new Date(Date.now()-1e3*a).toISOString()),t.arch=Xe.arch(),(!0===e||e.memory)&&(t.memory_size=Xe.totalmem(),t.free_memory=Xe.freemem()),!0===e||e.cpu){const e=Xe.cpus();if(e&&e.length){const a=e[0];t.processor_count=e.length,t.cpu_description=a.model,t.processor_frequency=a.speed}}return t}(a.device)),a.culture){const t=function(){try{if("string"!=typeof process.versions.icu)return;const e=new Date(9e8);if("enero"===new Intl.DateTimeFormat("es",{month:"long"}).format(e)){const e=Intl.DateTimeFormat().resolvedOptions();return{locale:e.locale,timezone:e.timeZone}}}catch(e){}}();t&&(e.culture=t)}return a.cloudResource&&(e.cloud_resource=process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0),e}());const o=(n=await t,(0,$e.x)([n,"optionalAccess",e=>e.app,"optionalAccess",e=>e.app_memory])&&(n.app.app_memory=process.memoryUsage().rss),(0,$e.x)([n,"optionalAccess",e=>e.device,"optionalAccess",e=>e.free_memory])&&(n.device.free_memory=Xe.freemem()),n);var n;return e.contexts={...e.contexts,app:{...o.app,...(0,$e.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.app])},os:{...o.os,...(0,$e.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.os])},device:{...o.device,...(0,$e.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.device])},culture:{...o.culture,...(0,$e.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.culture])},cloud_resource:{...o.cloud_resource,...(0,$e.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.cloud_resource])}},e}(e)}})),sa={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},la=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],ca={alpine:e=>e,arch:e=>da(/distrib_release=(.*)/,e),centos:e=>da(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>da(/release (..)/,e),mint:e=>da(/distrib_release=(.*)/,e),red:e=>da(/release ([^ ]+)/,e),suse:e=>da(/VERSION = (.*)\n/,e),ubuntu:e=>da(/distrib_release=(.*)/,e)};function da(e,t){const a=e.exec(t);return a?a[1]:void 0}function ua(e){return e.split(" ")[0].toLowerCase()}function ga(e){return void 0!==e&&(0===e.length||"?"===e||"<anonymous>"===e)}function pa(e){if(void 0!==e)return e.slice(-10).reduce(((e,t)=>`${e},${t.function},${t.lineno},${t.colno}`),"")}function ma(e){let t=[],a=!1;function o(o){t=[],a||(a=!0,e(o))}return t.push(o),{add:function(e){t.push(e)},next:function(e){const a=t.pop()||o;try{a(e)}catch(t){o(e)}}}}class ha{constructor(){const{Session:e}=a(1405);this._session=new e}configureAndConnect(e,t){this._session.connect(),this._session.on("Debugger.paused",(t=>{e(t,(()=>{this._session.post("Debugger.resume")}))})),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}setPauseOnExceptions(e){this._session.post("Debugger.setPauseOnExceptions",{state:e?"all":"uncaught"})}getLocalVariables(e,t){this._getProperties(e,(e=>{const{add:a,next:o}=ma(t);for(const t of e)if((0,$e.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Array"===(0,$e.x)([t,"optionalAccess",e=>e.value,"access",e=>e.className])){const e=t.value.objectId;a((a=>this._unrollArray(e,t.name,a,o)))}else if((0,$e.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Object"===(0,$e.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.className])){const e=t.value.objectId;a((a=>this._unrollObject(e,t.name,a,o)))}else((0,$e.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])||(0,$e.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.description]))&&a((e=>this._unrollOther(t,e,o)));o({})}))}_getProperties(e,t){this._session.post("Runtime.getProperties",{objectId:e,ownProperties:!0},((e,a)=>{t(e?[]:a.result)}))}_unrollArray(e,t,a,o){this._getProperties(e,(e=>{a[t]=e.filter((e=>"length"!==e.name&&!isNaN(parseInt(e.name,10)))).sort(((e,t)=>parseInt(e.name,10)-parseInt(t.name,10))).map((e=>(0,$e.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value]))),o(a)}))}_unrollObject(e,t,a,o){this._getProperties(e,(e=>{a[t]=e.map((e=>[e.name,(0,$e.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])])).reduce(((e,[t,a])=>(e[t]=a,e)),{}),o(a)}))}_unrollOther(e,t,a){(0,$e.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])?t[e.name]=e.value.value:(0,$e.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.description])&&"function"!==(0,$e.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.type])&&(t[e.name]=`<${e.value.description}>`),a(t)}}const ba="LocalVariables",fa=(0,l.RN)(ba,((e={},t=function(){try{return new ha}catch(e){return}}())=>{const a=new kt.f(20);let o,n=!1;function i(e){const t=pa((0,$e.x)([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames]));if(void 0===t)return;const o=a.remove(t);if(void 0===o)return;const n=(0,$e.x)([e,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e.length])||0;for(let t=0;t<n;t++){const a=n-t-1;if(!(0,$e.x)([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e[a]])||!o[t])break;void 0!==o[t].vars&&!1!==e.stacktrace.frames[a].in_app&&((i=e.stacktrace.frames[a].function)===(r=o[t].function)||ga(i)&&ga(r))&&(e.stacktrace.frames[a].vars=o[t].vars)}var i,r}return{name:ba,setupOnce(){const i=(0,j.s3)(),r=(0,$e.x)([i,"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(t&&(0,$e.x)([r,"optionalAccess",e=>e.includeLocalVariables])){if(ht.V.major<18)return void p.kg.log("The `LocalVariables` integration is only supported on Node >= v18.");const i=!1!==e.captureAllExceptions;if(t.configureAndConnect(((e,n)=>function(e,{params:{reason:n,data:i,callFrames:r}},s){if("exception"!==n&&"promiseRejection"!==n)return void s();(0,$e.x)([o,"optionalCall",e=>e()]);const l=function(e,t){if(void 0!==t)return pa(e(t,1))}(e,(0,$e.x)([i,"optionalAccess",e=>e.description]));if(null==l)return void s();const{add:c,next:d}=ma((e=>{a.set(l,e),s()}));for(let e=0;e<Math.min(r.length,5);e++){const{scopeChain:a,functionName:o,this:n}=r[e],i=a.find((e=>"local"===e.type)),s="global"!==n.className&&n.className?`${n.className}.${o}`:o;if(void 0===(0,$e.x)([i,"optionalAccess",e=>e.object,"access",e=>e.objectId]))c((t=>{t[e]={function:s},d(t)}));else{const a=i.object.objectId;c((o=>(0,$e.x)([t,"optionalAccess",e=>e.getLocalVariables,"call",t=>t(a,(t=>{o[e]={function:s,vars:t},d(o)}))])))}}d([])}(r.stackParser,e,n)),i),i){const a=e.maxExceptionsPerSecond||50;o=function(e,a,o){let n=0,i=5,r=0;return setInterval((()=>{var a;0===r?n>e&&(i*=2,a=i,p.kg.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${a} seconds.`),(0,$e.x)([t,"optionalAccess",e=>e.setPauseOnExceptions,"call",e=>e(!1)]),i>86400&&(i=86400),r=i):(r-=1,0===r&&(p.kg.log("Local variables rate-limit lifted."),(0,$e.x)([t,"optionalAccess",e=>e.setPauseOnExceptions,"call",e=>e(!0)]))),n=0}),1e3).unref(),()=>{n+=1}}(a)}n=!0}},processEvent:e=>n?function(e){for(const t of(0,$e.x)([e,"optionalAccess",e=>e.exception,"optionalAccess",e=>e.values])||[])i(t);return e}(e):e,_getCachedFramesCount:()=>a.size,_getFirstCachedFrame:()=>a.values()[0]}})),Ia=fa;var _a=a(1249);const ya="Spotlight",va=(0,l.RN)(ya,((e={})=>{const t={sidecarUrl:e.sidecarUrl||"http://localhost:8969/stream"};return{name:ya,setupOnce(){},setup(e){"object"==typeof process&&process.env&&p.kg.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?"),function(e,t){const a=function(e){try{return new je.URL(`${e}`)}catch(t){return void p.kg.warn(`[Spotlight] Invalid sidecar URL: ${e}`)}}(t.sidecarUrl);if(!a)return;let o=0;"function"==typeof e.on?e.on("beforeEnvelope",(e=>{if(o>3)return void p.kg.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");const t=U(e),n=Le.request({method:"POST",path:a.pathname,hostname:a.hostname,port:a.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(e=>{e.on("data",(()=>{})),e.on("end",(()=>{})),e.setEncoding("utf8")}));n.on("error",(()=>{o++,p.kg.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")})),n.write(t),n.end()})):p.kg.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)")}(e,t)}}})),Ca=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Aa(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function wa(e=(process.argv[1]?function(e){const t=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,a=Ca.exec(t);return a?a.slice(1):[]}(process.argv[1]),a=t[0];let o=t[1];return a||o?(o&&(o=o.slice(0,o.length-1)),a+o):"."}():process.cwd()),t="\\"===Kt.sep){const a=t?Aa(e):e;return e=>{if(!e)return;const o=t?Aa(e):e;let{dir:n,base:i,ext:r}=Kt.posix.parse(o);".js"!==r&&".mjs"!==r&&".cjs"!==r||(i=i.slice(0,-1*r.length)),n||(n=".");const s=n.lastIndexOf("/node_modules");if(s>-1)return`${n.slice(s+14).replace(/\//g,".")}:${i}`;if(n.startsWith(a)){let e=n.slice(a.length+1).replace(/\//g,".");return e&&(e+=":"),e+=i,e}return i}}const Sa=[new v,new g,new x,new Bt,new Tt,new _a.Y,new Ot,new Ut,new qt,new Ia,new ra,new jt,new Ze];function Ga(e){const t=(0,Q.cu)(),a=(0,$e.x)([t,"access",e=>e.__SENTRY__,"optionalAccess",e=>e.integrations])||[];return[...Sa,...a]}function Za(e={}){Ct(),void 0===e.defaultIntegrations&&(e.defaultIntegrations=Ga()),void 0===e.dsn&&process.env.SENTRY_DSN&&(e.dsn=process.env.SENTRY_DSN);const t=process.env.SENTRY_TRACES_SAMPLE_RATE;if(void 0===e.tracesSampleRate&&t){const a=parseFloat(t);isFinite(a)&&(e.tracesSampleRate=a)}if(void 0===e.release){const t=Wa();void 0!==t?e.release=t:e.autoSessionTracking=!1}void 0===e.environment&&process.env.SENTRY_ENVIRONMENT&&(e.environment=process.env.SENTRY_ENVIRONMENT),void 0===e.autoSessionTracking&&void 0!==e.dsn&&(e.autoSessionTracking=!0),void 0===e.instrumenter&&(e.instrumenter="sentry");const a={...e,stackParser:(0,gt.Sq)(e.stackParser||ka),integrations:(0,l.m8)(e),transport:e.transport||ut};if(function(e,t){!0===t.debug&&(b.X?p.kg.enable():(0,p.Cf)((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),(0,j.nZ)().update(t.initialScope);const a=new e(t);Be(a),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(a)}(e.clientClass||Je,a),e.autoSessionTracking&&((0,j.yj)(),process.on("beforeExit",(()=>{const e=(0,Q.aF)().getSession();e&&!["exited","crashed"].includes(e.status)&&(0,j.TM)()}))),function(){const e=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(e)){const e=process.env.SENTRY_TRACE,t=process.env.SENTRY_BAGGAGE,{propagationContext:a}=(0,mt.KA)(e,t);(0,j.nZ)().setPropagationContext(a)}}(),e.spotlight){const t=(0,j.s3)();if(t&&t.addIntegration){const a=t.getOptions().integrations;for(const e of a)t.addIntegration(e);t.addIntegration(new va({sidecarUrl:"string"==typeof e.spotlight?e.spotlight:void 0}))}}}function Ba(e){if(void 0===e)return!1;const t=e&&e.getOptions();return!(!t||void 0===t.autoSessionTracking)&&t.autoSessionTracking}function Wa(e){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:pt.GLOBAL_OBJ.SENTRY_RELEASE&&pt.GLOBAL_OBJ.SENTRY_RELEASE.id?pt.GLOBAL_OBJ.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||process.env.CF_PAGES_COMMIT_SHA||e}const ka=(0,gt.pE)((0,gt.Ep)(wa()));function Va(e){const t=Kt.resolve(e);if(!Jt.existsSync(t))throw new Error(`Cannot read contents of ${t}. Directory does not exist.`);if(!Jt.statSync(t).isDirectory())throw new Error(`Cannot read contents of ${t}, because it is not a directory.`);const a=e=>Jt.readdirSync(e).reduce(((t,o)=>{const n=Kt.join(e,o);return Jt.statSync(n).isDirectory()?t.concat(a(n)):(t.push(n),t)}),[]);return a(t).map((e=>Kt.relative(t,e)))}var Ra=a(6751);function xa(e){const t=(0,j.s3)();return new Ra.q(e).setup(t),Promise.resolve()}var Na=a(7522),Ha=a(6754);function Ea(e,t){return(0,Ae.XQ)(e,{include:t})}function Ta(e,t,a={}){return(0,Ae.S6)(e,t,{include:a})}function Xa(){return function(e,t,a){const o=(0,$e.x)([j.s3,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(!o||"sentry"!==o.instrumenter||"OPTIONS"===(0,$e.x)([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()])||"HEAD"===(0,$e.x)([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()]))return a();const n=e.headers&&(0,A.HD)(e.headers["sentry-trace"])?e.headers["sentry-trace"]:void 0,i=(0,$e.x)([e,"access",e=>e.headers,"optionalAccess",e=>e.baggage]);if(!(0,Na.z)(o))return a();const[r,s]=(0,Ae.oA)(e,{path:!0,method:!0}),l=(0,Re.yn)({sentryTrace:n,baggage:i},(t=>(0,j.Yr)({name:r,op:"http.server",origin:"auto.http.node.tracingHandler",...t,data:{[Ha.Zj]:s},metadata:{...t.metadata,request:e}},{request:(0,Ae.XQ)(e)})));(0,j.nZ)().setSpan(l),t.__sentry_transaction=l,t.once("finish",(()=>{setImmediate((()=>{(0,Ae.dB)(l,e),l.setHttpStatus(t.statusCode),l.end()}))})),a()}}function Ya(e){const t=function(e={}){let t;if("include"in e)t={include:e.include};else{const{ip:a,request:o,transaction:n,user:i}=e;(a||o||n||i)&&(t={include:(0,s.Jr)({ip:a,request:o,transaction:n,user:i})})}return t}(e),a=(0,j.s3)();if(a&&Ba(a)){a.initSessionFlusher();const e=(0,j.nZ)();e.getSession()&&e.setSession()}return function(a,o,n){if(e&&e.flushTimeout&&e.flushTimeout>0){const t=o.end;o.end=function(a,o,n){(0,j.yl)(e.flushTimeout).then((()=>{t.call(this,a,o,n)})).then(null,(e=>{Rt&&p.kg.error(e),t.call(this,a,o,n)}))}}(0,Q.Ok)((()=>{const e=(0,j.nZ)();e.setSDKProcessingMetadata({request:a,requestDataOptionsFromExpressHandler:t}),Ba((0,j.s3)())&&e.setRequestSession({status:"ok"}),o.once("finish",(()=>{const e=(0,j.s3)();Ba(e)&&setImmediate((()=>{e&&e._captureRequestSession&&e._captureRequestSession()}))})),n()}))}}function Fa(e){const t=function(e){const t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}(e);return t>=500}function Pa(e){return function(t,a,o,n){(e&&e.shouldHandleError||Fa)(t)?(0,j.$e)((e=>{e.setSDKProcessingMetadata({request:a});const i=o.__sentry_transaction;i&&!(0,Re.HN)()&&e.setSpan(i);const r=(0,j.s3)();if(r&&Ba(r)&&void 0!==r._sessionFlusher){const t=e.getRequestSession();t&&void 0!==t.status&&(t.status="crashed")}const s=(0,j.Tb)(t,{mechanism:{type:"middleware",handled:!1}});o.sentry=s,n(t)})):n(t)}}function Oa(e={}){return function({path:t,type:a,next:o,rawInput:n}){const i=(0,$e.x)([j.s3,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]),r=(0,j.nZ)().getTransaction();if(r){r.updateName(`trpc/${t}`),r.setAttribute(Ha.Zj,"route"),r.op="rpc.server";const o={procedure_type:a};(void 0!==e.attachRpcInput?e.attachRpcInput:(0,$e.x)([i,"optionalAccess",e=>e.sendDefaultPii]))&&(o.input=(0,B.Fv)(n)),r.setContext("trpc",o)}function s(e){e.ok||(0,j.Tb)(e.error,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}})}let l;try{l=o()}catch(e){throw(0,j.Tb)(e,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}}),e}return(0,A.J8)(l)?Promise.resolve(l).then((e=>{s(e)}),(e=>{(0,j.Tb)(e,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}})})):s(l),l}}function za(e){return e&&void 0!==e.statusCode}function Ua(e){(0,j.Tb)(e,{mechanism:{type:"hapi",handled:!1,data:{function:"hapiErrorPlugin"}}})}const Ja={name:"SentryHapiErrorPlugin",version:We.J,register:async function(e){e.events.on("request",((e,t)=>{const a=(0,xe.x1)();var o;e.response&&(o=e.response)&&void 0!==o.isBoom?Ua(e.response):function(e){return e&&void 0!==e.error}(t)&&Ua(t.error),a&&(a.setStatus("internal_error"),a.end())}))}},Ka={name:"SentryHapiTracingPlugin",version:We.J,register:async function(e){const t=e;t.ext("onPreHandler",((e,t)=>{const a=(0,Re.yn)({sentryTrace:e.headers["sentry-trace"]||void 0,baggage:e.headers.baggage||void 0},(t=>(0,j.Yr)({...t,op:"hapi.request",name:e.route.path,description:`${e.route.method} ${e.path}`})));return(0,j.nZ)().setSpan(a),t.continue})),t.ext("onPreResponse",((e,t)=>{const a=(0,xe.x1)();if(e.response&&za(e.response)&&a){const t=e.response;t.header("sentry-trace",(0,me.Hb)(a));const o=(0,Vt.IQ)((0,oe.j)(a));o&&t.header("baggage",o)}return t.continue})),t.ext("onPostHandler",((e,t)=>{const a=(0,xe.x1)();return e.response&&za(e.response)&&a&&a.setHttpStatus(e.response.statusCode),a&&a.end(),t.continue}))}},La="Hapi",Da=(0,l.RN)(La,((e={})=>{const t=e.server;return{name:La,setupOnce(){t&&(0,s.hl)(t,"start",(e=>async function(){return await this.register(Ka),await this.register(Ja),e.apply(this)}))}}}));var Ma=a(2716),ja=a(8737),Qa=a(1791),$a=a(6169),qa=a(24),eo=a(1370),to=a(9889);const ao=[["january","1"],["february","2"],["march","3"],["april","4"],["may","5"],["june","6"],["july","7"],["august","8"],["september","9"],["october","10"],["november","11"],["december","12"],["jan","1"],["feb","2"],["mar","3"],["apr","4"],["may","5"],["jun","6"],["jul","7"],["aug","8"],["sep","9"],["oct","10"],["nov","11"],["dec","12"],["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]];function oo(e){return ao.reduce(((e,[t,a])=>e.replace(new RegExp(t,"gi"),a)),e)}const no="Automatic instrumentation of CronJob only supports crontab string",io=wa(),ro={...N,...i,...r},so={instrumentCron:function(e,t){let a=!1;return new Proxy(e,{construct(e,o){const[n,i,r,s,l,...c]=o;if("string"!=typeof n)throw new Error(no);if(a)throw new Error(`A job named '${t}' has already been scheduled`);a=!0;const d=oo(n);return new e(n,(function(e,a){return(0,j.sV)(t,(()=>i(e,a)),{schedule:{type:"crontab",value:d},...l?{timeZone:l}:{}})}),r,s,l,...c)},get:(e,o)=>"from"===o?o=>{const{cronTime:n,onTick:i,timeZone:r}=o;if("string"!=typeof n)throw new Error(no);if(a)throw new Error(`A job named '${t}' has already been scheduled`);a=!0;const s=oo(n);return o.onTick=(e,a)=>(0,j.sV)(t,(()=>i(e,a)),{schedule:{type:"crontab",value:s},...r?{timeZone:r}:{}}),e.from(o)}:e[o]})},instrumentNodeCron:function(e){return new Proxy(e,{get:(e,t)=>"schedule"===t&&e.schedule?new Proxy(e.schedule,{apply(e,t,a){const[o,,n]=a;if(!(0,$e.x)([n,"optionalAccess",e=>e.name]))throw new Error('Missing "name" for scheduled job. A name is required for Sentry check-in monitoring.');return(0,j.sV)(n.name,(()=>e.apply(t,a)),{schedule:{type:"crontab",value:oo(o)},timezone:(0,$e.x)([n,"optionalAccess",e=>e.timezone])})}}):e[t]})},instrumentNodeSchedule:function(e){return new Proxy(e,{get:(e,t)=>"scheduleJob"===t?new Proxy(e.scheduleJob,{apply(e,t,a){const[o,n]=a;if("string"!=typeof o||"string"!=typeof n)throw new Error("Automatic instrumentation of 'node-schedule' requires the first parameter of 'scheduleJob' to be a job name string and the second parameter to be a crontab string");const i=o,r=n;return(0,j.sV)(i,(()=>e.apply(t,a)),{schedule:{type:"crontab",value:oo(r)}})}}):e[t]})}}},6751:(e,t,a)=>{"use strict";a.d(t,{q:()=>g});var o=a(4307);function n(e){const t=(0,o.x)(e);return null==t||t}var i=a(7310),r=a(2967),s=a(4487),l=a(2343),c=a(2176),d=a(9656);function u(e,...t){l.kg.log(`[ANR] ${e}`,...t)}e=a.hmd(e);const g=(0,r.RN)("Anr",((t={})=>({name:"Anr",setupOnce(){},setup(r){if(d.V.major<16||16===d.V.major&&d.V.minor<17)throw new Error("ANR detection requires Node 16.17.0 or later");setImmediate((()=>async function(t,r){const d=await async function(e){let t={message:"ANR"};const a={};for(const o of e.getEventProcessors()){if(null===t)break;t=await o(t,a)}return(0,o.x)([t,"optionalAccess",e=>e.contexts])||{}}(t),g=t.getDsn();if(!g)return;n([d,"access",e=>e.app,"optionalAccess",e=>delete e.app_memory]),n([d,"access",e=>e.device,"optionalAccess",e=>delete e.free_memory]);const p=t.getOptions(),m=t.getSdkMetadata()||{};m.sdk&&(m.sdk.integrations=p.integrations.map((e=>e.name)));const h={debug:l.kg.isEnabled(),dsn:g,environment:p.environment||"production",release:p.release,dist:p.dist,sdkMetadata:m,appRootPath:r.appRootPath,pollInterval:r.pollInterval||50,anrThreshold:r.anrThreshold||5e3,captureStackTrace:!!r.captureStackTrace,staticTags:r.staticTags||{},contexts:d};if(h.captureStackTrace){const e=a(1405);e.url()||e.open(0)}const{Worker:b}=(0,c.l$)(e,"worker_threads"),f=new b(new i.URL("data:application/javascript;base64,aW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gJ2luc3BlY3Rvcic7CmltcG9ydCB7IHdvcmtlckRhdGEsIHBhcmVudFBvcnQgfSBmcm9tICd3b3JrZXJfdGhyZWFkcyc7CmltcG9ydCB7IHBvc2l4LCBzZXAgfSBmcm9tICdwYXRoJzsKaW1wb3J0ICogYXMgaHR0cCBmcm9tICdodHRwJzsKaW1wb3J0ICogYXMgaHR0cHMgZnJvbSAnaHR0cHMnOwppbXBvcnQgeyBSZWFkYWJsZSB9IGZyb20gJ3N0cmVhbSc7CmltcG9ydCB7IFVSTCB9IGZyb20gJ3VybCc7CmltcG9ydCB7IGNyZWF0ZUd6aXAgfSBmcm9tICd6bGliJzsKaW1wb3J0IGFzc2VydCBmcm9tICdhc3NlcnQnOwppbXBvcnQgKiBhcyBuZXQgZnJvbSAnbmV0JzsKaW1wb3J0ICogYXMgdGxzIGZyb20gJ3Rscyc7CgovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kCmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgb25lIG9mIGEgZmV3IEVycm9yIG9yIEVycm9yLWxpa2UKICoge0BsaW5rIGlzRXJyb3J9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNFcnJvcih3YXQpIHsKICBzd2l0Y2ggKG9iamVjdFRvU3RyaW5nLmNhbGwod2F0KSkgewogICAgY2FzZSAnW29iamVjdCBFcnJvcl0nOgogICAgY2FzZSAnW29iamVjdCBFeGNlcHRpb25dJzoKICAgIGNhc2UgJ1tvYmplY3QgRE9NRXhjZXB0aW9uXSc6CiAgICAgIHJldHVybiB0cnVlOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGlzSW5zdGFuY2VPZih3YXQsIEVycm9yKTsKICB9Cn0KLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIHRoZSBnaXZlbiBidWlsdC1pbiBjbGFzcy4KICoKICogQHBhcmFtIHdhdCBUaGUgdmFsdWUgdG8gYmUgY2hlY2tlZAogKiBAcGFyYW0gY2xhc3NOYW1lCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzQnVpbHRpbih3YXQsIGNsYXNzTmFtZSkgewogIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHdhdCkgPT09IGBbb2JqZWN0ICR7Y2xhc3NOYW1lfV1gOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGEgc3RyaW5nCiAqIHtAbGluayBpc1N0cmluZ30uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1N0cmluZyh3YXQpIHsKICByZXR1cm4gaXNCdWlsdGluKHdhdCwgJ1N0cmluZycpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIG9iamVjdCBsaXRlcmFsLCBvciBhIGNsYXNzIGluc3RhbmNlLgogKiB7QGxpbmsgaXNQbGFpbk9iamVjdH0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHdhdCkgewogIHJldHVybiBpc0J1aWx0aW4od2F0LCAnT2JqZWN0Jyk7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gRXZlbnQgaW5zdGFuY2UKICoge0BsaW5rIGlzRXZlbnR9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNFdmVudCh3YXQpIHsKICByZXR1cm4gdHlwZW9mIEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2Yod2F0LCBFdmVudCk7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gRWxlbWVudCBpbnN0YW5jZQogKiB7QGxpbmsgaXNFbGVtZW50fS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRWxlbWVudCh3YXQpIHsKICByZXR1cm4gdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGlzSW5zdGFuY2VPZih3YXQsIEVsZW1lbnQpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUgaGFzIGEgdGhlbiBmdW5jdGlvbi4KICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqLwpmdW5jdGlvbiBpc1RoZW5hYmxlKHdhdCkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MKICByZXR1cm4gQm9vbGVhbih3YXQgJiYgd2F0LnRoZW4gJiYgdHlwZW9mIHdhdC50aGVuID09PSAnZnVuY3Rpb24nKTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIFN5bnRoZXRpY0V2ZW50CiAqIHtAbGluayBpc1N5bnRoZXRpY0V2ZW50fS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzU3ludGhldGljRXZlbnQod2F0KSB7CiAgcmV0dXJuIGlzUGxhaW5PYmplY3Qod2F0KSAmJiAnbmF0aXZlRXZlbnQnIGluIHdhdCAmJiAncHJldmVudERlZmF1bHQnIGluIHdhdCAmJiAnc3RvcFByb3BhZ2F0aW9uJyBpbiB3YXQ7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBOYU4KICoge0BsaW5rIGlzTmFOfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzTmFOJDEod2F0KSB7CiAgcmV0dXJuIHR5cGVvZiB3YXQgPT09ICdudW1iZXInICYmIHdhdCAhPT0gd2F0Owp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIGluc3RhbmNlIG9mIHByb3ZpZGVkIGNvbnN0cnVjdG9yLgogKiB7QGxpbmsgaXNJbnN0YW5jZU9mfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEBwYXJhbSBiYXNlIEEgY29uc3RydWN0b3IgdG8gYmUgdXNlZCBpbiBhIGNoZWNrLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0luc3RhbmNlT2Yod2F0LCBiYXNlKSB7CiAgdHJ5IHsKICAgIHJldHVybiB3YXQgaW5zdGFuY2VvZiBiYXNlOwogIH0gY2F0Y2ggKF9lKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGEgVnVlIFZpZXdNb2RlbC4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzVnVlVmlld01vZGVsKHdhdCkgewogIC8vIE5vdCB1c2luZyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIGJlY2F1c2UgaW4gVnVlIDMgaXQgd291bGQgcmVhZCB0aGUgaW5zdGFuY2UncyBTeW1ib2woU3ltYm9sLnRvU3RyaW5nVGFnKSBwcm9wZXJ0eS4KICByZXR1cm4gISEodHlwZW9mIHdhdCA9PT0gJ29iamVjdCcgJiYgd2F0ICE9PSBudWxsICYmICgod2F0ICkuX19pc1Z1ZSB8fCAod2F0ICkuX2lzVnVlKSk7Cn0KCi8qKiBJbnRlcm5hbCBnbG9iYWwgd2l0aCBjb21tb24gcHJvcGVydGllcyBhbmQgU2VudHJ5IGV4dGVuc2lvbnMgICovCgovLyBUaGUgY29kZSBiZWxvdyBmb3IgJ2lzR2xvYmFsT2JqJyBhbmQgJ0dMT0JBTF9PQkonIHdhcyBjb3BpZWQgZnJvbSBjb3JlLWpzIGJlZm9yZSBtb2RpZmljYXRpb24KLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvYmxvYi8xYjk0NGRmNTUyODJjZGM5OWM5MGRiNWY0OWViMGI2ZWRhMmNjMGEzL3BhY2thZ2VzL2NvcmUtanMvaW50ZXJuYWxzL2dsb2JhbC5qcwovLyBjb3JlLWpzIGhhcyB0aGUgZm9sbG93aW5nIGxpY2VuY2U6Ci8vCi8vIENvcHlyaWdodCAoYykgMjAxNC0yMDIyIERlbmlzIFB1c2hrYXJldgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5Ci8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAovLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAovLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgovLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLAovLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCi8vIFRIRSBTT0ZUV0FSRS4KCi8qKiBSZXR1cm5zICdvYmonIGlmIGl0J3MgdGhlIGdsb2JhbCBvYmplY3QsIG90aGVyd2lzZSByZXR1cm5zIHVuZGVmaW5lZCAqLwpmdW5jdGlvbiBpc0dsb2JhbE9iaihvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5NYXRoID09IE1hdGggPyBvYmogOiB1bmRlZmluZWQ7Cn0KCi8qKiBHZXQncyB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgdGhlIGN1cnJlbnQgSmF2YVNjcmlwdCBydW50aW1lICovCmNvbnN0IEdMT0JBTF9PQkogPQogICh0eXBlb2YgZ2xvYmFsVGhpcyA9PSAnb2JqZWN0JyAmJiBpc0dsb2JhbE9iaihnbG9iYWxUaGlzKSkgfHwKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCiAgKHR5cGVvZiB3aW5kb3cgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmood2luZG93KSkgfHwKICAodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmooc2VsZikpIHx8CiAgKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmooZ2xvYmFsKSkgfHwKICAoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfSkoKSB8fAogIHt9OwoKLyoqCiAqIEBkZXByZWNhdGVkIFVzZSBHTE9CQUxfT0JKIGluc3RlYWQgb3IgV0lORE9XIGZyb20gQHNlbnRyeS9icm93c2VyLiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OAogKi8KZnVuY3Rpb24gZ2V0R2xvYmFsT2JqZWN0KCkgewogIHJldHVybiBHTE9CQUxfT0JKIDsKfQoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCmNvbnN0IFdJTkRPVyA9IGdldEdsb2JhbE9iamVjdCgpOwoKY29uc3QgREVGQVVMVF9NQVhfU1RSSU5HX0xFTkdUSCA9IDgwOwoKLyoqCiAqIEdpdmVuIGEgY2hpbGQgRE9NIGVsZW1lbnQsIHJldHVybnMgYSBxdWVyeS1zZWxlY3RvciBzdGF0ZW1lbnQgZGVzY3JpYmluZyB0aGF0CiAqIGFuZCBpdHMgYW5jZXN0b3JzCiAqIGUuZy4gW0hUTUxFbGVtZW50XSA9PiBib2R5ID4gZGl2ID4gaW5wdXQjZm9vLmJ0bltuYW1lPWJhel0KICogQHJldHVybnMgZ2VuZXJhdGVkIERPTSBwYXRoCiAqLwpmdW5jdGlvbiBodG1sVHJlZUFzU3RyaW5nKAogIGVsZW0sCiAgb3B0aW9ucyA9IHt9LAopIHsKICBpZiAoIWVsZW0pIHsKICAgIHJldHVybiAnPHVua25vd24+JzsKICB9CgogIC8vIHRyeS9jYXRjaCBib3RoOgogIC8vIC0gYWNjZXNzaW5nIGV2ZW50LnRhcmdldCAoc2VlIGdldHNlbnRyeS9yYXZlbi1qcyM4MzgsICM3NjgpCiAgLy8gLSBgaHRtbFRyZWVBc1N0cmluZ2AgYmVjYXVzZSBpdCdzIGNvbXBsZXgsIGFuZCBqdXN0IGFjY2Vzc2luZyB0aGUgRE9NIGluY29ycmVjdGx5CiAgLy8gLSBjYW4gdGhyb3cgYW4gZXhjZXB0aW9uIGluIHNvbWUgY2lyY3Vtc3RhbmNlcy4KICB0cnkgewogICAgbGV0IGN1cnJlbnRFbGVtID0gZWxlbSA7CiAgICBjb25zdCBNQVhfVFJBVkVSU0VfSEVJR0hUID0gNTsKICAgIGNvbnN0IG91dCA9IFtdOwogICAgbGV0IGhlaWdodCA9IDA7CiAgICBsZXQgbGVuID0gMDsKICAgIGNvbnN0IHNlcGFyYXRvciA9ICcgPiAnOwogICAgY29uc3Qgc2VwTGVuZ3RoID0gc2VwYXJhdG9yLmxlbmd0aDsKICAgIGxldCBuZXh0U3RyOwogICAgY29uc3Qga2V5QXR0cnMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpID8gb3B0aW9ucyA6IG9wdGlvbnMua2V5QXR0cnM7CiAgICBjb25zdCBtYXhTdHJpbmdMZW5ndGggPSAoIUFycmF5LmlzQXJyYXkob3B0aW9ucykgJiYgb3B0aW9ucy5tYXhTdHJpbmdMZW5ndGgpIHx8IERFRkFVTFRfTUFYX1NUUklOR19MRU5HVEg7CgogICAgd2hpbGUgKGN1cnJlbnRFbGVtICYmIGhlaWdodCsrIDwgTUFYX1RSQVZFUlNFX0hFSUdIVCkgewogICAgICBuZXh0U3RyID0gX2h0bWxFbGVtZW50QXNTdHJpbmcoY3VycmVudEVsZW0sIGtleUF0dHJzKTsKICAgICAgLy8gYmFpbCBvdXQgaWYKICAgICAgLy8gLSBuZXh0U3RyIGlzIHRoZSAnaHRtbCcgZWxlbWVudAogICAgICAvLyAtIHRoZSBsZW5ndGggb2YgdGhlIHN0cmluZyB0aGF0IHdvdWxkIGJlIGNyZWF0ZWQgZXhjZWVkcyBtYXhTdHJpbmdMZW5ndGgKICAgICAgLy8gICAoaWdub3JlIHRoaXMgbGltaXQgaWYgd2UgYXJlIG9uIHRoZSBmaXJzdCBpdGVyYXRpb24pCiAgICAgIGlmIChuZXh0U3RyID09PSAnaHRtbCcgfHwgKGhlaWdodCA+IDEgJiYgbGVuICsgb3V0Lmxlbmd0aCAqIHNlcExlbmd0aCArIG5leHRTdHIubGVuZ3RoID49IG1heFN0cmluZ0xlbmd0aCkpIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgb3V0LnB1c2gobmV4dFN0cik7CgogICAgICBsZW4gKz0gbmV4dFN0ci5sZW5ndGg7CiAgICAgIGN1cnJlbnRFbGVtID0gY3VycmVudEVsZW0ucGFyZW50Tm9kZTsKICAgIH0KCiAgICByZXR1cm4gb3V0LnJldmVyc2UoKS5qb2luKHNlcGFyYXRvcik7CiAgfSBjYXRjaCAoX29PKSB7CiAgICByZXR1cm4gJzx1bmtub3duPic7CiAgfQp9CgovKioKICogUmV0dXJucyBhIHNpbXBsZSwgcXVlcnktc2VsZWN0b3IgcmVwcmVzZW50YXRpb24gb2YgYSBET00gZWxlbWVudAogKiBlLmcuIFtIVE1MRWxlbWVudF0gPT4gaW5wdXQjZm9vLmJ0bltuYW1lPWJhel0KICogQHJldHVybnMgZ2VuZXJhdGVkIERPTSBwYXRoCiAqLwpmdW5jdGlvbiBfaHRtbEVsZW1lbnRBc1N0cmluZyhlbCwga2V5QXR0cnMpIHsKICBjb25zdCBlbGVtID0gZWwKCjsKCiAgY29uc3Qgb3V0ID0gW107CiAgbGV0IGNsYXNzTmFtZTsKICBsZXQgY2xhc3NlczsKICBsZXQga2V5OwogIGxldCBhdHRyOwogIGxldCBpOwoKICBpZiAoIWVsZW0gfHwgIWVsZW0udGFnTmFtZSkgewogICAgcmV0dXJuICcnOwogIH0KCiAgLy8gQHRzLWV4cGVjdC1lcnJvciBXSU5ET1cgaGFzIEhUTUxFbGVtZW50CiAgaWYgKFdJTkRPVy5IVE1MRWxlbWVudCkgewogICAgLy8gSWYgdXNpbmcgdGhlIGNvbXBvbmVudCBuYW1lIGFubm90YXRpb24gcGx1Z2luLCB0aGlzIHZhbHVlIG1heSBiZSBhdmFpbGFibGUgb24gdGhlIERPTSBub2RlCiAgICBpZiAoZWxlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIGVsZW0uZGF0YXNldCAmJiBlbGVtLmRhdGFzZXRbJ3NlbnRyeUNvbXBvbmVudCddKSB7CiAgICAgIHJldHVybiBlbGVtLmRhdGFzZXRbJ3NlbnRyeUNvbXBvbmVudCddOwogICAgfQogIH0KCiAgb3V0LnB1c2goZWxlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpOwoKICAvLyBQYWlycyBvZiBhdHRyaWJ1dGUga2V5cyBkZWZpbmVkIGluIGBzZXJpYWxpemVBdHRyaWJ1dGVgIGFuZCB0aGVpciB2YWx1ZXMgb24gZWxlbWVudC4KICBjb25zdCBrZXlBdHRyUGFpcnMgPQogICAga2V5QXR0cnMgJiYga2V5QXR0cnMubGVuZ3RoCiAgICAgID8ga2V5QXR0cnMuZmlsdGVyKGtleUF0dHIgPT4gZWxlbS5nZXRBdHRyaWJ1dGUoa2V5QXR0cikpLm1hcChrZXlBdHRyID0+IFtrZXlBdHRyLCBlbGVtLmdldEF0dHJpYnV0ZShrZXlBdHRyKV0pCiAgICAgIDogbnVsbDsKCiAgaWYgKGtleUF0dHJQYWlycyAmJiBrZXlBdHRyUGFpcnMubGVuZ3RoKSB7CiAgICBrZXlBdHRyUGFpcnMuZm9yRWFjaChrZXlBdHRyUGFpciA9PiB7CiAgICAgIG91dC5wdXNoKGBbJHtrZXlBdHRyUGFpclswXX09IiR7a2V5QXR0clBhaXJbMV19Il1gKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBpZiAoZWxlbS5pZCkgewogICAgICBvdXQucHVzaChgIyR7ZWxlbS5pZH1gKTsKICAgIH0KCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CiAgICBjbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZTsKICAgIGlmIChjbGFzc05hbWUgJiYgaXNTdHJpbmcoY2xhc3NOYW1lKSkgewogICAgICBjbGFzc2VzID0gY2xhc3NOYW1lLnNwbGl0KC9ccysvKTsKICAgICAgZm9yIChpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBvdXQucHVzaChgLiR7Y2xhc3Nlc1tpXX1gKTsKICAgICAgfQogICAgfQogIH0KICBjb25zdCBhbGxvd2VkQXR0cnMgPSBbJ2FyaWEtbGFiZWwnLCAndHlwZScsICduYW1lJywgJ3RpdGxlJywgJ2FsdCddOwogIGZvciAoaSA9IDA7IGkgPCBhbGxvd2VkQXR0cnMubGVuZ3RoOyBpKyspIHsKICAgIGtleSA9IGFsbG93ZWRBdHRyc1tpXTsKICAgIGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShrZXkpOwogICAgaWYgKGF0dHIpIHsKICAgICAgb3V0LnB1c2goYFske2tleX09IiR7YXR0cn0iXWApOwogICAgfQogIH0KICByZXR1cm4gb3V0LmpvaW4oJycpOwp9CgovKioKICogVGhpcyBzZXJ2ZXMgYXMgYSBidWlsZCB0aW1lIGZsYWcgdGhhdCB3aWxsIGJlIHRydWUgYnkgZGVmYXVsdCwgYnV0IGZhbHNlIGluIG5vbi1kZWJ1ZyBidWlsZHMgb3IgaWYgdXNlcnMgcmVwbGFjZSBgX19TRU5UUllfREVCVUdfX2AgaW4gdGhlaXIgZ2VuZXJhdGVkIGNvZGUuCiAqCiAqIEFUVEVOVElPTjogVGhpcyBjb25zdGFudCBtdXN0IG5ldmVyIGNyb3NzIHBhY2thZ2UgYm91bmRhcmllcyAoaS5lLiBiZSBleHBvcnRlZCkgdG8gZ3VhcmFudGVlIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRyZWUgc2hha2luZy4KICovCmNvbnN0IERFQlVHX0JVSUxEJDEgPSAodHlwZW9mIF9fU0VOVFJZX0RFQlVHX18gPT09ICd1bmRlZmluZWQnIHx8IF9fU0VOVFJZX0RFQlVHX18pOwoKLyoqIFByZWZpeCBmb3IgbG9nZ2luZyBzdHJpbmdzICovCmNvbnN0IFBSRUZJWCA9ICdTZW50cnkgTG9nZ2VyICc7Cgpjb25zdCBDT05TT0xFX0xFVkVMUyA9IFsKICAnZGVidWcnLAogICdpbmZvJywKICAnd2FybicsCiAgJ2Vycm9yJywKICAnbG9nJywKICAnYXNzZXJ0JywKICAndHJhY2UnLApdIDsKCi8qKiBUaGlzIG1heSBiZSBtdXRhdGVkIGJ5IHRoZSBjb25zb2xlIGluc3RydW1lbnRhdGlvbi4gKi8KY29uc3Qgb3JpZ2luYWxDb25zb2xlTWV0aG9kcwoKID0ge307CgovKiogSlNEb2MgKi8KCi8qKgogKiBUZW1wb3JhcmlseSBkaXNhYmxlIHNlbnRyeSBjb25zb2xlIGluc3RydW1lbnRhdGlvbnMuCiAqCiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gcnVuIGFnYWluc3QgdGhlIG9yaWdpbmFsIGBjb25zb2xlYCBtZXNzYWdlcwogKiBAcmV0dXJucyBUaGUgcmVzdWx0cyBvZiB0aGUgY2FsbGJhY2sKICovCmZ1bmN0aW9uIGNvbnNvbGVTYW5kYm94KGNhbGxiYWNrKSB7CiAgaWYgKCEoJ2NvbnNvbGUnIGluIEdMT0JBTF9PQkopKSB7CiAgICByZXR1cm4gY2FsbGJhY2soKTsKICB9CgogIGNvbnN0IGNvbnNvbGUgPSBHTE9CQUxfT0JKLmNvbnNvbGUgOwogIGNvbnN0IHdyYXBwZWRGdW5jcyA9IHt9OwoKICBjb25zdCB3cmFwcGVkTGV2ZWxzID0gT2JqZWN0LmtleXMob3JpZ2luYWxDb25zb2xlTWV0aG9kcykgOwoKICAvLyBSZXN0b3JlIGFsbCB3cmFwcGVkIGNvbnNvbGUgbWV0aG9kcwogIHdyYXBwZWRMZXZlbHMuZm9yRWFjaChsZXZlbCA9PiB7CiAgICBjb25zdCBvcmlnaW5hbENvbnNvbGVNZXRob2QgPSBvcmlnaW5hbENvbnNvbGVNZXRob2RzW2xldmVsXSA7CiAgICB3cmFwcGVkRnVuY3NbbGV2ZWxdID0gY29uc29sZVtsZXZlbF0gOwogICAgY29uc29sZVtsZXZlbF0gPSBvcmlnaW5hbENvbnNvbGVNZXRob2Q7CiAgfSk7CgogIHRyeSB7CiAgICByZXR1cm4gY2FsbGJhY2soKTsKICB9IGZpbmFsbHkgewogICAgLy8gUmV2ZXJ0IHJlc3RvcmF0aW9uIHRvIHdyYXBwZWQgc3RhdGUKICAgIHdyYXBwZWRMZXZlbHMuZm9yRWFjaChsZXZlbCA9PiB7CiAgICAgIGNvbnNvbGVbbGV2ZWxdID0gd3JhcHBlZEZ1bmNzW2xldmVsXSA7CiAgICB9KTsKICB9Cn0KCmZ1bmN0aW9uIG1ha2VMb2dnZXIoKSB7CiAgbGV0IGVuYWJsZWQgPSBmYWxzZTsKICBjb25zdCBsb2dnZXIgPSB7CiAgICBlbmFibGU6ICgpID0+IHsKICAgICAgZW5hYmxlZCA9IHRydWU7CiAgICB9LAogICAgZGlzYWJsZTogKCkgPT4gewogICAgICBlbmFibGVkID0gZmFsc2U7CiAgICB9LAogICAgaXNFbmFibGVkOiAoKSA9PiBlbmFibGVkLAogIH07CgogIGlmIChERUJVR19CVUlMRCQxKSB7CiAgICBDT05TT0xFX0xFVkVMUy5mb3JFYWNoKG5hbWUgPT4gewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgICBsb2dnZXJbbmFtZV0gPSAoLi4uYXJncykgPT4gewogICAgICAgIGlmIChlbmFibGVkKSB7CiAgICAgICAgICBjb25zb2xlU2FuZGJveCgoKSA9PiB7CiAgICAgICAgICAgIEdMT0JBTF9PQkouY29uc29sZVtuYW1lXShgJHtQUkVGSVh9WyR7bmFtZX1dOmAsIC4uLmFyZ3MpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwogICAgfSk7CiAgfSBlbHNlIHsKICAgIENPTlNPTEVfTEVWRUxTLmZvckVhY2gobmFtZSA9PiB7CiAgICAgIGxvZ2dlcltuYW1lXSA9ICgpID0+IHVuZGVmaW5lZDsKICAgIH0pOwogIH0KCiAgcmV0dXJuIGxvZ2dlciA7Cn0KCmNvbnN0IGxvZ2dlciA9IG1ha2VMb2dnZXIoKTsKCi8qKgogKiBSZW5kZXJzIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEc24uCiAqCiAqIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCByZW5kZXIgdGhlIHB1YmxpYyByZXByZXNlbnRhdGlvbiB3aXRob3V0IHRoZSBwYXNzd29yZAogKiBjb21wb25lbnQuIFRvIGdldCB0aGUgZGVwcmVjYXRlZCBwcml2YXRlIHJlcHJlc2VudGF0aW9uLCBzZXQgYHdpdGhQYXNzd29yZGAKICogdG8gdHJ1ZS4KICoKICogQHBhcmFtIHdpdGhQYXNzd29yZCBXaGVuIHNldCB0byB0cnVlLCB0aGUgcGFzc3dvcmQgd2lsbCBiZSBpbmNsdWRlZC4KICovCmZ1bmN0aW9uIGRzblRvU3RyaW5nKGRzbiwgd2l0aFBhc3N3b3JkID0gZmFsc2UpIHsKICBjb25zdCB7IGhvc3QsIHBhdGgsIHBhc3MsIHBvcnQsIHByb2plY3RJZCwgcHJvdG9jb2wsIHB1YmxpY0tleSB9ID0gZHNuOwogIHJldHVybiAoCiAgICBgJHtwcm90b2NvbH06Ly8ke3B1YmxpY0tleX0ke3dpdGhQYXNzd29yZCAmJiBwYXNzID8gYDoke3Bhc3N9YCA6ICcnfWAgKwogICAgYEAke2hvc3R9JHtwb3J0ID8gYDoke3BvcnR9YCA6ICcnfS8ke3BhdGggPyBgJHtwYXRofS9gIDogcGF0aH0ke3Byb2plY3RJZH1gCiAgKTsKfQoKLyoqIEFuIGVycm9yIGVtaXR0ZWQgYnkgU2VudHJ5IFNES3MgYW5kIHJlbGF0ZWQgdXRpbGl0aWVzLiAqLwpjbGFzcyBTZW50cnlFcnJvciBleHRlbmRzIEVycm9yIHsKICAvKiogRGlzcGxheSBuYW1lIG9mIHRoaXMgZXJyb3IgaW5zdGFuY2UuICovCgogICBjb25zdHJ1Y3RvciggbWVzc2FnZSwgbG9nTGV2ZWwgPSAnd2FybicpIHsKICAgIHN1cGVyKG1lc3NhZ2UpO3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7CiAgICB0aGlzLm5hbWUgPSBuZXcudGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgLy8gVGhpcyBzZXRzIHRoZSBwcm90b3R5cGUgdG8gYmUgYEVycm9yYCwgbm90IGBTZW50cnlFcnJvcmAuIEl0J3MgdW5jbGVhciB3aHkgd2UgZG8gdGhpcywgYnV0IGNvbW1lbnRpbmcgdGhpcyBsaW5lCiAgICAvLyBvdXQgY2F1c2VzIHZhcmlvdXMgKHNlZW1pbmdseSB0b3RhbGx5IHVucmVsYXRlZCkgcGxheXdyaWdodCB0ZXN0cyBjb25zaXN0ZW50bHkgdGltZSBvdXQuIEZZSSwgdGhpcyBtYWtlcwogICAgLy8gaW5zdGFuY2VzIG9mIGBTZW50cnlFcnJvcmAgZmFpbCBgb2JqIGluc3RhbmNlb2YgU2VudHJ5RXJyb3JgIGNoZWNrcy4KICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7CiAgICB0aGlzLmxvZ0xldmVsID0gbG9nTGV2ZWw7CiAgfQp9CgovKioKICogRW5jb2RlcyBnaXZlbiBvYmplY3QgaW50byB1cmwtZnJpZW5kbHkgZm9ybWF0CiAqCiAqIEBwYXJhbSBvYmplY3QgQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgc2VyaWFsaXphYmxlIHZhbHVlcwogKiBAcmV0dXJucyBzdHJpbmcgRW5jb2RlZAogKi8KZnVuY3Rpb24gdXJsRW5jb2RlKG9iamVjdCkgewogIHJldHVybiBPYmplY3Qua2V5cyhvYmplY3QpCiAgICAubWFwKGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQob2JqZWN0W2tleV0pfWApCiAgICAuam9pbignJicpOwp9CgovKioKICogVHJhbnNmb3JtcyBhbnkgYEVycm9yYCBvciBgRXZlbnRgIGludG8gYSBwbGFpbiBvYmplY3Qgd2l0aCBhbGwgb2YgdGhlaXIgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLCBhbmQgc29tZSBvZiB0aGVpcgogKiBub24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGF0dGFjaGVkLgogKgogKiBAcGFyYW0gdmFsdWUgSW5pdGlhbCBzb3VyY2UgdGhhdCB3ZSBoYXZlIHRvIHRyYW5zZm9ybSBpbiBvcmRlciBmb3IgaXQgdG8gYmUgdXNhYmxlIGJ5IHRoZSBzZXJpYWxpemVyCiAqIEByZXR1cm5zIEFuIEV2ZW50IG9yIEVycm9yIHR1cm5lZCBpbnRvIGFuIG9iamVjdCAtIG9yIHRoZSB2YWx1ZSBhcmd1cm1lbnQgaXRzZWxmLCB3aGVuIHZhbHVlIGlzIG5laXRoZXIgYW4gRXZlbnQgbm9yCiAqICBhbiBFcnJvci4KICovCmZ1bmN0aW9uIGNvbnZlcnRUb1BsYWluT2JqZWN0KAogIHZhbHVlLAopCgogewogIGlmIChpc0Vycm9yKHZhbHVlKSkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogdmFsdWUubWVzc2FnZSwKICAgICAgbmFtZTogdmFsdWUubmFtZSwKICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrLAogICAgICAuLi5nZXRPd25Qcm9wZXJ0aWVzKHZhbHVlKSwKICAgIH07CiAgfSBlbHNlIGlmIChpc0V2ZW50KHZhbHVlKSkgewogICAgY29uc3QgbmV3T2JqCgogPSB7CiAgICAgIHR5cGU6IHZhbHVlLnR5cGUsCiAgICAgIHRhcmdldDogc2VyaWFsaXplRXZlbnRUYXJnZXQodmFsdWUudGFyZ2V0KSwKICAgICAgY3VycmVudFRhcmdldDogc2VyaWFsaXplRXZlbnRUYXJnZXQodmFsdWUuY3VycmVudFRhcmdldCksCiAgICAgIC4uLmdldE93blByb3BlcnRpZXModmFsdWUpLAogICAgfTsKCiAgICBpZiAodHlwZW9mIEN1c3RvbUV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2YodmFsdWUsIEN1c3RvbUV2ZW50KSkgewogICAgICBuZXdPYmouZGV0YWlsID0gdmFsdWUuZGV0YWlsOwogICAgfQoKICAgIHJldHVybiBuZXdPYmo7CiAgfSBlbHNlIHsKICAgIHJldHVybiB2YWx1ZTsKICB9Cn0KCi8qKiBDcmVhdGVzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0YXJnZXQgb2YgYW4gYEV2ZW50YCBvYmplY3QgKi8KZnVuY3Rpb24gc2VyaWFsaXplRXZlbnRUYXJnZXQodGFyZ2V0KSB7CiAgdHJ5IHsKICAgIHJldHVybiBpc0VsZW1lbnQodGFyZ2V0KSA/IGh0bWxUcmVlQXNTdHJpbmcodGFyZ2V0KSA6IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0YXJnZXQpOwogIH0gY2F0Y2ggKF9vTykgewogICAgcmV0dXJuICc8dW5rbm93bj4nOwogIH0KfQoKLyoqIEZpbHRlcnMgb3V0IGFsbCBidXQgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMgKi8KZnVuY3Rpb24gZ2V0T3duUHJvcGVydGllcyhvYmopIHsKICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsKSB7CiAgICBjb25zdCBleHRyYWN0ZWRQcm9wcyA9IHt9OwogICAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBvYmopIHsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3BlcnR5KSkgewogICAgICAgIGV4dHJhY3RlZFByb3BzW3Byb3BlcnR5XSA9IChvYmogKVtwcm9wZXJ0eV07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBleHRyYWN0ZWRQcm9wczsKICB9IGVsc2UgewogICAgcmV0dXJuIHt9OwogIH0KfQoKLyoqCiAqIEdpdmVuIGFueSBvYmplY3QsIHJldHVybiBhIG5ldyBvYmplY3QgaGF2aW5nIHJlbW92ZWQgYWxsIGZpZWxkcyB3aG9zZSB2YWx1ZSB3YXMgYHVuZGVmaW5lZGAuCiAqIFdvcmtzIHJlY3Vyc2l2ZWx5IG9uIG9iamVjdHMgYW5kIGFycmF5cy4KICoKICogQXR0ZW50aW9uOiBUaGlzIGZ1bmN0aW9uIGtlZXBzIGNpcmN1bGFyIHJlZmVyZW5jZXMgaW4gdGhlIHJldHVybmVkIG9iamVjdC4KICovCmZ1bmN0aW9uIGRyb3BVbmRlZmluZWRLZXlzKGlucHV0VmFsdWUpIHsKICAvLyBUaGlzIG1hcCBrZWVwcyB0cmFjayBvZiB3aGF0IGFscmVhZHkgdmlzaXRlZCBub2RlcyBtYXAgdG8uCiAgLy8gT3VyIFNldCAtIGJhc2VkIG1lbW9CdWlsZGVyIGRvZXNuJ3Qgd29yayBoZXJlIGJlY2F1c2Ugd2Ugd2FudCB0byB0aGUgb3V0cHV0IG9iamVjdCB0byBoYXZlIHRoZSBzYW1lIGNpcmN1bGFyCiAgLy8gcmVmZXJlbmNlcyBhcyB0aGUgaW5wdXQgb2JqZWN0LgogIGNvbnN0IG1lbW9pemF0aW9uTWFwID0gbmV3IE1hcCgpOwoKICAvLyBUaGlzIGZ1bmN0aW9uIGp1c3QgcHJveGllcyBgX2Ryb3BVbmRlZmluZWRLZXlzYCB0byBrZWVwIHRoZSBgbWVtb0J1aWxkZXJgIG91dCBvZiB0aGlzIGZ1bmN0aW9uJ3MgQVBJCiAgcmV0dXJuIF9kcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlLCBtZW1vaXphdGlvbk1hcCk7Cn0KCmZ1bmN0aW9uIF9kcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlLCBtZW1vaXphdGlvbk1hcCkgewogIGlmIChpc1Bvam8oaW5wdXRWYWx1ZSkpIHsKICAgIC8vIElmIHRoaXMgbm9kZSBoYXMgYWxyZWFkeSBiZWVuIHZpc2l0ZWQgZHVlIHRvIGEgY2lyY3VsYXIgcmVmZXJlbmNlLCByZXR1cm4gdGhlIG9iamVjdCBpdCB3YXMgbWFwcGVkIHRvIGluIHRoZSBuZXcgb2JqZWN0CiAgICBjb25zdCBtZW1vVmFsID0gbWVtb2l6YXRpb25NYXAuZ2V0KGlucHV0VmFsdWUpOwogICAgaWYgKG1lbW9WYWwgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gbWVtb1ZhbCA7CiAgICB9CgogICAgY29uc3QgcmV0dXJuVmFsdWUgPSB7fTsKICAgIC8vIFN0b3JlIHRoZSBtYXBwaW5nIG9mIHRoaXMgdmFsdWUgaW4gY2FzZSB3ZSB2aXNpdCBpdCBhZ2FpbiwgaW4gY2FzZSBvZiBjaXJjdWxhciBkYXRhCiAgICBtZW1vaXphdGlvbk1hcC5zZXQoaW5wdXRWYWx1ZSwgcmV0dXJuVmFsdWUpOwoKICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGlucHV0VmFsdWUpKSB7CiAgICAgIGlmICh0eXBlb2YgaW5wdXRWYWx1ZVtrZXldICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIHJldHVyblZhbHVlW2tleV0gPSBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZVtrZXldLCBtZW1vaXphdGlvbk1hcCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmV0dXJuVmFsdWUgOwogIH0KCiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRWYWx1ZSkpIHsKICAgIC8vIElmIHRoaXMgbm9kZSBoYXMgYWxyZWFkeSBiZWVuIHZpc2l0ZWQgZHVlIHRvIGEgY2lyY3VsYXIgcmVmZXJlbmNlLCByZXR1cm4gdGhlIGFycmF5IGl0IHdhcyBtYXBwZWQgdG8gaW4gdGhlIG5ldyBvYmplY3QKICAgIGNvbnN0IG1lbW9WYWwgPSBtZW1vaXphdGlvbk1hcC5nZXQoaW5wdXRWYWx1ZSk7CiAgICBpZiAobWVtb1ZhbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBtZW1vVmFsIDsKICAgIH0KCiAgICBjb25zdCByZXR1cm5WYWx1ZSA9IFtdOwogICAgLy8gU3RvcmUgdGhlIG1hcHBpbmcgb2YgdGhpcyB2YWx1ZSBpbiBjYXNlIHdlIHZpc2l0IGl0IGFnYWluLCBpbiBjYXNlIG9mIGNpcmN1bGFyIGRhdGEKICAgIG1lbW9pemF0aW9uTWFwLnNldChpbnB1dFZhbHVlLCByZXR1cm5WYWx1ZSk7CgogICAgaW5wdXRWYWx1ZS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgIHJldHVyblZhbHVlLnB1c2goX2Ryb3BVbmRlZmluZWRLZXlzKGl0ZW0sIG1lbW9pemF0aW9uTWFwKSk7CiAgICB9KTsKCiAgICByZXR1cm4gcmV0dXJuVmFsdWUgOwogIH0KCiAgcmV0dXJuIGlucHV0VmFsdWU7Cn0KCmZ1bmN0aW9uIGlzUG9qbyhpbnB1dCkgewogIGlmICghaXNQbGFpbk9iamVjdChpbnB1dCkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHRyeSB7CiAgICBjb25zdCBuYW1lID0gKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnB1dCkgKS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgcmV0dXJuICFuYW1lIHx8IG5hbWUgPT09ICdPYmplY3QnOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLyoqCiAqIERvZXMgdGhpcyBmaWxlbmFtZSBsb29rIGxpa2UgaXQncyBwYXJ0IG9mIHRoZSBhcHAgY29kZT8KICovCmZ1bmN0aW9uIGZpbGVuYW1lSXNJbkFwcChmaWxlbmFtZSwgaXNOYXRpdmUgPSBmYWxzZSkgewogIGNvbnN0IGlzSW50ZXJuYWwgPQogICAgaXNOYXRpdmUgfHwKICAgIChmaWxlbmFtZSAmJgogICAgICAvLyBJdCdzIG5vdCBpbnRlcm5hbCBpZiBpdCdzIGFuIGFic29sdXRlIGxpbnV4IHBhdGgKICAgICAgIWZpbGVuYW1lLnN0YXJ0c1dpdGgoJy8nKSAmJgogICAgICAvLyBJdCdzIG5vdCBpbnRlcm5hbCBpZiBpdCdzIGFuIGFic29sdXRlIHdpbmRvd3MgcGF0aAogICAgICAhZmlsZW5hbWUubWF0Y2goL15bQS1aXTovKSAmJgogICAgICAvLyBJdCdzIG5vdCBpbnRlcm5hbCBpZiB0aGUgcGF0aCBpcyBzdGFydGluZyB3aXRoIGEgZG90CiAgICAgICFmaWxlbmFtZS5zdGFydHNXaXRoKCcuJykgJiYKICAgICAgLy8gSXQncyBub3QgaW50ZXJuYWwgaWYgdGhlIGZyYW1lIGhhcyBhIHByb3RvY29sLiBJbiBub2RlLCB0aGlzIGlzIHVzdWFsbHkgdGhlIGNhc2UgaWYgdGhlIGZpbGUgZ290IHByZS1wcm9jZXNzZWQgd2l0aCBhIGJ1bmRsZXIgbGlrZSB3ZWJwYWNrCiAgICAgICFmaWxlbmFtZS5tYXRjaCgvXlthLXpBLVpdKFthLXpBLVowLTkuXC0rXSkqOlwvXC8vKSk7IC8vIFNjaGVtYSBmcm9tOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzY0MTc4MgoKICAvLyBpbl9hcHAgaXMgYWxsIHRoYXQncyBub3QgYW4gaW50ZXJuYWwgTm9kZSBmdW5jdGlvbiBvciBhIG1vZHVsZSB3aXRoaW4gbm9kZV9tb2R1bGVzCiAgLy8gbm90ZSB0aGF0IGlzTmF0aXZlIGFwcGVhcnMgdG8gcmV0dXJuIHRydWUgZXZlbiBmb3Igbm9kZSBjb3JlIGxpYnJhcmllcwogIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3JhdmVuLW5vZGUvaXNzdWVzLzE3NgoKICByZXR1cm4gIWlzSW50ZXJuYWwgJiYgZmlsZW5hbWUgIT09IHVuZGVmaW5lZCAmJiAhZmlsZW5hbWUuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcy8nKTsKfQoKY29uc3QgU1RBQ0tUUkFDRV9GUkFNRV9MSU1JVCA9IDUwOwpjb25zdCBTVFJJUF9GUkFNRV9SRUdFWFAgPSAvY2FwdHVyZU1lc3NhZ2V8Y2FwdHVyZUV4Y2VwdGlvbi87CgovKioKICogUmVtb3ZlcyBTZW50cnkgZnJhbWVzIGZyb20gdGhlIHRvcCBhbmQgYm90dG9tIG9mIHRoZSBzdGFjayBpZiBwcmVzZW50IGFuZCBlbmZvcmNlcyBhIGxpbWl0IG9mIG1heCBudW1iZXIgb2YgZnJhbWVzLgogKiBBc3N1bWVzIHN0YWNrIGlucHV0IGlzIG9yZGVyZWQgZnJvbSB0b3AgdG8gYm90dG9tIGFuZCByZXR1cm5zIHRoZSByZXZlcnNlIHJlcHJlc2VudGF0aW9uIHNvIGNhbGwgc2l0ZSBvZiB0aGUKICogZnVuY3Rpb24gdGhhdCBjYXVzZWQgdGhlIGNyYXNoIGlzIHRoZSBsYXN0IGZyYW1lIGluIHRoZSBhcnJheS4KICogQGhpZGRlbgogKi8KZnVuY3Rpb24gc3RyaXBTZW50cnlGcmFtZXNBbmRSZXZlcnNlKHN0YWNrKSB7CiAgaWYgKCFzdGFjay5sZW5ndGgpIHsKICAgIHJldHVybiBbXTsKICB9CgogIGNvbnN0IGxvY2FsU3RhY2sgPSBBcnJheS5mcm9tKHN0YWNrKTsKCiAgLy8gSWYgc3RhY2sgc3RhcnRzIHdpdGggb25lIG9mIG91ciBBUEkgY2FsbHMsIHJlbW92ZSBpdCAoc3RhcnRzLCBtZWFuaW5nIGl0J3MgdGhlIHRvcCBvZiB0aGUgc3RhY2sgLSBha2EgbGFzdCBjYWxsKQogIGlmICgvc2VudHJ5V3JhcHBlZC8udGVzdChsb2NhbFN0YWNrW2xvY2FsU3RhY2subGVuZ3RoIC0gMV0uZnVuY3Rpb24gfHwgJycpKSB7CiAgICBsb2NhbFN0YWNrLnBvcCgpOwogIH0KCiAgLy8gUmV2ZXJzaW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIHByb2NlZHVyZSBhbGxvd3MgdXMgdG8ganVzdCBwb3AgdGhlIHZhbHVlcyBvZmYgdGhlIHN0YWNrCiAgbG9jYWxTdGFjay5yZXZlcnNlKCk7CgogIC8vIElmIHN0YWNrIGVuZHMgd2l0aCBvbmUgb2Ygb3VyIGludGVybmFsIEFQSSBjYWxscywgcmVtb3ZlIGl0IChlbmRzLCBtZWFuaW5nIGl0J3MgdGhlIGJvdHRvbSBvZiB0aGUgc3RhY2sgLSBha2EgdG9wLW1vc3QgY2FsbCkKICBpZiAoU1RSSVBfRlJBTUVfUkVHRVhQLnRlc3QobG9jYWxTdGFja1tsb2NhbFN0YWNrLmxlbmd0aCAtIDFdLmZ1bmN0aW9uIHx8ICcnKSkgewogICAgbG9jYWxTdGFjay5wb3AoKTsKCiAgICAvLyBXaGVuIHVzaW5nIHN5bnRoZXRpYyBldmVudHMsIHdlIHdpbGwgaGF2ZSBhIDIgbGV2ZWxzIGRlZXAgc3RhY2ssIGFzIGBuZXcgRXJyb3IoJ1NlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24nKWAKICAgIC8vIGlzIHByb2R1Y2VkIHdpdGhpbiB0aGUgaHViIGl0c2VsZiwgbWFraW5nIGl0OgogICAgLy8KICAgIC8vICAgU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24oKQogICAgLy8gICBnZXRDdXJyZW50SHViKCkuY2FwdHVyZUV4Y2VwdGlvbigpCiAgICAvLwogICAgLy8gaW5zdGVhZCBvZiBqdXN0IHRoZSB0b3AgYFNlbnRyeWAgY2FsbCBpdHNlbGYuCiAgICAvLyBUaGlzIGZvcmNlcyB1cyB0byBwb3NzaWJseSBzdHJpcCBhbiBhZGRpdGlvbmFsIGZyYW1lIGluIHRoZSBleGFjdCBzYW1lIHdhcyBhcyBhYm92ZS4KICAgIGlmIChTVFJJUF9GUkFNRV9SRUdFWFAudGVzdChsb2NhbFN0YWNrW2xvY2FsU3RhY2subGVuZ3RoIC0gMV0uZnVuY3Rpb24gfHwgJycpKSB7CiAgICAgIGxvY2FsU3RhY2sucG9wKCk7CiAgICB9CiAgfQoKICByZXR1cm4gbG9jYWxTdGFjay5zbGljZSgwLCBTVEFDS1RSQUNFX0ZSQU1FX0xJTUlUKS5tYXAoZnJhbWUgPT4gKHsKICAgIC4uLmZyYW1lLAogICAgZmlsZW5hbWU6IGZyYW1lLmZpbGVuYW1lIHx8IGxvY2FsU3RhY2tbbG9jYWxTdGFjay5sZW5ndGggLSAxXS5maWxlbmFtZSwKICAgIGZ1bmN0aW9uOiBmcmFtZS5mdW5jdGlvbiB8fCAnPycsCiAgfSkpOwp9Cgpjb25zdCBkZWZhdWx0RnVuY3Rpb25OYW1lID0gJzxhbm9ueW1vdXM+JzsKCi8qKgogKiBTYWZlbHkgZXh0cmFjdCBmdW5jdGlvbiBuYW1lIGZyb20gaXRzZWxmCiAqLwpmdW5jdGlvbiBnZXRGdW5jdGlvbk5hbWUoZm4pIHsKICB0cnkgewogICAgaWYgKCFmbiB8fCB0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIGRlZmF1bHRGdW5jdGlvbk5hbWU7CiAgICB9CiAgICByZXR1cm4gZm4ubmFtZSB8fCBkZWZhdWx0RnVuY3Rpb25OYW1lOwogIH0gY2F0Y2ggKGUpIHsKICAgIC8vIEp1c3QgYWNjZXNzaW5nIGN1c3RvbSBwcm9wcyBpbiBzb21lIFNlbGVuaXVtIGVudmlyb25tZW50cwogICAgLy8gY2FuIGNhdXNlIGEgIlBlcm1pc3Npb24gZGVuaWVkIiBleGNlcHRpb24gKHNlZSByYXZlbi1qcyM0OTUpLgogICAgcmV0dXJuIGRlZmF1bHRGdW5jdGlvbk5hbWU7CiAgfQp9CgovKioKICogVVVJRDQgZ2VuZXJhdG9yCiAqCiAqIEByZXR1cm5zIHN0cmluZyBHZW5lcmF0ZWQgVVVJRDQuCiAqLwpmdW5jdGlvbiB1dWlkNCgpIHsKICBjb25zdCBnYmwgPSBHTE9CQUxfT0JKIDsKICBjb25zdCBjcnlwdG8gPSBnYmwuY3J5cHRvIHx8IGdibC5tc0NyeXB0bzsKCiAgbGV0IGdldFJhbmRvbUJ5dGUgPSAoKSA9PiBNYXRoLnJhbmRvbSgpICogMTY7CiAgdHJ5IHsKICAgIGlmIChjcnlwdG8gJiYgY3J5cHRvLnJhbmRvbVVVSUQpIHsKICAgICAgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyk7CiAgICB9CiAgICBpZiAoY3J5cHRvICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHsKICAgICAgZ2V0UmFuZG9tQnl0ZSA9ICgpID0+IHsKICAgICAgICAvLyBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzIG1pZ2h0IHJldHVybiB1bmRlZmluZWQgaW5zdGVhZCBvZiB0aGUgdHlwZWQgYXJyYXkKICAgICAgICAvLyBpbiBvbGQgQ2hyb21pdW0gdmVyc2lvbnMgKGUuZy4gMjMuMC4xMjM1LjAgKDE1MTQyMikpCiAgICAgICAgLy8gSG93ZXZlciwgYHR5cGVkQXJyYXlgIGlzIHN0aWxsIGZpbGxlZCBpbi1wbGFjZS4KICAgICAgICAvLyBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DcnlwdG8vZ2V0UmFuZG9tVmFsdWVzI3R5cGVkYXJyYXkKICAgICAgICBjb25zdCB0eXBlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMSk7CiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh0eXBlZEFycmF5KTsKICAgICAgICByZXR1cm4gdHlwZWRBcnJheVswXTsKICAgICAgfTsKICAgIH0KICB9IGNhdGNoIChfKSB7CiAgICAvLyBzb21lIHJ1bnRpbWVzIGNhbiBjcmFzaCBpbnZva2luZyBjcnlwdG8KICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzg5MzUKICB9CgogIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTE3NTIzIzIxMTc1MjMKICAvLyBDb25jYXRlbmF0aW5nIHRoZSBmb2xsb3dpbmcgbnVtYmVycyBhcyBzdHJpbmdzIHJlc3VsdHMgaW4gJzEwMDAwMDAwMTAwMDQwMDA4MDAwMTAwMDAwMDAwMDAwJwogIHJldHVybiAoKFsxZTddICkgKyAxZTMgKyA0ZTMgKyA4ZTMgKyAxZTExKS5yZXBsYWNlKC9bMDE4XS9nLCBjID0+CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZQogICAgKChjICkgXiAoKGdldFJhbmRvbUJ5dGUoKSAmIDE1KSA+PiAoKGMgKSAvIDQpKSkudG9TdHJpbmcoMTYpLAogICk7Cn0KCi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyAqLwovKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovCgovKioKICogSGVscGVyIHRvIGRlY3ljbGUganNvbiBvYmplY3RzCiAqLwpmdW5jdGlvbiBtZW1vQnVpbGRlcigpIHsKICBjb25zdCBoYXNXZWFrU2V0ID0gdHlwZW9mIFdlYWtTZXQgPT09ICdmdW5jdGlvbic7CiAgY29uc3QgaW5uZXIgPSBoYXNXZWFrU2V0ID8gbmV3IFdlYWtTZXQoKSA6IFtdOwogIGZ1bmN0aW9uIG1lbW9pemUob2JqKSB7CiAgICBpZiAoaGFzV2Vha1NldCkgewogICAgICBpZiAoaW5uZXIuaGFzKG9iaikpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpbm5lci5hZGQob2JqKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcmVmZXItZm9yLW9mCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlubmVyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gaW5uZXJbaV07CiAgICAgIGlmICh2YWx1ZSA9PT0gb2JqKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KICAgIGlubmVyLnB1c2gob2JqKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHVubWVtb2l6ZShvYmopIHsKICAgIGlmIChoYXNXZWFrU2V0KSB7CiAgICAgIGlubmVyLmRlbGV0ZShvYmopOwogICAgfSBlbHNlIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbm5lci5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpbm5lcltpXSA9PT0gb2JqKSB7CiAgICAgICAgICBpbm5lci5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIFttZW1vaXplLCB1bm1lbW9pemVdOwp9CgovKioKICogUmVjdXJzaXZlbHkgbm9ybWFsaXplcyB0aGUgZ2l2ZW4gb2JqZWN0LgogKgogKiAtIENyZWF0ZXMgYSBjb3B5IHRvIHByZXZlbnQgb3JpZ2luYWwgaW5wdXQgbXV0YXRpb24KICogLSBTa2lwcyBub24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzCiAqIC0gV2hlbiBzdHJpbmdpZnlpbmcsIGNhbGxzIGB0b0pTT05gIGlmIGltcGxlbWVudGVkCiAqIC0gUmVtb3ZlcyBjaXJjdWxhciByZWZlcmVuY2VzCiAqIC0gVHJhbnNsYXRlcyBub24tc2VyaWFsaXphYmxlIHZhbHVlcyAoYHVuZGVmaW5lZGAvYE5hTmAvZnVuY3Rpb25zKSB0byBzZXJpYWxpemFibGUgZm9ybWF0CiAqIC0gVHJhbnNsYXRlcyBrbm93biBnbG9iYWwgb2JqZWN0cy9jbGFzc2VzIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9ucwogKiAtIFRha2VzIGNhcmUgb2YgYEVycm9yYCBvYmplY3Qgc2VyaWFsaXphdGlvbgogKiAtIE9wdGlvbmFsbHkgbGltaXRzIGRlcHRoIG9mIGZpbmFsIG91dHB1dAogKiAtIE9wdGlvbmFsbHkgbGltaXRzIG51bWJlciBvZiBwcm9wZXJ0aWVzL2VsZW1lbnRzIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgb2JqZWN0L2FycmF5CiAqCiAqIEBwYXJhbSBpbnB1dCBUaGUgb2JqZWN0IHRvIGJlIG5vcm1hbGl6ZWQuCiAqIEBwYXJhbSBkZXB0aCBUaGUgbWF4IGRlcHRoIHRvIHdoaWNoIHRvIG5vcm1hbGl6ZSB0aGUgb2JqZWN0LiAoQW55dGhpbmcgZGVlcGVyIHN0cmluZ2lmaWVkIHdob2xlLikKICogQHBhcmFtIG1heFByb3BlcnRpZXMgVGhlIG1heCBudW1iZXIgb2YgZWxlbWVudHMgb3IgcHJvcGVydGllcyB0byBiZSBpbmNsdWRlZCBpbiBhbnkgc2luZ2xlIGFycmF5IG9yCiAqIG9iamVjdCBpbiB0aGUgbm9ybWFsbGl6ZWQgb3V0cHV0LgogKiBAcmV0dXJucyBBIG5vcm1hbGl6ZWQgdmVyc2lvbiBvZiB0aGUgb2JqZWN0LCBvciBgIioqbm9uLXNlcmlhbGl6YWJsZSoqImAgaWYgYW55IGVycm9ycyBhcmUgdGhyb3duIGR1cmluZyBub3JtYWxpemF0aW9uLgogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKZnVuY3Rpb24gbm9ybWFsaXplKGlucHV0LCBkZXB0aCA9IDEwMCwgbWF4UHJvcGVydGllcyA9ICtJbmZpbml0eSkgewogIHRyeSB7CiAgICAvLyBzaW5jZSB3ZSdyZSBhdCB0aGUgb3V0ZXJtb3N0IGxldmVsLCB3ZSBkb24ndCBwcm92aWRlIGEga2V5CiAgICByZXR1cm4gdmlzaXQoJycsIGlucHV0LCBkZXB0aCwgbWF4UHJvcGVydGllcyk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICByZXR1cm4geyBFUlJPUjogYCoqbm9uLXNlcmlhbGl6YWJsZSoqICgke2Vycn0pYCB9OwogIH0KfQoKLyoqCiAqIFZpc2l0cyBhIG5vZGUgdG8gcGVyZm9ybSBub3JtYWxpemF0aW9uIG9uIGl0CiAqCiAqIEBwYXJhbSBrZXkgVGhlIGtleSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBub2RlCiAqIEBwYXJhbSB2YWx1ZSBUaGUgbm9kZSB0byBiZSB2aXNpdGVkCiAqIEBwYXJhbSBkZXB0aCBPcHRpb25hbCBudW1iZXIgaW5kaWNhdGluZyB0aGUgbWF4aW11bSByZWN1cnNpb24gZGVwdGgKICogQHBhcmFtIG1heFByb3BlcnRpZXMgT3B0aW9uYWwgbWF4aW11bSBudW1iZXIgb2YgcHJvcGVydGllcy9lbGVtZW50cyBpbmNsdWRlZCBpbiBhbnkgc2luZ2xlIG9iamVjdC9hcnJheQogKiBAcGFyYW0gbWVtbyBPcHRpb25hbCBNZW1vIGNsYXNzIGhhbmRsaW5nIGRlY3ljbGluZwogKi8KZnVuY3Rpb24gdmlzaXQoCiAga2V5LAogIHZhbHVlLAogIGRlcHRoID0gK0luZmluaXR5LAogIG1heFByb3BlcnRpZXMgPSArSW5maW5pdHksCiAgbWVtbyA9IG1lbW9CdWlsZGVyKCksCikgewogIGNvbnN0IFttZW1vaXplLCB1bm1lbW9pemVdID0gbWVtbzsKCiAgLy8gR2V0IHRoZSBzaW1wbGUgY2FzZXMgb3V0IG9mIHRoZSB3YXkgZmlyc3QKICBpZiAoCiAgICB2YWx1ZSA9PSBudWxsIHx8IC8vIHRoaXMgbWF0Y2hlcyBudWxsIGFuZCB1bmRlZmluZWQgLT4gZXFlcSBub3QgZXFlcWVxCiAgICAoWydudW1iZXInLCAnYm9vbGVhbicsICdzdHJpbmcnXS5pbmNsdWRlcyh0eXBlb2YgdmFsdWUpICYmICFpc05hTiQxKHZhbHVlKSkKICApIHsKICAgIHJldHVybiB2YWx1ZSA7CiAgfQoKICBjb25zdCBzdHJpbmdpZmllZCA9IHN0cmluZ2lmeVZhbHVlKGtleSwgdmFsdWUpOwoKICAvLyBBbnl0aGluZyB3ZSBjb3VsZCBwb3RlbnRpYWxseSBkaWcgaW50byBtb3JlIChvYmplY3RzIG9yIGFycmF5cykgd2lsbCBoYXZlIGNvbWUgYmFjayBhcyBgIltvYmplY3QgWFhYWF0iYC4KICAvLyBFdmVyeXRoaW5nIGVsc2Ugd2lsbCBoYXZlIGFscmVhZHkgYmVlbiBzZXJpYWxpemVkLCBzbyBpZiB3ZSBkb24ndCBzZWUgdGhhdCBwYXR0ZXJuLCB3ZSdyZSBkb25lLgogIGlmICghc3RyaW5naWZpZWQuc3RhcnRzV2l0aCgnW29iamVjdCAnKSkgewogICAgcmV0dXJuIHN0cmluZ2lmaWVkOwogIH0KCiAgLy8gRnJvbSBoZXJlIG9uLCB3ZSBjYW4gYXNzZXJ0IHRoYXQgYHZhbHVlYCBpcyBlaXRoZXIgYW4gb2JqZWN0IG9yIGFuIGFycmF5LgoKICAvLyBEbyBub3Qgbm9ybWFsaXplIG9iamVjdHMgdGhhdCB3ZSBrbm93IGhhdmUgYWxyZWFkeSBiZWVuIG5vcm1hbGl6ZWQuIEFzIGEgZ2VuZXJhbCBydWxlLCB0aGUKICAvLyAiX19zZW50cnlfc2tpcF9ub3JtYWxpemF0aW9uX18iIHByb3BlcnR5IHNob3VsZCBvbmx5IGJlIHVzZWQgc3BhcmluZ2x5IGFuZCBvbmx5IHNob3VsZCBvbmx5IGJlIHNldCBvbiBvYmplY3RzIHRoYXQKICAvLyBoYXZlIGFscmVhZHkgYmVlbiBub3JtYWxpemVkLgogIGlmICgodmFsdWUgKVsnX19zZW50cnlfc2tpcF9ub3JtYWxpemF0aW9uX18nXSkgewogICAgcmV0dXJuIHZhbHVlIDsKICB9CgogIC8vIFdlIGNhbiBzZXQgYF9fc2VudHJ5X292ZXJyaWRlX25vcm1hbGl6YXRpb25fZGVwdGhfX2Agb24gYW4gb2JqZWN0IHRvIGVuc3VyZSB0aGF0IGZyb20gdGhlcmUKICAvLyBXZSBrZWVwIGEgY2VydGFpbiBhbW91bnQgb2YgZGVwdGguCiAgLy8gVGhpcyBzaG91bGQgYmUgdXNlZCBzcGFyaW5nbHksIGUuZy4gd2UgdXNlIGl0IGZvciB0aGUgcmVkdXggaW50ZWdyYXRpb24gdG8gZW5zdXJlIHdlIGdldCBhIGNlcnRhaW4gYW1vdW50IG9mIHN0YXRlLgogIGNvbnN0IHJlbWFpbmluZ0RlcHRoID0KICAgIHR5cGVvZiAodmFsdWUgKVsnX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fJ10gPT09ICdudW1iZXInCiAgICAgID8gKCh2YWx1ZSApWydfX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18nXSApCiAgICAgIDogZGVwdGg7CgogIC8vIFdlJ3JlIGFsc28gZG9uZSBpZiB3ZSd2ZSByZWFjaGVkIHRoZSBtYXggZGVwdGgKICBpZiAocmVtYWluaW5nRGVwdGggPT09IDApIHsKICAgIC8vIEF0IHRoaXMgcG9pbnQgd2Uga25vdyBgc2VyaWFsaXplZGAgaXMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gYCJbb2JqZWN0IFhYWFhdImAuIENsZWFuIGl0IHVwIHNvIGl0J3MganVzdCBgIltYWFhYXSJgLgogICAgcmV0dXJuIHN0cmluZ2lmaWVkLnJlcGxhY2UoJ29iamVjdCAnLCAnJyk7CiAgfQoKICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHZpc2l0ZWQgdGhpcyBicmFuY2gsIGJhaWwgb3V0LCBhcyBpdCdzIGNpcmN1bGFyIHJlZmVyZW5jZS4gSWYgbm90LCBub3RlIHRoYXQgd2UncmUgc2VlaW5nIGl0IG5vdy4KICBpZiAobWVtb2l6ZSh2YWx1ZSkpIHsKICAgIHJldHVybiAnW0NpcmN1bGFyIH5dJzsKICB9CgogIC8vIElmIHRoZSB2YWx1ZSBoYXMgYSBgdG9KU09OYCBtZXRob2QsIHdlIGNhbGwgaXQgdG8gZXh0cmFjdCBtb3JlIGluZm9ybWF0aW9uCiAgY29uc3QgdmFsdWVXaXRoVG9KU09OID0gdmFsdWUgOwogIGlmICh2YWx1ZVdpdGhUb0pTT04gJiYgdHlwZW9mIHZhbHVlV2l0aFRvSlNPTi50b0pTT04gPT09ICdmdW5jdGlvbicpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGpzb25WYWx1ZSA9IHZhbHVlV2l0aFRvSlNPTi50b0pTT04oKTsKICAgICAgLy8gV2UgbmVlZCB0byBub3JtYWxpemUgdGhlIHJldHVybiB2YWx1ZSBvZiBgLnRvSlNPTigpYCBpbiBjYXNlIGl0IGhhcyBjaXJjdWxhciByZWZlcmVuY2VzCiAgICAgIHJldHVybiB2aXNpdCgnJywganNvblZhbHVlLCByZW1haW5pbmdEZXB0aCAtIDEsIG1heFByb3BlcnRpZXMsIG1lbW8pOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIC8vIHBhc3MgKFRoZSBidWlsdC1pbiBgdG9KU09OYCBmYWlsZWQsIGJ1dCB3ZSBjYW4gc3RpbGwgdHJ5IHRvIGRvIGl0IG91cnNlbHZlcykKICAgIH0KICB9CgogIC8vIEF0IHRoaXMgcG9pbnQgd2Uga25vdyB3ZSBlaXRoZXIgaGF2ZSBhbiBvYmplY3Qgb3IgYW4gYXJyYXksIHdlIGhhdmVuJ3Qgc2VlbiBpdCBiZWZvcmUsIGFuZCB3ZSdyZSBnb2luZyB0byByZWN1cnNlCiAgLy8gYmVjYXVzZSB3ZSBoYXZlbid0IHlldCByZWFjaGVkIHRoZSBtYXggZGVwdGguIENyZWF0ZSBhbiBhY2N1bXVsYXRvciB0byBob2xkIHRoZSByZXN1bHRzIG9mIHZpc2l0aW5nIGVhY2gKICAvLyBwcm9wZXJ0eS9lbnRyeSwgYW5kIGtlZXAgdHJhY2sgb2YgdGhlIG51bWJlciBvZiBpdGVtcyB3ZSBhZGQgdG8gaXQuCiAgY29uc3Qgbm9ybWFsaXplZCA9IChBcnJheS5pc0FycmF5KHZhbHVlKSA/IFtdIDoge30pIDsKICBsZXQgbnVtQWRkZWQgPSAwOwoKICAvLyBCZWZvcmUgd2UgYmVnaW4sIGNvbnZlcnRgRXJyb3JgIGFuZGBFdmVudGAgaW5zdGFuY2VzIGludG8gcGxhaW4gb2JqZWN0cywgc2luY2Ugc29tZSBvZiBlYWNoIG9mIHRoZWlyIHJlbGV2YW50CiAgLy8gcHJvcGVydGllcyBhcmUgbm9uLWVudW1lcmFibGUgYW5kIG90aGVyd2lzZSB3b3VsZCBnZXQgbWlzc2VkLgogIGNvbnN0IHZpc2l0YWJsZSA9IGNvbnZlcnRUb1BsYWluT2JqZWN0KHZhbHVlICk7CgogIGZvciAoY29uc3QgdmlzaXRLZXkgaW4gdmlzaXRhYmxlKSB7CiAgICAvLyBBdm9pZCBpdGVyYXRpbmcgb3ZlciBmaWVsZHMgaW4gdGhlIHByb3RvdHlwZSBpZiB0aGV5J3ZlIHNvbWVob3cgYmVlbiBleHBvc2VkIHRvIGVudW1lcmF0aW9uLgogICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmlzaXRhYmxlLCB2aXNpdEtleSkpIHsKICAgICAgY29udGludWU7CiAgICB9CgogICAgaWYgKG51bUFkZGVkID49IG1heFByb3BlcnRpZXMpIHsKICAgICAgbm9ybWFsaXplZFt2aXNpdEtleV0gPSAnW01heFByb3BlcnRpZXMgfl0nOwogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBSZWN1cnNpdmVseSB2aXNpdCBhbGwgdGhlIGNoaWxkIG5vZGVzCiAgICBjb25zdCB2aXNpdFZhbHVlID0gdmlzaXRhYmxlW3Zpc2l0S2V5XTsKICAgIG5vcm1hbGl6ZWRbdmlzaXRLZXldID0gdmlzaXQodmlzaXRLZXksIHZpc2l0VmFsdWUsIHJlbWFpbmluZ0RlcHRoIC0gMSwgbWF4UHJvcGVydGllcywgbWVtbyk7CgogICAgbnVtQWRkZWQrKzsKICB9CgogIC8vIE9uY2Ugd2UndmUgdmlzaXRlZCBhbGwgdGhlIGJyYW5jaGVzLCByZW1vdmUgdGhlIHBhcmVudCBmcm9tIG1lbW8gc3RvcmFnZQogIHVubWVtb2l6ZSh2YWx1ZSk7CgogIC8vIFJldHVybiBhY2N1bXVsYXRlZCB2YWx1ZXMKICByZXR1cm4gbm9ybWFsaXplZDsKfQoKLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqLwovKioKICogU3RyaW5naWZ5IHRoZSBnaXZlbiB2YWx1ZS4gSGFuZGxlcyB2YXJpb3VzIGtub3duIHNwZWNpYWwgdmFsdWVzIGFuZCB0eXBlcy4KICoKICogTm90IG1lYW50IHRvIGJlIHVzZWQgb24gc2ltcGxlIHByaW1pdGl2ZXMgd2hpY2ggYWxyZWFkeSBoYXZlIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLCBhcyBpdCB3aWxsLCBmb3IgZXhhbXBsZSwgdHVybgogKiB0aGUgbnVtYmVyIDEyMzEgaW50byAiW09iamVjdCBOdW1iZXJdIiwgbm9yIG9uIGBudWxsYCwgYXMgaXQgd2lsbCB0aHJvdy4KICoKICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBzdHJpbmdpZnkKICogQHJldHVybnMgQSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gdmFsdWUKICovCmZ1bmN0aW9uIHN0cmluZ2lmeVZhbHVlKAogIGtleSwKICAvLyB0aGlzIHR5cGUgaXMgYSB0aW55IGJpdCBvZiBhIGNoZWF0LCBzaW5jZSB0aGlzIGZ1bmN0aW9uIGRvZXMgaGFuZGxlIE5hTiAod2hpY2ggaXMgdGVjaG5pY2FsbHkgYSBudW1iZXIpLCBidXQgZm9yCiAgLy8gb3VyIGludGVybmFsIHVzZSwgaXQnbGwgZG8KICB2YWx1ZSwKKSB7CiAgdHJ5IHsKICAgIGlmIChrZXkgPT09ICdkb21haW4nICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgKHZhbHVlICkuX2V2ZW50cykgewogICAgICByZXR1cm4gJ1tEb21haW5dJzsKICAgIH0KCiAgICBpZiAoa2V5ID09PSAnZG9tYWluRW1pdHRlcicpIHsKICAgICAgcmV0dXJuICdbRG9tYWluRW1pdHRlcl0nOwogICAgfQoKICAgIC8vIEl0J3Mgc2FmZSB0byB1c2UgYGdsb2JhbGAsIGB3aW5kb3dgLCBhbmQgYGRvY3VtZW50YCBoZXJlIGluIHRoaXMgbWFubmVyLCBhcyB3ZSBhcmUgYXNzZXJ0aW5nIHVzaW5nIGB0eXBlb2ZgIGZpcnN0CiAgICAvLyB3aGljaCB3b24ndCB0aHJvdyBpZiB0aGV5IGFyZSBub3QgcHJlc2VudC4KCiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgPT09IGdsb2JhbCkgewogICAgICByZXR1cm4gJ1tHbG9iYWxdJzsKICAgIH0KCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgPT09IHdpbmRvdykgewogICAgICByZXR1cm4gJ1tXaW5kb3ddJzsKICAgIH0KCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gZG9jdW1lbnQpIHsKICAgICAgcmV0dXJuICdbRG9jdW1lbnRdJzsKICAgIH0KCiAgICBpZiAoaXNWdWVWaWV3TW9kZWwodmFsdWUpKSB7CiAgICAgIHJldHVybiAnW1Z1ZVZpZXdNb2RlbF0nOwogICAgfQoKICAgIC8vIFJlYWN0J3MgU3ludGhldGljRXZlbnQgdGhpbmd5CiAgICBpZiAoaXNTeW50aGV0aWNFdmVudCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuICdbU3ludGhldGljRXZlbnRdJzsKICAgIH0KCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWx1ZSAhPT0gdmFsdWUpIHsKICAgICAgcmV0dXJuICdbTmFOXSc7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gYFtGdW5jdGlvbjogJHtnZXRGdW5jdGlvbk5hbWUodmFsdWUpfV1gOwogICAgfQoKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzeW1ib2wnKSB7CiAgICAgIHJldHVybiBgWyR7U3RyaW5nKHZhbHVlKX1dYDsKICAgIH0KCiAgICAvLyBzdHJpbmdpZmllZCBCaWdJbnRzIGFyZSBpbmRpc3Rpbmd1aXNoYWJsZSBmcm9tIHJlZ3VsYXIgbnVtYmVycywgc28gd2UgbmVlZCB0byBsYWJlbCB0aGVtIHRvIGF2b2lkIGNvbmZ1c2lvbgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2JpZ2ludCcpIHsKICAgICAgcmV0dXJuIGBbQmlnSW50OiAke1N0cmluZyh2YWx1ZSl9XWA7CiAgICB9CgogICAgLy8gTm93IHRoYXQgd2UndmUga25vY2tlZCBvdXQgYWxsIHRoZSBzcGVjaWFsIGNhc2VzIGFuZCB0aGUgcHJpbWl0aXZlcywgYWxsIHdlIGhhdmUgbGVmdCBhcmUgb2JqZWN0cy4gU2ltcGx5IGNhc3RpbmcKICAgIC8vIHRoZW0gdG8gc3RyaW5ncyBtZWFucyB0aGF0IGluc3RhbmNlcyBvZiBjbGFzc2VzIHdoaWNoIGhhdmVuJ3QgZGVmaW5lZCB0aGVpciBgdG9TdHJpbmdUYWdgIHdpbGwganVzdCBjb21lIG91dCBhcwogICAgLy8gYCJbb2JqZWN0IE9iamVjdF0iYC4gSWYgd2UgaW5zdGVhZCBsb29rIGF0IHRoZSBjb25zdHJ1Y3RvcidzIG5hbWUgKHdoaWNoIGlzIHRoZSBzYW1lIGFzIHRoZSBuYW1lIG9mIHRoZSBjbGFzcyksCiAgICAvLyB3ZSBjYW4gbWFrZSBzdXJlIHRoYXQgb25seSBwbGFpbiBvYmplY3RzIGNvbWUgb3V0IHRoYXQgd2F5LgogICAgY29uc3Qgb2JqTmFtZSA9IGdldENvbnN0cnVjdG9yTmFtZSh2YWx1ZSk7CgogICAgLy8gSGFuZGxlIEhUTUwgRWxlbWVudHMKICAgIGlmICgvXkhUTUwoXHcqKUVsZW1lbnQkLy50ZXN0KG9iak5hbWUpKSB7CiAgICAgIHJldHVybiBgW0hUTUxFbGVtZW50OiAke29iak5hbWV9XWA7CiAgICB9CgogICAgcmV0dXJuIGBbb2JqZWN0ICR7b2JqTmFtZX1dYDsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJldHVybiBgKipub24tc2VyaWFsaXphYmxlKiogKCR7ZXJyfSlgOwogIH0KfQovKiBlc2xpbnQtZW5hYmxlIGNvbXBsZXhpdHkgKi8KCmZ1bmN0aW9uIGdldENvbnN0cnVjdG9yTmFtZSh2YWx1ZSkgewogIGNvbnN0IHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSk7CgogIHJldHVybiBwcm90b3R5cGUgPyBwcm90b3R5cGUuY29uc3RydWN0b3IubmFtZSA6ICdudWxsIHByb3RvdHlwZSc7Cn0KCi8qKgogKiBOb3JtYWxpemVzIFVSTHMgaW4gZXhjZXB0aW9ucyBhbmQgc3RhY2t0cmFjZXMgdG8gYSBiYXNlIHBhdGggc28gU2VudHJ5IGNhbiBmaW5nZXJwcmludAogKiBhY3Jvc3MgcGxhdGZvcm1zIGFuZCB3b3JraW5nIGRpcmVjdG9yeS4KICoKICogQHBhcmFtIHVybCBUaGUgVVJMIHRvIGJlIG5vcm1hbGl6ZWQuCiAqIEBwYXJhbSBiYXNlUGF0aCBUaGUgYXBwbGljYXRpb24gYmFzZSBwYXRoLgogKiBAcmV0dXJucyBUaGUgbm9ybWFsaXplZCBVUkwuCiAqLwpmdW5jdGlvbiBub3JtYWxpemVVcmxUb0Jhc2UodXJsLCBiYXNlUGF0aCkgewogIGNvbnN0IGVzY2FwZWRCYXNlID0gYmFzZVBhdGgKICAgIC8vIEJhY2tzbGFzaCB0byBmb3J3YXJkCiAgICAucmVwbGFjZSgvXFwvZywgJy8nKQogICAgLy8gRXNjYXBlIFJlZ0V4cCBzcGVjaWFsIGNoYXJhY3RlcnMKICAgIC5yZXBsYWNlKC9bfFxce30oKVtcXV4kKyo/Ll0vZywgJ1xcJCYnKTsKCiAgbGV0IG5ld1VybCA9IHVybDsKICB0cnkgewogICAgbmV3VXJsID0gZGVjb2RlVVJJKHVybCk7CiAgfSBjYXRjaCAoX09vKSB7CiAgICAvLyBTb21ldGltZSB0aGlzIGJyZWFrcwogIH0KICByZXR1cm4gKAogICAgbmV3VXJsCiAgICAgIC5yZXBsYWNlKC9cXC9nLCAnLycpCiAgICAgIC5yZXBsYWNlKC93ZWJwYWNrOlwvPy9nLCAnJykgLy8gUmVtb3ZlIGludGVybWVkaWF0ZSBiYXNlIHBhdGgKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBzZW50cnktaW50ZXJuYWwvc2RrL25vLXJlZ2V4cC1jb25zdHJ1Y3RvcgogICAgICAucmVwbGFjZShuZXcgUmVnRXhwKGAoZmlsZTovLyk/Lyoke2VzY2FwZWRCYXNlfS8qYCwgJ2lnJyksICdhcHA6Ly8vJykKICApOwp9CgovLyBTbGlnaHRseSBtb2RpZmllZCAobm8gSUU4IHN1cHBvcnQsIEVTNikgYW5kIHRyYW5zY3JpYmVkIHRvIFR5cGVTY3JpcHQKCi8vIFNwbGl0IGEgZmlsZW5hbWUgaW50byBbcm9vdCwgZGlyLCBiYXNlbmFtZSwgZXh0XSwgdW5peCB2ZXJzaW9uCi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuCmNvbnN0IHNwbGl0UGF0aFJlID0gL14oXFMrOlxcfFwvPykoW1xzXFNdKj8pKCg/OlwuezEsMn18W14vXFxdKz98KShcLlteLi9cXF0qfCkpKD86Wy9cXF0qKSQvOwovKiogSlNEb2MgKi8KZnVuY3Rpb24gc3BsaXRQYXRoKGZpbGVuYW1lKSB7CiAgLy8gVHJ1bmNhdGUgZmlsZXMgbmFtZXMgZ3JlYXRlciB0aGFuIDEwMjQgY2hhcmFjdGVycyB0byBhdm9pZCByZWdleCBkb3MKICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L3B1bGwvODczNyNkaXNjdXNzaW9uX3IxMjg1NzE5MTcyCiAgY29uc3QgdHJ1bmNhdGVkID0gZmlsZW5hbWUubGVuZ3RoID4gMTAyNCA/IGA8dHJ1bmNhdGVkPiR7ZmlsZW5hbWUuc2xpY2UoLTEwMjQpfWAgOiBmaWxlbmFtZTsKICBjb25zdCBwYXJ0cyA9IHNwbGl0UGF0aFJlLmV4ZWModHJ1bmNhdGVkKTsKICByZXR1cm4gcGFydHMgPyBwYXJ0cy5zbGljZSgxKSA6IFtdOwp9CgovKiogSlNEb2MgKi8KZnVuY3Rpb24gZGlybmFtZShwYXRoKSB7CiAgY29uc3QgcmVzdWx0ID0gc3BsaXRQYXRoKHBhdGgpOwogIGNvbnN0IHJvb3QgPSByZXN1bHRbMF07CiAgbGV0IGRpciA9IHJlc3VsdFsxXTsKCiAgaWYgKCFyb290ICYmICFkaXIpIHsKICAgIC8vIE5vIGRpcm5hbWUgd2hhdHNvZXZlcgogICAgcmV0dXJuICcuJzsKICB9CgogIGlmIChkaXIpIHsKICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoCiAgICBkaXIgPSBkaXIuc2xpY2UoMCwgZGlyLmxlbmd0aCAtIDEpOwogIH0KCiAgcmV0dXJuIHJvb3QgKyBkaXI7Cn0KCi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1mdW5jdGlvbi1yZXR1cm4tdHlwZSAqLwoKLyoqIFN5bmNQcm9taXNlIGludGVybmFsIHN0YXRlcyAqLwp2YXIgU3RhdGVzOyAoZnVuY3Rpb24gKFN0YXRlcykgewogIC8qKiBQZW5kaW5nICovCiAgY29uc3QgUEVORElORyA9IDA7IFN0YXRlc1tTdGF0ZXNbIlBFTkRJTkciXSA9IFBFTkRJTkddID0gIlBFTkRJTkciOwogIC8qKiBSZXNvbHZlZCAvIE9LICovCiAgY29uc3QgUkVTT0xWRUQgPSAxOyBTdGF0ZXNbU3RhdGVzWyJSRVNPTFZFRCJdID0gUkVTT0xWRURdID0gIlJFU09MVkVEIjsKICAvKiogUmVqZWN0ZWQgLyBFcnJvciAqLwogIGNvbnN0IFJFSkVDVEVEID0gMjsgU3RhdGVzW1N0YXRlc1siUkVKRUNURUQiXSA9IFJFSkVDVEVEXSA9ICJSRUpFQ1RFRCI7Cn0pKFN0YXRlcyB8fCAoU3RhdGVzID0ge30pKTsKCi8vIE92ZXJsb2FkcyBzbyB3ZSBjYW4gY2FsbCByZXNvbHZlZFN5bmNQcm9taXNlIHdpdGhvdXQgYXJndW1lbnRzIGFuZCBnZW5lcmljIGFyZ3VtZW50CgovKioKICogQ3JlYXRlcyBhIHJlc29sdmVkIHN5bmMgcHJvbWlzZS4KICoKICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGgKICogQHJldHVybnMgdGhlIHJlc29sdmVkIHN5bmMgcHJvbWlzZQogKi8KZnVuY3Rpb24gcmVzb2x2ZWRTeW5jUHJvbWlzZSh2YWx1ZSkgewogIHJldHVybiBuZXcgU3luY1Byb21pc2UocmVzb2x2ZSA9PiB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9KTsKfQoKLyoqCiAqIENyZWF0ZXMgYSByZWplY3RlZCBzeW5jIHByb21pc2UuCiAqCiAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdG8gcmVqZWN0IHRoZSBwcm9taXNlIHdpdGgKICogQHJldHVybnMgdGhlIHJlamVjdGVkIHN5bmMgcHJvbWlzZQogKi8KZnVuY3Rpb24gcmVqZWN0ZWRTeW5jUHJvbWlzZShyZWFzb24pIHsKICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChfLCByZWplY3QpID0+IHsKICAgIHJlamVjdChyZWFzb24pOwogIH0pOwp9CgovKioKICogVGhlbmFibGUgY2xhc3MgdGhhdCBiZWhhdmVzIGxpa2UgYSBQcm9taXNlIGFuZCBmb2xsb3dzIGl0J3MgaW50ZXJmYWNlCiAqIGJ1dCBpcyBub3QgYXN5bmMgaW50ZXJuYWxseQogKi8KY2xhc3MgU3luY1Byb21pc2UgewoKICAgY29uc3RydWN0b3IoCiAgICBleGVjdXRvciwKICApIHtTeW5jUHJvbWlzZS5wcm90b3R5cGUuX19pbml0LmNhbGwodGhpcyk7U3luY1Byb21pc2UucHJvdG90eXBlLl9faW5pdDIuY2FsbCh0aGlzKTtTeW5jUHJvbWlzZS5wcm90b3R5cGUuX19pbml0My5jYWxsKHRoaXMpO1N5bmNQcm9taXNlLnByb3RvdHlwZS5fX2luaXQ0LmNhbGwodGhpcyk7CiAgICB0aGlzLl9zdGF0ZSA9IFN0YXRlcy5QRU5ESU5HOwogICAgdGhpcy5faGFuZGxlcnMgPSBbXTsKCiAgICB0cnkgewogICAgICBleGVjdXRvcih0aGlzLl9yZXNvbHZlLCB0aGlzLl9yZWplY3QpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLl9yZWplY3QoZSk7CiAgICB9CiAgfQoKICAvKiogSlNEb2MgKi8KICAgdGhlbigKICAgIG9uZnVsZmlsbGVkLAogICAgb25yZWplY3RlZCwKICApIHsKICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICB0aGlzLl9oYW5kbGVycy5wdXNoKFsKICAgICAgICBmYWxzZSwKICAgICAgICByZXN1bHQgPT4gewogICAgICAgICAgaWYgKCFvbmZ1bGZpbGxlZCkgewogICAgICAgICAgICAvLyBUT0RPOiDCr1xfKOODhClfL8KvCiAgICAgICAgICAgIC8vIFRPRE86IEZJWE1FCiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0ICk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJlc29sdmUob25mdWxmaWxsZWQocmVzdWx0KSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlYXNvbiA9PiB7CiAgICAgICAgICBpZiAoIW9ucmVqZWN0ZWQpIHsKICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJlc29sdmUob25yZWplY3RlZChyZWFzb24pKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIF0pOwogICAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMoKTsKICAgIH0pOwogIH0KCiAgLyoqIEpTRG9jICovCiAgIGNhdGNoKAogICAgb25yZWplY3RlZCwKICApIHsKICAgIHJldHVybiB0aGlzLnRoZW4odmFsID0+IHZhbCwgb25yZWplY3RlZCk7CiAgfQoKICAvKiogSlNEb2MgKi8KICAgZmluYWxseShvbmZpbmFsbHkpIHsKICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBsZXQgdmFsOwogICAgICBsZXQgaXNSZWplY3RlZDsKCiAgICAgIHJldHVybiB0aGlzLnRoZW4oCiAgICAgICAgdmFsdWUgPT4gewogICAgICAgICAgaXNSZWplY3RlZCA9IGZhbHNlOwogICAgICAgICAgdmFsID0gdmFsdWU7CiAgICAgICAgICBpZiAob25maW5hbGx5KSB7CiAgICAgICAgICAgIG9uZmluYWxseSgpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVhc29uID0+IHsKICAgICAgICAgIGlzUmVqZWN0ZWQgPSB0cnVlOwogICAgICAgICAgdmFsID0gcmVhc29uOwogICAgICAgICAgaWYgKG9uZmluYWxseSkgewogICAgICAgICAgICBvbmZpbmFsbHkoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICApLnRoZW4oKCkgPT4gewogICAgICAgIGlmIChpc1JlamVjdGVkKSB7CiAgICAgICAgICByZWplY3QodmFsKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJlc29sdmUodmFsICk7CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvKiogSlNEb2MgKi8KICAgIF9faW5pdCgpIHt0aGlzLl9yZXNvbHZlID0gKHZhbHVlKSA9PiB7CiAgICB0aGlzLl9zZXRSZXN1bHQoU3RhdGVzLlJFU09MVkVELCB2YWx1ZSk7CiAgfTt9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0MigpIHt0aGlzLl9yZWplY3QgPSAocmVhc29uKSA9PiB7CiAgICB0aGlzLl9zZXRSZXN1bHQoU3RhdGVzLlJFSkVDVEVELCByZWFzb24pOwogIH07fQoKICAvKiogSlNEb2MgKi8KICAgIF9faW5pdDMoKSB7dGhpcy5fc2V0UmVzdWx0ID0gKHN0YXRlLCB2YWx1ZSkgPT4gewogICAgaWYgKHRoaXMuX3N0YXRlICE9PSBTdGF0ZXMuUEVORElORykgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGlzVGhlbmFibGUodmFsdWUpKSB7CiAgICAgIHZvaWQgKHZhbHVlICkudGhlbih0aGlzLl9yZXNvbHZlLCB0aGlzLl9yZWplY3QpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTsKICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7CgogICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCk7CiAgfTt9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0NCgpIHt0aGlzLl9leGVjdXRlSGFuZGxlcnMgPSAoKSA9PiB7CiAgICBpZiAodGhpcy5fc3RhdGUgPT09IFN0YXRlcy5QRU5ESU5HKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBjYWNoZWRIYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzLnNsaWNlKCk7CiAgICB0aGlzLl9oYW5kbGVycyA9IFtdOwoKICAgIGNhY2hlZEhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7CiAgICAgIGlmIChoYW5kbGVyWzBdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5fc3RhdGUgPT09IFN0YXRlcy5SRVNPTFZFRCkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXMKICAgICAgICBoYW5kbGVyWzFdKHRoaXMuX3ZhbHVlICk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gU3RhdGVzLlJFSkVDVEVEKSB7CiAgICAgICAgaGFuZGxlclsyXSh0aGlzLl92YWx1ZSk7CiAgICAgIH0KCiAgICAgIGhhbmRsZXJbMF0gPSB0cnVlOwogICAgfSk7CiAgfTt9Cn0KCi8qKgogKiBDcmVhdGVzIGFuIG5ldyBQcm9taXNlQnVmZmVyIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgbGltaXQKICogQHBhcmFtIGxpbWl0IG1heCBudW1iZXIgb2YgcHJvbWlzZXMgdGhhdCBjYW4gYmUgc3RvcmVkIGluIHRoZSBidWZmZXIKICovCmZ1bmN0aW9uIG1ha2VQcm9taXNlQnVmZmVyKGxpbWl0KSB7CiAgY29uc3QgYnVmZmVyID0gW107CgogIGZ1bmN0aW9uIGlzUmVhZHkoKSB7CiAgICByZXR1cm4gbGltaXQgPT09IHVuZGVmaW5lZCB8fCBidWZmZXIubGVuZ3RoIDwgbGltaXQ7CiAgfQoKICAvKioKICAgKiBSZW1vdmUgYSBwcm9taXNlIGZyb20gdGhlIHF1ZXVlLgogICAqCiAgICogQHBhcmFtIHRhc2sgQ2FuIGJlIGFueSBQcm9taXNlTGlrZTxUPgogICAqIEByZXR1cm5zIFJlbW92ZWQgcHJvbWlzZS4KICAgKi8KICBmdW5jdGlvbiByZW1vdmUodGFzaykgewogICAgcmV0dXJuIGJ1ZmZlci5zcGxpY2UoYnVmZmVyLmluZGV4T2YodGFzayksIDEpWzBdOwogIH0KCiAgLyoqCiAgICogQWRkIGEgcHJvbWlzZSAocmVwcmVzZW50aW5nIGFuIGluLWZsaWdodCBhY3Rpb24pIHRvIHRoZSBxdWV1ZSwgYW5kIHNldCBpdCB0byByZW1vdmUgaXRzZWxmIG9uIGZ1bGZpbGxtZW50LgogICAqCiAgICogQHBhcmFtIHRhc2tQcm9kdWNlciBBIGZ1bmN0aW9uIHByb2R1Y2luZyBhbnkgUHJvbWlzZUxpa2U8VD47IEluIHByZXZpb3VzIHZlcnNpb25zIHRoaXMgdXNlZCB0byBiZSBgdGFzazoKICAgKiAgICAgICAgUHJvbWlzZUxpa2U8VD5gLCBidXQgdW5kZXIgdGhhdCBtb2RlbCwgUHJvbWlzZXMgd2VyZSBpbnN0YW50bHkgY3JlYXRlZCBvbiB0aGUgY2FsbC1zaXRlIGFuZCB0aGVpciBleGVjdXRvcgogICAqICAgICAgICBmdW5jdGlvbnMgdGhlcmVmb3JlIHJhbiBpbW1lZGlhdGVseS4gVGh1cywgZXZlbiBpZiB0aGUgYnVmZmVyIHdhcyBmdWxsLCB0aGUgYWN0aW9uIHN0aWxsIGhhcHBlbmVkLiBCeQogICAqICAgICAgICByZXF1aXJpbmcgdGhlIHByb21pc2UgdG8gYmUgd3JhcHBlZCBpbiBhIGZ1bmN0aW9uLCB3ZSBjYW4gZGVmZXIgcHJvbWlzZSBjcmVhdGlvbiB1bnRpbCBhZnRlciB0aGUgYnVmZmVyCiAgICogICAgICAgIGxpbWl0IGNoZWNrLgogICAqIEByZXR1cm5zIFRoZSBvcmlnaW5hbCBwcm9taXNlLgogICAqLwogIGZ1bmN0aW9uIGFkZCh0YXNrUHJvZHVjZXIpIHsKICAgIGlmICghaXNSZWFkeSgpKSB7CiAgICAgIHJldHVybiByZWplY3RlZFN5bmNQcm9taXNlKG5ldyBTZW50cnlFcnJvcignTm90IGFkZGluZyBQcm9taXNlIGJlY2F1c2UgYnVmZmVyIGxpbWl0IHdhcyByZWFjaGVkLicpKTsKICAgIH0KCiAgICAvLyBzdGFydCB0aGUgdGFzayBhbmQgYWRkIGl0cyBwcm9taXNlIHRvIHRoZSBxdWV1ZQogICAgY29uc3QgdGFzayA9IHRhc2tQcm9kdWNlcigpOwogICAgaWYgKGJ1ZmZlci5pbmRleE9mKHRhc2spID09PSAtMSkgewogICAgICBidWZmZXIucHVzaCh0YXNrKTsKICAgIH0KICAgIHZvaWQgdGFzawogICAgICAudGhlbigoKSA9PiByZW1vdmUodGFzaykpCiAgICAgIC8vIFVzZSBgdGhlbihudWxsLCByZWplY3Rpb25IYW5kbGVyKWAgcmF0aGVyIHRoYW4gYGNhdGNoKHJlamVjdGlvbkhhbmRsZXIpYCBzbyB0aGF0IHdlIGNhbiB1c2UgYFByb21pc2VMaWtlYAogICAgICAvLyByYXRoZXIgdGhhbiBgUHJvbWlzZWAuIGBQcm9taXNlTGlrZWAgZG9lc24ndCBoYXZlIGEgYC5jYXRjaGAgbWV0aG9kLCBtYWtpbmcgaXRzIHBvbHlmaWxsIHNtYWxsZXIuIChFUzUgZGlkbid0CiAgICAgIC8vIGhhdmUgcHJvbWlzZXMsIHNvIFRTIGhhcyB0byBwb2x5ZmlsbCB3aGVuIGRvd24tY29tcGlsaW5nLikKICAgICAgLnRoZW4obnVsbCwgKCkgPT4KICAgICAgICByZW1vdmUodGFzaykudGhlbihudWxsLCAoKSA9PiB7CiAgICAgICAgICAvLyBXZSBoYXZlIHRvIGFkZCBhbm90aGVyIGNhdGNoIGhlcmUgYmVjYXVzZSBgcmVtb3ZlKClgIHN0YXJ0cyBhIG5ldyBwcm9taXNlIGNoYWluLgogICAgICAgIH0pLAogICAgICApOwogICAgcmV0dXJuIHRhc2s7CiAgfQoKICAvKioKICAgKiBXYWl0IGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUgb3IgZm9yIHRpbWVvdXQgdG8gZXhwaXJlLCB3aGljaGV2ZXIgY29tZXMgZmlyc3QuCiAgICoKICAgKiBAcGFyYW0gdGltZW91dCBUaGUgdGltZSwgaW4gbXMsIGFmdGVyIHdoaWNoIHRvIHJlc29sdmUgdG8gYGZhbHNlYCBpZiB0aGUgcXVldWUgaXMgc3RpbGwgbm9uLWVtcHR5LiBQYXNzaW5nIGAwYCAob3IKICAgKiBub3QgcGFzc2luZyBhbnl0aGluZykgd2lsbCBtYWtlIHRoZSBwcm9taXNlIHdhaXQgYXMgbG9uZyBhcyBpdCB0YWtlcyBmb3IgdGhlIHF1ZXVlIHRvIGRyYWluIGJlZm9yZSByZXNvbHZpbmcgdG8KICAgKiBgdHJ1ZWAuCiAgICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIHdpbGwgcmVzb2x2ZSB0byBgdHJ1ZWAgaWYgdGhlIHF1ZXVlIGlzIGFscmVhZHkgZW1wdHkgb3IgZHJhaW5zIGJlZm9yZSB0aGUgdGltZW91dCwgYW5kCiAgICogYGZhbHNlYCBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBkcmFpbih0aW1lb3V0KSB7CiAgICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgbGV0IGNvdW50ZXIgPSBidWZmZXIubGVuZ3RoOwoKICAgICAgaWYgKCFjb3VudGVyKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7CiAgICAgIH0KCiAgICAgIC8vIHdhaXQgZm9yIGB0aW1lb3V0YCBtcyBhbmQgdGhlbiByZXNvbHZlIHRvIGBmYWxzZWAgKGlmIG5vdCBjYW5jZWxsZWQgZmlyc3QpCiAgICAgIGNvbnN0IGNhcHR1cmVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0aW1lb3V0ICYmIHRpbWVvdXQgPiAwKSB7CiAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0sIHRpbWVvdXQpOwoKICAgICAgLy8gaWYgYWxsIHByb21pc2VzIHJlc29sdmUgaW4gdGltZSwgY2FuY2VsIHRoZSB0aW1lciBhbmQgcmVzb2x2ZSB0byBgdHJ1ZWAKICAgICAgYnVmZmVyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgdm9pZCByZXNvbHZlZFN5bmNQcm9taXNlKGl0ZW0pLnRoZW4oKCkgPT4gewogICAgICAgICAgaWYgKCEtLWNvdW50ZXIpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNhcHR1cmVkU2V0VGltZW91dCk7CiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICB9KTsKICB9CgogIHJldHVybiB7CiAgICAkOiBidWZmZXIsCiAgICBhZGQsCiAgICBkcmFpbiwKICB9Owp9Cgpjb25zdCBPTkVfU0VDT05EX0lOX01TID0gMTAwMDsKCi8qKgogKiBBIHBhcnRpYWwgZGVmaW5pdGlvbiBvZiB0aGUgW1BlcmZvcm1hbmNlIFdlYiBBUElde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9QZXJmb3JtYW5jZX0KICogZm9yIGFjY2Vzc2luZyBhIGhpZ2gtcmVzb2x1dGlvbiBtb25vdG9uaWMgY2xvY2suCiAqLwoKLyoqCiAqIFJldHVybnMgYSB0aW1lc3RhbXAgaW4gc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaCB1c2luZyB0aGUgRGF0ZSBBUEkuCiAqCiAqIFRPRE8odjgpOiBSZXR1cm4gdHlwZSBzaG91bGQgYmUgcm91bmRlZC4KICovCmZ1bmN0aW9uIGRhdGVUaW1lc3RhbXBJblNlY29uZHMoKSB7CiAgcmV0dXJuIERhdGUubm93KCkgLyBPTkVfU0VDT05EX0lOX01TOwp9CgovKioKICogUmV0dXJucyBhIHdyYXBwZXIgYXJvdW5kIHRoZSBuYXRpdmUgUGVyZm9ybWFuY2UgQVBJIGJyb3dzZXIgaW1wbGVtZW50YXRpb24sIG9yIHVuZGVmaW5lZCBmb3IgYnJvd3NlcnMgdGhhdCBkbyBub3QKICogc3VwcG9ydCB0aGUgQVBJLgogKgogKiBXcmFwcGluZyB0aGUgbmF0aXZlIEFQSSB3b3JrcyBhcm91bmQgZGlmZmVyZW5jZXMgaW4gYmVoYXZpb3IgZnJvbSBkaWZmZXJlbnQgYnJvd3NlcnMuCiAqLwpmdW5jdGlvbiBjcmVhdGVVbml4VGltZXN0YW1wSW5TZWNvbmRzRnVuYygpIHsKICBjb25zdCB7IHBlcmZvcm1hbmNlIH0gPSBHTE9CQUxfT0JKIDsKICBpZiAoIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIHJldHVybiBkYXRlVGltZXN0YW1wSW5TZWNvbmRzOwogIH0KCiAgLy8gU29tZSBicm93c2VyIGFuZCBlbnZpcm9ubWVudHMgZG9uJ3QgaGF2ZSBhIHRpbWVPcmlnaW4sIHNvIHdlIGZhbGxiYWNrIHRvCiAgLy8gdXNpbmcgRGF0ZS5ub3coKSB0byBjb21wdXRlIHRoZSBzdGFydGluZyB0aW1lLgogIGNvbnN0IGFwcHJveFN0YXJ0aW5nVGltZU9yaWdpbiA9IERhdGUubm93KCkgLSBwZXJmb3JtYW5jZS5ub3coKTsKICBjb25zdCB0aW1lT3JpZ2luID0gcGVyZm9ybWFuY2UudGltZU9yaWdpbiA9PSB1bmRlZmluZWQgPyBhcHByb3hTdGFydGluZ1RpbWVPcmlnaW4gOiBwZXJmb3JtYW5jZS50aW1lT3JpZ2luOwoKICAvLyBwZXJmb3JtYW5jZS5ub3coKSBpcyBhIG1vbm90b25pYyBjbG9jaywgd2hpY2ggbWVhbnMgaXQgc3RhcnRzIGF0IDAgd2hlbiB0aGUgcHJvY2VzcyBiZWdpbnMuIFRvIGdldCB0aGUgY3VycmVudAogIC8vIHdhbGwgY2xvY2sgdGltZSAoYWN0dWFsIFVOSVggdGltZXN0YW1wKSwgd2UgbmVlZCB0byBhZGQgdGhlIHN0YXJ0aW5nIHRpbWUgb3JpZ2luIGFuZCB0aGUgY3VycmVudCB0aW1lIGVsYXBzZWQuCiAgLy8KICAvLyBUT0RPOiBUaGlzIGRvZXMgbm90IGFjY291bnQgZm9yIHRoZSBjYXNlIHdoZXJlIHRoZSBtb25vdG9uaWMgY2xvY2sgdGhhdCBwb3dlcnMgcGVyZm9ybWFuY2Uubm93KCkgZHJpZnRzIGZyb20gdGhlCiAgLy8gd2FsbCBjbG9jayB0aW1lLCB3aGljaCBjYXVzZXMgdGhlIHJldHVybmVkIHRpbWVzdGFtcCB0byBiZSBpbmFjY3VyYXRlLiBXZSBzaG91bGQgaW52ZXN0aWdhdGUgaG93IHRvIGRldGVjdCBhbmQKICAvLyBjb3JyZWN0IGZvciB0aGlzLgogIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMjU5MAogIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21kbi9jb250ZW50L2lzc3Vlcy80NzEzCiAgLy8gU2VlOiBodHRwczovL2Rldi50by9ub2Ftci93aGVuLWEtbWlsbGlzZWNvbmQtaXMtbm90LWEtbWlsbGlzZWNvbmQtM2g2CiAgcmV0dXJuICgpID0+IHsKICAgIHJldHVybiAodGltZU9yaWdpbiArIHBlcmZvcm1hbmNlLm5vdygpKSAvIE9ORV9TRUNPTkRfSU5fTVM7CiAgfTsKfQoKLyoqCiAqIFJldHVybnMgYSB0aW1lc3RhbXAgaW4gc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaCB1c2luZyBlaXRoZXIgdGhlIFBlcmZvcm1hbmNlIG9yIERhdGUgQVBJcywgZGVwZW5kaW5nIG9uIHRoZQogKiBhdmFpbGFiaWxpdHkgb2YgdGhlIFBlcmZvcm1hbmNlIEFQSS4KICoKICogQlVHOiBOb3RlIHRoYXQgYmVjYXVzZSBvZiBob3cgYnJvd3NlcnMgaW1wbGVtZW50IHRoZSBQZXJmb3JtYW5jZSBBUEksIHRoZSBjbG9jayBtaWdodCBzdG9wIHdoZW4gdGhlIGNvbXB1dGVyIGlzCiAqIGFzbGVlcC4gVGhpcyBjcmVhdGVzIGEgc2tldyBiZXR3ZWVuIGBkYXRlVGltZXN0YW1wSW5TZWNvbmRzYCBhbmQgYHRpbWVzdGFtcEluU2Vjb25kc2AuIFRoZQogKiBza2V3IGNhbiBncm93IHRvIGFyYml0cmFyeSBhbW91bnRzIGxpa2UgZGF5cywgd2Vla3Mgb3IgbW9udGhzLgogKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMjU5MC4KICovCmNvbnN0IHRpbWVzdGFtcEluU2Vjb25kcyA9IGNyZWF0ZVVuaXhUaW1lc3RhbXBJblNlY29uZHNGdW5jKCk7CgovKioKICogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgdGhlIFVOSVggZXBvY2guIFRoaXMgdmFsdWUgaXMgb25seSB1c2FibGUgaW4gYSBicm93c2VyLCBhbmQgb25seSB3aGVuIHRoZQogKiBwZXJmb3JtYW5jZSBBUEkgaXMgYXZhaWxhYmxlLgogKi8KKCgpID0+IHsKICAvLyBVbmZvcnR1bmF0ZWx5IGJyb3dzZXJzIG1heSByZXBvcnQgYW4gaW5hY2N1cmF0ZSB0aW1lIG9yaWdpbiBkYXRhLCB0aHJvdWdoIGVpdGhlciBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIG9yCiAgLy8gcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCwgd2hpY2ggcmVzdWx0cyBpbiBwb29yIHJlc3VsdHMgaW4gcGVyZm9ybWFuY2UgZGF0YS4gV2Ugb25seSB0cmVhdCB0aW1lIG9yaWdpbgogIC8vIGRhdGEgYXMgcmVsaWFibGUgaWYgdGhleSBhcmUgd2l0aGluIGEgcmVhc29uYWJsZSB0aHJlc2hvbGQgb2YgdGhlIGN1cnJlbnQgdGltZS4KCiAgY29uc3QgeyBwZXJmb3JtYW5jZSB9ID0gR0xPQkFMX09CSiA7CiAgaWYgKCFwZXJmb3JtYW5jZSB8fCAhcGVyZm9ybWFuY2Uubm93KSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgY29uc3QgdGhyZXNob2xkID0gMzYwMCAqIDEwMDA7CiAgY29uc3QgcGVyZm9ybWFuY2VOb3cgPSBwZXJmb3JtYW5jZS5ub3coKTsKICBjb25zdCBkYXRlTm93ID0gRGF0ZS5ub3coKTsKCiAgLy8gaWYgdGltZU9yaWdpbiBpc24ndCBhdmFpbGFibGUgc2V0IGRlbHRhIHRvIHRocmVzaG9sZCBzbyBpdCBpc24ndCB1c2VkCiAgY29uc3QgdGltZU9yaWdpbkRlbHRhID0gcGVyZm9ybWFuY2UudGltZU9yaWdpbgogICAgPyBNYXRoLmFicyhwZXJmb3JtYW5jZS50aW1lT3JpZ2luICsgcGVyZm9ybWFuY2VOb3cgLSBkYXRlTm93KQogICAgOiB0aHJlc2hvbGQ7CiAgY29uc3QgdGltZU9yaWdpbklzUmVsaWFibGUgPSB0aW1lT3JpZ2luRGVsdGEgPCB0aHJlc2hvbGQ7CgogIC8vIFdoaWxlIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBwZXJmb3JtYW5jZS50aW1lT3JpZ2luLCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luCiAgLy8gaXMgbm90IGFzIHdpZGVseSBzdXBwb3J0ZWQuIE5hbWVseSwgcGVyZm9ybWFuY2UudGltZU9yaWdpbiBpcyB1bmRlZmluZWQgaW4gU2FmYXJpIGFzIG9mIHdyaXRpbmcuCiAgLy8gQWxzbyBhcyBvZiB3cml0aW5nLCBwZXJmb3JtYW5jZS50aW1pbmcgaXMgbm90IGF2YWlsYWJsZSBpbiBXZWIgV29ya2VycyBpbiBtYWluc3RyZWFtIGJyb3dzZXJzLCBzbyBpdCBpcyBub3QgYWx3YXlzCiAgLy8gYSB2YWxpZCBmYWxsYmFjay4gSW4gdGhlIGFic2VuY2Ugb2YgYW4gaW5pdGlhbCB0aW1lIHByb3ZpZGVkIGJ5IHRoZSBicm93c2VyLCBmYWxsYmFjayB0byB0aGUgY3VycmVudCB0aW1lIGZyb20gdGhlCiAgLy8gRGF0ZSBBUEkuCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCiAgY29uc3QgbmF2aWdhdGlvblN0YXJ0ID0gcGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7CiAgY29uc3QgaGFzTmF2aWdhdGlvblN0YXJ0ID0gdHlwZW9mIG5hdmlnYXRpb25TdGFydCA9PT0gJ251bWJlcic7CiAgLy8gaWYgbmF2aWdhdGlvblN0YXJ0IGlzbid0IGF2YWlsYWJsZSBzZXQgZGVsdGEgdG8gdGhyZXNob2xkIHNvIGl0IGlzbid0IHVzZWQKICBjb25zdCBuYXZpZ2F0aW9uU3RhcnREZWx0YSA9IGhhc05hdmlnYXRpb25TdGFydCA/IE1hdGguYWJzKG5hdmlnYXRpb25TdGFydCArIHBlcmZvcm1hbmNlTm93IC0gZGF0ZU5vdykgOiB0aHJlc2hvbGQ7CiAgY29uc3QgbmF2aWdhdGlvblN0YXJ0SXNSZWxpYWJsZSA9IG5hdmlnYXRpb25TdGFydERlbHRhIDwgdGhyZXNob2xkOwoKICBpZiAodGltZU9yaWdpbklzUmVsaWFibGUgfHwgbmF2aWdhdGlvblN0YXJ0SXNSZWxpYWJsZSkgewogICAgLy8gVXNlIHRoZSBtb3JlIHJlbGlhYmxlIHRpbWUgb3JpZ2luCiAgICBpZiAodGltZU9yaWdpbkRlbHRhIDw9IG5hdmlnYXRpb25TdGFydERlbHRhKSB7CiAgICAgIHJldHVybiBwZXJmb3JtYW5jZS50aW1lT3JpZ2luOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG5hdmlnYXRpb25TdGFydDsKICAgIH0KICB9CiAgcmV0dXJuIGRhdGVOb3c7Cn0pKCk7CgovKioKICogQ3JlYXRlcyBhbiBlbnZlbG9wZS4KICogTWFrZSBzdXJlIHRvIGFsd2F5cyBleHBsaWNpdGx5IHByb3ZpZGUgdGhlIGdlbmVyaWMgdG8gdGhpcyBmdW5jdGlvbgogKiBzbyB0aGF0IHRoZSBlbnZlbG9wZSB0eXBlcyByZXNvbHZlIGNvcnJlY3RseS4KICovCmZ1bmN0aW9uIGNyZWF0ZUVudmVsb3BlKGhlYWRlcnMsIGl0ZW1zID0gW10pIHsKICByZXR1cm4gW2hlYWRlcnMsIGl0ZW1zXSA7Cn0KCi8qKgogKiBDb252ZW5pZW5jZSBmdW5jdGlvbiB0byBsb29wIHRocm91Z2ggdGhlIGl0ZW1zIGFuZCBpdGVtIHR5cGVzIG9mIGFuIGVudmVsb3BlLgogKiAoVGhpcyBmdW5jdGlvbiB3YXMgbW9zdGx5IGNyZWF0ZWQgYmVjYXVzZSB3b3JraW5nIHdpdGggZW52ZWxvcGUgdHlwZXMgaXMgcGFpbmZ1bCBhdCB0aGUgbW9tZW50KQogKgogKiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVlLCB0aGUgcmVzdCBvZiB0aGUgaXRlbXMgd2lsbCBiZSBza2lwcGVkLgogKi8KZnVuY3Rpb24gZm9yRWFjaEVudmVsb3BlSXRlbSgKICBlbnZlbG9wZSwKICBjYWxsYmFjaywKKSB7CiAgY29uc3QgZW52ZWxvcGVJdGVtcyA9IGVudmVsb3BlWzFdOwoKICBmb3IgKGNvbnN0IGVudmVsb3BlSXRlbSBvZiBlbnZlbG9wZUl0ZW1zKSB7CiAgICBjb25zdCBlbnZlbG9wZUl0ZW1UeXBlID0gZW52ZWxvcGVJdGVtWzBdLnR5cGU7CiAgICBjb25zdCByZXN1bHQgPSBjYWxsYmFjayhlbnZlbG9wZUl0ZW0sIGVudmVsb3BlSXRlbVR5cGUpOwoKICAgIGlmIChyZXN1bHQpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBFbmNvZGUgYSBzdHJpbmcgdG8gVVRGOC4KICovCmZ1bmN0aW9uIGVuY29kZVVURjgoaW5wdXQsIHRleHRFbmNvZGVyKSB7CiAgY29uc3QgdXRmOCA9IHRleHRFbmNvZGVyIHx8IG5ldyBUZXh0RW5jb2RlcigpOwogIHJldHVybiB1dGY4LmVuY29kZShpbnB1dCk7Cn0KCi8qKgogKiBTZXJpYWxpemVzIGFuIGVudmVsb3BlLgogKi8KZnVuY3Rpb24gc2VyaWFsaXplRW52ZWxvcGUoZW52ZWxvcGUsIHRleHRFbmNvZGVyKSB7CiAgY29uc3QgW2VudkhlYWRlcnMsIGl0ZW1zXSA9IGVudmVsb3BlOwoKICAvLyBJbml0aWFsbHkgd2UgY29uc3RydWN0IG91ciBlbnZlbG9wZSBhcyBhIHN0cmluZyBhbmQgb25seSBjb252ZXJ0IHRvIGJpbmFyeSBjaHVua3MgaWYgd2UgZW5jb3VudGVyIGJpbmFyeSBkYXRhCiAgbGV0IHBhcnRzID0gSlNPTi5zdHJpbmdpZnkoZW52SGVhZGVycyk7CgogIGZ1bmN0aW9uIGFwcGVuZChuZXh0KSB7CiAgICBpZiAodHlwZW9mIHBhcnRzID09PSAnc3RyaW5nJykgewogICAgICBwYXJ0cyA9IHR5cGVvZiBuZXh0ID09PSAnc3RyaW5nJyA/IHBhcnRzICsgbmV4dCA6IFtlbmNvZGVVVEY4KHBhcnRzLCB0ZXh0RW5jb2RlciksIG5leHRdOwogICAgfSBlbHNlIHsKICAgICAgcGFydHMucHVzaCh0eXBlb2YgbmV4dCA9PT0gJ3N0cmluZycgPyBlbmNvZGVVVEY4KG5leHQsIHRleHRFbmNvZGVyKSA6IG5leHQpOwogICAgfQogIH0KCiAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7CiAgICBjb25zdCBbaXRlbUhlYWRlcnMsIHBheWxvYWRdID0gaXRlbTsKCiAgICBhcHBlbmQoYFxuJHtKU09OLnN0cmluZ2lmeShpdGVtSGVhZGVycyl9XG5gKTsKCiAgICBpZiAodHlwZW9mIHBheWxvYWQgPT09ICdzdHJpbmcnIHx8IHBheWxvYWQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7CiAgICAgIGFwcGVuZChwYXlsb2FkKTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBzdHJpbmdpZmllZFBheWxvYWQ7CiAgICAgIHRyeSB7CiAgICAgICAgc3RyaW5naWZpZWRQYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBJbiBjYXNlLCBkZXNwaXRlIGFsbCBvdXIgZWZmb3J0cyB0byBrZWVwIGBwYXlsb2FkYCBjaXJjdWxhci1kZXBlbmRlbmN5LWZyZWUsIGBKU09OLnN0cmluaWZ5KClgIHN0aWxsCiAgICAgICAgLy8gZmFpbHMsIHdlIHRyeSBhZ2FpbiBhZnRlciBub3JtYWxpemluZyBpdCBhZ2FpbiB3aXRoIGluZmluaXRlIG5vcm1hbGl6YXRpb24gZGVwdGguIFRoaXMgb2YgY291cnNlIGhhcyBhCiAgICAgICAgLy8gcGVyZm9ybWFuY2UgaW1wYWN0IGJ1dCBpbiB0aGlzIGNhc2UgYSBwZXJmb3JtYW5jZSBoaXQgaXMgYmV0dGVyIHRoYW4gdGhyb3dpbmcuCiAgICAgICAgc3RyaW5naWZpZWRQYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkobm9ybWFsaXplKHBheWxvYWQpKTsKICAgICAgfQogICAgICBhcHBlbmQoc3RyaW5naWZpZWRQYXlsb2FkKTsKICAgIH0KICB9CgogIHJldHVybiB0eXBlb2YgcGFydHMgPT09ICdzdHJpbmcnID8gcGFydHMgOiBjb25jYXRCdWZmZXJzKHBhcnRzKTsKfQoKZnVuY3Rpb24gY29uY2F0QnVmZmVycyhidWZmZXJzKSB7CiAgY29uc3QgdG90YWxMZW5ndGggPSBidWZmZXJzLnJlZHVjZSgoYWNjLCBidWYpID0+IGFjYyArIGJ1Zi5sZW5ndGgsIDApOwoKICBjb25zdCBtZXJnZWQgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7CiAgbGV0IG9mZnNldCA9IDA7CiAgZm9yIChjb25zdCBidWZmZXIgb2YgYnVmZmVycykgewogICAgbWVyZ2VkLnNldChidWZmZXIsIG9mZnNldCk7CiAgICBvZmZzZXQgKz0gYnVmZmVyLmxlbmd0aDsKICB9CgogIHJldHVybiBtZXJnZWQ7Cn0KCmNvbnN0IElURU1fVFlQRV9UT19EQVRBX0NBVEVHT1JZX01BUCA9IHsKICBzZXNzaW9uOiAnc2Vzc2lvbicsCiAgc2Vzc2lvbnM6ICdzZXNzaW9uJywKICBhdHRhY2htZW50OiAnYXR0YWNobWVudCcsCiAgdHJhbnNhY3Rpb246ICd0cmFuc2FjdGlvbicsCiAgZXZlbnQ6ICdlcnJvcicsCiAgY2xpZW50X3JlcG9ydDogJ2ludGVybmFsJywKICB1c2VyX3JlcG9ydDogJ2RlZmF1bHQnLAogIHByb2ZpbGU6ICdwcm9maWxlJywKICByZXBsYXlfZXZlbnQ6ICdyZXBsYXknLAogIHJlcGxheV9yZWNvcmRpbmc6ICdyZXBsYXknLAogIGNoZWNrX2luOiAnbW9uaXRvcicsCiAgZmVlZGJhY2s6ICdmZWVkYmFjaycsCiAgLy8gVE9ETzogVGhpcyBpcyBhIHRlbXBvcmFyeSB3b3JrYXJvdW5kIHVudGlsIHdlIGhhdmUgYSBwcm9wZXIgZGF0YSBjYXRlZ29yeSBmb3IgbWV0cmljcwogIHN0YXRzZDogJ3Vua25vd24nLAp9OwoKLyoqCiAqIE1hcHMgdGhlIHR5cGUgb2YgYW4gZW52ZWxvcGUgaXRlbSB0byBhIGRhdGEgY2F0ZWdvcnkuCiAqLwpmdW5jdGlvbiBlbnZlbG9wZUl0ZW1UeXBlVG9EYXRhQ2F0ZWdvcnkodHlwZSkgewogIHJldHVybiBJVEVNX1RZUEVfVE9fREFUQV9DQVRFR09SWV9NQVBbdHlwZV07Cn0KCi8qKiBFeHRyYWN0cyB0aGUgbWluaW1hbCBTREsgaW5mbyBmcm9tIGZyb20gdGhlIG1ldGFkYXRhIG9yIGFuIGV2ZW50cyAqLwpmdW5jdGlvbiBnZXRTZGtNZXRhZGF0YUZvckVudmVsb3BlSGVhZGVyKG1ldGFkYXRhT3JFdmVudCkgewogIGlmICghbWV0YWRhdGFPckV2ZW50IHx8ICFtZXRhZGF0YU9yRXZlbnQuc2RrKSB7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IHsgbmFtZSwgdmVyc2lvbiB9ID0gbWV0YWRhdGFPckV2ZW50LnNkazsKICByZXR1cm4geyBuYW1lLCB2ZXJzaW9uIH07Cn0KCi8qKgogKiBDcmVhdGVzIGV2ZW50IGVudmVsb3BlIGhlYWRlcnMsIGJhc2VkIG9uIGV2ZW50LCBzZGsgaW5mbyBhbmQgdHVubmVsCiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gd2FzIGV4dHJhY3RlZCBmcm9tIHRoZSBjb3JlIHBhY2thZ2UgdG8gbWFrZSBpdCBhdmFpbGFibGUgaW4gUmVwbGF5CiAqLwpmdW5jdGlvbiBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycygKICBldmVudCwKICBzZGtJbmZvLAogIHR1bm5lbCwKICBkc24sCikgewogIGNvbnN0IGR5bmFtaWNTYW1wbGluZ0NvbnRleHQgPSBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEgJiYgZXZlbnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQ7CiAgcmV0dXJuIHsKICAgIGV2ZW50X2lkOiBldmVudC5ldmVudF9pZCAsCiAgICBzZW50X2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAuLi4oc2RrSW5mbyAmJiB7IHNkazogc2RrSW5mbyB9KSwKICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYgeyBkc246IGRzblRvU3RyaW5nKGRzbikgfSksCiAgICAuLi4oZHluYW1pY1NhbXBsaW5nQ29udGV4dCAmJiB7CiAgICAgIHRyYWNlOiBkcm9wVW5kZWZpbmVkS2V5cyh7IC4uLmR5bmFtaWNTYW1wbGluZ0NvbnRleHQgfSksCiAgICB9KSwKICB9Owp9CgovLyBJbnRlbnRpb25hbGx5IGtlZXBpbmcgdGhlIGtleSBicm9hZCwgYXMgd2UgZG9uJ3Qga25vdyBmb3Igc3VyZSB3aGF0IHJhdGUgbGltaXQgaGVhZGVycyBnZXQgcmV0dXJuZWQgZnJvbSBiYWNrZW5kCgpjb25zdCBERUZBVUxUX1JFVFJZX0FGVEVSID0gNjAgKiAxMDAwOyAvLyA2MCBzZWNvbmRzCgovKioKICogRXh0cmFjdHMgUmV0cnktQWZ0ZXIgdmFsdWUgZnJvbSB0aGUgcmVxdWVzdCBoZWFkZXIgb3IgcmV0dXJucyBkZWZhdWx0IHZhbHVlCiAqIEBwYXJhbSBoZWFkZXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mICdSZXRyeS1BZnRlcicgaGVhZGVyCiAqIEBwYXJhbSBub3cgY3VycmVudCB1bml4IHRpbWVzdGFtcAogKgogKi8KZnVuY3Rpb24gcGFyc2VSZXRyeUFmdGVySGVhZGVyKGhlYWRlciwgbm93ID0gRGF0ZS5ub3coKSkgewogIGNvbnN0IGhlYWRlckRlbGF5ID0gcGFyc2VJbnQoYCR7aGVhZGVyfWAsIDEwKTsKICBpZiAoIWlzTmFOKGhlYWRlckRlbGF5KSkgewogICAgcmV0dXJuIGhlYWRlckRlbGF5ICogMTAwMDsKICB9CgogIGNvbnN0IGhlYWRlckRhdGUgPSBEYXRlLnBhcnNlKGAke2hlYWRlcn1gKTsKICBpZiAoIWlzTmFOKGhlYWRlckRhdGUpKSB7CiAgICByZXR1cm4gaGVhZGVyRGF0ZSAtIG5vdzsKICB9CgogIHJldHVybiBERUZBVUxUX1JFVFJZX0FGVEVSOwp9CgovKioKICogR2V0cyB0aGUgdGltZSB0aGF0IHRoZSBnaXZlbiBjYXRlZ29yeSBpcyBkaXNhYmxlZCB1bnRpbCBmb3IgcmF0ZSBsaW1pdGluZy4KICogSW4gY2FzZSBubyBjYXRlZ29yeS1zcGVjaWZpYyBsaW1pdCBpcyBzZXQgYnV0IGEgZ2VuZXJhbCByYXRlIGxpbWl0IGFjcm9zcyBhbGwgY2F0ZWdvcmllcyBpcyBhY3RpdmUsCiAqIHRoYXQgdGltZSBpcyByZXR1cm5lZC4KICoKICogQHJldHVybiB0aGUgdGltZSBpbiBtcyB0aGF0IHRoZSBjYXRlZ29yeSBpcyBkaXNhYmxlZCB1bnRpbCBvciAwIGlmIHRoZXJlJ3Mgbm8gYWN0aXZlIHJhdGUgbGltaXQuCiAqLwpmdW5jdGlvbiBkaXNhYmxlZFVudGlsKGxpbWl0cywgY2F0ZWdvcnkpIHsKICByZXR1cm4gbGltaXRzW2NhdGVnb3J5XSB8fCBsaW1pdHMuYWxsIHx8IDA7Cn0KCi8qKgogKiBDaGVja3MgaWYgYSBjYXRlZ29yeSBpcyByYXRlIGxpbWl0ZWQKICovCmZ1bmN0aW9uIGlzUmF0ZUxpbWl0ZWQobGltaXRzLCBjYXRlZ29yeSwgbm93ID0gRGF0ZS5ub3coKSkgewogIHJldHVybiBkaXNhYmxlZFVudGlsKGxpbWl0cywgY2F0ZWdvcnkpID4gbm93Owp9CgovKioKICogVXBkYXRlIHJhdGVsaW1pdHMgZnJvbSBpbmNvbWluZyBoZWFkZXJzLgogKgogKiBAcmV0dXJuIHRoZSB1cGRhdGVkIFJhdGVMaW1pdHMgb2JqZWN0LgogKi8KZnVuY3Rpb24gdXBkYXRlUmF0ZUxpbWl0cygKICBsaW1pdHMsCiAgeyBzdGF0dXNDb2RlLCBoZWFkZXJzIH0sCiAgbm93ID0gRGF0ZS5ub3coKSwKKSB7CiAgY29uc3QgdXBkYXRlZFJhdGVMaW1pdHMgPSB7CiAgICAuLi5saW1pdHMsCiAgfTsKCiAgLy8gIlRoZSBuYW1lIGlzIGNhc2UtaW5zZW5zaXRpdmUuIgogIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IZWFkZXJzL2dldAogIGNvbnN0IHJhdGVMaW1pdEhlYWRlciA9IGhlYWRlcnMgJiYgaGVhZGVyc1sneC1zZW50cnktcmF0ZS1saW1pdHMnXTsKICBjb25zdCByZXRyeUFmdGVySGVhZGVyID0gaGVhZGVycyAmJiBoZWFkZXJzWydyZXRyeS1hZnRlciddOwoKICBpZiAocmF0ZUxpbWl0SGVhZGVyKSB7CiAgICAvKioKICAgICAqIHJhdGUgbGltaXQgaGVhZGVycyBhcmUgb2YgdGhlIGZvcm0KICAgICAqICAgICA8aGVhZGVyPiw8aGVhZGVyPiwuLgogICAgICogd2hlcmUgZWFjaCA8aGVhZGVyPiBpcyBvZiB0aGUgZm9ybQogICAgICogICAgIDxyZXRyeV9hZnRlcj46IDxjYXRlZ29yaWVzPjogPHNjb3BlPjogPHJlYXNvbl9jb2RlPgogICAgICogd2hlcmUKICAgICAqICAgICA8cmV0cnlfYWZ0ZXI+IGlzIGEgZGVsYXkgaW4gc2Vjb25kcwogICAgICogICAgIDxjYXRlZ29yaWVzPiBpcyB0aGUgZXZlbnQgdHlwZShzKSAoZXJyb3IsIHRyYW5zYWN0aW9uLCBldGMpIGJlaW5nIHJhdGUgbGltaXRlZCBhbmQgaXMgb2YgdGhlIGZvcm0KICAgICAqICAgICAgICAgPGNhdGVnb3J5Pjs8Y2F0ZWdvcnk+Oy4uLgogICAgICogICAgIDxzY29wZT4gaXMgd2hhdCdzIGJlaW5nIGxpbWl0ZWQgKG9yZywgcHJvamVjdCwgb3Iga2V5KSAtIGlnbm9yZWQgYnkgU0RLCiAgICAgKiAgICAgPHJlYXNvbl9jb2RlPiBpcyBhbiBhcmJpdHJhcnkgc3RyaW5nIGxpa2UgIm9yZ19xdW90YSIgLSBpZ25vcmVkIGJ5IFNESwogICAgICovCiAgICBmb3IgKGNvbnN0IGxpbWl0IG9mIHJhdGVMaW1pdEhlYWRlci50cmltKCkuc3BsaXQoJywnKSkgewogICAgICBjb25zdCBbcmV0cnlBZnRlciwgY2F0ZWdvcmllc10gPSBsaW1pdC5zcGxpdCgnOicsIDIpOwogICAgICBjb25zdCBoZWFkZXJEZWxheSA9IHBhcnNlSW50KHJldHJ5QWZ0ZXIsIDEwKTsKICAgICAgY29uc3QgZGVsYXkgPSAoIWlzTmFOKGhlYWRlckRlbGF5KSA/IGhlYWRlckRlbGF5IDogNjApICogMTAwMDsgLy8gNjBzZWMgZGVmYXVsdAogICAgICBpZiAoIWNhdGVnb3JpZXMpIHsKICAgICAgICB1cGRhdGVkUmF0ZUxpbWl0cy5hbGwgPSBub3cgKyBkZWxheTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMuc3BsaXQoJzsnKSkgewogICAgICAgICAgdXBkYXRlZFJhdGVMaW1pdHNbY2F0ZWdvcnldID0gbm93ICsgZGVsYXk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSBlbHNlIGlmIChyZXRyeUFmdGVySGVhZGVyKSB7CiAgICB1cGRhdGVkUmF0ZUxpbWl0cy5hbGwgPSBub3cgKyBwYXJzZVJldHJ5QWZ0ZXJIZWFkZXIocmV0cnlBZnRlckhlYWRlciwgbm93KTsKICB9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQyOSkgewogICAgdXBkYXRlZFJhdGVMaW1pdHMuYWxsID0gbm93ICsgNjAgKiAxMDAwOwogIH0KCiAgcmV0dXJuIHVwZGF0ZWRSYXRlTGltaXRzOwp9CgovKioKICogQSBub2RlLmpzIHdhdGNoZG9nIHRpbWVyCiAqIEBwYXJhbSBwb2xsSW50ZXJ2YWwgVGhlIGludGVydmFsIHRoYXQgd2UgZXhwZWN0IHRvIGdldCBwb2xsZWQgYXQKICogQHBhcmFtIGFuclRocmVzaG9sZCBUaGUgdGhyZXNob2xkIGZvciB3aGVuIHdlIGNvbnNpZGVyIEFOUgogKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGNhbGwgZm9yIEFOUgogKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCBgcG9sbGAgYW5kIGBlbmFibGVkYCBmdW5jdGlvbnMge0BsaW5rIFdhdGNoZG9nUmV0dXJufQogKi8KZnVuY3Rpb24gd2F0Y2hkb2dUaW1lcigKICBjcmVhdGVUaW1lciwKICBwb2xsSW50ZXJ2YWwsCiAgYW5yVGhyZXNob2xkLAogIGNhbGxiYWNrLAopIHsKICBjb25zdCB0aW1lciA9IGNyZWF0ZVRpbWVyKCk7CiAgbGV0IHRyaWdnZXJlZCA9IGZhbHNlOwogIGxldCBlbmFibGVkID0gdHJ1ZTsKCiAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgY29uc3QgZGlmZk1zID0gdGltZXIuZ2V0VGltZU1zKCk7CgogICAgaWYgKHRyaWdnZXJlZCA9PT0gZmFsc2UgJiYgZGlmZk1zID4gcG9sbEludGVydmFsICsgYW5yVGhyZXNob2xkKSB7CiAgICAgIHRyaWdnZXJlZCA9IHRydWU7CiAgICAgIGlmIChlbmFibGVkKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfQoKICAgIGlmIChkaWZmTXMgPCBwb2xsSW50ZXJ2YWwgKyBhbnJUaHJlc2hvbGQpIHsKICAgICAgdHJpZ2dlcmVkID0gZmFsc2U7CiAgICB9CiAgfSwgMjApOwoKICByZXR1cm4gewogICAgcG9sbDogKCkgPT4gewogICAgICB0aW1lci5yZXNldCgpOwogICAgfSwKICAgIGVuYWJsZWQ6IChzdGF0ZSkgPT4gewogICAgICBlbmFibGVkID0gc3RhdGU7CiAgICB9LAogIH07Cn0KCi8vIHR5cGVzIGNvcGllZCBmcm9tIGluc3BlY3Rvci5kLnRzCgovKioKICogQ29udmVydHMgRGVidWdnZXIuQ2FsbEZyYW1lIHRvIFNlbnRyeSBTdGFja0ZyYW1lCiAqLwpmdW5jdGlvbiBjYWxsRnJhbWVUb1N0YWNrRnJhbWUoCiAgZnJhbWUsCiAgdXJsLAogIGdldE1vZHVsZUZyb21GaWxlbmFtZSwKKSB7CiAgY29uc3QgZmlsZW5hbWUgPSB1cmwgPyB1cmwucmVwbGFjZSgvXmZpbGU6XC9cLy8sICcnKSA6IHVuZGVmaW5lZDsKCiAgLy8gQ2FsbEZyYW1lIHJvdy9jb2wgYXJlIDAgYmFzZWQsIHdoZXJlYXMgU3RhY2tGcmFtZSBhcmUgMSBiYXNlZAogIGNvbnN0IGNvbG5vID0gZnJhbWUubG9jYXRpb24uY29sdW1uTnVtYmVyID8gZnJhbWUubG9jYXRpb24uY29sdW1uTnVtYmVyICsgMSA6IHVuZGVmaW5lZDsKICBjb25zdCBsaW5lbm8gPSBmcmFtZS5sb2NhdGlvbi5saW5lTnVtYmVyID8gZnJhbWUubG9jYXRpb24ubGluZU51bWJlciArIDEgOiB1bmRlZmluZWQ7CgogIHJldHVybiBkcm9wVW5kZWZpbmVkS2V5cyh7CiAgICBmaWxlbmFtZSwKICAgIG1vZHVsZTogZ2V0TW9kdWxlRnJvbUZpbGVuYW1lKGZpbGVuYW1lKSwKICAgIGZ1bmN0aW9uOiBmcmFtZS5mdW5jdGlvbk5hbWUgfHwgJz8nLAogICAgY29sbm8sCiAgICBsaW5lbm8sCiAgICBpbl9hcHA6IGZpbGVuYW1lID8gZmlsZW5hbWVJc0luQXBwKGZpbGVuYW1lKSA6IHVuZGVmaW5lZCwKICB9KTsKfQoKLyoqCiAqIFRoaXMgc2VydmVzIGFzIGEgYnVpbGQgdGltZSBmbGFnIHRoYXQgd2lsbCBiZSB0cnVlIGJ5IGRlZmF1bHQsIGJ1dCBmYWxzZSBpbiBub24tZGVidWcgYnVpbGRzIG9yIGlmIHVzZXJzIHJlcGxhY2UgYF9fU0VOVFJZX0RFQlVHX19gIGluIHRoZWlyIGdlbmVyYXRlZCBjb2RlLgogKgogKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuCiAqLwpjb25zdCBERUJVR19CVUlMRCA9ICh0eXBlb2YgX19TRU5UUllfREVCVUdfXyA9PT0gJ3VuZGVmaW5lZCcgfHwgX19TRU5UUllfREVCVUdfXyk7CgovKioKICogQ3JlYXRlcyBhIG5ldyBgU2Vzc2lvbmAgb2JqZWN0IGJ5IHNldHRpbmcgY2VydGFpbiBkZWZhdWx0IHBhcmFtZXRlcnMuIElmIG9wdGlvbmFsIEBwYXJhbSBjb250ZXh0CiAqIGlzIHBhc3NlZCwgdGhlIHBhc3NlZCBwcm9wZXJ0aWVzIGFyZSBhcHBsaWVkIHRvIHRoZSBzZXNzaW9uIG9iamVjdC4KICoKICogQHBhcmFtIGNvbnRleHQgKG9wdGlvbmFsKSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYmUgYXBwbGllZCB0byB0aGUgcmV0dXJuZWQgc2Vzc2lvbiBvYmplY3QKICoKICogQHJldHVybnMgYSBuZXcgYFNlc3Npb25gIG9iamVjdAogKi8KZnVuY3Rpb24gbWFrZVNlc3Npb24oY29udGV4dCkgewogIC8vIEJvdGggdGltZXN0YW1wIGFuZCBzdGFydGVkIGFyZSBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoLgogIGNvbnN0IHN0YXJ0aW5nVGltZSA9IHRpbWVzdGFtcEluU2Vjb25kcygpOwoKICBjb25zdCBzZXNzaW9uID0gewogICAgc2lkOiB1dWlkNCgpLAogICAgaW5pdDogdHJ1ZSwKICAgIHRpbWVzdGFtcDogc3RhcnRpbmdUaW1lLAogICAgc3RhcnRlZDogc3RhcnRpbmdUaW1lLAogICAgZHVyYXRpb246IDAsCiAgICBzdGF0dXM6ICdvaycsCiAgICBlcnJvcnM6IDAsCiAgICBpZ25vcmVEdXJhdGlvbjogZmFsc2UsCiAgICB0b0pTT046ICgpID0+IHNlc3Npb25Ub0pTT04oc2Vzc2lvbiksCiAgfTsKCiAgaWYgKGNvbnRleHQpIHsKICAgIHVwZGF0ZVNlc3Npb24oc2Vzc2lvbiwgY29udGV4dCk7CiAgfQoKICByZXR1cm4gc2Vzc2lvbjsKfQoKLyoqCiAqIFVwZGF0ZXMgYSBzZXNzaW9uIG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIHBhc3NlZCBpbiB0aGUgY29udGV4dC4KICoKICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gbXV0YXRlcyB0aGUgcGFzc2VkIG9iamVjdCBhbmQgcmV0dXJucyB2b2lkLgogKiAoSGFkIHRvIGRvIHRoaXMgaW5zdGVhZCBvZiByZXR1cm5pbmcgYSBuZXcgYW5kIHVwZGF0ZWQgc2Vzc2lvbiBiZWNhdXNlIGNsb3NpbmcgYW5kIHNlbmRpbmcgYSBzZXNzaW9uCiAqIG1ha2VzIGFuIHVwZGF0ZSB0byB0aGUgc2Vzc2lvbiBhZnRlciBpdCB3YXMgcGFzc2VkIHRvIHRoZSBzZW5kaW5nIGxvZ2ljLgogKiBAc2VlIEJhc2VDbGllbnQuY2FwdHVyZVNlc3Npb24gKQogKgogKiBAcGFyYW0gc2Vzc2lvbiB0aGUgYFNlc3Npb25gIHRvIHVwZGF0ZQogKiBAcGFyYW0gY29udGV4dCB0aGUgYFNlc3Npb25Db250ZXh0YCBob2xkaW5nIHRoZSBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIHVwZGF0ZWQgaW4gQHBhcmFtIHNlc3Npb24KICovCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5CmZ1bmN0aW9uIHVwZGF0ZVNlc3Npb24oc2Vzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgaWYgKGNvbnRleHQudXNlcikgewogICAgaWYgKCFzZXNzaW9uLmlwQWRkcmVzcyAmJiBjb250ZXh0LnVzZXIuaXBfYWRkcmVzcykgewogICAgICBzZXNzaW9uLmlwQWRkcmVzcyA9IGNvbnRleHQudXNlci5pcF9hZGRyZXNzOwogICAgfQoKICAgIGlmICghc2Vzc2lvbi5kaWQgJiYgIWNvbnRleHQuZGlkKSB7CiAgICAgIHNlc3Npb24uZGlkID0gY29udGV4dC51c2VyLmlkIHx8IGNvbnRleHQudXNlci5lbWFpbCB8fCBjb250ZXh0LnVzZXIudXNlcm5hbWU7CiAgICB9CiAgfQoKICBzZXNzaW9uLnRpbWVzdGFtcCA9IGNvbnRleHQudGltZXN0YW1wIHx8IHRpbWVzdGFtcEluU2Vjb25kcygpOwoKICBpZiAoY29udGV4dC5hYm5vcm1hbF9tZWNoYW5pc20pIHsKICAgIHNlc3Npb24uYWJub3JtYWxfbWVjaGFuaXNtID0gY29udGV4dC5hYm5vcm1hbF9tZWNoYW5pc207CiAgfQoKICBpZiAoY29udGV4dC5pZ25vcmVEdXJhdGlvbikgewogICAgc2Vzc2lvbi5pZ25vcmVEdXJhdGlvbiA9IGNvbnRleHQuaWdub3JlRHVyYXRpb247CiAgfQogIGlmIChjb250ZXh0LnNpZCkgewogICAgLy8gR29vZCBlbm91Z2ggdXVpZCB2YWxpZGF0aW9uLiDigJQgS2FtaWwKICAgIHNlc3Npb24uc2lkID0gY29udGV4dC5zaWQubGVuZ3RoID09PSAzMiA/IGNvbnRleHQuc2lkIDogdXVpZDQoKTsKICB9CiAgaWYgKGNvbnRleHQuaW5pdCAhPT0gdW5kZWZpbmVkKSB7CiAgICBzZXNzaW9uLmluaXQgPSBjb250ZXh0LmluaXQ7CiAgfQogIGlmICghc2Vzc2lvbi5kaWQgJiYgY29udGV4dC5kaWQpIHsKICAgIHNlc3Npb24uZGlkID0gYCR7Y29udGV4dC5kaWR9YDsKICB9CiAgaWYgKHR5cGVvZiBjb250ZXh0LnN0YXJ0ZWQgPT09ICdudW1iZXInKSB7CiAgICBzZXNzaW9uLnN0YXJ0ZWQgPSBjb250ZXh0LnN0YXJ0ZWQ7CiAgfQogIGlmIChzZXNzaW9uLmlnbm9yZUR1cmF0aW9uKSB7CiAgICBzZXNzaW9uLmR1cmF0aW9uID0gdW5kZWZpbmVkOwogIH0gZWxzZSBpZiAodHlwZW9mIGNvbnRleHQuZHVyYXRpb24gPT09ICdudW1iZXInKSB7CiAgICBzZXNzaW9uLmR1cmF0aW9uID0gY29udGV4dC5kdXJhdGlvbjsKICB9IGVsc2UgewogICAgY29uc3QgZHVyYXRpb24gPSBzZXNzaW9uLnRpbWVzdGFtcCAtIHNlc3Npb24uc3RhcnRlZDsKICAgIHNlc3Npb24uZHVyYXRpb24gPSBkdXJhdGlvbiA+PSAwID8gZHVyYXRpb24gOiAwOwogIH0KICBpZiAoY29udGV4dC5yZWxlYXNlKSB7CiAgICBzZXNzaW9uLnJlbGVhc2UgPSBjb250ZXh0LnJlbGVhc2U7CiAgfQogIGlmIChjb250ZXh0LmVudmlyb25tZW50KSB7CiAgICBzZXNzaW9uLmVudmlyb25tZW50ID0gY29udGV4dC5lbnZpcm9ubWVudDsKICB9CiAgaWYgKCFzZXNzaW9uLmlwQWRkcmVzcyAmJiBjb250ZXh0LmlwQWRkcmVzcykgewogICAgc2Vzc2lvbi5pcEFkZHJlc3MgPSBjb250ZXh0LmlwQWRkcmVzczsKICB9CiAgaWYgKCFzZXNzaW9uLnVzZXJBZ2VudCAmJiBjb250ZXh0LnVzZXJBZ2VudCkgewogICAgc2Vzc2lvbi51c2VyQWdlbnQgPSBjb250ZXh0LnVzZXJBZ2VudDsKICB9CiAgaWYgKHR5cGVvZiBjb250ZXh0LmVycm9ycyA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uZXJyb3JzID0gY29udGV4dC5lcnJvcnM7CiAgfQogIGlmIChjb250ZXh0LnN0YXR1cykgewogICAgc2Vzc2lvbi5zdGF0dXMgPSBjb250ZXh0LnN0YXR1czsKICB9Cn0KCi8qKgogKiBTZXJpYWxpemVzIGEgcGFzc2VkIHNlc3Npb24gb2JqZWN0IHRvIGEgSlNPTiBvYmplY3Qgd2l0aCBhIHNsaWdodGx5IGRpZmZlcmVudCBzdHJ1Y3R1cmUuCiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdGhlIFNlbnRyeSBiYWNrZW5kIHJlcXVpcmVzIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHNjaGVtYSBvZiBhIHNlc3Npb24KICogdGhhbiB0aGUgb25lIHRoZSBKUyBTREtzIHVzZSBpbnRlcm5hbGx5LgogKgogKiBAcGFyYW0gc2Vzc2lvbiB0aGUgc2Vzc2lvbiB0byBiZSBjb252ZXJ0ZWQKICoKICogQHJldHVybnMgYSBKU09OIG9iamVjdCBvZiB0aGUgcGFzc2VkIHNlc3Npb24KICovCmZ1bmN0aW9uIHNlc3Npb25Ub0pTT04oc2Vzc2lvbikgewogIHJldHVybiBkcm9wVW5kZWZpbmVkS2V5cyh7CiAgICBzaWQ6IGAke3Nlc3Npb24uc2lkfWAsCiAgICBpbml0OiBzZXNzaW9uLmluaXQsCiAgICAvLyBNYWtlIHN1cmUgdGhhdCBzZWMgaXMgY29udmVydGVkIHRvIG1zIGZvciBkYXRlIGNvbnN0cnVjdG9yCiAgICBzdGFydGVkOiBuZXcgRGF0ZShzZXNzaW9uLnN0YXJ0ZWQgKiAxMDAwKS50b0lTT1N0cmluZygpLAogICAgdGltZXN0YW1wOiBuZXcgRGF0ZShzZXNzaW9uLnRpbWVzdGFtcCAqIDEwMDApLnRvSVNPU3RyaW5nKCksCiAgICBzdGF0dXM6IHNlc3Npb24uc3RhdHVzLAogICAgZXJyb3JzOiBzZXNzaW9uLmVycm9ycywKICAgIGRpZDogdHlwZW9mIHNlc3Npb24uZGlkID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2Vzc2lvbi5kaWQgPT09ICdzdHJpbmcnID8gYCR7c2Vzc2lvbi5kaWR9YCA6IHVuZGVmaW5lZCwKICAgIGR1cmF0aW9uOiBzZXNzaW9uLmR1cmF0aW9uLAogICAgYWJub3JtYWxfbWVjaGFuaXNtOiBzZXNzaW9uLmFibm9ybWFsX21lY2hhbmlzbSwKICAgIGF0dHJzOiB7CiAgICAgIHJlbGVhc2U6IHNlc3Npb24ucmVsZWFzZSwKICAgICAgZW52aXJvbm1lbnQ6IHNlc3Npb24uZW52aXJvbm1lbnQsCiAgICAgIGlwX2FkZHJlc3M6IHNlc3Npb24uaXBBZGRyZXNzLAogICAgICB1c2VyX2FnZW50OiBzZXNzaW9uLnVzZXJBZ2VudCwKICAgIH0sCiAgfSk7Cn0KCi8qKgogKiBBcHBseSBTZGtJbmZvIChuYW1lLCB2ZXJzaW9uLCBwYWNrYWdlcywgaW50ZWdyYXRpb25zKSB0byB0aGUgY29ycmVzcG9uZGluZyBldmVudCBrZXkuCiAqIE1lcmdlIHdpdGggZXhpc3RpbmcgZGF0YSBpZiBhbnkuCiAqKi8KZnVuY3Rpb24gZW5oYW5jZUV2ZW50V2l0aFNka0luZm8oZXZlbnQsIHNka0luZm8pIHsKICBpZiAoIXNka0luZm8pIHsKICAgIHJldHVybiBldmVudDsKICB9CiAgZXZlbnQuc2RrID0gZXZlbnQuc2RrIHx8IHt9OwogIGV2ZW50LnNkay5uYW1lID0gZXZlbnQuc2RrLm5hbWUgfHwgc2RrSW5mby5uYW1lOwogIGV2ZW50LnNkay52ZXJzaW9uID0gZXZlbnQuc2RrLnZlcnNpb24gfHwgc2RrSW5mby52ZXJzaW9uOwogIGV2ZW50LnNkay5pbnRlZ3JhdGlvbnMgPSBbLi4uKGV2ZW50LnNkay5pbnRlZ3JhdGlvbnMgfHwgW10pLCAuLi4oc2RrSW5mby5pbnRlZ3JhdGlvbnMgfHwgW10pXTsKICBldmVudC5zZGsucGFja2FnZXMgPSBbLi4uKGV2ZW50LnNkay5wYWNrYWdlcyB8fCBbXSksIC4uLihzZGtJbmZvLnBhY2thZ2VzIHx8IFtdKV07CiAgcmV0dXJuIGV2ZW50Owp9CgovKiogQ3JlYXRlcyBhbiBlbnZlbG9wZSBmcm9tIGEgU2Vzc2lvbiAqLwpmdW5jdGlvbiBjcmVhdGVTZXNzaW9uRW52ZWxvcGUoCiAgc2Vzc2lvbiwKICBkc24sCiAgbWV0YWRhdGEsCiAgdHVubmVsLAopIHsKICBjb25zdCBzZGtJbmZvID0gZ2V0U2RrTWV0YWRhdGFGb3JFbnZlbG9wZUhlYWRlcihtZXRhZGF0YSk7CiAgY29uc3QgZW52ZWxvcGVIZWFkZXJzID0gewogICAgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgLi4uKHNka0luZm8gJiYgeyBzZGs6IHNka0luZm8gfSksCiAgICAuLi4oISF0dW5uZWwgJiYgZHNuICYmIHsgZHNuOiBkc25Ub1N0cmluZyhkc24pIH0pLAogIH07CgogIGNvbnN0IGVudmVsb3BlSXRlbSA9CiAgICAnYWdncmVnYXRlcycgaW4gc2Vzc2lvbiA/IFt7IHR5cGU6ICdzZXNzaW9ucycgfSwgc2Vzc2lvbl0gOiBbeyB0eXBlOiAnc2Vzc2lvbicgfSwgc2Vzc2lvbi50b0pTT04oKV07CgogIHJldHVybiBjcmVhdGVFbnZlbG9wZShlbnZlbG9wZUhlYWRlcnMsIFtlbnZlbG9wZUl0ZW1dKTsKfQoKLyoqCiAqIENyZWF0ZSBhbiBFbnZlbG9wZSBmcm9tIGFuIGV2ZW50LgogKi8KZnVuY3Rpb24gY3JlYXRlRXZlbnRFbnZlbG9wZSgKICBldmVudCwKICBkc24sCiAgbWV0YWRhdGEsCiAgdHVubmVsLAopIHsKICBjb25zdCBzZGtJbmZvID0gZ2V0U2RrTWV0YWRhdGFGb3JFbnZlbG9wZUhlYWRlcihtZXRhZGF0YSk7CgogIC8qCiAgICBOb3RlOiBEdWUgdG8gVFMsIGV2ZW50LnR5cGUgbWF5IGJlIGByZXBsYXlfZXZlbnRgLCB0aGVvcmV0aWNhbGx5LgogICAgSW4gcHJhY3RpY2UsIHdlIG5ldmVyIGNhbGwgYGNyZWF0ZUV2ZW50RW52ZWxvcGVgIHdpdGggYHJlcGxheV9ldmVudGAgdHlwZSwKICAgIGFuZCB3ZSdkIGhhdmUgdG8gYWRqdXQgYSBsb29vdCBvZiB0eXBlcyB0byBtYWtlIHRoaXMgd29yayBwcm9wZXJseS4KICAgIFdlIHdhbnQgdG8gYXZvaWQgY2FzdGluZyB0aGlzIGFyb3VuZCwgYXMgdGhhdCBjb3VsZCBsZWFkIHRvIGJ1Z3MgKGUuZy4gd2hlbiB3ZSBhZGQgYW5vdGhlciB0eXBlKQogICAgU28gdGhlIHNhZmUgY2hvaWNlIGlzIHRvIHJlYWxseSBndWFyZCBhZ2FpbnN0IHRoZSByZXBsYXlfZXZlbnQgdHlwZSBoZXJlLgogICovCiAgY29uc3QgZXZlbnRUeXBlID0gZXZlbnQudHlwZSAmJiBldmVudC50eXBlICE9PSAncmVwbGF5X2V2ZW50JyA/IGV2ZW50LnR5cGUgOiAnZXZlbnQnOwoKICBlbmhhbmNlRXZlbnRXaXRoU2RrSW5mbyhldmVudCwgbWV0YWRhdGEgJiYgbWV0YWRhdGEuc2RrKTsKCiAgY29uc3QgZW52ZWxvcGVIZWFkZXJzID0gY3JlYXRlRXZlbnRFbnZlbG9wZUhlYWRlcnMoZXZlbnQsIHNka0luZm8sIHR1bm5lbCwgZHNuKTsKCiAgLy8gUHJldmVudCB0aGlzIGRhdGEgKHdoaWNoLCBpZiBpdCBleGlzdHMsIHdhcyB1c2VkIGluIGVhcmxpZXIgc3RlcHMgaW4gdGhlIHByb2Nlc3NpbmcgcGlwZWxpbmUpIGZyb20gYmVpbmcgc2VudCB0bwogIC8vIHNlbnRyeS4gKE5vdGU6IE91ciB1c2Ugb2YgdGhpcyBwcm9wZXJ0eSBjb21lcyBhbmQgZ29lcyB3aXRoIHdoYXRldmVyIHdlIG1pZ2h0IGJlIGRlYnVnZ2luZywgd2hhdGV2ZXIgaGFja3Mgd2UgbWF5CiAgLy8gaGF2ZSB0ZW1wb3JhcmlseSBhZGRlZCwgZXRjLiBFdmVuIGlmIHdlIGRvbid0IGhhcHBlbiB0byBiZSB1c2luZyBpdCBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUsIGxldCdzIG5vdCBnZXQgcmlkCiAgLy8gb2YgdGhpcyBgZGVsZXRlYCwgbGVzdCB3ZSBtaXNzIHB1dHRpbmcgaXQgYmFjayBpbiB0aGUgbmV4dCB0aW1lIHRoZSBwcm9wZXJ0eSBpcyBpbiB1c2UuKQogIGRlbGV0ZSBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGE7CgogIGNvbnN0IGV2ZW50SXRlbSA9IFt7IHR5cGU6IGV2ZW50VHlwZSB9LCBldmVudF07CiAgcmV0dXJuIGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlSGVhZGVycywgW2V2ZW50SXRlbV0pOwp9Cgpjb25zdCBTRU5UUllfQVBJX1ZFUlNJT04gPSAnNyc7CgovKiogUmV0dXJucyB0aGUgcHJlZml4IHRvIGNvbnN0cnVjdCBTZW50cnkgaW5nZXN0aW9uIEFQSSBlbmRwb2ludHMuICovCmZ1bmN0aW9uIGdldEJhc2VBcGlFbmRwb2ludChkc24pIHsKICBjb25zdCBwcm90b2NvbCA9IGRzbi5wcm90b2NvbCA/IGAke2Rzbi5wcm90b2NvbH06YCA6ICcnOwogIGNvbnN0IHBvcnQgPSBkc24ucG9ydCA/IGA6JHtkc24ucG9ydH1gIDogJyc7CiAgcmV0dXJuIGAke3Byb3RvY29sfS8vJHtkc24uaG9zdH0ke3BvcnR9JHtkc24ucGF0aCA/IGAvJHtkc24ucGF0aH1gIDogJyd9L2FwaS9gOwp9CgovKiogUmV0dXJucyB0aGUgaW5nZXN0IEFQSSBlbmRwb2ludCBmb3IgdGFyZ2V0LiAqLwpmdW5jdGlvbiBfZ2V0SW5nZXN0RW5kcG9pbnQoZHNuKSB7CiAgcmV0dXJuIGAke2dldEJhc2VBcGlFbmRwb2ludChkc24pfSR7ZHNuLnByb2plY3RJZH0vZW52ZWxvcGUvYDsKfQoKLyoqIFJldHVybnMgYSBVUkwtZW5jb2RlZCBzdHJpbmcgd2l0aCBhdXRoIGNvbmZpZyBzdWl0YWJsZSBmb3IgYSBxdWVyeSBzdHJpbmcuICovCmZ1bmN0aW9uIF9lbmNvZGVkQXV0aChkc24sIHNka0luZm8pIHsKICByZXR1cm4gdXJsRW5jb2RlKHsKICAgIC8vIFdlIHNlbmQgb25seSB0aGUgbWluaW11bSBzZXQgb2YgcmVxdWlyZWQgaW5mb3JtYXRpb24uIFNlZQogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMjU3Mi4KICAgIHNlbnRyeV9rZXk6IGRzbi5wdWJsaWNLZXksCiAgICBzZW50cnlfdmVyc2lvbjogU0VOVFJZX0FQSV9WRVJTSU9OLAogICAgLi4uKHNka0luZm8gJiYgeyBzZW50cnlfY2xpZW50OiBgJHtzZGtJbmZvLm5hbWV9LyR7c2RrSW5mby52ZXJzaW9ufWAgfSksCiAgfSk7Cn0KCi8qKgogKiBSZXR1cm5zIHRoZSBlbnZlbG9wZSBlbmRwb2ludCBVUkwgd2l0aCBhdXRoIGluIHRoZSBxdWVyeSBzdHJpbmcuCiAqCiAqIFNlbmRpbmcgYXV0aCBhcyBwYXJ0IG9mIHRoZSBxdWVyeSBzdHJpbmcgYW5kIG5vdCBhcyBjdXN0b20gSFRUUCBoZWFkZXJzIGF2b2lkcyBDT1JTIHByZWZsaWdodCByZXF1ZXN0cy4KICovCmZ1bmN0aW9uIGdldEVudmVsb3BlRW5kcG9pbnRXaXRoVXJsRW5jb2RlZEF1dGgoCiAgZHNuLAogIC8vIFRPRE8gKHY4KTogUmVtb3ZlIGB0dW5uZWxPck9wdGlvbnNgIGluIGZhdm9yIG9mIGBvcHRpb25zYCwgYW5kIHVzZSB0aGUgc3Vic3RpdHV0ZSBjb2RlIGJlbG93CiAgLy8gb3B0aW9uczogQ2xpZW50T3B0aW9ucyA9IHt9IGFzIENsaWVudE9wdGlvbnMsCiAgdHVubmVsT3JPcHRpb25zID0ge30gLAopIHsKICAvLyBUT0RPICh2OCk6IFVzZSB0aGlzIGNvZGUgaW5zdGVhZAogIC8vIGNvbnN0IHsgdHVubmVsLCBfbWV0YWRhdGEgPSB7fSB9ID0gb3B0aW9uczsKICAvLyByZXR1cm4gdHVubmVsID8gdHVubmVsIDogYCR7X2dldEluZ2VzdEVuZHBvaW50KGRzbil9PyR7X2VuY29kZWRBdXRoKGRzbiwgX21ldGFkYXRhLnNkayl9YDsKCiAgY29uc3QgdHVubmVsID0gdHlwZW9mIHR1bm5lbE9yT3B0aW9ucyA9PT0gJ3N0cmluZycgPyB0dW5uZWxPck9wdGlvbnMgOiB0dW5uZWxPck9wdGlvbnMudHVubmVsOwogIGNvbnN0IHNka0luZm8gPQogICAgdHlwZW9mIHR1bm5lbE9yT3B0aW9ucyA9PT0gJ3N0cmluZycgfHwgIXR1bm5lbE9yT3B0aW9ucy5fbWV0YWRhdGEgPyB1bmRlZmluZWQgOiB0dW5uZWxPck9wdGlvbnMuX21ldGFkYXRhLnNkazsKCiAgcmV0dXJuIHR1bm5lbCA/IHR1bm5lbCA6IGAke19nZXRJbmdlc3RFbmRwb2ludChkc24pfT8ke19lbmNvZGVkQXV0aChkc24sIHNka0luZm8pfWA7Cn0KCmNvbnN0IERFRkFVTFRfVFJBTlNQT1JUX0JVRkZFUl9TSVpFID0gMzA7CgovKioKICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIFNlbnRyeSBgVHJhbnNwb3J0YAogKgogKiBAcGFyYW0gb3B0aW9ucwogKiBAcGFyYW0gbWFrZVJlcXVlc3QKICovCmZ1bmN0aW9uIGNyZWF0ZVRyYW5zcG9ydCgKICBvcHRpb25zLAogIG1ha2VSZXF1ZXN0LAogIGJ1ZmZlciA9IG1ha2VQcm9taXNlQnVmZmVyKAogICAgb3B0aW9ucy5idWZmZXJTaXplIHx8IERFRkFVTFRfVFJBTlNQT1JUX0JVRkZFUl9TSVpFLAogICksCikgewogIGxldCByYXRlTGltaXRzID0ge307CiAgY29uc3QgZmx1c2ggPSAodGltZW91dCkgPT4gYnVmZmVyLmRyYWluKHRpbWVvdXQpOwoKICBmdW5jdGlvbiBzZW5kKGVudmVsb3BlKSB7CiAgICBjb25zdCBmaWx0ZXJlZEVudmVsb3BlSXRlbXMgPSBbXTsKCiAgICAvLyBEcm9wIHJhdGUgbGltaXRlZCBpdGVtcyBmcm9tIGVudmVsb3BlCiAgICBmb3JFYWNoRW52ZWxvcGVJdGVtKGVudmVsb3BlLCAoaXRlbSwgdHlwZSkgPT4gewogICAgICBjb25zdCBlbnZlbG9wZUl0ZW1EYXRhQ2F0ZWdvcnkgPSBlbnZlbG9wZUl0ZW1UeXBlVG9EYXRhQ2F0ZWdvcnkodHlwZSk7CiAgICAgIGlmIChpc1JhdGVMaW1pdGVkKHJhdGVMaW1pdHMsIGVudmVsb3BlSXRlbURhdGFDYXRlZ29yeSkpIHsKICAgICAgICBjb25zdCBldmVudCA9IGdldEV2ZW50Rm9yRW52ZWxvcGVJdGVtKGl0ZW0sIHR5cGUpOwogICAgICAgIG9wdGlvbnMucmVjb3JkRHJvcHBlZEV2ZW50KCdyYXRlbGltaXRfYmFja29mZicsIGVudmVsb3BlSXRlbURhdGFDYXRlZ29yeSwgZXZlbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIGZpbHRlcmVkRW52ZWxvcGVJdGVtcy5wdXNoKGl0ZW0pOwogICAgICB9CiAgICB9KTsKCiAgICAvLyBTa2lwIHNlbmRpbmcgaWYgZW52ZWxvcGUgaXMgZW1wdHkgYWZ0ZXIgZmlsdGVyaW5nIG91dCByYXRlIGxpbWl0ZWQgZXZlbnRzCiAgICBpZiAoZmlsdGVyZWRFbnZlbG9wZUl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gcmVzb2x2ZWRTeW5jUHJvbWlzZSgpOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICBjb25zdCBmaWx0ZXJlZEVudmVsb3BlID0gY3JlYXRlRW52ZWxvcGUoZW52ZWxvcGVbMF0sIGZpbHRlcmVkRW52ZWxvcGVJdGVtcyApOwoKICAgIC8vIENyZWF0ZXMgY2xpZW50IHJlcG9ydCBmb3IgZWFjaCBpdGVtIGluIGFuIGVudmVsb3BlCiAgICBjb25zdCByZWNvcmRFbnZlbG9wZUxvc3MgPSAocmVhc29uKSA9PiB7CiAgICAgIGZvckVhY2hFbnZlbG9wZUl0ZW0oZmlsdGVyZWRFbnZlbG9wZSwgKGl0ZW0sIHR5cGUpID0+IHsKICAgICAgICBjb25zdCBldmVudCA9IGdldEV2ZW50Rm9yRW52ZWxvcGVJdGVtKGl0ZW0sIHR5cGUpOwogICAgICAgIG9wdGlvbnMucmVjb3JkRHJvcHBlZEV2ZW50KHJlYXNvbiwgZW52ZWxvcGVJdGVtVHlwZVRvRGF0YUNhdGVnb3J5KHR5cGUpLCBldmVudCk7CiAgICAgIH0pOwogICAgfTsKCiAgICBjb25zdCByZXF1ZXN0VGFzayA9ICgpID0+CiAgICAgIG1ha2VSZXF1ZXN0KHsgYm9keTogc2VyaWFsaXplRW52ZWxvcGUoZmlsdGVyZWRFbnZlbG9wZSwgb3B0aW9ucy50ZXh0RW5jb2RlcikgfSkudGhlbigKICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIHRocm93IG9uIE5PSyByZXNwb25zZXMsIGJ1dCB3ZSB3YW50IHRvIGF0IGxlYXN0IGxvZyB0aGVtCiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSAhPT0gdW5kZWZpbmVkICYmIChyZXNwb25zZS5zdGF0dXNDb2RlIDwgMjAwIHx8IHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gMzAwKSkgewogICAgICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIud2FybihgU2VudHJ5IHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBjb2RlICR7cmVzcG9uc2Uuc3RhdHVzQ29kZX0gdG8gc2VudCBldmVudC5gKTsKICAgICAgICAgIH0KCiAgICAgICAgICByYXRlTGltaXRzID0gdXBkYXRlUmF0ZUxpbWl0cyhyYXRlTGltaXRzLCByZXNwb25zZSk7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgfSwKICAgICAgICBlcnJvciA9PiB7CiAgICAgICAgICByZWNvcmRFbnZlbG9wZUxvc3MoJ25ldHdvcmtfZXJyb3InKTsKICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgIH0sCiAgICAgICk7CgogICAgcmV0dXJuIGJ1ZmZlci5hZGQocmVxdWVzdFRhc2spLnRoZW4oCiAgICAgIHJlc3VsdCA9PiByZXN1bHQsCiAgICAgIGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTZW50cnlFcnJvcikgewogICAgICAgICAgREVCVUdfQlVJTEQgJiYgbG9nZ2VyLmVycm9yKCdTa2lwcGVkIHNlbmRpbmcgZXZlbnQgYmVjYXVzZSBidWZmZXIgaXMgZnVsbC4nKTsKICAgICAgICAgIHJlY29yZEVudmVsb3BlTG9zcygncXVldWVfb3ZlcmZsb3cnKTsKICAgICAgICAgIHJldHVybiByZXNvbHZlZFN5bmNQcm9taXNlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgIH0KICAgICAgfSwKICAgICk7CiAgfQoKICAvLyBXZSB1c2UgdGhpcyB0byBpZGVudGlmaWZ5IGlmIHRoZSB0cmFuc3BvcnQgaXMgdGhlIGJhc2UgdHJhbnNwb3J0CiAgLy8gVE9ETyAodjgpOiBSZW1vdmUgdGhpcyBhZ2FpbiBhcyB3ZSdsbCBubyBsb25nZXIgbmVlZCBpdAogIHNlbmQuX19zZW50cnlfX2Jhc2VUcmFuc3BvcnRfXyA9IHRydWU7CgogIHJldHVybiB7CiAgICBzZW5kLAogICAgZmx1c2gsCiAgfTsKfQoKZnVuY3Rpb24gZ2V0RXZlbnRGb3JFbnZlbG9wZUl0ZW0oaXRlbSwgdHlwZSkgewogIGlmICh0eXBlICE9PSAnZXZlbnQnICYmIHR5cGUgIT09ICd0cmFuc2FjdGlvbicpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICByZXR1cm4gQXJyYXkuaXNBcnJheShpdGVtKSA/IChpdGVtIClbMV0gOiB1bmRlZmluZWQ7Cn0KCi8qKiBub3JtYWxpemVzIFdpbmRvd3MgcGF0aHMgKi8KZnVuY3Rpb24gbm9ybWFsaXplV2luZG93c1BhdGgocGF0aCkgewogIHJldHVybiBwYXRoCiAgICAucmVwbGFjZSgvXltBLVpdOi8sICcnKSAvLyByZW1vdmUgV2luZG93cy1zdHlsZSBwcmVmaXgKICAgIC5yZXBsYWNlKC9cXC9nLCAnLycpOyAvLyByZXBsYWNlIGFsbCBgXGAgaW5zdGFuY2VzIHdpdGggYC9gCn0KCi8qKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBnZXRzIHRoZSBtb2R1bGUgbmFtZSBmcm9tIGEgZmlsZW5hbWUgKi8KZnVuY3Rpb24gY3JlYXRlR2V0TW9kdWxlRnJvbUZpbGVuYW1lKAogIGJhc2VQYXRoID0gcHJvY2Vzcy5hcmd2WzFdID8gZGlybmFtZShwcm9jZXNzLmFyZ3ZbMV0pIDogcHJvY2Vzcy5jd2QoKSwKICBpc1dpbmRvd3MgPSBzZXAgPT09ICdcXCcsCikgewogIGNvbnN0IG5vcm1hbGl6ZWRCYXNlID0gaXNXaW5kb3dzID8gbm9ybWFsaXplV2luZG93c1BhdGgoYmFzZVBhdGgpIDogYmFzZVBhdGg7CgogIHJldHVybiAoZmlsZW5hbWUpID0+IHsKICAgIGlmICghZmlsZW5hbWUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IG5vcm1hbGl6ZWRGaWxlbmFtZSA9IGlzV2luZG93cyA/IG5vcm1hbGl6ZVdpbmRvd3NQYXRoKGZpbGVuYW1lKSA6IGZpbGVuYW1lOwoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3QKICAgIGxldCB7IGRpciwgYmFzZTogZmlsZSwgZXh0IH0gPSBwb3NpeC5wYXJzZShub3JtYWxpemVkRmlsZW5hbWUpOwoKICAgIGlmIChleHQgPT09ICcuanMnIHx8IGV4dCA9PT0gJy5tanMnIHx8IGV4dCA9PT0gJy5janMnKSB7CiAgICAgIGZpbGUgPSBmaWxlLnNsaWNlKDAsIGV4dC5sZW5ndGggKiAtMSk7CiAgICB9CgogICAgaWYgKCFkaXIpIHsKICAgICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyCiAgICAgIGRpciA9ICcuJzsKICAgIH0KCiAgICBjb25zdCBuID0gZGlyLmxhc3RJbmRleE9mKCcvbm9kZV9tb2R1bGVzJyk7CiAgICBpZiAobiA+IC0xKSB7CiAgICAgIHJldHVybiBgJHtkaXIuc2xpY2UobiArIDE0KS5yZXBsYWNlKC9cLy9nLCAnLicpfToke2ZpbGV9YDsKICAgIH0KCiAgICAvLyBMZXQncyBzZWUgaWYgaXQncyBhIHBhcnQgb2YgdGhlIG1haW4gbW9kdWxlCiAgICAvLyBUbyBiZSBhIHBhcnQgb2YgbWFpbiBtb2R1bGUsIGl0IGhhcyB0byBzaGFyZSB0aGUgc2FtZSBiYXNlCiAgICBpZiAoZGlyLnN0YXJ0c1dpdGgobm9ybWFsaXplZEJhc2UpKSB7CiAgICAgIGxldCBtb2R1bGVOYW1lID0gZGlyLnNsaWNlKG5vcm1hbGl6ZWRCYXNlLmxlbmd0aCArIDEpLnJlcGxhY2UoL1wvL2csICcuJyk7CgogICAgICBpZiAobW9kdWxlTmFtZSkgewogICAgICAgIG1vZHVsZU5hbWUgKz0gJzonOwogICAgICB9CiAgICAgIG1vZHVsZU5hbWUgKz0gZmlsZTsKCiAgICAgIHJldHVybiBtb2R1bGVOYW1lOwogICAgfQoKICAgIHJldHVybiBmaWxlOwogIH07Cn0KCmZ1bmN0aW9uIF9udWxsaXNoQ29hbGVzY2UkMihsaHMsIHJoc0ZuKSB7IGlmIChsaHMgIT0gbnVsbCkgeyByZXR1cm4gbGhzOyB9IGVsc2UgeyByZXR1cm4gcmhzRm4oKTsgfSB9LyoqCiAqIFRoaXMgY29kZSB3YXMgb3JpZ2luYWxseSBmb3JrZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vVG9vVGFsbE5hdGUvcHJveHktYWdlbnRzL3RyZWUvYjEzMzI5NWZkMTZmNjQ3NTU3OGI2YjE1YmQ5YjRlMzNlY2IwZDBiNwogKiBXaXRoIHRoZSBmb2xsb3dpbmcgbGljZW5jZToKICoKICogKFRoZSBNSVQgTGljZW5zZSkKICoKICogQ29weXJpZ2h0IChjKSAyMDEzIE5hdGhhbiBSYWpsaWNoIDxuYXRoYW5AdG9vdGFsbG5hdGUubmV0PioKICoKICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nCiAqIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQogKiAnU29mdHdhcmUnKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKICogZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvCiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0bwogKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6KgogKgogKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZQogKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4qCiAqCiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELAogKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKICogTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULgogKiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWQogKiBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULAogKiBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRQogKiBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KICovCgpjb25zdCBJTlRFUk5BTCA9IFN5bWJvbCgnQWdlbnRCYXNlSW50ZXJuYWxTdGF0ZScpOwoKY2xhc3MgQWdlbnQgZXh0ZW5kcyBodHRwLkFnZW50IHsKCiAgLy8gU2V0IGJ5IGBodHRwLkFnZW50YCAtIG1pc3NpbmcgZnJvbSBgQHR5cGVzL25vZGVgCgogIGNvbnN0cnVjdG9yKG9wdHMpIHsKICAgIHN1cGVyKG9wdHMpOwogICAgdGhpc1tJTlRFUk5BTF0gPSB7fTsKICB9CgogIC8qKgogICAqIERldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYW4gYGh0dHBgIG9yIGBodHRwc2AgcmVxdWVzdC4KICAgKi8KICBpc1NlY3VyZUVuZHBvaW50KG9wdGlvbnMpIHsKICAgIGlmIChvcHRpb25zKSB7CiAgICAgIC8vIEZpcnN0IGNoZWNrIHRoZSBgc2VjdXJlRW5kcG9pbnRgIHByb3BlcnR5IGV4cGxpY2l0bHksIHNpbmNlIHRoaXMKICAgICAgLy8gbWVhbnMgdGhhdCBhIHBhcmVudCBgQWdlbnRgIGlzICJwYXNzaW5nIHRocm91Z2giIHRvIHRoaXMgaW5zdGFuY2UuCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MKICAgICAgaWYgKHR5cGVvZiAob3B0aW9ucyApLnNlY3VyZUVuZHBvaW50ID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gb3B0aW9ucy5zZWN1cmVFbmRwb2ludDsKICAgICAgfQoKICAgICAgLy8gSWYgbm8gZXhwbGljaXQgYHNlY3VyZWAgZW5kcG9pbnQsIGNoZWNrIGlmIGBwcm90b2NvbGAgcHJvcGVydHkgaXMKICAgICAgLy8gc2V0LiBUaGlzIHdpbGwgdXN1YWxseSBiZSB0aGUgY2FzZSBzaW5jZSB1c2luZyBhIGZ1bGwgc3RyaW5nIFVSTAogICAgICAvLyBvciBgVVJMYCBpbnN0YW5jZSBzaG91bGQgYmUgdGhlIG1vc3QgY29tbW9uIHVzYWdlLgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJvdG9jb2wgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnMucHJvdG9jb2wgPT09ICdodHRwczonOwogICAgICB9CiAgICB9CgogICAgLy8gRmluYWxseSwgaWYgbm8gYHByb3RvY29sYCBwcm9wZXJ0eSB3YXMgc2V0LCB0aGVuIGZhbGwgYmFjayB0bwogICAgLy8gY2hlY2tpbmcgdGhlIHN0YWNrIHRyYWNlIG9mIHRoZSBjdXJyZW50IGNhbGwgc3RhY2ssIGFuZCB0cnkgdG8KICAgIC8vIGRldGVjdCB0aGUgImh0dHBzIiBtb2R1bGUuCiAgICBjb25zdCB7IHN0YWNrIH0gPSBuZXcgRXJyb3IoKTsKICAgIGlmICh0eXBlb2Ygc3RhY2sgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gc3RhY2suc3BsaXQoJ1xuJykuc29tZShsID0+IGwuaW5kZXhPZignKGh0dHBzLmpzOicpICE9PSAtMSB8fCBsLmluZGV4T2YoJ25vZGU6aHR0cHM6JykgIT09IC0xKTsKICB9CgogIGNyZWF0ZVNvY2tldChyZXEsIG9wdGlvbnMsIGNiKSB7CiAgICBjb25zdCBjb25uZWN0T3B0cyA9IHsKICAgICAgLi4ub3B0aW9ucywKICAgICAgc2VjdXJlRW5kcG9pbnQ6IHRoaXMuaXNTZWN1cmVFbmRwb2ludChvcHRpb25zKSwKICAgIH07CiAgICBQcm9taXNlLnJlc29sdmUoKQogICAgICAudGhlbigoKSA9PiB0aGlzLmNvbm5lY3QocmVxLCBjb25uZWN0T3B0cykpCiAgICAgIC50aGVuKHNvY2tldCA9PiB7CiAgICAgICAgaWYgKHNvY2tldCBpbnN0YW5jZW9mIGh0dHAuQWdlbnQpIHsKICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYGFkZFJlcXVlc3QoKWAgaXNuJ3QgZGVmaW5lZCBpbiBgQHR5cGVzL25vZGVgCiAgICAgICAgICByZXR1cm4gc29ja2V0LmFkZFJlcXVlc3QocmVxLCBjb25uZWN0T3B0cyk7CiAgICAgICAgfQogICAgICAgIHRoaXNbSU5URVJOQUxdLmN1cnJlbnRTb2NrZXQgPSBzb2NrZXQ7CiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBgY3JlYXRlU29ja2V0KClgIGlzbid0IGRlZmluZWQgaW4gYEB0eXBlcy9ub2RlYAogICAgICAgIHN1cGVyLmNyZWF0ZVNvY2tldChyZXEsIG9wdGlvbnMsIGNiKTsKICAgICAgfSwgY2IpOwogIH0KCiAgY3JlYXRlQ29ubmVjdGlvbigpIHsKICAgIGNvbnN0IHNvY2tldCA9IHRoaXNbSU5URVJOQUxdLmN1cnJlbnRTb2NrZXQ7CiAgICB0aGlzW0lOVEVSTkFMXS5jdXJyZW50U29ja2V0ID0gdW5kZWZpbmVkOwogICAgaWYgKCFzb2NrZXQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzb2NrZXQgd2FzIHJldHVybmVkIGluIHRoZSBgY29ubmVjdCgpYCBmdW5jdGlvbicpOwogICAgfQogICAgcmV0dXJuIHNvY2tldDsKICB9CgogIGdldCBkZWZhdWx0UG9ydCgpIHsKICAgIHJldHVybiBfbnVsbGlzaENvYWxlc2NlJDIodGhpc1tJTlRFUk5BTF0uZGVmYXVsdFBvcnQsICgpID0+ICggKHRoaXMucHJvdG9jb2wgPT09ICdodHRwczonID8gNDQzIDogODApKSk7CiAgfQoKICBzZXQgZGVmYXVsdFBvcnQodikgewogICAgaWYgKHRoaXNbSU5URVJOQUxdKSB7CiAgICAgIHRoaXNbSU5URVJOQUxdLmRlZmF1bHRQb3J0ID0gdjsKICAgIH0KICB9CgogIGdldCBwcm90b2NvbCgpIHsKICAgIHJldHVybiBfbnVsbGlzaENvYWxlc2NlJDIodGhpc1tJTlRFUk5BTF0ucHJvdG9jb2wsICgpID0+ICggKHRoaXMuaXNTZWN1cmVFbmRwb2ludCgpID8gJ2h0dHBzOicgOiAnaHR0cDonKSkpOwogIH0KCiAgc2V0IHByb3RvY29sKHYpIHsKICAgIGlmICh0aGlzW0lOVEVSTkFMXSkgewogICAgICB0aGlzW0lOVEVSTkFMXS5wcm90b2NvbCA9IHY7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBkZWJ1ZyQxKC4uLmFyZ3MpIHsKICBsb2dnZXIubG9nKCdbaHR0cHMtcHJveHktYWdlbnQ6cGFyc2UtcHJveHktcmVzcG9uc2VdJywgLi4uYXJncyk7Cn0KCmZ1bmN0aW9uIHBhcnNlUHJveHlSZXNwb25zZShzb2NrZXQpIHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgLy8gd2UgbmVlZCB0byBidWZmZXIgYW55IEhUVFAgdHJhZmZpYyB0aGF0IGhhcHBlbnMgd2l0aCB0aGUgcHJveHkgYmVmb3JlIHdlIGdldAogICAgLy8gdGhlIENPTk5FQ1QgcmVzcG9uc2UsIHNvIHRoYXQgaWYgdGhlIHJlc3BvbnNlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYW4gIjIwMCIKICAgIC8vIHJlc3BvbnNlIGNvZGUsIHRoZW4gd2UgY2FuIHJlLXBsYXkgdGhlICJkYXRhIiBldmVudHMgb24gdGhlIHNvY2tldCBvbmNlIHRoZQogICAgLy8gSFRUUCBwYXJzZXIgaXMgaG9va2VkIHVwLi4uCiAgICBsZXQgYnVmZmVyc0xlbmd0aCA9IDA7CiAgICBjb25zdCBidWZmZXJzID0gW107CgogICAgZnVuY3Rpb24gcmVhZCgpIHsKICAgICAgY29uc3QgYiA9IHNvY2tldC5yZWFkKCk7CiAgICAgIGlmIChiKSBvbmRhdGEoYik7CiAgICAgIGVsc2Ugc29ja2V0Lm9uY2UoJ3JlYWRhYmxlJywgcmVhZCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CiAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdyZWFkYWJsZScsIHJlYWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uZW5kKCkgewogICAgICBjbGVhbnVwKCk7CiAgICAgIGRlYnVnJDEoJ29uZW5kJyk7CiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1Byb3h5IGNvbm5lY3Rpb24gZW5kZWQgYmVmb3JlIHJlY2VpdmluZyBDT05ORUNUIHJlc3BvbnNlJykpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uZXJyb3IoZXJyKSB7CiAgICAgIGNsZWFudXAoKTsKICAgICAgZGVidWckMSgnb25lcnJvciAlbycsIGVycik7CiAgICAgIHJlamVjdChlcnIpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uZGF0YShiKSB7CiAgICAgIGJ1ZmZlcnMucHVzaChiKTsKICAgICAgYnVmZmVyc0xlbmd0aCArPSBiLmxlbmd0aDsKCiAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gQnVmZmVyLmNvbmNhdChidWZmZXJzLCBidWZmZXJzTGVuZ3RoKTsKICAgICAgY29uc3QgZW5kT2ZIZWFkZXJzID0gYnVmZmVyZWQuaW5kZXhPZignXHJcblxyXG4nKTsKCiAgICAgIGlmIChlbmRPZkhlYWRlcnMgPT09IC0xKSB7CiAgICAgICAgLy8ga2VlcCBidWZmZXJpbmcKICAgICAgICBkZWJ1ZyQxKCdoYXZlIG5vdCByZWNlaXZlZCBlbmQgb2YgSFRUUCBoZWFkZXJzIHlldC4uLicpOwogICAgICAgIHJlYWQoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGhlYWRlclBhcnRzID0gYnVmZmVyZWQuc2xpY2UoMCwgZW5kT2ZIZWFkZXJzKS50b1N0cmluZygnYXNjaWknKS5zcGxpdCgnXHJcbicpOwogICAgICBjb25zdCBmaXJzdExpbmUgPSBoZWFkZXJQYXJ0cy5zaGlmdCgpOwogICAgICBpZiAoIWZpcnN0TGluZSkgewogICAgICAgIHNvY2tldC5kZXN0cm95KCk7CiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ05vIGhlYWRlciByZWNlaXZlZCBmcm9tIHByb3h5IENPTk5FQ1QgcmVzcG9uc2UnKSk7CiAgICAgIH0KICAgICAgY29uc3QgZmlyc3RMaW5lUGFydHMgPSBmaXJzdExpbmUuc3BsaXQoJyAnKTsKICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9ICtmaXJzdExpbmVQYXJ0c1sxXTsKICAgICAgY29uc3Qgc3RhdHVzVGV4dCA9IGZpcnN0TGluZVBhcnRzLnNsaWNlKDIpLmpvaW4oJyAnKTsKICAgICAgY29uc3QgaGVhZGVycyA9IHt9OwogICAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBoZWFkZXJQYXJ0cykgewogICAgICAgIGlmICghaGVhZGVyKSBjb250aW51ZTsKICAgICAgICBjb25zdCBmaXJzdENvbG9uID0gaGVhZGVyLmluZGV4T2YoJzonKTsKICAgICAgICBpZiAoZmlyc3RDb2xvbiA9PT0gLTEpIHsKICAgICAgICAgIHNvY2tldC5kZXN0cm95KCk7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihgSW52YWxpZCBoZWFkZXIgZnJvbSBwcm94eSBDT05ORUNUIHJlc3BvbnNlOiAiJHtoZWFkZXJ9ImApKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qga2V5ID0gaGVhZGVyLnNsaWNlKDAsIGZpcnN0Q29sb24pLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgY29uc3QgdmFsdWUgPSBoZWFkZXIuc2xpY2UoZmlyc3RDb2xvbiArIDEpLnRyaW1TdGFydCgpOwogICAgICAgIGNvbnN0IGN1cnJlbnQgPSBoZWFkZXJzW2tleV07CiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50ID09PSAnc3RyaW5nJykgewogICAgICAgICAgaGVhZGVyc1trZXldID0gW2N1cnJlbnQsIHZhbHVlXTsKICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudCkpIHsKICAgICAgICAgIGN1cnJlbnQucHVzaCh2YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhlYWRlcnNba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICBkZWJ1ZyQxKCdnb3QgcHJveHkgc2VydmVyIHJlc3BvbnNlOiAlbyAlbycsIGZpcnN0TGluZSwgaGVhZGVycyk7CiAgICAgIGNsZWFudXAoKTsKICAgICAgcmVzb2x2ZSh7CiAgICAgICAgY29ubmVjdDogewogICAgICAgICAgc3RhdHVzQ29kZSwKICAgICAgICAgIHN0YXR1c1RleHQsCiAgICAgICAgICBoZWFkZXJzLAogICAgICAgIH0sCiAgICAgICAgYnVmZmVyZWQsCiAgICAgIH0pOwogICAgfQoKICAgIHNvY2tldC5vbignZXJyb3InLCBvbmVycm9yKTsKICAgIHNvY2tldC5vbignZW5kJywgb25lbmQpOwoKICAgIHJlYWQoKTsKICB9KTsKfQoKZnVuY3Rpb24gX251bGxpc2hDb2FsZXNjZSQxKGxocywgcmhzRm4pIHsgaWYgKGxocyAhPSBudWxsKSB7IHJldHVybiBsaHM7IH0gZWxzZSB7IHJldHVybiByaHNGbigpOyB9IH0gZnVuY3Rpb24gX29wdGlvbmFsQ2hhaW4kMShvcHMpIHsgbGV0IGxhc3RBY2Nlc3NMSFMgPSB1bmRlZmluZWQ7IGxldCB2YWx1ZSA9IG9wc1swXTsgbGV0IGkgPSAxOyB3aGlsZSAoaSA8IG9wcy5sZW5ndGgpIHsgY29uc3Qgb3AgPSBvcHNbaV07IGNvbnN0IGZuID0gb3BzW2kgKyAxXTsgaSArPSAyOyBpZiAoKG9wID09PSAnb3B0aW9uYWxBY2Nlc3MnIHx8IG9wID09PSAnb3B0aW9uYWxDYWxsJykgJiYgdmFsdWUgPT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGlmIChvcCA9PT0gJ2FjY2VzcycgfHwgb3AgPT09ICdvcHRpb25hbEFjY2VzcycpIHsgbGFzdEFjY2Vzc0xIUyA9IHZhbHVlOyB2YWx1ZSA9IGZuKHZhbHVlKTsgfSBlbHNlIGlmIChvcCA9PT0gJ2NhbGwnIHx8IG9wID09PSAnb3B0aW9uYWxDYWxsJykgeyB2YWx1ZSA9IGZuKCguLi5hcmdzKSA9PiB2YWx1ZS5jYWxsKGxhc3RBY2Nlc3NMSFMsIC4uLmFyZ3MpKTsgbGFzdEFjY2Vzc0xIUyA9IHVuZGVmaW5lZDsgfSB9IHJldHVybiB2YWx1ZTsgfS8qKgogKiBUaGlzIGNvZGUgd2FzIG9yaWdpbmFsbHkgZm9ya2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL1Rvb1RhbGxOYXRlL3Byb3h5LWFnZW50cy90cmVlL2IxMzMyOTVmZDE2ZjY0NzU1NzhiNmIxNWJkOWI0ZTMzZWNiMGQwYjcKICogV2l0aCB0aGUgZm9sbG93aW5nIGxpY2VuY2U6CiAqCiAqIChUaGUgTUlUIExpY2Vuc2UpCiAqCiAqIENvcHlyaWdodCAoYykgMjAxMyBOYXRoYW4gUmFqbGljaCA8bmF0aGFuQHRvb3RhbGxuYXRlLm5ldD4qCiAqCiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwogKiBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKICogJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwogKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0bwogKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8KICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOioKICoKICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuKgogKgogKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwKICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAqIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4KICogSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkKICogQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwKICogVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUKICogU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAqLwoKZnVuY3Rpb24gZGVidWcoLi4uYXJncykgewogIGxvZ2dlci5sb2coJ1todHRwcy1wcm94eS1hZ2VudF0nLCAuLi5hcmdzKTsKfQoKLyoqCiAqIFRoZSBgSHR0cHNQcm94eUFnZW50YCBpbXBsZW1lbnRzIGFuIEhUVFAgQWdlbnQgc3ViY2xhc3MgdGhhdCBjb25uZWN0cyB0bwogKiB0aGUgc3BlY2lmaWVkICJIVFRQKHMpIHByb3h5IHNlcnZlciIgaW4gb3JkZXIgdG8gcHJveHkgSFRUUFMgcmVxdWVzdHMuCiAqCiAqIE91dGdvaW5nIEhUVFAgcmVxdWVzdHMgYXJlIGZpcnN0IHR1bm5lbGVkIHRocm91Z2ggdGhlIHByb3h5IHNlcnZlciB1c2luZyB0aGUKICogYENPTk5FQ1RgIEhUVFAgcmVxdWVzdCBtZXRob2QgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB0byB0aGUgcHJveHkgc2VydmVyLAogKiBhbmQgdGhlbiB0aGUgcHJveHkgc2VydmVyIGNvbm5lY3RzIHRvIHRoZSBkZXN0aW5hdGlvbiB0YXJnZXQgYW5kIGlzc3VlcyB0aGUKICogSFRUUCByZXF1ZXN0IGZyb20gdGhlIHByb3h5IHNlcnZlci4KICoKICogYGh0dHBzOmAgcmVxdWVzdHMgaGF2ZSB0aGVpciBzb2NrZXQgY29ubmVjdGlvbiB1cGdyYWRlZCB0byBUTFMgb25jZQogKiB0aGUgY29ubmVjdGlvbiB0byB0aGUgcHJveHkgc2VydmVyIGhhcyBiZWVuIGVzdGFibGlzaGVkLgogKi8KY2xhc3MgSHR0cHNQcm94eUFnZW50IGV4dGVuZHMgQWdlbnQgewogIHN0YXRpYyBfX2luaXRTdGF0aWMoKSB7dGhpcy5wcm90b2NvbHMgPSBbJ2h0dHAnLCAnaHR0cHMnXTsgfQoKICBjb25zdHJ1Y3Rvcihwcm94eSwgb3B0cykgewogICAgc3VwZXIob3B0cyk7CiAgICB0aGlzLm9wdGlvbnMgPSB7fTsKICAgIHRoaXMucHJveHkgPSB0eXBlb2YgcHJveHkgPT09ICdzdHJpbmcnID8gbmV3IFVSTChwcm94eSkgOiBwcm94eTsKICAgIHRoaXMucHJveHlIZWFkZXJzID0gX251bGxpc2hDb2FsZXNjZSQxKF9vcHRpb25hbENoYWluJDEoW29wdHMsICdvcHRpb25hbEFjY2VzcycsIF8yID0+IF8yLmhlYWRlcnNdKSwgKCkgPT4gKCB7fSkpOwogICAgZGVidWcoJ0NyZWF0aW5nIG5ldyBIdHRwc1Byb3h5QWdlbnQgaW5zdGFuY2U6ICVvJywgdGhpcy5wcm94eS5ocmVmKTsKCiAgICAvLyBUcmltIG9mZiB0aGUgYnJhY2tldHMgZnJvbSBJUHY2IGFkZHJlc3NlcwogICAgY29uc3QgaG9zdCA9ICh0aGlzLnByb3h5Lmhvc3RuYW1lIHx8IHRoaXMucHJveHkuaG9zdCkucmVwbGFjZSgvXlxbfFxdJC9nLCAnJyk7CiAgICBjb25zdCBwb3J0ID0gdGhpcy5wcm94eS5wb3J0ID8gcGFyc2VJbnQodGhpcy5wcm94eS5wb3J0LCAxMCkgOiB0aGlzLnByb3h5LnByb3RvY29sID09PSAnaHR0cHM6JyA/IDQ0MyA6IDgwOwogICAgdGhpcy5jb25uZWN0T3B0cyA9IHsKICAgICAgLy8gQXR0ZW1wdCB0byBuZWdvdGlhdGUgaHR0cC8xLjEgZm9yIHByb3h5IHNlcnZlcnMgdGhhdCBzdXBwb3J0IGh0dHAvMgogICAgICBBTFBOUHJvdG9jb2xzOiBbJ2h0dHAvMS4xJ10sCiAgICAgIC4uLihvcHRzID8gb21pdChvcHRzLCAnaGVhZGVycycpIDogbnVsbCksCiAgICAgIGhvc3QsCiAgICAgIHBvcnQsCiAgICB9OwogIH0KCiAgLyoqCiAgICogQ2FsbGVkIHdoZW4gdGhlIG5vZGUtY29yZSBIVFRQIGNsaWVudCBsaWJyYXJ5IGlzIGNyZWF0aW5nIGEKICAgKiBuZXcgSFRUUCByZXF1ZXN0LgogICAqLwogIGFzeW5jIGNvbm5lY3QocmVxLCBvcHRzKSB7CiAgICBjb25zdCB7IHByb3h5IH0gPSB0aGlzOwoKICAgIGlmICghb3B0cy5ob3N0KSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vICJob3N0IiBwcm92aWRlZCcpOwogICAgfQoKICAgIC8vIENyZWF0ZSBhIHNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBwcm94eSBzZXJ2ZXIuCiAgICBsZXQgc29ja2V0OwogICAgaWYgKHByb3h5LnByb3RvY29sID09PSAnaHR0cHM6JykgewogICAgICBkZWJ1ZygnQ3JlYXRpbmcgYHRscy5Tb2NrZXRgOiAlbycsIHRoaXMuY29ubmVjdE9wdHMpOwogICAgICBjb25zdCBzZXJ2ZXJuYW1lID0gdGhpcy5jb25uZWN0T3B0cy5zZXJ2ZXJuYW1lIHx8IHRoaXMuY29ubmVjdE9wdHMuaG9zdDsKICAgICAgc29ja2V0ID0gdGxzLmNvbm5lY3QoewogICAgICAgIC4uLnRoaXMuY29ubmVjdE9wdHMsCiAgICAgICAgc2VydmVybmFtZTogc2VydmVybmFtZSAmJiBuZXQuaXNJUChzZXJ2ZXJuYW1lKSA/IHVuZGVmaW5lZCA6IHNlcnZlcm5hbWUsCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgZGVidWcoJ0NyZWF0aW5nIGBuZXQuU29ja2V0YDogJW8nLCB0aGlzLmNvbm5lY3RPcHRzKTsKICAgICAgc29ja2V0ID0gbmV0LmNvbm5lY3QodGhpcy5jb25uZWN0T3B0cyk7CiAgICB9CgogICAgY29uc3QgaGVhZGVycyA9CiAgICAgIHR5cGVvZiB0aGlzLnByb3h5SGVhZGVycyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMucHJveHlIZWFkZXJzKCkgOiB7IC4uLnRoaXMucHJveHlIZWFkZXJzIH07CiAgICBjb25zdCBob3N0ID0gbmV0LmlzSVB2NihvcHRzLmhvc3QpID8gYFske29wdHMuaG9zdH1dYCA6IG9wdHMuaG9zdDsKICAgIGxldCBwYXlsb2FkID0gYENPTk5FQ1QgJHtob3N0fToke29wdHMucG9ydH0gSFRUUC8xLjFcclxuYDsKCiAgICAvLyBJbmplY3QgdGhlIGBQcm94eS1BdXRob3JpemF0aW9uYCBoZWFkZXIgaWYgbmVjZXNzYXJ5LgogICAgaWYgKHByb3h5LnVzZXJuYW1lIHx8IHByb3h5LnBhc3N3b3JkKSB7CiAgICAgIGNvbnN0IGF1dGggPSBgJHtkZWNvZGVVUklDb21wb25lbnQocHJveHkudXNlcm5hbWUpfToke2RlY29kZVVSSUNvbXBvbmVudChwcm94eS5wYXNzd29yZCl9YDsKICAgICAgaGVhZGVyc1snUHJveHktQXV0aG9yaXphdGlvbiddID0gYEJhc2ljICR7QnVmZmVyLmZyb20oYXV0aCkudG9TdHJpbmcoJ2Jhc2U2NCcpfWA7CiAgICB9CgogICAgaGVhZGVycy5Ib3N0ID0gYCR7aG9zdH06JHtvcHRzLnBvcnR9YDsKCiAgICBpZiAoIWhlYWRlcnNbJ1Byb3h5LUNvbm5lY3Rpb24nXSkgewogICAgICBoZWFkZXJzWydQcm94eS1Db25uZWN0aW9uJ10gPSB0aGlzLmtlZXBBbGl2ZSA/ICdLZWVwLUFsaXZlJyA6ICdjbG9zZSc7CiAgICB9CiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoaGVhZGVycykpIHsKICAgICAgcGF5bG9hZCArPSBgJHtuYW1lfTogJHtoZWFkZXJzW25hbWVdfVxyXG5gOwogICAgfQoKICAgIGNvbnN0IHByb3h5UmVzcG9uc2VQcm9taXNlID0gcGFyc2VQcm94eVJlc3BvbnNlKHNvY2tldCk7CgogICAgc29ja2V0LndyaXRlKGAke3BheWxvYWR9XHJcbmApOwoKICAgIGNvbnN0IHsgY29ubmVjdCwgYnVmZmVyZWQgfSA9IGF3YWl0IHByb3h5UmVzcG9uc2VQcm9taXNlOwogICAgcmVxLmVtaXQoJ3Byb3h5Q29ubmVjdCcsIGNvbm5lY3QpOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudAogICAgLy8gQHRzLWlnbm9yZSBOb3QgRXZlbnRFbWl0dGVyIGluIE5vZGUgdHlwZXMKICAgIHRoaXMuZW1pdCgncHJveHlDb25uZWN0JywgY29ubmVjdCwgcmVxKTsKCiAgICBpZiAoY29ubmVjdC5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgcmVxLm9uY2UoJ3NvY2tldCcsIHJlc3VtZSk7CgogICAgICBpZiAob3B0cy5zZWN1cmVFbmRwb2ludCkgewogICAgICAgIC8vIFRoZSBwcm94eSBpcyBjb25uZWN0aW5nIHRvIGEgVExTIHNlcnZlciwgc28gdXBncmFkZQogICAgICAgIC8vIHRoaXMgc29ja2V0IGNvbm5lY3Rpb24gdG8gYSBUTFMgY29ubmVjdGlvbi4KICAgICAgICBkZWJ1ZygnVXBncmFkaW5nIHNvY2tldCBjb25uZWN0aW9uIHRvIFRMUycpOwogICAgICAgIGNvbnN0IHNlcnZlcm5hbWUgPSBvcHRzLnNlcnZlcm5hbWUgfHwgb3B0cy5ob3N0OwogICAgICAgIHJldHVybiB0bHMuY29ubmVjdCh7CiAgICAgICAgICAuLi5vbWl0KG9wdHMsICdob3N0JywgJ3BhdGgnLCAncG9ydCcpLAogICAgICAgICAgc29ja2V0LAogICAgICAgICAgc2VydmVybmFtZTogbmV0LmlzSVAoc2VydmVybmFtZSkgPyB1bmRlZmluZWQgOiBzZXJ2ZXJuYW1lLAogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gc29ja2V0OwogICAgfQoKICAgIC8vIFNvbWUgb3RoZXIgc3RhdHVzIGNvZGUgdGhhdCdzIG5vdCAyMDAuLi4gbmVlZCB0byByZS1wbGF5IHRoZSBIVFRQCiAgICAvLyBoZWFkZXIgImRhdGEiIGV2ZW50cyBvbnRvIHRoZSBzb2NrZXQgb25jZSB0aGUgSFRUUCBtYWNoaW5lcnkgaXMKICAgIC8vIGF0dGFjaGVkIHNvIHRoYXQgdGhlIG5vZGUgY29yZSBgaHR0cGAgY2FuIHBhcnNlIGFuZCBoYW5kbGUgdGhlCiAgICAvLyBlcnJvciBzdGF0dXMgY29kZS4KCiAgICAvLyBDbG9zZSB0aGUgb3JpZ2luYWwgc29ja2V0LCBhbmQgYSBuZXcgImZha2UiIHNvY2tldCBpcyByZXR1cm5lZAogICAgLy8gaW5zdGVhZCwgc28gdGhhdCB0aGUgcHJveHkgZG9lc24ndCBnZXQgdGhlIEhUVFAgcmVxdWVzdAogICAgLy8gd3JpdHRlbiB0byBpdCAod2hpY2ggbWF5IGNvbnRhaW4gYEF1dGhvcml6YXRpb25gIGhlYWRlcnMgb3Igb3RoZXIKICAgIC8vIHNlbnNpdGl2ZSBkYXRhKS4KICAgIC8vCiAgICAvLyBTZWU6IGh0dHBzOi8vaGFja2Vyb25lLmNvbS9yZXBvcnRzLzU0MTUwMgogICAgc29ja2V0LmRlc3Ryb3koKTsKCiAgICBjb25zdCBmYWtlU29ja2V0ID0gbmV3IG5ldC5Tb2NrZXQoeyB3cml0YWJsZTogZmFsc2UgfSk7CiAgICBmYWtlU29ja2V0LnJlYWRhYmxlID0gdHJ1ZTsKCiAgICAvLyBOZWVkIHRvIHdhaXQgZm9yIHRoZSAic29ja2V0IiBldmVudCB0byByZS1wbGF5IHRoZSAiZGF0YSIgZXZlbnRzLgogICAgcmVxLm9uY2UoJ3NvY2tldCcsIChzKSA9PiB7CiAgICAgIGRlYnVnKCdSZXBsYXlpbmcgcHJveHkgYnVmZmVyIGZvciBmYWlsZWQgcmVxdWVzdCcpOwogICAgICBhc3NlcnQocy5saXN0ZW5lckNvdW50KCdkYXRhJykgPiAwKTsKCiAgICAgIC8vIFJlcGxheSB0aGUgImJ1ZmZlcmVkIiBCdWZmZXIgb250byB0aGUgZmFrZSBgc29ja2V0YCwgc2luY2UgYXQKICAgICAgLy8gdGhpcyBwb2ludCB0aGUgSFRUUCBtb2R1bGUgbWFjaGluZXJ5IGhhcyBiZWVuIGhvb2tlZCB1cCBmb3IKICAgICAgLy8gdGhlIHVzZXIuCiAgICAgIHMucHVzaChidWZmZXJlZCk7CiAgICAgIHMucHVzaChudWxsKTsKICAgIH0pOwoKICAgIHJldHVybiBmYWtlU29ja2V0OwogIH0KfSBIdHRwc1Byb3h5QWdlbnQuX19pbml0U3RhdGljKCk7CgpmdW5jdGlvbiByZXN1bWUoc29ja2V0KSB7CiAgc29ja2V0LnJlc3VtZSgpOwp9CgpmdW5jdGlvbiBvbWl0KAogIG9iaiwKICAuLi5rZXlzCikKCiB7CiAgY29uc3QgcmV0ID0ge30KCjsKICBsZXQga2V5OwogIGZvciAoa2V5IGluIG9iaikgewogICAgaWYgKCFrZXlzLmluY2x1ZGVzKGtleSkpIHsKICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gX251bGxpc2hDb2FsZXNjZShsaHMsIHJoc0ZuKSB7IGlmIChsaHMgIT0gbnVsbCkgeyByZXR1cm4gbGhzOyB9IGVsc2UgeyByZXR1cm4gcmhzRm4oKTsgfSB9Ci8vIEVzdGltYXRlZCBtYXhpbXVtIHNpemUgZm9yIHJlYXNvbmFibGUgc3RhbmRhbG9uZSBldmVudApjb25zdCBHWklQX1RIUkVTSE9MRCA9IDEwMjQgKiAzMjsKCi8qKgogKiBHZXRzIGEgc3RyZWFtIGZyb20gYSBVaW50OEFycmF5IG9yIHN0cmluZwogKiBSZWFkYWJsZS5mcm9tIGlzIGlkZWFsIGJ1dCB3YXMgYWRkZWQgaW4gbm9kZS5qcyB2MTIuMy4wIGFuZCB2MTAuMTcuMAogKi8KZnVuY3Rpb24gc3RyZWFtRnJvbUJvZHkoYm9keSkgewogIHJldHVybiBuZXcgUmVhZGFibGUoewogICAgcmVhZCgpIHsKICAgICAgdGhpcy5wdXNoKGJvZHkpOwogICAgICB0aGlzLnB1c2gobnVsbCk7CiAgICB9LAogIH0pOwp9CgovKioKICogQ3JlYXRlcyBhIFRyYW5zcG9ydCB0aGF0IHVzZXMgbmF0aXZlIHRoZSBuYXRpdmUgJ2h0dHAnIGFuZCAnaHR0cHMnIG1vZHVsZXMgdG8gc2VuZCBldmVudHMgdG8gU2VudHJ5LgogKi8KZnVuY3Rpb24gbWFrZU5vZGVUcmFuc3BvcnQob3B0aW9ucykgewogIGxldCB1cmxTZWdtZW50czsKCiAgdHJ5IHsKICAgIHVybFNlZ21lbnRzID0gbmV3IFVSTChvcHRpb25zLnVybCk7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZVNhbmRib3goKCkgPT4gewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICBjb25zb2xlLndhcm4oCiAgICAgICAgJ1tAc2VudHJ5L25vZGVdOiBJbnZhbGlkIGRzbiBvciB0dW5uZWwgb3B0aW9uLCB3aWxsIG5vdCBzZW5kIGFueSBldmVudHMuIFRoZSB0dW5uZWwgb3B0aW9uIG11c3QgYmUgYSBmdWxsIFVSTCB3aGVuIHVzZWQuJywKICAgICAgKTsKICAgIH0pOwogICAgcmV0dXJuIGNyZWF0ZVRyYW5zcG9ydChvcHRpb25zLCAoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pKTsKICB9CgogIGNvbnN0IGlzSHR0cHMgPSB1cmxTZWdtZW50cy5wcm90b2NvbCA9PT0gJ2h0dHBzOic7CgogIC8vIFByb3h5IHByaW9yaXRpemF0aW9uOiBodHRwID0+IGBvcHRpb25zLnByb3h5YCB8IGBwcm9jZXNzLmVudi5odHRwX3Byb3h5YAogIC8vIFByb3h5IHByaW9yaXRpemF0aW9uOiBodHRwcyA9PiBgb3B0aW9ucy5wcm94eWAgfCBgcHJvY2Vzcy5lbnYuaHR0cHNfcHJveHlgIHwgYHByb2Nlc3MuZW52Lmh0dHBfcHJveHlgCiAgY29uc3QgcHJveHkgPSBhcHBseU5vUHJveHlPcHRpb24oCiAgICB1cmxTZWdtZW50cywKICAgIG9wdGlvbnMucHJveHkgfHwgKGlzSHR0cHMgPyBwcm9jZXNzLmVudi5odHRwc19wcm94eSA6IHVuZGVmaW5lZCkgfHwgcHJvY2Vzcy5lbnYuaHR0cF9wcm94eSwKICApOwoKICBjb25zdCBuYXRpdmVIdHRwTW9kdWxlID0gaXNIdHRwcyA/IGh0dHBzIDogaHR0cDsKICBjb25zdCBrZWVwQWxpdmUgPSBvcHRpb25zLmtlZXBBbGl2ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBvcHRpb25zLmtlZXBBbGl2ZTsKCiAgLy8gVE9ETyh2Nyk6IEV2YWx1YXRlIGlmIHdlIGNhbiBzZXQga2VlcEFsaXZlIHRvIHRydWUuIFRoaXMgd291bGQgaW52b2x2ZSB0ZXN0aW5nIGZvciBtZW1vcnkgbGVha3MgaW4gb2xkZXIgbm9kZQogIC8vIHZlcnNpb25zKD49IDgpIGFzIHRoZXkgaGFkIG1lbW9yeSBsZWFrcyB3aGVuIHVzaW5nIGl0OiAjMjU1NQogIGNvbnN0IGFnZW50ID0gcHJveHkKICAgID8gKG5ldyBIdHRwc1Byb3h5QWdlbnQocHJveHkpICkKICAgIDogbmV3IG5hdGl2ZUh0dHBNb2R1bGUuQWdlbnQoeyBrZWVwQWxpdmUsIG1heFNvY2tldHM6IDMwLCB0aW1lb3V0OiAyMDAwIH0pOwoKICBjb25zdCByZXF1ZXN0RXhlY3V0b3IgPSBjcmVhdGVSZXF1ZXN0RXhlY3V0b3Iob3B0aW9ucywgX251bGxpc2hDb2FsZXNjZShvcHRpb25zLmh0dHBNb2R1bGUsICgpID0+ICggbmF0aXZlSHR0cE1vZHVsZSkpLCBhZ2VudCk7CiAgcmV0dXJuIGNyZWF0ZVRyYW5zcG9ydChvcHRpb25zLCByZXF1ZXN0RXhlY3V0b3IpOwp9CgovKioKICogSG9ub3JzIHRoZSBgbm9fcHJveHlgIGVudiB2YXJpYWJsZSB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IHRvIGFsbG93IGZvciBob3N0cyBleGNsdXNpb24uCiAqCiAqIEBwYXJhbSB0cmFuc3BvcnRVcmwgVGhlIFVSTCB0aGUgdHJhbnNwb3J0IGludGVuZHMgdG8gc2VuZCBldmVudHMgdG8uCiAqIEBwYXJhbSBwcm94eSBUaGUgY2xpZW50IGNvbmZpZ3VyZWQgcHJveHkuCiAqIEByZXR1cm5zIEEgcHJveHkgdGhlIHRyYW5zcG9ydCBzaG91bGQgdXNlLgogKi8KZnVuY3Rpb24gYXBwbHlOb1Byb3h5T3B0aW9uKHRyYW5zcG9ydFVybFNlZ21lbnRzLCBwcm94eSkgewogIGNvbnN0IHsgbm9fcHJveHkgfSA9IHByb2Nlc3MuZW52OwoKICBjb25zdCB1cmxJc0V4ZW1wdEZyb21Qcm94eSA9CiAgICBub19wcm94eSAmJgogICAgbm9fcHJveHkKICAgICAgLnNwbGl0KCcsJykKICAgICAgLnNvbWUoCiAgICAgICAgZXhlbXB0aW9uID0+IHRyYW5zcG9ydFVybFNlZ21lbnRzLmhvc3QuZW5kc1dpdGgoZXhlbXB0aW9uKSB8fCB0cmFuc3BvcnRVcmxTZWdtZW50cy5ob3N0bmFtZS5lbmRzV2l0aChleGVtcHRpb24pLAogICAgICApOwoKICBpZiAodXJsSXNFeGVtcHRGcm9tUHJveHkpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfSBlbHNlIHsKICAgIHJldHVybiBwcm94eTsKICB9Cn0KCi8qKgogKiBDcmVhdGVzIGEgUmVxdWVzdEV4ZWN1dG9yIHRvIGJlIHVzZWQgd2l0aCBgY3JlYXRlVHJhbnNwb3J0YC4KICovCmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RFeGVjdXRvcigKICBvcHRpb25zLAogIGh0dHBNb2R1bGUsCiAgYWdlbnQsCikgewogIGNvbnN0IHsgaG9zdG5hbWUsIHBhdGhuYW1lLCBwb3J0LCBwcm90b2NvbCwgc2VhcmNoIH0gPSBuZXcgVVJMKG9wdGlvbnMudXJsKTsKICByZXR1cm4gZnVuY3Rpb24gbWFrZVJlcXVlc3QocmVxdWVzdCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgbGV0IGJvZHkgPSBzdHJlYW1Gcm9tQm9keShyZXF1ZXN0LmJvZHkpOwoKICAgICAgY29uc3QgaGVhZGVycyA9IHsgLi4ub3B0aW9ucy5oZWFkZXJzIH07CgogICAgICBpZiAocmVxdWVzdC5ib2R5Lmxlbmd0aCA+IEdaSVBfVEhSRVNIT0xEKSB7CiAgICAgICAgaGVhZGVyc1snY29udGVudC1lbmNvZGluZyddID0gJ2d6aXAnOwogICAgICAgIGJvZHkgPSBib2R5LnBpcGUoY3JlYXRlR3ppcCgpKTsKICAgICAgfQoKICAgICAgY29uc3QgcmVxID0gaHR0cE1vZHVsZS5yZXF1ZXN0KAogICAgICAgIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgYWdlbnQsCiAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgaG9zdG5hbWUsCiAgICAgICAgICBwYXRoOiBgJHtwYXRobmFtZX0ke3NlYXJjaH1gLAogICAgICAgICAgcG9ydCwKICAgICAgICAgIHByb3RvY29sLAogICAgICAgICAgY2E6IG9wdGlvbnMuY2FDZXJ0cywKICAgICAgICB9LAogICAgICAgIHJlcyA9PiB7CiAgICAgICAgICByZXMub24oJ2RhdGEnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIERyYWluIHNvY2tldAogICAgICAgICAgfSk7CgogICAgICAgICAgcmVzLm9uKCdlbmQnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIERyYWluIHNvY2tldAogICAgICAgICAgfSk7CgogICAgICAgICAgcmVzLnNldEVuY29kaW5nKCd1dGY4Jyk7CgogICAgICAgICAgLy8gIktleS12YWx1ZSBwYWlycyBvZiBoZWFkZXIgbmFtZXMgYW5kIHZhbHVlcy4gSGVhZGVyIG5hbWVzIGFyZSBsb3dlci1jYXNlZC4iCiAgICAgICAgICAvLyBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVycwogICAgICAgICAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IF9udWxsaXNoQ29hbGVzY2UocmVzLmhlYWRlcnNbJ3JldHJ5LWFmdGVyJ10sICgpID0+ICggbnVsbCkpOwogICAgICAgICAgY29uc3QgcmF0ZUxpbWl0c0hlYWRlciA9IF9udWxsaXNoQ29hbGVzY2UocmVzLmhlYWRlcnNbJ3gtc2VudHJ5LXJhdGUtbGltaXRzJ10sICgpID0+ICggbnVsbCkpOwoKICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdyZXRyeS1hZnRlcic6IHJldHJ5QWZ0ZXJIZWFkZXIsCiAgICAgICAgICAgICAgJ3gtc2VudHJ5LXJhdGUtbGltaXRzJzogQXJyYXkuaXNBcnJheShyYXRlTGltaXRzSGVhZGVyKSA/IHJhdGVMaW1pdHNIZWFkZXJbMF0gOiByYXRlTGltaXRzSGVhZGVyLAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgKTsKCiAgICAgIHJlcS5vbignZXJyb3InLCByZWplY3QpOwogICAgICBib2R5LnBpcGUocmVxKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9vcHRpb25hbENoYWluKG9wcykgeyBsZXQgbGFzdEFjY2Vzc0xIUyA9IHVuZGVmaW5lZDsgbGV0IHZhbHVlID0gb3BzWzBdOyBsZXQgaSA9IDE7IHdoaWxlIChpIDwgb3BzLmxlbmd0aCkgeyBjb25zdCBvcCA9IG9wc1tpXTsgY29uc3QgZm4gPSBvcHNbaSArIDFdOyBpICs9IDI7IGlmICgob3AgPT09ICdvcHRpb25hbEFjY2VzcycgfHwgb3AgPT09ICdvcHRpb25hbENhbGwnKSAmJiB2YWx1ZSA9PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gaWYgKG9wID09PSAnYWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJykgeyBsYXN0QWNjZXNzTEhTID0gdmFsdWU7IHZhbHVlID0gZm4odmFsdWUpOyB9IGVsc2UgaWYgKG9wID09PSAnY2FsbCcgfHwgb3AgPT09ICdvcHRpb25hbENhbGwnKSB7IHZhbHVlID0gZm4oKC4uLmFyZ3MpID0+IHZhbHVlLmNhbGwobGFzdEFjY2Vzc0xIUywgLi4uYXJncykpOyBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyB9IH0gcmV0dXJuIHZhbHVlOyB9CmNvbnN0IG9wdGlvbnMgPSB3b3JrZXJEYXRhOwpsZXQgc2Vzc2lvbjsKbGV0IGhhc1NlbnRBbnJFdmVudCA9IGZhbHNlOwoKZnVuY3Rpb24gbG9nKG1zZykgewogIGlmIChvcHRpb25zLmRlYnVnKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgY29uc29sZS5sb2coYFtBTlIgV29ya2VyXSAke21zZ31gKTsKICB9Cn0KCmNvbnN0IHVybCA9IGdldEVudmVsb3BlRW5kcG9pbnRXaXRoVXJsRW5jb2RlZEF1dGgob3B0aW9ucy5kc24pOwpjb25zdCB0cmFuc3BvcnQgPSBtYWtlTm9kZVRyYW5zcG9ydCh7CiAgdXJsLAogIHJlY29yZERyb3BwZWRFdmVudDogKCkgPT4gewogICAgLy8KICB9LAp9KTsKCmFzeW5jIGZ1bmN0aW9uIHNlbmRBYm5vcm1hbFNlc3Npb24oKSB7CiAgLy8gb2Ygd2UgaGF2ZSBhbiBleGlzdGluZyBzZXNzaW9uIHBhc3NlZCBmcm9tIHRoZSBtYWluIHRocmVhZCwgc2VuZCBpdCBhcyBhYm5vcm1hbAogIGlmIChzZXNzaW9uKSB7CiAgICBsb2coJ1NlbmRpbmcgYWJub3JtYWwgc2Vzc2lvbicpOwogICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCB7IHN0YXR1czogJ2Fibm9ybWFsJywgYWJub3JtYWxfbWVjaGFuaXNtOiAnYW5yX2ZvcmVncm91bmQnIH0pOwoKICAgIGNvbnN0IGVudmVsb3BlID0gY3JlYXRlU2Vzc2lvbkVudmVsb3BlKHNlc3Npb24sIG9wdGlvbnMuZHNuLCBvcHRpb25zLnNka01ldGFkYXRhKTsKICAgIC8vIExvZyB0aGUgZW52ZWxvcGUgc28gdG8gYWlkIGluIHRlc3RpbmcKICAgIGxvZyhKU09OLnN0cmluZ2lmeShlbnZlbG9wZSkpOwoKICAgIGF3YWl0IHRyYW5zcG9ydC5zZW5kKGVudmVsb3BlKTsKCiAgICB0cnkgewogICAgICAvLyBOb3RpZnkgdGhlIG1haW4gcHJvY2VzcyB0aGF0IHRoZSBzZXNzaW9uIGhhcyBlbmRlZCBzbyB0aGUgc2Vzc2lvbiBjYW4gYmUgY2xlYXJlZCBmcm9tIHRoZSBzY29wZQogICAgICBfb3B0aW9uYWxDaGFpbihbcGFyZW50UG9ydCwgJ29wdGlvbmFsQWNjZXNzJywgXzIgPT4gXzIucG9zdE1lc3NhZ2UsICdjYWxsJywgXzMgPT4gXzMoJ3Nlc3Npb24tZW5kZWQnKV0pOwogICAgfSBjYXRjaCAoXykgewogICAgICAvLyBpZ25vcmUKICAgIH0KICB9Cn0KCmxvZygnU3RhcnRlZCcpOwoKZnVuY3Rpb24gcHJlcGFyZVN0YWNrRnJhbWVzKHN0YWNrRnJhbWVzKSB7CiAgaWYgKCFzdGFja0ZyYW1lcykgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CgogIC8vIFN0cmlwIFNlbnRyeSBmcmFtZXMgYW5kIHJldmVyc2UgdGhlIHN0YWNrIGZyYW1lcyBzbyB0aGV5IGFyZSBpbiB0aGUgY29ycmVjdCBvcmRlcgogIGNvbnN0IHN0cmlwcGVkRnJhbWVzID0gc3RyaXBTZW50cnlGcmFtZXNBbmRSZXZlcnNlKHN0YWNrRnJhbWVzKTsKCiAgLy8gSWYgd2UgaGF2ZSBhbiBhcHAgcm9vdCBwYXRoLCByZXdyaXRlIHRoZSBmaWxlbmFtZXMgdG8gYmUgcmVsYXRpdmUgdG8gdGhlIGFwcCByb290CiAgaWYgKG9wdGlvbnMuYXBwUm9vdFBhdGgpIHsKICAgIGZvciAoY29uc3QgZnJhbWUgb2Ygc3RyaXBwZWRGcmFtZXMpIHsKICAgICAgaWYgKCFmcmFtZS5maWxlbmFtZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBmcmFtZS5maWxlbmFtZSA9IG5vcm1hbGl6ZVVybFRvQmFzZShmcmFtZS5maWxlbmFtZSwgb3B0aW9ucy5hcHBSb290UGF0aCk7CiAgICB9CiAgfQoKICByZXR1cm4gc3RyaXBwZWRGcmFtZXM7Cn0KCmFzeW5jIGZ1bmN0aW9uIHNlbmRBbnJFdmVudChmcmFtZXMsIHRyYWNlQ29udGV4dCkgewogIGlmIChoYXNTZW50QW5yRXZlbnQpIHsKICAgIHJldHVybjsKICB9CgogIGhhc1NlbnRBbnJFdmVudCA9IHRydWU7CgogIGF3YWl0IHNlbmRBYm5vcm1hbFNlc3Npb24oKTsKCiAgbG9nKCdTZW5kaW5nIGV2ZW50Jyk7CgogIGNvbnN0IGV2ZW50ID0gewogICAgZXZlbnRfaWQ6IHV1aWQ0KCksCiAgICBjb250ZXh0czogeyAuLi5vcHRpb25zLmNvbnRleHRzLCB0cmFjZTogdHJhY2VDb250ZXh0IH0sCiAgICByZWxlYXNlOiBvcHRpb25zLnJlbGVhc2UsCiAgICBlbnZpcm9ubWVudDogb3B0aW9ucy5lbnZpcm9ubWVudCwKICAgIGRpc3Q6IG9wdGlvbnMuZGlzdCwKICAgIHBsYXRmb3JtOiAnbm9kZScsCiAgICBsZXZlbDogJ2Vycm9yJywKICAgIGV4Y2VwdGlvbjogewogICAgICB2YWx1ZXM6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAnQXBwbGljYXRpb25Ob3RSZXNwb25kaW5nJywKICAgICAgICAgIHZhbHVlOiBgQXBwbGljYXRpb24gTm90IFJlc3BvbmRpbmcgZm9yIGF0IGxlYXN0ICR7b3B0aW9ucy5hbnJUaHJlc2hvbGR9IG1zYCwKICAgICAgICAgIHN0YWNrdHJhY2U6IHsgZnJhbWVzOiBwcmVwYXJlU3RhY2tGcmFtZXMoZnJhbWVzKSB9LAogICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBVSSBkb2Vzbid0IHNheSAnQ3Jhc2hlZCBpbicgZm9yIHRoZSBzdGFjayB0cmFjZQogICAgICAgICAgbWVjaGFuaXNtOiB7IHR5cGU6ICdBTlInIH0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH0sCiAgICB0YWdzOiBvcHRpb25zLnN0YXRpY1RhZ3MsCiAgfTsKCiAgY29uc3QgZW52ZWxvcGUgPSBjcmVhdGVFdmVudEVudmVsb3BlKGV2ZW50LCBvcHRpb25zLmRzbiwgb3B0aW9ucy5zZGtNZXRhZGF0YSk7CiAgLy8gTG9nIHRoZSBlbnZlbG9wZSBzbyB0byBhaWQgaW4gdGVzdGluZwogIGxvZyhKU09OLnN0cmluZ2lmeShlbnZlbG9wZSkpOwoKICBhd2FpdCB0cmFuc3BvcnQuc2VuZChlbnZlbG9wZSk7CiAgYXdhaXQgdHJhbnNwb3J0LmZsdXNoKDIwMDApOwoKICAvLyBEZWxheSBmb3IgNSBzZWNvbmRzIHNvIHRoYXQgc3RkaW8gY2FuIGZsdXNoIGluIHRoZSBtYWluIGV2ZW50IGxvb3AgZXZlciByZXN0YXJ0cy4KICAvLyBUaGlzIGlzIG1haW5seSBmb3IgdGhlIGJlbmVmaXQgb2YgbG9nZ2luZy9kZWJ1Z2dpbmcgaXNzdWVzLgogIHNldFRpbWVvdXQoKCkgPT4gewogICAgcHJvY2Vzcy5leGl0KDApOwogIH0sIDUwMDApOwp9CgpsZXQgZGVidWdnZXJQYXVzZTsKCmlmIChvcHRpb25zLmNhcHR1cmVTdGFja1RyYWNlKSB7CiAgbG9nKCdDb25uZWN0aW5nIHRvIGRlYnVnZ2VyJyk7CgogIGNvbnN0IHNlc3Npb24gPSBuZXcgU2Vzc2lvbigpIDsKICBzZXNzaW9uLmNvbm5lY3RUb01haW5UaHJlYWQoKTsKCiAgbG9nKCdDb25uZWN0ZWQgdG8gZGVidWdnZXInKTsKCiAgLy8gQ29sbGVjdCBzY3JpcHRJZCAtPiB1cmwgbWFwIHNvIHdlIGNhbiBsb29rIHVwIHRoZSBmaWxlbmFtZXMgbGF0ZXIKICBjb25zdCBzY3JpcHRzID0gbmV3IE1hcCgpOwoKICBzZXNzaW9uLm9uKCdEZWJ1Z2dlci5zY3JpcHRQYXJzZWQnLCBldmVudCA9PiB7CiAgICBzY3JpcHRzLnNldChldmVudC5wYXJhbXMuc2NyaXB0SWQsIGV2ZW50LnBhcmFtcy51cmwpOwogIH0pOwoKICBzZXNzaW9uLm9uKCdEZWJ1Z2dlci5wYXVzZWQnLCBldmVudCA9PiB7CiAgICBpZiAoZXZlbnQucGFyYW1zLnJlYXNvbiAhPT0gJ290aGVyJykgewogICAgICByZXR1cm47CiAgICB9CgogICAgdHJ5IHsKICAgICAgbG9nKCdEZWJ1Z2dlciBwYXVzZWQnKTsKCiAgICAgIC8vIGNvcHkgdGhlIGZyYW1lcwogICAgICBjb25zdCBjYWxsRnJhbWVzID0gWy4uLmV2ZW50LnBhcmFtcy5jYWxsRnJhbWVzXTsKCiAgICAgIGNvbnN0IGdldE1vZHVsZU5hbWUgPSBvcHRpb25zLmFwcFJvb3RQYXRoID8gY3JlYXRlR2V0TW9kdWxlRnJvbUZpbGVuYW1lKG9wdGlvbnMuYXBwUm9vdFBhdGgpIDogKCkgPT4gdW5kZWZpbmVkOwogICAgICBjb25zdCBzdGFja0ZyYW1lcyA9IGNhbGxGcmFtZXMubWFwKGZyYW1lID0+CiAgICAgICAgY2FsbEZyYW1lVG9TdGFja0ZyYW1lKGZyYW1lLCBzY3JpcHRzLmdldChmcmFtZS5sb2NhdGlvbi5zY3JpcHRJZCksIGdldE1vZHVsZU5hbWUpLAogICAgICApOwoKICAgICAgLy8gRXZhbHVhdGUgYSBzY3JpcHQgaW4gdGhlIGN1cnJlbnRseSBwYXVzZWQgY29udGV4dAogICAgICBzZXNzaW9uLnBvc3QoCiAgICAgICAgJ1J1bnRpbWUuZXZhbHVhdGUnLAogICAgICAgIHsKICAgICAgICAgIC8vIEdyYWIgdGhlIHRyYWNlIGNvbnRleHQgZnJvbSB0aGUgY3VycmVudCBzY29wZQogICAgICAgICAgZXhwcmVzc2lvbjoKICAgICAgICAgICAgJ2NvbnN0IGN0eCA9IF9fU0VOVFJZX18uaHViLmdldFNjb3BlKCkuZ2V0UHJvcGFnYXRpb25Db250ZXh0KCk7IGN0eC50cmFjZUlkICsgIi0iICsgY3R4LnNwYW5JZCArICItIiArIGN0eC5wYXJlbnRTcGFuSWQnLAogICAgICAgICAgLy8gRG9uJ3QgcmUtdHJpZ2dlciB0aGUgZGVidWdnZXIgaWYgdGhpcyBjYXVzZXMgYW4gZXJyb3IKICAgICAgICAgIHNpbGVudDogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIChfLCBwYXJhbSkgPT4gewogICAgICAgICAgY29uc3QgdHJhY2VJZCA9IHBhcmFtICYmIHBhcmFtLnJlc3VsdCA/IChwYXJhbS5yZXN1bHQudmFsdWUgKSA6ICctLSc7CiAgICAgICAgICBjb25zdCBbdHJhY2VfaWQsIHNwYW5faWQsIHBhcmVudF9zcGFuX2lkXSA9IHRyYWNlSWQuc3BsaXQoJy0nKSA7CgogICAgICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5yZXN1bWUnKTsKICAgICAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZGlzYWJsZScpOwoKICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBfb3B0aW9uYWxDaGFpbihbdHJhY2VfaWQsICdvcHRpb25hbEFjY2VzcycsIF80ID0+IF80Lmxlbmd0aF0pICYmIF9vcHRpb25hbENoYWluKFtzcGFuX2lkLCAnb3B0aW9uYWxBY2Nlc3MnLCBfNSA9PiBfNS5sZW5ndGhdKSA/IHsgdHJhY2VfaWQsIHNwYW5faWQsIHBhcmVudF9zcGFuX2lkIH0gOiB1bmRlZmluZWQ7CiAgICAgICAgICBzZW5kQW5yRXZlbnQoc3RhY2tGcmFtZXMsIGNvbnRleHQpLnRoZW4obnVsbCwgKCkgPT4gewogICAgICAgICAgICBsb2coJ1NlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZC4nKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIucmVzdW1lJyk7CiAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZGlzYWJsZScpOwogICAgICB0aHJvdyBlOwogICAgfQogIH0pOwoKICBkZWJ1Z2dlclBhdXNlID0gKCkgPT4gewogICAgdHJ5IHsKICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5lbmFibGUnLCAoKSA9PiB7CiAgICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5wYXVzZScpOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgLy8KICAgIH0KICB9Owp9CgpmdW5jdGlvbiBjcmVhdGVIclRpbWVyKCkgewogIC8vIFRPRE8gKHY4KTogV2UgY2FuIHVzZSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKSBhZnRlciB3ZSBkcm9wIG5vZGUgdjgKICBsZXQgbGFzdFBvbGwgPSBwcm9jZXNzLmhydGltZSgpOwoKICByZXR1cm4gewogICAgZ2V0VGltZU1zOiAoKSA9PiB7CiAgICAgIGNvbnN0IFtzZWNvbmRzLCBuYW5vU2Vjb25kc10gPSBwcm9jZXNzLmhydGltZShsYXN0UG9sbCk7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKHNlY29uZHMgKiAxZTMgKyBuYW5vU2Vjb25kcyAvIDFlNik7CiAgICB9LAogICAgcmVzZXQ6ICgpID0+IHsKICAgICAgbGFzdFBvbGwgPSBwcm9jZXNzLmhydGltZSgpOwogICAgfSwKICB9Owp9CgpmdW5jdGlvbiB3YXRjaGRvZ1RpbWVvdXQoKSB7CiAgbG9nKCdXYXRjaGRvZyB0aW1lb3V0Jyk7CgogIGlmIChkZWJ1Z2dlclBhdXNlKSB7CiAgICBsb2coJ1BhdXNpbmcgZGVidWdnZXIgdG8gY2FwdHVyZSBzdGFjayB0cmFjZScpOwogICAgZGVidWdnZXJQYXVzZSgpOwogIH0gZWxzZSB7CiAgICBsb2coJ0NhcHR1cmluZyBldmVudCB3aXRob3V0IGEgc3RhY2sgdHJhY2UnKTsKICAgIHNlbmRBbnJFdmVudCgpLnRoZW4obnVsbCwgKCkgPT4gewogICAgICBsb2coJ1NlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZCBvbiB3YXRjaGRvZyB0aW1lb3V0LicpOwogICAgfSk7CiAgfQp9Cgpjb25zdCB7IHBvbGwgfSA9IHdhdGNoZG9nVGltZXIoY3JlYXRlSHJUaW1lciwgb3B0aW9ucy5wb2xsSW50ZXJ2YWwsIG9wdGlvbnMuYW5yVGhyZXNob2xkLCB3YXRjaGRvZ1RpbWVvdXQpOwoKX29wdGlvbmFsQ2hhaW4oW3BhcmVudFBvcnQsICdvcHRpb25hbEFjY2VzcycsIF82ID0+IF82Lm9uLCAnY2FsbCcsIF83ID0+IF83KCdtZXNzYWdlJywgKG1zZykgPT4gewogIGlmIChtc2cuc2Vzc2lvbikgewogICAgc2Vzc2lvbiA9IG1ha2VTZXNzaW9uKG1zZy5zZXNzaW9uKTsKICB9CgogIHBvbGwoKTsKfSldKTs="),{workerData:h});process.on("exit",(()=>{f.terminate()}));const I=setInterval((()=>{try{const e=(0,s.nZ)().getSession(),t=e?{...e,toJSON:void 0}:void 0;f.postMessage({session:t})}catch(e){}}),h.pollInterval);I.unref(),f.on("message",(e=>{"session-ended"===e&&(u("ANR event sent from ANR worker. Clearing session in this thread."),(0,s.nZ)().setSession(void 0))})),f.once("error",(e=>{clearInterval(I),u("ANR worker error",e)})),f.once("exit",(e=>{clearInterval(I),u("ANR worker exit",e)})),f.unref()}(r,t)))}})))},1249:(e,t,a)=>{"use strict";a.d(t,{Y:()=>f});var o,n=a(4307),i=a(4487),r=a(766),s=a(4317),l=a(454),c=a(3371),d=a(3641),u=a(2176),g=a(7321),p=a(9181),m=a(7638),h=a(6956),b=a(9656);e=a.hmd(e),function(e){e.RequestCreate="undici:request:create",e.RequestEnd="undici:request:headers",e.RequestError="undici:request:error"}(o||(o={}));class f{static __initStatic(){this.id="Undici"}__init(){this.name=f.id}__init2(){this._createSpanUrlMap=new d.f(100)}__init3(){this._headersUrlMap=new d.f(100)}constructor(e={}){f.prototype.__init.call(this),f.prototype.__init2.call(this),f.prototype.__init3.call(this),f.prototype.__init4.call(this),f.prototype.__init5.call(this),f.prototype.__init6.call(this),this._options={breadcrumbs:void 0===e.breadcrumbs||e.breadcrumbs,shouldCreateSpanForRequest:e.shouldCreateSpanForRequest}}setupOnce(t){if(b.V.major<16)return;let a;try{a=(0,u.l$)(e,"diagnostics_channel")}catch(e){}a&&a.subscribe&&(a.subscribe(o.RequestCreate,this._onRequestCreate),a.subscribe(o.RequestEnd,this._onRequestEnd),a.subscribe(o.RequestError,this._onRequestError))}_shouldCreateSpan(e){if(void 0===this._options.shouldCreateSpanForRequest)return!0;const t=this._createSpanUrlMap.get(e);if(void 0!==t)return t;const a=this._options.shouldCreateSpanForRequest(e);return this._createSpanUrlMap.set(e,a),a}__init4(){this._onRequestCreate=e=>{if(!(0,n.x)([i.s3,"call",e=>e(),"optionalAccess",e=>e.getIntegration,"call",e=>e(f)]))return;const{request:t}=e,a=t.origin?t.origin.toString()+t.path:t.path,o=(0,i.s3)();if(!o)return;if((0,r.W)(a,o)||void 0!==t.__sentry_span__)return;const d=o.getOptions(),u=(0,i.nZ)(),b=(0,s.HN)(),_=this._shouldCreateSpan(a)?function(e,t,a){const o=(0,h.en)(a),i=t.method||"GET",r={"http.method":i};return o.search&&(r["http.query"]=o.search),o.hash&&(r["http.fragment"]=o.hash),(0,n.x)([e,"optionalAccess",e=>e.startChild,"call",e=>e({op:"http.client",origin:"auto.http.node.undici",description:`${i} ${(0,h.tF)(o)}`,data:r})])}(b,t,a):void 0;if(_&&(t.__sentry_span__=_),(e=>{if(void 0===d.tracePropagationTargets)return!0;const t=this._headersUrlMap.get(e);if(void 0!==t)return t;const a=(0,g.U0)(e,d.tracePropagationTargets);return this._headersUrlMap.set(e,a),a})(a))if(_){const e=(0,l.j)(_),a=(0,p.IQ)(e);I(t,(0,c.Hb)(_),a)}else{const{traceId:e,sampled:a,dsc:n}=u.getPropagationContext(),i=(0,m.$p)(e,void 0,a),r=n||(0,l._)(e,o,u);I(t,i,(0,p.IQ)(r))}}}__init5(){this._onRequestEnd=e=>{if(!(0,n.x)([i.s3,"call",e=>e(),"optionalAccess",e=>e.getIntegration,"call",e=>e(f)]))return;const{request:t,response:a}=e,o=t.origin?t.origin.toString()+t.path:t.path;if((0,r.W)(o,(0,i.s3)()))return;const s=t.__sentry_span__;s&&(s.setHttpStatus(a.statusCode),s.end()),this._options.breadcrumbs&&(0,i.n_)({category:"http",data:{method:t.method,status_code:a.statusCode,url:o},type:"http"},{event:"response",request:t,response:a})}}__init6(){this._onRequestError=e=>{if(!(0,n.x)([i.s3,"call",e=>e(),"optionalAccess",e=>e.getIntegration,"call",e=>e(f)]))return;const{request:t}=e,a=t.origin?t.origin.toString()+t.path:t.path;if((0,r.W)(a,(0,i.s3)()))return;const o=t.__sentry_span__;o&&(o.setStatus("internal_error"),o.end()),this._options.breadcrumbs&&(0,i.n_)({category:"http",data:{method:t.method,url:a},level:"error",type:"http"},{event:"error",request:t})}}}function I(e,t,a){e.headers.split("\r\n").some((e=>e.startsWith("sentry-trace:")))||(e.addHeader("sentry-trace",t),a&&e.addHeader("baggage",a))}f.__initStatic()},9656:(e,t,a)=>{"use strict";a.d(t,{V:()=>o});const o=(0,a(2844).J4)(process.versions.node)},2421:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BROWSER_TRACING_INTEGRATION_ID:()=>je,BrowserTracing:()=>ze,IdleTransaction:()=>tt,Integrations:()=>it,Span:()=>Me,SpanStatus:()=>nt,TRACEPARENT_REGEXP:()=>et,Transaction:()=>De,addExtensionMethods:()=>Ue,defaultRequestInstrumentationOptions:()=>Qe,extractTraceparentData:()=>Ke,getActiveTransaction:()=>Je,hasTracingEnabled:()=>$e,instrumentOutgoingRequests:()=>at,spanStatusfromHttpCode:()=>Le,startIdleTransaction:()=>ot,stripUrlQueryAndFragment:()=>qe});var o=a(5544),n=a(1283),i=a(6754),r=a(3371),s=a(9791),l=a(2343),c=a(7638),d=a(8464),u=a(7513),g=a(1235);const p=g.GLOBAL_OBJ;var m=a(9080),h=a(1170),b=a(6956),f=a(6147);const I=(e,t,a)=>{let o,n;return i=>{t.value>=0&&(i||a)&&(n=t.value-(o||0),(n||void 0===o)&&(o=t.value,t.delta=n,e(t)))}},_=()=>p.__WEB_VITALS_POLYFILL__?p.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=p.performance.timing,t=p.performance.navigation.type,a={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(a[t]=Math.max(e[t]-e.navigationStart,0));return a})()):p.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],y=()=>{const e=_();return e&&e.activationStart||0},v=(e,t)=>{const a=_();let o="navigate";return a&&(o=p.document.prerendering||y()>0?"prerender":a.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:o}},C=(e,t,a)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const o=new PerformanceObserver((e=>{t(e.getEntries())}));return o.observe(Object.assign({type:e,buffered:!0},a||{})),o}}catch(e){}},A=(e,t)=>{const a=o=>{"pagehide"!==o.type&&"hidden"!==p.document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",a,!0),removeEventListener("pagehide",a,!0)))};addEventListener("visibilitychange",a,!0),addEventListener("pagehide",a,!0)},w=e=>{const t=v("CLS",0);let a,o=0,n=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const i=n[0],r=n[n.length-1];o&&0!==n.length&&e.startTime-r.startTime<1e3&&e.startTime-i.startTime<5e3?(o+=e.value,n.push(e)):(o=e.value,n=[e]),o>t.value&&(t.value=o,t.entries=n,a&&a())}}))},r=C("layout-shift",i);if(r){a=I(e,t);const o=()=>{i(r.takeRecords()),a(!0)};return A(o),o}};let S=-1;const G=()=>(S<0&&(S="hidden"!==p.document.visibilityState||p.document.prerendering?1/0:0,A((({timeStamp:e})=>{S=e}),!0)),{get firstHiddenTime(){return S}}),Z=e=>{const t=G(),a=v("FID");let o;const n=e=>{e.startTime<t.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),o(!0))},i=e=>{e.forEach(n)},r=C("first-input",i);o=I(e,a),r&&A((()=>{i(r.takeRecords()),r.disconnect()}),!0)},B={},W=e=>{const t=G(),a=v("LCP");let o;const n=e=>{const n=e[e.length-1];if(n){const e=Math.max(n.startTime-y(),0);e<t.firstHiddenTime&&(a.value=e,a.entries=[n],o())}},i=C("largest-contentful-paint",n);if(i){o=I(e,a);const t=()=>{B[a.id]||(n(i.takeRecords()),i.disconnect(),B[a.id]=!0,o(!0))};return["keydown","click"].forEach((e=>{addEventListener(e,t,{once:!0,capture:!0})})),A(t,!0),t}},k={},V={};let R,x,N;function H(e,t){return P(e,t),V[e]||(function(e){const t={};"event"===e&&(t.durationThreshold=0),C(e,(t=>{E(e,{entries:t})}),t)}(e),V[e]=!0),O(e,t)}function E(e,t){const a=k[e];if(a&&a.length)for(const o of a)try{o(t)}catch(t){u.X&&l.kg.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,f.$P)(o)}\nError:`,t)}}function T(){return w((e=>{E("cls",{metric:e}),R=e}))}function X(){return Z((e=>{E("fid",{metric:e}),x=e}))}function Y(){return W((e=>{E("lcp",{metric:e}),N=e}))}function F(e,t,a,o,n=!1){let i;return P(e,t),V[e]||(i=a(),V[e]=!0),o&&t({metric:o}),O(e,t,n?i:void 0)}function P(e,t){k[e]=k[e]||[],k[e].push(t)}function O(e,t,a){return()=>{a&&a();const o=k[e];if(!o)return;const n=o.indexOf(t);-1!==n&&o.splice(n,1)}}function z(e){return"number"==typeof e&&isFinite(e)}function U(e,{startTimestamp:t,...a}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...a})}const J=2147483647;function K(e){return e/1e3}function L(){return p&&p.addEventListener&&p.performance}let D,M,j=0,Q={};function $(e,t,a,o,n,i){const r=i?t[i]:t[`${a}End`],s=t[`${a}Start`];s&&r&&U(e,{op:"browser",origin:"auto.browser.browser.metrics",description:n||a,startTimestamp:o+K(s),endTimestamp:o+K(r)})}function q(e,t,a,o){const n=t[a];null!=n&&n<J&&(e[o]=n)}var ee=a(7522),te=a(4487),ae=a(4317),oe=a(5102),ne=a(454),ie=a(535),re=a(3897);const se=(0,g.R)();function le(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}var ce=a(9729);function de(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in se))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(le(se.fetch))return!0;let e=!1;const t=se.document;if(t&&"function"==typeof t.createElement)try{const a=t.createElement("iframe");a.hidden=!0,t.head.appendChild(a),a.contentWindow&&a.contentWindow.fetch&&(e=le(a.contentWindow.fetch)),t.head.removeChild(a)}catch(e){re.X&&l.kg.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&(0,ie.hl)(g.GLOBAL_OBJ,"fetch",(function(e){return function(...t){const{method:a,url:o}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,a]=e;return{url:ge(t),method:ue(a,"method")?String(a.method).toUpperCase():"GET"}}const t=e[0];return{url:ge(t),method:ue(t,"method")?String(t.method).toUpperCase():"GET"}}(t),n={args:t,fetchData:{method:a,url:o},startTimestamp:Date.now()};return(0,ce.rK)("fetch",{...n}),e.apply(g.GLOBAL_OBJ,t).then((e=>{const t={...n,endTimestamp:Date.now(),response:e};return(0,ce.rK)("fetch",t),e}),(e=>{const t={...n,endTimestamp:Date.now(),error:e};throw(0,ce.rK)("fetch",t),e}))}}))}function ue(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ge(e){return"string"==typeof e?e:e?ue(e,"url")?e.url:e.toString?e.toString():"":""}var pe=a(7597);const me=g.GLOBAL_OBJ,he="__sentry_xhr_v3__";function be(){if(!me.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;(0,ie.hl)(e,"open",(function(e){return function(...t){const a=Date.now(),o=(0,pe.HD)(t[0])?t[0].toUpperCase():void 0,n=function(e){if((0,pe.HD)(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!o||!n)return e.apply(this,t);this[he]={method:o,url:n,request_headers:{}},"POST"===o&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[he];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}const t={args:[o,n],endTimestamp:Date.now(),startTimestamp:a,xhr:this};(0,ce.rK)("xhr",t)}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?(0,ie.hl)(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),(0,ie.hl)(this,"setRequestHeader",(function(e){return function(...t){const[a,o]=t,n=this[he];return n&&(0,pe.HD)(a)&&(0,pe.HD)(o)&&(n.request_headers[a.toLowerCase()]=o),e.apply(this,t)}})),e.apply(this,t)}})),(0,ie.hl)(e,"send",(function(e){return function(...t){const a=this[he];if(!a)return e.apply(this,t);void 0!==t[0]&&(a.body=t[0]);const o={args:[a.method,a.url],startTimestamp:Date.now(),xhr:this};return(0,ce.rK)("xhr",o),e.apply(this,t)}}))}var fe=a(7321),Ie=a(9181);const _e=["localhost",/^\/(?!\/)/],ye={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:_e,tracePropagationTargets:_e};function ve(e){const{traceFetch:t,traceXHR:a,tracePropagationTargets:o,tracingOrigins:n,shouldCreateSpanForRequest:i,enableHTTPTimings:s}={traceFetch:ye.traceFetch,traceXHR:ye.traceXHR,...e},l="function"==typeof i?i:e=>!0,d=e=>function(e,t){return(0,fe.U0)(e,t||_e)}(e,o||n),u={};var g;t&&function(e){const t="fetch";(0,ce.Hj)(t,(e=>{const t=function(e,t,a,o,n="auto.http.browser"){if(!(0,ee.z)()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const a=o[t];if(a){if(e.response){a.setHttpStatus(e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length");if(t){const e=parseInt(t);e>0&&a.setAttribute("http.response_content_length",e)}}else e.error&&a.setStatus("internal_error");a.end(),delete o[t]}return}const s=(0,te.nZ)(),l=(0,te.s3)(),{method:d,url:u}=e.fetchData,g=i?(0,ae.qp)({attributes:{url:u,type:"fetch","http.method":d},name:`${d} ${u}`,op:"http.client",origin:n}):void 0;if(g&&(e.fetchData.__span=g.spanContext().spanId,o[g.spanContext().spanId]=g),a(e.fetchData.url)&&l){const t=e.args[0];e.args[1]=e.args[1]||{};const a=e.args[1];a.headers=function(e,t,a,o,n){const i=n||a.getSpan(),s=i&&(0,oe.G)(i),{traceId:l,sampled:d,dsc:u}=a.getPropagationContext(),g=i?(0,r.Hb)(i):(0,c.$p)(l,void 0,d),p=s?(0,ne.j)(s):u||(0,ne._)(l,t,a),m=(0,Ie.IQ)(p),h=o.headers||("undefined"!=typeof Request&&(0,pe.V9)(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&(0,pe.V9)(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",g),m&&e.append(Ie.bU,m),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",g]];return m&&e.push([Ie.bU,m]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),m&&t.push(m),{...h,"sentry-trace":g,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":g,baggage:m}}(t,l,s,a,g)}return g}(e,l,d,u);s&&t&&Ce(t)})),(0,ce.D2)(t,de)}(),a&&(g=e=>{const t=function(e,t,a,o){const n=e.xhr,i=n&&n[he];if(!(0,ee.z)()||!n||n.__sentry_own_request__||!i)return;const s=t(i.url);if(e.endTimestamp&&s){const e=n.__sentry_xhr_span_id__;if(!e)return;const t=o[e];return void(t&&void 0!==i.status_code&&(t.setHttpStatus(i.status_code),t.end(),delete o[e]))}const l=(0,te.nZ)(),d=s?(0,ae.qp)({attributes:{type:"xhr","http.method":i.method,url:i.url},name:`${i.method} ${i.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(d&&(n.__sentry_xhr_span_id__=d.spanContext().spanId,o[n.__sentry_xhr_span_id__]=d),n.setRequestHeader&&a(i.url))if(d){const e=d&&(0,oe.G)(d),t=e&&(0,ne.j)(e),a=(0,Ie.IQ)(t);we(n,(0,r.Hb)(d),a)}else{const e=(0,te.s3)(),{traceId:t,sampled:a,dsc:o}=l.getPropagationContext(),i=(0,c.$p)(t,void 0,a),r=o||(e?(0,ne._)(t,e,l):void 0);we(n,i,(0,Ie.IQ)(r))}return d}(e,l,d,u);s&&t&&Ce(t)},(0,ce.Hj)("xhr",g),(0,ce.D2)("xhr",be))}function Ce(e){const{url:t}=(0,r.XU)(e).data||{};if(!t||"string"!=typeof t)return;const a=H("resource",(({entries:o})=>{o.forEach((o=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(o)&&o.name.endsWith(t)&&(function(e){const{name:t,version:a}=function(e){let t="unknown",a="unknown",o="";for(const n of e){if("/"===n){[t,a]=e.split("/");break}if(!isNaN(Number(n))){t="h"===o?"http":o,a=e.split(o)[1];break}o+=n}return o===e&&(t=o),{name:t,version:a}}(e.nextHopProtocol),o=[];return o.push(["network.protocol.version",a],["network.protocol.name",t]),h.Z1?[...o,["http.request.redirect_start",Ae(e.redirectStart)],["http.request.fetch_start",Ae(e.fetchStart)],["http.request.domain_lookup_start",Ae(e.domainLookupStart)],["http.request.domain_lookup_end",Ae(e.domainLookupEnd)],["http.request.connect_start",Ae(e.connectStart)],["http.request.secure_connection_start",Ae(e.secureConnectionStart)],["http.request.connection_end",Ae(e.connectEnd)],["http.request.request_start",Ae(e.requestStart)],["http.request.response_start",Ae(e.responseStart)],["http.request.response_end",Ae(e.responseEnd)]]:o}(o).forEach((t=>e.setAttribute(...t))),setTimeout(a))}))}))}function Ae(e=0){return((h.Z1||performance.timeOrigin)+e)/1e3}function we(e,t,a){try{e.setRequestHeader("sentry-trace",t),a&&e.setRequestHeader(Ie.bU,a)}catch(e){}}const Se=(0,g.R)(),Ge=g.GLOBAL_OBJ;let Ze;function Be(){if(!function(){const e=Se.chrome,t=e&&e.app&&e.app.runtime,a="history"in Se&&!!Se.history.pushState&&!!Se.history.replaceState;return!t&&a}())return;const e=Ge.onpopstate;function t(e){return function(...t){const a=t.length>2?t[2]:void 0;if(a){const e=Ze,t=String(a);Ze=t;const o={from:e,to:t};(0,ce.rK)("history",o)}return e.apply(this,t)}}Ge.onpopstate=function(...t){const a=Ge.location.href,o=Ze;Ze=a;const n={from:o,to:a};if((0,ce.rK)("history",n),e)try{return e.apply(this,t)}catch(e){}},(0,ie.hl)(Ge.history,"pushState",t),(0,ie.hl)(Ge.history,"replaceState",t)}const We="BrowserTracing",ke={...o.AT,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,a=!0){if(!p||!p.location)return void(u.X&&l.kg.warn("Could not initialize routing instrumentation due to invalid location"));let o,n=p.location.href;t&&(o=e({name:p.location.pathname,startTimestamp:h.Z1?h.Z1/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),a&&function(t){const a="history";(0,ce.Hj)(a,(({to:t,from:a})=>{void 0===a&&n&&-1!==n.indexOf(t)?n=void 0:a!==t&&(n=void 0,o&&(u.X&&l.kg.log(`[Tracing] Finishing current transaction with op: ${o.op}`),o.end()),o=e({name:p.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})),(0,ce.D2)(a,Be)}()},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...ye};function Ve(e){const t=(0,d.qT)(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}var Re,xe=a(758),Ne=a(8903),He=a(8069);!function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(Re||(Re={}));var Ee=a(2716),Te=a(8737),Xe=a(1791),Ye=a(6169),Fe=a(24),Pe=a(1370),Oe=a(9889);const ze=class{constructor(e){this.name=We,this._hasSetTracePropagationTargets=!1,(0,n.T)(),u.X&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...ke,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=function(){const e=L();if(e&&h.Z1){e.mark&&p.performance.mark("sentry-tracing-init");const t=F("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const a=K(h.Z1),o=K(t.startTime);u.X&&l.kg.log("[Measurements] Adding FID"),Q.fid={value:e.value,unit:"millisecond"},Q["mark.fid"]={value:a+o,unit:"second"}}),X,x),a=function(e,t=!1){return F("cls",e,T,R,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(u.X&&l.kg.log("[Measurements] Adding CLS"),Q.cls={value:e.value,unit:""},M=t)}),!0),o=function(e,t=!1){return F("lcp",e,Y,N,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(u.X&&l.kg.log("[Measurements] Adding LCP"),Q.lcp={value:e.value,unit:"millisecond"},D=t)}),!0);return()=>{t(),a(),o()}}return()=>{}}(),this.options.enableLongTask&&H("longtask",(({entries:e})=>{for(const t of e){const e=(0,s.x1)();if(!e)return;const a=K(h.Z1+t.startTime),o=K(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:a,endTimestamp:a+o})}})),this.options._experiments.enableInteractions&&H("event",(({entries:e})=>{for(const t of e){const e=(0,s.x1)();if(!e)return;if("click"===t.name){const a=K(h.Z1+t.startTime),o=K(t.duration),n={description:(0,d.Rt)(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:a,endTimestamp:a+o},i=(0,d.iY)(t.target);i&&(n.attributes={"ui.component_name":i}),e.startChild(n)}}}))}setupOnce(e,t){this._getCurrentHub=t;const a=t().getClient(),o=a&&a.getOptions(),{routingInstrumentation:n,startTransactionOnLocationChange:i,startTransactionOnPageLoad:c,markBackgroundTransactions:d,traceFetch:g,traceXHR:m,shouldCreateSpanForRequest:h,enableHTTPTimings:b,_experiments:f}=this.options,I=o&&o.tracePropagationTargets,_=I||this.options.tracePropagationTargets;u.X&&this._hasSetTracePropagationTargets&&I&&l.kg.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),n((e=>{const a=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(a,e,t),a}),c,i),d&&(p&&p.document?p.document.addEventListener("visibilitychange",(()=>{const e=(0,s.x1)();if(p.document.hidden&&e){const t="cancelled",{op:a,status:o}=(0,r.XU)(e);u.X&&l.kg.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${a}`),o||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):u.X&&l.kg.warn("[Tracing] Could not set up background tab detection due to lack of global document")),f.enableInteractions&&this._registerInteractionListener(),ve({traceFetch:g,traceXHR:m,tracePropagationTargets:_,shouldCreateSpanForRequest:h,enableHTTPTimings:b})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(u.X&&l.kg.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:a,idleTimeout:o,finalTimeout:s,heartbeatInterval:g}=this.options,f="pageload"===e.op,I=f?Ve("sentry-trace"):"",_=f?Ve("baggage"):"",{traceparentData:y,dynamicSamplingContext:v,propagationContext:C}=(0,c.KA)(I,_),A={...e,...y,metadata:{...e.metadata,dynamicSamplingContext:y&&!v?{}:v},trimEnd:!0},w="function"==typeof a?a(A):A,S=void 0===w?{...A,sampled:!1}:w;S.metadata=S.name!==A.name?{...S.metadata,source:"custom"}:S.metadata,this._latestRouteName=S.name;const Z=e.data&&e.data[i.Zj],B=S.metadata&&S.metadata.source;this._latestRouteSource=Z||B,!1===S.sampled&&u.X&&l.kg.log(`[Tracing] Will not send ${S.op} transaction because of beforeNavigate.`),u.X&&l.kg.log(`[Tracing] Starting ${S.op} transaction on scope`);const{location:W}=p,k=(0,n.l)(t,S,o,s,!0,{location:W},g,f);f&&(p.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(p.document.readyState)&&k.sendAutoFinishSignal()})),["interactive","complete"].includes(p.document.readyState)&&k.sendAutoFinishSignal());const V=t.getScope();return f&&y?V.setPropagationContext(C):V.setPropagationContext({traceId:k.spanContext().traceId,spanId:k.spanContext().spanId,parentSpanId:(0,r.XU)(k).parent_span_id,sampled:(0,r.Tt)(k)}),k.registerBeforeFinishCallback((e=>{this._collectWebVitals(),function(e){const t=L();if(!t||!p.performance.getEntries||!h.Z1)return;u.X&&l.kg.log("[Tracing] Adding & adjusting spans using Performance API");const a=K(h.Z1),o=t.getEntries();let n,i;const{op:s,start_timestamp:c}=(0,r.XU)(e);if(o.slice(j).forEach((t=>{const o=K(t.startTime),r=K(t.duration);if(!("navigation"===e.op&&c&&a+o<c))switch(t.entryType){case"navigation":!function(e,t,a){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((o=>{$(e,t,o,a)})),$(e,t,"secureConnection",a,"TLS/SSL","connectEnd"),$(e,t,"fetch",a,"cache","domainLookupStart"),$(e,t,"domainLookup",a,"DNS"),function(e,t,a){t.responseEnd&&(U(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:a+K(t.requestStart),endTimestamp:a+K(t.responseEnd)}),U(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:a+K(t.responseStart),endTimestamp:a+K(t.responseEnd)}))}(e,t,a)}(e,t,a),n=a+K(t.responseStart),i=a+K(t.requestStart);break;case"mark":case"paint":case"measure":{!function(e,t,a,o,n){const i=n+a,r=i+o;U(e,{description:t.name,endTimestamp:r,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,o,r,a);const n=G(),i=t.startTime<n.firstHiddenTime;"first-paint"===t.name&&i&&(u.X&&l.kg.log("[Measurements] Adding FP"),Q.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(u.X&&l.kg.log("[Measurements] Adding FCP"),Q.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,a,o,n,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const r=(0,b.en)(a),s={};q(s,t,"transferSize","http.response_transfer_size"),q(s,t,"encodedBodySize","http.response_content_length"),q(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus),r.protocol&&(s["url.scheme"]=r.protocol.split(":").pop()),r.host&&(s["server.address"]=r.host),s["url.same_origin"]=a.includes(p.location.origin);const l=i+o,c=l+n;U(e,{description:a.replace(p.location.origin,""),endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:l,data:s})}(e,t,t.name,o,r,a)}})),j=Math.max(o.length-1,0),function(e){const t=p.navigator;if(!t)return;const a=t.connection;a&&(a.effectiveType&&e.setTag("effectiveConnectionType",a.effectiveType),a.type&&e.setTag("connectionType",a.type),z(a.rtt)&&(Q["connection.rtt"]={value:a.rtt,unit:"millisecond"})),z(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),z(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===s){!function(e,t,a,o){"number"==typeof t&&o&&(u.X&&l.kg.log("[Measurements] Adding TTFB"),e.ttfb={value:1e3*Math.max(t-o,0),unit:"millisecond"},"number"==typeof a&&a<=t&&(e["ttfb.requestTime"]={value:1e3*(t-a),unit:"millisecond"}))}(Q,n,i,c),["fcp","fp","lcp"].forEach((e=>{if(!Q[e]||!c||a>=c)return;const t=Q[e].value,o=a+K(t),n=Math.abs(1e3*(o-c)),i=n-t;u.X&&l.kg.log(`[Measurements] Normalized ${e} from ${t} to ${n} (${i})`),Q[e].value=n}));const t=Q["mark.fid"];t&&Q.fid&&(U(e,{description:"first input delay",endTimestamp:t.value+K(Q.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Q["mark.fid"]),"fcp"in Q||delete Q.cls,Object.keys(Q).forEach((e=>{(0,m.o)(e,Q[e].value,Q[e].unit)})),function(e){D&&(u.X&&l.kg.log("[Measurements] Adding LCP Data"),D.element&&e.setTag("lcp.element",(0,d.Rt)(D.element)),D.id&&e.setTag("lcp.id",D.id),D.url&&e.setTag("lcp.url",D.url.trim().slice(0,200)),e.setTag("lcp.size",D.size)),M&&M.sources&&(u.X&&l.kg.log("[Measurements] Adding CLS Data"),M.sources.forEach(((t,a)=>e.setTag(`cls.source.${a+1}`,(0,d.Rt)(t.node)))))}(e)}D=void 0,M=void 0,Q={}}(e)})),k}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:a,heartbeatInterval:o}=this.options,r="ui.action.click",c=(0,s.x1)();if(c&&c.op&&["navigation","pageload"].includes(c.op))return void(u.X&&l.kg.warn(`[Tracing] Did not create ${r} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(u.X&&l.kg.warn(`[Tracing] Did not create ${r} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(u.X&&l.kg.warn(`[Tracing] Did not create ${r} transaction because _latestRouteName is missing.`));const d=this._getCurrentHub(),{location:g}=p,m={name:this._latestRouteName,op:r,trimEnd:!0,data:{[i.Zj]:this._latestRouteSource||"url"}};e=(0,n.l)(d,m,t,a,!0,{location:g},o)};["click"].forEach((e=>{addEventListener(e,t,{once:!1,capture:!0})}))}},Ue=xe.r,Je=s.x1,Ke=s.qG,Le=Ne.Zd,De=He.Y,Me=Ne.Dr,je=We,Qe=ye,$e=ee.z,qe=b.rt,et=c.Ke,tt=o.io,at=ve,ot=n.l,nt=Re,it={BrowserTracing:ze,Apollo:Ee._,Express:Te.N1,GraphQL:Xe.k,Mongo:Ye._,Mysql:Fe.m,Postgres:Pe.E,Prisma:Oe.g};("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,xe.r)()},9181:(e,t,a)=>{"use strict";a.d(t,{EN:()=>d,IQ:()=>u,bU:()=>r});var o=a(3897),n=a(7597),i=a(2343);const r="baggage",s="sentry-",l=/^sentry-/,c=8192;function d(e){if(!(0,n.HD)(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const a=g(t);for(const t of Object.keys(a))e[t]=a[t];return e}),{});else{if(!e)return;t=g(e)}const a=Object.entries(t).reduce(((e,[t,a])=>(t.match(l)&&(e[t.slice(s.length)]=a),e)),{});return Object.keys(a).length>0?a:void 0}function u(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce(((e,[t,a],n)=>{const r=`${encodeURIComponent(t)}=${encodeURIComponent(a)}`,s=0===n?r:`${e},${r}`;return s.length>c?(o.X&&i.kg.warn(`Not adding key: ${t} with val: ${a} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,a])=>(a&&(e[`${s}${t}`]=a),e)),{}))}function g(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,a])=>(e[t]=a,e)),{})}},8464:(e,t,a)=>{"use strict";a.d(t,{Rt:()=>r,iY:()=>c,qT:()=>l});var o=a(7597);const n=(0,a(1235).R)(),i=80;function r(e,t={}){if(!e)return"<unknown>";try{let a=e;const o=5,n=[];let r=0,l=0;const c=" > ",d=c.length;let u;const g=Array.isArray(t)?t:t.keyAttrs,p=!Array.isArray(t)&&t.maxStringLength||i;for(;a&&r++<o&&(u=s(a,g),!("html"===u||r>1&&l+n.length*d+u.length>=p));)n.push(u),l+=u.length,a=a.parentNode;return n.reverse().join(c)}catch(e){return"<unknown>"}}function s(e,t){const a=e,i=[];let r,s,l,c,d;if(!a||!a.tagName)return"";if(n.HTMLElement&&a instanceof HTMLElement&&a.dataset&&a.dataset.sentryComponent)return a.dataset.sentryComponent;i.push(a.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>a.getAttribute(e))).map((e=>[e,a.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{i.push(`[${e[0]}="${e[1]}"]`)}));else if(a.id&&i.push(`#${a.id}`),r=a.className,r&&(0,o.HD)(r))for(s=r.split(/\s+/),d=0;d<s.length;d++)i.push(`.${s[d]}`);const g=["aria-label","type","name","title","alt"];for(d=0;d<g.length;d++)l=g[d],c=a.getAttribute(l),c&&i.push(`[${l}="${c}"]`);return i.join("")}function l(e){return n.document&&n.document.querySelector?n.document.querySelector(e):null}function c(e){if(!n.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}},4307:(e,t,a)=>{"use strict";function o(e){let t,a=e[0],o=1;for(;o<e.length;){const n=e[o],i=e[o+1];if(o+=2,("optionalAccess"===n||"optionalCall"===n)&&null==a)return;"access"===n||"optionalAccess"===n?(t=a,a=i(a)):"call"!==n&&"optionalCall"!==n||(a=i(((...e)=>a.call(t,...e))),t=void 0)}return a}a.d(t,{x:()=>o})},3897:(e,t,a)=>{"use strict";a.d(t,{X:()=>o});const o="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},9729:(e,t,a)=>{"use strict";a.d(t,{D2:()=>c,Hj:()=>l,rK:()=>d});var o=a(3897),n=a(2343),i=a(6147);const r={},s={};function l(e,t){r[e]=r[e]||[],r[e].push(t)}function c(e,t){s[e]||(t(),s[e]=!0)}function d(e,t){const a=e&&r[e];if(a)for(const r of a)try{r(t)}catch(t){o.X&&n.kg.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,i.$P)(r)}\nError:`,t)}}},7597:(e,t,a)=>{"use strict";a.d(t,{Cy:()=>m,HD:()=>r,J8:()=>p,Kj:()=>g,Le:()=>s,PO:()=>c,V9:()=>b,VZ:()=>n,cO:()=>d,i2:()=>h,kK:()=>u,pt:()=>l,y1:()=>f});const o=Object.prototype.toString;function n(e){switch(o.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return b(e,Error)}}function i(e,t){return o.call(e)===`[object ${t}]`}function r(e){return i(e,"String")}function s(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function l(e){return null===e||s(e)||"object"!=typeof e&&"function"!=typeof e}function c(e){return i(e,"Object")}function d(e){return"undefined"!=typeof Event&&b(e,Event)}function u(e){return"undefined"!=typeof Element&&b(e,Element)}function g(e){return i(e,"RegExp")}function p(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function m(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function h(e){return"number"==typeof e&&e!=e}function b(e,t){try{return e instanceof t}catch(e){return!1}}function f(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}},2343:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>s,LD:()=>r,RU:()=>i,kg:()=>l});var o=a(3897),n=a(1235);const i=["debug","info","warn","error","log","assert","trace"],r={};function s(e){if(!("console"in n.GLOBAL_OBJ))return e();const t=n.GLOBAL_OBJ.console,a={},o=Object.keys(r);o.forEach((e=>{const o=r[e];a[e]=t[e],t[e]=o}));try{return e()}finally{o.forEach((e=>{t[e]=a[e]}))}}const l=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return o.X?i.forEach((a=>{t[a]=(...t)=>{e&&s((()=>{n.GLOBAL_OBJ.console[a](`Sentry Logger [${a}]:`,...t)}))}})):i.forEach((e=>{t[e]=()=>{}})),t}()},3641:(e,t,a)=>{"use strict";a.d(t,{f:()=>o});class o{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){const t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(e,t)}remove(e){const t=this._cache.get(e);return t&&this._cache.delete(e),t}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const e=[];return this._cache.forEach((t=>e.push(t))),e}}},2844:(e,t,a)=>{"use strict";a.d(t,{DM:()=>r,Db:()=>c,EG:()=>d,J4:()=>g,YO:()=>m,go:()=>p,jH:()=>l,lE:()=>h});var o=a(535),n=a(7321),i=a(1235);function r(){const e=i.GLOBAL_OBJ,t=e.crypto||e.msCrypto;let a=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(a=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&a())>>e/4).toString(16)))}function s(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function l(e){const{message:t,event_id:a}=e;if(t)return t;const o=s(e);return o?o.type&&o.value?`${o.type}: ${o.value}`:o.type||o.value||a||"<unknown>":a||"<unknown>"}function c(e,t,a){const o=e.exception=e.exception||{},n=o.values=o.values||[],i=n[0]=n[0]||{};i.value||(i.value=t||""),i.type||(i.type=a||"Error")}function d(e,t){const a=s(e);if(!a)return;const o=a.mechanism;if(a.mechanism={type:"generic",handled:!0,...o,...t},t&&"data"in t){const e={...o&&o.data,...t.data};a.mechanism.data=e}}const u=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function g(e){const t=e.match(u)||[],a=parseInt(t[1],10),o=parseInt(t[2],10),n=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(a)?void 0:a,minor:isNaN(o)?void 0:o,patch:isNaN(n)?void 0:n,prerelease:t[4]}}function p(e,t,a=5){if(void 0===t.lineno)return;const o=e.length,i=Math.max(Math.min(o-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-a),i).map((e=>(0,n.JM)(e,0))),t.context_line=(0,n.JM)(e[Math.min(o-1,i)],t.colno||0),t.post_context=e.slice(Math.min(i+1,o),i+1+a).map((e=>(0,n.JM)(e,0)))}function m(e){if(e&&e.__sentry_captured__)return!0;try{(0,o.xp)(e,"__sentry_captured__",!0)}catch(e){}return!1}function h(e){return Array.isArray(e)?e:[e]}},2176:(e,t,a)=>{"use strict";function o(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function n(e,t){return e.require(t)}function i(t){let a;try{a=n(e,t)}catch(e){}try{const{cwd:o}=n(e,"process");a=n(e,`${o()}/node_modules/${t}`)}catch(e){}return a}a.d(t,{l$:()=>n,KV:()=>o,$y:()=>i}),e=a.hmd(e)},8007:(e,t,a)=>{"use strict";a.d(t,{Fv:()=>r,Qy:()=>s});var o=a(7597),n=a(535),i=a(6147);function r(e,t=100,a=1/0){try{return l("",e,t,a)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function s(e,t=3,a=102400){const o=r(e,t);return n=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(n))>a?s(e,t-1,a):o;var n}function l(e,t,a=1/0,r=1/0,s=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(a){if(e)return!!t.has(a)||(t.add(a),!1);for(let e=0;e<t.length;e++)if(t[e]===a)return!0;return t.push(a),!1},function(a){if(e)t.delete(a);else for(let e=0;e<t.length;e++)if(t[e]===a){t.splice(e,1);break}}]}()){const[c,d]=s;if(null==t||["number","boolean","string"].includes(typeof t)&&!(0,o.i2)(t))return t;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if((0,o.y1)(t))return"[VueViewModel]";if((0,o.Cy)(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${(0,i.$P)(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const a=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(a)?`[HTMLElement: ${a}]`:`[object ${a}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const g="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:a;if(0===g)return u.replace("object ","");if(c(t))return"[Circular ~]";const p=t;if(p&&"function"==typeof p.toJSON)try{return l("",p.toJSON(),g-1,r,s)}catch(e){}const m=Array.isArray(t)?[]:{};let h=0;const b=(0,n.Sh)(t);for(const e in b){if(!Object.prototype.hasOwnProperty.call(b,e))continue;if(h>=r){m[e]="[MaxProperties ~]";break}const t=b[e];m[e]=l(e,t,g-1,r,s),h++}return d(t),m}},535:(e,t,a)=>{"use strict";a.d(t,{HK:()=>d,Jr:()=>b,Sh:()=>g,_j:()=>u,hl:()=>l,xp:()=>c,zf:()=>h});var o=a(8464),n=a(3897),i=a(7597),r=a(2343),s=a(7321);function l(e,t,a){if(!(t in e))return;const o=e[t],n=a(o);"function"==typeof n&&function(e,t){try{const a=t.prototype||{};e.prototype=t.prototype=a,c(e,"__sentry_original__",t)}catch(e){}}(n,o),e[t]=n}function c(e,t,a){try{Object.defineProperty(e,t,{value:a,writable:!0,configurable:!0})}catch(a){n.X&&r.kg.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function d(e){return e.__sentry_original__}function u(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}function g(e){if((0,i.VZ)(e))return{message:e.message,name:e.name,stack:e.stack,...m(e)};if((0,i.cO)(e)){const t={type:e.type,target:p(e.target),currentTarget:p(e.currentTarget),...m(e)};return"undefined"!=typeof CustomEvent&&(0,i.V9)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function p(e){try{return(0,i.kK)(e)?(0,o.Rt)(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function m(e){if("object"==typeof e&&null!==e){const t={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}return{}}function h(e,t=40){const a=Object.keys(g(e));if(a.sort(),!a.length)return"[object has no keys]";if(a[0].length>=t)return(0,s.$G)(a[0],t);for(let e=a.length;e>0;e--){const o=a.slice(0,e).join(", ");if(!(o.length>t))return e===a.length?o:(0,s.$G)(o,t)}return""}function b(e){return f(e,new Map)}function f(e,t){if(function(e){if(!(0,i.PO)(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const a=t.get(e);if(void 0!==a)return a;const o={};t.set(e,o);for(const a of Object.keys(e))void 0!==e[a]&&(o[a]=f(e[a],t));return o}if(Array.isArray(e)){const a=t.get(e);if(void 0!==a)return a;const o=[];return t.set(e,o),e.forEach((e=>{o.push(f(e,t))})),o}return e}},771:(e,t,a)=>{"use strict";a.d(t,{rC:()=>l,S6:()=>g,dB:()=>c,oA:()=>d,XQ:()=>u});var o=a(7597),n=a(8007),i=a(6956);const r={ip:!1,request:!0,transaction:!0,user:!0},s=["cookies","data","headers","method","query_string","url"],l=["id","username","email"];function c(e,t,a){if(e){if(!e.metadata.source||"url"===e.metadata.source){const[a,o]=d(t,{path:!0,method:!0});e.updateName(a),e.setMetadata({source:o})}e.setAttribute("url",t.originalUrl||t.url),t.baseUrl&&e.setAttribute("baseUrl",t.baseUrl),e.setData("query",p(t,a))}}function d(e,t={}){const a=e.method&&e.method.toUpperCase();let o="",n="url";t.customRoute||e.route?(o=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,n="route"):(e.originalUrl||e.url)&&(o=(0,i.rt)(e.originalUrl||e.url||""));let r="";return t.method&&a&&(r+=a),t.method&&t.path&&(r+=" "),t.path&&o&&(r+=o),[r,n]}function u(e,t){const{include:a=s,deps:i}=t||{},r={},l=e.headers||{},c=e.method,d=l.host||e.hostname||e.host||"<no host>",u="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",g=e.originalUrl||e.url||"",m=g.startsWith(u)?g:`${u}://${d}${g}`;return a.forEach((t=>{switch(t){case"headers":r.headers=l,a.includes("cookies")||delete r.headers.cookie;break;case"method":r.method=c;break;case"url":r.url=m;break;case"cookies":r.cookies=e.cookies||l.cookie&&function(e){const t={};let a=0;for(;a<e.length;){const o=e.indexOf("=",a);if(-1===o)break;let n=e.indexOf(";",a);if(-1===n)n=e.length;else if(n<o){a=e.lastIndexOf(";",o-1)+1;continue}const i=e.slice(a,o).trim();if(void 0===t[i]){let a=e.slice(o+1,n).trim();34===a.charCodeAt(0)&&(a=a.slice(1,-1));try{t[i]=-1!==a.indexOf("%")?decodeURIComponent(a):a}catch(e){t[i]=a}}a=n+1}return t}(l.cookie)||{};break;case"query_string":r.query_string=p(e,i);break;case"data":if("GET"===c||"HEAD"===c)break;void 0!==e.body&&(r.data=(0,o.HD)(e.body)?e.body:JSON.stringify((0,n.Fv)(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}})),r}function g(e,t,a){const n={...r,...a&&a.include};if(n.request){const o=Array.isArray(n.request)?u(t,{include:n.request,deps:a&&a.deps}):u(t,{deps:a&&a.deps});e.request={...e.request,...o}}if(n.user){const a=t.user&&(0,o.PO)(t.user)?function(e,t){const a={};return(Array.isArray(t)?t:l).forEach((t=>{e&&t in e&&(a[t]=e[t])})),a}(t.user,n.user):{};Object.keys(a).length&&(e.user={...e.user,...a})}if(n.ip){const a=t.ip||t.socket&&t.socket.remoteAddress;a&&(e.user={...e.user,ip_address:a})}return n.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return d(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return d(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,n.transaction)),e}function p(e,t){let a=e.originalUrl||e.url||"";if(a){a.startsWith("/")&&(a=`http://dogs.are.great${a}`);try{return e.query||"undefined"!=typeof URL&&new URL(a).search.slice(1)||t&&t.url&&t.url.parse(a).query||void 0}catch(e){return}}}},6147:(e,t,a)=>{"use strict";function o(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//)||void 0===e||e.includes("node_modules/"))}function n(e){const t=/^\s*[-]{4,}$/,a=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return n=>{const i=n.match(a);if(i){let t,a,n,r,s;if(i[1]){n=i[1];let e=n.lastIndexOf(".");if("."===n[e-1]&&e--,e>0){t=n.slice(0,e),a=n.slice(e+1);const o=t.indexOf(".Module");o>0&&(n=n.slice(o+1),t=t.slice(0,o))}r=void 0}a&&(r=t,s=a),"<anonymous>"===a&&(s=void 0,n=void 0),void 0===n&&(s=s||"<anonymous>",n=r?`${r}.${s}`:s);let l=i[2]&&i[2].startsWith("file://")?i[2].slice(7):i[2];const c="native"===i[5];return l&&l.match(/\/[A-Z]:/)&&(l=l.slice(1)),l||!i[5]||c||(l=i[5]),{filename:l,module:e?e(l):void 0,function:n,lineno:parseInt(i[3],10)||void 0,colno:parseInt(i[4],10)||void 0,in_app:o(l,c)}}if(n.match(t))return{filename:n}}}a.d(t,{pE:()=>l,$P:()=>u,Ep:()=>g,Sq:()=>c});const i=50,r=/\(error: (.*)\)/,s=/captureMessage|captureException/;function l(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,a=0)=>{const o=[],n=e.split("\n");for(let e=a;e<n.length;e++){const a=n[e];if(a.length>1024)continue;const s=r.test(a)?a.replace(r,"$1"):a;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){o.push(t);break}}if(o.length>=i)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),s.test(t[t.length-1].function||"")&&(t.pop(),s.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,i).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(o)}}function c(e){return Array.isArray(e)?l(...e):e}const d="<anonymous>";function u(e){try{return e&&"function"==typeof e&&e.name||d}catch(e){return d}}function g(e){return[90,n(e)]}},7321:(e,t,a)=>{"use strict";a.d(t,{$G:()=>n,JM:()=>i,U0:()=>r});var o=a(7597);function n(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function i(e,t){let a=e;const o=a.length;if(o<=150)return a;t>o&&(t=o);let n=Math.max(t-60,0);n<5&&(n=0);let i=Math.min(n+140,o);return i>o-5&&(i=o),i===o&&(n=Math.max(i-140,0)),a=a.slice(n,i),n>0&&(a=`'{snip} ${a}`),i<o&&(a+=" {snip}"),a}function r(e,t=[],a=!1){return t.some((t=>function(e,t,a=!1){return!!(0,o.HD)(e)&&((0,o.Kj)(t)?t.test(e):!!(0,o.HD)(t)&&(a?e===t:e.includes(t)))}(e,t,a)))}},6893:(e,t,a)=>{"use strict";a.d(t,{$2:()=>r,WD:()=>i,cW:()=>s});var o,n=a(7597);function i(e){return new s((t=>{t(e)}))}function r(e){return new s(((t,a)=>{a(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(o||(o={}));class s{constructor(e){s.prototype.__init.call(this),s.prototype.__init2.call(this),s.prototype.__init3.call(this),s.prototype.__init4.call(this),this._state=o.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new s(((a,o)=>{this._handlers.push([!1,t=>{if(e)try{a(e(t))}catch(e){o(e)}else a(t)},e=>{if(t)try{a(t(e))}catch(e){o(e)}else o(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new s(((t,a)=>{let o,n;return this.then((t=>{n=!1,o=t,e&&e()}),(t=>{n=!0,o=t,e&&e()})).then((()=>{n?a(o):t(o)}))}))}__init(){this._resolve=e=>{this._setResult(o.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(o.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===o.PENDING&&((0,n.J8)(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===o.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===o.RESOLVED&&e[1](this._value),this._state===o.REJECTED&&e[2](this._value),e[0]=!0)}))}}}},1170:(e,t,a)=>{"use strict";a.d(t,{Z1:()=>l,ph:()=>r,yW:()=>i});var o=a(1235);const n=1e3;function i(){return Date.now()/n}const r=function(){const{performance:e}=o.GLOBAL_OBJ;if(!e||!e.now)return i;const t=Date.now()-e.now(),a=null==e.timeOrigin?t:e.timeOrigin;return()=>(a+e.now())/n}();let s;const l=(()=>{const{performance:e}=o.GLOBAL_OBJ;if(!e||!e.now)return void(s="none");const t=36e5,a=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+a-n):t,r=i<t,l=e.timing&&e.timing.navigationStart,c="number"==typeof l?Math.abs(l+a-n):t;return r||c<t?i<=c?(s="timeOrigin",e.timeOrigin):(s="navigationStart",l):(s="dateNow",n)})()},7638:(e,t,a)=>{"use strict";a.d(t,{$p:()=>l,KA:()=>s,Ke:()=>i,qG:()=>r});var o=a(9181),n=a(2844);const i=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function r(e){if(!e)return;const t=e.match(i);if(!t)return;let a;return"1"===t[3]?a=!0:"0"===t[3]&&(a=!1),{traceId:t[1],parentSampled:a,parentSpanId:t[2]}}function s(e,t){const a=r(e),i=(0,o.EN)(t),{traceId:s,parentSpanId:l,parentSampled:c}=a||{},d={traceId:s||(0,n.DM)(),spanId:(0,n.DM)().substring(16),sampled:c};return l&&(d.parentSpanId=l),i&&(d.dsc=i),{traceparentData:a,dynamicSamplingContext:i,propagationContext:d}}function l(e=(0,n.DM)(),t=(0,n.DM)().substring(16),a){let o="";return void 0!==a&&(o=a?"-1":"-0"),`${e}-${t}${o}`}},6956:(e,t,a)=>{"use strict";function o(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const a=t[6]||"",o=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:a,hash:o,relative:t[5]+a+o}}function n(e){return e.split(/[\?#]/,1)[0]}function i(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}function r(e){const{protocol:t,host:a,path:o}=e;return`${t?`${t}://`:""}${a&&a.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||""}${o}`}a.d(t,{$A:()=>i,en:()=>o,rt:()=>n,tF:()=>r})},1235:(e,t,a)=>{"use strict";function o(e){return e&&e.Math==Math?e:void 0}a.d(t,{GLOBAL_OBJ:()=>n,R:()=>i,Y:()=>r});const n="object"==typeof globalThis&&o(globalThis)||"object"==typeof window&&o(window)||"object"==typeof self&&o(self)||"object"==typeof global&&o(global)||function(){return this}()||{};function i(){return n}function r(e,t,a){const o=a||n,i=o.__SENTRY__=o.__SENTRY__||{};return i[e]||(i[e]=t())}},6872:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var a={grad:.9,turn:360,rad:360/(2*Math.PI)},o=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},n=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=Math.pow(10,t)),Math.round(a*e)/a+0},i=function(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=1),e>a?a:e>t?e:t},r=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},s=function(e){return{r:i(e.r,0,255),g:i(e.g,0,255),b:i(e.b,0,255),a:i(e.a)}},l=function(e){return{r:n(e.r),g:n(e.g),b:n(e.b),a:n(e.a,3)}},c=/^#([0-9a-f]{3,8})$/i,d=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},u=function(e){var t=e.r,a=e.g,o=e.b,n=e.a,i=Math.max(t,a,o),r=i-Math.min(t,a,o),s=r?i===t?(a-o)/r:i===a?2+(o-t)/r:4+(t-a)/r:0;return{h:60*(s<0?s+6:s),s:i?r/i*100:0,v:i/255*100,a:n}},g=function(e){var t=e.h,a=e.s,o=e.v,n=e.a;t=t/360*6,a/=100,o/=100;var i=Math.floor(t),r=o*(1-a),s=o*(1-(t-i)*a),l=o*(1-(1-t+i)*a),c=i%6;return{r:255*[o,s,r,r,l,o][c],g:255*[l,o,o,s,r,r][c],b:255*[r,r,l,o,o,s][c],a:n}},p=function(e){return{h:r(e.h),s:i(e.s,0,100),l:i(e.l,0,100),a:i(e.a)}},m=function(e){return{h:n(e.h),s:n(e.s),l:n(e.l),a:n(e.a,3)}},h=function(e){return g((a=(t=e).s,{h:t.h,s:(a*=((o=t.l)<50?o:100-o)/100)>0?2*a/(o+a)*100:0,v:o+a,a:t.a}));var t,a,o},b=function(e){return{h:(t=u(e)).h,s:(n=(200-(a=t.s))*(o=t.v)/100)>0&&n<200?a*o/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,a,o,n},f=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,I=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v={string:[[function(e){var t=c.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?n(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?n(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=_.exec(e)||y.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:s({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=f.exec(e)||I.exec(e);if(!t)return null;var o,n,i=p({h:(o=t[1],n=t[2],void 0===n&&(n="deg"),Number(o)*(a[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return h(i)},"hsl"]],object:[[function(e){var t=e.r,a=e.g,n=e.b,i=e.a,r=void 0===i?1:i;return o(t)&&o(a)&&o(n)?s({r:Number(t),g:Number(a),b:Number(n),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,a=e.s,n=e.l,i=e.a,r=void 0===i?1:i;if(!o(t)||!o(a)||!o(n))return null;var s=p({h:Number(t),s:Number(a),l:Number(n),a:Number(r)});return h(s)},"hsl"],[function(e){var t=e.h,a=e.s,n=e.v,s=e.a,l=void 0===s?1:s;if(!o(t)||!o(a)||!o(n))return null;var c=function(e){return{h:r(e.h),s:i(e.s,0,100),v:i(e.v,0,100),a:i(e.a)}}({h:Number(t),s:Number(a),v:Number(n),a:Number(l)});return g(c)},"hsv"]]},C=function(e,t){for(var a=0;a<t.length;a++){var o=t[a][0](e);if(o)return[o,t[a][1]]}return[null,void 0]},A=function(e){return"string"==typeof e?C(e.trim(),v.string):"object"==typeof e&&null!==e?C(e,v.object):[null,void 0]},w=function(e,t){var a=b(e);return{h:a.h,s:i(a.s+100*t,0,100),l:a.l,a:a.a}},S=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},G=function(e,t){var a=b(e);return{h:a.h,s:a.s,l:i(a.l+100*t,0,100),a:a.a}},Z=function(){function e(e){this.parsed=A(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return n(S(this.rgba),2)},e.prototype.isDark=function(){return S(this.rgba)<.5},e.prototype.isLight=function(){return S(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=l(this.rgba)).r,a=e.g,o=e.b,r=(i=e.a)<1?d(n(255*i)):"","#"+d(t)+d(a)+d(o)+r;var e,t,a,o,i,r},e.prototype.toRgb=function(){return l(this.rgba)},e.prototype.toRgbString=function(){return t=(e=l(this.rgba)).r,a=e.g,o=e.b,(n=e.a)<1?"rgba("+t+", "+a+", "+o+", "+n+")":"rgb("+t+", "+a+", "+o+")";var e,t,a,o,n},e.prototype.toHsl=function(){return m(b(this.rgba))},e.prototype.toHslString=function(){return t=(e=m(b(this.rgba))).h,a=e.s,o=e.l,(n=e.a)<1?"hsla("+t+", "+a+"%, "+o+"%, "+n+")":"hsl("+t+", "+a+"%, "+o+"%)";var e,t,a,o,n},e.prototype.toHsv=function(){return e=u(this.rgba),{h:n(e.h),s:n(e.s),v:n(e.v),a:n(e.a,3)};var e},e.prototype.invert=function(){return B({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),B(w(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),B(w(this.rgba,-e))},e.prototype.grayscale=function(){return B(w(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),B(G(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),B(G(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?B({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):n(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=b(this.rgba);return"number"==typeof e?B({h:e,s:t.s,l:t.l,a:t.a}):n(t.h)},e.prototype.isEqual=function(e){return this.toHex()===B(e).toHex()},e}(),B=function(e){return e instanceof Z?e:new Z(e)},W=[];t.Colord=Z,t.colord=B,t.extend=function(e){e.forEach((function(e){W.indexOf(e)<0&&(e(Z,v),W.push(e))}))},t.getFormat=function(e){return A(e)[1]},t.random=function(){return new Z({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}},2559:e=>{!function(){"use strict";var t=[,function(e,t){function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===o(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var n=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=n,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var o,n,i=(n=2,function(e){if(Array.isArray(e))return e}(o=t)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o,n,i=[],r=!0,s=!1;try{for(a=a.call(e);!(r=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){s=!0,n=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw n}}return i}}(o,n)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,t):void 0}}(o,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],s=i[1];return e[r]=s,e}),{})},t.isArguments=function(e){return null!=e&&n(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var i={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=i,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(i.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var a=Object.create(null),o=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},n=0;n<64;n++)a[o(n)]=n;var i=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],a=0;a<e;a++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},r={encode:function(e){if("string"==typeof e){var t=e;e=i(t.length);for(var a=0;a<t.length;a++){var n=t.charCodeAt(a);if(n>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[a]=n}}for(var r=[],s=null,l=null,c=null,d=null,u=0;u<e.length;u++)switch(u%3){case 0:s=e[u]>>2&63,l=(3&e[u])<<4;break;case 1:l|=e[u]>>4&15,c=(15&e[u])<<2;break;case 2:c|=e[u]>>6&3,d=63&e[u],r.push(o(s)),r.push(o(l)),r.push(o(c)),r.push(o(d)),s=null,l=null,c=null,d=null}return null!=s&&(r.push(o(s)),r.push(o(l)),null==c?r.push("="):r.push(o(c)),null==d&&r.push("=")),r.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var o,n=i(t),r=null,s=null,l=null,c=0,d=0;d<e.length;d++){var u="="===(o=e.charAt(d))?-1:a[o];switch(d%4){case 0:if(u<0)throw new Error("invalid base64 string");r=u<<2;break;case 1:if(u<0)throw new Error("invalid base64 string");r|=u>>4,n[c++]=r,s=(15&u)<<4;break;case 2:u>=0&&(s|=u>>2,n[c++]=s,l=(3&u)<<6);break;case 3:u>=0&&(n[c++]=l|u)}}return n},newBinary:i};t.Base64=r},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function e(t,n,i,r,s){var l=n[t];switch(a(l)){case"string":return o(l);case"number":return isFinite(l)?String(l):"null";case"boolean":return String(l);case"object":if(!l)return"null";var c,d=r+i,u=[];if(Array.isArray(l)||{}.hasOwnProperty.call(l,"callee")){for(var g=l.length,p=0;p<g;p+=1)u[p]=e(p,l,i,d,s)||"null";return c=0===u.length?"[]":d?"[\n"+d+u.join(",\n"+d)+"\n"+r+"]":"["+u.join(",")+"]"}var m=Object.keys(l);return s&&(m=m.sort()),m.forEach((function(t){(c=e(t,l,i,d,s))&&u.push(o(t)+(d?": ":":")+c)})),c=0===u.length?"{}":d?"{\n"+d+u.join(",\n"+d)+"\n"+r+"}":"{"+u.join(",")+"}"}};t.default=function(e,t){var a=Object.assign({indent:"",canonical:!1},t);if(!0===a.indent)a.indent="  ";else if("number"==typeof a.indent){for(var o="",i=0;i<a.indent;i++)o+=" ";a.indent=o}return n("",{"":e},a.indent,"",a.canonical)},e.exports=t.default}],a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={exports:{}};return t[e](i,i.exports,o),i.exports}var n={};!function(){var e=n,t=o(2).Base64,a=o(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var i=o(1),r={};e.EJSON=r;var s=new Map;r.addType=function(e,t){if(s.has(e))throw new Error("Type ".concat(e," already present"));s.set(e,t)};var l=[{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$date")&&1===(0,i.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$regexp")&&(0,i.hasOwn)(e,"$flags")&&2===(0,i.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$InfNaN")&&1===(0,i.lengthOf)(e)},matchObject:i.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$binary")&&1===(0,i.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,i.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$escape")&&1===(0,i.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var a=(0,i.lengthOf)(e);1!==a&&2!==a||(t=l.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,i.keysOf)(e).forEach((function(a){t[a]=r.toJSONValue(e[a])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,i.keysOf)(e.$escape).forEach((function(a){t[a]=r.fromJSONValue(e.$escape[a])})),t}},{matchJSONValue:function(e){return(0,i.hasOwn)(e,"$type")&&(0,i.hasOwn)(e,"$value")&&2===(0,i.lengthOf)(e)},matchObject:function(e){return r._isCustomType(e)},toJSONValue:function(e){var t=a._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!s.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var o=s.get(t);return a._noYieldsAllowed((function(){return o(e.$value)}))}}];r._isCustomType=function(e){return e&&(0,i.isFunction)(e.toJSONValue)&&(0,i.isFunction)(e.typeName)&&s.has(e.typeName())},r._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?s:(0,i.convertMapToObject)(s)},r._getConverters=function(){return l};var c=function(e){for(var t=0;t<l.length;t++){var a=l[t];if(a.matchObject(e))return a.toJSONValue(e)}},d=function e(t){if(null===t)return null;var a=c(t);return void 0!==a?a:(0,i.isObject)(t)?((0,i.keysOf)(t).forEach((function(a){var o=t[a];if((0,i.isObject)(o)||void 0===o||(0,i.isInfOrNaN)(o)){var n=c(o);n?t[a]=n:e(o)}})),t):t};r._adjustTypesToJSONValue=d,r.toJSONValue=function(e){var t=c(e);if(void 0!==t)return t;var a=e;return(0,i.isObject)(e)&&(a=r.clone(e),d(a)),a};var u=function(e){if((0,i.isObject)(e)&&null!==e){var t=(0,i.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var a=0;a<l.length;a++){var o=l[a];if(o.matchJSONValue(e))return o.fromJSONValue(e)}}return e},g=function e(t){if(null===t)return null;var a=u(t);return a!==t?a:(0,i.isObject)(t)?((0,i.keysOf)(t).forEach((function(a){var o=t[a];if((0,i.isObject)(o)){var n=u(o);if(o!==n)return void(t[a]=n);e(o)}})),t):t};r._adjustTypesFromJSONValue=g,r.fromJSONValue=function(e){var t=u(e);return t===e&&(0,i.isObject)(e)&&(t=r.clone(e),g(t)),t},r.stringify=(0,i.handleError)((function(e,t){var a=r.toJSONValue(e);return t&&(t.canonical||t.indent)?o(4)(a,t):JSON.stringify(a)})),r.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return r.fromJSONValue(JSON.parse(e))},r.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},r.equals=function(e,t,a){var o,n=!(!a||!a.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,i.isObject)(e)||!(0,i.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(r.isBinary(e)&&r.isBinary(t)){if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}if((0,i.isFunction)(e.equals))return e.equals(t,a);if((0,i.isFunction)(t.equals))return t.equals(e,a);var s,l=Array.isArray(e),c=Array.isArray(t);if(l!==c)return!1;if(l&&c){if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(!r.equals(e[o],t[o],a))return!1;return!0}switch(r._isCustomType(e)+r._isCustomType(t)){case 1:return!1;case 2:return r.equals(r.toJSONValue(e),r.toJSONValue(t))}var d=(0,i.keysOf)(e),u=(0,i.keysOf)(t);return n?(o=0,s=d.every((function(n){return!(o>=u.length||n!==u[o]||!r.equals(e[n],t[u[o]],a)||(o++,0))}))):(o=0,s=d.every((function(n){return!!(0,i.hasOwn)(t,n)&&!!r.equals(e[n],t[n],a)&&(o++,!0)}))),s&&o===u.length},r.clone=function(e){var t;if(!(0,i.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(r.isBinary(e)){t=r.newBinary(e.length);for(var a=0;a<e.length;a++)t[a]=e[a];return t}return Array.isArray(e)?e.map(r.clone):(0,i.isArguments)(e)?Array.from(e).map(r.clone):(0,i.isFunction)(e.clone)?e.clone():r._isCustomType(e)?r.fromJSONValue(r.clone(r.toJSONValue(e)),!0):(t={},(0,i.keysOf)(e).forEach((function(a){t[a]=r.clone(e[a])})),t)},r.newBinary=t.newBinary}(),e.exports=n.EJSON}()},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,a="~";function o(){}function n(e,t,a){this.fn=e,this.context=t,this.once=a||!1}function i(e,t,o,i,r){if("function"!=typeof o)throw new TypeError("The listener must be a function");var s=new n(o,i||e,r),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function r(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(a=!1)),s.prototype.eventNames=function(){var e,o,n=[];if(0===this._eventsCount)return n;for(o in e=this._events)t.call(e,o)&&n.push(a?o.slice(1):o);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=a?a+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var n=0,i=o.length,r=new Array(i);n<i;n++)r[n]=o[n].fn;return r},s.prototype.listenerCount=function(e){var t=a?a+e:e,o=this._events[t];return o?o.fn?1:o.length:0},s.prototype.emit=function(e,t,o,n,i,r){var s=a?a+e:e;if(!this._events[s])return!1;var l,c,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,o),!0;case 4:return d.fn.call(d.context,t,o,n),!0;case 5:return d.fn.call(d.context,t,o,n,i),!0;case 6:return d.fn.call(d.context,t,o,n,i,r),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var g,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,o);break;case 4:d[c].fn.call(d[c].context,t,o,n);break;default:if(!l)for(g=1,l=new Array(u-1);g<u;g++)l[g-1]=arguments[g];d[c].fn.apply(d[c].context,l)}}return!0},s.prototype.on=function(e,t,a){return i(this,e,t,a,!1)},s.prototype.once=function(e,t,a){return i(this,e,t,a,!0)},s.prototype.removeListener=function(e,t,o,n){var i=a?a+e:e;if(!this._events[i])return this;if(!t)return r(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||n&&!s.once||o&&s.context!==o||r(this,i);else{for(var l=0,c=[],d=s.length;l<d;l++)(s[l].fn!==t||n&&!s[l].once||o&&s[l].context!==o)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:r(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&r(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=a,s.EventEmitter=s,e.exports=s},4063:e=>{"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var o,n,i;if(Array.isArray(t)){if((o=t.length)!=a.length)return!1;for(n=o;0!=n--;)if(!e(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((o=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(a,i[n]))return!1;for(n=o;0!=n--;){var r=i[n];if(!e(t[r],a[r]))return!1}return!0}return t!=t&&a!=a}},4341:e=>{"use strict";const t=(e,t,o,n)=>{if("length"===o||"prototype"===o)return;if("arguments"===o||"caller"===o)return;const i=Object.getOwnPropertyDescriptor(e,o),r=Object.getOwnPropertyDescriptor(t,o);!a(i,r)&&n||Object.defineProperty(e,o,r)},a=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},o=(e,t)=>`/* Wrapped ${e}*/\n${t}`,n=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),i=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,a,{ignoreNonConfigurable:r=!1}={})=>{const{name:s}=e;for(const o of Reflect.ownKeys(a))t(e,a,o,r);return((e,t)=>{const a=Object.getPrototypeOf(t);a!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,a)})(e,a),((e,t,a)=>{const r=""===a?"":`with ${a.trim()}() `,s=o.bind(null,r,t.toString());Object.defineProperty(s,"name",i),Object.defineProperty(e,"toString",{...n,value:s})})(e,a,s),e}},3414:(e,t,a)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=a(1267),t=(new e).port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},7345:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},5860:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(6729),n=a(6512),i=a(6506),r=()=>{},s=new n.TimeoutError;t.default=class extends o{constructor(e){var t,a,o,n;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(a=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==a?a:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(n=null===(o=e.interval)||void 0===o?void 0:o.toString())&&void 0!==n?n:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((a,o)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():n.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&o(s)}));a(await i)}catch(e){o(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},7489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){let o=0,n=e.length;for(;n>0;){const i=n/2|0;let r=o+i;a(e[r],t)<=0?(o=++r,n-=i+1):n=i}return o}},6506:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(7489);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const a={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(a);const n=o.default(this._queue,a,((e,t)=>t.priority-e.priority));this._queue.splice(n,0,a)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6512:(e,t,a)=>{"use strict";const o=a(7345);class n extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,a)=>new Promise(((i,r)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const s=setTimeout((()=>{if("function"==typeof a){try{i(a())}catch(e){r(e)}return}const o=a instanceof Error?a:new n("string"==typeof a?a:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),r(o)}),t);o(e.then(i,r),(()=>{clearTimeout(s)}))}));e.exports=i,e.exports.default=i,e.exports.TimeoutError=n},2660:function(e,t){var a;a=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function a(){}const o="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function n(e){return"object"==typeof e&&null!==e||"function"==typeof e}const i=a,r=Promise,s=Promise.prototype.then,l=Promise.resolve.bind(r),c=Promise.reject.bind(r);function d(e){return new r(e)}function u(e){return l(e)}function g(e){return c(e)}function p(e,t,a){return s.call(e,t,a)}function m(e,t,a){p(p(e,t,a),void 0,i)}function h(e,t){m(e,t)}function b(e,t){m(e,void 0,t)}function f(e,t,a){return p(e,t,a)}function I(e){p(e,void 0,i)}const _=(()=>{const e=o&&o.queueMicrotask;if("function"==typeof e)return e;const t=u(void 0);return e=>p(t,e)})();function y(e,t,a){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,a)}function v(e,t,a){try{return u(y(e,t,a))}catch(e){return g(e)}}class C{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let a=t;16383===t._elements.length&&(a={_elements:[],_next:void 0}),t._elements.push(e),a!==t&&(this._back=a,t._next=a),++this._size}shift(){const e=this._front;let t=e;const a=this._cursor;let o=a+1;const n=e._elements,i=n[a];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[a]=void 0,i}forEach(e){let t=this._cursor,a=this._front,o=a._elements;for(;!(t===o.length&&void 0===a._next||t===o.length&&(a=a._next,o=a._elements,t=0,0===o.length));)e(o[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function A(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?Z(e):"closed"===t._state?function(e){Z(e),k(e)}(e):B(e,t._storedError)}function w(e,t){return ya(e._ownerReadableStream,t)}function S(e){"readable"===e._ownerReadableStream._state?W(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){B(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function G(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Z(e){e._closedPromise=d(((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a}))}function B(e,t){Z(e),W(e,t)}function W(e,t){void 0!==e._closedPromise_reject&&(I(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function k(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const V=t("[[AbortSteps]]"),R=t("[[ErrorSteps]]"),x=t("[[CancelSteps]]"),N=t("[[PullSteps]]"),H=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},E=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function T(e,t){if(void 0!==e&&"object"!=typeof(a=e)&&"function"!=typeof a)throw new TypeError(`${t} is not an object.`);var a}function X(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function Y(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function F(e,t,a){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${a}'.`)}function P(e,t,a){if(void 0===e)throw new TypeError(`${t} is required in '${a}'.`)}function O(e){return Number(e)}function z(e){return 0===e?0:e}function U(e,t){const a=Number.MAX_SAFE_INTEGER;let o=Number(e);if(o=z(o),!H(o))throw new TypeError(`${t} is not a finite number`);if(o=function(e){return z(E(e))}(o),o<0||o>a)throw new TypeError(`${t} is outside the accepted range of 0 to ${a}, inclusive`);return H(o)&&0!==o?o:0}function J(e,t){if(!Ia(e))throw new TypeError(`${t} is not a ReadableStream.`)}function K(e){return new Q(e)}function L(e,t){e._reader._readRequests.push(t)}function D(e,t,a){const o=e._reader._readRequests.shift();a?o._closeSteps():o._chunkSteps(t)}function M(e){return e._reader._readRequests.length}function j(e){const t=e._reader;return void 0!==t&&!!$(t)}class Q{constructor(e){if(F(e,1,"ReadableStreamDefaultReader"),J(e,"First parameter"),_a(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");A(this,e),this._readRequests=new C}get closed(){return $(this)?this._closedPromise:g(ee("closed"))}cancel(e=void 0){return $(this)?void 0===this._ownerReadableStream?g(G("cancel")):w(this,e):g(ee("cancel"))}read(){if(!$(this))return g(ee("read"));if(void 0===this._ownerReadableStream)return g(G("read from"));let e,t;const a=d(((a,o)=>{e=a,t=o}));return q(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),a}releaseLock(){if(!$(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");S(this)}}}function $(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Q}function q(e,t){const a=e._ownerReadableStream;a._disturbed=!0,"closed"===a._state?t._closeSteps():"errored"===a._state?t._errorSteps(a._storedError):a._readableStreamController[N](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Q.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Q.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class ae{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?f(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?f(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return g(G("iterate"));let t,a;const o=d(((e,o)=>{t=e,a=o}));return q(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,_((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,S(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,S(e),a(t)}}),o}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return g(G("finish iterating"));if(!this._preventCancel){const a=w(t,e);return S(t),f(a,(()=>({value:e,done:!0})))}return S(t),u({value:e,done:!0})}}const oe={next(){return ne(this)?this._asyncIteratorImpl.next():g(ie("next"))},return(e){return ne(this)?this._asyncIteratorImpl.return(e):g(ie("return"))}};function ne(e){if(!n(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ae}catch(e){return!1}}function ie(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(oe,te);const re=Number.isNaN||function(e){return e!=e};function se(e){return e.slice()}function le(e,t,a,o,n){new Uint8Array(e).set(new Uint8Array(a,o,n),t)}function ce(e,t,a){if(e.slice)return e.slice(t,a);const o=a-t,n=new ArrayBuffer(o);return le(n,0,e,t,o),n}function de(e){const t=ce(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function ue(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ge(e,t,a){if("number"!=typeof(o=a)||re(o)||o<0||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var o;e._queue.push({value:t,size:a}),e._queueTotalSize+=a}function pe(e){e._queue=new C,e._queueTotalSize=0}class me{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!fe(this))throw Ye("view");return this._view}respond(e){if(!fe(this))throw Ye("respond");if(F(e,1,"respond"),e=U(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,Ee(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!fe(this))throw Ye("respondWithNewView");if(F(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,Te(this._associatedReadableByteStreamController,e)}}Object.defineProperties(me.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(me.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class he{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!be(this))throw Fe("byobRequest");return Ne(this)}get desiredSize(){if(!be(this))throw Fe("desiredSize");return He(this)}close(){if(!be(this))throw Fe("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Ve(this)}enqueue(e){if(!be(this))throw Fe("enqueue");if(F(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Re(this,e)}error(e=void 0){if(!be(this))throw Fe("error");xe(this,e)}[x](e){_e(this),pe(this);const t=this._cancelAlgorithm(e);return ke(this),t}[N](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,Se(this);const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(a)}const a=this._autoAllocateChunkSize;if(void 0!==a){let t;try{t=new ArrayBuffer(a)}catch(t){return void e._errorSteps(t)}const o={buffer:t,bufferByteLength:a,byteOffset:0,byteLength:a,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}L(t,e),Ie(this)}}function be(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof he}function fe(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof me}function Ie(e){const t=function(e){const t=e._controlledReadableByteStream;if("readable"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(j(t)&&M(t)>0)return!0;if(Ue(t)&&ze(t)>0)return!0;return He(e)>0}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,m(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ie(e))}),(t=>{xe(e,t)}))))}function _e(e){Ge(e),e._pendingPullIntos=new C}function ye(e,t){let a=!1;"closed"===e._state&&(a=!0);const o=ve(t);"default"===t.readerType?D(e,o,a):function(e,t,a){const o=e._reader._readIntoRequests.shift();a?o._closeSteps(t):o._chunkSteps(t)}(e,o,a)}function ve(e){const t=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/a)}function Ce(e,t,a,o){e._queue.push({buffer:t,byteOffset:a,byteLength:o}),e._queueTotalSize+=o}function Ae(e,t){const a=t.elementSize,o=t.bytesFilled-t.bytesFilled%a,n=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+n,r=i-i%a;let s=n,l=!1;r>o&&(s=r-t.bytesFilled,l=!0);const c=e._queue;for(;s>0;){const a=c.peek(),o=Math.min(s,a.byteLength),n=t.byteOffset+t.bytesFilled;le(t.buffer,n,a.buffer,a.byteOffset,o),a.byteLength===o?c.shift():(a.byteOffset+=o,a.byteLength-=o),e._queueTotalSize-=o,we(0,o,t),s-=o}return l}function we(e,t,a){a.bytesFilled+=t}function Se(e){0===e._queueTotalSize&&e._closeRequested?(ke(e),va(e._controlledReadableByteStream)):Ie(e)}function Ge(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ze(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();Ae(e,t)&&(We(e),ye(e._controlledReadableByteStream,t))}}function Be(e,t){const a=e._pendingPullIntos.peek();Ge(e),"closed"===e._controlledReadableByteStream._state?function(e,t){const a=e._controlledReadableByteStream;if(Ue(a))for(;ze(a)>0;)ye(a,We(e))}(e):function(e,t,a){if(we(0,t,a),a.bytesFilled<a.elementSize)return;We(e);const o=a.bytesFilled%a.elementSize;if(o>0){const t=a.byteOffset+a.bytesFilled,n=ce(a.buffer,t-o,t);Ce(e,n,0,n.byteLength)}a.bytesFilled-=o,ye(e._controlledReadableByteStream,a),Ze(e)}(e,t,a),Ie(e)}function We(e){return e._pendingPullIntos.shift()}function ke(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ve(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw xe(e,t),t}ke(e),va(t)}}function Re(e,t){const a=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==a._state)return;const o=t.buffer,n=t.byteOffset,i=t.byteLength,r=o;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}Ge(e),j(a)?0===M(a)?Ce(e,r,n,i):(e._pendingPullIntos.length>0&&We(e),D(a,new Uint8Array(r,n,i),!1)):Ue(a)?(Ce(e,r,n,i),Ze(e)):Ce(e,r,n,i),Ie(e)}function xe(e,t){const a=e._controlledReadableByteStream;"readable"===a._state&&(_e(e),pe(e),ke(e),Ca(a,t))}function Ne(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),a=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),o=Object.create(me.prototype);!function(e,t,a){e._associatedReadableByteStreamController=t,e._view=a}(o,e,a),e._byobRequest=o}return e._byobRequest}function He(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Ee(e,t){const a=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+t>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,Be(e,t)}function Te(e,t){const a=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+t.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const o=t.byteLength;a.buffer=t.buffer,Be(e,o)}function Xe(e,t,a,o,n,i,r){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,pe(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,t._autoAllocateChunkSize=r,t._pendingPullIntos=new C,e._readableStreamController=t,m(u(a()),(()=>{t._started=!0,Ie(t)}),(e=>{xe(t,e)}))}function Ye(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Fe(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Pe(e){return new Je(e)}function Oe(e,t){e._reader._readIntoRequests.push(t)}function ze(e){return e._reader._readIntoRequests.length}function Ue(e){const t=e._reader;return void 0!==t&&!!Ke(t)}Object.defineProperties(he.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(he.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Je{constructor(e){if(F(e,1,"ReadableStreamBYOBReader"),J(e,"First parameter"),_a(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!be(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");A(this,e),this._readIntoRequests=new C}get closed(){return Ke(this)?this._closedPromise:g(De("closed"))}cancel(e=void 0){return Ke(this)?void 0===this._ownerReadableStream?g(G("cancel")):w(this,e):g(De("cancel"))}read(e){if(!Ke(this))return g(De("read"));if(!ArrayBuffer.isView(e))return g(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return g(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return g(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return g(G("read from"));let t,a;const o=d(((e,o)=>{t=e,a=o}));return Le(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>a(e)}),o}releaseLock(){if(!Ke(this))throw De("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");S(this)}}}function Ke(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Je}function Le(e,t,a){const o=e._ownerReadableStream;o._disturbed=!0,"errored"===o._state?a._errorSteps(o._storedError):function(e,t,a){const o=e._controlledReadableByteStream;let n=1;t.constructor!==DataView&&(n=t.constructor.BYTES_PER_ELEMENT);const i=t.constructor,r=t.buffer,s={buffer:r,bufferByteLength:r.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:n,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(s),void Oe(o,a);if("closed"!==o._state){if(e._queueTotalSize>0){if(Ae(e,s)){const t=ve(s);return Se(e),void a._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return xe(e,t),void a._errorSteps(t)}}e._pendingPullIntos.push(s),Oe(o,a),Ie(e)}else{const e=new i(s.buffer,s.byteOffset,0);a._closeSteps(e)}}(o._readableStreamController,t,a)}function De(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Me(e,t){const{highWaterMark:a}=e;if(void 0===a)return t;if(re(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function je(e){const{size:t}=e;return t||(()=>1)}function Qe(e,t){T(e,t);const a=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===a?void 0:O(a),size:void 0===o?void 0:$e(o,`${t} has member 'size' that`)}}function $e(e,t){return X(e,t),t=>O(e(t))}function qe(e,t,a){return X(e,a),a=>v(e,t,[a])}function et(e,t,a){return X(e,a),()=>v(e,t,[])}function tt(e,t,a){return X(e,a),a=>y(e,t,[a])}function at(e,t,a){return X(e,a),(a,o)=>v(e,t,[a,o])}function ot(e,t){if(!lt(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(Je.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Je.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const nt="function"==typeof AbortController;class it{constructor(e={},t={}){void 0===e?e=null:Y(e,"First parameter");const a=Qe(t,"Second parameter"),o=function(e,t){T(e,t);const a=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,i=null==e?void 0:e.type,r=null==e?void 0:e.write;return{abort:void 0===a?void 0:qe(a,e,`${t} has member 'abort' that`),close:void 0===o?void 0:et(o,e,`${t} has member 'close' that`),start:void 0===n?void 0:tt(n,e,`${t} has member 'start' that`),write:void 0===r?void 0:at(r,e,`${t} has member 'write' that`),type:i}}(e,"First parameter");if(st(this),void 0!==o.type)throw new RangeError("Invalid type is specified");const n=je(a);!function(e,t,a,o){const n=Object.create(St.prototype);let i=()=>{},r=()=>u(void 0),s=()=>u(void 0),l=()=>u(void 0);void 0!==t.start&&(i=()=>t.start(n)),void 0!==t.write&&(r=e=>t.write(e,n)),void 0!==t.close&&(s=()=>t.close()),void 0!==t.abort&&(l=e=>t.abort(e)),Zt(e,n,i,r,s,l,a,o)}(this,o,Me(a,1),n)}get locked(){if(!lt(this))throw Nt("locked");return ct(this)}abort(e=void 0){return lt(this)?ct(this)?g(new TypeError("Cannot abort a stream that already has a writer")):dt(this,e):g(Nt("abort"))}close(){return lt(this)?ct(this)?g(new TypeError("Cannot close a stream that already has a writer")):ht(this)?g(new TypeError("Cannot close an already-closing stream")):ut(this):g(Nt("close"))}getWriter(){if(!lt(this))throw Nt("getWriter");return rt(this)}}function rt(e){return new It(e)}function st(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new C,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function lt(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof it}function ct(e){return void 0!==e._writer}function dt(e,t){var a;if("closed"===e._state||"errored"===e._state)return u(void 0);e._writableStreamController._abortReason=t,null===(a=e._writableStreamController._abortController)||void 0===a||a.abort();const o=e._state;if("closed"===o||"errored"===o)return u(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let n=!1;"erroring"===o&&(n=!0,t=void 0);const i=d(((a,o)=>{e._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:o,_reason:t,_wasAlreadyErroring:n}}));return e._pendingAbortRequest._promise=i,n||pt(e,t),i}function ut(e){const t=e._state;if("closed"===t||"errored"===t)return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const a=d(((t,a)=>{const o={_resolve:t,_reject:a};e._closeRequest=o})),o=e._writer;var n;return void 0!==o&&e._backpressure&&"writable"===t&&Kt(o),ge(n=e._writableStreamController,wt,0),kt(n),a}function gt(e,t){"writable"!==e._state?mt(e):pt(e,t)}function pt(e,t){const a=e._writableStreamController;e._state="erroring",e._storedError=t;const o=e._writer;void 0!==o&&vt(o,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&a._started&&mt(e)}function mt(e){e._state="errored",e._writableStreamController[R]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new C,void 0===e._pendingAbortRequest)return void bt(e);const a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring)return a._reject(t),void bt(e);m(e._writableStreamController[V](a._reason),(()=>{a._resolve(),bt(e)}),(t=>{a._reject(t),bt(e)}))}function ht(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function bt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Ft(t,e._storedError)}function ft(e,t){const a=e._writer;void 0!==a&&t!==e._backpressure&&(t?function(e){Ot(e)}(a):Kt(a)),e._backpressure=t}Object.defineProperties(it.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class It{constructor(e){if(F(e,1,"WritableStreamDefaultWriter"),ot(e,"First parameter"),ct(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!ht(e)&&e._backpressure?Ot(this):Ut(this),Xt(this);else if("erroring"===t)zt(this,e._storedError),Xt(this);else if("closed"===t)Ut(this),Xt(this),Pt(this);else{const t=e._storedError;zt(this,t),Yt(this,t)}}get closed(){return _t(this)?this._closedPromise:g(Et("closed"))}get desiredSize(){if(!_t(this))throw Et("desiredSize");if(void 0===this._ownerWritableStream)throw Tt("desiredSize");return function(e){const t=e._ownerWritableStream,a=t._state;return"errored"===a||"erroring"===a?null:"closed"===a?0:Wt(t._writableStreamController)}(this)}get ready(){return _t(this)?this._readyPromise:g(Et("ready"))}abort(e=void 0){return _t(this)?void 0===this._ownerWritableStream?g(Tt("abort")):function(e,t){return dt(e._ownerWritableStream,t)}(this,e):g(Et("abort"))}close(){if(!_t(this))return g(Et("close"));const e=this._ownerWritableStream;return void 0===e?g(Tt("close")):ht(e)?g(new TypeError("Cannot close an already-closing stream")):yt(this)}releaseLock(){if(!_t(this))throw Et("releaseLock");void 0!==this._ownerWritableStream&&Ct(this)}write(e=void 0){return _t(this)?void 0===this._ownerWritableStream?g(Tt("write to")):At(this,e):g(Et("write"))}}function _t(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof It}function yt(e){return ut(e._ownerWritableStream)}function vt(e,t){"pending"===e._readyPromiseState?Jt(e,t):function(e,t){zt(e,t)}(e,t)}function Ct(e){const t=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");vt(e,a),function(e,t){"pending"===e._closedPromiseState?Ft(e,t):function(e,t){Yt(e,t)}(e,t)}(e,a),t._writer=void 0,e._ownerWritableStream=void 0}function At(e,t){const a=e._ownerWritableStream,o=a._writableStreamController,n=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Vt(e,t),1}}(o,t);if(a!==e._ownerWritableStream)return g(Tt("write to"));const i=a._state;if("errored"===i)return g(a._storedError);if(ht(a)||"closed"===i)return g(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return g(a._storedError);const r=function(e){return d(((t,a)=>{const o={_resolve:t,_reject:a};e._writeRequests.push(o)}))}(a);return function(e,t,a){try{ge(e,t,a)}catch(t){return void Vt(e,t)}const o=e._controlledWritableStream;ht(o)||"writable"!==o._state||ft(o,Rt(e)),kt(e)}(o,t,n),r}Object.defineProperties(It.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(It.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const wt={};class St{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Gt(this))throw Ht("abortReason");return this._abortReason}get signal(){if(!Gt(this))throw Ht("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!Gt(this))throw Ht("error");"writable"===this._controlledWritableStream._state&&xt(this,e)}[V](e){const t=this._abortAlgorithm(e);return Bt(this),t}[R](){pe(this)}}function Gt(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof St}function Zt(e,t,a,o,n,i,r,s){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,pe(t),t._abortReason=void 0,t._abortController=function(){if(nt)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=s,t._strategyHWM=r,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=i;const l=Rt(t);ft(e,l),m(u(a()),(()=>{t._started=!0,kt(t)}),(a=>{t._started=!0,gt(e,a)}))}function Bt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Wt(e){return e._strategyHWM-e._queueTotalSize}function kt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void mt(t);if(0===e._queue.length)return;const a=e._queue.peek().value;a===wt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),ue(e);const a=e._closeAlgorithm();Bt(e),m(a,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&Pt(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),gt(e,t)}(t,e)}))}(e):function(e,t){const a=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(a);m(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(a);const t=a._state;if(ue(e),!ht(a)&&"writable"===t){const t=Rt(e);ft(a,t)}kt(e)}),(t=>{"writable"===a._state&&Bt(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,gt(e,t)}(a,t)}))}(e,a)}function Vt(e,t){"writable"===e._controlledWritableStream._state&&xt(e,t)}function Rt(e){return Wt(e)<=0}function xt(e,t){const a=e._controlledWritableStream;Bt(e),pt(a,t)}function Nt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ht(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Et(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Tt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Xt(e){e._closedPromise=d(((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a,e._closedPromiseState="pending"}))}function Yt(e,t){Xt(e),Ft(e,t)}function Ft(e,t){void 0!==e._closedPromise_reject&&(I(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Pt(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Ot(e){e._readyPromise=d(((t,a)=>{e._readyPromise_resolve=t,e._readyPromise_reject=a})),e._readyPromiseState="pending"}function zt(e,t){Ot(e),Jt(e,t)}function Ut(e){Ot(e),Kt(e)}function Jt(e,t){void 0!==e._readyPromise_reject&&(I(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Kt(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(St.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(St.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Lt="undefined"!=typeof DOMException?DOMException:void 0,Dt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Lt)?Lt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Mt(e,t,o,n,i,r){const s=K(e),l=rt(t);e._disturbed=!0;let c=!1,f=u(void 0);return d(((_,y)=>{let v;if(void 0!==r){if(v=()=>{const a=new Dt("Aborted","AbortError"),o=[];n||o.push((()=>"writable"===t._state?dt(t,a):u(void 0))),i||o.push((()=>"readable"===e._state?ya(e,a):u(void 0))),B((()=>Promise.all(o.map((e=>e())))),!0,a)},r.aborted)return void v();r.addEventListener("abort",v)}var C,A,w;if(Z(e,s._closedPromise,(e=>{n?W(!0,e):B((()=>dt(t,e)),!0,e)})),Z(t,l._closedPromise,(t=>{i?W(!0,t):B((()=>ya(e,t)),!0,t)})),C=e,A=s._closedPromise,w=()=>{o?W():B((()=>function(e){const t=e._ownerWritableStream,a=t._state;return ht(t)||"closed"===a?u(void 0):"errored"===a?g(t._storedError):yt(e)}(l)))},"closed"===C._state?w():h(A,w),ht(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");i?W(!0,t):B((()=>ya(e,t)),!0,t)}function G(){const e=f;return p(f,(()=>e!==f?G():void 0))}function Z(e,t,a){"errored"===e._state?a(e._storedError):b(t,a)}function B(e,a,o){function n(){m(e(),(()=>k(a,o)),(e=>k(!0,e)))}c||(c=!0,"writable"!==t._state||ht(t)?n():h(G(),n))}function W(e,a){c||(c=!0,"writable"!==t._state||ht(t)?k(e,a):h(G(),(()=>k(e,a))))}function k(e,t){Ct(l),S(s),void 0!==r&&r.removeEventListener("abort",v),e?y(t):_(void 0)}I(d(((e,t)=>{!function o(n){n?e():p(c?u(!0):p(l._readyPromise,(()=>d(((e,t)=>{q(s,{_chunkSteps:t=>{f=p(At(l,t),void 0,a),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),o,t)}(!1)})))}))}class jt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Qt(this))throw sa("desiredSize");return na(this)}close(){if(!Qt(this))throw sa("close");if(!ia(this))throw new TypeError("The stream is not in a state that permits close");ta(this)}enqueue(e=void 0){if(!Qt(this))throw sa("enqueue");if(!ia(this))throw new TypeError("The stream is not in a state that permits enqueue");return aa(this,e)}error(e=void 0){if(!Qt(this))throw sa("error");oa(this,e)}[x](e){pe(this);const t=this._cancelAlgorithm(e);return ea(this),t}[N](e){const t=this._controlledReadableStream;if(this._queue.length>0){const a=ue(this);this._closeRequested&&0===this._queue.length?(ea(this),va(t)):$t(this),e._chunkSteps(a)}else L(t,e),$t(this)}}function Qt(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof jt}function $t(e){qt(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,m(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,$t(e))}),(t=>{oa(e,t)}))))}function qt(e){const t=e._controlledReadableStream;return!!ia(e)&&!!e._started&&(!!(_a(t)&&M(t)>0)||na(e)>0)}function ea(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ta(e){if(!ia(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(ea(e),va(t))}function aa(e,t){if(!ia(e))return;const a=e._controlledReadableStream;if(_a(a)&&M(a)>0)D(a,t,!1);else{let a;try{a=e._strategySizeAlgorithm(t)}catch(t){throw oa(e,t),t}try{ge(e,t,a)}catch(t){throw oa(e,t),t}}$t(e)}function oa(e,t){const a=e._controlledReadableStream;"readable"===a._state&&(pe(e),ea(e),Ca(a,t))}function na(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function ia(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function ra(e,t,a,o,n,i,r){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,pe(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=r,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t,m(u(a()),(()=>{t._started=!0,$t(t)}),(e=>{oa(t,e)}))}function sa(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function la(e,t,a){return X(e,a),a=>v(e,t,[a])}function ca(e,t,a){return X(e,a),a=>v(e,t,[a])}function da(e,t,a){return X(e,a),a=>y(e,t,[a])}function ua(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function ga(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function pa(e,t){T(e,t);const a=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(o),preventClose:Boolean(n),signal:i}}Object.defineProperties(jt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(jt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class ma{constructor(e={},t={}){void 0===e?e=null:Y(e,"First parameter");const a=Qe(t,"Second parameter"),o=function(e,t){T(e,t);const a=e,o=null==a?void 0:a.autoAllocateChunkSize,n=null==a?void 0:a.cancel,i=null==a?void 0:a.pull,r=null==a?void 0:a.start,s=null==a?void 0:a.type;return{autoAllocateChunkSize:void 0===o?void 0:U(o,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:la(n,a,`${t} has member 'cancel' that`),pull:void 0===i?void 0:ca(i,a,`${t} has member 'pull' that`),start:void 0===r?void 0:da(r,a,`${t} has member 'start' that`),type:void 0===s?void 0:ua(s,`${t} has member 'type' that`)}}(e,"First parameter");if(fa(this),"bytes"===o.type){if(void 0!==a.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,a){const o=Object.create(he.prototype);let n=()=>{},i=()=>u(void 0),r=()=>u(void 0);void 0!==t.start&&(n=()=>t.start(o)),void 0!==t.pull&&(i=()=>t.pull(o)),void 0!==t.cancel&&(r=e=>t.cancel(e));const s=t.autoAllocateChunkSize;if(0===s)throw new TypeError("autoAllocateChunkSize must be greater than 0");Xe(e,o,n,i,r,a,s)}(this,o,Me(a,0))}else{const e=je(a);!function(e,t,a,o){const n=Object.create(jt.prototype);let i=()=>{},r=()=>u(void 0),s=()=>u(void 0);void 0!==t.start&&(i=()=>t.start(n)),void 0!==t.pull&&(r=()=>t.pull(n)),void 0!==t.cancel&&(s=e=>t.cancel(e)),ra(e,n,i,r,s,a,o)}(this,o,Me(a,1),e)}}get locked(){if(!Ia(this))throw Aa("locked");return _a(this)}cancel(e=void 0){return Ia(this)?_a(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):ya(this,e):g(Aa("cancel"))}getReader(e=void 0){if(!Ia(this))throw Aa("getReader");return void 0===function(e,t){T(e,t);const a=null==e?void 0:e.mode;return{mode:void 0===a?void 0:ga(a,`${t} has member 'mode' that`)}}(e,"First parameter").mode?K(this):Pe(this)}pipeThrough(e,t={}){if(!Ia(this))throw Aa("pipeThrough");F(e,1,"pipeThrough");const a=function(e,t){T(e,t);const a=null==e?void 0:e.readable;P(a,"readable","ReadableWritablePair"),J(a,`${t} has member 'readable' that`);const o=null==e?void 0:e.writable;return P(o,"writable","ReadableWritablePair"),ot(o,`${t} has member 'writable' that`),{readable:a,writable:o}}(e,"First parameter"),o=pa(t,"Second parameter");if(_a(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ct(a.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return I(Mt(this,a.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),a.readable}pipeTo(e,t={}){if(!Ia(this))return g(Aa("pipeTo"));if(void 0===e)return g("Parameter 1 is required in 'pipeTo'.");if(!lt(e))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let a;try{a=pa(t,"Second parameter")}catch(e){return g(e)}return _a(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ct(e)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Mt(this,e,a.preventClose,a.preventAbort,a.preventCancel,a.signal)}tee(){if(!Ia(this))throw Aa("tee");return se(be((e=this)._readableStreamController)?function(e){let t,a,o,n,i,r=K(e),s=!1,l=!1,c=!1,g=!1,p=!1;const m=d((e=>{i=e}));function h(e){b(e._closedPromise,(t=>{e===r&&(xe(o._readableStreamController,t),xe(n._readableStreamController,t),g&&p||i(void 0))}))}function f(){Ke(r)&&(S(r),r=K(e),h(r)),q(r,{_chunkSteps:t=>{_((()=>{l=!1,c=!1;const a=t;let r=t;if(!g&&!p)try{r=de(t)}catch(t){return xe(o._readableStreamController,t),xe(n._readableStreamController,t),void i(ya(e,t))}g||Re(o._readableStreamController,a),p||Re(n._readableStreamController,r),s=!1,l?y():c&&v()}))},_closeSteps:()=>{s=!1,g||Ve(o._readableStreamController),p||Ve(n._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Ee(o._readableStreamController,0),n._readableStreamController._pendingPullIntos.length>0&&Ee(n._readableStreamController,0),g&&p||i(void 0)},_errorSteps:()=>{s=!1}})}function I(t,a){$(r)&&(S(r),r=Pe(e),h(r));const d=a?n:o,u=a?o:n;Le(r,t,{_chunkSteps:t=>{_((()=>{l=!1,c=!1;const o=a?p:g;if(a?g:p)o||Te(d._readableStreamController,t);else{let a;try{a=de(t)}catch(t){return xe(d._readableStreamController,t),xe(u._readableStreamController,t),void i(ya(e,t))}o||Te(d._readableStreamController,t),Re(u._readableStreamController,a)}s=!1,l?y():c&&v()}))},_closeSteps:e=>{s=!1;const t=a?p:g,o=a?g:p;t||Ve(d._readableStreamController),o||Ve(u._readableStreamController),void 0!==e&&(t||Te(d._readableStreamController,e),!o&&u._readableStreamController._pendingPullIntos.length>0&&Ee(u._readableStreamController,0)),t&&o||i(void 0)},_errorSteps:()=>{s=!1}})}function y(){if(s)return l=!0,u(void 0);s=!0;const e=Ne(o._readableStreamController);return null===e?f():I(e._view,!1),u(void 0)}function v(){if(s)return c=!0,u(void 0);s=!0;const e=Ne(n._readableStreamController);return null===e?f():I(e._view,!0),u(void 0)}function C(){}return o=ba(C,y,(function(o){if(g=!0,t=o,p){const o=se([t,a]),n=ya(e,o);i(n)}return m})),n=ba(C,v,(function(o){if(p=!0,a=o,g){const o=se([t,a]),n=ya(e,o);i(n)}return m})),h(r),[o,n]}(e):function(e,t){const a=K(e);let o,n,i,r,s,l=!1,c=!1,g=!1,p=!1;const m=d((e=>{s=e}));function h(){return l?(c=!0,u(void 0)):(l=!0,q(a,{_chunkSteps:e=>{_((()=>{c=!1;const t=e,a=e;g||aa(i._readableStreamController,t),p||aa(r._readableStreamController,a),l=!1,c&&h()}))},_closeSteps:()=>{l=!1,g||ta(i._readableStreamController),p||ta(r._readableStreamController),g&&p||s(void 0)},_errorSteps:()=>{l=!1}}),u(void 0))}function f(){}return i=ha(f,h,(function(t){if(g=!0,o=t,p){const t=se([o,n]),a=ya(e,t);s(a)}return m})),r=ha(f,h,(function(t){if(p=!0,n=t,g){const t=se([o,n]),a=ya(e,t);s(a)}return m})),b(a._closedPromise,(e=>{oa(i._readableStreamController,e),oa(r._readableStreamController,e),g&&p||s(void 0)})),[i,r]}(e));var e}values(e=void 0){if(!Ia(this))throw Aa("values");return function(e,t){const a=K(e),o=new ae(a,t),n=Object.create(oe);return n._asyncIteratorImpl=o,n}(this,function(e,t){T(e,"First parameter");const a=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(a)}}(e).preventCancel)}}function ha(e,t,a,o=1,n=(()=>1)){const i=Object.create(ma.prototype);return fa(i),ra(i,Object.create(jt.prototype),e,t,a,o,n),i}function ba(e,t,a){const o=Object.create(ma.prototype);return fa(o),Xe(o,Object.create(he.prototype),e,t,a,0,void 0),o}function fa(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ia(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof ma}function _a(e){return void 0!==e._reader}function ya(e,t){if(e._disturbed=!0,"closed"===e._state)return u(void 0);if("errored"===e._state)return g(e._storedError);va(e);const o=e._reader;return void 0!==o&&Ke(o)&&(o._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),o._readIntoRequests=new C),f(e._readableStreamController[x](t),a)}function va(e){e._state="closed";const t=e._reader;void 0!==t&&(k(t),$(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new C))}function Ca(e,t){e._state="errored",e._storedError=t;const a=e._reader;void 0!==a&&(W(a,t),$(a)?(a._readRequests.forEach((e=>{e._errorSteps(t)})),a._readRequests=new C):(a._readIntoRequests.forEach((e=>{e._errorSteps(t)})),a._readIntoRequests=new C))}function Aa(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function wa(e,t){T(e,t);const a=null==e?void 0:e.highWaterMark;return P(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:O(a)}}Object.defineProperties(ma.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ma.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(ma.prototype,t.asyncIterator,{value:ma.prototype.values,writable:!0,configurable:!0});const Sa=e=>e.byteLength;try{Object.defineProperty(Sa,"name",{value:"size",configurable:!0})}catch(e){}class Ga{constructor(e){F(e,1,"ByteLengthQueuingStrategy"),e=wa(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ba(this))throw Za("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ba(this))throw Za("size");return Sa}}function Za(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ba(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Ga}Object.defineProperties(Ga.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Ga.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const Wa=()=>1;try{Object.defineProperty(Wa,"name",{value:"size",configurable:!0})}catch(e){}class ka{constructor(e){F(e,1,"CountQueuingStrategy"),e=wa(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ra(this))throw Va("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ra(this))throw Va("size");return Wa}}function Va(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ra(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof ka}function xa(e,t,a){return X(e,a),a=>v(e,t,[a])}function Na(e,t,a){return X(e,a),a=>y(e,t,[a])}function Ha(e,t,a){return X(e,a),(a,o)=>v(e,t,[a,o])}Object.defineProperties(ka.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ka.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Ea{constructor(e={},t={},a={}){void 0===e&&(e=null);const o=Qe(t,"Second parameter"),n=Qe(a,"Third parameter"),i=function(e,t){T(e,t);const a=null==e?void 0:e.flush,o=null==e?void 0:e.readableType,n=null==e?void 0:e.start,i=null==e?void 0:e.transform,r=null==e?void 0:e.writableType;return{flush:void 0===a?void 0:xa(a,e,`${t} has member 'flush' that`),readableType:o,start:void 0===n?void 0:Na(n,e,`${t} has member 'start' that`),transform:void 0===i?void 0:Ha(i,e,`${t} has member 'transform' that`),writableType:r}}(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");const r=Me(n,0),s=je(n),l=Me(o,1),c=je(o);let p;!function(e,t,a,o,n,i){function r(){return t}e._writable=function(e,t,a,o,n=1,i=(()=>1)){const r=Object.create(it.prototype);return st(r),Zt(r,Object.create(St.prototype),e,t,a,o,n,i),r}(r,(function(t){return function(e,t){const a=e._transformStreamController;return e._backpressure?f(e._backpressureChangePromise,(()=>{const o=e._writable;if("erroring"===o._state)throw o._storedError;return Ja(a,t)})):Ja(a,t)}(e,t)}),(function(){return function(e){const t=e._readable,a=e._transformStreamController,o=a._flushAlgorithm();return za(a),f(o,(()=>{if("errored"===t._state)throw t._storedError;ta(t._readableStreamController)}),(a=>{throw Xa(e,a),t._storedError}))}(e)}),(function(t){return function(e,t){return Xa(e,t),u(void 0)}(e,t)}),a,o),e._readable=ha(r,(function(){return function(e){return Fa(e,!1),e._backpressureChangePromise}(e)}),(function(t){return Ya(e,t),u(void 0)}),n,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Fa(e,!0),e._transformStreamController=void 0}(this,d((e=>{p=e})),l,c,r,s),function(e,t){const a=Object.create(Pa.prototype);let o=e=>{try{return Ua(a,e),u(void 0)}catch(e){return g(e)}},n=()=>u(void 0);void 0!==t.transform&&(o=e=>t.transform(e,a)),void 0!==t.flush&&(n=()=>t.flush(a)),function(e,t,a,o){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=a,t._flushAlgorithm=o}(e,a,o,n)}(this,i),void 0!==i.start?p(i.start(this._transformStreamController)):p(void 0)}get readable(){if(!Ta(this))throw La("readable");return this._readable}get writable(){if(!Ta(this))throw La("writable");return this._writable}}function Ta(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Ea}function Xa(e,t){oa(e._readable._readableStreamController,t),Ya(e,t)}function Ya(e,t){za(e._transformStreamController),Vt(e._writable._writableStreamController,t),e._backpressure&&Fa(e,!1)}function Fa(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=d((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Ea.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Ea.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class Pa{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Oa(this))throw Ka("desiredSize");return na(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!Oa(this))throw Ka("enqueue");Ua(this,e)}error(e=void 0){if(!Oa(this))throw Ka("error");var t;t=e,Xa(this._controlledTransformStream,t)}terminate(){if(!Oa(this))throw Ka("terminate");!function(e){const t=e._controlledTransformStream;ta(t._readable._readableStreamController);Ya(t,new TypeError("TransformStream terminated"))}(this)}}function Oa(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Pa}function za(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ua(e,t){const a=e._controlledTransformStream,o=a._readable._readableStreamController;if(!ia(o))throw new TypeError("Readable side is not in a state that permits enqueue");try{aa(o,t)}catch(e){throw Ya(a,e),a._readable._storedError}const n=function(e){return!qt(e)}(o);n!==a._backpressure&&Fa(a,!0)}function Ja(e,t){return f(e._transformAlgorithm(t),void 0,(t=>{throw Xa(e._controlledTransformStream,t),t}))}function Ka(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function La(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(Pa.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Pa.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Ga,e.CountQueuingStrategy=ka,e.ReadableByteStreamController=he,e.ReadableStream=ma,e.ReadableStreamBYOBReader=Je,e.ReadableStreamBYOBRequest=me,e.ReadableStreamDefaultController=jt,e.ReadableStreamDefaultReader=Q,e.TransformStream=Ea,e.TransformStreamDefaultController=Pa,e.WritableStream=it,e.WritableStreamDefaultController=St,e.WritableStreamDefaultWriter=It,Object.defineProperty(e,"__esModule",{value:!0})},a(t)},977:(e,t,a)=>{"use strict";const{EMPTY_BUFFER:o}=a(1872),n=Buffer[Symbol.species];function i(e,t,a,o,n){for(let i=0;i<n;i++)a[o+i]=e[i]^t[3&i]}function r(e,t){for(let a=0;a<e.length;a++)e[a]^=t[3&a]}if(e.exports={concat:function(e,t){if(0===e.length)return o;if(1===e.length)return e[0];const a=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const o=e[t];a.set(o,i),i+=o.length}return i<t?new n(a.buffer,a.byteOffset,i):a},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let a;return t instanceof ArrayBuffer?a=new n(t):ArrayBuffer.isView(t)?a=new n(t.buffer,t.byteOffset,t.byteLength):(a=Buffer.from(t),e.readOnly=!1),a},unmask:r},!process.env.WS_NO_BUFFER_UTIL)try{const t=a(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,a,o,n,r){r<48?i(e,a,o,n,r):t.mask(e,a,o,n,r)},e.exports.unmask=function(e,a){e.length<32?r(e,a):t.unmask(e,a)}}catch(e){}},1872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},62:(e,t,a)=>{"use strict";const{kForOnEventAttribute:o,kListener:n}=a(1872),i=Symbol("kCode"),r=Symbol("kData"),s=Symbol("kError"),l=Symbol("kMessage"),c=Symbol("kReason"),d=Symbol("kTarget"),u=Symbol("kType"),g=Symbol("kWasClean");class p{constructor(e){this[d]=null,this[u]=e}get target(){return this[d]}get type(){return this[u]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[c]=void 0===t.reason?"":t.reason,this[g]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[c]}get wasClean(){return this[g]}}Object.defineProperty(m.prototype,"code",{enumerable:!0}),Object.defineProperty(m.prototype,"reason",{enumerable:!0}),Object.defineProperty(m.prototype,"wasClean",{enumerable:!0});class h extends p{constructor(e,t={}){super(e),this[s]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[s]}get message(){return this[l]}}Object.defineProperty(h.prototype,"error",{enumerable:!0}),Object.defineProperty(h.prototype,"message",{enumerable:!0});class b extends p{constructor(e,t={}){super(e),this[r]=void 0===t.data?null:t.data}get data(){return this[r]}}Object.defineProperty(b.prototype,"data",{enumerable:!0});const f={addEventListener(e,t,a={}){for(const i of this.listeners(e))if(!a[o]&&i[n]===t&&!i[o])return;let i;if("message"===e)i=function(e,a){const o=new b("message",{data:a?e:e.toString()});o[d]=this,I(t,this,o)};else if("close"===e)i=function(e,a){const o=new m("close",{code:e,reason:a.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});o[d]=this,I(t,this,o)};else if("error"===e)i=function(e){const a=new h("error",{error:e,message:e.message});a[d]=this,I(t,this,a)};else{if("open"!==e)return;i=function(){const e=new p("open");e[d]=this,I(t,this,e)}}i[o]=!!a[o],i[n]=t,a.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const a of this.listeners(e))if(a[n]===t&&!a[o]){this.removeListener(e,a);break}}};function I(e,t,a){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,a):e.call(t,a)}e.exports={CloseEvent:m,ErrorEvent:h,Event:p,EventTarget:f,MessageEvent:b}},1503:(e,t,a)=>{"use strict";const{tokenChars:o}=a(6746);function n(e,t,a){void 0===e[t]?e[t]=[a]:e[t].push(a)}e.exports={format:function(e){return Object.keys(e).map((t=>{let a=e[t];return Array.isArray(a)||(a=[a]),a.map((e=>[t].concat(Object.keys(e).map((t=>{let a=e[t];return Array.isArray(a)||(a=[a]),a.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let a,i,r=Object.create(null),s=!1,l=!1,c=!1,d=-1,u=-1,g=-1,p=0;for(;p<e.length;p++)if(u=e.charCodeAt(p),void 0===a)if(-1===g&&1===o[u])-1===d&&(d=p);else if(0===p||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===g&&(g=p);const o=e.slice(d,g);44===u?(n(t,o,r),r=Object.create(null)):a=o,d=g=-1}}else-1===g&&-1!==d&&(g=p);else if(void 0===i)if(-1===g&&1===o[u])-1===d&&(d=p);else if(32===u||9===u)-1===g&&-1!==d&&(g=p);else if(59===u||44===u){if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===g&&(g=p),n(r,e.slice(d,g),!0),44===u&&(n(t,a,r),r=Object.create(null),a=void 0),d=g=-1}else{if(61!==u||-1===d||-1!==g)throw new SyntaxError(`Unexpected character at index ${p}`);i=e.slice(d,p),d=g=-1}else if(l){if(1!==o[u])throw new SyntaxError(`Unexpected character at index ${p}`);-1===d?d=p:s||(s=!0),l=!1}else if(c)if(1===o[u])-1===d&&(d=p);else if(34===u&&-1!==d)c=!1,g=p;else{if(92!==u)throw new SyntaxError(`Unexpected character at index ${p}`);l=!0}else if(34===u&&61===e.charCodeAt(p-1))c=!0;else if(-1===g&&1===o[u])-1===d&&(d=p);else if(-1===d||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===g&&(g=p);let o=e.slice(d,g);s&&(o=o.replace(/\\/g,""),s=!1),n(r,i,o),44===u&&(n(t,a,r),r=Object.create(null),a=void 0),i=void 0,d=g=-1}}else-1===g&&(g=p);if(-1===d||c||32===u||9===u)throw new SyntaxError("Unexpected end of input");-1===g&&(g=p);const m=e.slice(d,g);return void 0===a?n(t,m,r):(void 0===i?n(r,m,!0):n(r,i,s?m.replace(/\\/g,""):m),n(t,a,r)),t}}},305:e=>{"use strict";const t=Symbol("kDone"),a=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[a]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[a]()}[a](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5196:(e,t,a)=>{"use strict";const o=a(9796),n=a(977),i=a(305),{kStatusCode:r}=a(1872),s=Buffer[Symbol.species],l=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),d=Symbol("total-length"),u=Symbol("callback"),g=Symbol("buffers"),p=Symbol("error");let m;function h(e){this[g].push(e),this[d]+=e.length}function b(e){this[d]+=e.length,this[c]._maxPayload<1||this[d]<=this[c]._maxPayload?this[g].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][r]=1009,this.removeListener("data",b),this.reset())}function f(e){this[c]._inflate=null,e[r]=1007,this[u](e)}e.exports=class{constructor(e,t,a){if(this._maxPayload=0|a,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!m){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;m=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,a=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!a)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(a.server_no_context_takeover=!0),t.clientNoContextTakeover&&(a.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(a.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?a.client_max_window_bits=t.clientMaxWindowBits:!0!==a.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete a.client_max_window_bits,a}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let a=e[t];if(a.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(a=a[0],"client_max_window_bits"===t){if(!0!==a){const e=+a;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${a}`);a=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${a}`)}else if("server_max_window_bits"===t){const e=+a;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${a}`);a=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==a)throw new TypeError(`Invalid value for parameter "${t}": ${a}`)}e[t]=a}))})),e}decompress(e,t,a){m.add((o=>{this._decompress(e,t,((e,t)=>{o(),a(e,t)}))}))}compress(e,t,a){m.add((o=>{this._compress(e,t,((e,t)=>{o(),a(e,t)}))}))}_decompress(e,t,a){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?o.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=o.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[d]=0,this._inflate[g]=[],this._inflate.on("error",f),this._inflate.on("data",b)}this._inflate[u]=a,this._inflate.write(e),t&&this._inflate.write(l),this._inflate.flush((()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void a(e);const o=n.concat(this._inflate[g],this._inflate[d]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[g]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),a(null,o)}))}_compress(e,t,a){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?o.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=o.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[g]=[],this._deflate.on("data",h)}this._deflate[u]=a,this._deflate.write(e),this._deflate.flush(o.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=n.concat(this._deflate[g],this._deflate[d]);t&&(e=new s(e.buffer,e.byteOffset,e.length-4)),this._deflate[u]=null,this._deflate[d]=0,this._deflate[g]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),a(null,e)}))}}},2957:(e,t,a)=>{"use strict";const{Writable:o}=a(2781),n=a(5196),{BINARY_TYPES:i,EMPTY_BUFFER:r,kStatusCode:s,kWebSocket:l}=a(1872),{concat:c,toArrayBuffer:d,unmask:u}=a(977),{isValidStatusCode:g,isValidUTF8:p}=a(6746),m=Buffer[Symbol.species],h=Promise.resolve(),b="function"==typeof queueMicrotask?queueMicrotask:function(e){h.then(e).catch(I)};function f(e){throw e}function I(e){process.nextTick(f,e)}e.exports=class extends o{constructor(e={}){super(),this._allowSynchronousEvents=!!e.allowSynchronousEvents,this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,a){if(8===this._opcode&&0==this._state)return a();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(a)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new m(t.buffer,t.byteOffset+e,t.length-e),new m(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const a=this._buffers[0],o=t.length-e;e>=a.length?t.set(this._buffers.shift(),o):(t.set(new Uint8Array(a.buffer,a.byteOffset,e),o),this._buffers[0]=new m(a.buffer,a.byteOffset+e,a.length-e)),e-=a.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(0!=(48&t[0]))return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const a=64==(64&t[0]);if(!a||this._extensions[n.extensionName]){if(this._fin=128==(128&t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(a)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=a}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(a)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),a=t.readUInt32BE(0);a>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=a*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=r;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!=(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&u(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,((e,a)=>{if(e)return t(e);if(a.length){if(this._messageLength+=a.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(a)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,a=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let o;o="nodebuffer"===this._binaryType?c(a,t):"arraybuffer"===this._binaryType?d(c(a,t)):a,5===this._state||this._allowSynchronousEvents?(this.emit("message",o,!0),this._state=0):(this._state=6,b((()=>{this.emit("message",o,!0),this._state=0,this.startLoop(e)})))}else{const o=c(a,t);if(!this._skipUTF8Validation&&!p(o)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",o,!1),this._state=0):(this._state=6,b((()=>{this.emit("message",o,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,b((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,r),this.end();else{const a=e.readUInt16BE(0);if(!g(a)){const e=this.createError(RangeError,`invalid status code ${a}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const o=new m(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(o)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",a,o),this.end()}this._state=0}}createError(e,t,a,o,n){this._loop=!1,this._errored=!0;const i=new e(a?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,this.createError),i.code=n,i[s]=o,i}}},7330:(e,t,a)=>{"use strict";const{Duplex:o}=a(2781),{randomFillSync:n}=a(6113),i=a(5196),{EMPTY_BUFFER:r}=a(1872),{isValidStatusCode:s}=a(6746),{mask:l,toBuffer:c}=a(977),d=Symbol("kByteLength"),u=Buffer.alloc(4);class g{constructor(e,t,a){this._extensions=t||{},a&&(this._generateMask=a,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let a,o,i=!1,r=2,s=!1;t.mask&&(a=t.maskBuffer||u,t.generateMask?t.generateMask(a):n(a,0,4),s=0==(a[0]|a[1]|a[2]|a[3]),r=6),"string"==typeof e?o=t.mask&&!s||void 0===t[d]?(e=Buffer.from(e)).length:t[d]:(o=e.length,i=t.mask&&t.readOnly&&!s);let c=o;o>=65536?(r+=8,c=127):o>125&&(r+=2,c=126);const g=Buffer.allocUnsafe(i?o+r:r);return g[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(g[0]|=64),g[1]=c,126===c?g.writeUInt16BE(o,2):127===c&&(g[2]=g[3]=0,g.writeUIntBE(o,4,6)),t.mask?(g[1]|=128,g[r-4]=a[0],g[r-3]=a[1],g[r-2]=a[2],g[r-1]=a[3],s?[g,e]:i?(l(e,a,g,r,o),[g]):(l(e,a,e,0,o),[g,e])):[g,e]}close(e,t,a,o){let n;if(void 0===e)n=r;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const a=Buffer.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+a),n.writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else n=Buffer.allocUnsafe(2),n.writeUInt16BE(e,0)}const i={[d]:n.length,fin:!0,generateMask:this._generateMask,mask:a,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,n,!1,i,o]):this.sendFrame(g.frame(n,i),o)}ping(e,t,a){let o,n;if("string"==typeof e?(o=Buffer.byteLength(e),n=!1):(o=(e=c(e)).length,n=c.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[d]:o,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,a]):this.sendFrame(g.frame(e,i),a)}pong(e,t,a){let o,n;if("string"==typeof e?(o=Buffer.byteLength(e),n=!1):(o=(e=c(e)).length,n=c.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[d]:o,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,a]):this.sendFrame(g.frame(e,i),a)}send(e,t,a){const o=this._extensions[i.extensionName];let n,r,s=t.binary?2:1,l=t.compress;if("string"==typeof e?(n=Buffer.byteLength(e),r=!1):(n=(e=c(e)).length,r=c.readOnly),this._firstFragment?(this._firstFragment=!1,l&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=n>=o._threshold),this._compress=l):(l=!1,s=0),t.fin&&(this._firstFragment=!0),o){const o={[d]:n,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:r,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,o,a]):this.dispatch(e,this._compress,o,a)}else this.sendFrame(g.frame(e,{[d]:n,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:r,rsv1:!1}),a)}dispatch(e,t,a,o){if(!t)return void this.sendFrame(g.frame(e,a),o);const n=this._extensions[i.extensionName];this._bufferedBytes+=a[d],this._deflating=!0,n.compress(e,a.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof o&&o(e);for(let t=0;t<this._queue.length;t++){const a=this._queue[t],o=a[a.length-1];"function"==typeof o&&o(e)}}else this._bufferedBytes-=a[d],this._deflating=!1,a.readOnly=!1,this.sendFrame(g.frame(t,a),o),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][d],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][d],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=g},404:(e,t,a)=>{"use strict";const{Duplex:o}=a(2781);function n(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function r(e){this.removeListener("error",r),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let a=!0;const s=new o({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,a){const o=!a&&s._readableState.objectMode?t.toString():t;s.push(o)||e.pause()})),e.once("error",(function(e){s.destroyed||(a=!1,s.destroy(e))})),e.once("close",(function(){s.destroyed||s.push(null)})),s._destroy=function(t,o){if(e.readyState===e.CLOSED)return o(t),void process.nextTick(n,s);let i=!1;e.once("error",(function(e){i=!0,o(e)})),e.once("close",(function(){i||o(t),process.nextTick(n,s)})),a&&e.terminate()},s._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),s._readableState.endEmitted&&s.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){s._final(t)}))},s._read=function(){e.isPaused&&e.resume()},s._write=function(t,a,o){e.readyState!==e.CONNECTING?e.send(t,o):e.once("open",(function(){s._write(t,a,o)}))},s.on("end",i),s.on("error",r),s}},640:(e,t,a)=>{"use strict";const{tokenChars:o}=a(6746);e.exports={parse:function(e){const t=new Set;let a=-1,n=-1,i=0;for(;i<e.length;i++){const r=e.charCodeAt(i);if(-1===n&&1===o[r])-1===a&&(a=i);else if(0===i||32!==r&&9!==r){if(44!==r)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===a)throw new SyntaxError(`Unexpected character at index ${i}`);-1===n&&(n=i);const o=e.slice(a,n);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);t.add(o),a=n=-1}}else-1===n&&-1!==a&&(n=i)}if(-1===a||-1!==n)throw new SyntaxError("Unexpected end of input");const r=e.slice(a,i);if(t.has(r))throw new SyntaxError(`The "${r}" subprotocol is duplicated`);return t.add(r),t}}},6746:(e,t,a)=>{"use strict";const{isUtf8:o}=a(4300);function n(e){const t=e.length;let a=0;for(;a<t;)if(0==(128&e[a]))a++;else if(192==(224&e[a])){if(a+1===t||128!=(192&e[a+1])||192==(254&e[a]))return!1;a+=2}else if(224==(240&e[a])){if(a+2>=t||128!=(192&e[a+1])||128!=(192&e[a+2])||224===e[a]&&128==(224&e[a+1])||237===e[a]&&160==(224&e[a+1]))return!1;a+=3}else{if(240!=(248&e[a]))return!1;if(a+3>=t||128!=(192&e[a+1])||128!=(192&e[a+2])||128!=(192&e[a+3])||240===e[a]&&128==(240&e[a+1])||244===e[a]&&e[a+1]>143||e[a]>244)return!1;a+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},o)e.exports.isValidUTF8=function(e){return e.length<24?n(e):o(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=a(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?n(e):t(e)}}catch(e){}},9284:(e,t,a)=>{"use strict";const o=a(2361),n=a(3685),{Duplex:i}=a(2781),{createHash:r}=a(6113),s=a(1503),l=a(5196),c=a(640),d=a(8762),{GUID:u,kWebSocket:g}=a(1872),p=/^[+/0-9A-Za-z]{22}==$/;function m(e){e._state=2,e.emit("close")}function h(){this.destroy()}function b(e,t,a,o){a=a||n.STATUS_CODES[t],o={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(a),...o},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(o).map((e=>`${e}: ${o[e]}`)).join("\r\n")+"\r\n\r\n"+a)}function f(e,t,a,o,n){if(e.listenerCount("wsClientError")){const o=new Error(n);Error.captureStackTrace(o,f),e.emit("wsClientError",o,a,t)}else b(a,o,n)}e.exports=class extends o{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!1,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:d,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer(((e,t)=>{const a=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":a.length,"Content-Type":"text/plain"}),t.end(a)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const a of Object.keys(t))e.on(a,t[a]);return function(){for(const a of Object.keys(t))e.removeListener(a,t[a])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,a,o)=>{this.handleUpgrade(t,a,o,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(m,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(m,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{m(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,a,o){t.on("error",h);const n=e.headers["sec-websocket-key"],i=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void f(this,e,t,405,"Invalid HTTP method");if("websocket"!==e.headers.upgrade.toLowerCase())return void f(this,e,t,400,"Invalid Upgrade header");if(!n||!p.test(n))return void f(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==i&&13!==i)return void f(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void b(t,400);const r=e.headers["sec-websocket-protocol"];let d=new Set;if(void 0!==r)try{d=c.parse(r)}catch(a){return void f(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const u=e.headers["sec-websocket-extensions"],g={};if(this.options.perMessageDeflate&&void 0!==u){const a=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=s.parse(u);e[l.extensionName]&&(a.accept(e[l.extensionName]),g[l.extensionName]=a)}catch(a){return void f(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const r={origin:e.headers[8===i?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(r,((i,r,s,l)=>{if(!i)return b(t,r||401,s,l);this.completeUpgrade(g,n,d,e,t,a,o)}));if(!this.options.verifyClient(r))return b(t,401)}this.completeUpgrade(g,n,d,e,t,a,o)}completeUpgrade(e,t,a,o,n,i,c){if(!n.readable||!n.writable)return n.destroy();if(n[g])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return b(n,503);const d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${r("sha1").update(t+u).digest("base64")}`],p=new this.options.WebSocket(null,void 0,this.options);if(a.size){const e=this.options.handleProtocols?this.options.handleProtocols(a,o):a.values().next().value;e&&(d.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[l.extensionName]){const t=e[l.extensionName].params,a=s.format({[l.extensionName]:[t]});d.push(`Sec-WebSocket-Extensions: ${a}`),p._extensions=e}this.emit("headers",d,o),n.write(d.concat("\r\n").join("\r\n")),n.removeListener("error",h),p.setSocket(n,i,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",(()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(m,this)}))),c(p,o)}}},8762:(e,t,a)=>{"use strict";const o=a(2361),n=a(5687),i=a(3685),r=a(1808),s=a(4404),{randomBytes:l,createHash:c}=a(6113),{Duplex:d,Readable:u}=a(2781),{URL:g}=a(7310),p=a(5196),m=a(2957),h=a(7330),{BINARY_TYPES:b,EMPTY_BUFFER:f,GUID:I,kForOnEventAttribute:_,kListener:y,kStatusCode:v,kWebSocket:C,NOOP:A}=a(1872),{EventTarget:{addEventListener:w,removeEventListener:S}}=a(62),{format:G,parse:Z}=a(1503),{toBuffer:B}=a(977),W=Symbol("kAborted"),k=[8,13],V=["CONNECTING","OPEN","CLOSING","CLOSED"],R=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class x extends o{constructor(e,t,a){super(),this._binaryType=b[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=f,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=x.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(a=t,t=[]):t=[t]),N(this,e,t,a)):(this._autoPong=a.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){b.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,a){const o=new m({allowSynchronousEvents:a.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:a.maxPayload,skipUTF8Validation:a.skipUTF8Validation});this._sender=new h(e,this._extensions,a.generateMask),this._receiver=o,this._socket=e,o[C]=this,e[C]=this,o.on("conclude",F),o.on("drain",P),o.on("error",O),o.on("message",U),o.on("ping",J),o.on("pong",K),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",D),e.on("data",M),e.on("end",j),e.on("error",Q),this._readyState=x.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=x.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=x.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==x.CLOSED)if(this.readyState!==x.CONNECTING)this.readyState!==x.CLOSING?(this._readyState=x.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";X(this,this._req,e)}}pause(){this.readyState!==x.CONNECTING&&this.readyState!==x.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,a){if(this.readyState===x.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(a=e,e=t=void 0):"function"==typeof t&&(a=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===x.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||f,t,a)):Y(this,e,a)}pong(e,t,a){if(this.readyState===x.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(a=e,e=t=void 0):"function"==typeof t&&(a=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===x.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||f,t,a)):Y(this,e,a)}resume(){this.readyState!==x.CONNECTING&&this.readyState!==x.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,a){if(this.readyState===x.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(a=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==x.OPEN)return void Y(this,e,a);const o={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(o.compress=!1),this._sender.send(e||f,o,a)}terminate(){if(this.readyState!==x.CLOSED)if(this.readyState!==x.CONNECTING)this._socket&&(this._readyState=x.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";X(this,this._req,e)}}}function N(e,t,a,o){const r={allowSynchronousEvents:!1,autoPong:!0,protocolVersion:k[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=r.autoPong,!k.includes(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} (supported versions: ${k.join(", ")})`);let s;if(t instanceof g)s=t;else try{s=new g(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===s.protocol?s.protocol="ws:":"https:"===s.protocol&&(s.protocol="wss:"),e._url=s.href;const d="wss:"===s.protocol,u="ws+unix:"===s.protocol;let m;if("ws:"===s.protocol||d||u?u&&!s.pathname?m="The URL's pathname is empty":s.hash&&(m="The URL contains a fragment identifier"):m='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',m){const t=new SyntaxError(m);if(0===e._redirects)throw t;return void H(e,t)}const h=d?443:80,b=l(16).toString("base64"),f=d?n.request:i.request,_=new Set;let y,v;if(r.createConnection=d?T:E,r.defaultPort=r.defaultPort||h,r.port=s.port||h,r.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,r.headers={...r.headers,"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},r.path=s.pathname+s.search,r.timeout=r.handshakeTimeout,r.perMessageDeflate&&(y=new p(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=G({[p.extensionName]:y.offer()})),a.length){for(const e of a){if("string"!=typeof e||!R.test(e)||_.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(e)}r.headers["Sec-WebSocket-Protocol"]=a.join(",")}if(r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin),(s.username||s.password)&&(r.auth=`${s.username}:${s.password}`),u){const e=r.path.split(":");r.socketPath=e[0],r.path=e[1]}if(r.followRedirects){if(0===e._redirects){e._originalIpc=u,e._originalSecure=d,e._originalHostOrSocketPath=u?r.socketPath:s.host;const t=o&&o.headers;if(o={...o,headers:{}},t)for(const[e,a]of Object.entries(t))o.headers[e.toLowerCase()]=a}else if(0===e.listenerCount("redirect")){const t=u?!!e._originalIpc&&r.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&s.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!d)&&(delete r.headers.authorization,delete r.headers.cookie,t||delete r.headers.host,r.auth=void 0)}r.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(r.auth).toString("base64")),v=e._req=f(r),e._redirects&&e.emit("redirect",e.url,v)}else v=e._req=f(r);r.timeout&&v.on("timeout",(()=>{X(e,v,"Opening handshake has timed out")})),v.on("error",(t=>{null===v||v[W]||(v=e._req=null,H(e,t))})),v.on("response",(n=>{const i=n.headers.location,s=n.statusCode;if(i&&r.followRedirects&&s>=300&&s<400){if(++e._redirects>r.maxRedirects)return void X(e,v,"Maximum redirects exceeded");let n;v.abort();try{n=new g(i,t)}catch(t){const a=new SyntaxError(`Invalid URL: ${i}`);return void H(e,a)}N(e,n,a,o)}else e.emit("unexpected-response",v,n)||X(e,v,`Unexpected server response: ${n.statusCode}`)})),v.on("upgrade",((t,a,o)=>{if(e.emit("upgrade",t),e.readyState!==x.CONNECTING)return;if(v=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void X(e,a,"Invalid Upgrade header");const n=c("sha1").update(b+I).digest("base64");if(t.headers["sec-websocket-accept"]!==n)return void X(e,a,"Invalid Sec-WebSocket-Accept header");const i=t.headers["sec-websocket-protocol"];let s;if(void 0!==i?_.size?_.has(i)||(s="Server sent an invalid subprotocol"):s="Server sent a subprotocol but none was requested":_.size&&(s="Server sent no subprotocol"),s)return void X(e,a,s);i&&(e._protocol=i);const l=t.headers["sec-websocket-extensions"];if(void 0!==l){if(!y)return void X(e,a,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=Z(l)}catch(t){return void X(e,a,"Invalid Sec-WebSocket-Extensions header")}const o=Object.keys(t);if(1!==o.length||o[0]!==p.extensionName)return void X(e,a,"Server indicated an extension that was not requested");try{y.accept(t[p.extensionName])}catch(t){return void X(e,a,"Invalid Sec-WebSocket-Extensions header")}e._extensions[p.extensionName]=y}e.setSocket(a,o,{allowSynchronousEvents:r.allowSynchronousEvents,generateMask:r.generateMask,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation})})),r.finishRequest?r.finishRequest(v,e):v.end()}function H(e,t){e._readyState=x.CLOSING,e.emit("error",t),e.emitClose()}function E(e){return e.path=e.socketPath,r.connect(e)}function T(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=r.isIP(e.host)?"":e.host),s.connect(e)}function X(e,t,a){e._readyState=x.CLOSING;const o=new Error(a);Error.captureStackTrace(o,X),t.setHeader?(t[W]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(H,e,o)):(t.destroy(o),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function Y(e,t,a){if(t){const a=B(t).length;e._socket?e._sender._bufferedBytes+=a:e._bufferedAmount+=a}if(a){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${V[e.readyState]})`);process.nextTick(a,t)}}function F(e,t){const a=this[C];a._closeFrameReceived=!0,a._closeMessage=t,a._closeCode=e,void 0!==a._socket[C]&&(a._socket.removeListener("data",M),process.nextTick(L,a._socket),1005===e?a.close():a.close(e,t))}function P(){const e=this[C];e.isPaused||e._socket.resume()}function O(e){const t=this[C];void 0!==t._socket[C]&&(t._socket.removeListener("data",M),process.nextTick(L,t._socket),t.close(e[v])),t.emit("error",e)}function z(){this[C].emitClose()}function U(e,t){this[C].emit("message",e,t)}function J(e){const t=this[C];t._autoPong&&t.pong(e,!this._isServer,A),t.emit("ping",e)}function K(e){this[C].emit("pong",e)}function L(e){e.resume()}function D(){const e=this[C];let t;this.removeListener("close",D),this.removeListener("data",M),this.removeListener("end",j),e._readyState=x.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[C]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",z),e._receiver.on("finish",z))}function M(e){this[C]._receiver.write(e)||this.pause()}function j(){const e=this[C];e._readyState=x.CLOSING,e._receiver.end(),this.end()}function Q(){const e=this[C];this.removeListener("error",Q),this.on("error",A),e&&(e._readyState=x.CLOSING,this.destroy())}Object.defineProperty(x,"CONNECTING",{enumerable:!0,value:V.indexOf("CONNECTING")}),Object.defineProperty(x.prototype,"CONNECTING",{enumerable:!0,value:V.indexOf("CONNECTING")}),Object.defineProperty(x,"OPEN",{enumerable:!0,value:V.indexOf("OPEN")}),Object.defineProperty(x.prototype,"OPEN",{enumerable:!0,value:V.indexOf("OPEN")}),Object.defineProperty(x,"CLOSING",{enumerable:!0,value:V.indexOf("CLOSING")}),Object.defineProperty(x.prototype,"CLOSING",{enumerable:!0,value:V.indexOf("CLOSING")}),Object.defineProperty(x,"CLOSED",{enumerable:!0,value:V.indexOf("CLOSED")}),Object.defineProperty(x.prototype,"CLOSED",{enumerable:!0,value:V.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(x.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(x.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[_])return t[y];return null},set(t){for(const t of this.listeners(e))if(t[_]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[_]:!0})}})})),x.prototype.addEventListener=w,x.prototype.removeEventListener=S,e.exports=x},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},1891:e=>{"use strict";e.exports=require("dgram")},2361:e=>{"use strict";e.exports=require("events")},3292:e=>{"use strict";e.exports=require("fs/promises")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1405:e=>{"use strict";e.exports=require("inspector")},1808:e=>{"use strict";e.exports=require("net")},7742:e=>{"use strict";e.exports=require("node:process")},2477:e=>{"use strict";e.exports=require("node:stream/web")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},2764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7359:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=void 0;const o=a(7582),n=a(9913),i=o.__importDefault(a(3292)),r=a(2068),s=a(9818);a(2421);const l=a(8221),c=o.__importDefault(a(1017));let d,u=!1;t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(u)throw new Error("runEntrypoint can only be called once");u=!0;const a=process.env.MODULE_MANIFEST;if(!a)throw new Error("Module initialise is missing MODULE_MANIFEST");const o=await i.default.readFile(a),g=JSON.parse(o.toString());if(g.runtime?.api!==n.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!g.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let p=g.runtime.apiVersion;if("0.0.0"===p)try{const e=await i.default.readFile(c.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(p=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const m=process.env.CONNECTION_ID;if("string"!=typeof m||!m)throw new Error("Module initialise is missing CONNECTION_ID");const h=process.env.VERIFICATION_TOKEN;if("string"!=typeof h||!h)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const b=process.env.SENTRY_DSN,f=process.env.SENTRY_USERID,I=process.env.SENTRY_COMPANION_VERSION;b&&f&&"https://"==b.substring(0,8)?(console.log("Sentry enabled"),(0,s.init)({dsn:b,release:`${g.name}@${g.version}`,beforeSend:e=>(e.exception&&console.log("sentry","error",e.exception),e)}),(0,s.configureScope)((e=>{e.setUser({id:f}),e.setTag("companion",I)}))):console.log("Sentry disabled");const _=new l.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{_.receivedMessage(e)})),d=new e((0,r.literal)({id:m,upgradeScripts:t,_isInstanceBaseProps:!0})),_.sendWithCb("register",{apiVersion:p,connectionId:m,verificationToken:h}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))}},1972:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var o=a(9159);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return o.TCPHelper}});var n=a(6226);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return n.TelnetHelper}});var i=a(8473);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return i.UDPHelper}})},9159:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const o=a(7582).__importDefault(a(1808)),n=a(6729),i=a(609);class r extends n.EventEmitter{#e;#t;_socket;#a;#o=!1;#n=!1;#i=!1;#r;#s;get isConnected(){return this.#o}get isConnecting(){return this.#n}get isDestroyed(){return this.#i}constructor(e,t,a){super(),this.#e=e,this.#t=t,this.#a={reconnect_interval:2e3,reconnect:!0,...a},this._socket=new o.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#n=!1,this.#o=!1,this.#a.reconnect&&this.#l(),this.#c(i.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#o=!0,this.#n=!1,this.#c(i.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#o=!1,this.#c(i.InstanceStatus.Disconnected),!this.#n&&this.#a.reconnect&&this.#l(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>this.connect())),setTimeout((()=>{this.#i||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#i)throw new Error("Cannot connect destroyed socket");return!this.#n&&(this.#n=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#i||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#o)return!1;try{return new Promise(((t,a)=>{this._socket.write(e,(e=>{e?a(e):t(!0)}))}))}catch(e){this.#o=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#c(i.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#i=!0,void 0!==this.#s&&clearTimeout(this.#s),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#l(){void 0!==this.#s&&clearTimeout(this.#s),this.#s=setTimeout((()=>{this.#s=void 0,this.#c(i.InstanceStatus.Connecting),this.connect()}),this.#a.reconnect_interval)}#c(e,t){this.#r!=e&&(this.#r=e,this.emit("status_change",e,t))}}t.TCPHelper=r},6226:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const o=a(7582).__importDefault(a(6729)),n=a(2781),i=a(9159);class r extends o.default{#d;#u;get isConnected(){return this.#d.isConnected}get isConnecting(){return this.#d.isConnecting}get isDestroyed(){return this.#d.isDestroyed}constructor(e,t,a){super(),this.#d=new i.TCPHelper(e,t,a),this.#u=new s,this.#d._socket.pipe(this.#u),this.#d.on("connect",(()=>this.emit("connect"))),this.#d.on("end",(()=>this.emit("end"))),this.#d.on("error",(e=>this.emit("error",e))),this.#d.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#u.on("iac",((e,t)=>this.emit("iac",e,t))),this.#u.on("sb",(e=>this.emit("sb",e))),this.#u.on("data",(e=>this.emit("data",e))),this.#u.on("drain",(()=>this.emit("drain"))),setTimeout((()=>{this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#d.connect()}async send(e){return this.#d.send(e)}destroy(){this.#d.destroy(),this.#u.removeAllListeners(),this.#u.destroy()}}t.TelnetHelper=r;class s extends n.Transform{#g;#p;#m;constructor(e){super(e),this.#g=Buffer.alloc(0),this.#p=Buffer.alloc(0),this.#m=0}_transform(e,t,a){for(let t=0;t<e.length;++t)this.#h(e[t]);const o=this.#b();o.length&&this.push(o),a()}#h(e){if(0===this.#m){if(255===e)return void(this.#m=255);this.#g=Buffer.concat([this.#g,Buffer.from([e])])}else if(255===this.#m)switch(e){case 250:case 251:case 252:case 253:case 254:this.#m=e;break;default:this.#m=0}else{if(this.#m>=251&&this.#m<=254){let t;switch(this.#m){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#m=0)}if(250===this.#m){if(240===e)return this.emit("sb",this.#p),this.#m=0,void(this.#p=Buffer.alloc(0));this.#p=Buffer.concat([this.#p,Buffer.from([e])])}}}#b(){const e=this.#g;return this.#g=Buffer.alloc(0),e}}},8473:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const o=a(7582).__importDefault(a(1891)),n=a(6729),i=a(609);class r extends n.EventEmitter{#e;#t;#f;#a;#i=!1;#r;get isDestroyed(){return this.#i}constructor(e,t,a){super(),this.#e=e,this.#t=t,this.#a={...a},this.#f=o.default.createSocket("udp4");try{this.#f.bind(this.#a.bind_port||0,this.#a.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#a.bind_ip}:${this.#a.bind_port}`)}this.#a.broadcast&&this.#f.setBroadcast(!0),void 0!==this.#a.ttl&&this.#f.setTTL(this.#a.ttl),void 0!==this.#a.multicast_ttl&&this.#f.setMulticastTTL(this.#a.multicast_ttl),this.#f.on("error",(e=>{this.#c(i.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#f.on("listening",(()=>{this.#a.multicast_interface&&this.#f.setMulticastInterface(this.#a.multicast_interface),this.#c(i.InstanceStatus.Ok),this.emit("listening")})),this.#f.on("message",(e=>this.emit("data",e))),setTimeout((()=>{this.#i||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#i)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,a)=>{this.#f.send(e,this.#t,this.#e,(e=>{e?a(e):t()}))}))}destroy(){this.#i=!0,this.#f.removeAllListeners(),this.#f.close(),this.removeAllListeners()}#c(e,t){this.#r!=e&&(this.#r=e,this.emit("status_change",e,t))}}t.UDPHelper=r},8221:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const o=a(7582),n=a(2068),i=o.__importDefault(a(2559));t.IpcWrapper=class{#I;#_;#y;#v=1;#C=new Map;constructor(e,t,a){this.#I=e,this.#_=t,this.#y=a}async sendWithCb(e,t,a,o=0){o<=0&&(o=this.#y);const n={timeout:void 0,resolve:()=>null,reject:()=>null},r=new Promise(((e,t)=>{n.resolve=e,n.reject=t}));this.#v>268435456&&(this.#v=1);const s=this.#v++;this.#C.set(s,n),this.#_({direction:"call",name:String(e),payload:i.default.stringify(t),callbackId:s});const l=new Error("Call timed out");return n.timeout=setTimeout((()=>{n.reject(a?a():l),this.#C.delete(s)}),o),r}sendWithNoCb(e,t){this.#_({direction:"call",name:String(e),payload:i.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#I[e.name];if(!t)return void(e.callbackId&&this.#_({direction:"response",callbackId:e.callbackId,success:!1,payload:i.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?i.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#_({direction:"response",callbackId:e.callbackId,success:!0,payload:i.default.stringify(t)})}),(t=>{e.callbackId&&this.#_({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):i.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#C.get(e.callbackId);if(this.#C.delete(e.callbackId),!t)return;clearTimeout(t.timeout);const a=e.payload?i.default.parse(e.payload):void 0;if(e.success)t.resolve(a);else{let e=a;a&&"message"in a&&(e=new Error(a.message),a.stack&&(e.stack=a.stack)),t.reject(e)}break}default:(0,n.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},9913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},8049:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.literal=void 0;const o=a(7582);o.__exportStar(a(7517),t),o.__exportStar(a(4911),t),o.__exportStar(a(2764),t);var n=a(2068);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return n.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return n.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return n.splitRgb}}),Object.defineProperty(t,"splitHsl",{enumerable:!0,get:function(){return n.splitHsl}}),Object.defineProperty(t,"splitHsv",{enumerable:!0,get:function(){return n.splitHsv}}),Object.defineProperty(t,"splitHex",{enumerable:!0,get:function(){return n.splitHex}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return n.assertNever}}),o.__exportStar(a(1972),t);var i=a(7359);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return i.runEntrypoint}})},4391:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const o=a(2557);function n(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#A;#w;#S;#G=new Map;#Z=new Map;constructor(e,t,a){this.#A=e,this.#w=t,this.#S=a}async handleExecuteAction(e){const t=this.#G.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId},a)}handleUpdateActions(e){for(const[t,a]of Object.entries(e)){const e=this.#Z.get(t);if(e){const t=this.#G.get(e.actionId);if(t?.unsubscribe){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(n(e),a)).catch((t=>{this.#S("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!a||a.disabled)this.#Z.delete(t);else{this.#Z.set(t,a);const e=this.#G.get(a.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#A({text:e,controlId:a.controlId,actionInstanceId:a.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(n(a),t)).catch((e=>{this.#S("error",`Action subscribe failed: ${JSON.stringify(a)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#G.get(e.action.actionId);if(t&&t.learn){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0},a)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#G.clear();for(const[a,n]of Object.entries(e))n&&(t.push({id:a,name:n.name,description:n.description,options:(0,o.serializeIsVisibleFn)(n.options),hasLearn:!!n.learn,learnTimeout:n.learnTimeout}),this.#G.set(a,n));this.#w({actions:t})}_getAllActions(){return Array.from(this.#Z.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#Z.values());const a=new Set(e);a.size&&(t=t.filter((e=>a.has(e.actionId))));for(const e of t){const t=this.#G.get(e.actionId);if(t?.subscribe){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(n(e),a)).catch((t=>{this.#S("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#Z.values());const a=new Set(e);a.size&&(t=t.filter((e=>a.has(e.actionId))));for(const e of t){const t=this.#G.get(e.actionId);if(t&&t.unsubscribe){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(n(e),a)).catch((t=>{this.#S("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},2557:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceBaseProps=t.serializeIsVisibleFn=void 0,t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},7550:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const o=a(7582),n=a(2557),i=o.__importDefault(a(3453));function r(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#A;#B;#W;#S;#k=new Map;#V=new Map;#R=new Map;#x=new Map;#N;get parseVariablesContext(){return this.#N}constructor(e,t,a,o){this.#A=e,this.#B=t,this.#W=a,this.#S=o}getDefinitionIds(){return Array.from(this.#k.keys())}getInstanceIds(){return Array.from(this.#V.keys())}handleUpdateFeedbacks(e){for(const[t,a]of Object.entries(e)){const e=this.#V.get(t);if(e){const t=this.#k.get(e.feedbackId);if(t?.unsubscribe){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(r(t.type,e),a)).catch((t=>{this.#S("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!a||a.disabled)this.#V.delete(t);else{this.#V.set(t,{...a,referencedVariables:null});const e=this.#k.get(a.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#A({text:e,controlId:a.controlId,actionInstanceId:void 0,feedbackInstanceId:a.id})).text};Promise.resolve(e.subscribe(r(e.type,a),t)).catch((e=>{this.#S("error",`Feedback subscribe failed: ${JSON.stringify(a)} - ${e?.message??e} ${e?.stack}`)}))}this.#H(t)}}}async handleLearnFeedback(e){const t=this.#k.get(e.feedback.feedbackId);if(t&&t.learn){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},a)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#x.values())for(const a of e.variablesIds)t.changedVariables.add(a);const a=new Set;for(const e of this.#V.values())if(!this.#x.has(e.id)&&e.referencedVariables)for(const o of e.referencedVariables)if(t.has(o)){a.add(e.id);break}for(const e of a)setImmediate((()=>{this.#H(e)}))}#H(e){const t=this.#x.get(e);if(t)return void(t.needsRecheck=!0);const a=this.#V.get(e);if(!a)return;const o=a,n={needsRecheck:!1,changedVariables:new Set};this.#x.set(e,n),Promise.resolve().then((async()=>{const t=this.#k.get(o.feedbackId);let a;const n=new Set;if(t){this.#N=`Feedback ${o.feedbackId} (${e})`;const i={parseVariablesInString:async t=>{const a=await this.#A({text:t,controlId:o.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(a.variableIds&&a.variableIds.length)for(const e of a.variableIds)n.add(e);return a.text}};a="boolean"===t.type?t.callback({...r("boolean",o),type:"boolean"},i):t.callback({...r("advanced",o),type:"advanced",image:o.image},i),this.#N=void 0}const i=await a;this.#R.set(e,{id:e,controlId:o.controlId,value:i}),this.#E(),o.referencedVariables=n.size>0?Array.from(n):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(o)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#N=void 0,this.#x.delete(e);let t=!1;if(o.referencedVariables)for(const e of o.referencedVariables)if(n.changedVariables.has(e)){t=!0;break}(t||n.needsRecheck)&&setImmediate((()=>{this.#H(e)}))}))}#E=(0,i.default)((()=>{const e=this.#R;this.#R=new Map,e.size>0&&this.#B({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#k.clear();for(const[a,o]of Object.entries(e))o&&(t.push({id:a,name:o.name,description:o.description,options:(0,n.serializeIsVisibleFn)(o.options),type:o.type,defaultStyle:"boolean"===o.type?o.defaultStyle:void 0,hasLearn:!!o.learn,learnTimeout:o.learnTimeout,showInvert:"boolean"===o.type&&o.showInvert}),this.#k.set(a,o));this.#W({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,a]of this.#V.entries())this.#k.get(a.feedbackId)&&(0===t.size||t.has(a.feedbackId))&&this.#H(e)}checkFeedbacksById(e){for(const t of e)this.#H(t)}_getAllFeedbacks(){return Array.from(this.#V.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#V.values());const a=new Set(e);a.size&&(t=t.filter((e=>a.has(e.feedbackId))));for(const e of t){const t=this.#k.get(e.feedbackId);if(t?.subscribe){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(r(t.type,e),a)).catch((t=>{this.#S("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#V.values());const a=new Set(e);a.size&&(t=t.filter((e=>a.has(e.feedbackId))));for(const e of t){const t=this.#k.get(e.feedbackId);if(t&&t.unsubscribe){const a={parseVariablesInString:async t=>(await this.#A({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(r(t.type,e),a)).catch((t=>{this.#S("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},1806:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=void 0;const o=a(2068);function n(e){return JSON.parse(JSON.stringify(e))}t.runThroughUpgradeScripts=function(e,t,a,i,r,s){const l=new Map,c=e=>{let t=l.get(e);return t||(t={actions:[],feedbacks:[],config:!1},l.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??a;t&&"number"==typeof e&&c(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??a;e&&"number"==typeof t&&c(t).feedbacks.push(e.id)}if(!s)for(let e=a??-1;e<i.length;e++)c(e).config=!0;const d={},u={};let g;if(l.size>0){const s=Array.from(l.keys()).sort(),c=Math.min(...s,a??-1)+1,p=[],m=[],h=i.length;for(let a=c;a<h;a++){const s=l.get(a-1);s&&(p.push(...s.actions),m.push(...s.feedbacks));const c=!!s?.config;if(!c&&0===p.length&&0===m.length)continue;const h=g??r,b=(0,i[a])({currentConfig:n(h)},{config:c?h:null,actions:p.map((t=>{const a=e[t];if(a)return(0,o.literal)({id:a.id,controlId:a.controlId,actionId:a.actionId,options:void 0!==a.options?n(a.options):{}})})).filter((e=>!!e)),feedbacks:m.map((e=>{const a=t[e];if(a)return(0,o.literal)({id:a.id,controlId:a.controlId,feedbackId:a.feedbackId,options:void 0!==a.options?n(a.options):{},isInverted:a.isInverted})})).filter((e=>!!e))});c&&b.updatedConfig&&(g=b.updatedConfig);for(const t of b.updatedActions)if(t){const a=e[t.id];a&&(a.actionId=t.actionId,a.options=t.options,u[t.id]=a)}for(const e of b.updatedFeedbacks)if(e){const a=t[e.id];a&&(a.feedbackId=e.feedbackId,a.options=e.options,d[e.id]={...a,style:d[e.id]?.style??e.style,isInverted:e.isInverted??!1})}}for(const[t,a]of Object.entries(e))u[t]||"number"!=typeof a?.upgradeIndex||(u[t]=a);for(const[e,a]of Object.entries(t))d[e]||"number"!=typeof a?.upgradeIndex||(d[e]=a)}return{updatedActions:u,updatedFeedbacks:d,updatedConfig:g}}},7517:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=void 0;const o=a(7582).__importDefault(a(4618));t.validateManifest=function(e){const t=JSON.stringify(e);if(t.includes("companion-module-your-module-name"))throw new Error("Manifest incorrectly references template module 'companion-module-your-module-name'");if(t.includes("module-shortname"))throw new Error("Manifest incorrectly references template module 'module-shortname'");if(t.includes("A short one line description of your module"))throw new Error("Manifest incorrectly references template module 'A short one line description of your module'");if(t.includes("Your name"))throw new Error("Manifest incorrectly references template module 'Your name'");if(t.includes("Your email"))throw new Error("Manifest incorrectly references template module 'Your email'");if(t.includes("Your company"))throw new Error("Manifest incorrectly references template module 'Your company'");if(t.includes("Your product"))throw new Error("Manifest incorrectly references template module 'Your product'");if(!(0,o.default)(e)){const e=o.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}}},8322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5203:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const o=a(7582),n=a(2068),i=o.__importDefault(a(5860)),r=a(2557),s=a(1806),l=a(7550),c=a(8221),d=a(4391);t.InstanceBase=class{#T;#X;id;#Y=new i.default({concurrency:1});#F=!1;#P=!1;#O={};#z;#U;#J=new Map;#K=new Map;#a;#L;get instanceOptions(){return this.#a}get label(){return this.#L}constructor(e){if(!(0,r.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.#a={disableVariableValidation:!1},this.#T=new c.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#T.receivedMessage(e)})),this.#z=new d.ActionManager((async e=>this.#T.sendWithCb("parseVariablesInString",e)),(e=>this.#T.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#U=new l.FeedbackManager((async e=>this.#T.sendWithCb("parseVariablesInString",e)),(e=>this.#T.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#T.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#X=e.upgradeScripts,this.id=e.id,this.#L=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#Y.add((async()=>{if(this.#F)throw new Error("Already initialized");const t=e.actions,a=e.feedbacks;if(this.#O=e.config,this.#L=e.label,e.isFirstInit){const t={},a=this.getConfigFields();for(const e of a)"default"in e&&(t[e.id]=e.default);this.#O=t,this.saveConfig(this.#O),e.lastUpgradeIndex=this.#X.length-1}const{updatedActions:o,updatedFeedbacks:n,updatedConfig:i}=(0,s.runThroughUpgradeScripts)(t,a,e.lastUpgradeIndex,this.#X,this.#O,!1);this.#O=i??this.#O;const r=this.#T.sendWithCb("upgradedItems",{updatedActions:o,updatedFeedbacks:n});try{await this.init(this.#O,!!e.isFirstInit),this.#F=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await r}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:a},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#X.length-1,updatedConfig:this.#O}}))}async _handleDestroy(){await this.#Y.add((async()=>{if(!this.#F)throw new Error("Not initialized");await this.destroy(),this.#F=!1}))}async _handleConfigUpdateAndLabel(e){await this.#Y.add((async()=>{if(!this.#F)throw new Error("Not initialized");this.#L=e.label,this.#O=e.config,await this.configUpdated(this.#O)}))}async _handleExecuteAction(e){return this.#z.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,s.runThroughUpgradeScripts)({},e.feedbacks,null,this.#X,this.#O,!0);this.#T.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#U.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,s.runThroughUpgradeScripts)(e.actions,{},null,this.#X,this.#O,!0);this.#T.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#z.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,r.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#z.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#U.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#P)return}else if(!this.#P)return;if(!this.handleStartStopRecordActions)throw this.#P=!1,new Error("Recording actions is not supported by this module!");this.#P=e.recording,this.handleStartStopRecordActions(this.#P)}async _handleVariablesChanged(e){this.#U.handleVariablesChanged(e)}saveConfig(e){this.#O=e,this.#T.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#z.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#U.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[a,o]of Object.entries(e))o&&t.push({...o,id:a});this.#T.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[],a=[];this.#J.clear();for(const o of e)t.push({id:o.variableId,name:o.name}),this.#J.set(o.variableId,o),this.#K.has(o.variableId)||(this.#K.set(o.variableId,""),a.push({id:o.variableId,value:""}));if(!this.#a.disableVariableValidation){const e=new Set(this.#J.keys());for(const t of this.#K.keys())e.has(t)||(this.#K.delete(t),a.push({id:t,value:void 0}))}this.#T.sendWithNoCb("setVariableDefinitions",{variables:t,newValues:a})}setVariableValues(e){const t=[];for(const[a,o]of Object.entries(e))this.#a.disableVariableValidation?(void 0===o?this.#K.delete(a):this.#K.set(a,o),t.push({id:a,value:o})):this.#J.has(a)?(this.#K.set(a,o??""),t.push({id:a,value:o??""})):t.push({id:a,value:void 0});this.#T.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#K.get(e)}async parseVariablesInString(e){const t=this.#U.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#T.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#U.checkFeedbacks(e)}checkFeedbacksById(...e){this.#U.checkFeedbacksById(e)}_getAllActions(){return this.#z._getAllActions()}subscribeActions(...e){this.#z.subscribeActions(e)}unsubscribeActions(...e){this.#z.unsubscribeActions(e)}_getAllFeedbacks(){return this.#U._getAllFeedbacks()}subscribeFeedbacks(...e){this.#U.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#U.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#P)throw new Error("Not currently recording actions");this.#T.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options})}setCustomVariableValue(e,t){this.#T.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,a,o){this.#T.sendWithNoCb("send-osc",(0,n.literal)({host:e,port:t,path:a,args:o}))}updateStatus(e,t){this.#T.sendWithNoCb("set-status",(0,n.literal)({status:e,message:t??null}))}log(e,t){this.#T.sendWithNoCb("log-message",(0,n.literal)({level:e,message:t}))}}},9051:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},609:(e,t)=>{"use strict";var a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,(o=t.InstanceStatus||(t.InstanceStatus={})).Ok="ok",o.Connecting="connecting",o.Disconnected="disconnected",o.ConnectionFailure="connection_failure",o.BadConfig="bad_config",o.UnknownError="unknown_error",o.UnknownWarning="unknown_warning",(a=t.Regex||(t.Regex={})).IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",a.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",a.BOOLEAN="/^(true|false|0|1)$/i",a.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",a.MAC_ADDRESS="/^(?:[a-fA-F0-9]{2}:){5}([a-fA-F0-9]{2})$/",a.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",a.FLOAT="/^([0-9]*\\.)?[0-9]+$/",a.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",a.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",a.NUMBER="/^\\d+$/",a.SIGNED_NUMBER="/^[+-]?\\d+$/",a.SOMETHING="/^.+$/",a.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"},4334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4911:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=a(7582);o.__exportStar(a(8322),t),o.__exportStar(a(5203),t),o.__exportStar(a(9051),t),o.__exportStar(a(609),t),o.__exportStar(a(4334),t),o.__exportStar(a(2490),t),o.__exportStar(a(3646),t),o.__exportStar(a(3558),t),o.__exportStar(a(4788),t),o.__exportStar(a(521),t),o.__exportStar(a(6870),t)},3646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=t.CreateConvertToBooleanFeedbackUpgradeScript=t.EmptyUpgradeScript=void 0,t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}),t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,a)=>{const o=[];for(const t of a.feedbacks){let a=e[t.feedbackId];if(!0===a&&(a={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),a){t.style||(t.style={});for(const[e,n]of Object.entries(a))void 0!==t.options[e]&&(t.style[n]=t.options[e],delete t.options[e],o.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:o}}},t.CreateUseBuiltinInvertForFeedbacksUpgradeScript=function(e){return(t,a)=>{const o=[];for(const t of a.feedbacks){const a=e[t.feedbackId];if("string"!=typeof a)continue;const n=t.options[a];void 0!==n&&(delete t.options[a],t.isInverted="true"===n||!0===n||Number(n)>0,o.push(t))}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:o}}}},6870:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2068:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitHex=t.splitHsv=t.splitHsl=t.splitRgb=t.combineRgb=t.assertNever=t.literal=void 0;const o=a(6872);function n(e){if("number"==typeof e)return e>16777215?{r:e>>16&255,g:e>>8&255,b:255&e,a:(255-(e>>24&255))/255}:{r:e>>16&255,g:e>>8&255,b:255&e,a:1};if("string"==typeof e&&(0,o.colord)(e).isValid()){const t=(0,o.colord)(e).toRgb();return{r:t.r,g:t.g,b:t.b,a:t.a}}return{r:0,g:0,b:0,a:1}}t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,a,o){let n=(255&e)<<16|(255&t)<<8|255&a;return o&&o>=0&&o<1&&(n+=16777216*Math.round(255*(1-o))),n},t.splitRgb=n,t.splitHsl=function(e){const t=n(e);return(0,o.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsl()},t.splitHsv=function(e){const t=n(e);return(0,o.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHsv()},t.splitHex=function(e){const t=n(e);return(0,o.colord)(`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`).toHex()}},4618:(e,t,a)=>{"use strict";e.exports=s,e.exports.default=s;const o={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{$schema:{type:"string"},id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18"},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"}},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}},bonjourQueries:{type:"object",description:"If the device or software for your module supports bonjour announcements, Companion will offer an easy way to watch for these announcements.\nEach query you define must have a matching config field of type 'bonjour-device' with the same name",patternProperties:{"":{type:"object",title:"ModuleBonjourQuery",description:"",properties:{type:{type:"string"},protocol:{type:"string",enum:["tcp","udp"]},txt:{type:"object",description:"Match on any txt values returned in the query. This is useful to filter out devices of the same 'type' that are not supported",patternProperties:{"":{type:"string"}},additionalProperties:!1}},required:["type","protocol"],additionalProperties:!1}},additionalProperties:!1}},additionalProperties:!1,required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"]},n=Object.prototype.hasOwnProperty,i=a(7056).Z,r=new RegExp("","u");function s(e,{instancePath:t="",parentData:a,parentDataProperty:l,rootData:c=e}={}){if(!e||"object"!=typeof e||Array.isArray(e))return s.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let a;if(void 0===e.id&&(a="id")||void 0===e.name&&(a="name")||void 0===e.shortname&&(a="shortname")||void 0===e.description&&(a="description")||void 0===e.version&&(a="version")||void 0===e.license&&(a="license")||void 0===e.repository&&(a="repository")||void 0===e.bugs&&(a="bugs")||void 0===e.maintainers&&(a="maintainers")||void 0===e.legacyIds&&(a="legacyIds")||void 0===e.runtime&&(a="runtime")||void 0===e.manufacturer&&(a="manufacturer")||void 0===e.products&&(a="products")||void 0===e.keywords&&(a="keywords"))return s.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;{const a=0;for(const a in e)if(!n.call(o.properties,a))return s.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(0===a){if(void 0!==e.$schema){const a=0;if("string"!=typeof e.$schema)return s.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=0===a}else d=!0;if(d){if(void 0!==e.id){const a=0;if("string"!=typeof e.id)return s.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.name){const a=0;if("string"!=typeof e.name)return s.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.shortname){const a=0;if("string"!=typeof e.shortname)return s.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.description){const a=0;if("string"!=typeof e.description)return s.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.version){const a=0;if("string"!=typeof e.version)return s.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.license){const a=0;if("string"!=typeof e.license)return s.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.repository){const a=0;if("string"!=typeof e.repository)return s.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.bugs){const a=0;if("string"!=typeof e.bugs)return s.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.maintainers){let a=e.maintainers;const o=0;if(0===o){if(!Array.isArray(a))return s.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var u=!0;const e=a.length;for(let o=0;o<e;o++){let e=a[o];const n=0;if(0===n){if(!e||"object"!=typeof e||Array.isArray(e))return s.errors=[{instancePath:t+"/maintainers/"+o,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let a;if(void 0===e.name&&(a="name"))return s.errors=[{instancePath:t+"/maintainers/"+o,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;if(void 0!==e.name){const a=0;if("string"!=typeof e.name)return s.errors=[{instancePath:t+"/maintainers/"+o+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=0===a}else g=!0;if(g){if(void 0!==e.email){const a=0;if("string"!=typeof e.email)return s.errors=[{instancePath:t+"/maintainers/"+o+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=0===a}else g=!0;if(g)if(void 0!==e.github){const a=0;if("string"!=typeof e.github)return s.errors=[{instancePath:t+"/maintainers/"+o+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;g=0===a}else g=!0}}}if(!(u=0===n))break}if(u){let e,o=a.length;if(o>1)for(;o--;)for(e=o;e--;)if(i(a[o],a[e]))return s.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:o,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+o+" are identical)"}],!1}}}d=0===o}else d=!0;if(d){if(void 0!==e.legacyIds){let a=e.legacyIds;const o=0;if(0===o){if(!Array.isArray(a))return s.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var p=!0;const e=a.length;for(let o=0;o<e;o++){const e=0;if("string"!=typeof a[o])return s.errors=[{instancePath:t+"/legacyIds/"+o,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(p=0===e))break}if(p){let e,o=a.length;if(o>1){const n={};for(;o--;){let i=a[o];if("string"==typeof i){if("number"==typeof n[i])return e=n[i],s.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:o,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+o+" are identical)"}],!1;n[i]=o}}}}}}d=0===o}else d=!0;if(d){if(void 0!==e.runtime){let a=e.runtime;const n=0;if(0===n){if(!a||"object"!=typeof a||Array.isArray(a))return s.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===a.type&&(e="type")||void 0===a.api&&(e="api")||void 0===a.apiVersion&&(e="apiVersion")||void 0===a.entrypoint&&(e="entrypoint"))return s.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==a.type){const e=0;if("string"!=typeof a.type)return s.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=0===e}else m=!0;if(m){if(void 0!==a.api){let e=a.api;const n=0;if("string"!=typeof e)return s.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return s.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:o.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;m=0===n}else m=!0;if(m){if(void 0!==a.apiVersion){const e=0;if("string"!=typeof a.apiVersion)return s.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=0===e}else m=!0;if(m)if(void 0!==a.entrypoint){const e=0;if("string"!=typeof a.entrypoint)return s.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;m=0===e}else m=!0}}}}d=0===n}else d=!0;if(d){if(void 0!==e.manufacturer){const a=0;if("string"!=typeof e.manufacturer)return s.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===a}else d=!0;if(d){if(void 0!==e.products){let a=e.products;const o=0;if(0===o){if(!Array.isArray(a))return s.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=a.length;for(let o=0;o<e;o++){const e=0;if("string"!=typeof a[o])return s.errors=[{instancePath:t+"/products/"+o,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(h=0===e))break}if(h){let e,o=a.length;if(o>1){const n={};for(;o--;){let i=a[o];if("string"==typeof i){if("number"==typeof n[i])return e=n[i],s.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:o,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+o+" are identical)"}],!1;n[i]=o}}}}}}d=0===o}else d=!0;if(d){if(void 0!==e.keywords){let a=e.keywords;const o=0;if(0===o){if(!Array.isArray(a))return s.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var b=!0;const e=a.length;for(let o=0;o<e;o++){const e=0;if("string"!=typeof a[o])return s.errors=[{instancePath:t+"/keywords/"+o,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b=0===e))break}if(b){let e,o=a.length;if(o>1){const n={};for(;o--;){let i=a[o];if("string"==typeof i){if("number"==typeof n[i])return e=n[i],s.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:o,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+o+" are identical)"}],!1;n[i]=o}}}}}}d=0===o}else d=!0;if(d)if(void 0!==e.bonjourQueries){let a=e.bonjourQueries;const n=0;if(0===n){if(!a||"object"!=typeof a||Array.isArray(a))return s.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const e=0;for(const e in a)if(!r.test(e))return s.errors=[{instancePath:t+"/bonjourQueries",schemaPath:"#/properties/bonjourQueries/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(0===e)for(const e in a)if(r.test(e)){let n=a[e];const i=0;if(0===i){if(!n||"object"!=typeof n||Array.isArray(n))return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let a;if(void 0===n.type&&(a="type")||void 0===n.protocol&&(a="protocol"))return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;{const a=0;for(const a in n)if("type"!==a&&"protocol"!==a&&"txt"!==a)return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(0===a){if(void 0!==n.type){const a=0;if("string"!=typeof n.type)return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=0===a}else f=!0;if(f){if(void 0!==n.protocol){let a=n.protocol;const i=0;if("string"!=typeof a)return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("tcp"!==a&&"udp"!==a)return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/protocol",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/protocol/enum",keyword:"enum",params:{allowedValues:o.properties.bonjourQueries.patternProperties[""].properties.protocol.enum},message:"must be equal to one of the allowed values"}],!1;f=0===i}else f=!0;if(f)if(void 0!==n.txt){let a=n.txt;const o=0;if(0===o){if(!a||"object"!=typeof a||Array.isArray(a))return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/txt/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const o=0;for(const o in a)if(!r.test(o))return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt",schemaPath:"#/properties/bonjourQueries/patternProperties//properties/txt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:o},message:"must NOT have additional properties"}],!1;if(0===o)for(const o in a)if(r.test(o)){const n=0;if("string"!=typeof a[o])return s.errors=[{instancePath:t+"/bonjourQueries/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/txt/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/bonjourQueries/patternProperties//properties/txt/patternProperties//type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(0!==n)break}}}f=0===o}else f=!0}}}}}if(0!==i)break}}}d=0===n}else d=!0}}}}}}}}}}}}}}}}}return s.errors=null,!0}},3453:(e,t,a)=>{"use strict";const o=a(4341);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:a=0,maxWait:n=0,before:i=!1,after:r=!0}=t;if(!i&&!r)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let s,l,c;const d=function(...t){const o=this,d=i&&!s;return clearTimeout(s),s=setTimeout((()=>{s=void 0,l&&(clearTimeout(l),l=void 0),r&&(c=e.apply(o,t))}),a),n>0&&!l&&r&&(l=setTimeout((()=>{l=void 0,s&&(clearTimeout(s),s=void 0),c=e.apply(o,t)}),n)),d&&(c=e.apply(o,t)),c};return o(d,e),d.cancel=()=>{s&&(clearTimeout(s),s=void 0),l&&(clearTimeout(l),l=void 0)},d}},7135:(e,t,a)=>{if(!globalThis.ReadableStream)try{const e=a(7742),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,a(2477)),e.emitWarning=t}catch(a){throw e.emitWarning=t,a}}catch(e){Object.assign(globalThis,a(2660))}try{const{Blob:e}=a(4300);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const a=this;return new ReadableStream({type:"bytes",async pull(e){const o=a.slice(t,Math.min(a.size,t+65536)),n=await o.arrayBuffer();t+=n.byteLength,e.enqueue(new Uint8Array(n)),t===a.size&&e.close()}})})}catch(e){}},1260:(e,t,a)=>{"use strict";var o=a(8049);const n=(...e)=>e.reduce(((e,t)=>({...e,...t})));function i(e,t){let a=Buffer.from(e,"binary").toString("hex"),o=parseInt(a,16)+parseInt(t,16);return String.fromCharCode(o.toString())}function r(e,t,a,o){let n=[],i=o/e;for(let o=e;o>=t;o-=a){let e=o<0?(i*o>>>0).toString(16).slice(4):("0000"+Math.round(i*o).toString(16)).slice(-4);n.push({id:e,label:o+String.fromCharCode(176)})}return n}function s(e,t,a,o){let n=[],i=o/(e-1);for(let o=e;o>=t;o-=a){let e=("0000"+Math.round(i*(o-1)).toString(16)).slice(-4);n.push({id:e,label:o+"X"})}return n}function l(e,t){if(Array.isArray(e))return t?(t=~~parseInt("f"==t[0]?"FFFF"+t:t,16),e.reduce(((e,a)=>{let o=~~parseInt("f"==e.id[0]?"FFFF"+e.id:e.id,16),n=~~parseInt("f"==a.id[0]?"FFFF"+a.id:a.id,16);return Math.abs(n-t)<Math.abs(o-t)?a:e})).label):"0"+String.fromCharCode(176)}function c(e){return i("\0",e[0])+i("\0",e[1])+i("\0",e[2])+i("\0",e[3])}function d(e,t){let a=e[1].name,o=t[1].name;return a<o?-1:a>o?1:0}function u(e,t){let a=e[1].label,o=t[1].label;return a<o?-1:a>o?1:0}function g(e,t,a){const o=[];let n=Object.entries(e).filter((e=>(e[1].camera.includes(a)||e[1].camera.includes("All"))&&e[1].firmware.includes(t)&&e[1]?.variableId));return n.sort(d),n.forEach((e=>o.push({name:e[1].name,variableId:e[1].variableId}))),o}function p(e,t,a){const o=[];let i=Object.entries(e).filter((e=>(e[1].camera.includes(a)||e[1].camera.includes("All"))&&e[1].firmware.includes(t)&&e[1]?.action));return i.sort(d),i.forEach((e=>o.push({[e[0]]:n({name:e[1].name},m(e[1].action,t,a))}))),n(...o)}function m(e,t,a){let o=e.filter((e=>e.camera.includes("common"))),i=e.filter((e=>(e.camera.includes(a)||e.camera.includes("All"))&&(e.firmware?.includes(t)??!0)));return n(o[0]?.action,i[0]?.action)}function h(e,t,a){let o=Object.entries(e);return Object.fromEntries(o.filter((e=>(e[1].camera.includes(t)||e[1].camera.includes("All"))&&e[1].firmware.includes(a))))}function b(e,t){return t.filter((t=>t.id!==e&&"Toggle"!==t.id))[0].id}let f=[];for(let e=28;e<=65;e++)f.push({id:e+"00",label:e+"00k"});const I={CAMERAS:[{id:"Auto",label:"Auto Detect"},{id:"P100",label:"P100"},{id:"P110",label:"P110"},{id:"P120",label:"P120"},{id:"PF120",label:"PF120"},{id:"P200A2A3",label:"P200 A2_A3",other:["P200A2_A3"]},{id:"P200A4A5",label:"P200 A4_A5",other:["P200A4_A5"]},{id:"A200GEN1",label:"A200 GEN1"},{id:"A200GEN2",label:"A200 GEN2"},{id:"A300GEN1",label:"A300 GEN1"},{id:"A300GEN2",label:"A300 GEN2"},{id:"P240",label:"P240"},{id:"P400",label:"P400",other:["EYES P400","EYESP400"]},{id:"P4K",label:"P4K",other:["EYES P4K","EYESP4K"]}],ON_OFF:[{id:"On",label:"On"},{id:"Off",label:"Off"}],STANDBY:[{id:"on",label:"Cam On"},{id:"standby",label:"Standby"}],L_M_H:[{id:"LOW",label:"Low"},{id:"MEDIUM",label:"Medium"},{id:"HIGH",label:"High"}],L_Mid_H:[{id:"LOW",label:"Low"},{id:"MID",label:"Mid"},{id:"HIGH",label:"High"}],OFF_L_M_H:[{id:"OFF",label:"Off"},{id:"LOW",label:"Low"},{id:"MEDIUM",label:"Medium"},{id:"HIGH",label:"High"}],UP_DOWN_VALUE:[{id:"up",label:"Up"},{id:"down",label:"Down"},{id:"value",label:"Value"}],UP_DOWN_RESET_VALUE:[{id:"up",label:"Up"},{id:"down",label:"Down"},{id:"reset",label:"Reset"},{id:"value",label:"Value"}],OFF_1_to_5:[{id:"0",label:"Off"},{id:"1",label:"1"},{id:"2",label:"2"},{id:"3",label:"3"},{id:"4",label:"4"},{id:"5",label:"5"}],OFF_1_to_6:[{id:"0",label:"Off"},{id:"1",label:"1"},{id:"2",label:"2"},{id:"3",label:"3"},{id:"4",label:"4"},{id:"5",label:"5"},{id:"6",label:"6"}],IRIS_1:[{id:"0",label:"CLOSED"},{id:"1",label:"F14.0"},{id:"2",label:"F11.0"},{id:"3",label:"F9.6"},{id:"4",label:"F8.0"},{id:"5",label:"F6.8"},{id:"6",label:"F5.6"},{id:"7",label:"F4.8"},{id:"8",label:"F4.0"},{id:"9",label:"F3.4"},{id:"10",label:"F2.8"},{id:"11",label:"F2.4"},{id:"12",label:"F2.0"},{id:"13",label:"F1.8"}],IRIS_2:[{id:"4",label:"CLOSED"},{id:"5",label:"F14.0"},{id:"6",label:"F11.0"},{id:"7",label:"F9.6"},{id:"8",label:"F8.0"},{id:"9",label:"F6.8"},{id:"10",label:"F5.6"},{id:"11",label:"F4.8"},{id:"12",label:"F4.0"},{id:"13",label:"F3.4"},{id:"14",label:"F2.8"},{id:"15",label:"F2.4"},{id:"16",label:"F2.0"},{id:"17",label:"F1.6"}],IRIS_3:[{id:"0",label:"CLOSED"},{id:"5",label:"F11.0"},{id:"6",label:"F10.0"},{id:"7",label:"F9.6"},{id:"8",label:"F8.7"},{id:"9",label:"F8.0"},{id:"10",label:"F7.3"},{id:"11",label:"F6.8"},{id:"12",label:"F6.2"},{id:"13",label:"F5.6"},{id:"14",label:"F5.2"},{id:"15",label:"F4.8"},{id:"16",label:"F4.4"},{id:"17",label:"F4.0"},{id:"18",label:"F3.7"},{id:"19",label:"F3.4"},{id:"20",label:"F3.1"},{id:"21",label:"F2.8"}],IRIS_4:[{id:"5",label:"F11.0"},{id:"6",label:"F10.0"},{id:"7",label:"F9.6"},{id:"8",label:"F8.7"},{id:"9",label:"F8.0"},{id:"10",label:"F7.3"},{id:"11",label:"F6.8"},{id:"12",label:"F6.2"},{id:"13",label:"F5.6"},{id:"14",label:"F5.2"},{id:"15",label:"F4.8"},{id:"16",label:"F4.4"},{id:"17",label:"F4.0"},{id:"18",label:"F3.7"},{id:"19",label:"F3.4"},{id:"20",label:"F3.1"},{id:"21",label:"F2.8"}],GAIN_1:[{id:"0",label:"0 dB"},{id:"1",label:"2 dB"},{id:"2",label:"4 dB"},{id:"3",label:"6 dB"},{id:"4",label:"8 dB"},{id:"5",label:"10 dB"},{id:"6",label:"12 dB"},{id:"7",label:"14 dB"},{id:"8",label:"16 dB"},{id:"9",label:"18 dB"},{id:"10",label:"20 dB"},{id:"11",label:"22 dB"},{id:"12",label:"24 dB"},{id:"13",label:"26 dB"},{id:"14",label:"28 dB"},{id:"15",label:"30 dB"}],GAIN_2:[{id:"1",label:"0 dB"},{id:"2",label:"3.6 dB"},{id:"3",label:"7.1 dB"},{id:"4",label:"10.7 dB"},{id:"5",label:"14.3 dB"},{id:"6",label:"17.8 dB"},{id:"7",label:"21.4  dB"},{id:"8",label:"25 dB"},{id:"9",label:"28.6 dB"},{id:"10",label:"32.1 dB"},{id:"11",label:"35.7 dB"},{id:"12",label:"39.3 dB"},{id:"13",label:"42.8 dB"},{id:"14",label:"46.4 dB"},{id:"15",label:"50 dB"}],GAIN_3:[{id:"1",label:"0 dB"},{id:"2",label:"3 dB"},{id:"3",label:"6 dB"},{id:"4",label:"9 dB"},{id:"5",label:"12 dB"},{id:"6",label:"15 dB"},{id:"7",label:"18 dB"},{id:"8",label:"21 dB"},{id:"9",label:"24 dB"},{id:"10",label:"27 dB"},{id:"11",label:"30 dB"},{id:"12",label:"33 dB"},{id:"13",label:"36 dB"}],SHUTTER_60:[{id:"0",label:"1/1"},{id:"1",label:"1/2"},{id:"2",label:"1/4"},{id:"3",label:"1/8"},{id:"4",label:"1/15"},{id:"5",label:"1/30"},{id:"6",label:"1/60"},{id:"7",label:"1/90"},{id:"8",label:"1/100"},{id:"9",label:"1/125"},{id:"10",label:"1/180"},{id:"11",label:"1/250"},{id:"12",label:"1/350"},{id:"13",label:"1/500"},{id:"14",label:"1/725"},{id:"15",label:"1/1000"},{id:"16",label:"1/1500"},{id:"17",label:"1/2000"},{id:"18",label:"1/3000"},{id:"19",label:"1/4000"},{id:"20",label:"1/6000"},{id:"21",label:"1/10000"}],SLOW_SHUTTER_60:[{id:"6",label:"1/1"},{id:"5",label:"1/2"},{id:"4",label:"1/4"},{id:"3",label:"1/8"},{id:"2",label:"1/15"},{id:"1",label:"1/30"}],SHUTTER_50:[{id:"0",label:"1/1"},{id:"1",label:"1/2"},{id:"2",label:"1/3"},{id:"3",label:"1/6"},{id:"4",label:"1/12"},{id:"5",label:"1/25"},{id:"6",label:"1/50"},{id:"7",label:"1/75"},{id:"8",label:"1/100"},{id:"9",label:"1/120"},{id:"10",label:"1/150"},{id:"11",label:"1/215"},{id:"12",label:"1/300"},{id:"13",label:"1/425"},{id:"14",label:"1/600"},{id:"15",label:"1/1000"},{id:"16",label:"1/1250"},{id:"17",label:"1/1750"},{id:"18",label:"1/2500"},{id:"19",label:"1/3500"},{id:"20",label:"1/6000"},{id:"21",label:"1/10000"}],SLOW_SHUTTER_50:[{id:"6",label:"1/1"},{id:"5",label:"1/2"},{id:"4",label:"1/3"},{id:"3",label:"1/6"},{id:"2",label:"1/12"},{id:"1",label:"1/25"}],SHUTTER_4K_60:[{id:"6",label:"1/1"},{id:"7",label:"2/3"},{id:"8",label:"1/2"},{id:"9",label:"1/3"},{id:"10",label:"1/4"},{id:"11",label:"1/6"},{id:"12",label:"1/8"},{id:"13",label:"1/10"},{id:"14",label:"1/15"},{id:"15",label:"1/20"},{id:"16",label:"1/30"},{id:"17",label:"1/50"},{id:"18",label:"1/60"},{id:"19",label:"1/90"},{id:"20",label:"1/100"},{id:"21",label:"1/125"},{id:"22",label:"1/180"},{id:"23",label:"1/250"},{id:"24",label:"1/350"},{id:"25",label:"1/500"},{id:"26",label:"1/725"},{id:"27",label:"1/1000"},{id:"28",label:"1/1500"},{id:"29",label:"1/2000"},{id:"30",label:"1/3000"},{id:"31",label:"1/4000"},{id:"32",label:"1/6000"},{id:"33",label:"1/10000"}],SLOW_SHUTTER_4K_60:[{id:"6",label:"1/1"},{id:"7",label:"2/3"},{id:"8",label:"1/2"},{id:"9",label:"1/3"},{id:"10",label:"1/4"},{id:"11",label:"1/6"},{id:"12",label:"1/8"},{id:"13",label:"1/10"},{id:"14",label:"1/15"},{id:"15",label:"1/20"},{id:"16",label:"1/30"},{id:"17",label:"1/50"}],SHUTTER_4K_50:[{id:"6",label:"1/1"},{id:"7",label:"2/3"},{id:"8",label:"1/2"},{id:"9",label:"1/3"},{id:"10",label:"1/4"},{id:"11",label:"1/6"},{id:"12",label:"1/8"},{id:"13",label:"1/12"},{id:"14",label:"1/15"},{id:"15",label:"1/20"},{id:"16",label:"1/25"},{id:"17",label:"1/30"},{id:"18",label:"1/50"},{id:"19",label:"1/60"},{id:"20",label:"1/100"},{id:"21",label:"1/120"},{id:"22",label:"1/150"},{id:"23",label:"1/215"},{id:"24",label:"1/300"},{id:"25",label:"1/425"},{id:"26",label:"1/600"},{id:"27",label:"1/1000"},{id:"28",label:"1/1250"},{id:"29",label:"1/1750"},{id:"30",label:"1/2500"},{id:"31",label:"1/3500"},{id:"32",label:"1/6000"},{id:"33",label:"1/10000"}],SLOW_SHUTTER_4K_50:[{id:"6",label:"1/1"},{id:"7",label:"2/3"},{id:"8",label:"1/2"},{id:"9",label:"1/3"},{id:"10",label:"1/4"},{id:"11",label:"1/6"},{id:"12",label:"1/8"},{id:"13",label:"1/12"},{id:"14",label:"1/15"},{id:"15",label:"1/20"},{id:"16",label:"1/25"},{id:"17",label:"1/30"}],SHUTTER_4K_24:[{id:"6",label:"1/1"},{id:"7",label:"2/3"},{id:"8",label:"1/2"},{id:"9",label:"1/3"},{id:"10",label:"1/4"},{id:"11",label:"1/6"},{id:"12",label:"1/8"},{id:"13",label:"1/12"},{id:"14",label:"1/20"},{id:"15",label:"1/24"},{id:"16",label:"1/25"},{id:"17",label:"1/40"},{id:"18",label:"1/48"},{id:"19",label:"1/50"},{id:"20",label:"1/60"},{id:"21",label:"1/96"},{id:"22",label:"1/100"},{id:"23",label:"1/120"},{id:"24",label:"1/144"},{id:"25",label:"1/192"},{id:"26",label:"1/200"},{id:"27",label:"1/288"},{id:"28",label:"1/400"},{id:"29",label:"1/576"},{id:"30",label:"1/1200"},{id:"31",label:"1/2400"},{id:"32",label:"1/4800"},{id:"33",label:"1/10000"}],SLOW_SHUTTER_4K_24:[{id:"6",label:"1/1"},{id:"7",label:"2/3"},{id:"8",label:"1/2"},{id:"9",label:"1/3"},{id:"10",label:"1/4"},{id:"11",label:"1/6"},{id:"12",label:"1/8"},{id:"13",label:"1/12"},{id:"14",label:"1/20"},{id:"15",label:"1/24"},{id:"16",label:"1/25"},{id:"17",label:"1/40"}],SPEED_CHANGES:[{id:"up",label:"Speed Up"},{id:"down",label:"Speed Down"},{id:"value",label:"Speed Value"}],SPEED_TYPE:[{id:"standard",label:"Standard"},{id:"advanced",label:"Super Fine"}],PTZ_DIRECTION:[{id:"left",label:"Left"},{id:"right",label:"Right"},{id:"up",label:"Up"},{id:"down",label:"Down"},{id:"up_left",label:"Up Left"},{id:"up_right",label:"Up Right"},{id:"down_left",label:"Down Left"},{id:"down_right",label:"Down Right"},{id:"stop",label:"P/T Stop"},{id:"home",label:"P/T Home"},{id:"direct",label:"Direct"}],PTZ_ZOOM:[{id:"in",label:"Zoom In"},{id:"out",label:"Zoom Out"},{id:"direct",label:"Zoom Direct"},{id:"stop",label:"Zoom Stop"}],POS_PAN_P100:r(175,-175,5,2266),POS_PAN_P200:r(175,-175,5,1659),POS_TILT:r(90,-30,5,1181),POS_ZOOM_10:s(10,1,1,16384),POS_ZOOM_12:s(12,1,1,16384),POS_ZOOM_20:s(20,1,1,16384),POS_ZOOM_30:s(30,1,1,16384),PRESET_MODE:[{id:"Camera",label:"Camera"},{id:"Birddog",label:"PTZ Only"}],AUTO_FOCUS:[{id:"Auto",label:"Auto Focus"},{id:"Manual",label:"Manual"}],FOCUS_CONTROL:[{id:"near",label:"Focus Near"},{id:"far",label:"Focus Far"},{id:"stop",label:"Focus Stop"},{id:"trigger",label:"Focus One Push Auto"}],ANALOG_AUDIO_OUTPUT:[{id:"DecodeComms",label:"Comms"},{id:"DecodeLoop",label:"Loop"}],VIDEO_OUTPUT:[{id:"NormalMode",label:"Normal"},{id:"LowLatency",label:"Low Latency"}],ENCODE_TXPM:[{id:"Multicast",label:"Multicast"},{id:"TCP",label:"TCP"},{id:"Multi-TCP",label:"Multi-TCP"},{id:"UDP",label:"UDP"},{id:"RUDP",label:"RUDP"}],ENCODE_NDI_AUDIO:[{id:"NDIAudioAnalog",label:"Analog"},{id:"NDIAudioMute",label:"Mute"}],ENCODE_BANDWIDTH_MODE:[{id:"Manual",label:"Manual"},{id:"NDIManaged",label:"NDI Managed"}],ENCODE_NDIGroup:[{id:"NDIGroupEn",label:"Enabled"},{id:"NDIGroupDis",label:"Disabled"}],TALLY_MODE:[{id:"TallyOn",label:"Tally On"},{id:"TallyOff",label:"Tally Off"}],SCREEN_SAVER_MODE:[{id:"BirdDogSS",label:"BirdDog"},{id:"BlackSS",label:"Black"},{id:"CaptureSS",label:"Capture"}],NDI_DIS_SVR:[{id:"NDIDisServEn",label:"On"},{id:"NDIDisServDis",label:"Off"}],EXP_MODE_1:[{id:"FULL-AUTO",label:"FULL-AUTO"},{id:"MANUAL",label:"MANUAL"},{id:"SHUTTER-PRI",label:"SHUTTER-PRI"},{id:"IRIS-PRI",label:"IRIS-PRI"},{id:"BRIGHT",label:"BRIGHT"}],EXP_MODE_2:[{id:"FULL-AUTO",label:"FULL-AUTO"},{id:"MANUAL",label:"MANUAL"},{id:"SHUTTER-PRI",label:"SHUTTER-PRI"},{id:"IRIS-PRI",label:"IRIS-PRI"}],EXP_MODE_3:[{id:"FULL-AUTO",label:"FULL-AUTO"},{id:"MANUAL",label:"MANUAL"},{id:"SHUTTER-PRI",label:"SHUTTER-PRI"},{id:"IRIS-PRI",label:"IRIS-PRI"},{id:"BRIGHT",label:"BRIGHT"},{id:"GAIN-PRI",label:"GAIN-PRI"}],WB_MODE_1:[{id:"AUTO",label:"Auto"},{id:"INDOOR",label:"Indoor"},{id:"OUTDOOR",label:"Outdoor"},{id:"ONEPUSH",label:"One Push Mode"},{id:"ATW",label:"ATW"},{id:"USER",label:"User"},{id:"MANUAL2",label:"Manual 2"}],WB_MODE_1b:[{id:"AUTO",label:"Auto"},{id:"INDOOR",label:"Indoor"},{id:"OUTDOOR",label:"Outdoor"},{id:"ONEPUSH",label:"One Push Mode"},{id:"ATW",label:"ATW"},{id:"USER",label:"User"},{id:"MANUAL2",label:"Manual 2"}],WB_MODE_2:[{id:"AUTO",label:"Auto"},{id:"INDOOR",label:"Indoor"},{id:"OUTDOOR",label:"Outdoor"},{id:"OUTDOOR-AUTO",label:"Outdoor Auto"},{id:"ONEPUSH",label:"One Push Mode"},{id:"ATW",label:"ATW"},{id:"USER",label:"User"},{id:"SLV-AUTO",label:"Sodium Lamp Auto"},{id:"SLV",label:"Sodium Lamp"},{id:"SLV-OUTDOOR-AUTO",label:"Sodium Lamp Outdoor Auto"}],WB_SELECT:[{id:"FL LIGHT",label:"FL LIGHT"},{id:"STD",label:"STD"},{id:"OFF",label:"OFF"},{id:"HIGH SAT",label:"HIGH SAT"}],COLOR_TEMP:f,PICTURE_EFFECT:[{id:"BW",label:"B&W"},{id:"Off",label:"Off"}],IR_CUT_FILTER_1:[{id:"Auto",label:"Auto"},{id:"On",label:"On"},{id:"Off",label:"Off"}],IR_CUT_FILTER_2:[{id:"On",label:"On"},{id:"Off",label:"Off"}],IR_CUT_FILTER_3:[{id:"NoiseReduction",label:"Noise Reduction"}],BRIGHTNESS_COMP:[{id:"VERY DARK",label:"Very Dark"},{id:"DARK",label:"Dark"},{id:"STANDARD",label:"Standard"},{id:"BRIGHT",label:"Bright"}],BANDWIDTH_4K:[{id:"DEFAULT",label:"Default"},{id:"LOW",label:"Low"},{id:"MIDDLE",label:"Middle"},{id:"HIGH",label:"High"},{id:"WIDE",label:"Wide"}],BW_BALANCE_4K:[{id:"TYPE1",label:"Type 1"},{id:"TYPE2",label:"Type 2"},{id:"TYPE3",label:"Type 3"},{id:"TYPE4",label:"Type 4"},{id:"TYPE5",label:"Type 5"}],GAMMA_SETTINGS:[{id:"PATTERN",label:"Pattern"},{id:"STANDARD",label:"Standard"},{id:"STRAIGHT",label:"Straight"}],SCOPE_MODE:[{id:"Histogram",label:"Histogram"},{id:"Waveform",label:"Waveform"},{id:"RGBParade",label:"RGB Parade"},{id:"Vectorscope",label:"Vectorscope"}],SCOPE_POSITION:[{id:"TopLeft",label:"Top Left"},{id:"TopRight",label:"Top Right"},{id:"BottomLeft",label:"Bottom Left"},{id:"BottomRight",label:"Bottom Right"}],SCOPE_SIZE:[{id:"Off",label:"Small"},{id:"On",label:"Large"}]},_={about:{camera:["All"],firmware:["4","5"]},analogaudiosetup:{camera:["All"],firmware:["4","5"]},devicesettings:{camera:["All"],firmware:["5"]},videooutputinterface:{camera:["P240","P400","P4K"],firmware:["4","5"]},encodesetup:{camera:["All"],firmware:["4","5"]},encodetransport:{camera:["All"],firmware:["4","5"]},NDIDisServer:{camera:["All"],firmware:["4","5"]},birddogptzsetup:{camera:["All"],firmware:["4","5"]},recallPost:{camera:["All"],firmware:["4","5"]},savePost:{camera:["All"],firmware:["4","5"]},pt_pos:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"]},birddogexpsetup:{camera:["All"],firmware:["4","5"]},birddogwbsetup:{camera:["All"],firmware:["4","5"]},birddogpicsetup:{camera:["All"],firmware:["4","5"]},birddogcmsetup:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"]},birddogadvancesetup:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"]},birddogexternalsetup:{camera:["A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"]},birddogdetsetup:{camera:["P240","P400","P4K"],firmware:["4","5"]},birddoggammasetup:{camera:["P240","P400","P4K"],firmware:["4","5"]},birddogscope:{camera:["All"],firmware:["5"]}},y={firmware:{camera:["All"],firmware:["4","5"],store_state:!0,variableId:"firmware",name:"General - Firmware"},firmware_version:{camera:["All"],firmware:["5"],api_endpoint:["about"],api_variable:["FirmwareVersion"],store_state:!0},mcu_version:{camera:["All"],firmware:["5"],api_endpoint:["about"],api_variable:["MCUVersion"],store_state:!0},format:{camera:["All"],firmware:["5"],api_endpoint:["about"],api_variable:["Format"],store_state:!0},framerate:{camera:["All"],firmware:["4","5"],store_state:!0},hostname:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["about"],api_variable:["HostName"],variableId:"hostname",name:"General - Name"},ipaddress:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["about"],api_variable:["IPAddress"],variableId:"ipaddress",name:"General - IP Address"},gateway:{camera:["All"],firmware:["5"],api_endpoint:["about"],api_variable:["GateWay"],store_state:!0},model:{camera:["All"],firmware:["4","5"],store_state:!0,variableId:"model",name:"General - Model"},netmask:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["about"],api_variable:["NetworkMask"],variableId:"netmask",name:"General - Network Mask"},network_config:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["about"],api_variable:["NetworkConfigMethod"],variableId:"network_config",name:"General - Network Config Method"},serial_number:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["about"],api_variable:["SerialNumber"],variableId:"serial_number",name:"General - Serial Number"},status:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["about"],api_variable:["Status"],variableId:"status",name:"General - Status"},freeze:{camera:["All"],firmware:["4"],store_state:!0,variableId:"freeze",name:"VISCA - Freeze",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},standby:{camera:["All"],firmware:["4","5"],store_state:!0,variableId:"standby",name:"VISCA - Standby",action:[{camera:["common"],action:{choices:I.STANDBY,default:"on"}}]},analogAudioInGain:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["analogaudiosetup"],api_variable:["AnalogAudioInGain"],variableId:"audio_in_gain",name:"Analog Audio - Audio In Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-50,max:50,default:0}}}]},analogAudioOutGain:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["analogaudiosetup"],api_variable:["AnalogAudioOutGain"],variableId:"audio_out_gain",name:"Analog Audio - Audio Out Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-50,max:50,default:0}}}]},analogAudioOutput:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["analogaudiosetup"],api_variable:["AnalogAudiooutputselect"],variableId:"audio_output",name:"Analog Audio - Audio Output",action:[{camera:["common"],action:{choices:I.ANALOG_AUDIO_OUTPUT,default:"DecodeComms"}}]},oled:{camera:["P110","P120"],firmware:["5"],store_state:!0,api_endpoint:["devicesettings"],api_variable:["Oled"],variableId:"oled",name:"Device Settings - OLED"},video_output:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["videooutputinterface"],api_variable:["videooutput"],variableId:"video_output",name:"Video Output - Video Mode",action:[{camera:["common"],action:{choices:I.VIDEO_OUTPUT,default:"NormalMode"}}]},bandwidth_mode:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["BandwidthMode"],variableId:"bandwidth_mode",name:"Encode Setup - Bandwidth Mode",action:[{camera:["common"],action:{choices:I.ENCODE_BANDWIDTH_MODE,default:"NDIManaged"}}]},bandwidth_select:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["BandwidthSelect"],variableId:"bandwidth_select",name:"Encode Setup - Bandwidth Select",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:80,max:180,default:80}}}]},capture_screensaver:{camera:["All"],firmware:["5"],name:"Encode - Capture Screensaver",action:[{camera:["common"],action:!0}]},color_bitdepth:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["ColorBitDepth"],variableId:"color_bitdepth",name:"Encode Setup - Color Bit Depth"},genlock:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["GenLock"]},loopTally:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["LoopTally"]},ndiAudio:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["NDIAudio"],variableId:"ndi_audio",name:"Encode Setup - NDI Audio",action:[{camera:["common"],action:{choices:I.ENCODE_NDI_AUDIO,default:"NDIAudioMute"}}]},ndiGroupEnable:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["NDIGroup"],variableId:"ndi_group",name:"Encode Setup - NDI Group",action:[{camera:["common"],action:{choices:I.ENCODE_NDIGroup,default:"NDIGroupDis"}}]},ndi_group_name:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["NDIGroupName"],variableId:"ndi_group_name",name:"Encode Setup - NDI Group Name"},screensaver_mode:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["ScreenSaverMode"],variableId:"screensaver_mode",name:"Encode Setup - Screensaver Mode",action:[{camera:["common"],action:{choices:I.SCREEN_SAVER_MODE,default:"BirdDogSS"}}]},stream_name:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["StreamName"],variableId:"stream_name",name:"Encode Setup - Stream Name"},stream_to_network:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["StreamToNetwork"],variableId:"stream_to_network",name:"Encode Setup - Stream to Network",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},tally_mode:{camera:["P110","P120","PF120","P200A2A3","P200A4A5","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["TallyMode"],variableId:"tally_mode",name:"Encode Setup - Tally Mode",action:[{camera:["common"],action:{choices:I.TALLY_MODE,default:"TallyOn"}}]},video_csc:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["VideoCSC"],variableId:"video_csc",name:"Encode Setup - Video CSC"},video_format:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["VideoFormat"],variableId:"video_format",name:"Encode Setup - Video Format"},video_sample_rate:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["encodesetup"],api_variable:["VideoSampleRate"],variableId:"video_sample_rate",name:"Encode Setup - Video Sample Rate"},transmit_method:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodetransport"],api_variable:["txpm","Txpm"],variableId:"transmit_method",name:"Encode Transport - Transmit Method",action:[{camera:["common"],action:{choices:I.ENCODE_TXPM,default:"RUDP"}}]},transmit_netprefix:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodetransport"],api_variable:["txnetprefix","Txnetprefix"],variableId:"transmit_netprefix",name:"Encode Transport - Transmit Net Prefix"},transmit_netmask:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodetransport"],api_variable:["txnetmask","Txnetmask"],variableId:"transmit_netmask",name:"Encode Transport - Transmit Netmask"},transmit_ttl:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["encodetransport"],api_variable:["txmcttl","Txmcttl"],variableId:"transmit_ttl",name:"Encode Transport - Transmit TTL"},ndi_discovery_server:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["NDIDisServer"],api_variable:["NDIDisServ"],variableId:"ndi_discovery_server",name:"NDI Discovery - Server",action:[{camera:["common"],action:{choices:I.NDI_DIS_SVR,default:"NDIDisServDis"}}]},ndi_discovery_server_ip:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["NDIDisServer"],api_variable:["NDIDisServIP"],variableId:"ndi_discovery_server_ip",name:"NDI Discovery - Server IP"},freed:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["Freed"],variableId:"freed",name:"PTZ - FreeD"},freed_ip_address:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["FreedIpAddr"],variableId:"freed_ip_address",name:"PTZ - FreeD IP Address"},freed_port:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["FreedPort"],variableId:"freed_port",name:"PTZ - FreeD Port"},pt:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!1,name:"PTZ - Pan/Tilt",action:[{camera:["common"],action:{choices:I.PTZ_DIRECTION,default:"up",posPanDefault:"0000",posTiltChoices:I.POS_TILT,posTiltDefault:"0000"}},{camera:["P100","P110","P120"],action:{posPanChoices:I.POS_PAN_P100}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],action:{posPanChoices:I.POS_PAN_P200}}]},pan_position:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,variableId:"pan_position",name:"PTZ - Pan Position"},pan_position_int:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,variableId:"pan_position_int",name:"PTZ - Pan Position (Integer)"},panSpeed:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["PanSpeed"],variableId:"pan_speed",name:"PTZ - Pan Speed",action:[{camera:["common"],action:{choices:I.SPEED_CHANGES,default:"up",range:{min:0,max:21,default:11}}}]},preset:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["Preset"],variableId:"preset",name:"PTZ - Preset",action:[{camera:["common"],action:{choices:I.PRESET_MODE,default:"Birddog"}}]},preset_speed:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["PresetSpeed"],variableId:"preset_speed",name:"PTZ - Preset Speed",action:[{camera:["common"],action:{choices:I.SPEED_CHANGES,default:"up",range:{min:0,max:21,default:11}}}]},recallPset:{camera:["All"],firmware:["4","5"],store_state:!1,name:"PTZ - Recall Preset",action:[{camera:["common"],action:{range:{min:1,max:64,default:1}}}]},savePset:{camera:["All"],firmware:["4","5"],store_state:!1,name:"PTZ - Save Preset",action:[{camera:["common"],action:{range:{min:1,max:64,default:1}}}]},tilt_position:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,variableId:"tilt_position",name:"PTZ - Tilt Position"},tilt_position_int:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,variableId:"tilt_position_int",name:"PTZ - Tilt Position (Integer)"},tiltSpeed:{camera:["P100","P110","P120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["TiltSpeed"],variableId:"tilt_speed",name:"PTZ - Tilt Speed",action:[{camera:["common"],action:{choices:I.SPEED_CHANGES,default:"up",range:{min:0,max:18,default:9}}}]},zoom:{camera:["All"],firmware:["4","5"],store_state:!1,name:"PTZ - Zoom",action:[{camera:["common"],action:{choices:I.PTZ_ZOOM,default:"in",posZoomDefault:"0000"}},{camera:["P4K"],action:{posZoomChoices:I.POS_ZOOM_12}},{camera:["P100","P110"],action:{posZoomChoices:I.POS_ZOOM_10}},{camera:["PF120","P120","P240","P400"],action:{posZoomChoices:I.POS_ZOOM_20}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{posZoomChoices:I.POS_ZOOM_30}}]},zoom_position:{camera:["All"],firmware:["4","5"],store_state:!0,variableId:"zoom_position",name:"PTZ - Zoom Position"},zoom_position_int:{camera:["All"],firmware:["4","5"],store_state:!0,variableId:"zoom_position_int",name:"PTZ - Zoom Position (Integer)"},zoomSpeed:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["ZoomSpeed"],variableId:"zoom_speed",name:"PTZ - Zoom Speed",action:[{camera:["common"],action:{choices:I.SPEED_CHANGES,default:"up",range:{min:0,max:7,default:4}}}]},onScreenMenu:{camera:["All"],firmware:["5"],store_state:!1,name:"PTZ - Toggle OSD Menu",action:[{camera:["common"],action:{}}]},speedControl:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogptzsetup"],api_variable:["SpeedControl"],variableId:"speed_control",name:"PTZ - Speed Control",action:[{camera:["common"],action:{choices:I.SPEED_TYPE,default:"standard"}}]},focus:{camera:["All"],firmware:["4","5"],store_state:!1,name:"Focus - Focus Action",action:[{camera:["common"],action:{choices:I.FOCUS_CONTROL,default:"near"}}]},focusM:{camera:["All"],firmware:["4","5"],store_state:!0,variableId:"focus_mode",name:"Focus - Focus Mode",action:[{camera:["common"],action:{choices:I.AUTO_FOCUS,default:"Auto"}}]},ae_response:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["AeResponse"],variableId:"ae_response",name:"Exposure - Ae Response",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:1,max:48,default:1}}}]},backlight:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["BackLight"],variableId:"backlight",name:"Exposure - Backlight",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},bright_level:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["BrightLevel"],variableId:"bright_level",name:"Exposure - Bright Level",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P100","P110","P120","PF120"],action:{range:{min:0,max:27,default:14}}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{range:{min:0,max:31,default:16}}},{camera:["P240","P400"],action:{range:{min:0,max:41,default:21}}},{camera:["P4K"],action:{range:{min:5,max:37,default:21}}}]},expComp:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ExpCompEn"],variableId:"exposure_comp",name:"Exposure - Exposure Compensation",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},expCompLvl:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ExpCompLvl"],variableId:"exposure_comp_level",name:"Exposure - Exposure Compensation Level",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P100","P110","P120","PF120"],action:{range:{min:-7,max:7,default:0}}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],action:{range:{min:-128,max:127,default:0}}}]},exposure_mode:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ExpMode"],variableId:"exposure_mode",name:"Exposure - Exposure Mode",action:[{camera:["common"],action:{default:"FULL-AUTO"}},{camera:["P100","P110","P120","PF120","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{choices:I.EXP_MODE_1}},{camera:["P200A2A3"],action:{choices:I.EXP_MODE_2}},{camera:["P240","P400","P4K"],action:{choices:I.EXP_MODE_3}}]},gain:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["GainLevel"],variableId:"gain",name:"Exposure - Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P100","P110","P120","PF120"],action:{value:{choices:I.GAIN_1,default:0}}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{value:{choices:I.GAIN_2,default:1}}},{camera:["P240","P400","P4K"],action:{value:{choices:I.GAIN_3,default:1}}}]},gain_limit:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["GainLimit"],variableId:"gain_limit",name:"Exposure - Gain Limit",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{range:{min:4,max:15,default:15}}},{camera:["P240","P400","P4K"],action:{range:{min:4,max:13,default:13}}}]},gain_point:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["GainPoint"],variableId:"gain_point",name:"Exposure - Gain Point",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},gain_point_position:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["GainPointPosition"],variableId:"gain_point_position",name:"Exposure - Gain Point Position "},high_sensitivity:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["HighSensitivity"],variableId:"high_sensitivity",name:"Exposure - High Sensitivity",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},iris:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["IrisLevel"],variableId:"iris",name:"Exposure - Iris",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P100","P110","P120","PF120"],action:{value:{choices:I.IRIS_1,default:8,range:{closed:0,min:1,max:13}}}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{value:{choices:I.IRIS_2,default:12,range:{closed:0,min:5,max:17}}}},{camera:["P240","P400"],action:{value:{choices:I.IRIS_3,default:17,range:{closed:0,min:5,max:21}}}},{camera:["P4K"],action:{value:{choices:I.IRIS_4,default:1,range:{closed:5,min:6,max:21}}}}]},shutter_control_overwrite:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ShutterControlOverwrite"],variableId:"shutter_control_overwrite",name:"Exposure - Shutter Control Overwrite",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},shutter_max_speed:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ShutterMaxSpeed"],variableId:"shutter_max_speed",name:"Exposure - Shutter Max Speed",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:20,max:33,default:20}}}]},shutter_min_speed:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ShutterMinSpeed"],variableId:"shutter_min_speed",name:"Exposure - Shutter Min Speed",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:16,max:33,default:16}}}]},shutter_speed:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ShutterSpeed"],variableId:"shutter_speed",name:"Exposure - Shutter Speed",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{shutter_50:I.SHUTTER_50,shutter_60:I.SHUTTER_60,shutter_default:6,range:{min:0,max:21}}},{camera:["P100","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],action:{shutter_24:I.SHUTTER_4K_24,shutter_50:I.SHUTTER_4K_50,shutter_60:I.SHUTTER_4K_60,shutter_default:18,range:{min:6,max:33}}}]},shutter_speed_overwrite:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["ShutterSpeedOverwrite"],variableId:"shutter_speed_overwrite",name:"Exposure - Shutter Speed Overwrite",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:30,max:110,default:60}}}]},shutter_table:{camera:["All"],firmware:["4","5"],store_state:!0},slow_shutter_en:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["SlowShutterEn"],variableId:"slow_shutter_en",name:"Exposure - Slow Shutter Enable",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},slow_shutter_limit:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["SlowShutterLimit"],variableId:"slow_shutter_limit",name:"Exposure - Slow Shutter Limit",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{shutter_50:I.SLOW_SHUTTER_50,shutter_60:I.SLOW_SHUTTER_60,range:{min:1,max:6,default:3}}},{camera:["P240","P400","P4K"],action:{shutter_24:I.SLOW_SHUTTER_4K_24,shutter_50:I.SLOW_SHUTTER_4K_50,shutter_60:I.SLOW_SHUTTER_4K_60,range:{min:6,max:17,default:12}}}]},spotlight:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexpsetup"],api_variable:["Spotlight"],variableId:"spotlight",name:"Exposure - Spotlight",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},bg:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["BG"],variableId:"bg",name:"White Balance - BG",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-99,max:99,default:0}}}]},blue_gain:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["BlueGain"],variableId:"blue_gain",name:"White Balance - Blue Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:255,default:128}}}]},br:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["BR"],variableId:"br",name:"White Balance - BR",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-99,max:99,default:0}}}]},color_temp:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["ColorTemp"],variableId:"color_temp",name:"White Balance - Color Temp",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",value:{choices:I.COLOR_TEMP,default:"4200"},range:{min:28,max:65,default:42}}}]},gb:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["GB"],variableId:"gb",name:"White Balance - GB",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-99,max:99,default:0}}}]},gr:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["GR"],variableId:"gr",name:"White Balance - GR",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-99,max:99,default:0}}}]},level:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["Level"],variableId:"level",name:"White Balance - Level",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:14,default:7}}}]},matrix:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["Matrix"],variableId:"matrix",name:"White Balance - Matrix",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},offset:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["Offset"],variableId:"offset",name:"White Balance - Offset",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:14,default:7}}}]},phase:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["Phase"],variableId:"phase",name:"White Balance - Phase",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:14,default:7}}}]},rb:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["RB"],variableId:"rb",name:"White Balance - RB",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-99,max:99,default:0}}}]},red_gain:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["RedGain"],variableId:"red_gain",name:"White Balance - Red Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:255,default:128}}}]},rg:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["RG"],variableId:"rg",name:"White Balance - RG",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-99,max:99,default:0}}}]},select:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["Select"],variableId:"select",name:"White Balance - Select",action:[{camera:["common"],action:{choices:I.WB_SELECT,default:"OFF"}}]},speed:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["Speed"],variableId:"speed",name:"White Balance - Speed",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:1,max:5,default:3}}}]},wbOnePush:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["OnePushTrigger"],name:"White Balance - One Push Trigger",action:[{camera:["common"],action:!0}]},wb_mode:{camera:["All"],firmware:["4"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["WbMode"],variableId:"wb_mode",name:"White Balance - White Balance Mode",action:[{camera:["common"],action:{default:"AUTO"}},{camera:["P100","P110","P120","PF120"],action:{choices:I.WB_MODE_1}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],action:{choices:I.WB_MODE_2}}]},wb_mode:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogwbsetup"],api_variable:["WbMode"],variableId:"wb_mode",name:"White Balance - White Balance Mode",action:[{camera:["common"],action:{default:"AUTO"}},{camera:["P100","P110","P120","PF120"],action:{choices:I.WB_MODE_1b}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],action:{choices:I.WB_MODE_2}}]},backlight_com:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["BackLightCom"],variableId:"backlight_com",name:"Picture Setup - Backlight Compensation",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},chroma_suppress:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["ChromeSuppress"],variableId:"chroma_suppress",name:"Picture Setup - Chroma Suppress",action:[{camera:["common"],action:{choices:I.OFF_L_M_H,default:"OFF"}}]},contrast:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Contrast"],variableId:"contrast",name:"Picture Setup - Contrast",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:15,default:8}}}]},gamma:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Gamma"],variableId:"gamma",name:"Picture Setup - Gamma",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:4,default:2}}}]},highlight_comp:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["HighlightComp"],variableId:"highlight_comp",name:"Picture Setup - Highlight Compensation",action:[{camera:["common"],action:{choices:I.OFF_L_M_H,default:"OFF"}}]},highlight_comp_mask:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["HighlightCompMask"],variableId:"highlight_comp_mask",name:"Picture Setup - Highlight Compensation Mask",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:15,default:1}}}]},hue:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Hue"],variableId:"hue",name:"Picture Setup - Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:15,default:8}}}]},ir_cutfilter:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["IRCutFilter"],variableId:"ir_cutfilter",name:"Picture Setup - IR Cut Filter",action:[{camera:["P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{choices:I.IR_CUT_FILTER_1,default:"Auto"}},{camera:["P240","P400","P4K"],action:{choices:I.IR_CUT_FILTER_2,default:"On"}},{camera:["P200A2A3"],action:{choices:I.IR_CUT_FILTER_3,default:"NoiseReduction"}}]},low_latency:{camera:["P200A4A5"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["LowLatency"],variableId:"low_latency",name:"Picture Setup - Low Latency",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},nd_filter:{camera:["P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["NDFilter"],variableId:"nd_filter",name:"Picture Setup - ND Filter",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:3,default:2}}}]},noise_reduction:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["NoiseReduction"],variableId:"noise_reduction",name:"Picture Setup - Noise Reduction",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",value:{choices:I.OFF_1_to_5,default:"0"},range:{min:0,max:5}}}]},picFlip:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Flip"],variableId:"flip",name:"Picture Setup - Flip",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},picMirror:{camera:["All"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Mirror"],variableId:"mirror",name:"Picture Setup - Mirror",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"On"}}]},pictureEffect:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Effect"],variableId:"bw_effect",name:"Picture Setup - BW Effect",action:[{camera:["common"],action:{choices:I.PICTURE_EFFECT,default:"BW"}}]},saturation:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Color"],variableId:"saturation",name:"Picture Setup - Saturation",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:15,default:8}}}]},sharpness:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Sharpness"],variableId:"sharpness",name:"Picture Setup - Sharpness",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up"}},{camera:["P100","P110","P120","PF120"],action:{range:{min:0,max:15,default:8}}},{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],action:{range:{min:-128,max:127,default:0}}}]},stabilizer:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2","P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["Stabilizer"],variableId:"stabilizer",name:"Picture Setup - Stabilizer",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},threed_nr:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["ThreeDNR"],variableId:"threed_nr",name:"Picture Setup - 3D Noise Reduction",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",value:{choices:I.OFF_1_to_5,default:"0"},range:{min:0,max:5}}}]},twod_nr:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["TWODNR"],variableId:"twod_nr",name:"Picture Setup - 2D Noise Reduction",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",value:{choices:I.OFF_1_to_5,default:"0"},range:{min:0,max:5}}}]},wide_dynamic_range:{camera:["P100","P110","P120","PF120"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogpicsetup"],api_variable:["WideDynamicRange"],variableId:"wide_dynamic_range",name:"Picture Setup - Wide Dynamic Range",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",value:{choices:I.OFF_1_to_6,default:"0"},range:{min:0,max:6}}}]},cm_blue_gain:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_blu_gain","BlueGain"],variableId:"cm_blue_gain",name:"Color Matrix - Blue Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_blue_hue:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_blu_hue","BlueHue"],variableId:"cm_blue_hue",name:"Color Matrix - Blue Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_color_gain:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["ColourGain"],variableId:"cm_color_gain",name:"Color Matrix - Color Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:255,default:128}}}]},cm_cyan_gain:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_cya_gain","CyanGain"],variableId:"cm_cyan_gain",name:"Color Matrix - Cyan Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_cyan_hue:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_cya_hue","CyanHue"],variableId:"cm_cyan_hue",name:"Color Matrix - Cyan Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_green_gain:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_gre_gain","GreenGain"],variableId:"cm_green_gain",name:"Color Matrix - Green Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_green_hue:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_gre_hue","GreenHue"],variableId:"cm_green_hue",name:"Color Matrix - Green Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_hue_phase:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["HuePhase"],variableId:"cm_hue_phase",name:"Color Matrix - Hue Phase",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:255,default:128}}}]},cm_mag_gain:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_mag_gain","MagGain"],variableId:"cm_mag_gain",name:"Color Matrix - Magenta Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_mag_hue:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_mag_hue","MagHue"],variableId:"cm_mag_hue",name:"Color Matrix - Magenta Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_red_gain:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_red_gain","RedGain"],variableId:"cm_red_gain",name:"Color Matrix - Red Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_red_hue:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_red_hue","RedHue"],variableId:"cm_red_hue",name:"Color Matrix - Red Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_yellow_gain:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_yel_gain","YellowGain"],variableId:"cm_yellow_gain",name:"Color Matrix - Yellow Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},cm_yellow_hue:{camera:["P100","P110","P120","PF120","P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogcmsetup"],api_variable:["cam_cm_yel_hue","YellowHue"],variableId:"cm_yellow_hue",name:"Color Matrix - Yellow Hue",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:64,default:32}}}]},brightness:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogadvancesetup"],api_variable:["Brightness"],variableId:"brightness",name:"Advanced Setup - Brightness",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:6,default:3}}}]},brightness_comp:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogadvancesetup"],api_variable:["BrightnessComp"],variableId:"brightness_comp",name:"Advanced Setup - Brightness Comp",action:[{camera:["common"],action:{choices:I.BRIGHTNESS_COMP,default:"STANDARD"}}]},comp_level:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogadvancesetup"],api_variable:["CompLevel"],variableId:"comp_level",name:"Advanced Setup - Comp Level",action:[{camera:["common"],action:{choices:I.L_Mid_H,default:"LOW"}}]},gamma_offset:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogadvancesetup"],api_variable:["GammaOffset"],variableId:"gamma_offset",name:"Advanced Setup - Gamma Offset",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-16,max:64,default:40}}}]},high_resolution:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogadvancesetup"],api_variable:["HighResolution"],variableId:"high_resolution",name:"Advanced Setup - High Resolution",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},video_enhancement:{camera:["P200A2A3","P200A4A5","A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogadvancesetup"],api_variable:["VideoEnhancement"],variableId:"video_enhancement",name:"Advanced Setup - Video Enhancement",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},aux:{camera:["A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexternalsetup"],api_variable:["Aux"],variableId:"aux",name:"External Setup - Aux",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},rain_wiper:{camera:["A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexternalsetup"],api_variable:["RainWiper"],variableId:"rain_wiper",name:"External Setup - Rain Wiper",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},v12vout:{camera:["A200GEN1","A200GEN2","A300GEN1","A300GEN2"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogexternalsetup"],api_variable:["V12vOut"],variableId:"v12vout",name:"External Setup - 12v Out",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},bandwidth:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["Bandwidth"],variableId:"bandwidth",name:"Detail Setup - Bandwidth",action:[{camera:["common"],action:{choices:I.BANDWIDTH_4K,default:"DEFAULT"}}]},bw_balance:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["BwBalance"],variableId:"bw_balance",name:"Detail Setup - BW Balance",action:[{camera:["common"],action:{choices:I.BW_BALANCE_4K,default:"TYPE1"}}]},crispening:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["Crispening"],variableId:"crispening",name:"Detail Setup - Crispening",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:7,default:4}}}]},detail:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["Detail"],variableId:"detail",name:"Detail Setup - Detail",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},highlight_detail:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["HighLightDetail"],variableId:"highlight_detail",name:"Detail Setup - Highlight Detail",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:4,default:0}}}]},hv_balance:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["HvBalance"],variableId:"hv_balance",name:"Detail Setup - Hv Balance",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-2,max:2,default:0}}}]},limit:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["Limit"],variableId:"limit",name:"Detail Setup - Limit",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:7,default:4}}}]},super_low:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddogdetsetup"],api_variable:["SuperLow"],variableId:"super_low",name:"Detail Setup - Super Low",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:7,default:4}}}]},black_gamma_level:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["BlackGammaLevel"],variableId:"black_gamma_level",name:"Gamma Setup - Black Gamma Level",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:14,default:7}}}]},black_level:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["BlackLevel"],variableId:"black_level",name:"Gamma Setup - Black Level",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:96,default:48}}}]},black_level_range:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["BlackLevelRange"],variableId:"black_level_range",name:"Gamma Setup - Black Level Range",action:[{camera:["common"],action:{choices:I.L_Mid_H,default:"LOW"}}]},effect:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["Effect"],variableId:"effect",name:"Gamma Setup - Effect",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-3,max:3,default:0}}}]},level:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["Level"],variableId:"level",name:"Gamma Setup - Level",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:14,default:0}}}]},offset:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["Offset"],variableId:"offset",name:"Gamma Setup - Offset",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:-64,max:64,default:0}}}]},pattern:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["Pattern"],variableId:"pattern",name:"Gamma Setup - Pattern",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:512,default:256}}}]},pattern_fine:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["PatternFine"],variableId:"pattern_fine",name:"Gamma Setup - Pattern Fine",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:9,default:5}}}]},settings:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["Settings"],variableId:"settings",name:"Gamma Setup - Settings",action:[{camera:["common"],action:{choices:I.GAMMA_SETTINGS,default:"PATTERN"}}]},visibility_enhancer:{camera:["P240","P400","P4K"],firmware:["4","5"],store_state:!0,api_endpoint:["birddoggammasetup"],api_variable:["VisibilityEnhancer"],variableId:"visibility_enhancer",name:"Gamma Setup - Visibilty Enhancer",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},scope_gamma_gain:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["GammaGain"],variableId:"scope_gamma_gain",name:"Scope - Gamma Gain",action:[{camera:["common"],action:{choices:I.UP_DOWN_VALUE,default:"up",range:{min:0,max:7,default:4}}}]},scope_mode:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["Mode"],variableId:"scope_mode",name:"Scope - Mode",action:[{camera:["common"],action:{choices:I.SCOPE_MODE,default:"Histogram"}}]},scope_position:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["Position"],variableId:"scope_position",name:"Scope - Position",action:[{camera:["common"],action:{choices:I.SCOPE_POSITION,default:"TopLeft"}}]},scope_preview:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["PreviewEnable"],variableId:"scope_preview",name:"Scope - Preview",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},scope_program:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["ProgramEnable"],variableId:"scope_program",name:"Scope - Program",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},scope_size:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["DoubleSizeEnable"],variableId:"scope_size",name:"Scope - Size",action:[{camera:["common"],action:{choices:I.SCOPE_SIZE,default:"Off"}}]},scope_transparency:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["birddogscope"],api_variable:["TransparencyEnable"],variableId:"scope_transparency",name:"Scope - Transparency",action:[{camera:["common"],action:{choices:I.ON_OFF,default:"Off"}}]},avbr:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["avbr"],variableId:"avbr",name:"Dashboard - Average Bitrate"},aud_ch:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["aud_ch"],variableId:"aud_ch",name:"Dashboard - Audio Channels"},aud_sr:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["aud_sr"],variableId:"aud_sr",name:"Dashboard - Audio Sample Rate"},aud_stat:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["aud_stat"],variableId:"aud_stat",name:"Dashboard - Audio Status"},dashboard_vid_status:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["dashboard_vid_status"],variableId:"dashboard_vid_status",name:"Dashboard - Status"},dev_mode:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["dev_mode"],variableId:"dev_mode",name:"Dashboard - Device Mode"},gen_status:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["gen_status"],variableId:"gen_status",name:"Dashboard - Genlock Status"},mcu_ver:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["mcu_ver"],variableId:"mcu_ver",name:"Dashboard - MCU Version"},net_band_perc:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["net_band_perc"],variableId:"net_band_perc",name:"Dashboard - Network Bandwidth"},net_mode:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["net_mode"],variableId:"net_mode",name:"Dashboard - Network Mode"},net_speed:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["net_speed"],variableId:"net_speed",name:"Dashboard - Network Speed"},src_stat:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["src_stat"],variableId:"src_stat",name:"Dashboard - Source Status"},sys_info_perc:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["sys_info_perc"],variableId:"sys_info_perc",name:"Dashboard - CPU Usage"},vid_fmt:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["vid_fmt"],variableId:"vid_fmt",name:"Dashboard - Video Format"},vid_fr:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["vid_fr"],variableId:"vid_fr",name:"Dashboard - Video Frame Rate"},vid_res:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["vid_res"],variableId:"vid_res",name:"Dashboard - Video Resolution"},vid_sra:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["vid_sra"],variableId:"vid_sra",name:"Dashboard - Video Sample Rate"},vid_str_name:{camera:["All"],firmware:["5"],store_state:!0,api_endpoint:["WebSocket"],api_variable:["vid_str_name"],variableId:"vid_str_name",name:"Dashboard - NDI Video Stream Name"},custom:{camera:["All"],firmware:["4","5"],name:"Custom Visca Command",action:[{camera:["common"],action:!0}]}},v="",C="",A="\t",w="",S="8",G="b",Z="";function B(){let e,t,a="",o={},n=p(y,this.camera.firmware.major,this.camera.model);n||(this.log("error",`Unrecognized camera model: ${this.camera.model}`),this.status(this.STATUS_ERROR),void 0!==this.poll_interval&&clearInterval(this.poll_interval));let i={};n?.standby&&(i.standby={name:n.standby.name,options:[{type:"dropdown",label:"On/Standby",id:"val",choices:n.standby.choices,default:n.standby.default}],callback:e=>{switch(e.options.val){case"on":a="\0";break;case"standby":a="\0"}this.sendVISCACommand(a)}}),n?.freeze&&(i.freeze={name:n.freeze.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.freeze.choices,{id:"Toggle",label:"Toggle"}],default:n.freeze.default}],callback:e=>{switch(e.options.val){case"On":a="b";break;case"Off":a="b";break;case"Toggle":a="b"}this.sendVISCACommand(a)}}),n?.analogAudioInGain&&(i.analogAudioInGain={name:n.analogAudioInGain.name,options:[{type:"dropdown",label:"Action",id:"val",choices:n.analogAudioInGain.choices,default:n.analogAudioInGain.default},{type:"number",label:"Analog Audio In Gain (dB) ("+n.analogAudioInGain.range.min+" to "+n.analogAudioInGain.range.max+")",id:"value",default:n.analogAudioInGain.range.default,min:n.analogAudioInGain.range.min,max:n.analogAudioInGain.range.max,range:!0,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.analogAudioInGain?this.camera.analogAudioInGain:n.analogAudioInGain.range.default,a.options.val){case"up":e=t<n.analogAudioInGain.range.max+50?++t:n.analogAudioInGain.range.max;break;case"down":e=t>n.analogAudioInGain.range.min+50?--t:n.analogAudioInGain.range.min;break;case"value":e=a.options.value+50}o={AnalogAudioInGain:String(e)},this.sendCommand("analogaudiosetup","POST",o)}}),n?.analogAudioOutGain&&(i.analogAudioOutGain={name:n.analogAudioOutGain.name,options:[{type:"dropdown",label:"Action",id:"val",choices:n.analogAudioOutGain.choices,default:n.analogAudioOutGain.default},{type:"number",label:"Analog Audio Out Gain (dB) ("+n.analogAudioOutGain.range.min+" to "+n.analogAudioOutGain.range.max+")",id:"value",default:n.analogAudioOutGain.range.default,min:n.analogAudioOutGain.range.min,max:n.analogAudioOutGain.range.max,range:!0,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.analogAudioOutGain?this.camera.analogAudioOutGain:n.analogAudioOutGain.range.default,a.options.val){case"up":e=t<n.analogAudioOutGain.range.max+50?++t:n.analogAudioOutGain.range.max;break;case"down":e=t>n.analogAudioOutGain.range.min+50?--t:n.analogAudioOutGain.range.min;break;case"value":e=a.options.value+50}o={AnalogAudioOutGain:String(e)},this.sendCommand("analogaudiosetup","POST",o)}}),n?.analogAudioOutput&&(i.analogAudioOutput={name:n.analogAudioOutput.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:[...n.analogAudioOutput.choices,{id:"Toggle",label:"Toggle"}],default:n.analogAudioOutput.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.analogAudioOutput,n.analogAudioOutput.choices)),o={AnalogAudiooutputselect:String(t)},this.sendCommand("analogaudiosetup","POST",o)}}),n?.video_output&&(i.video_output={name:n.video_output.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:[...n.video_output.choices,{id:"Toggle",label:"Toggle"}],default:n.video_output.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.video_output,n.video_output.choices)),o={videooutput:String(t)},this.sendCommand("videooutputinterface","POST",o)}}),n?.bandwidth_mode&&(i.bandwidth_mode={name:n.bandwidth_mode.name,options:[{type:"dropdown",label:"Manual / NDI Managed",id:"val",choices:n.bandwidth_mode.choices,default:n.bandwidth_mode.default},{type:"number",label:"Bandwidth Select ("+n.bandwidth_select.range.min+" to "+n.bandwidth_select.range.max+")",id:"bandwidth",default:n.bandwidth_select.range.default,min:n.bandwidth_select.range.min,max:n.bandwidth_select.range.max,isVisible:e=>"Manual"===e.val}],callback:e=>{switch(e.options.val){case"NDIManaged":o={BandwidthMode:String(e.options.val)};break;case"Manual":o={BandwidthMode:String(e.options.val),BandwidthSelect:String(e.options.bandwidth)}}this.sendCommand("encodesetup","POST",o)}}),n?.ndiAudio&&(i.ndiAudio={name:n.ndiAudio.name,options:[{type:"dropdown",label:"Analog / Mute",id:"val",choices:[...n.ndiAudio.choices,{id:"Toggle",label:"Toggle"}],default:n.ndiAudio.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.ndiAudio,n.ndiAudio.choices)),o={NDIAudio:String(t)},this.sendCommand("encodesetup","POST",o)}}),n?.ndiGroupEnable&&(i.ndiGroupEnable={name:n.ndiGroupEnable.name,options:[{type:"dropdown",label:"NDI Group Enable",id:"val",choices:[...n.ndiGroupEnable.choices,{id:"Toggle",label:"Toggle"}],default:n.ndiGroupEnable.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.ndiGroupEnable,n.ndiGroupEnable.choices)),o={NDIGroup:String(t)},this.sendCommand("encodesetup","POST",o)}}),n?.screensaver_mode&&(i.screensaver_mode={name:n.screensaver_mode.name,options:[{type:"dropdown",label:"ScreenSaver Mode",id:"val",choices:n.screensaver_mode.choices,default:n.screensaver_mode.default}],callback:e=>{o={ScreenSaverMode:String(e.options.val)},this.sendCommand("encodesetup","POST",o)}}),n?.stream_to_network&&(i.stream_to_network={name:n.stream_to_network.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.stream_to_network.choices,{id:"Toggle",label:"Toggle"}],default:n.stream_to_network.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.stream_to_network,n.stream_to_network.choices)),o={StreamToNetwork:String(t)},this.sendCommand("encodesetup","POST",o)}}),n?.tally_mode&&(i.tally_mode={name:n.tally_mode.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.tally_mode.choices,{id:"Toggle",label:"Toggle"}],default:n.tally_mode.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.tally_mode,n.tally_mode.choices)),o={TallyMode:String(t)},this.sendCommand("encodesetup","POST",o)}}),n?.transmit_method&&(i.transmit_method={name:n.transmit_method.name,options:[{type:"dropdown",label:"Method",id:"val",choices:n.transmit_method.choices,default:n.transmit_method.default}],callback:e=>{o="4"===this.camera.firmware.major?{txpm:String(e.options.val)}:{Txpm:String(e.options.val)},this.sendCommand("encodeTransport","POST",o)}}),n?.capture_screensaver&&(i.capture_screensaver={name:n.capture_screensaver.name,options:[],callback:e=>{this.sendCommand("capture?ChNum=1&status=Encode","GET")}}),n?.ndi_discovery_server&&(i.ndi_discovery_server={name:n.ndi_discovery_server.name,options:[{type:"dropdown",label:"Enabled / Disabled",id:"val",choices:[...n.ndi_discovery_server.choices,{id:"Toggle",label:"Toggle"}],default:n.ndi_discovery_server.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.ndi_discovery_server,n.ndi_discovery_server.choices)),o={NDIDisServ:String(t)},this.sendCommand("NDIDisServer","POST",o)}});let r=!this.camera.speedControl||"standard"===this.camera.speedControl,s=r?21:255,l=r?11:255,c=r?18:255,d=r?9:255;return n?.pt&&(i.pt={name:n.pt.name,options:[{type:"dropdown",label:"Direction",id:"val",choices:n.pt.choices,default:n.pt.default},{type:"dropdown",label:"Pan Position",id:"posPan",choices:n.pt.posPanChoices,default:n.pt.posPanDefault,isVisible:e=>"direct"===e.val},{type:"dropdown",label:"Tilt Position",id:"posTilt",choices:n.pt.posTiltChoices,default:n.pt.posTiltDefault,isVisible:e=>"direct"===e.val},{type:"checkbox",label:"Speed Override",id:"override",default:!1,isVisible:e=>"direct"!==e.val},{type:"number",label:`Pan Speed (0 to ${s})`,id:"value",default:l,min:0,max:s,range:!0,isVisible:e=>!0===e.override||"direct"===e.val},{type:"number",label:`Tilt Speed (0 to ${c})`,id:"value",default:d,min:0,max:c,range:!0,isVisible:e=>!0===e.override||"direct"===e.val}],callback:e=>{let t=this.camera?.panSpeed?this.camera.panSpeed:n.panSpeed.range.default,o=this.camera?.tiltSpeed?this.camera.tiltSpeed:n.tiltSpeed.range.default;switch(t=!0===e.options.override?e.options.panSpeed:t,o=!0===e.options.override?e.options.tiltSpeed:o,e.options.val){case"left":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"right":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"up":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"down":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"up_left":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"up_right":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"down_left":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"down_right":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"stop":a=C+Z+String.fromCharCode(t)+String.fromCharCode(o)+""+w;break;case"home":a="";break;case"direct":a=C+""+String.fromCharCode(e.options.panSpeed)+String.fromCharCode(e.options.tiltSpeed)+this.strToPQRS(e.options.posPan)+this.strToPQRS(e.options.posTilt)+w}this.sendVISCACommand(a)}}),n?.panSpeed&&(i.panSpeed={name:n.panSpeed.name,options:[{type:"dropdown",label:"Action",id:"type",choices:n.panSpeed.choices,default:n.panSpeed.default},{type:"number",label:`Speed (0 to ${s})`,id:"value",default:l,min:0,max:s,range:!0,isVisible:e=>"value"===e.type}],callback:a=>{switch(t=this.camera?.panSpeed?this.camera.panSpeed:n.panSpeed.range.default,a.options.type){case"up":e=t<s?++t:s;break;case"down":e=t>0?--t:0;break;case"value":e=a.options.value}o={PanSpeed:String(e)},this.sendCommand("birddogptzsetup","POST",o)}}),n?.preset&&(i.preset={name:n.preset.name,options:[{type:"dropdown",label:"Preset Mode",id:"val",choices:n.preset.choices,default:n.preset.default}],callback:e=>{o={Preset:String(e.options.val)},this.sendCommand("birddogptzsetup","POST",o)}}),n?.preset_speed&&(i.preset_speed={name:n.preset_speed.name,options:[{type:"dropdown",label:"Action",id:"type",choices:n.preset_speed.choices,default:n.preset_speed.default},{type:"number",label:"Speed ("+n.preset_speed.range.min+" to "+n.preset_speed.range.max+")",id:"value",default:n.preset_speed.range.default,min:n.preset_speed.range.min,max:n.preset_speed.range.max,isVisible:e=>"value"===e.type}],callback:a=>{switch(t=this.camera?.preset_speed?this.camera.preset_speed:n.preset_speed.default,a.options.type){case"up":e=t<n.preset_speed.range.max?++t:n.preset_speed.range.max;break;case"down":e=t>n.preset_speed.range.min?--t:n.preset_speed.range.min;break;case"value":e=a.options.value}o={PresetSpeed:String(e)},this.sendCommand("birddogptzsetup","POST",o)}}),n?.recallPset&&(i.recallPset={name:n.recallPset.name,options:[{type:"number",label:"Preset Number ("+n.savePset.range.min+" to "+n.savePset.range.max+")",id:"val",default:n.savePset.range.default,min:n.savePset.range.min,max:n.savePset.range.max}],callback:e=>{o={Preset:String("Preset-"+e.options.val)},this.sendCommand("recall","POST",o)}}),n?.savePset&&(i.savePset={name:n.savePset.name,options:[{type:"number",label:"Preset Number ("+n.savePset.range.min+" to "+n.savePset.range.max+")",id:"val",default:n.savePset.range.default,min:n.savePset.range.min,max:n.savePset.range.max}],callback:e=>{o={Preset:String("Preset-"+e.options.val)},this.sendCommand("save","POST",o)}}),n?.tiltSpeed&&(i.tiltSpeed={name:n.tiltSpeed.name,options:[{type:"dropdown",label:"Action",id:"type",choices:n.tiltSpeed.choices,default:n.tiltSpeed.default},{type:"number",label:`Speed (0 to ${c})`,id:"value",default:d,min:0,max:c,range:!0,isVisible:e=>"value"===e.type}],callback:a=>{switch(t=this.camera?.tiltSpeed?this.camera.tiltSpeed:n.tiltSpeed.range.default,a.options.type){case"up":e=t<c?++t:c;break;case"down":e=t>0?--t:0;break;case"value":e=a.options.value}o={TiltSpeed:String(e)},this.sendCommand("birddogptzsetup","POST",o)}}),n?.zoom&&(i.zoom={name:n.zoom.name,options:[{type:"dropdown",label:"Direction",id:"val",choices:I.PTZ_ZOOM,default:"in"},{type:"dropdown",label:"Zoom Position",id:"posZoom",choices:n.zoom.posZoomChoices,default:n.zoom.posZoomDefault,isVisible:e=>"direct"===e.val},{type:"checkbox",label:"Speed Overide",id:"override",default:!1,isVisible:e=>"direct"!==e.val},{type:"number",label:"Speed ("+n.zoomSpeed.range.min+" to "+n.zoomSpeed.range.max+")",id:"speed",default:n.zoomSpeed.range.default,min:n.zoomSpeed.range.min,max:n.zoomSpeed.range.max,isVisible:e=>!0===e.override}],callback:e=>{let t=this.camera?.zoomSpeed?this.camera.zoomSpeed:n.zoomSpeed.range.default;switch(t=!0===e.options.override?e.options.speed:t,e.options.val){case"in":a=v+""+this.addStringToBinary(" ",t)+w;break;case"out":a=v+""+this.addStringToBinary("0",t)+w;break;case"direct":a=v+"G"+this.strToPQRS(e.options.posZoom)+w;break;case"stop":a="\0"}this.sendVISCACommand(a)}}),n?.zoomSpeed&&(i.zoomSpeed={name:n.zoomSpeed.name,options:[{type:"dropdown",label:"Action",id:"type",choices:n.zoomSpeed.choices,default:n.zoomSpeed.default},{type:"number",label:"Speed ("+n.zoomSpeed.range.min+" to "+n.zoomSpeed.range.max+")",id:"value",default:n.zoomSpeed.range.default,min:n.zoomSpeed.range.min,max:n.zoomSpeed.range.max,isVisible:e=>"value"===e.type}],callback:a=>{switch(t=this.camera?.zoomSpeed?this.camera.zoomSpeed:n.zoomSpeed.range.default,a.options.type){case"up":e=t<n.zoomSpeed.range.max?++t:n.zoomSpeed.range.max;break;case"down":e=t>n.zoomSpeed.range.min?--t:n.zoomSpeed.range.min;break;case"value":e=a.options.value}o={ZoomSpeed:String(e)},this.sendCommand("birddogptzsetup","POST",o)}}),n?.onScreenMenu&&(i.onScreenMenu={name:n.onScreenMenu.name,options:[],callback:e=>{o={Menu:String("On/Off")},this.sendCommand("birddogptz","POST",o)}}),n?.speedControl&&(i.speedControl={name:n.speedControl.name,options:[{type:"dropdown",label:"Speed Mode",id:"value",choices:n.speedControl.choices,default:n.speedControl.default}],callback:t=>{e=t.options.value,o={SpeedControl:e},this.sendCommand("birddogptzsetup","POST",o)}}),n?.focus&&(i.focus={name:n.focus.name,options:[{type:"dropdown",label:"Direction",id:"val",choices:n.focus.choices,default:n.focus.default}],callback:e=>{switch(e.options.val){case"near":a="\b";break;case"far":a="\b";break;case"stop":a="\b\0";break;case"trigger":a=""}this.sendVISCACommand(a)}}),n?.focusM&&(i.focusM={name:n.focusM.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:[...n.focusM.choices,{id:"Toggle",label:"Toggle"}],default:n.focusM.default}],callback:e=>{switch(e.options.val){case"Auto":a="8";break;case"Manual":a="8";break;case"Toggle":a="8"}this.sendVISCACommand(a)}}),n?.ae_response&&(i.ae_response={name:n.ae_response.name,options:[{type:"dropdown",label:"Ae Response",id:"val",hoices:n.ae_response.choices,default:n.ae_response.default},{type:"number",label:"Ae Response ("+n.ae_response.range.min+" to "+n.ae_response.range.max+")",id:"value",default:n.ae_response.range.default,min:n.ae_response.range.min,max:n.ae_response.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.ae_response?this.camera.ae_response:n.ae_response.range.default,a.options.val){case"up":e=t<n.ae_response.range.max?++t:n.ae_response.range.max;break;case"down":e=t>n.ae_response.range.min?--t:n.ae_response.range.min;break;case"value":e=a.options.value}o={AeResponse:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.backlight&&(i.backlight={name:n.backlight.name,options:[{type:"dropdown",label:"On / Off",id:"mode",choices:[...n.backlight.choices,{id:"Toggle",label:"Toggle"}],default:n.backlight.default}],callback:e=>{let t=e.options.mode;"Toggle"==t&&(t=b(this.camera.backlight,n.backlight.choices)),o={Backlight:String(t)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.bright_level&&(i.bright_level={name:n.bright_level.name,options:[{type:"dropdown",label:"Bright Level",id:"val",choices:n.bright_level.choices,default:n.bright_level.default},{type:"number",label:"Level ("+n.bright_level.range.min+" to "+n.bright_level.range.max+")",id:"value",default:n.bright_level.range.default,min:n.bright_level.range.min,max:n.bright_level.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.bright_level?this.camera.bright_level:n.bright_level.range.default,a.options.val){case"up":e=t<n.bright_level.range.max?++t:n.bright_level.range.max;break;case"down":e=t>n.bright_level.range.min?--t:n.bright_level.range.min;break;case"value":e=a.options.value}o={BrightLevel:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.expComp&&(i.expComp={name:n.expComp.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:n.expComp.choices,default:n.expComp.default}],callback:e=>{switch(e.options.val){case"Off":case"On":o={ExpCompEn:String(e.options.val)}}this.sendCommand("birddogexpsetup","POST",o)}}),n?.expCompLvl&&(i.expCompLvl={name:n.expCompLvl.name,options:[{type:"dropdown",label:"Level Adjustment",id:"val",choices:n.expCompLvl.choices,default:n.expCompLvl.default},{type:"number",label:"Exposure Compensation Level ("+n.expCompLvl.range.min+" to "+n.expCompLvl.range.max+")",id:"value",default:n.expCompLvl.range.default,min:n.expCompLvl.range.min,max:n.expCompLvl.range.max,isVisible:e=>"value"===e.val}],callback:e=>{let a=0;switch(t=this.camera?.expCompLvl?this.camera.expCompLvl:n.expCompLvl.range.default,e.options.val){case"up":a=t<n.expCompLvl.range.max?++t:n.expCompLvl.range.max;break;case"down":a=t>n.expCompLvl.range.min?--t:n.expCompLvl.range.min;break;case"value":a=e.options.value}o={ExpCompLvl:String(a)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.exposure_mode&&(i.expM={name:n.exposure_mode.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.exposure_mode.choices,default:n.exposure_mode.default}],callback:e=>{o={ExpMode:String(e.options.val)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.gain&&(i.gain={name:n.gain.name,options:[{type:"dropdown",label:"Gain",id:"val",choices:n.gain.choices,default:n.gain.default},{type:"dropdown",label:"Value",id:"value",choices:n.gain.value.choices,default:n.gain.value.default,isVisible:e=>"value"===e.val}],callback:t=>{let a=this.camera?.gain?this.camera.gain:n.gain.default,i=this.camera?.gain_limit?this.camera.gain_limit:n.gain.value.choices[n.gain.value.choices.length-1].id;switch(t.options.val){case"up":e=parseInt(a)<parseInt(i)?++a:i;break;case"down":e=a>n.gain.value.choices[0]?.id?--a:n.gain.value.choices[0].id;break;case"value":e=parseFloat(t.options.value)<=i?t.options.value:i}o={GainLevel:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.gain_limit&&(i.gainLimit={name:n.gain_limit.name,options:[{type:"dropdown",label:"Gain Limit",id:"val",choices:n.gain_limit.choices,default:n.gain_limit.default},{type:"dropdown",label:"Value",id:"value",choices:n.gain.value.choices.slice(n.gain_limit.range.min-1,n.gain_limit.range.max+1),default:n.gain_limit.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.gain_limit?this.camera.gain_limit:n.gain_limit.range.default,a.options.val){case"up":e=t<n.gain_limit.range.max?++t:n.gain_limit.range.max;break;case"down":e=t>n.gain_limit.range.min?--t:n.gain_limit.range.min;break;case"value":e=a.options.value}o={GainLimit:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.gain_point&&(i.gainPoint={name:n.gain_point.name,options:[{type:"dropdown",label:"Gain Point",id:"val",choices:[...n.gain_point.choices,{id:"Toggle",label:"Toggle"}],default:n.gain_point.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.gain_point,n.gain_point.choices)),o={GainPoint:String(t)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.gain_point_position&&(i.gainPointPosition={name:n.gain_point_position.name,options:[{type:"dropdown",label:"Gain Point",id:"val",choices:n.gain_point_position.choices,default:n.gain_point_position.default},{type:"dropdown",label:"Value",id:"value",choices:n.gain.value.choices.slice(0,parseInt(this.camera.expsetup?.GainLimit?this.camera.expsetup?.GainLimit:n.gain.value.default,10)+1),default:n.gain.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.gain_point_position?this.camera.gain_point_position:n.gain.default,a.options.val){case"up":e=t<this.camera.gain_limit?++t:this.camera.gain_limit;break;case"down":e=t>n.gain.value.choices[0].id?--t:n.gain.value.choices[0].id;break;case"value":e=a.options.value}o={GainPointPosition:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.high_sensitivity&&(i.highSensitivity={name:n.high_sensitivity.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.high_sensitivity.choices,{id:"Toggle",label:"Toggle"}],default:n.high_sensitivity.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.high_sensitivity,n.high_sensitivity.choices)),o={HighSensitivity:String(t)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.iris&&(i.iris={name:n.iris.name,options:[{type:"dropdown",label:"Iris",id:"val",choices:n.iris.choices,default:n.iris.default},{type:"dropdown",label:"Value",id:"value",choices:n.iris.value.choices,default:n.iris.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.iris?this.camera.iris:n.iris.default,a.options.val){case"up":e=t===n.iris.value.range.closed?n.iris.value.range.min:t<n.iris.value.range.max?++t:n.iris.value.range.max;break;case"down":e=t===n.iris.value.range.min?n.iris.value.range.closed:t>n.iris.value.range.min?--t:n.iris.value.range.closed;break;case"value":e=a.options.value}o={IrisLevel:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.shutter_control_overwrite&&(i.shutter_control_overwrite={name:n.shutter_control_overwrite.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.shutter_control_overwrite.choices,{id:"Toggle",label:"Toggle"}],default:n.shutter_control_overwrite.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.shutter_control_overwrite,n.shutter_control_overwrite.choices)),o={ShutterControlOverwrite:String(t)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.shutter_max_speed&&(i.shutter_max_speed={name:n.shutter_max_speed.name,options:[{type:"dropdown",label:"Shutter Max Speed",id:"val",choices:n.shutter_max_speed.choices,default:n.shutter_max_speed.default},{type:"dropdown",label:"Value",id:"value",choices:n.shut?.["shutter_"+[this.camera.shutter_table]].slice(n.shutter_max_speed.range.min,n.shutter_max_speed.range.max+1),default:n.shutter_max_speed.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.shutter_max_speed?this.camera.shutter_max_speed:n.shutter_max_speed.range.default,a.options.val){case"up":e=t<n.shutter_max_speed.range.max?++t:n.shutter_max_speed.range.max;break;case"down":e=t>n.shutter_max_speed.range.min?--t:n.shutter_max_speed.range.min;break;case"value":e=a.options.value}o={ShutterMaxSpeed:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.shutter_min_speed&&(i.shutter_min_speed={name:n.shutter_min_speed.name,options:[{type:"dropdown",label:"Shutter Min Speed",id:"val",choices:n.shutter_min_speed.choices,default:n.shutter_min_speed.default},{type:"dropdown",label:"Value",id:"value",choices:n.shut?.["shutter_"+[this.camera.shutter_table]].slice(n.shutter_min_speed.range.min,parseInt(this.camera.expsetup?.ShutterMaxSpeed,10)+1),default:n.shutter_min_speed.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.shutter_min_speed?this.camera.shutter_min_speed:n.shutter_min_speed.range.default,a.options.val){case"up":e=t<this.camera.expsetup.ShutterMaxSpeed?++t:this.camera.expsetup.ShutterMaxSpeed;break;case"down":e=t>n.shutter_min_speed.range.min?--t:n.shutter_min_speed.range.min;break;case"value":e=a.options.value}o={ShutterMinSpeed:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.shutter_speed&&(i.shut={name:n.shutter_speed.name,options:[{type:"dropdown",label:"Shutter",id:"val",choices:n.shutter_speed.choices,default:n.shutter_speed.default},{type:"dropdown",label:"Value",id:"value",choices:n.shutter_speed?.["shutter_"+[this.camera.shutter_table]],default:n.shutter_speed.shutter_default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.shutter_speed?this.camera.shutter_speed:n.shutter_speed.shutter_default,a.options.val){case"up":e=t<n.shutter_speed.range.max?++t:n.shutter_speed.range.max;break;case"down":e=t>n.shutter_speed.range.min?--t:n.shutter_speed.range.min;break;case"value":e=a.options.value}o={ShutterSpeed:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.shutter_speed_overwrite&&(i.shutter_speed_overwrite={name:n.shutter_speed_overwrite.name,options:[{type:"dropdown",label:"Shutter Speed Overwrite",id:"val",choices:n.shutter_speed.choices,default:n.shutter_speed.default},{type:"number",label:"Hz ("+n.shutter_speed_overwrite.range.min+" to "+n.shutter_speed_overwrite.range.max+")",id:"value",default:n.shutter_speed_overwrite.range.default,min:n.shutter_speed_overwrite.range.min,max:n.shutter_speed_overwrite.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.shutter_speed_overwrite?this.camera.shutter_speed_overwrite:n.shutter_speed_overwrite.shutter_default,a.options.val){case"up":e=t<n.shutter_speed_overwrite.range.max?++t:n.shutter_speed_overwrite.range.max;break;case"down":e=t>n.shutter_speed_overwrite.range.min?--t:n.shutter_speed_overwrite.range.min;break;case"value":e=a.options.value}o={ShutterSpeedOverwrite:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.slow_shutter_en&&(i.slow_shutter_en={name:n.slow_shutter_en.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.slow_shutter_en.choices,{id:"Toggle",label:"Toggle"}],default:n.slow_shutter_en.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.slow_shutter_en,n.slow_shutter_en.choices)),o={SlowShutterEn:String(t)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.slow_shutter_limit&&(i.slow_shutter_limit={name:n.slow_shutter_limit.name,options:[{type:"dropdown",label:"Slow Shutter Limit",id:"val",choices:n.shutter_speed.choices,default:n.shutter_speed.default},{type:"dropdown",label:"Value",id:"value",choices:n.slow_shutter_limit?.["shutter_"+[this.camera.shutter_table]],default:n.slow_shutter_limit.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.slow_shutter_limit?this.camera.slow_shutter_limit:n.slow_shutter_limit.range.default,a.options.val){case"up":e=t<n.slow_shutter_limit.range.max?++t:n.slow_shutter_limit.range.max;break;case"down":e=t>n.slow_shutter_limit.range.min?--t:n.slow_shutter_limit.range.min;break;case"value":e=a.options.value}o={SlowShutterLimit:String(e)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.spotlight&&(i.spotlight={name:n.spotlight.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.spotlight.choices,{id:"Toggle",label:"Toggle"}],default:n.spotlight.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.spotlight,n.spotlight.choices)),o={Spotlight:String(t)},this.sendCommand("birddogexpsetup","POST",o)}}),n?.bg&&(i.bg={name:n.bg.name,options:[{type:"dropdown",label:"BG",id:"val",choices:n.bg.choices,default:n.bg.default},{type:"number",label:"Value ("+n.bg.range.min+" to "+n.bg.range.max+")",id:"value",default:n.bg.range.default,min:n.bg.range.min,max:n.bg.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.bg?this.camera.bg:n.bg.range.default,a.options.val){case"up":e=t<n.bg.range.max?++t:n.bg.range.max;break;case"down":e=t>n.bg.range.min?--t:n.bg.range.min;break;case"value":e=a.options.value}o={BG:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.br&&(i.br={name:n.br.name,options:[{type:"dropdown",label:"BR",id:"val",choices:n.br.choices,default:n.br.default},{type:"number",label:"Value ("+n.br.range.min+" to "+n.br.range.max+")",id:"value",default:n.br.range.default,min:n.br.range.min,max:n.br.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.br?this.camera.br:n.br.range.default,a.options.val){case"up":e=t<n.br.range.max?++t:n.br.range.max;break;case"down":e=t>n.br.range.min?--t:n.br.range.min;break;case"value":e=a.options.value}o={BR:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.blue_gain&&(i.blue_gain={name:n.blue_gain.name,options:[{type:"dropdown",label:"Blue Gain",id:"val",choices:n.blue_gain.choices,default:n.blue_gain.default},{type:"number",label:"Value ("+n.blue_gain.range.min+" to "+n.blue_gain.range.max+")",id:"value",default:n.blue_gain.range.default,min:n.blue_gain.range.min,max:n.blue_gain.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.blue_gain?this.camera.blue_gain:n.blue_gain.range.default,a.options.val){case"up":e=t<n.blue_gain.range.max?++t:n.blue_gain.range.max;break;case"down":e=t>n.blue_gain.range.min?--t:n.blue_gain.range.min;break;case"value":e=a.options.value}o={BlueGain:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.color_temp&&(i.color_temp={name:n.color_temp.name,options:[{type:"dropdown",label:"Color Temperature (k)",id:"val",choices:n.color_temp.choices,default:n.color_temp.default},{type:"dropdown",label:"Value",id:"value",choices:n.color_temp.value.choices,default:n.color_temp.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.color_temp?this.camera.color_temp.slice(0,2):n.color_temp.range.default,a.options.val){case"up":e=t<n.color_temp.range.max?++t:n.color_temp.range.max,e+="00";break;case"down":e=t>n.color_temp.range.min?--t:n.color_temp.range.min,e+="00";break;case"value":e=a.options.value}o={ColorTemp:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.gb&&(i.gb={name:n.gb.name,options:[{type:"dropdown",label:"GB",id:"val",choices:n.gb.choices,default:n.gb.default},{type:"number",label:"Value ("+n.gb.range.min+" to "+n.gb.range.max+")",id:"value",default:n.gb.range.default,min:n.gb.range.min,max:n.gr.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.gb?this.camera.gb:n.gb.range.default,a.options.val){case"up":e=t<n.gb.range.max?++t:n.gb.range.max;break;case"down":e=t>n.gb.range.min?--t:n.gb.range.min;break;case"value":e=a.options.value}o={GB:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.gr&&(i.gr={name:n.gr.name,options:[{type:"dropdown",label:"GR",id:"val",choices:n.gr.choices,default:n.gr.default},{type:"number",label:"Value ("+n.gr.range.min+" to "+n.gr.range.max+")",id:"value",default:n.gr.range.default,min:n.gr.range.min,max:n.gr.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.gr?this.camera.gr:n.gr.range.default,a.options.val){case"up":e=t<n.gr.range.max?++t:n.gr.range.max;break;case"down":e=t>n.gr.range.min?--t:n.gr.range.min;break;case"value":e=a.options.value}o={GR:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.level&&(i.level={name:n.level.name,options:[{type:"dropdown",label:"Level",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Level ("+n.level.range.min+" to "+n.level.range.max+")",id:"value",default:n.level.range.default,min:n.level.range.min,max:n.level.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.level?this.camera.level:n.level.range.default,a.options.val){case"up":e=t<n.level.range.max?++t:n.level.range.max;break;case"down":e=t>n.level.range.min?--t:n.level.range.min;break;case"value":e=a.options.value}o={Level:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.matrix&&(i.matrix={name:n.matrix.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.matrix.choices,{id:"Toggle",label:"Toggle"}],default:n.matrix.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.matrix,n.matrix.choices)),o={Matrix:String(t)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.offset&&(i.offset={name:n.offset.name,options:[{type:"dropdown",label:"Offset",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Value ("+n.offset.range.min+" to "+n.offset.range.max+")",id:"value",default:n.offset.range.default,min:n.offset.range.min,max:n.offset.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.offset?this.camera.offset:n.offset.range.default,a.options.val){case"up":e=t<n.offset.range.max?++t:n.offset.range.max;break;case"down":e=t>n.offset.range.min?--t:n.offset.range.min;break;case"value":e=a.options.value}o={Offset:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.phase&&(i.phase={name:n.phase.name,options:[{type:"dropdown",label:"Phase",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Value ("+n.phase.range.min+" to "+n.phase.range.max+")",id:"value",default:n.phase.range.default,min:n.phase.range.min,max:n.phase.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.phase?this.camera.phase:n.phase.range.default,a.options.val){case"up":e=t<n.phase.range.max?++t:n.phase.range.max;break;case"down":e=t>n.phase.range.min?--t:n.phase.range.min;break;case"value":e=a.options.value}o={Phase:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.rb&&(i.rb={name:n.rb.name,options:[{type:"dropdown",label:"RB",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Value ("+n.rb.range.min+" to "+n.rb.range.max+")",id:"value",default:n.rb.range.default,min:n.rb.range.min,max:n.rb.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.rb?this.camera.rb:n.rb.range.default,a.options.val){case"up":e=t<n.rb.range.max?++t:n.rb.range.max;break;case"down":e=t>n.rb.range.min?--t:n.rb.range.min;break;case"value":e=a.options.value}o={RB:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.rg&&(i.rg={name:n.rg.name,options:[{type:"dropdown",label:"RG",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Value ("+n.rg.range.min+" to "+n.rg.range.max+")",id:"value",default:n.rg.range.default,min:n.rg.range.min,max:n.rg.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.rg?this.camera.rg:n.rg.range.default,a.options.val){case"up":e=t<n.rg.range.max?++t:n.rg.range.max;break;case"down":e=t>n.rg.range.min?--t:n.rg.range.min;break;case"value":e=a.options.value}o={RG:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.red_gain&&(i.red_gain={name:n.red_gain.name,options:[{type:"dropdown",label:"Red Gain",id:"val",choices:n.red_gain.choices,default:n.red_gain.default},{type:"number",label:"Value ("+n.red_gain.range.min+" to "+n.red_gain.range.max+")",id:"value",default:n.red_gain.range.default,min:n.red_gain.range.min,max:n.red_gain.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.red_gain?this.camera.red_gain:n.red_gain.range.default,a.options.val){case"up":e=t<n.red_gain.range.max?++t:n.red_gain.range.max;break;case"down":e=t>n.red_gain.range.min?--t:n.red_gain.range.min;break;case"value":e=a.options.value}o={RedGain:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.select&&(i.select={name:n.select.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:n.select.choices,default:n.select.default}],callback:e=>{o={Select:String(e.options.val)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.speed&&(i.speed={name:n.speed.name,options:[{type:"dropdown",label:"Speed",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Value ("+n.speed.range.min+" to "+n.speed.range.max+")",id:"value",default:n.speed.range.default,min:n.speed.range.min,max:n.speed.range.max,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.speed?this.camera.speed:n.speed.range.default,a.options.val){case"up":e=t<n.speed.range.max?++t:n.speed.range.max;break;case"down":e=t>n.speed.range.min?--t:n.speed.range.min;break;case"value":e=a.options.value}o={Speed:String(e)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.wb_mode&&(i.wb_mode={name:n.wb_mode.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.wb_mode.choices,default:n.wb_mode.default}],callback:e=>{o={WbMode:String(e.options.val)},this.sendCommand("birddogwbsetup","POST",o)}}),n?.wbOnePush&&(i.wbOnePush={name:n.wbOnePush.name,options:[],description:"Camera must be in One Push mode in order to use this action",callback:e=>{a="",this.sendVISCACommand(a)}}),n?.backlight_com&&(i.backlight_com={name:n.backlight_com.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.backlight_com.choices,{id:"Toggle",label:"Toggle"}],default:n.backlight_com.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.backlight_com,n.backlight_com.choices)),o={BackLightCom:String(t)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.chroma_suppress&&(i.chroma_suppress={name:n.chroma_suppress.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.chroma_suppress.choices,default:n.chroma_suppress.default}],callback:e=>{o={ChromeSuppress:String(e.options.val)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.saturation&&(i.saturation={name:n.saturation.name,options:[{type:"dropdown",label:"Saturation",id:"val",choices:n.saturation.choices,default:n.saturation.default},{type:"number",label:"Value ("+n.saturation.range.min+" to "+n.saturation.range.max+")",id:"value",min:n.saturation.range.min,max:n.saturation.range.max,default:n.saturation.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.saturation?this.camera.saturation:n.saturation.range.default,a.options.val){case"up":e=t<n.saturation.range.max?++t:n.saturation.range.max;break;case"down":e=t>n.saturation.range.min?--t:n.saturation.range.min;break;case"value":e=a.options.value}o={Color:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.contrast&&(i.contrast={name:n.contrast.name,options:[{type:"dropdown",label:"Contrast",id:"val",choices:n.contrast.choices,default:n.contrast.default},{type:"number",label:"Value ("+n.contrast.range.min+" to "+n.contrast.range.max+")",id:"value",min:n.contrast.range.min,max:n.contrast.range.max,default:n.contrast.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.contrast?this.camera.contrast:n.contrast.range.default,a.options.val){case"up":e=t<n.contrast.range.max?++t:n.contrast.range.max;break;case"down":e=t>n.contrast.range.min?--t:n.contrast.range.min;break;case"value":e=a.options.value}o={Contrast:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.pictureEffect&&(i.pictureEffect={name:n.pictureEffect.name,options:[{type:"dropdown",label:"Effect",id:"val",choices:[...n.pictureEffect.choices,{id:"Toggle",label:"Toggle"}],default:n.pictureEffect.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.pictureEffect,n.pictureEffect.choices)),o={Effect:String(t)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.picFlip&&(i.picFlip={name:n.picFlip.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.picFlip.choices,{id:"Toggle",label:"Toggle"}],default:n.picFlip.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.picFlip,n.picFlip.choices)),o={Flip:String(t)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.gamma&&(i.gamma={name:n.gamma.name,options:[{type:"dropdown",label:"Gamma",id:"val",choices:n.gamma.choices,default:n.gamma.default},{type:"number",label:"Value ("+n.gamma.range.min+" to "+n.gamma.range.max+")",id:"value",min:n.gamma.range.min,max:n.gamma.range.max,default:n.gamma.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.gamma?this.camera.gamma:n.gamma.range.default,a.options.val){case"up":e=t<n.gamma.range.max?++t:n.gamma.range.max;break;case"down":e=t>n.gamma.range.min?--t:n.gamma.range.min;break;case"value":e=a.options.value}o={Gamma:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.highlight_comp&&(i.highlight_comp={name:n.highlight_comp.name,options:[{type:"dropdown",label:"Highlight Compensation",id:"val",choices:n.highlight_comp.choices,default:n.highlight_comp.default}],callback:e=>{o={HighlightComp:String(e.options.val)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.highlight_comp_mask&&(i.highlight_comp_mask={name:n.highlight_comp_mask.name,options:[{type:"dropdown",label:"Highlight Compensation Mask",id:"val",choices:n.highlight_comp_mask.choices,default:n.highlight_comp_mask.default},{type:"number",label:"Value ("+n.highlight_comp_mask.range.min+" to "+n.highlight_comp_mask.range.max+")",id:"value",min:n.highlight_comp_mask.range.min,max:n.highlight_comp_mask.range.max,default:n.highlight_comp_mask.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.highlight_comp_mask?this.camera.highlight_comp_mask:n.highlight_comp_mask.range.default,a.options.val){case"up":e=t<n.highlight_comp_mask.range.max?++t:n.highlight_comp_mask.range.max;break;case"down":e=t>n.highlight_comp_mask.range.min?--t:n.highlight_comp_mask.range.min;break;case"value":e=a.options.value}o={HighlightCompMask:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.hue&&(i.hue={name:n.hue.name,options:[{type:"dropdown",label:"Hue",id:"val",choices:n.hue.choices,default:n.hue.default},{type:"number",label:"Value ("+n.hue.range.min+" to "+n.hue.range.max+")",id:"value",min:n.hue.range.min,max:n.hue.range.max,default:n.hue.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.hue?this.camera.hue:n.hue.range.default,a.options.val){case"up":e=t<n.hue.range.max?++t:n.hue.range.max;break;case"down":e=t>n.hue.range.min?--t:n.hue.range.min;break;case"value":e=a.options.value}o={Hue:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.ir_cutfilter&&(i.ir_cutfilter={name:n.ir_cutfilter.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.ir_cutfilter.choices,default:n.ir_cutfilter.default}],callback:e=>{o={IRCutFilter:String(e.options.val)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.low_latency&&(i.low_latency={name:n.low_latency.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.low_latency.choices,{id:"Toggle",label:"Toggle"}],default:n.low_latency.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.low_latency,n.low_latency.choices)),o={LowLatency:String(t)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.picMirror&&(i.picMirror={name:n.picMirror.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.picMirror.choices,{id:"Toggle",label:"Toggle"}],default:n.picMirror.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.picMirror,n.picMirror.choices)),o={Mirror:String(t)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.nd_filter&&(i.nd_filter={name:n.nd_filter.name,options:[{type:"dropdown",label:"ND Filter",id:"val",choices:n.nd_filter.choices,default:n.nd_filter.default},{type:"number",label:"Value ("+n.nd_filter.range.min+" to "+n.nd_filter.range.max+")",id:"value",min:n.nd_filter.range.min,max:n.nd_filter.range.max,default:n.nd_filter.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.nd_filter?this.camera.nd_filter:n.nd_filter.range.default,a.options.val){case"up":e=t<n.nd_filter.range.max?++t:n.nd_filter.range.max;break;case"down":e=t>n.nd_filter.range.min?--t:n.nd_filter.range.min;break;case"value":e=a.options.value}o={NDFilter:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.noise_reduction&&(i.noise_reduction={name:n.noise_reduction.name,options:[{type:"dropdown",label:"Noise Reduction",id:"val",choices:n.noise_reduction.choices,default:n.noise_reduction.default},{type:"dropdown",label:"Value",id:"value",choices:n.noise_reduction.value.choices,default:n.noise_reduction.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.noise_reduction?this.camera.noise_reduction:n.noise_reduction.value.default,a.options.val){case"up":e=t<n.noise_reduction.range.max?++t:n.noise_reduction.range.max;break;case"down":e=t>n.noise_reduction.range.min?--t:n.noise_reduction.range.min;break;case"value":e=a.options.value}o={NoiseReduction:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.sharpness&&(i.sharpness={name:n.sharpness.name,options:[{type:"dropdown",label:"Sharpness",id:"val",choices:n.sharpness.choices,default:n.sharpness.default},{type:"number",label:"Value ("+n.sharpness.range.min+" to "+n.sharpness.range.max+")",id:"value",min:n.sharpness.range.min,max:n.sharpness.range.max,default:n.sharpness.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.sharpness?this.camera.sharpness:n.sharpness.range.default,a.options.val){case"up":e=t<n.sharpness.range.max?++t:n.sharpness.range.max;break;case"down":e=t>n.sharpness.range.min?--t:n.sharpness.range.min;break;case"value":e=a.options.value}o={Sharpness:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.stabilizer&&(i.stabilizer={name:n.stabilizer.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.stabilizer.choices,{id:"Toggle",label:"Toggle"}],default:n.stabilizer.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.stabilizer,n.stabilizer.choices)),o={Stabilizer:String(t)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.threed_nr&&(i.threed_nr={name:n.threed_nr.name,options:[{type:"dropdown",label:"3D NR",id:"val",choices:n.threed_nr.choices,default:n.threed_nr.default},{type:"dropdown",label:"Value",id:"val",choices:n.threed_nr.value.choices,default:n.threed_nr.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.threed_nr?this.camera.threed_nr:n.threed_nr.value.default,a.options.val){case"up":e=t<n.threed_nr.range.max?++t:n.threed_nr.range.max;break;case"down":e=t>n.threed_nr.range.min?--t:n.threed_nr.range.min;break;case"value":e=a.options.value}o={ThreeDNR:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.twod_nr&&(i.twod_nr={name:n.twod_nr.name,options:[{type:"dropdown",label:"2D NR",id:"val",choices:n.twod_nr.choices,default:n.twod_nr.default},{type:"dropdown",label:"Value",id:"val",choices:n.twod_nr.value.choices,default:n.twod_nr.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.twod_nr?this.camera.twod_nr:n.twod_nr.value.default,a.options.val){case"up":e=t<n.twod_nr.range.max?++t:n.twod_nr.range.max;break;case"down":e=t>n.twod_nr.range.min?--t:n.twod_nr.range.min;break;case"value":e=a.options.value}o={TWODNR:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.wide_dynamic_range&&(i.wide_dynamic_range={name:n.wide_dynamic_range.name,options:[{type:"dropdown",label:"Wide Dynamic Range",id:"val",choices:n.wide_dynamic_range.choices,default:n.wide_dynamic_range.default},{type:"dropdown",label:"Value",id:"value",choices:n.wide_dynamic_range.value.choices,default:n.wide_dynamic_range.value.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.wide_dynamic_range?this.camera.wide_dynamic_range:n.wide_dynamic_range.value.default,a.options.val){case"up":e=t<n.wide_dynamic_range.range.max?++t:n.wide_dynamic_range.range.max;break;case"down":e=t>n.wide_dynamic_range.range.min?--t:n.wide_dynamic_range.range.min;break;case"value":e=a.options.value}o={WideDynamicRange:String(e)},this.sendCommand("birddogpicsetup","POST",o)}}),n?.cm_blue_gain&&(i.cm_blue_gain={name:n.cm_blue_gain.name,options:[{type:"dropdown",label:"Blue Gain",id:"val",choices:n.cm_blue_gain.choices,default:n.cm_blue_gain.default},{type:"number",label:"Value ("+n.cm_blue_gain.range.min+" to "+n.cm_blue_gain.range.max+")",id:"value",min:n.cm_blue_gain.range.min,max:n.cm_blue_gain.range.max,default:n.cm_blue_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_blue_gain?this.camera.cm_blue_gain:n.cm_blue_gain.range.default,a.options.val){case"up":e=t<n.cm_blue_gain.range.max?++t:n.cm_blue_gain.range.max;break;case"down":e=t>n.cm_blue_gain.range.min?--t:n.cm_blue_gain.range.min;break;case"value":e=a.options.value}o={BlueGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_blue_hue&&(i.cm_blue_hue={name:n.cm_blue_hue.name,options:[{type:"dropdown",label:"Blue Hue",id:"val",choices:n.cm_blue_hue.choices,default:n.cm_blue_hue.default},{type:"number",label:"Value ("+n.cm_blue_hue.range.min+" to "+n.cm_blue_hue.range.max+")",id:"value",min:n.cm_blue_hue.range.min,max:n.cm_blue_hue.range.max,default:n.cm_blue_hue.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_blue_hue?this.camera.cm_blue_hue:n.cm_blue_hue.range.default,a.options.val){case"up":e=t<n.cm_blue_hue.range.max?++t:n.cm_blue_hue.range.max;break;case"down":e=t>n.cm_blue_hue.range.min?--t:n.cm_blue_hue.range.min;break;case"value":e=a.options.value}o={BlueHue:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_color_gain&&(i.cm_color_gain={name:n.cm_color_gain.name,options:[{type:"dropdown",label:"Color Gain",id:"val",choices:n.cm_color_gain.choices,default:n.cm_color_gain.default},{type:"number",label:"Value ("+n.cm_color_gain.range.min+" to "+n.cm_color_gain.range.max+")",id:"value",min:n.cm_color_gain.range.min,max:n.cm_color_gain.range.max,default:n.cm_color_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_color_gain?this.camera.cm_color_gain:n.cm_color_gain.range.default,a.options.val){case"up":e=t<n.cm_color_gain.range.max?++t:n.cm_color_gain.range.max;break;case"down":e=t>n.cm_color_gain.range.min?--t:n.cm_color_gain.range.min;break;case"value":e=a.options.value}o={ColourGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_cyan_gain&&(i.cm_cyan_gain={name:n.cm_cyan_gain.name,options:[{type:"dropdown",label:"Cyan Gain",id:"val",choices:n.cm_cyan_gain.choices,default:n.cm_cyan_gain.default},{type:"number",label:"Value ("+n.cm_cyan_gain.range.min+" to "+n.cm_cyan_gain.range.max+")",id:"value",min:n.cm_cyan_gain.range.min,max:n.cm_cyan_gain.range.max,default:n.cm_cyan_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_cyan_gain?this.camera.cm_cyan_gain:n.cm_cyan_gain.range.default,a.options.val){case"up":e=t<n.cm_cyan_gain.range.max?++t:n.cm_cyan_gain.range.max;break;case"down":e=t>n.cm_cyan_gain.range.min?--t:n.cm_cyan_gain.range.min;break;case"value":e=a.options.value}o={CyanGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_cyan_hue&&(i.cm_cyan_hue={name:n.cm_cyan_hue.name,options:[{type:"dropdown",label:"Cyan Hue",id:"val",choices:n.cm_cyan_hue.choices,default:n.cm_cyan_hue.default},{type:"number",label:"Value ("+n.cm_cyan_hue.range.min+" to "+n.cm_cyan_hue.range.max+")",id:"value",min:n.cm_cyan_hue.range.min,max:n.cm_cyan_hue.range.max,default:n.cm_cyan_hue.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_cyan_hue?this.camera.cm_cyan_hue:n.cm_cyan_hue.range.default,a.options.val){case"up":e=t<n.cm_cyan_hue.range.max?++t:n.cm_cyan_hue.range.max;break;case"down":e=t>n.cm_cyan_hue.range.min?--t:n.cm_cyan_hue.range.min;break;case"value":e=a.options.value}o={CyanHue:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_green_gain&&(i.cm_green_gain={name:n.cm_green_gain.name,options:[{type:"dropdown",label:"Green Gain",id:"val",choices:n.cm_green_gain.choices,default:n.cm_green_gain.default},{type:"number",label:"Value ("+n.cm_green_gain.range.min+" to "+n.cm_green_gain.range.max+")",id:"value",min:n.cm_green_gain.range.min,max:n.cm_green_gain.range.max,default:n.cm_green_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_green_gain?this.camera.cm_green_gain:n.cm_green_gain.range.default,a.options.val){case"up":e=t<n.cm_green_gain.range.max?++t:n.cm_green_gain.range.max;break;case"down":e=t>n.cm_green_gain.range.min?--t:n.cm_green_gain.range.min;break;case"value":e=a.options.value}o={GreenGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_green_hue&&(i.cm_green_hue={name:n.cm_green_hue.name,options:[{type:"dropdown",label:"Green Hue",id:"val",choices:n.cm_green_hue.choices,default:n.cm_green_hue.default},{type:"number",label:"Value ("+n.cm_green_hue.range.min+" to "+n.cm_green_hue.range.max+")",id:"value",min:n.cm_green_hue.range.min,max:n.cm_green_hue.range.max,default:n.cm_green_hue.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_green_hue?this.camera.cm_green_hue:n.cm_green_hue.range.default,a.options.val){case"up":e=t<n.cm_green_hue.range.max?++t:n.cm_green_hue.range.max;break;case"down":e=t>n.cm_green_hue.range.min?--t:n.cm_green_hue.range.min;break;case"value":e=a.options.value}o={GreenHue:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_hue_phase&&(i.cm_hue_phase={name:n.cm_hue_phase.name,options:[{type:"dropdown",label:"Hue Phase",id:"val",choices:n.cm_hue_phase.choices,default:n.cm_hue_phase.default},{type:"number",label:"Value ("+n.cm_hue_phase.range.min+" to "+n.cm_hue_phase.range.max+")",id:"value",min:n.cm_hue_phase.range.min,max:n.cm_hue_phase.range.max,default:n.cm_hue_phase.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_hue_phase?this.camera.cm_hue_phase:n.cm_hue_phase.range.default,a.options.val){case"up":e=t<n.cm_hue_phase.range.max?++t:n.cm_hue_phase.range.max;break;case"down":e=t>n.cm_hue_phase.range.min?--t:n.cm_hue_phase.range.min;break;case"value":e=a.options.value}o={HuePhase:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_mag_gain&&(i.cm_mag_gain={name:n.cm_mag_gain.name,options:[{type:"dropdown",label:"Magenta Gain",id:"val",choices:n.cm_mag_gain.choices,default:n.cm_mag_gain.default},{type:"number",label:"Value ("+n.cm_mag_gain.range.min+" to "+n.cm_mag_gain.range.max+")",id:"value",min:n.cm_mag_gain.range.min,max:n.cm_mag_gain.range.max,default:n.cm_mag_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_mag_gain?this.camera.cm_mag_gain:n.cm_mag_gain.range.default,a.options.val){case"up":e=t<n.cm_mag_gain.range.max?++t:n.cm_mag_gain.range.max;break;case"down":e=t>n.cm_mag_gain.range.min?--t:n.cm_mag_gain.range.min;break;case"value":e=a.options.value}o={MagGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_mag_hue&&(i.cm_mag_hue={name:n.cm_mag_hue.name,options:[{type:"dropdown",label:"Magenta Hue",id:"val",choices:n.cm_mag_hue.choices,default:n.cm_mag_hue.default},{type:"number",label:"Value ("+n.cm_mag_hue.range.min+" to "+n.cm_mag_hue.range.max+")",id:"value",min:n.cm_mag_hue.range.min,max:n.cm_mag_hue.range.max,default:n.cm_mag_hue.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_mag_hue?this.camera.cm_mag_hue:n.cm_mag_hue.range.default,a.options.val){case"up":e=t<n.cm_mag_hue.range.max?++t:n.cm_mag_hue.range.max;break;case"down":e=t>n.cm_mag_hue.range.min?--t:n.cm_mag_hue.range.min;break;case"value":e=a.options.value}o={MagHue:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_red_gain&&(i.cm_red_gain={name:n.cm_red_gain.name,options:[{type:"dropdown",label:"Red Gain",id:"val",choices:n.cm_red_gain.choices,default:n.cm_red_gain.default},{type:"number",label:"Value ("+n.cm_red_gain.range.min+" to "+n.cm_red_gain.range.max+")",id:"value",min:n.cm_red_gain.range.min,max:n.cm_red_gain.range.max,default:n.cm_red_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_red_gain?this.camera.cm_red_gain:n.cm_red_gain.range.default,a.options.val){case"up":e=t<n.cm_red_gain.range.max?++t:n.cm_red_gain.range.max;break;case"down":e=t>n.cm_red_gain.range.min?--t:n.cm_red_gain.range.min;break;case"value":e=a.options.value}o={RedGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_red_hue&&(i.cm_red_hue={name:n.cm_red_hue.name,options:[{type:"dropdown",label:"Red Hue",id:"val",choices:n.cm_red_hue.choices,default:n.cm_red_hue.default},{type:"number",label:"Value ("+n.cm_red_hue.range.min+" to "+n.cm_red_hue.range.max+")",id:"value",min:n.cm_red_hue.range.min,max:n.cm_red_hue.range.max,default:n.cm_red_hue.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_red_hue?this.camera.cm_red_hue:n.cm_red_hue.range.default,a.options.val){case"up":e=t<n.cm_red_hue.range.max?++t:ODEL_ACTIONS.cm_red_hue.range.max;break;case"down":e=t>n.cm_red_hue.range.min?--t:ODEL_ACTIONS.cm_red_hue.range.min;break;case"value":e=a.options.value}o={RedHue:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_yellow_gain&&(i.cm_yellow_gain={name:n.cm_yellow_gain.name,options:[{type:"dropdown",label:"Yellow Gain",id:"val",choices:n.cm_yellow_gain.choices,default:n.cm_yellow_gain.default},{type:"number",label:"Value ("+n.cm_yellow_gain.range.min+" to "+n.cm_yellow_gain.range.max+")",id:"value",min:n.cm_yellow_gain.range.min,max:n.cm_yellow_gain.range.max,default:n.cm_yellow_gain.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_yellow_gain?this.camera.cm_yellow_gain:n.cm_yellow_gain.range.default,a.options.val){case"up":e=t<n.cm_yellow_gain.range.max?++t:n.cm_yellow_gain.range.max;break;case"down":e=t>n.cm_yellow_gain.range.min?--t:n.cm_yellow_gain.range.min;break;case"value":e=a.options.value}o={YellowGain:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.cm_yellow_hue&&(i.cm_yellow_hue={name:n.cm_yellow_hue.name,options:[{type:"dropdown",label:"Yellow Hue",id:"val",choices:n.cm_yellow_hue.choices,default:n.cm_yellow_hue.default},{type:"number",label:"Value ("+n.cm_yellow_hue.range.min+" to "+n.cm_yellow_hue.range.max+")",id:"value",min:n.cm_yellow_hue.range.min,max:n.cm_yellow_hue.range.max,default:n.cm_yellow_hue.range.default,isVisible:e=>"value"==e.val}],callback:a=>{switch(t=this.camera?.cm_yellow_hue?this.camera.cm_yellow_hue:n.cm_yellow_hue.range.default,a.options.val){case"up":e=t<n.cm_yellow_hue.range.max?++t:n.cm_yellow_hue.range.max;break;case"down":e=t>n.cm_yellow_hue.range.min?--t:n.cm_yellow_hue.range.min;break;case"value":e=a.options.value}o={YellowHue:String(e)},this.sendCommand("birddogcmsetup","POST",o)}}),n?.brightness&&(i.brightness={name:n.brightness.name,options:[{type:"dropdown",label:"Brightness",id:"val",choices:n.brightness.choices,default:n.brightness.default},{type:"number",label:"Value ("+n.brightness.range.min+" to "+n.brightness.range.max+")",id:"value",min:n.brightness.range.min,max:n.brightness.range.max,default:n.brightness.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.brightness?this.camera.brightness:n.brightness.range.default,a.options.val){case"up":e=t<n.brightness.range.max?++t:n.brightness.range.max;break;case"down":e=t>n.brightness.range.min?--t:n.brightness.range.min;break;case"value":e=a.options.value}o={Brightness:String(e)},this.sendCommand("birddogadvancesetup","POST",o)}}),n?.brightness_comp&&(i.brightness_comp={name:n.brightness_comp.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.brightness_comp.choices,default:n.brightness_comp.default}],callback:e=>{o={BrightnessComp:String(e.options.val)},this.sendCommand("birddogadvancesetup","POST",o)}}),n?.comp_level&&(i.comp_level={name:n.comp_level.name,options:[{type:"dropdown",label:"Level",id:"val",choices:n.comp_level.choices,default:n.comp_level.default}],callback:e=>{o={CompLevel:String(e.options.val)},this.sendCommand("birddogadvancesetup","POST",o)}}),n?.gamma_offset&&(i.gamma_offset={name:n.gamma_offset.name,options:[{type:"dropdown",label:"Gamma Offset",id:"val",choices:n.gamma_offset.choices,default:n.gamma_offset.default},{type:"number",label:"Value ("+n.gamma_offset.range.min+" to "+n.gamma_offset.range.max+")",id:"value",min:n.gamma_offset.range.min,max:n.gamma_offset.range.max,default:n.gamma_offset.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.gamma_offset?this.camera.gamma_offset:n.gamma_offset.range.default,a.options.val){case"up":e=t<n.gamma_offset.range.max?++t:n.gamma_offset.range.max;break;case"down":e=t>n.gamma_offset.range.min?--t:n.gamma_offset.range.min;break;case"value":e=a.options.value}o={GammaOffset:String(e)},this.sendCommand("birddogadvancesetup","POST",o)}}),n?.high_resolution&&(i.high_resolution={name:n.high_resolution.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.high_resolution.choices,{id:"Toggle",label:"Toggle"}],default:n.high_resolution.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.high_resolution,n.high_resolution.choices)),o={HighResolution:String(t)},this.sendCommand("birddogadvancesetup","POST",o)}}),n?.video_enhancement&&(i.video_enhancement={name:n.video_enhancement.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.video_enhancement.choices,{id:"Toggle",label:"Toggle"}],default:n.video_enhancement.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.video_enhancement,n.video_enhancement.choices)),o={VideoEnhancement:String(t)},this.sendCommand("birddogadvancesetup","POST",o)}}),n?.aux&&(i.aux={name:n.aux.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.aux.choices,{id:"Toggle",label:"Toggle"}],default:n.aux.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.aux,n.aux.choices)),o={Aux:String(t)},this.sendCommand("birddogexternalsetup","POST",o)}}),n?.rain_wiper&&(i.rain_wiper={name:n.rain_wiper.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.rain_wiper.choices,{id:"Toggle",label:"Toggle"}],default:n.rain_wiper.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.rain_wiper,n.rain_wiper.choices)),o={RainWiper:String(t)},this.sendCommand("birddogexternalsetup","POST",o)}}),n?.v12vout&&(i.v12vout={name:n.v12vout.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.v12vout.choices,{id:"Toggle",label:"Toggle"}],default:n.v12vout.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.v12vout,n.v12vout.choices)),o={V12vOut:String(t)},this.sendCommand("birddogexternalsetup","POST",o)}}),n?.bandwidth&&(i.bandwidth={name:n.bandwidth.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.bandwidth.choices,default:n.bandwidth.default}],callback:e=>{o={Bandwidth:String(e.options.val)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.bw_balance&&(i.bw_balance={name:n.bw_balance.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.bw_balance.choices,default:n.bw_balance.default}],callback:e=>{o={BwBandwidth:String(e.options.val)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.crispening&&(i.crispening={name:n.crispening.name,options:[{type:"dropdown",label:"Crispening",id:"val",choices:n.crispening.choices,default:n.crispening.default},{type:"number",label:"Value ("+n.crispening.range.min+" to "+n.crispening.range.max+")",id:"value",min:n.crispening.range.min,max:n.crispening.range.max,default:n.crispening.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.crispening?this.camera.crispening:n.crispening.range.default,a.options.val){case"up":e=t<n.crispening.range.max?++t:n.crispening.range.max;break;case"down":e=t>n.crispening.range.min?--t:n.crispening.range.min;break;case"value":e=a.options.value}o={Crispening:String(e)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.detail&&(i.detail={name:n.detail.name,options:[{type:"dropdown",label:"On / Off",id:"val",choices:[...n.detail.choices,{id:"Toggle",label:"Toggle"}],default:n.detail.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.detail,n.detail.choices)),o={Detail:String(t)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.highlight_detail&&(i.highlight_detail={name:n.highlight_detail.name,options:[{type:"dropdown",label:"Highlight Detail",id:"val",choices:n.highlight_detail.choices,default:n.highlight_detail.default},{type:"number",label:"Value ("+n.highlight_detail.range.min+" to "+n.highlight_detail.range.max+")",id:"value",min:n.highlight_detail.range.min,max:n.highlight_detail.range.max,default:n.highlight_detail.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.highlight_detail?this.camera.highlight_detail:n.highlight_detail.range.default,a.options.val){case"up":e=t<n.highlight_detail.range.max?++t:n.highlight_detail.range.max;break;case"down":e=t>n.highlight_detail.range.min?--t:n.highlight_detail.range.min;break;case"value":e=a.options.value}o={HighlightDetail:String(e)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.hv_balance&&(i.hv_balance={name:n.hv_balance.name,options:[{type:"dropdown",label:"Hv Balance",id:"val",choices:n.hv_balance.choices,default:n.hv_balance.default},{type:"number",label:"Value ("+n.hv_balance.range.min+" to "+n.hv_balance.range.max+")",id:"value",min:n.hv_balance.range.min,max:n.hv_balance.range.max,default:n.hv_balance.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.hv_balance?this.camera.hv_balance:n.hv_balance.range.default,a.options.val){case"up":e=t<n.hv_balance.range.max?++t:n.hv_balance.range.max;break;case"down":e=t>n.hv_balance.range.min?--t:n.hv_balance.range.min;break;case"value":e=a.options.value}o={HvBalance:String(e)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.limit&&(i.limit={name:n.limit.name,options:[{type:"dropdown",label:"Limit",id:"val",choices:n.limit.choices,default:n.limit.default},{type:"number",label:"Value ("+n.limit.range.min+" to "+n.limit.range.max+")",id:"value",min:n.limit.range.min,max:n.limit.range.max,default:n.limit.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.limit?this.camera.limit:n.limit.range.default,a.options.val){case"up":e=t<n.limit.range.max?++t:n.limit.range.max;break;case"down":e=t>n.limit.range.min?--t:n.limit.range.min;break;case"value":e=a.options.value}o={Limit:String(e)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.super_low&&(i.super_low={name:n.super_low.name,options:[{type:"dropdown",label:"Super Low",id:"val",choices:n.super_low.choices,default:n.super_low.default},{type:"number",label:"Value ("+n.super_low.range.min+" to "+n.super_low.range.max+")",id:"value",min:n.super_low.range.min,max:n.super_low.range.max,default:n.super_low.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.super_low?this.camera.super_low:n.super_low.range.default,a.options.val){case"up":e=t<n.super_low.range.max?++sucurrentValueper_low:n.super_low.range.max;break;case"down":e=t>n.super_low.range.min?--t:n.super_low.range.min;break;case"value":e=a.options.value}o={SuperLow:String(e)},this.sendCommand("birddogdetsetup","POST",o)}}),n?.black_gamma_level&&(i.black_gamma_level={name:n.black_gamma_level.name,options:[{type:"dropdown",label:"Black Gamma Level",id:"val",choices:n.black_gamma_level.choices,default:n.black_gamma_level.default},{type:"number",label:"Value ("+n.black_gamma_level.range.min+" to "+n.black_gamma_level.range.max+")",id:"value",min:n.black_gamma_level.range.min,max:n.black_gamma_level.range.max,default:n.black_gamma_level.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.black_gamma_level?this.camera.black_gamma_level:n.black_gamma_level.range.default,a.options.val){case"up":e=t<n.black_gamma_level.range.max?++t:n.black_gamma_level.range.max;break;case"down":e=t>n.black_gamma_level.range.max?--t:n.black_gamma_level.range.min;break;case"value":e=a.options.value}o={BlackGammaLevel:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.black_level&&(i.black_level={name:n.black_level.name,options:[{type:"dropdown",label:"Black Level",id:"val",choices:n.black_level.choices,default:n.black_level.default},{type:"number",label:"Value ("+n.black_level.range.min+" to "+n.black_level.range.max+")",id:"value",min:n.black_level.range.min,max:n.black_level.range.max,default:n.black_level.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.black_level?this.camera.black_level:n.black_level.range.default,a.options.val){case"up":e=t<n.black_level.range.max?++t:n.black_level.range.max;break;case"down":e=t>n.black_level.range.max?--t:n.black_level.range.min;break;case"value":e=a.options.value}o={BlackLevel:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.black_level_range&&(i.black_level_range={name:n.black_level_range.name,options:[{type:"dropdown",label:"Black Level Range",id:"val",choices:n.black_level_range.choices,default:n.black_level_range.default}],callback:e=>{o={BlackLevelRange:String(e.options.val)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.effect&&(i.effect={name:n.effect.name,options:[{type:"dropdown",label:"Effect",id:"val",choices:n.effect.choices,default:n.effect.default},{type:"number",label:"Value ("+n.effect.range.min+" to "+n.effect.range.max+")",id:"value",min:n.effect.range.min,max:n.effect.range.max,default:n.effect.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.effect?this.camera.effect:n.effect.range.default,a.options.val){case"up":e=t<n.effect.range.max?++t:n.effect.range.max;break;case"down":e=t>n.effect.range.max?--t:n.effect.range.min;break;case"value":e=a.options.value}o={Effect:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.level&&(i.level={name:n.level.name,options:[{type:"dropdown",label:"Level",id:"val",choices:n.level.choices,default:n.level.default},{type:"number",label:"Value ("+n.level.range.min+" to "+n.level.range.max+")",id:"value",min:n.level.range.min,max:n.level.range.max,default:n.level.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.level?this.camera.level:n.level.range.default,a.options.val){case"up":e=t<n.level.range.max?++t:n.level.range.max;break;case"down":e=t>n.level.range.max?--t:n.level.range.min;break;case"value":e=a.options.value}o={Level:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.offset&&(i.offset={name:n.offset.name,options:[{type:"dropdown",label:"Offset",id:"val",choices:n.offset.choices,default:n.offset.default},{type:"number",label:"Value ("+n.offset.range.min+" to "+n.offset.range.max+")",id:"value",min:n.offset.range.min,max:n.offset.range.max,default:n.offset.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.offset?this.camera.offset:n.offset.range.default,a.options.val){case"up":e=t<n.offset.range.max?++t:n.offset.range.max;break;case"down":e=t>n.offset.range.max?--t:n.offset.range.min;break;case"value":e=a.options.value}o={Offset:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.pattern&&(i.pattern={name:n.pattern.name,options:[{type:"dropdown",label:"Pattern",id:"val",choices:n.pattern.choices,default:n.pattern.default},{type:"number",label:"Value ("+n.pattern.range.min+" to "+n.pattern.range.max+")",id:"value",min:n.pattern.range.min,max:n.pattern.range.max,default:n.pattern.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.pattern?this.camera.pattern:n.pattern.range.default,a.options.val){case"up":e=t<n.pattern.range.max?++t:n.pattern.range.max;break;case"down":e=t>n.pattern.range.max?--t:n.pattern.range.min;break;case"value":e=a.options.value}o={Pattern:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.pattern_fine&&(i.pattern_fine={name:n.pattern_fine.name,options:[{type:"dropdown",label:"Pattern Fine",id:"val",choices:n.pattern_fine.choices,default:n.pattern_fine.default},{type:"number",label:"Value ("+n.pattern_fine.range.min+" to "+n.pattern_fine.range.max+")",id:"value",min:n.pattern_fine.range.min,max:n.pattern_fine.range.max,default:n.pattern_fine.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.pattern_fine?this.camera.pattern_fine:n.pattern_fine.range.default,a.options.val){case"up":e=t<n.pattern_fine.range.max?++t:n.pattern_fine.range.max;break;case"down":e=t>n.pattern_fine.range.max?--t:n.pattern_fine.range.min;break;case"value":e=a.options.value}o={PatternFine:String(e)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.settings&&(i.settings={name:n.settings.name,options:[{type:"dropdown",label:"Settings",id:"val",choices:n.settings.choices,default:n.settings.default}],callback:e=>{o={Settings:String(e.options.val)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.visibility_enhancer&&(i.visibility_enhancer={name:n.visibility_enhancer.name,options:[{type:"dropdown",label:"Settings",id:"val",choices:[...n.visibility_enhancer.choices,{id:"Toggle",label:"Toggle"}],default:n.visibility_enhancer.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.visibility_enhancer,n.visibility_enhancer.choices)),o={VisibilityEnhancer:String(t)},this.sendCommand("birddoggammasetup","POST",o)}}),n?.scope_gamma_gain&&(i.scope_gamma_gain={name:n.scope_gamma_gain.name,options:[{type:"dropdown",label:"Gamma Gain",id:"val",choices:n.scope_gamma_gain.choices,default:n.scope_gamma_gain.default},{type:"number",label:"Value ("+n.scope_gamma_gain.range.min+" to "+n.scope_gamma_gain.range.max+")",id:"value",min:n.scope_gamma_gain.range.min,max:n.scope_gamma_gain.range.max,default:n.scope_gamma_gain.range.default,isVisible:e=>"value"===e.val}],callback:a=>{switch(t=this.camera?.scope_gamma_gain?this.camera.scope_gamma_gain:n.scope_gamma_gain.range.default,a.options.val){case"up":e=t<n.scope_gamma_gain.range.max?++t:n.scope_gamma_gain.range.max;break;case"down":e=t>n.scope_gamma_gain.range.min?--t:n.scope_gamma_gain.range.min;break;case"value":e=a.options.value}o={GammaGain:String(e)},this.sendCommand("birddogscope","POST",o)}}),n?.scope_mode&&(i.scope_mode={name:n.scope_mode.name,options:[{type:"dropdown",label:"Mode",id:"val",choices:n.scope_mode.choices,default:n.scope_mode.default}],callback:e=>{o={Mode:String(e.options.val)},this.sendCommand("birddogscope","POST",o)}}),n?.scope_position&&(i.scope_position={name:n.scope_position.name,options:[{type:"dropdown",label:"Position",id:"val",choices:n.scope_position.choices,default:n.scope_position.default}],callback:e=>{o={Position:String(e.options.val)},this.sendCommand("birddogscope","POST",o)}}),n?.scope_preview&&(i.scope_preview={name:n.scope_preview.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.scope_preview.choices,{id:"Toggle",label:"Toggle"}],default:n.scope_preview.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.scope_preview,n.scope_preview.choices)),o={PreviewEnable:String(t)},this.sendCommand("birddogscope","POST",o)}}),n?.scope_program&&(i.scope_program={name:n.scope_program.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.scope_program.choices,{id:"Toggle",label:"Toggle"}],default:n.scope_program.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.scope_program,n.scope_program.choices)),o={ProgramEnable:String(t)},this.sendCommand("birddogscope","POST",o)}}),n?.scope_size&&(i.scope_size={name:n.scope_size.name,options:[{type:"dropdown",label:"Small/Large",id:"val",choices:[...n.scope_size.choices,{id:"Toggle",label:"Toggle"}],default:n.scope_size.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.scope_size,n.scope_size.choices)),o={DoubleSizeEnable:String(t)},this.sendCommand("birddogscope","POST",o)}}),n?.scope_transparency&&(i.scope_transparency={name:n.scope_transparency.name,options:[{type:"dropdown",label:"On/Off",id:"val",choices:[...n.scope_transparency.choices,{id:"Toggle",label:"Toggle"}],default:n.scope_transparency.default}],callback:e=>{let t=e.options.val;"Toggle"==t&&(t=b(this.camera.scope_transparency,n.scope_transparency.choices)),o={TransparencyEnable:String(t)},this.sendCommand("birddogscope","POST",o)}}),i.custom={name:n.custom.name,options:[{type:"textinput",label:"Custom command, must start with 8",id:"custom",regex:"/^8[0-9a-fA-F]\\s*([0-9a-fA-F]\\s*)+$/",width:6}],callback:e=>{let t=e.options.custom.replace(/\s+/g,""),o=Buffer.from(t,"hex");a=o.toString("binary"),128==(240&o[0])?this.sendVISCACommand(a):this.log("error",'Error, command "'+e.options.custom+'" does not start with 8')}},n?.defog&&(i.defog={name:"VISCA - Defog",options:[{type:"dropdown",label:"On / Off",id:"val",choices:[{id:"0",label:"Off"},{id:"1",label:"low"},{id:"2",label:"mid"},{id:"3",label:"high"}],default:"0"}],callback:e=>{switch(e.options.val){case"0":case"3":a=v+"7";break;case"1":a=v+"7";break;case"2":a=v+"7"}this.sendVISCACommand(a)}}),n?.hrMode&&(i.hrMode={name:"VISCA - High Resolution Mode",options:[{type:"dropdown",label:"On / Off",id:"val",choices:I.ON_OFF,default:"On"}],callback:e=>{switch(e.options.val){case"On":a=v+"R";break;case"Off":a=v+"R"}this.sendVISCACommand(a)}}),Object.fromEntries(Object.entries(i).sort(u))}function W(){const e=(0,o.combineRgb)(255,255,255),t=(0,o.combineRgb)(0,0,0),a=((0,o.combineRgb)(255,0,0),(0,o.combineRgb)(0,255,0));(0,o.combineRgb)(255,102,0);let n=p(y,this.camera.firmware.major,this.camera.model),i=g(y,this.camera.firmware.major,this.camera.model),r={};if(i.some((e=>"firmware"===e.name))&&(r.firmware={type:"button",category:"General Camera",name:"Firmware",options:{},style:{text:"FW\\n$(birddog-ptz:firmware)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"model"===e.name))&&(r.model={type:"button",category:"General Camera",name:"Model",options:{},style:{text:"Model\\n$(birddog-ptz:model)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"hostname"===e.name))&&(r.hostname={type:"button",category:"General Camera",name:"Hostname",options:{},style:{text:"Hostname\\n$(birddog-ptz:hostname)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"ipaddress"===e.name))&&(r.ipaddress={type:"button",category:"General Camera",name:"IP Address",options:{},style:{text:"IP Address\\n$(birddog-ptz:ipaddress)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"netmask"===e.name))&&(r.netmask={type:"button",category:"General Camera",name:"Netmask",options:{},style:{text:"Netmask\\n$(birddog-ptz:netmask)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"network_config"===e.name))&&(r.network_config={type:"button",category:"General Camera",name:"Network Config",options:{},style:{text:"Network Config\\n$(birddog-ptz:network_config)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"serial_number"===e.name))&&(r.serial_number={type:"button",category:"General Camera",name:"Serial Number",options:{},style:{text:"SN\\n$(birddog-ptz:serial_number)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"status"===e.name))&&(r.status={type:"button",category:"General Camera",name:"Status",options:{},style:{text:"Status\\n$(birddog-ptz:status)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.standby&&(r.standby={type:"button",category:"VISCA Actions",name:"Standby",options:{},style:{text:"Cam Standby",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"standby",options:{val:"standby"}}],up:[]}],feedbacks:[{feedbackId:"standby_status",options:{val:"standby"},style:{color:t,bgcolor:a}}]},r.camOn={type:"button",category:"VISCA Actions",name:"Cam On",options:{},style:{text:"Cam On",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"standby",options:{val:"on"}}],up:[]}],feedbacks:[{feedbackId:"standby_status",options:{val:"on"},style:{color:t,bgcolor:a}}]}),n?.freeze&&(r.freeze={type:"button",category:"VISCA Actions",name:"Freeze",options:{},style:{text:"Freeze\\n$(birddog-ptz:freeze)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"freeze",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"freeze_status",options:{val:n.freeze.default},style:{color:t,bgcolor:a}}]}),n?.analogAudioInGain&&(r.analogAudioInGainUp={type:"button",category:"Analog Audio",name:"Analog Audio In Gain Up",options:{},style:{text:"\\nAudio In\\nGain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"analogAudioInGain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.analogAudioInGainDown={type:"button",category:"Analog Audio",name:"Analog Audio In Gain Down",options:{},style:{text:"$(birddog-ptz:audio_in_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"analogAudioInGain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.analogAudioOutGain&&(r.analogAudioOutGainUp={type:"button",category:"Analog Audio",name:"Analog Audio Out Gain Up",options:{},style:{text:"\\nAudio Out\\nGain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"analogAudioOutGain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.analogAudioOutGainDown={type:"button",category:"Analog Audio",name:"Analog Audio Out Gain Down",options:{},style:{text:"$(birddog-ptz:audio_out_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"analogAudioOutGain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.analogAudioOutput&&(r.analogAudioOutput={type:"button",category:"Analog Audio",name:"Analog Audio Output",options:{},style:{text:"Audio Output\\n$(birddog-ptz:audio_output)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"analogAudioOutput",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"analogAudioOutput",options:{val:n.analogAudioOutput.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"oled"===e.name))&&(r.oled={type:"button",category:"Device Settings",name:"OLED",options:{},style:{text:"OLED\\n$(birddog-ptz:oled)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.video_output&&(r.video_output={type:"button",category:"Video Output",name:"Video Output",options:{},style:{text:"Video Output\\n\\n$(birddog-ptz:video_output)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"video_output",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"video_output",options:{val:n.video_output.default},style:{color:t,bgcolor:a}}]}),n?.bandwidth_mode&&(r.bandwidth_mode={type:"button",category:"Encode Setup",name:"Bandwidth Mode",options:{},style:{text:"BW Mode\\n$(birddog-ptz:bandwidth_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"bandwidth_mode",options:{val:n.bandwidth_mode.default}}],up:[]}],feedbacks:[{feedbackId:"bandwidth_mode",options:{val:n.bandwidth_mode.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"bandwidth_select"===e.name))&&(r.bandwidth_select={type:"button",category:"Encode Setup",name:"BW Select",options:{},style:{text:"NDI BW\\n$(birddog-ptz:bandwidth_select)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"color_bitdepth"===e.name))&&(r.color_bitdepth={type:"button",category:"Encode Setup",name:"Color Bitdepth",options:{},style:{text:"Color Bitdepth\\n$(birddog-ptz:color_bitdepth)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.ndiAudio&&(r.ndiAudio={type:"button",category:"Encode Setup",name:"NDI Audio",options:{},style:{text:"NDI Audio\\n$(birddog-ptz:ndi_audio)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"ndiAudio",options:{val:n.ndiAudio.default}}],up:[]}],feedbacks:[{feedbackId:"ndiAudio",options:{val:n.ndiAudio.default},style:{color:t,bgcolor:a}}]}),n?.ndiGroupEnable&&(r.ndiGroupEnable={type:"button",category:"Encode Setup",name:"NDI Group",options:{},style:{text:"NDI Group\\n$(birddog-ptz:ndi_group)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"ndiGroupEnable",options:{val:n.ndiGroupEnable.default}}],up:[]}],feedbacks:[{feedbackId:"ndiGroupEnable",options:{val:n.ndiGroupEnable.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"ndi_group_name"===e.name))&&(r.ndi_group_name={type:"button",category:"Encode Setup",name:"NDI Group Name",options:{},style:{text:"NDI Group Name\\n$(birddog-ptz:ndi_group_name)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.screensaver_mode&&(r.screensaver_mode={type:"button",category:"Encode Setup",name:"Screensaver Mode ",options:{},style:{text:"SS Mode\\n$(birddog-ptz:screensaver_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"screensaver_mode",options:{val:n.screensaver_mode.default}}],up:[]}],feedbacks:[{feedbackId:"screensaver_mode",options:{val:n.screensaver_mode.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"stream_name"===e.name))&&(r.stream_name={type:"button",category:"Encode Setup",name:"Stream Name",options:{},style:{text:"Stream Name\\n$(birddog-ptz:stream_name)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.stream_to_network&&(r.stream_to_network={type:"button",category:"Encode Setup",name:"Stream to Network ",options:{},style:{text:"Stream to Network\\n$(birddog-ptz:stream_to_network)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"stream_to_network",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"stream_to_network",options:{val:n.stream_to_network.default},style:{color:t,bgcolor:a}}]}),n?.tally_mode&&(r.tally_mode={type:"button",category:"Encode Setup",name:"Tally Mode",options:{},style:{text:"Tally Mode\\n$(birddog-ptz:tally_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"tally_mode",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"tally_mode",options:{val:n.tally_mode.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"video_csc"===e.name))&&(r.video_csc={type:"button",category:"Encode Setup",name:"Video CSC",options:{},style:{text:"VideoCSC\\n$(birddog-ptz:video_csc)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"video_format"===e.name))&&(r.video_format={type:"button",category:"Encode Setup",name:"Video Format",options:{},style:{text:"Video Format\\n$(birddog-ptz:video_format)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"video_sample_rate"===e.name))&&(r.video_sample_rate={type:"button",category:"Encode Setup",name:"Video Sample Rate",options:{},style:{text:"Video Sample Rate\\n$(birddog-ptz:video_sample_rate)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.transmit_method&&(r.transmit_method={type:"button",category:"Encode Transport",name:"Transmit Method",options:{},style:{text:"TX Method\\n$(birddog-ptz:transmit_method)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"transmit_method",options:{val:n.transmit_method.default}}],up:[]}],feedbacks:[{feedbackId:"transmit_method",options:{val:n.transmit_method.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"transmit_netprefix"===e.name))&&(r.transmit_netprefix={type:"button",category:"Encode Transport",name:"Multicast Net Prefix",options:{},style:{text:"Multicast\\nNet Prefix\\n$(birddog-ptz:transmit_netprefix)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"transmit_netmask"===e.name))&&(r.transmit_netmask={type:"button",category:"Encode Transport",name:"Multicast Netmask",options:{},style:{text:"Multicast\\nNetmask\\n$(birddog-ptz:transmit_netmask)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"transmit_ttl"===e.name))&&(r.transmit_ttl={type:"button",category:"Encode Transport",name:"Multicast TTL",options:{},style:{text:"Multicast\\nTTL\\n$(birddog-ptz:transmit_ttl)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.capture_screensaver&&(r.capture_screensaver={type:"button",category:"Encode Transport",name:"Capture Screensaver",options:{},style:{text:"Capture Screensaver",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"capture_screensaver"}],up:[]}],feedbacks:[]}),n?.ndi_discovery_server&&(r.ndi_discovery_server={type:"button",category:"NDI Discovery",name:"NDI Discovery Server",options:{},style:{text:"NDI Discovery\\nServer\\n$(birddog-ptz:ndi_discovery_server)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"ndi_discovery_server",options:{val:n.ndi_discovery_server.default}}],up:[]}],feedbacks:[{feedbackId:"ndi_discovery_server",options:{val:n.ndi_discovery_server.default},style:{color:t,bgcolor:a}}]}),i.some((e=>"ndi_discovery_server_ip"===e.name))&&(r.ndi_discovery_server_ip={type:"button",category:"NDI Discovery",name:"NDI Discovery Server IP",options:{},style:{text:"NDI Discovery\\nServer IP\\n$(birddog-ptz:ndi_discovery_server_ip)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"freed"===e.name))&&(r.freed={type:"button",category:"FreeD",name:"FreeD",options:{},style:{text:"FreeD\\n$(birddog-ptz:freed)",size:"auto",color:e,bgcolor:t}}),i.some((e=>"freed_ip_address"===e.name))&&(r.freed_ip_address={type:"button",category:"FreeD",name:"FreeD IP Address",options:{},style:{text:"FreeD\\nIP Address\\n$(birddog-ptz:freed_ip_address)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),i.some((e=>"freed_port"===e.name))&&(r.freed_port={type:"button",category:"FreeD",name:"FreeD Port",options:{},style:{text:"FreeD\\nPort\\n$(birddog-ptz:freed_port)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),n?.pt&&(r.ptUp={type:"button",category:"Camera Control",name:"UP",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6AQMAAAApyY3OAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIFJREFUKM+90EEKgzAQRmFDFy49ghcp5FquVPBighcRegHBjWDJ68D8U6F7m00+EnhkUlW3ru6rdyCV0INQzSg1zFLLKmU2aeCQQMEEJXIQORRsTLNyKJhNm3IoaPBg4mQorp2Mh1+00kKN307o/bZrpt5O/FlPU/c75X91/fPd6wPRD1eHyHEL4wAAAABJRU5ErkJggg==",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"up",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptDown={type:"button",category:"Camera Control",name:"DOWN",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6AQMAAAApyY3OAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAIlJREFUKM/F0DEOwyAMBVAjDxk5Qo7CtdiClIv1KJF6gUpZIhXxY2zTDJ2benoS8LFN9MsKbYjxF2XRS1UZ4bCeGFztFmNqphURpidm146kpwFvLDYJpPQtLSLNoySyP2bRpoqih2oSFW8K3lYAxmJGXA88XMnjeuDmih7XA8vXvNeeqX6U6aY6AacbWAQNWOPUAAAAAElFTkSuQmCC",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"down",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptLeft={type:"button",category:"Camera Control",name:"LEFT",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6AQMAAAApyY3OAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAHpJREFUKM+1kTEOgCAQBM9Q2JjwA/mJPA2fxlN4giWF8TRBBhMpbKSaZie3i8gPb4Y8FNZKGm8YIAONkNWacIruQLejy+gyug1dQhfRqZa0v6gYA6QfqSWapZnto1B6XdUuFaVHoJunr2MD21nIdJYUEhLYfoGmP777BKKIXC0eYSD5AAAAAElFTkSuQmCC",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"left",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptRight={type:"button",category:"Camera Control",name:"RIGHT",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6AQMAAAApyY3OAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAHhJREFUKM+10LERgCAMQFE4CktHcBRWcRMYzVEcwdKCI+od+fGksVCq3/AuiXOfvZnaNXzRClVrEKtMLdSqP2RTRQAFMAFGwAlw7MAk0sAzGnhVoerLKg/F5Pv4NoFNZZNGpk9sxJYeLsDdL5T7S8IFOM/R3OZ+fQeQZV9pMy+bVgAAAABJRU5ErkJggg==",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"right",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptUpRight={type:"button",category:"Camera Control",name:"UP RIGHT",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAMAAAAk2e+/AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAABhlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+X02G5AAAAgXRSTlMAAte32QZhZx7d+TywDTf8/d5VstYPOxULNvKmSY8TFBrxyeGCluJeELQ5uw7ULND4BedlKuv2P/vDA8UgCk30WO41s8+5X8dABAz6QhHVaR156JpPnihSfTJDNOMBm4bzSICqr23NsRjcGRbtjTCS2lzsOmyu9+WLKb2fTL8+RPDhqO4yAAABfElEQVRYw+3WZW/CUBQG4AO0FBsOwwcMm7sLc3d3d3e388/HGGs7lpD0tsm+9P3S5CT3SdPec+8BkCNHzv9FAVAAEABYdQDkA7jo9GNUIDMBzstb5vr0/Gx8Z35zOjI36R2xbu+619eWa2xCoK0FClF5h1cWxDHEwilEOyLlQc8hokoAlMRcESBh7siQlJBWKkijNaHuPrWBED9iYiDQ7Pv1D4Z4/DXyFo2JgeAghQEkEgAvT6IgNo/PIUmgd62oj80mqEIpINoXRkmg2j2UBDIWVXKLTSXEUIOF/xbV5aRQsJvvUOoqMqjZZ+c7FcX8ThYCtTbxHV0fkEGDA73D3Dpzi/6rWEYAdSn579PZ/t3IBJChkef0dLRlHXdkJ6TSmSnmiYPq1LQIiGHX9BvZYinJ7/+R6q1czUG0j9KSOTxDc6UhshZhMIQrS78mncwZtzErrNcYL6V2Zd0tJ6i7QFtAYPcvHv25W6J+/Y3BrRA/x6WGuGN5mpUjhyyfsGtrpKE95HoAAAAASUVORK5CYII=",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"up_right",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptUpLeft={type:"button",category:"Camera Control",name:"UP LEFT",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAMAAAAk2e+/AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAABLFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9PVkEkAAAAY3RSTlMAAQ/6Uc0OEAvHTzL7TcudsMHvdwnfUwMcG8UGiIfTrIkg9QI+/ZTDe460km73LNovCo1vQUuR4Lwk45/OK+3UERTkekziZlSK8QQnoOsFaaXmLqOylvPZLYDRZTUWUpiTDfAuEmiSAAABUklEQVRYw+3WZ2+DMBAG4EtTygrQ7NHsJt1777333vv+/38o6gIMSo0dqf3AK1lIZ/mRjPEJgCBBgvxtQr8WqDKbCiWUG1AnYXU7C7UJqKQSR5oKQwqIPphsYW24nEPjJCYXilf9F+G+qeTmThTP5w8X8gK9NLqOGMGPhD8fdXtBkGihlmlsmF5aqK2xg9FmQe3/DupuEhTpoT41z/V1HVHfxWRRo/6ORBfyjILx9mRo+2MDlS3ggF5q4uP9qzmVNjfOA+EDdDLcWA8IW6FJEJPkCbFI3hCDZEFVPsmC7mQuyYJ0iUuyIAG4JDvEJTkgHskJcUgExC6RECmxQ4REDa24ILsU6wL/rfYHskmX9C87Pfi9aA5cUmnRx/kffDmncSCkat7X342KSzOIuesNR1WSl7GU8Xfbbs9Gyoo0TvRp6Tie8d2TOsyx51UMEiQIS94B13oTqqYgGGoAAAAASUVORK5CYII=",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"up_left",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptDownLeft={type:"button",category:"Camera Control",name:"DOWN LEFT",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAMAAAAk2e+/AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAABg1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8aT76cAAAAgHRSTlMAafwJfflezc+3WA7Z5Rk6PAvpBNE73kJT89QxZ48czNIv9A1DnI3qKQUaymjT4a7HdVuGf85LR20CVHr+tLBlA0GvYSTYZEnbAcazNPX4yB4GrAgnmL6Bcj4qIVKIe8kdVadIEe27B90bOG/3Er1rYJq1wibyh+4Q5CMzRllMXDo5euMAAAGfSURBVFjD7dblUwJBGAbw5aSlBJRGQERBkLC7u7u7u7veP90jDnaEcdhjP+k9X5h9Zu43O7PLe4eQECH/KGsIaUooOEcLK75LpehH628idSrE+nMANfyQ3MY2BRm0C6mM462tUwJAJtVyUB1WmsoSFZEk46D6TBcYS3UKPpCYawxD5VxHImVD/RHIxMQbGintkGQcppkcOkuutQPYfkDfmjck556ZTSydve2YY5UWk0Mww672VPh+XFqCU8tA+whtL+KOpa+bF3Rh8B4ymDNaSnSzG9IPIpsL34/HTPZfS58auMPYuYNMWcQXOsD3U9ZDOkZkkCvqwSIqUI2WfEDmgiQxRANiIp8GKtDLO6/Znw19oOdXhKoROtEUBr1F5Y9f4dt1XygqKgh6YqcHwMQkQBWICr1H6czTgrpoQde0IGnekJEWNEwLMv/GPDDB/M/fDioVeLYA5GqoYt+xNRY4toJkCiBUG7vTEVxJu2Z549RbqXQuba7uVDZWO66mgw6d7kYaEPvvCb+REIp/srGzLP4aa0n8zKFkKUSIkD+Qb9QrYMvxAbaBAAAAAElFTkSuQmCC",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"down_left",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptDownRight={type:"button",category:"Camera Control",name:"DOWN RIGHT",options:{},style:{text:"",png64:"iVBORw0KGgoAAAANSUhEUgAAAEgAAAA6CAMAAAAk2e+/AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAABXFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9jYfXuAAAAc3RSTlMAQ98Ox1j9gAtRNTqBPfgu9p/MTQ+G1Qfx7Y0VBYyJgjkGd3ysU+Zz1IQvMM20PgwBp8Mi4TSUiDvlPxylsaF2WfcjJh0S+wLzQLmY4l/ovX3ra1rPLAOSKa4RUEvgcZwbFHqPzodGbX7qPMvCtsEq1laguT+HEwAAAVlJREFUWMPt1sduwkAQgOGxDfFCIITe0nvvvZHee++992TeX4pJQIC9hPWaQ6T41x6skfY7WGPJAGZm/6qgZjIH4AMgOp2Lq32batTkdW/trPt9+qC70DVmSKS2BXF7A1fX9DDnN2FUSpe8y5hID3SZuJMmrcwmoSFm5vD0BDWSNTnCUmZoD1PZtJCDGfIgRUpBMjPkR4rEAwUtFIkHAkKRuCCaxAdRJE5IK/FCGumWF1JLEW5ILfFD2ST9UBaJA6JLPBCQ57xAJcp5NQbtSgBReJSsH8QI5No8ODo+u397ecL3T35IGhcRA4jig8E9qmjAX2OGnAV5ggrxr0ELOaByVmg6B1TGvEYyTvxcKUaMv/ii7xN/VAZYY2dfSHkkPOYY7Kpf7OmLzLfGPIFGd6izWrRUjdYt9Xfo+ULsLpgRKqGtGyadAEIUmnuhXSAwMAXD5j+omZlZRl+X30CWTm2dHwAAAABJRU5ErkJggg==",pngalignment:"center:center",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"down_right",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[{actionId:"pt",options:{val:"stop"}}]}],feedbacks:[]},r.ptHome={type:"button",category:"Camera Control",name:"Home",options:{},style:{text:"HOME",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pt",options:{val:"home",posPan:"0000",posTilt:"0000",override:!1,panSpeed:9,tiltSpeed:9}}],up:[]}],feedbacks:[]}),n?.panSpeed&&(r.panSpeedUp={type:"button",category:"Camera Control",name:"Pan Speed Up",options:{},style:{text:"\\nPan Speed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"panSpeed",options:{type:"up"}}],up:[]}],feedbacks:[]},r.panSpeedDown={type:"button",category:"Camera Control",name:"Pan Speed Down",options:{},style:{text:"$(birddog-ptz:pan_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"panSpeed",options:{type:"down"}}],up:[]}],feedbacks:[]}),n?.preset&&(r.presetMode={type:"button",category:"Preset",name:"Preset Mode",options:{},style:{text:"Preset $(birddog-ptz:preset)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"preset",options:{val:n.preset.default}}],up:[]}],feedbacks:[]}),n?.preset_speed&&(r.preset_speedUp={type:"button",category:"Preset",name:"Preset Speed Up",options:{},style:{text:"\\nPreset Speed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"preset_speed",options:{type:"up"}}],up:[]}],feedbacks:[]},r.preset_speedDown={type:"button",category:"Preset",name:"Preset Speed Down",options:{},style:{text:"$(birddog-ptz:preset_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"preset_speed",options:{type:"down"}}],up:[]}],feedbacks:[]}),n?.recallPset){let a;for(a=1;a<10;a++)r[`recallPset_${a}`]={type:"button",category:"Preset",label:"Recall Preset "+parseInt(a),style:{text:"Recall\\nPreset\\n"+parseInt(a),size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"recallPset",options:{val:parseInt(a)}}],up:[]}],feedbacks:[]}}if(n?.savePset){let a;for(a=1;a<10;a++)r[`savePset${a}`]={type:"button",category:"Preset",label:"Save Preset "+parseInt(a),style:{text:"Save\\nPreset\\n"+parseInt(a),size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"savePset",options:{val:parseInt(a)}}],up:[]}],feedbacks:[]}}return n?.tiltSpeed&&(r.tiltSpeedUp={type:"button",category:"Camera Control",name:"Tilt Speed Up",options:{},style:{text:"\\nTilt Speed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"tiltSpeed",options:{type:"up"}}],up:[]}],feedbacks:[]},r.tiltSpeedDown={type:"button",category:"Camera Control",name:"Tilt Speed Down",options:{},style:{text:"$(birddog-ptz:tilt_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"tiltSpeed",options:{type:"down"}}],up:[]}],feedbacks:[]}),n?.zoom&&(r.zoomIn={type:"button",category:"Camera Control",name:"Zoom In",options:{},style:{text:"Tele",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"zoom",options:{val:"in"}}],up:[{actionId:"zoom",options:{val:"stop"}}]}],feedbacks:[]},r.zoomOut={type:"button",category:"Camera Control",name:"Zoom Out",options:{},style:{text:"Wide",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"zoom",options:{val:"out"}}],up:[{actionId:"zoom",options:{val:"stop"}}]}],feedbacks:[]}),n?.zoomSpeed&&(r.zoomSpeedUp={type:"button",category:"Camera Control",name:"Zoom Speed Up",options:{},style:{text:"\\nZoom Speed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"zoomSpeed",options:{type:"up"}}],up:[]}],feedbacks:[]},r.zoomSpeedDown={type:"button",category:"Camera Control",name:"Zoom Speed Down",options:{},style:{text:"$(birddog-ptz:zoom_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"zoomSpeed",options:{type:"down"}}],up:[]}],feedbacks:[]}),n?.onScreenMenu&&(r.onScreenMenu={type:"button",category:"Camera Control",name:"On Screen Menu",options:{},style:{text:"Menu ON/OFF",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"onScreenMenu"}],up:[]}],feedbacks:[]}),n?.focus&&(r.focusIn={type:"button",category:"Camera Control",name:"Focus In",options:{},style:{text:"Focus\\nIn",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"focus",options:{val:"near"}}],up:[{actionId:"focus",options:{val:"stop"}}]}],feedbacks:[]},r.focusFar={type:"button",category:"Camera Control",name:"Focus Far",options:{},style:{text:"Focus\\nOut",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"focus",options:{val:"far"}}],up:[{actionId:"focus",options:{val:"stop"}}]}],feedbacks:[]},r.focusMode={type:"button",category:"Camera Control",name:"Focus Mode",options:{},style:{text:"Focus Mode\\n$(birddog-ptz:focus_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"focusM",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"focusMode",options:{val:n.focusM.default},style:{color:t,bgcolor:a}}]},r.focusOnePush={type:"button",category:"Camera Control",name:"One Push Auto Focus",options:{},style:{text:"O.P.\\nAF",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"focus",options:{val:"trigger"}}],up:[]}],feedbacks:[]}),n?.ae_response&&(r.ae_response={type:"button",category:"Exposure",name:"Ae Response",options:{},style:{text:"Ae Response\\n$(birddog-ptz:ae_response)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"ae_response",options:{val:n.ae_response.default}}],up:[]}],feedbacks:[{feedbackId:"ae_response",options:{val:n.ae_response.default},style:{color:t,bgcolor:a}}]}),n?.backlight&&(r.backlight={type:"button",category:"Exposure",name:"Backlight",options:{},style:{text:"Backlight\\n$(birddog-ptz:backlight)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"backlight",options:{mode:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"backlight",options:{mode:n.backlight.default},style:{color:t,bgcolor:a}}]}),n?.bright_level&&(r.bright_level={type:"button",category:"Exposure",name:"Bright Level",options:{},style:{text:"Bright Level\\n$(birddog-ptz:bright_level)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"bright_level",options:{val:n.bright_level.default}}],up:[]}],feedbacks:[{feedbackId:"bright_level",options:{val:n.bright_level.default},style:{color:t,bgcolor:a}}]}),n?.expComp&&(r.expComp={type:"button",category:"Exposure",name:"Exposure Compensation",options:{},style:{text:"Exposure\\nComp\\n$(birddog-ptz:exposure_comp)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"expComp",options:{val:n.expComp.default}}],up:[]}],feedbacks:[{feedbackId:"exposureoCmpEn",options:{val:n.expComp.default},style:{color:t,bgcolor:a}}]}),n?.expCompLvl&&(r.exposure_comp_level={type:"button",category:"Exposure",name:"Exposure Compensation Level",options:{},style:{text:"Exposure\\nComp\\nLevel\\n$(birddog-ptz:exposure_comp_level)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.expCompLvlUp={type:"button",category:"Exposure",name:"Exposure Comp Level Up",options:{},style:{text:"\\nEx Comp Lvl",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"expCompLvl",options:{val:"up"}}],up:[]}],feedbacks:[]},r.expCompLvlDown={type:"button",category:"Exposure",name:"Exposure Comp Level Down",options:{},style:{text:"$(birddog-ptz:exposure_comp_level)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"expCompLvl",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.exposure_mode&&(r.exposure_mode={type:"button",category:"Exposure",name:"Exposure Mode",options:{},style:{text:"Exposure\\nMode\\n$(birddog-ptz:exposure_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"expM",options:{val:n.exposure_mode.default}}],up:[]}],feedbacks:[{feedbackId:"exposureMode",options:{mode:n.exposure_mode.default},style:{color:t,bgcolor:a}}]}),n?.gain&&(r.gainUp={type:"button",category:"Exposure",name:"Gain Up",options:{},style:{text:"\\nGain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.gainDown={type:"button",category:"Exposure",name:"Gain Down",options:{},style:{text:"$(birddog-ptz:gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.gain_limit&&(r.gain_limitUp={type:"button",category:"Exposure",name:"Gain Limit Up",options:{},style:{text:"\\nGain Limit",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gainLimit",options:{val:"up"}}],up:[]}],feedbacks:[]},r.gain_limitDown={type:"button",category:"Exposure",name:"Gain Limit Down",options:{},style:{text:"$(birddog-ptz:gain_limit)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gainLimit",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.gain_point&&(r.gain_point={type:"button",category:"Exposure",name:"Gain Point",options:{},style:{text:"Gain point\\n$(birddog-ptz:gain_point)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gainPoint",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"gain_point",options:{val:n.gain_point.default},style:{color:t,bgcolor:a}}]}),n?.gain_point_position&&(r.gain_point_positionUp={type:"button",category:"Exposure",name:"Gain Point Position Up",options:{},style:{text:"\\nGain Point\\nPosition",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gainPointPosition",options:{val:"up"}}],up:[]}],feedbacks:[]},r.gain_point_positionDown={type:"button",category:"Exposure",name:"Gain Point Position Down",options:{},style:{text:"$(birddog-ptz:gain_point_position)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gainPointPosition",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.high_sensitivity&&(r.high_sensitivity={type:"button",category:"Exposure",name:"High Sensitivity",options:{},style:{text:"High Sensitivity\\n$(birddog-ptz:high_sensitivity)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"highSensitivity",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"highSensitivity",options:{val:n.high_sensitivity.default},style:{color:t,bgcolor:a}}]}),n?.iris&&(r.irisUp={type:"button",category:"Exposure",name:"Iris Up",options:{},style:{text:"\\nIris",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"iris",options:{val:"up"}}],up:[]}],feedbacks:[]},r.irisDown={type:"button",category:"Exposure",name:"Iris Down",options:{},style:{text:"$(birddog-ptz:iris)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"iris",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.shutter_control_overwrite&&(r.shutter_control_overwrite={type:"button",category:"Exposure",name:"Shutter Control Overwrite",options:{},style:{text:"Shutter Control\\nOverwrite\\n$(birddog-ptz:shutter_control_overwrite)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_control_overwrite",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"shutter_control_overwrite",options:{val:n.shutter_control_overwrite.default},style:{color:t,bgcolor:a}}]}),n?.shutter_max_speed&&(r.shutter_max_speedUp={type:"button",category:"Exposure",name:"Shutter Max Speed Up",options:{},style:{text:"\\nShutter\\nMax Speed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_max_speed",options:{val:"up"}}],up:[]}],feedbacks:[]},r.shutter_max_speedDown={type:"button",category:"Exposure",name:"Shutter Max Speed Down",options:{},style:{text:"$(birddog-ptz:shutter_max_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_max_speed",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.shutter_min_speed&&(r.shutter_min_speedUp={type:"button",category:"Exposure",name:"Shutter Min Speed Up",options:{},style:{text:"\\nShutter\\nMin Speed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_min_speed",options:{val:"up"}}],up:[]}],feedbacks:[]},r.shutter_min_speedDown={type:"button",category:"Exposure",name:"Shutter Min Speed Down",options:{},style:{text:"$(birddog-ptz:shutter_min_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_min_speed",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.shutter_speed&&(r.shutter_speedUp={type:"button",category:"Exposure",name:"Shutter Up",options:{},style:{text:"\\nShutter",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shut",options:{val:"up"}}],up:[]}],feedbacks:[]},r.shutter_speedDown={type:"button",category:"Exposure",name:"Shutter Down",options:{},style:{text:"$(birddog-ptz:shutter_speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shut",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.shutter_speed_overwrite&&(r.shutter_speed_overwriteUp={type:"button",category:"Exposure",name:"Shutter Speed Overwrite Up",options:{},style:{text:"\\nShutter Speed\\nOverwrite",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_speed_overwrite",options:{val:"up"}}],up:[]}],feedbacks:[]},r.shutter_speed_overwriteDown={type:"button",category:"Exposure",name:"Shutter Speed Overwrite Down",options:{},style:{text:"$(birddog-ptz:shutter_speed_overwrite)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"shutter_speed_overwrite",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.slow_shutter_en&&(r.slow_shutter_en={type:"button",category:"Exposure",name:"Slow Shutter Enable",options:{},style:{text:"Slow Shutter\\nEnable\\n$(birddog-ptz:slow_shutter_en)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"slow_shutter_en",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"slow_shutter_en",options:{val:n.slow_shutter_en.default},style:{color:t,bgcolor:a}}]}),n?.slow_shutter_limit&&(r.slow_shutter_limitUp={type:"button",category:"Exposure",name:"Slow Shutter Limit Up",options:{},style:{text:"\\nSlow Shutter\\nLimit",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"slow_shutter_limit",options:{val:"up"}}],up:[]}],feedbacks:[]},r.slow_shutter_limitDown={type:"button",category:"Exposure",name:"Slow Shutter Limit Down",options:{},style:{text:"$(birddog-ptz:slow_shutter_limit)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"slow_shutter_limit",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.spotlight&&(r.spotlight={type:"button",category:"Exposure",name:"Spotlight",options:{},style:{text:"Spotlight\\n$(birddog-ptz:spotlight)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"spotlight",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"spotlight",options:{val:n.spotlight.default},style:{color:t,bgcolor:a}}]}),n?.bg&&(r.bgUp={type:"button",category:"White Balance",name:"BG Up",options:{},style:{text:"\\nBG",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"bg",options:{val:"up"}}],up:[]}],feedbacks:[]},r.bgDown={type:"button",category:"White Balance",name:"BG Down",options:{},style:{text:"$(birddog-ptz:bg)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"bg",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.br&&(r.brUp={type:"button",category:"White Balance",name:"BR Up",options:{},style:{text:"\\nBR",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"br",options:{val:"up"}}],up:[]}],feedbacks:[]},r.brDown={type:"button",category:"White Balance",name:"BR Down",options:{},style:{text:"$(birddog-ptz:br)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"br",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.blue_gain&&(r.blue_gainUp={type:"button",category:"White Balance",name:"Blue Gain Up",options:{},style:{text:"\\nBlue Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"blue_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.blue_gainDown={type:"button",category:"White Balance",name:"Blue Gain Down",options:{},style:{text:"$(birddog-ptz:blue_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"blue_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.color_temp&&(r.color_tempUp={type:"button",category:"White Balance",name:"Color Temp Up",options:{},style:{text:"\\nColor Temp",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"color_temp",options:{val:"up"}}],up:[]}],feedbacks:[]},r.color_tempDown={type:"button",category:"White Balance",name:"Color Temp Down",options:{},style:{text:"$(birddog-ptz:color_temp)K\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"color_temp",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.gb&&(r.gbUp={type:"button",category:"White Balance",name:"GB Up",options:{},style:{text:"\\nGB",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gb",options:{val:"up"}}],up:[]}],feedbacks:[]},r.gbDown={type:"button",category:"White Balance",name:"GB Down",options:{},style:{text:"$(birddog-ptz:gb)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gb",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.gr&&(r.grUp={type:"button",category:"White Balance",name:"GR Up",options:{},style:{text:"\\nGR",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gr",options:{val:"up"}}],up:[]}],feedbacks:[]},r.grDown={type:"button",category:"White Balance",name:"GR Down",options:{},style:{text:"$(birddog-ptz:gr)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gr",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.level&&(r.levelUp={type:"button",category:"White Balance",name:"Level Up",options:{},style:{text:"\\nLevel",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"level",options:{val:"up"}}],up:[]}],feedbacks:[]},r.levelDown={type:"button",category:"White Balance",name:"Level Down",options:{},style:{text:"$(birddog-ptz:level)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"level",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.matrix&&(r.matrix={type:"button",category:"White Balance",name:"Matrix",options:{},style:{text:"Matrix\\n$(birddog-ptz:matrix)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"matrix",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"matrix",options:{val:n.matrix.default},style:{color:t,bgcolor:a}}]}),n?.offset&&(r.offsetUp={type:"button",category:"White Balance",name:"Offset Up",options:{},style:{text:"\\nOffset",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"offset",options:{val:"up"}}],up:[]}],feedbacks:[]},r.offsetDown={type:"button",category:"White Balance",name:"Offset Down",options:{},style:{text:"$(birddog-ptz:offset)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"offset",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.phase&&(r.phaseUp={type:"button",category:"White Balance",name:"Phase Up",options:{},style:{text:"\\nPhase",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"phase",options:{val:"up"}}],up:[]}],feedbacks:[]},r.phaseDown={type:"button",category:"White Balance",name:"Phase Down",options:{},style:{text:"$(birddog-ptz:phase)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"phase",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.rb&&(r.rbUp={type:"button",category:"White Balance",name:"RB Up",options:{},style:{text:"\\nRB",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"rb",options:{val:"up"}}],up:[]}],feedbacks:[]},r.rbDown={type:"button",category:"White Balance",name:"RB Down",options:{},style:{text:"$(birddog-ptz:rb)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"rb",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.rg&&(r.rgUp={type:"button",category:"White Balance",name:"RG Up",options:{},style:{text:"\\nRG",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"rg",options:{val:"up"}}],up:[]}],feedbacks:[]},r.rgDown={type:"button",category:"White Balance",name:"RG Down",options:{},style:{text:"$(birddog-ptz:rg)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"rg",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.red_gain&&(r.red_gainUp={type:"button",category:"White Balance",name:"Red Gain Up",options:{},style:{text:"\\nRed Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"red_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.red_gainDown={type:"button",category:"White Balance",name:"Red Gain Down",options:{},style:{text:"$(birddog-ptz:red_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"red_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.select&&(r.select={type:"button",category:"White Balance",name:"Select",options:{},style:{text:"Select\\n$(birddog-ptz:select)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"select",options:{val:n.select.default}}],up:[]}],feedbacks:[{feedbackId:"select",options:{val:n.select.default},style:{color:t,bgcolor:a}}]}),n?.speed&&(r.speedUp={type:"button",category:"White Balance",name:"Speed Up",options:{},style:{text:"\\nSpeed",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"speed",options:{val:"up"}}],up:[]}],feedbacks:[]},r.speedDown={type:"button",category:"White Balance",name:"Speed Down",options:{},style:{text:"$(birddog-ptz:speed)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"speed",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.wb_mode&&(r.wb_mode={type:"button",category:"White Balance",name:"White Balance Mode",options:{},style:{text:"WB Mode\\n$(birddog-ptz:wb_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"wb_mode",options:{val:n.wb_mode.default}}],up:[]}],feedbacks:[{feedbackId:"wb_mode",options:{mode:n.wb_mode.default},style:{color:t,bgcolor:a}}]}),n?.wbOnePush&&(r.wbOnePush={type:"button",category:"White Balance",name:"WB One Push",options:{},style:{text:"WB\\nONE PUSH",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"wbOnePush"}],up:[]}],feedbacks:[]}),n?.backlight_com&&(r.backlight_com={type:"button",category:"Picture",name:"Backlight Compensation",options:{},style:{text:"Backlight\\nComp\\n$(birddog-ptz:backlight_com)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"backlight_com",options:{val:n.backlight_com.default}}],up:[]}],feedbacks:[{feedbackId:"backlight_com",options:{val:n.backlight_com.default},style:{color:t,bgcolor:a}}]}),n?.chroma_suppress&&(r.chroma_suppress={type:"button",category:"Picture",name:"Backlight Compensation",options:{},style:{text:"Chroma\\nSuppress\\n$(birddog-ptz:chroma_suppress)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"chroma_suppress",options:{val:n.chroma_suppress.default}}],up:[]}],feedbacks:[{feedbackId:"chroma_suppress",options:{val:n.chroma_suppress.default},style:{color:t,bgcolor:a}}]}),n?.saturation&&(r.saturationUp={type:"button",category:"Picture",name:"Saturation Up",options:{},style:{text:"\\nSaturation",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"saturation",options:{val:"up"}}],up:[]}],feedbacks:[]},r.saturationDown={type:"button",category:"Picture",name:"Saturation Down",options:{},style:{text:"$(birddog-ptz:saturation)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"saturation",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.contrast&&(r.contrastUp={type:"button",category:"Picture",name:"Contrast Up",options:{},style:{text:"\\nContrast",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"contrast",options:{val:"up"}}],up:[]}],feedbacks:[]},r.contrastDown={type:"button",category:"Picture",name:"Contrast Down",options:{},style:{text:"$(birddog-ptz:contrast)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"contrast",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.pictureEffect&&(r.pictureEffect={type:"button",category:"Picture",name:"Effect",options:{},style:{text:"Effect\\n$(birddog-ptz:bw_effect)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pictureEffect",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"pictureEffect",options:{val:n.pictureEffect.default},style:{color:t,bgcolor:a}}]}),n?.picFlip&&(r.picFlip={type:"button",category:"Picture",name:"Flip",options:{},style:{text:"Flip\\n$(birddog-ptz:flip)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"picFlip",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"picFlip",options:{val:n.picFlip.default},style:{color:t,bgcolor:a}}]}),n?.gamma&&(r.gammaUp={type:"button",category:"Picture",name:"Gamma Up",options:{},style:{text:"\\nGamma",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gamma",options:{val:"up"}}],up:[]}],feedbacks:[]},r.gammaDown={type:"button",category:"Picture",name:"Gamma Down",options:{},style:{text:"$(birddog-ptz:gamma)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gamma",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.highlight_comp&&(r.highlight_comp={type:"button",category:"Picture",name:"Highlight Compensation",options:{},style:{text:"Highlight Comp.\\n$(birddog-ptz:highlight_comp)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"highlight_comp",options:{val:n.highlight_comp.default}}],up:[]}],feedbacks:[{feedbackId:"highlight_comp",options:{val:n.highlight_comp.default},style:{color:t,bgcolor:a}}]}),n?.highlight_comp_mask&&(r.highlight_comp_maskUp={type:"button",category:"Picture",name:"Highlight Comp. Mask Up",options:{},style:{text:"\\nHigh Comp\\n Mask",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"highlight_comp_mask",options:{val:"up"}}],up:[]}],feedbacks:[]},r.highlight_comp_maskDown={type:"button",category:"Picture",name:"Highlight Comp. Mask Down",options:{},style:{text:"$(birddog-ptz:highlight_comp_mask)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"highlight_comp_mask",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.hue&&(r.hueUp={type:"button",category:"Picture",name:"Hue Up",options:{},style:{text:"\\nHue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.hueDown={type:"button",category:"Picture",name:"Hue Down",options:{},style:{text:"$(birddog-ptz:hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.ir_cutfilter&&(r.ir_cutfilter={type:"button",category:"Picture",name:"IR Cutfilter",options:{},style:{text:"IR Cut Filter\\n$(birddog-ptz:ir_cutfilter)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"ir_cutfilter",options:{val:n.ir_cutfilter.default}}],up:[]}],feedbacks:[{feedbackId:"ir_cutfilter",options:{val:n.ir_cutfilter.default},style:{color:t,bgcolor:a}}]}),n?.low_latency&&(r.low_latency={type:"button",category:"Picture",name:"Low Latency",options:{},style:{text:"Low Latency\\n$(birddog-ptz:low_latency)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"low_latency",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"low_latency",options:{val:n.low_latency.default},style:{color:t,bgcolor:a}}]}),n?.picMirror&&(r.picMirror={type:"button",category:"Picture",name:"Mirror",options:{},style:{text:"Mirror\\n$(birddog-ptz:mirror)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"picMirror",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"picMirror",options:{val:n.picMirror.default},style:{color:t,bgcolor:a}}]}),n?.nd_filter&&(r.nd_filterUp={type:"button",category:"Picture",name:"ND Filter Up",options:{},style:{text:"\\nND Filter",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"nd_filter",options:{val:"up"}}],up:[]}],feedbacks:[]},r.nd_filterDown={type:"button",category:"Picture",name:"ND Filter Down",options:{},style:{text:"$(birddog-ptz:nd_filter)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"nd_filter",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.noise_reduction&&(r.noise_reductionUp={type:"button",category:"Picture",name:"Noise Reduction Up",options:{},style:{text:"\\nNR",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"noise_reduction",options:{val:"up"}}],up:[]}],feedbacks:[]},r.noise_reductionDown={type:"button",category:"Picture",name:"Noise Reduction Down",options:{},style:{text:"$(birddog-ptz:noise_reduction)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"noise_reduction",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.sharpness&&(r.sharpnessUp={type:"button",category:"Picture",name:"Sharpness Up",options:{},style:{text:"\\nSharpness",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"sharpness",options:{val:"up"}}],up:[]}],feedbacks:[]},r.sharpnessDown={type:"button",category:"Picture",name:"Sharpness Down",options:{},style:{text:"$(birddog-ptz:sharpness)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"sharpness",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.stabilizer&&(r.stabilizer={type:"button",category:"Picture",name:"Stabilizer",options:{},style:{text:"Mirror\\n$(birddog-ptz:stabilizer)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"stabilizer",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"stabilizer",options:{val:n.stabilizer.default},style:{color:t,bgcolor:a}}]}),n?.threed_nr&&(r.threed_nrUp={type:"button",category:"Picture",name:"3D Noise Reduction Up",options:{},style:{text:"\\n3D NR",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"threed_nr",options:{val:"up"}}],up:[]}],feedbacks:[]},r.threed_nrDown={type:"button",category:"Picture",name:"3D Noise Reduction Down",options:{},style:{text:"$(birddog-ptz:threed_nr)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"threed_nr",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.twod_nr&&(r.twod_nrUp={type:"button",category:"Picture",name:"2D Noise Reduction Up",options:{},style:{text:"\\n2D NR",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"twod_nr",options:{val:"up"}}],up:[]}],feedbacks:[]},r.twod_nrDown={type:"button",category:"Picture",name:"2D Noise Reduction Down",options:{},style:{text:"$(birddog-ptz:twod_nr)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"twod_nr",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.wide_dynamic_range&&(r.wide_dynamic_rangeUp={type:"button",category:"Picture",name:"Wide Dynamics Range Up",options:{},style:{text:"\\nWDR",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"wide_dynamic_range",options:{val:"up"}}],up:[]}],feedbacks:[]},r.wide_dynamic_rangeDown={type:"button",category:"Picture",name:"Wide Dynamics Range Down",options:{},style:{text:"$(birddog-ptz:wide_dynamic_range)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"wide_dynamic_range",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_blue_gain&&(r.cm_blue_gainUp={type:"button",category:"Color Matrix",name:"Blue Gain Up",options:{},style:{text:"\\nBlue Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_blue_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_blue_gainDown={type:"button",category:"Color Matrix",name:"Blue Gain Down",options:{},style:{text:"$(birddog-ptz:cm_blue_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_blue_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_blue_hue&&(r.cm_blue_hueUp={type:"button",category:"Color Matrix",name:"Blue Hue Up",options:{},style:{text:"\\nBlue Hue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_blue_hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_blue_hueDown={type:"button",category:"Color Matrix",name:"Blue Hue Down",options:{},style:{text:"$(birddog-ptz:cm_blue_hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_blue_hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_color_gain&&(r.cm_color_gainUp={type:"button",category:"Color Matrix",name:"Color Gain Up",options:{},style:{text:"\\nColor Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_color_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_color_gainDown={type:"button",category:"Color Matrix",name:"Color Gain Down",options:{},style:{text:"$(birddog-ptz:cm_color_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_color_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_cyan_gain&&(r.cm_cyan_gainUp={type:"button",category:"Color Matrix",name:"Cyan Gain Up",options:{},style:{text:"\\nCyan Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_cyan_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_cyan_gainDown={type:"button",category:"Color Matrix",name:"Cyan Gain Down",options:{},style:{text:"$(birddog-ptz:cm_cyan_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_cyan_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_cyan_hue&&(r.cm_cyan_hueUp={type:"button",category:"Color Matrix",name:"Cyan Hue Up",options:{},style:{text:"\\nCyan Hue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_cyan_hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_cyan_hueDown={type:"button",category:"Color Matrix",name:"Cyan Hue Down",options:{},style:{text:"$(birddog-ptz:cm_cyan_hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_cyan_hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_green_gain&&(r.cm_green_gainUp={type:"button",category:"Color Matrix",name:"Green Gain Up",options:{},style:{text:"\\nGreen Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_green_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_green_gainDown={type:"button",category:"Color Matrix",name:"Green Gain Down",options:{},style:{text:"$(birddog-ptz:cm_green_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_green_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_green_hue&&(r.cm_green_hueUp={type:"button",category:"Color Matrix",name:"Green Hue Up",options:{},style:{text:"\\nGreen Hue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_green_hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_green_hueDown={type:"button",category:"Color Matrix",name:"Green Hue Down",options:{},style:{text:"$(birddog-ptz:cm_green_hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_green_hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_hue_phase&&(r.cm_hue_phaseUp={type:"button",category:"Color Matrix",name:"Hue Phase Up",options:{},style:{text:"\\nHue Phase",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_hue_phase",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_hue_phaseDown={type:"button",category:"Color Matrix",name:"Hue Phase Down",options:{},style:{text:"$(birddog-ptz:cm_hue_phase)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_hue_phase",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_mag_gain&&(r.cm_mag_gainUp={type:"button",category:"Color Matrix",name:"Magenta Gain Up",options:{},style:{text:"\\nMagenta Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_mag_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_mag_gainDown={type:"button",category:"Color Matrix",name:"Magenta Gain Down",options:{},style:{text:"$(birddog-ptz:cm_mag_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_mag_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_mag_hue&&(r.cm_mag_hueUp={type:"button",category:"Color Matrix",name:"Magenta Hue Up",options:{},style:{text:"\\nMagenta Hue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_mag_hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_mag_hueDown={type:"button",category:"Color Matrix",name:"Magenta Hue Down",options:{},style:{text:"$(birddog-ptz:cm_mag_hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_mag_hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_red_gain&&(r.cm_red_gainUp={type:"button",category:"Color Matrix",name:"Red Gain Up",options:{},style:{text:"\\nRed Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_red_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_red_gainDown={type:"button",category:"Color Matrix",name:"Red Gain Down",options:{},style:{text:"$(birddog-ptz:cm_red_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_red_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_red_hue&&(r.cm_red_hueUp={type:"button",category:"Color Matrix",name:"Red Hue Up",options:{},style:{text:"\\nRed Hue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_red_hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_red_hueDown={type:"button",category:"Color Matrix",name:"Red Hue Down",options:{},style:{text:"$(birddog-ptz:cm_red_hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_red_hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_yellow_gain&&(r.cm_yellow_gainUp={type:"button",category:"Color Matrix",name:"Yellow Gain Up",options:{},style:{text:"\\nYellow Gain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_yellow_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_yellow_gainDown={type:"button",category:"Color Matrix",name:"Yellow Gain Down",options:{},style:{text:"$(birddog-ptz:cm_yellow_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_yellow_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.cm_yellow_hue&&(r.cm_yellow_hueUp={type:"button",category:"Color Matrix",name:"Yellow Hue Up",options:{},style:{text:"\\nYellow Hue",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_yellow_hue",options:{val:"up"}}],up:[]}],feedbacks:[]},r.cm_yellow_hueDown={type:"button",category:"Color Matrix",name:"Yellow Hue Down",options:{},style:{text:"$(birddog-ptz:cm_yellow_hue)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"cm_yellow_hue",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.brightness&&(r.brightnessUp={type:"button",category:"Advanced Setup",name:"Brightness Up",options:{},style:{text:"\\nBrightness",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"brightness",options:{val:"up"}}],up:[]}],feedbacks:[]},r.brightnessDown={type:"button",category:"Advanced Setup",name:"Brightness Down",options:{},style:{text:"$(birddog-ptz:brightness)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"brightness",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.brightness_comp&&(r.brightness_comp={type:"button",category:"Advanced Setup",name:"Brightness Compensation",options:{},style:{text:"Brightness\\nCompensation\\n$(birddog-ptz:brightness_comp)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"brightness_comp",options:{val:n.brightness_comp.default}}],up:[]}],feedbacks:[{feedbackId:"brightness_comp",options:{val:n.brightness_comp.default},style:{color:t,bgcolor:a}}]}),n?.comp_level&&(r.comp_level={type:"button",category:"Advanced Setup",name:"Compensation Level",options:{},style:{text:"Compensation\\nLevel\\n$(birddog-ptz:comp_level)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"comp_level",options:{val:n.comp_level.default}}],up:[]}],feedbacks:[{feedbackId:"comp_level",options:{val:n.comp_level.default},style:{color:t,bgcolor:a}}]}),n?.gamma_offset&&(r.gamma_offsetUp={type:"button",category:"Advanced Setup",name:"Gamma Offset Up",options:{},style:{text:"\\nGamma\\nOffset",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gamma_offset",options:{val:"up"}}],up:[]}],feedbacks:[]},r.gamma_offsetDown={type:"button",category:"Advanced Setup",name:"Gamma Offset Down",options:{},style:{text:"$(birddog-ptz:gamma_offset)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"gamma_offset",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.high_resolution&&(r.high_resolution={type:"button",category:"Advanced Setup",name:"High Resolution",options:{},style:{text:"High\\nResolution\\n$(birddog-ptz:high_resolution)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"high_resolution",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"high_resolution",options:{val:n.high_resolution.default},style:{color:t,bgcolor:a}}]}),n?.video_enhancement&&(r.video_enhancement={type:"button",category:"Advanced Setup",name:"Video Enhancement",options:{},style:{text:"Video\\nEnhancement\\n$(birddog-ptz:video_enhancement)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"video_enhancement",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"video_enhancement",options:{val:n.video_enhancement.default},style:{color:t,bgcolor:a}}]}),n?.aux&&(r.aux={type:"button",category:"External Setup",name:"Aux",options:{},style:{text:"Aux\\n$(birddog-ptz:aux)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"aux",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"aux",options:{val:n.aux.default},style:{color:t,bgcolor:a}}]}),n?.rain_wiper&&(r.rain_wiper={type:"button",category:"External Setup",name:"Rain Wiper",options:{},style:{text:"Rain Wiper\\n$(birddog-ptz:rain_wiper)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"rain_wiper",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"rain_wiper",options:{val:n.rain_wiper.default},style:{color:t,bgcolor:a}}]}),n?.v12vout&&(r.v12vout={type:"button",category:"External Setup",name:"12v Out",options:{},style:{text:"12v Out\\n$(birddog-ptz:v12vout)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"v12vout",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"v12vout",options:{val:n.v12vout.default},style:{color:t,bgcolor:a}}]}),n?.bandwidth&&(r.bandwidth={type:"button",category:"Detail Setup",name:"Bandwidth",options:{},style:{text:"Bandwidth\\n$(birddog-ptz:bandwidth)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"bandwidth",options:{val:n.bandwidth.default}}],up:[]}],feedbacks:[{feedbackId:"bandwidth",options:{val:n.bandwidth.default},style:{color:t,bgcolor:a}}]}),n?.bw_balance&&(r.bw_balance={type:"button",category:"Detail Setup",name:"BW Balance",options:{},style:{text:"BW Balance\\n$(birddog-ptz:bw_balance)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"bw_balance",options:{val:n.bw_balance.default}}],up:[]}],feedbacks:[{feedbackId:"bw_balance",options:{val:n.bw_balance.default},style:{color:t,bgcolor:a}}]}),n?.crispening&&(r.crispeningUp={type:"button",category:"Detail Setup",name:"Crispening Up",options:{},style:{text:"\\nCrispening",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"crispening",options:{val:"up"}}],up:[]}],feedbacks:[]},r.crispeningDown={type:"button",category:"Advanced Setup",name:"Crispening Down",options:{},style:{text:"$(birddog-ptz:crispening)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"crispening",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.detail&&(r.detail={type:"button",category:"Detail Setup",name:"Detail",options:{},style:{text:"Detail\\n$(birddog-ptz:detail)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"detail",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"detail",options:{val:n.detail.default},style:{color:t,bgcolor:a}}]}),n?.highlight_detail&&(r.highlight_detailUp={type:"button",category:"Detail Setup",name:"Highlight Detail Up",options:{},style:{text:"\\nHighlight\\nDetail",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"highlight_detail",options:{val:"up"}}],up:[]}],feedbacks:[]},r.highlight_detailDown={type:"button",category:"Advanced Setup",name:"Highlight Detail Down",options:{},style:{text:"$(birddog-ptz:highlight_detail)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"highlight_detail",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.hv_balance&&(r.hv_balanceUp={type:"button",category:"Detail Setup",name:"Hv Balance Up",options:{},style:{text:"\\nHv Balance",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"hv_balance",options:{val:"up"}}],up:[]}],feedbacks:[]},r.hv_balanceDown={type:"button",category:"Advanced Setup",name:"Hv Balance Down",options:{},style:{text:"$(birddog-ptz:hv_balance)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"hv_balance",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.limit&&(r.limitUp={type:"button",category:"Detail Setup",name:"Limit Up",options:{},style:{text:"\\nLimit",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"limit",options:{val:"up"}}],up:[]}],feedbacks:[]},r.limitDown={type:"button",category:"Advanced Setup",name:"Limit Down",options:{},style:{text:"$(birddog-ptz:limit)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"limit",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.super_low&&(r.super_lowUp={type:"button",category:"Detail Setup",name:"Super Low Up",options:{},style:{text:"\\nSuper Low",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"super_low",options:{val:"up"}}],up:[]}],feedbacks:[]},r.super_lowDown={type:"button",category:"Advanced Setup",name:"Super Low Down",options:{},style:{text:"$(birddog-ptz:super_low)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"super_low",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.black_gamma_level&&(r.black_gamma_levelUp={type:"button",category:"Gamma Setup",name:"Black Gamma Level Up",options:{},style:{text:"\\nBlack Gamma\\nLevel",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"black_gamma_level",options:{val:"up"}}],up:[]}],feedbacks:[]},r.black_gamma_levelDown={type:"button",category:"Gamma Setup",name:"Black Gamma Level Down",options:{},style:{text:"$(birddog-ptz:black_gamma_level)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"black_gamma_level",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.black_level&&(r.black_levelUp={type:"button",category:"Gamma Setup",name:"Black Level Up",options:{},style:{text:"\\nBlack\\nLevel",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"black_level",options:{val:"up"}}],up:[]}],feedbacks:[]},r.black_levelDown={type:"button",category:"Gamma Setup",name:"Black Level Down",options:{},style:{text:"$(birddog-ptz:black_level)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"black_level",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.black_level_range&&(r.black_level_range={type:"button",category:"Gamma Setup",name:"Black Level Range",options:{},style:{text:"Black Level\\nRange\\n$(birddog-ptz:black_level_range)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"black_level_range",options:{val:n.black_level_range.default}}],up:[]}],feedbacks:[{feedbackId:"black_level_range",options:{val:n.black_level_range.default},style:{color:t,bgcolor:a}}]}),n?.effect&&(r.effectUp={type:"button",category:"Gamma Setup",name:"Effect Up",options:{},style:{text:"\\nEffect",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"effect",options:{val:"up"}}],up:[]}],feedbacks:[]},r.effectDown={type:"button",category:"Gamma Setup",name:"Effect Down",options:{},style:{text:"$(birddog-ptz:effect)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"effect",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.offset&&(r.offsetUp={type:"button",category:"Gamma Setup",name:"Offset Up",options:{},style:{text:"\\nOffset",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"offset",options:{val:"up"}}],up:[]}],feedbacks:[]},r.offsetDown={type:"button",category:"Gamma Setup",name:"Offset Down",options:{},style:{text:"$(birddog-ptz:offset)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"offset",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.pattern&&(r.patternUp={type:"button",category:"Gamma Setup",name:"Pattern Up",options:{},style:{text:"\\nPattern",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pattern",options:{val:"up"}}],up:[]}],feedbacks:[]},r.patternDown={type:"button",category:"Gamma Setup",name:"Pattern Down",options:{},style:{text:"$(birddog-ptz:pattern)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pattern",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.pattern_fine&&(r.pattern_fineUp={type:"button",category:"Gamma Setup",name:"Pattern Fine Up",options:{},style:{text:"\\nPattern\\nFine",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pattern_fine",options:{val:"up"}}],up:[]}],feedbacks:[]},r.pattern_fineDown={type:"button",category:"Gamma Setup",name:"Pattern Fine Down",options:{},style:{text:"$(birddog-ptz:pattern_fine)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"pattern_fine",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.settings&&(r.settings={type:"button",category:"Gamma Setup",name:"Settings",options:{},style:{text:"Settings\\n$(birddog-ptz:settings)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"settings",options:{val:n.settings.default}}],up:[]}],feedbacks:[{feedbackId:"settings",options:{value:n.settings.default},style:{color:t,bgcolor:a}}]}),n?.visibility_enhancer&&(r.visibility_enhancer={type:"button",category:"Gamma Setup",name:"Visibility Enhancer",options:{},style:{text:"Visibility\\nEnhancer\\n$(birddog-ptz:visibility_enhancer)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"visibility_enhancer",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"visibility_enhancer",options:{value:n.visibility_enhancer.default},style:{color:t,bgcolor:a}}]}),n?.scope_gamma_gain&&(r.scope_gamma_gainUp={type:"button",category:"Scopes",name:"Gamma Gain Up",options:{},style:{text:"\\nGamma\\nGain",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_gamma_gain",options:{val:"up"}}],up:[]}],feedbacks:[]},r.scope_gamma_gainDown={type:"button",category:"Scopes",name:"Gamma Gain Down",options:{},style:{text:"$(birddog-ptz:scope_gamma_gain)\\n",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_gamma_gain",options:{val:"down"}}],up:[]}],feedbacks:[]}),n?.scope_mode&&(r.scope_mode={type:"button",category:"Scopes",name:"Mode",options:{},style:{text:"Mode\\n$(birddog-ptz:scope_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_mode",options:{val:n.scope_mode.default}}],up:[]}],feedbacks:[{feedbackId:"scope_mode",options:{value:n.scope_mode.default},style:{color:t,bgcolor:a}}]}),n?.scope_position&&(r.scope_position={type:"button",category:"Scopes",name:"Position",options:{},style:{text:"Position\\n$(birddog-ptz:scope_position)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_position",options:{val:n.scope_position.default}}],up:[]}],feedbacks:[{feedbackId:"scope_position",options:{val:n.scope_position.default},style:{color:t,bgcolor:a}}]}),n?.scope_preview&&(r.scope_preview={type:"button",category:"Scopes",name:"Preview Enable",options:{},style:{text:"Preview\\nEnable\\n$(birddog-ptz:scope_preview)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_preview",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"scope_preview",options:{value:"On"},style:{color:t,bgcolor:a}}]}),n?.scope_program&&(r.scope_program={type:"button",category:"Scopes",name:"Program Enable",options:{},style:{text:"Program\\nEnable\\n$(birddog-ptz:scope_program)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_program",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"scope_program",options:{value:"On"},style:{color:t,bgcolor:a}}]}),n?.scope_size&&(r.scope_size={type:"button",category:"Scopes",name:"Size",options:{},style:{text:"Size\\n$(birddog-ptz:scope_size)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_size",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"scope_size",options:{value:n.scope_size.default},style:{color:t,bgcolor:a}}]}),n?.scope_transparency&&(r.scope_transparency={type:"button",category:"Scopes",name:"Transparency Enable",options:{},style:{text:"Transparency\\nEnable\\n$(birddog-ptz:scope_transparency)",size:"auto",color:e,bgcolor:t},steps:[{down:[{actionId:"scope_transparency",options:{val:"Toggle"}}],up:[]}],feedbacks:[{feedbackId:"scope_transparency",options:{value:"On"},style:{color:t,bgcolor:a}}]}),"5"==this.camera.firmware.major&&(r.averageBitrate={type:"button",category:"Dashboard",name:"Average Bitrate",options:{},style:{text:"Average\\nBitrate\\n$(birddog-ptz:avbr)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.audioChannels={type:"button",category:"Dashboard",name:"Audio Channels",options:{},style:{text:"Audio Ch\\n$(birddog-ptz:aud_ch)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.audioSampleRate={type:"button",category:"Dashboard",name:"Audio Sample Rate",options:{},style:{text:"Audio\\nSample Rate\\n$(birddog-ptz:aud_sr)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.audioStatus={type:"button",category:"Dashboard",name:"Audio Status",options:{},style:{text:"Audio\\nStatus\\n$(birddog-ptz:aud_stat)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.dashboardStatus={type:"button",category:"Dashboard",name:"Status",options:{},style:{text:"Status\\n$(birddog-ptz:dashboard_vid_status)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.deviceMode={type:"button",category:"Dashboard",name:"Device Mode",options:{},style:{text:"Device Mode\\n$(birddog-ptz:dev_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.genlockStatus={type:"button",category:"Dashboard",name:"Genlock Status",options:{},style:{text:"Genlock Status\\n$(birddog-ptz:gen_status)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.mcuVersion={type:"button",category:"Dashboard",name:"MCU Version",options:{},style:{text:"MCU Version\\n$(birddog-ptz:mcu_ver)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.networkBandwidth={type:"button",category:"Dashboard",name:"Network Bandwidth",options:{},style:{text:"Network\\nBandwidth\\n$(birddog-ptz:net_band_perc)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.networkMode={type:"button",category:"Dashboard",name:"Network Mode",options:{},style:{text:"Network\\nMode\\n$(birddog-ptz:net_mode)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.networkSpeed={type:"button",category:"Dashboard",name:"Network Speed",options:{},style:{text:"Network\\nSpeed\\n$(birddog-ptz:net_speed)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.sourceStatus={type:"button",category:"Dashboard",name:"Source Status",options:{},style:{text:"Source\\nStatus\\n$(birddog-ptz:src_stat)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.cpuUsage={type:"button",category:"Dashboard",name:"CPU Usage",options:{},style:{text:"CPU Usage\\n$(birddog-ptz:sys_info_perc)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.videoFormat={type:"button",category:"Dashboard",name:"Video Format",options:{},style:{text:"Video\\nFormat\\n$(birddog-ptz:vid_fmt)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.videoFrameRate={type:"button",category:"Dashboard",name:"Video Frame Rate",options:{},style:{text:"Video\\nFrame Rate\\n$(birddog-ptz:vid_fr)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.videoResolution={type:"button",category:"Dashboard",name:"Video Resolution",options:{},style:{text:"Video\\nResolution\\n$(birddog-ptz:vid_res)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.videoSampleRate={type:"button",category:"Dashboard",name:"Video Sample rate",options:{},style:{text:"Video\\nSample Rate\\n$(birddog-ptz:vid_sra)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.videoStreamName={type:"button",category:"Dashboard",name:"Video Stream Name",options:{},style:{text:"Video\\nStream Name\\n$(birddog-ptz:vid_str_name)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.irisShutterColorTempGain={type:"button",category:"Dashboard",name:"IRIS/Shutter/ColorTemp/Gain",options:{},style:{text:"$(birddog-ptz:iris) $(birddog-ptz:shutter_speed)\\n$(birddog-ptz:color_temp)K\\n$(birddog-ptz:gain)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]},r.cpuBitrate={type:"button",category:"Dashboard",name:"CPU / BR",options:{},style:{text:"CPU | BR\\n$(birddog-ptz:sys_info_perc)\\n$(birddog-ptz:avbr)",size:"auto",color:e,bgcolor:t},steps:[{down:[],up:[]}],feedbacks:[]}),r}function k(){this.setVariableDefinitions(g(y,this.camera.firmware.major,this.camera.model))}function V(){console.log("uodathtoh");let e=g(y,this.camera.firmware.major,this.camera.model),t=p(y,this.camera.firmware.major,this.camera.model),a={};if(e.some((e=>"firmware"===e.variableId))&&(a.firmware=this.camera.firmware.major+"."+this.camera.firmware.minor),e.some((e=>"model"===e.variableId))&&(a.model=this.camera.model),e.some((e=>"hostname"===e.variableId))&&(a.hostname=this.camera.hostname),e.some((e=>"ipaddress"===e.variableId))&&(a.ipaddress=this.camera.ipaddress),e.some((e=>"netmask"===e.variableId))&&(a.netmask=this.camera.netmask),e.some((e=>"network_config"===e.variableId))&&(a.network_config=this.camera.network_config),e.some((e=>"serial_number"===e.variableId))&&(a.serial_number=this.camera.serial_number),e.some((e=>"status"===e.variableId))&&(a.status=this.camera.status),e.some((e=>"standby"===e.variableId))&&(a.standby=t.standby.choices.find((e=>e.id==this.camera.standby))?.label),e.some((e=>"freeze"===e.variableId))&&(a.freeze=this.camera.freeze),e.some((e=>"audio_in_gain"===e.variableId))&&(a.audio_in_gain=this.camera.analogAudioInGain-50+"dB"),e.some((e=>"audio_out_gain"===e.variableId))&&(a.audio_out_gain=this.camera.analogAudioOutGain-50+"dB"),e.some((e=>"audio_output"===e.variableId))&&(a.audio_output=t.analogAudioOutput.choices.find((e=>e.id==this.camera.analogAudioOutput))?.label),e.some((e=>"oled"===e.variableId))&&(a.oled=this.camera.oled),e.some((e=>"video_output"===e.variableId))&&(a.video_output=this.camera.video_output),e.some((e=>"bandwidth_mode"===e.variableId))&&(a.bandwidth_mode=t.bandwidth_mode.choices.find((e=>e.id==this.camera.bandwidth_mode))?.label),e.some((e=>"bandwidth_select"===e.variableId))&&(a.bandwidth_select=this.camera.bandwidth_select),e.some((e=>"color_bitdepth"===e.variableId))&&(a.color_bitdepth=this.camera.color_bitdepth),e.some((e=>"ndi_audio"===e.variableId))&&(a.ndi_audio=t.ndiAudio.choices.find((e=>e.id==this.camera.ndiAudio))?.label),e.some((e=>"ndi_group"===e.variableId))&&(a.ndi_group=t.ndiGroupEnable.choices.find((e=>e.id==this.camera.ndiGroupEnable))?.label),e.some((e=>"ndi_group_name"===e.variableId))&&(a.ndi_group_name=this.camera.ndi_group_name),e.some((e=>"screensaver_mode"===e.variableId))&&(a.screensaver_mode=t.screensaver_mode.choices.find((e=>e.id==this.camera.screensaver_mode))?.label),e.some((e=>"stream_name"===e.variableId))&&(a.stream_name=this.camera.stream_name),e.some((e=>"stream_to_network"===e.variableId))&&(a.stream_to_network=this.camera.stream_to_network),e.some((e=>"tally_mode"===e.variableId))&&(a.tally_mode=this.camera.tally_mode),e.some((e=>"video_csc"===e.variableId))&&(a.video_csc=this.camera.video_csc),e.some((e=>"video_format"===e.variableId))&&(a.video_format=this.camera.video_format),e.some((e=>"video_sample_rate"===e.variableId))&&(a.video_sample_rate=this.camera.video_sample_rate),e.some((e=>"transmit_method"===e.variableId))&&(a.transmit_method=this.camera.transmit_method),e.some((e=>"transmit_netprefix"===e.variableId))&&(a.transmit_netprefix=this.camera.transmit_netprefix),e.some((e=>"transmit_netmask"===e.variableId))&&(a.transmit_netmask=this.camera.transmit_netmask),e.some((e=>"transmit_ttl"===e.variableId))&&(a.transmit_ttl=this.camera.transmit_ttl),e.some((e=>"ndi_discovery_server"===e.variableId))&&(a.ndi_discovery_server=t.ndi_discovery_server.choices.find((e=>e.id==this.camera.ndi_discovery_server))?.label),e.some((e=>"ndi_discovery_server_ip"===e.variableId))&&(a.ndi_discovery_server_ip=this.camera.ndi_discovery_server_ip),e.some((e=>"freed"===e.variableId))&&(a.freed=this.camera.freed),e.some((e=>"freed_ip_address"===e.variableId))&&(a.freed_ip_address=this.camera.freed_ip_address),e.some((e=>"freed_port"===e.variableId))&&(a.freed_port=this.camera.freed_port),e.some((e=>"pan_speed"===e.variableId))&&(a.pan_speed=this.camera.panSpeed),e.some((e=>"preset"===e.variableId))&&(a.preset=t.preset.choices.find((e=>e.id==this.camera.preset))?.label),e.some((e=>"preset_speed"===e.variableId))&&(a.preset_speed=this.camera.preset_speed),e.some((e=>"tilt_speed"===e.variableId))&&(a.tilt_speed=this.camera.tiltSpeed),e.some((e=>"zoom_speed"===e.variableId))&&(a.zoom_speed=this.camera.zoomSpeed),e.some((e=>"zoom_position"===e.variableId))){let e=l(t.zoom.posZoomChoices,this.camera.zoom_position);a.zoom_position=e,a.zoom_position_int=e.replace(/['X']/gi,"")}if(e.some((e=>"pan_position"===e.variableId))){let e=l(t.pt.posPanChoices,this.camera.pan_position);a.pan_position=e,a.pan_position_int=e.replace(/['']/gi,"")}if(e.some((e=>"tilt_position"===e.variableId))){let e=l(t.pt.posTiltChoices,this.camera.tilt_position);a.tilt_position=e,a.tilt_position_int=e.replace(/['']/gi,"")}if(e.some((e=>"speed_control"===e.variableId))&&(a.speed_control=t.speedControl.choices.find((e=>e.id==this.camera.speedControl))?.label),e.some((e=>"focus_mode"===e.variableId))&&(a.focus_mode=this.camera.focusM),e.some((e=>"ae_response"===e.variableId))&&(a.ae_response=this.camera.ae_response),e.some((e=>"backlight"===e.variableId))&&(a.backlight=this.camera.backlight),e.some((e=>"bright_level"===e.variableId))&&(a.bright_level=this.camera.bright_level),e.some((e=>"exposure_comp"===e.variableId))&&(a.exposure_comp=this.camera.expComp),e.some((e=>"exposure_comp_level"===e.variableId))){let e="P100"===this.camera.model||"PF120"===this.camera.model?parseInt(this.camera.expCompLvl)-7:this.camera.expCompLvl;a.exposure_comp_level=e?.toString()}e.some((e=>"exposure_mode"===e.variableId))&&(a.exposure_mode=this.camera.exposure_mode),e.some((e=>"gain"===e.variableId))&&(a.gain=t.gain.value.choices.find((e=>e.id==this.camera.gain))?.label),e.some((e=>"gain_limit"===e.variableId))&&(a.gain_limit=t.gain.value.choices.find((e=>e.id==this.camera.gain_limit))?.label),e.some((e=>"gain_point"===e.variableId))&&(a.gain_point=this.camera.gain_point),e.some((e=>"gain_point_position"===e.variableId))&&(a.gain_point_position=this.camera.gain_point_position),e.some((e=>"high_sensitivity"===e.variableId))&&(a.high_sensitivity=this.camera.high_sensitivity),e.some((e=>"iris"===e.variableId))&&(a.iris=t.iris.value.choices.find((e=>e.id==this.camera.iris))?.label),e.some((e=>"shutter_control_overwrite"===e.variableId))&&(a.shutter_control_overwrite=this.camera.shutter_control_overwrite),e.some((e=>"shutter_max_speed"===e.variableId))&&(a.shutter_max_speed=this.camera.shutter_max_speed),e.some((e=>"shutter_min_speed"===e.variableId))&&(a.shutter_min_speed=this.camera.shutter_min_speed),e.some((e=>"shutter_speed"===e.variableId))&&(a.shutter_speed=t.shutter_speed?.["shutter_"+[this.camera.shutter_table]]?.find((e=>e.id==this.camera.shutter_speed))?.label),e.some((e=>"shutter_speed_overwrite"===e.variableId))&&(a.shutter_speed_overwrite=this.camera.shutter_speed_overwrite),e.some((e=>"slow_shutter_en"===e.variableId))&&(a.slow_shutter_en=this.camera.slow_shutter_en),e.some((e=>"slow_shutter_limit"===e.variableId))&&(a.slow_shutter_limit=t.slow_shutter_limit?.["shutter_"+[this.camera.shutter_table]]?.find((e=>e.id==this.camera.slow_shutter_limit))?.label),e.some((e=>"spotlight"===e.variableId))&&(a.spotlight=this.camera.spotlight),e.some((e=>"bg"===e.variableId))&&(a.bg=this.camera.bg),e.some((e=>"br"===e.variableId))&&(a.br=this.camera.br),e.some((e=>"blue_gain"===e.variableId))&&(a.blue_gain=this.camera.blue_gain),e.some((e=>"color_temp"===e.variableId))&&(a.color_temp=this.camera.color_temp),e.some((e=>"gb"===e.variableId))&&(a.gb=this.camera.gb),e.some((e=>"gr"===e.variableId))&&(a.gr=this.camera.gr),e.some((e=>"level"===e.variableId))&&(a.level=this.camera.level),e.some((e=>"matrix"===e.variableId))&&(a.matrix=this.camera.matrix),e.some((e=>"offset"===e.variableId))&&(a.offset=this.camera.offset),e.some((e=>"phase"===e.variableId))&&(a.phase=this.camera.phase),e.some((e=>"rb"===e.variableId))&&(a.rb=this.camera.rb),e.some((e=>"rg"===e.variableId))&&(a.rg=this.camera.rg),e.some((e=>"red_gain"===e.variableId))&&(a.red_gain=this.camera.red_gain),e.some((e=>"select"===e.variableId))&&(a.select=this.camera.select),e.some((e=>"speed"===e.variableId))&&(a.speed=this.camera.speed),e.some((e=>"wb_mode"===e.variableId))&&(a.wb_mode=this.camera.wb_mode),e.some((e=>"backlight_com"===e.variableId))&&(a.backlight_com=this.camera.backlight_com),e.some((e=>"chroma_suppress"===e.variableId))&&(a.chroma_suppress=this.camera.chroma_suppress),e.some((e=>"contrast"===e.variableId))&&(a.contrast=this.camera.contrast),e.some((e=>"bw_effect"===e.variableId))&&(a.bw_effect=this.camera.pictureEffect),e.some((e=>"flip"===e.variableId))&&(a.flip=this.camera.picFlip),e.some((e=>"gamma"===e.variableId))&&(a.gamma=this.camera.gamma),e.some((e=>"highlight_comp"===e.variableId))&&(a.highlight_comp=this.camera.highlight_comp),e.some((e=>"highlight_comp_mask"===e.variableId))&&(a.highlight_comp_mask=this.camera.highlight_comp_mask),e.some((e=>"hue"===e.variableId))&&(a.hue=this.camera.hue),e.some((e=>"ir_cutfilter"===e.variableId))&&(a.ir_cutfilter=this.camera.ir_cutfilter),e.some((e=>"low_latency"===e.variableId))&&(a.low_latency=this.camera.low_latency),e.some((e=>"mirror"===e.variableId))&&(a.mirror=this.camera.picMirror),e.some((e=>"nd_filter"===e.variableId))&&(a.nd_filter=this.camera.nd_filter),e.some((e=>"noise_reduction"===e.variableId))&&(a.noise_reduction=t.noise_reduction.value.choices.find((e=>e.id==this.camera.noise_reduction))?.label),e.some((e=>"saturation"===e.variableId))&&(a.saturation=this.camera.saturation),e.some((e=>"sharpness"===e.variableId))&&(a.sharpness=this.camera.sharpness),e.some((e=>"stabilizer"===e.variableId))&&(a.stabilizer=this.camera.stabilizer),e.some((e=>"threed_nr"===e.variableId))&&(a.threed_nr=this.camera.threed_nr),e.some((e=>"twod_nr"===e.variableId))&&(a.twod_nr=this.camera.twod_nr),e.some((e=>"wide_dynamic_range"===e.variableId))&&(a.wide_dynamic_range=t.wide_dynamic_range.value.choices.find((e=>e.id==this.camera.wide_dynamic_range))?.label),e.some((e=>"cm_blue_gain"===e.variableId))&&(a.cm_blue_gain=this.camera.cm_blue_gain),e.some((e=>"cm_blue_hue"===e.variableId))&&(a.cm_blue_hue=this.camera.cm_blue_hue),e.some((e=>"cm_color_gain"===e.variableId))&&(a.cm_color_gain=this.camera.cm_color_gain),e.some((e=>"cm_cyan_gain"===e.variableId))&&(a.cm_cyan_gain=this.camera.cm_cyan_gain),e.some((e=>"cm_cyan_hue"===e.variableId))&&(a.cm_cyan_hue=this.camera.cm_cyan_hue),e.some((e=>"cm_green_gain"===e.variableId))&&(a.cm_green_gain=this.camera.cm_green_gain),e.some((e=>"cm_green_hue"===e.variableId))&&(a.cm_green_hue=this.camera.cm_green_hue),e.some((e=>"cm_hue_phase"===e.variableId))&&(a.cm_hue_phase=this.camera.cm_hue_phase),e.some((e=>"cm_mag_gain"===e.variableId))&&(a.cm_mag_gain=this.camera.cm_mag_gain),e.some((e=>"cm_mag_hue"===e.variableId))&&(a.cm_mag_hue=this.camera.cm_mag_hue),e.some((e=>"cm_red_gain"===e.variableId))&&(a.cm_red_gain=this.camera.cm_red_gain),e.some((e=>"cm_red_hue"===e.variableId))&&(a.cm_red_hue=this.camera.cm_red_hue),e.some((e=>"cm_yellow_gain"===e.variableId))&&(a.cm_yellow_gain=this.camera.cm_yellow_gain),e.some((e=>"cm_yellow_hue"===e.variableId))&&(a.cm_yellow_hue=this.camera.cm_yellow_hue),e.some((e=>"brightness"===e.variableId))&&(a.brightness=this.camera.brightness),e.some((e=>"brightness_comp"===e.variableId))&&(a.brightness_comp=this.camera.brightness_comp),e.some((e=>"comp_level"===e.variableId))&&(a.comp_level=this.camera.comp_level),e.some((e=>"gamma_offset"===e.variableId))&&(a.gamma_offset=this.camera.gamma_offset),e.some((e=>"high_resolution"===e.variableId))&&(a.high_resolution=this.camera.high_resolution),e.some((e=>"video_enhancement"===e.variableId))&&(a.video_enhancement=this.camera.video_enhancement),e.some((e=>"aux"===e.variableId))&&(a.aux=this.camera.aux),e.some((e=>"rain_wiper"===e.variableId))&&(a.rain_wiper=this.camera.rain_wiper),e.some((e=>"v12vout"===e.variableId))&&(a.v12vout=this.camera.v12vout),e.some((e=>"bandwidth"===e.variableId))&&(a.bandwidth=this.camera.bandwidth),e.some((e=>"bw_balance"===e.variableId))&&(a.bw_balance=this.camera.bw_balance),e.some((e=>"crispening"===e.variableId))&&(a.crispening=this.camera.crispening),e.some((e=>"detail"===e.variableId))&&(a.detail=this.camera.detail),e.some((e=>"highlight_detail"===e.variableId))&&(a.highlight_detail=this.camera.highlight_detail),e.some((e=>"hv_balance"===e.variableId))&&(a.hv_balance=this.camera.hv_balance),e.some((e=>"limit"===e.variableId))&&(a.limit=this.camera.limit),e.some((e=>"super_low"===e.variableId))&&(a.super_low=this.camera.super_low),e.some((e=>"black_gamma_level"===e.variableId))&&(a.black_gamma_level=this.camera.black_gamma_level),e.some((e=>"black_level"===e.variableId))&&(a.black_level=this.camera.black_level),e.some((e=>"black_level_range"===e.variableId))&&(a.black_level_range=this.camera.black_level_range),e.some((e=>"effect"===e.variableId))&&(a.effect=this.camera.effect),e.some((e=>"level"===e.variableId))&&(a.level=this.camera.level),e.some((e=>"offset"===e.variableId))&&(a.offset=this.camera.offset),e.some((e=>"pattern"===e.variableId))&&(a.pattern=this.camera.pattern),e.some((e=>"pattern_fine"===e.variableId))&&(a.pattern_fine=this.camera.pattern_fine),e.some((e=>"settings"===e.variableId))&&(a.settings=this.camera.settings),e.some((e=>"visibility_enhancer"===e.variableId))&&(a.visibility_enhancer=this.camera.visibility_enhancer),e.some((e=>"scope_gamma_gain"===e.variableId))&&(a.scope_gamma_gain=this.camera.scope_gamma_gain),e.some((e=>"scope_mode"===e.variableId))&&(a.scope_mode=this.camera.scope_mode),e.some((e=>"scope_position"===e.variableId))&&(a.scope_position=this.camera.scope_position),e.some((e=>"scope_preview"===e.variableId))&&(a.scope_preview=this.camera.scope_preview),e.some((e=>"scope_program"===e.variableId))&&(a.scope_program=this.camera.scope_program),e.some((e=>"scope_size"===e.variableId))&&(a.scope_size=t.scope_size.choices.find((e=>e.id==this.camera.scope_size))?.label),e.some((e=>"scope_transparency"===e.variableId))&&(a.scope_transparency=this.camera.scope_transparency),e.some((e=>"avbr"===e.variableId))&&(a.avbr=this.camera.avbr),e.some((e=>"aud_ch"===e.variableId))&&(a.aud_ch=this.camera.aud_ch),e.some((e=>"aud_sr"===e.variableId))&&(a.aud_sr=this.camera.aud_sr),e.some((e=>"aud_stat"===e.variableId))&&(a.aud_stat=this.camera.aud_stat),e.some((e=>"dashboard_vid_status"===e.variableId))&&(a.dashboard_vid_status=this.camera.dashboard_vid_status),e.some((e=>"dev_mode"===e.variableId))&&(a.dev_mode=this.camera.dev_mode),e.some((e=>"gen_status"===e.variableId))&&(a.gen_status=this.camera.gen_status),e.some((e=>"mcu_ver"===e.variableId))&&(a.mcu_ver=this.camera.mcu_ver),e.some((e=>"net_band_perc"===e.variableId))&&(a.net_band_perc=this.camera.net_band_perc+"%"),e.some((e=>"net_mode"===e.variableId))&&(a.net_mode=this.camera.net_mode),e.some((e=>"net_speed"===e.variableId))&&(a.net_speed=this.camera.net_speed),e.some((e=>"src_stat"===e.variableId))&&(a.src_stat=this.camera.src_stat),e.some((e=>"sys_info_perc"===e.variableId))&&(a.sys_info_perc=this.camera.sys_info_perc+"%"),e.some((e=>"vid_fmt"===e.variableId))&&(a.vid_fmt=this.camera.vid_fmt),e.some((e=>"vid_fr"===e.variableId))&&(a.vid_fr=this.camera.vid_fr),e.some((e=>"vid_res"===e.variableId))&&(a.vid_res=this.camera.vid_res),e.some((e=>"vid_sra"===e.variableId))&&(a.vid_sra=this.camera.vid_sra),e.some((e=>"vid_str_name"===e.variableId))&&(a.vid_str_name=this.camera.vid_str_name),this.setVariableValues(a)}function R(){(0,o.combineRgb)(255,255,255);const e=(0,o.combineRgb)(0,0,0),t=((0,o.combineRgb)(255,0,0),(0,o.combineRgb)(0,255,0));(0,o.combineRgb)(255,102,0);let a=p(y,this.camera.firmware.major,this.camera.model);const n={};a?.standby&&(n.standby_status={type:"boolean",name:a.standby.name,description:"If the camera is in standby, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Standby",id:"val",choices:a.standby.choices,default:a.standby.default}],callback:e=>this.camera?.standby==e.options.val}),a?.freeze&&(n.freeze_status={type:"boolean",name:a.freeze.name,description:"If the camera matches the selected freeze status, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.freeze.choices,default:a.freeze.default}],callback:e=>this.camera?.freeze==e.options.val}),a?.analogAudioInGain&&(n.analogAudioInGain={type:"boolean",name:a.analogAudioInGain.name,description:"If the camera matches the selected Audio Out Gain, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Analog Audio In Gain (dB) ("+a.analogAudioInGain.range.min+" to "+a.analogAudioInGain.range.max+")",id:"val",default:a.analogAudioInGain.range.default,min:a.analogAudioInGain.range.min,max:a.analogAudioInGain.range.max}],callback:e=>this.camera?.analogAudioInGain==e.options.val}),a?.analogAudioOutGain&&(n.analogAudioOutGain={type:"boolean",name:a.analogAudioOutGain.name,description:"If the camera matches the selected Audio Out Gain, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Analog Audio Out Gain (dB) ("+a.analogAudioOutGain.range.min+" to "+a.analogAudioOutGain.range.max+")",id:"val",default:a.analogAudioOutGain.range.default,min:a.analogAudioOutGain.range.min,max:a.analogAudioOutGain.range.max}],callback:e=>this.camera?.analogAudioOutGain==e.options.val}),a?.analogAudioOutput&&(n.analogAudioOutput={type:"boolean",name:a.analogAudioOutput.name,description:"If the camera matches the selected audio output selector, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Decode Comms / Decode Loop",id:"val",choices:a.analogAudioOutput.choices,default:a.analogAudioOutput.default}],callback:e=>this.camera?.analogAudioOutput==e.options.val}),a?.video_output&&(n.video_output={type:"boolean",name:a.video_output.name,description:"If the camera matches the selected Video Output mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"val",choices:a.video_output.choices,default:a.video_output.default}],callback:e=>this.camera?.video_output==e.options.val}),a?.bandwidth_mode&&(n.bandwidth_mode={type:"boolean",name:a.bandwidth_mode.name,description:"If the camera matches the selected encode bandwidth mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Manual / NDI Managed",id:"val",choices:a.bandwidth_mode.choices,default:a.bandwidth_mode.default}],callback:e=>this.camera?.bandwidth_mode==e.options.val}),a?.ndiAudio&&(n.ndiAudio={type:"boolean",name:a.ndiAudio.name,description:"If the camera matches the selected NDI Audio selector, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Analog / Mute",id:"val",choices:a.ndiAudio.choices,default:a.ndiAudio.default}],callback:e=>this.camera?.ndiAudio==e.options.val}),a?.ndiGroupEnable&&(n.ndiGroupEnable={type:"boolean",name:a.ndiGroupEnable.name,description:"If the camera matches the selected NDI Group Enable  selector, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"NDI Group Enable",id:"val",choices:a.ndiGroupEnable.choices,default:a.ndiGroupEnable.default}],callback:e=>this.camera?.ndiGroupEnable==e.options.val}),a?.screensaver_mode&&(n.screensaver_mode={type:"boolean",name:a.screensaver_mode.name,description:"If the camera matches the selected ScreenSaver Mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"ScreenSaver Mode",id:"val",choices:a.screensaver_mode.choices,default:a.screensaver_mode.default}],callback:e=>this.camera?.screensaver_mode==e.options.val}),a?.stream_to_network&&(n.stream_to_network={type:"boolean",name:a.stream_to_network.name,description:"If the camera matches the selected Stream to Network state, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.stream_to_network.choices,default:a.stream_to_network.default}],callback:e=>this.camera?.stream_to_network==e.options.val}),a?.tally_mode&&(n.tally_mode={type:"boolean",name:a.tally_mode.name,description:"If the camera tally matches the selected mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"mode",choices:a.tally_mode.choices,default:a.tally_mode.default}],callback:e=>this.camera?.tally_mode==e.options.mode}),a?.transmit_method&&(n.transmit_method={type:"boolean",name:a.transmit_method.name,description:"If the camera matches the selected transmit method, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Method",id:"val",choices:a.transmit_method.choices,default:a.transmit_method.default}],callback:e=>this.camera?.transmit_method==e.options.val}),a?.ndi_discovery_server&&(n.ndi_discovery_server={type:"boolean",name:a.ndi_discovery_server.name,description:"If the camera matches the selected NDI Discovery Server status, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Enabled / Disabled",id:"val",choices:a.ndi_discovery_server.choices,default:a.ndi_discovery_server.default}],callback:e=>this.camera?.ndi_discovery_server==e.options.val});let i=!this.camera.speedControl||"standard"===this.camera.speedControl,r=i?21:255,s=i?11:255,l=i?18:255,c=i?9:255;return a?.pt&&(n.posPan={type:"boolean",name:"PTZ - Pan Position",description:"If the camera matches the selected Pan Position, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Pan Position",id:"posPan",choices:a.pt.posPanChoices,default:a.pt.posPanDefault}],callback:e=>this.camera?.pan_position==e.options.posPan},n.posTilt={type:"boolean",name:"PTZ - Tilt Position",description:"If the camera matches the selected Tilt Position, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Tilt Position",id:"posTilt",choices:a.pt.posTiltChoices,default:a.pt.posTiltDefault}],callback:e=>this.camera?.tilt_position==e.options.posTilt}),a?.zoom&&(n.posZoom={type:"boolean",name:"PTZ - Zoom Position",description:"If the camera matches the selected Zoom Position, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Zoom Position",id:"posZoom",choices:a.zoom.posZoomChoices,default:a.zoom.posZoomDefault}],callback:e=>this.camera?.zoom_position==e.options.posZoom}),a?.panSpeed&&(n.panSpeed={type:"boolean",name:a.panSpeed.name,description:"If the camera matches the selected Pan Speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:`Speed (0 to ${r})`,id:"value",default:s,min:0,max:r,range:!0}],callback:e=>this.camera?.panSpeed==e.options.value}),a?.preset&&(n.preset={type:"boolean",name:a.preset.name,description:"If the camera matches the selected Preset Mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Preset Mode",id:"val",choices:a.preset.choices,default:a.preset.default}],callback:e=>this.camera?.preset==e.options.val}),a?.preset_speed&&(n.preset_speed={type:"boolean",name:a.preset_speed.name,description:"If the camera matches the selected Preset Speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Speed ("+a.preset_speed.range.min+" to "+a.preset_speed.range.max+")",id:"value",default:a.preset_speed.range.default,min:a.preset_speed.range.min,max:a.preset_speed.range.max}],callback:e=>this.camera?.preset_speed==e.options.value}),a?.tiltSpeed&&(n.tiltSpeed={type:"boolean",name:a.tiltSpeed.name,description:"If the camera matches the selected Tilt Speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:`Speed (0 to ${l})`,id:"value",default:c,min:0,max:l,range:!0}],callback:e=>this.camera?.tiltSpeed==e.options.value}),a?.zoomSpeed&&(n.zoomSpeed={type:"boolean",name:a.zoomSpeed.name,description:"If the camera matches the selected Zoom Speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Speed ("+a.zoomSpeed.range.min+" to "+a.zoomSpeed.range.max+")",id:"value",default:a.zoomSpeed.range.default,min:a.zoomSpeed.range.min,max:a.zoomSpeed.range.max}],callback:e=>this.camera?.zoomSpeed==e.options.value}),a?.speedControl&&(n.speedControl={type:"boolean",name:a.speedControl.name,description:"If the camera matches the selected speed mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Speed Mode",id:"val",choices:a.speedControl.choices,default:a.speedControl.default}],callback:e=>this.camera?.speedControl==e.options.val}),a?.focusM&&(n.focusMode={type:"boolean",name:a.focusM.name,description:"If the camera matches the selected focus mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"mode",choices:a.focusM.choices,default:a.focusM.default}],callback:e=>this.camera?.focusM==e.options.mode}),a?.ae_response&&(n.ae_response={type:"boolean",name:a.ae_response.name,description:"If the camera matches the selected Ae Response level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Ae Response ("+a.ae_response.range.min+" to "+a.ae_response.range.max+")",id:"level",default:a.ae_response.range.default,min:a.ae_response.range.min,max:a.ae_response.range.max}],callback:e=>this.camera?.ae_response==e.options.level}),a?.backlight&&(n.backlight={type:"boolean",name:a.backlight.name,description:"If the camera has Backlight on, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"mode",choices:a.backlight.choices,default:a.backlight.default}],callback:e=>this.camera?.backlight==e.options.mode}),a?.bright_level&&(n.bright_level={type:"boolean",name:a.bright_level.name,description:"If the camera matches the selected Bright Level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Level ("+a.bright_level.range.min+" to "+a.bright_level.range.max+")",id:"level",default:a.bright_level.range.default,min:a.bright_level.range.min,max:a.bright_level.range.max}],callback:e=>this.camera?.bright_level==e.options.level}),a?.expComp&&(n.exposureoCmpEn={type:"boolean",name:a.expComp.name,description:"If the camera matches the selected exposure compensation status, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"mode",choices:a.expComp.choices,default:a.expComp.default}],callback:e=>this.camera?.expComp==e.options.mode}),a?.expCompLvl&&(n.exposureCompLvl={type:"boolean",name:a.expCompLvl.name,description:"If the camera matches the selected exposure compensation level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Exposure Compensation Level ("+a.expCompLvl.range.min+" to "+a.expCompLvl.range.max+")",id:"level",default:a.expCompLvl.range.default,min:a.expCompLvl.range.min,max:a.expCompLvl.range.max}],callback:e=>this.camera?.expCompLvl==e.options.level}),a?.exposure_mode&&(n.exposureMode={type:"boolean",name:a.exposure_mode.name,description:"If the camera matches the selected exposure mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"mode",choices:a.exposure_mode.choices,default:a.exposure_mode.default}],callback:e=>this.camera?.exposure_mode==e.options.mode}),a?.gain&&(n.gain={type:"boolean",name:a.gain.name,description:"If the camera matches the selected gain, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Gain (dB)",id:"gain",choices:a.gain.value.choices,default:a.gain.value.default}],callback:e=>this.camera?.gain==e.options.gain}),a?.gain_limit&&(n.gain_limit={type:"boolean",name:a.gain_limit.name,description:"If the camera matches the selected gain limit, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Gain Limit (dB)",id:"gain",choices:a.gain.choices.slice(a.gain_limit.range.min-1,a.gain_limit.range.max+1),default:a.gain_limit.range.default}],callback:e=>this.camera?.gain_limit==e.options.gain}),a?.gain_point&&(n.gain_point={type:"boolean",name:a.gain_point.name,description:"If the camera has gain point on, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Gain Point",id:"val",choices:I.ON_OFF,default:"On"}],callback:e=>this.camera?.gain_point==e.options.val}),a?.gain_point_position&&(n.gain_point_position={type:"boolean",name:a.gain_point_position.name,description:"If the camera matches the selected gain point, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Gain Point (dB)",id:"gain",choices:a.gain.choices,default:a.gain.default}],callback:e=>this.camera?.gain_point_position==e.options.gain}),a?.high_sensitivity&&(n.high_sensitivity={type:"boolean",name:a.high_sensitivity.name,description:"If the camera has high sensitivity turned on, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.high_sensitivity.choices,default:a.high_sensitivity.default}],callback:e=>this.camera?.high_sensitivity==e.options.val}),a?.iris&&(n.iris={type:"boolean",name:a.iris.name,description:"If the camera matches the selected Iris value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Iris",id:"val",choices:a.iris.value.choices,default:a.iris.value.default}],callback:e=>this.camera?.iris==e.options.val}),a?.shutter_control_overwrite&&(n.shutter_control_overwrite={type:"boolean",name:a.shutter_control_overwrite.name,description:"If the camera has Shutter Control Overwrite turned on, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.shutter_control_overwrite.choices,default:a.shutter_control_overwrite.default}],callback:e=>this.camera?.shutter_control_overwrite==e.options.val}),a?.shutter_max_speed&&(n.shushutter_max_speedt={type:"boolean",name:a.shutter_max_speed.name,description:"If the camera matches the selected shutter max speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Shutter Speed",id:"val",choices:a.shut?.["shutter_"+[this.camera.shutter_table]].slice(a.shutter_max_speed.range.min,a.shutter_max_speed.range.max+1),default:a.shutter_max_speed.range.default}],callback:e=>this.camera?.shutter_max_speed==e.options.val}),a?.shutter_min_speed&&(n.shushutter_min_speedt={type:"boolean",name:a.shutter_min_speed.name,description:"If the camera matches the selected shutter max speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Shutter Speed",id:"val",choices:a.shut?.["shutter_"+[this.camera.shutter_table]].slice(a.shutter_min_speed.range.min,a.shutter_min_speed.range.max+1),default:a.shutter_min_speed.range.default}],callback:e=>this.camera?.shutter_min_speed==e.options.val}),a?.shutter_speed&&(n.shut={type:"boolean",name:a.shutter_speed.name,description:"If the camera matches the selected shutter speed, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Shutter Speed",id:"val",choices:a.shutter_speed?.["shutter_"+[this.camera.shutter_table]],default:a.shutter_speed.default}],callback:e=>this.camera?.shutter_speed==e.options.val}),a?.shutter_speed_overwrite&&(n.shutter_speed_overwrite={type:"boolean",name:a.shutter_speed_overwrite.name,description:"If the camera matches the selected Shutter Speed Overwrite level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Hz ("+a.shutter_speed_overwrite.range.min+" to "+a.shutter_speed_overwrite.range.max+")",id:"level",default:a.shutter_speed_overwrite.range.default,min:a.shutter_speed_overwrite.range.min,max:a.shutter_speed_overwrite.range.max}],callback:e=>this.camera?.shutter_speed_overwrite==e.options.level}),a?.slow_shutter_en&&(n.slow_shutter_en={type:"boolean",name:a.slow_shutter_en.name,description:"If the camera matches the Slow Shutter state, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.slow_shutter_en.choices,default:a.slow_shutter_en.default}],callback:e=>this.camera?.slow_shutter_en==e.options.val}),a?.slow_shutter_limit&&(n.slow_shutter_limit={type:"boolean",name:a.slow_shutter_limit.name,description:"If the camera matches the selected slow shutter limit, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Shutter Speed",id:"val",choices:a.slow_shutter_limit?.["shutter_"+[this.camera.shutter_table]],default:a.slow_shutter_limit.range.default}],callback:e=>this.camera?.slow_shutter_limit==e.options.val}),a?.spotlight&&(n.spotlight={type:"boolean",name:a.spotlight.name,description:"If the camera matches the Spotlight state, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.spotlight.choices,default:a.spotlight.default}],callback:e=>this.camera?.spotlight==e.options.val}),a?.bg&&(n.bg={type:"boolean",name:a.bg.name,description:"If the camera matches the selected BG level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.bg.range.min+" to "+a.bg.range.max+")",id:"level",default:a.bg.range.default,min:a.bg.range.min,max:a.bg.range.max}],callback:e=>this.camera?.bg==e.options.level}),a?.br&&(n.br={type:"boolean",name:a.br.name,description:"If the camera matches the selected BR level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.br.range.min+" to "+a.br.range.max+")",id:"level",default:a.br.range.default,min:a.br.range.min,max:a.br.range.max}],callback:e=>this.camera?.br==e.options.level}),a?.blue_gain&&(n.blue_gain={type:"boolean",name:a.blue_gain.name,description:"If the camera matches the selected BR level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.blue_gain.range.min+" to "+a.blue_gain.range.max+")",id:"level",default:a.blue_gain.range.default,min:a.blue_gain.range.min,max:a.blue_gain.range.max}],callback:e=>this.camera?.blue_gain==e.options.level}),a?.color_temp&&(n.color_temp={type:"boolean",name:a.color_temp.name,description:"If the camera color temperature matches the selected color temperature, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Color Temperature (k)",id:"val",choices:a.color_temp.choices,default:a.color_temp.default}],callback:e=>this.camera?.color_temp==e.options.val}),a?.gb&&(n.gb={type:"boolean",name:a.gb.name,description:"If the camera matches the selected GB level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.gb.range.min+" to "+a.gb.range.max+")",id:"level",default:a.gb.range.default,min:a.gb.range.min,max:a.gb.range.max}],callback:e=>this.camera?.gb==e.options.level}),a?.gr&&(n.gr={type:"boolean",name:a.gr.name,description:"If the camera matches the selected GR level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.gr.range.min+" to "+a.gr.range.max+")",id:"level",default:a.gr.range.default,min:a.gr.range.min,max:a.gr.range.max}],callback:e=>this.camera?.gr==e.options.level}),a?.level&&(n.level={type:"boolean",name:a.level.name,description:"If the camera matches the selected level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.level.range.min+" to "+a.level.range.max+")",id:"level",default:a.level.range.default,min:a.level.range.min,max:a.level.range.max}],callback:e=>this.camera?.level==e.options.level}),a?.matrix&&(n.matrix={type:"boolean",name:a.matrix.name,description:"If the camera matches the selected Matrix mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.matrix.choices,default:a.matrix.default}],callback:e=>this.camera?.matrix==e.options.white_balance}),a?.offset&&(n.offset={type:"boolean",name:a.offset.name,description:"If the camera matches the selected Offset level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.offset.range.min+" to "+a.offset.range.max+")",id:"value",default:a.offset.range.default,min:a.offset.range.min,max:a.offset.range.max}],callback:e=>this.camera?.offset==e.options.level}),a?.phase&&(n.phase={type:"boolean",name:a.phase.name,description:"If the camera matches the selected Phase level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.phase.range.min+" to "+a.phase.range.max+")",id:"value",default:a.phase.range.default,min:a.phase.range.min,max:a.phase.range.max}],callback:e=>this.camera?.phase==e.options.level}),a?.rb&&(n.rb={type:"boolean",name:a.rb.name,description:"If the camera matches the selected RB level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.rb.range.min+" to "+a.rb.range.max+")",id:"value",default:a.rb.range.default,min:a.rb.range.min,max:a.rb.range.max}],callback:e=>this.camera?.rb==e.options.level}),a?.rg&&(n.rg={type:"boolean",name:a.rg.name,description:"If the camera matches the selected RG level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.rg.range.min+" to "+a.rg.range.max+")",id:"value",default:a.rg.range.default,min:a.rg.range.min,max:a.rg.range.max}],callback:e=>this.camera?.rg==e.options.level}),a?.red_gain&&(n.red_gain={type:"boolean",name:a.red_gain.name,description:"If the camera matches the selected Red Gain level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.red_gain.range.min+" to "+a.red_gain.range.max+")",id:"level",default:a.red_gain.range.default,min:a.red_gain.range.min,max:a.red_gain.range.max}],callback:e=>this.camera?.red_gain==e.options.level}),a?.select&&(n.select={type:"boolean",name:a.select.name,description:"change the default style of the button based on the WB mode",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.select.choices,default:a.select.default}],callback:e=>this.camera?.select==e.options.val}),a?.speed&&(n.speed={type:"boolean",name:a.speed.name,description:"If the camera matches the selected Speed level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.speed.range.min+" to "+a.speed.range.max+")",id:"value",default:a.speed.range.default,min:a.speed.range.min,max:a.speed.range.max}],callback:e=>this.camera?.speed==e.options.level}),a?.wb_mode&&(n.wb_mode={type:"boolean",name:a.wb_mode.name,description:"change the default style of the button based on the WB mode",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"White Balance Mode",id:"mode",choices:a.wb_mode.choices,default:a.wb_mode.default}],callback:e=>this.camera?.wb_mode==e.options.mode}),a?.backlight_com&&(n.backlight_com={type:"boolean",name:a.backlight_com.name,description:"If the camera matches the selected Backlight Compensation, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"val",choices:a.backlight_com.choices,default:a.backlight_com.default}],callback:e=>this.camera?.backlight_com==e.options.val}),a?.chroma_suppress&&(n.chroma_suppress={type:"boolean",name:a.chroma_suppress.name,description:"If the camera matches the selected Chroma Suppression, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"val",choices:a.chroma_suppress.choices,default:a.chroma_suppress.default}],callback:e=>this.camera?.chroma_suppress==e.options.val}),a?.contrast&&(n.contrast={type:"boolean",name:a.contrast.name,description:"If the camera matches the selected Contrast level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.contrast.range.min+" to "+a.contrast.range.max+")",id:"value",min:a.contrast.range.min,max:a.contrast.range.max,default:a.contrast.range.default,isVisible:e=>"value"===e.options.val}],callback:e=>this.camera?.contrast==e.options.value}),a?.pictureEffect&&(n.pictureEffect={type:"boolean",name:a.pictureEffect.name,description:"If the camera matches the selected Effect mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Effect",id:"val",choices:a.pictureEffect.choices,default:a.pictureEffect.default}],callback:e=>this.camera?.pictureEffect==e.options.val}),a?.picFlip&&(n.picFlip={type:"boolean",name:a.picFlip.name,description:"If the camera matches the selected Flip mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.picFlip.choices,default:a.picFlip.default}],callback:e=>this.camera?.picFlip==e.options.val}),a?.gamma&&(n.gamma={type:"boolean",name:a.gamma.name,description:"If the camera matches the selected Gamma value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.gamma.range.min+" to "+a.gamma.range.max+")",id:"value",min:a.gamma.range.min,max:a.gamma.range.max,default:a.gamma.range.default}],callback:e=>this.camera?.gamma==e.options.value}),a?.highlight_comp&&(n.highlight_comp={type:"boolean",name:a.highlight_comp.name,description:"If the camera matches the selected Highlight Compensation mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Highlight Compensation",id:"val",choices:a.highlight_comp.choices,default:a.highlight_comp.default}],callback:e=>this.camera?.highlight_comp==e.options.val}),a?.highlight_comp_mask&&(n.highlight_comp_mask={type:"boolean",name:a.highlight_comp_mask.name,description:"If the camera matches the selected Highlight Compensation Mask value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.highlight_comp_mask.range.min+" to "+a.highlight_comp_mask.range.max+")",id:"value",min:a.highlight_comp_mask.range.min,max:a.highlight_comp_mask.range.max,default:a.highlight_comp_mask.range.default}],callback:e=>this.camera?.highlight_comp_mask==e.options.value}),a?.hue&&(n.hue={type:"boolean",name:a.hue.name,description:"If the camera matches the selected Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.hue.range.min+" to "+a.hue.range.max+")",id:"value",min:a.hue.range.min,max:a.hue.range.max,default:a.hue.range.default}],callback:e=>this.camera?.hue==e.options.value}),a?.ir_cutfilter&&(n.ir_cutfilter={type:"boolean",name:a.ir_cutfilter.name,description:"If the camera matches the selected IR Cut Filter mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"val",choices:a.ir_cutfilter.choices,default:a.ir_cutfilter.default}],callback:e=>this.camera?.ir_cutfilter==e.options.val}),a?.low_latency&&(n.low_latency={type:"boolean",name:a.low_latency.name,description:"If the camera matches the selected Low Latency mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.low_latency.choices,default:a.low_latency.default}],callback:e=>this.camera?.low_latency==e.options.val}),a?.picMirror&&(n.picMirror={type:"boolean",name:a.picMirror.name,description:"If the camera matches the selected Picture Mirror mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.picMirror.choices,default:a.picMirror.default}],callback:e=>this.camera?.picMirror==e.options.val}),a?.nd_filter&&(n.nd_filter={type:"boolean",name:a.nd_filter.name,description:"If the camera matches the selected ND Filter value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.nd_filter.range.min+" to "+a.nd_filter.range.max+")",id:"value",min:a.nd_filter.range.min,max:a.nd_filter.range.max,default:a.nd_filter.range.default}],callback:e=>this.camera?.nd_filter==e.options.value}),a?.noise_reduction&&(n.noise_reduction={type:"boolean",name:a.noise_reduction.name,description:"If the camera matches the selected Noise Reduction mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Noise Reduction",id:"val",choices:a.noise_reduction.choices,default:a.noise_reduction.default}],callback:e=>this.camera?.noise_reduction==e.options.val}),a?.saturation&&(n.saturation={type:"boolean",name:a.saturation.name,description:"If the camera matches the selected saturation level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.saturation.range.min+" to "+a.saturation.range.max+")",id:"value",min:a.saturation.range.min,max:a.saturation.range.max,default:a.saturation.range.default}],callback:e=>this.camera?.saturation==e.options.value}),a?.sharpness&&(n.sharpness={type:"boolean",name:a.sharpness.name,description:"If the camera matches the selected Sharpness value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.sharpness.range.min+" to "+a.sharpness.range.max+")",id:"value",min:a.sharpness.range.min,max:a.sharpness.range.max,default:a.sharpness.range.default}],callback:e=>this.camera?.sharpness==e.options.value}),a?.stabilizer&&(n.stabilizer={type:"boolean",name:a.stabilizer.name,description:"If the camera matches the selected Stabilizer mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.stabilizer.choices,default:a.stabilizer.default}],callback:e=>this.camera?.stabilizer==e.options.val}),a?.threed_nr&&(n.threed_nr={type:"boolean",name:a.threed_nr.name,description:"If the camera matches the selected 3D Noise Reduction mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"3D NR",id:"val",choices:a.threed_nr.choices,default:a.threed_nr.default}],callback:e=>this.camera?.threed_nr==e.options.val}),a?.twod_nr&&(n.twod_nr={type:"boolean",name:a.twod_nr.name,description:"If the camera matches the selected 2D Noise Reduction mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"2D NR",id:"val",choices:a.twod_nr.choices,default:a.twod_nr.default}],callback:e=>this.camera?.twod_nr==e.options.val}),a?.wide_dynamic_range&&(n.wide_dynamic_range={type:"boolean",name:a.wide_dynamic_range.name,description:"If the camera matches the selected Wide Dynamic Range mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Wide Dynamic Range",id:"val",choices:a.wide_dynamic_range.choices,default:a.wide_dynamic_range.default}],callback:e=>this.camera?.wide_dynamic_range==e.options.val}),a?.cm_blue_gain&&(n.cm_blue_gain={type:"boolean",name:a.cm_blue_gain.name,description:"If the camera matches the selected Blue Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_blue_gain.range.min+" to "+a.cm_blue_gain.range.max+")",id:"value",min:a.cm_blue_gain.range.min,max:a.cm_blue_gain.range.max,default:a.cm_blue_gain.range.default}],callback:e=>this.camera?.cm_blue_gain==e.options.value}),a?.cm_blue_hue&&(n.cm_blue_hue={type:"boolean",name:a.cm_blue_hue.name,description:"If the camera matches the selected Blue Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_blue_hue.range.min+" to "+a.cm_blue_hue.range.max+")",id:"value",min:a.cm_blue_hue.range.min,max:a.cm_blue_hue.range.max,default:a.cm_blue_hue.range.default}],callback:e=>this.camera?.cm_blue_hue==e.options.value}),a?.cm_color_gain&&(n.cm_color_gain={type:"boolean",name:a.cm_color_gain.name,description:"If the camera matches the selected Color Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_color_gain.range.min+" to "+a.cm_color_gain.range.max+")",id:"value",min:a.cm_color_gain.range.min,max:a.cm_color_gain.range.max,default:a.cm_color_gain.range.default}],callback:e=>this.camera?.cm_color_gain==e.options.value}),a?.cm_cyan_gain&&(n.cm_cyan_gain={type:"boolean",name:a.cm_cyan_gain.name,description:"If the camera matches the selected Cyan Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_cyan_gain.range.min+" to "+a.cm_cyan_gain.range.max+")",id:"value",min:a.cm_cyan_gain.range.min,max:a.cm_cyan_gain.range.max,default:a.cm_cyan_gain.range.default}],callback:e=>this.camera?.cm_cyan_gain==e.options.value}),a?.cm_cyan_hue&&(n.cm_cyan_hue={type:"boolean",name:a.cm_cyan_hue.name,description:"If the camera matches the selected Cyan Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_cyan_hue.range.min+" to "+a.cm_cyan_hue.range.max+")",id:"value",min:a.cm_cyan_hue.range.min,max:a.cm_cyan_hue.range.max,default:a.cm_cyan_hue.range.default}],callback:e=>this.camera?.cm_cyan_hue==e.options.value}),a?.cm_green_gain&&(n.cm_green_gain={type:"boolean",name:a.cm_green_gain.name,description:"If the camera matches the selected Green Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_green_gain.range.min+" to "+a.cm_green_gain.range.max+")",id:"value",min:a.cm_green_gain.range.min,max:a.cm_green_gain.range.max,default:a.cm_green_gain.range.default}],callback:e=>this.camera?.cm_green_gain==e.options.value}),a?.cm_green_hue&&(n.cm_green_hue={type:"boolean",name:a.cm_green_hue.name,description:"If the camera matches the selected Green Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_green_hue.range.min+" to "+a.cm_green_hue.range.max+")",id:"value",min:a.cm_green_hue.range.min,max:a.cm_green_hue.range.max,default:a.cm_green_hue.range.default}],callback:e=>this.camera?.cm_green_hue==e.options.value}),a?.cm_hue_phase&&(n.cm_hue_phase={type:"boolean",name:a.cm_hue_phase.name,description:"If the camera matches the selected Hue Phase value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_hue_phase.range.min+" to "+a.cm_hue_phase.range.max+")",id:"value",min:a.cm_hue_phase.range.min,max:a.cm_hue_phase.range.max,default:a.cm_hue_phase.range.default}],callback:e=>this.camera?.cm_hue_phase==e.options.value}),a?.cm_mag_gain&&(n.cm_mag_gain={type:"boolean",name:a.cm_mag_gain.name,description:"If the camera matches the selected Magenta Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_mag_gain.range.min+" to "+a.cm_mag_gain.range.max+")",id:"value",min:a.cm_mag_gain.range.min,max:a.cm_mag_gain.range.max,default:a.cm_mag_gain.range.default}],callback:e=>this.camera?.cm_mag_gain==e.options.value}),a?.cm_mag_hue&&(n.cm_mag_hue={type:"boolean",name:a.cm_mag_hue.name,description:"If the camera matches the selected Magenta Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_mag_hue.range.min+" to "+a.cm_mag_hue.range.max+")",id:"value",min:a.cm_mag_hue.range.min,max:a.cm_mag_hue.range.max,default:a.cm_mag_hue.range.default}],callback:e=>this.camera?.cm_mag_hue==e.options.value}),a?.cm_red_gain&&(n.cm_red_gain={type:"boolean",name:a.cm_red_gain.name,description:"If the camera matches the selected Red Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_red_gain.range.min+" to "+a.cm_red_gain.range.max+")",id:"value",min:a.cm_red_gain.range.min,max:a.cm_red_gain.range.max,default:a.cm_red_gain.range.default}],callback:e=>this.camera?.cm_red_gain==e.options.value}),a?.cm_red_hue&&(n.cm_red_hue={type:"boolean",name:a.cm_red_hue.name,description:"If the camera matches the selected Red Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_red_hue.range.min+" to "+a.cm_red_hue.range.max+")",id:"value",min:a.cm_red_hue.range.min,max:a.cm_red_hue.range.max,default:a.cm_red_hue.range.default}],callback:e=>this.camera?.cm_red_hue==e.options.value}),a?.cm_yellow_gain&&(n.cm_yellow_gain={type:"boolean",name:a.cm_yellow_gain.name,description:"If the camera matches the selected Yellow Gain value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_yellow_gain.range.min+" to "+a.cm_yellow_gain.range.max+")",id:"value",min:a.cm_yellow_gain.range.min,max:a.cm_yellow_gain.range.max,default:a.cm_yellow_gain.range.default}],callback:e=>this.camera?.cm_yellow_gain==e.options.value}),a?.cm_yellow_hue&&(n.cm_yellow_hue={type:"boolean",name:a.cm_yellow_hue.name,description:"If the camera matches the selected Yellow Hue value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.cm_yellow_hue.range.min+" to "+a.cm_yellow_hue.range.max+")",id:"value",min:a.cm_yellow_hue.range.min,max:a.cm_yellow_hue.range.max,default:a.cm_yellow_hue.range.default}],callback:e=>this.camera?.cm_yellow_hue==e.options.value}),a?.brightness&&(n.brightness={type:"boolean",name:a.brightness.name,description:"If the camera matches the selected Brightness value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.brightness.range.min+" to "+a.brightness.range.max+")",id:"value",min:a.brightness.range.min,max:a.brightness.range.max,default:a.brightness.range.default}],callback:e=>this.camera?.brightness==e.options.value}),a?.brightness_comp&&(n.brightness_comp={type:"boolean",name:a.brightness_comp.name,description:"If the camera matches the selected Brightness Compensation mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"val",choices:a.brightness_comp.choices,default:a.brightness_comp.default}],callback:e=>this.camera?.brightness_comp==e.options.val}),a?.comp_level&&(n.comp_level={type:"boolean",name:a.comp_level.name,description:"If the camera matches the selected Compensation Level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Level",id:"val",choices:a.comp_level.choices,default:a.comp_level.default}],callback:e=>this.camera?.comp_level==e.options.val}),a?.gamma_offset&&(n.gamma_offset={type:"boolean",name:a.gamma_offset.name,description:"If the camera matches the selected Gamma Offset value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.gamma_offset.range.min+" to "+a.gamma_offset.range.max+")",id:"value",min:a.gamma_offset.range.min,max:a.gamma_offset.range.max,default:a.gamma_offset.range.default}],callback:e=>this.camera?.gamma_offset==e.options.value}),a?.high_resolution&&(n.high_resolution={type:"boolean",name:a.high_resolution.name,description:"If the camera matches the selected High Resolution mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.high_resolution.choices,default:a.high_resolution.default}],callback:e=>this.camera?.high_resolution==e.options.val}),a?.video_enhancement&&(n.video_enhancement={type:"boolean",name:a.video_enhancement.name,description:"If the camera matches the selected Video Enhancement mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.video_enhancement.choices,default:a.video_enhancement.default}],callback:e=>this.camera?.video_enhancement==e.options.val}),a?.aux&&(n.aux={type:"boolean",name:a.aux.name,description:"If the camera matches the selected Aux mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.aux.choices,default:a.aux.default}],callback:e=>this.camera?.aux==e.options.val}),a?.rain_wiper&&(n.rain_wiper={type:"boolean",name:a.rain_wiper.name,description:"If the camera matches the selected Rain Wiper mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.rain_wiper.choices,default:a.rain_wiper.default}],callback:e=>this.camera?.rain_wiper==e.options.val}),a?.v12vout&&(n.v12vout={type:"boolean",name:a.v12vout.name,description:"If the camera matches the selected 12v Out mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.v12vout.choices,default:a.v12vout.default}],callback:e=>this.camera?.v12vout==e.options.val}),a?.bandwidth&&(n.bandwidth={type:"boolean",name:a.bandwidth.name,description:"If the camera matches the selected Bandwidth mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"val",choices:a.bandwidth.choices,default:a.bandwidth.default}],callback:e=>this.camera?.bandwidth==e.options.val}),a?.bw_balance&&(n.bw_balance={type:"boolean",name:a.bw_balance.name,description:"If the camera matches the selected BW Bandwidth mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"val",choices:a.bw_balance.choices,default:a.bw_balance.default}],callback:e=>this.camera?.bw_balance==e.options.val}),a?.crispening&&(n.crispening={type:"boolean",name:a.crispening.name,description:"If the camera matches the selected Crispening value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.crispening.range.min+" to "+a.crispening.range.max+")",id:"value",min:a.crispening.range.min,max:a.crispening.range.max,default:a.crispening.range.default}],callback:e=>this.camera?.crispening==e.options.value}),a?.detail&&(n.detail={type:"boolean",name:a.detail.name,description:"If the camera matches the selected Detail value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On / Off",id:"val",choices:a.detail.choices,default:a.detail.default}],callback:e=>this.camera?.detail==e.options.val}),a?.highlight_detail&&(n.highlight_detail={type:"boolean",name:a.highlight_detail.name,description:"If the camera matches the selected Highlight Detail value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.highlight_detail.range.min+" to "+a.highlight_detail.range.max+")",id:"value",min:a.highlight_detail.range.min,max:a.highlight_detail.range.max,default:a.highlight_detail.range.default}],callback:e=>this.camera?.highlight_detail==e.options.value}),a?.hv_balance&&(n.hv_balance={type:"boolean",name:a.hv_balance.name,description:"If the camera matches the selected Hv Balance value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.hv_balance.range.min+" to "+a.hv_balance.range.max+")",id:"value",min:a.hv_balance.range.min,max:a.hv_balance.range.max,default:a.hv_balance.range.default}],callback:e=>this.camera?.hv_balance==e.options.value}),a?.limit&&(n.limit={type:"boolean",name:a.limit.name,description:"If the camera matches the selected Limit value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.limit.range.min+" to "+a.limit.range.max+")",id:"value",min:a.limit.range.min,max:a.limit.range.max,default:a.limit.range.default}],callback:e=>this.camera?.limit==e.options.value}),a?.super_low&&(n.super_low={type:"boolean",name:a.super_low.name,description:"If the camera matches the selected Super Low value, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.super_low.range.min+" to "+a.super_low.range.max+")",id:"value",min:a.super_low.range.min,max:a.super_low.range.max,default:a.super_low.range.default}],callback:e=>this.camera?.super_low==e.options.value}),a?.black_gamma_level&&(n.black_gamma_level={type:"boolean",name:a.black_gamma_level.name,description:"If the camera matches the selected Black Gamma Level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Level ("+a.black_gamma_level.range.min+" to "+a.black_gamma_level.range.max+")",id:"value",min:a.black_gamma_level.range.min,max:a.black_gamma_level.range.max,default:a.black_gamma_level.range.default}],callback:e=>this.camera?.black_gamma_level==e.options.value}),a?.black_level&&(n.black_level={type:"boolean",name:a.black_level.name,description:"If the camera matches the selected Black Level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Level ("+a.black_level.range.min+" to "+a.black_level.range.max+")",id:"value",min:a.black_level.range.min,max:a.black_level.range.max,default:a.black_level.range.default}],callback:e=>this.camera?.black_level==e.options.value}),a?.black_level_range&&(n.black_level_range={type:"boolean",name:a.black_level_range.name,description:"If the camera matches the selected Black Level Range, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Black Level Range",id:"val",choices:a.black_level_range.choices,default:a.black_level_range.default}],callback:e=>this.camera?.black_level_range==e.options.val}),a?.effect&&(n.effect={type:"boolean",name:a.effect.name,description:"If the camera matches the selected Effect Range, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.effect.range.min+" to "+a.effect.range.max+")",id:"value",min:a.effect.range.min,max:a.effect.range.max,default:a.effect.range.default}],callback:e=>this.camera?.effect==e.options.value}),a?.level&&(n.level={type:"boolean",name:a.level.name,description:"If the camera matches the selected Level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.level.range.min+" to "+a.level.range.max+")",id:"value",min:a.level.range.min,max:a.level.range.max,default:a.level.range.default}],callback:e=>this.camera?.level==e.options.value}),a?.offset&&(n.offset={type:"boolean",name:a.offset.name,description:"If the camera matches the selected Offset level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.offset.range.min+" to "+a.offset.range.max+")",id:"value",min:a.offset.range.min,max:a.offset.range.max,default:a.offset.range.default}],callback:e=>this.camera?.offset==e.options.value}),a?.pattern&&(n.pattern={type:"boolean",name:a.pattern.name,description:"If the camera matches the selected Pattern level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.pattern.range.min+" to "+a.pattern.range.max+")",id:"value",min:a.pattern.range.min,max:a.pattern.range.max,default:a.pattern.range.default}],callback:e=>this.camera?.pattern==e.options.value}),a?.pattern_fine&&(n.pattern_fine={type:"boolean",name:a.pattern_fine.name,description:"If the camera matches the selected Pattern Fine level, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.pattern_fine.range.min+" to "+a.pattern_fine.range.max+")",id:"value",min:a.pattern_fine.range.min,max:a.pattern_fine.range.max,default:a.pattern_fine.range.default}],callback:e=>this.camera?.pattern_fine==e.options.value}),a?.settings&&(n.settings={type:"boolean",name:a.settings.name,description:"If the camera matches the selected Settings mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Settings",id:"value",choices:a.settings.choices,default:a.settings.default}],callback:e=>this.camera?.settings==e.options.value}),a?.visibility_enhancer&&(n.visibility_enhancer={type:"boolean",name:a.visibility_enhancer.name,description:"If the camera matches the selected Visibility Enhancer mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Settings",id:"value",choices:a.visibility_enhancer.choices,default:a.visibility_enhancer.default}],callback:e=>this.camera?.visibility_enhancer==e.options.value}),a?.scope_size&&(n.scope_size={type:"boolean",name:a.scope_size.name,description:"If the camera matches the selected Scope Size, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"value",choices:a.scope_size.choices,default:a.scope_size.default}],callback:e=>this.camera?.scope_size==e.options.value}),a?.scope_gamma_gain&&(n.scope_gamma_gain={type:"boolean",name:a.scope_gamma_gain.name,description:"If the camera matches the selected Scope Gamma Gain, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"number",label:"Value ("+a.scope_gamma_gain.range.min+" to "+a.scope_gamma_gain.range.max+")",id:"value",min:a.scope_gamma_gain.range.min,max:a.scope_gamma_gain.range.max,default:a.scope_gamma_gain.range.default}],callback:e=>this.camera?.scope_gamma_gain==e.options.value}),a?.scope_mode&&(n.scope_mode={type:"boolean",name:a.scope_mode.name,description:"If the camera matches the selected Scope Mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Mode",id:"value",choices:a.scope_mode.choices,default:a.scope_mode.default}],callback:e=>this.camera?.scope_mode==e.options.value}),a?.scope_position&&(n.scope_position={type:"boolean",name:a.scope_position.name,description:"If the camera matches the selected scope position, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"Position",id:"value",choices:a.scope_position.choices,default:a.scope_position.default}],callback:e=>this.camera?.scope_position==e.options.value}),a?.scope_preview&&(n.scope_preview={type:"boolean",name:a.scope_preview.name,description:"If the camera matches the selected scope preview mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"value",choices:a.scope_preview.choices,default:a.scope_preview.default}],callback:e=>this.camera?.scope_preview==e.options.value}),a?.scope_program&&(n.scope_program={type:"boolean",name:a.scope_program.name,description:"If the camera matches the selected scope program mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"value",choices:a.scope_program.choices,default:a.scope_program.default}],callback:e=>this.camera?.scope_program==e.options.value}),a?.scope_transparency&&(n.scope_transparency={type:"boolean",name:a.scope_transparency.name,description:"If the camera matches the selected scope transparency mode, change the default style of the button",defaultStyle:{color:e,bgcolor:t},options:[{type:"dropdown",label:"On/Off",id:"value",choices:a.scope_transparency.choices,default:a.scope_transparency.default}],callback:e=>this.camera?.scope_transparency==e.options.value}),this.setFeedbackDefinitions(n),Object.fromEntries(Object.entries(n).sort(d))}const x=[function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.actions.forEach((e=>{if("freeze"===e.actionId&&("0"==e.options.val?e.options.val="On":"1"==e.options.val&&(e.options.val="Off"),a.updatedActions.push(e)),"power"===e.actionId&&(e.actionId="standby","0"==e.options.val?e.options.val="on":"1"==e.options.val&&(e.options.val="standby"),a.updatedActions.push(e)),"hrMode"!==e.actionId&&"highSensitivity"!==e.actionId||("1"==e.options.bol?e.options.val="On":"0"==e.options.bol&&(e.options.val="Off"),a.updatedActions.push(e)),"picFlip"!==e.actionId&&"picMirror"!==e.actionId||("1"==e.options.val?e.options.val="On":"0"==e.options.val&&(e.options.val="Off"),a.updatedActions.push(e)),"wb"===e.actionId){let t;if(isNaN(e.options.val))t=e.options.val;else switch(e.options.val){case"0":t="AUTO";break;case"1":t="INDOOR";break;case"2":t="OUTDOOR";break;case"3":case"6":t="ONEPUSH";break;case"4":t="ATW";break;case"5":t="MANUAL1";break;case"7":t="OUTDOOR-AUTO";break;case"8":t="SLV-AUTO";break;case"9":t="SLV";break;case"10":t="SLV-OUTDOOR-AUTO"}e.options.val=t,a.updatedActions.push(e)}if("expM"===e.actionId){let t;if(isNaN(e.options.val))t=e.options.val;else switch(e.options.val){case"0":t="FULL-AUTO";break;case"1":t="MANUAL";break;case"2":t="SHUTTER-PRI";break;case"3":t="IRIS-PRI"}e.options.val=t,a.updatedActions.push(e)}if("pictureEffect"===e.actionId&&("1"==e.options.val||"2"==e.options.val?e.options.val="BW":"0"==e.options.val&&(e.options.val="Off"),a.updatedActions.push(e)),"focusM"===e.actionId&&("0"==e.options.bol?e.options.val="Auto":"1"==e.options.bol&&(e.options.val="Manual"),a.updatedActions.push(e)),"tally"===e.actionId&&("1"==e.options.bol?e.options.val="TallyOn":"0"==e.options.bol&&(e.options.val="TallyOff"),a.updatedActions.push(e)),"irMode"===e.actionId&&(e.actionId="ir_cutfilter","0"==e.options.bol?e.options.val="On":"1"==e.options.bol&&(e.options.val="Off"),a.updatedActions.push(e)),"ptSpeedU"===e.actionId&&(e.actionId="panSpeed",e.options.type="up",a.updatedActions.push(e)),"ptSpeedD"===e.actionId&&(e.actionId="panSpeed",e.options.type="down",a.updatedActions.push(e)),"ptSpeedS"===e.actionId){let t;if(e.actionId="panSpeed",e.options.type="value",e.options.speed)switch(e.options.speed){case"01":t=1;break;case"02":t=2;break;case"03":t=3;break;case"04":t=4;break;case"05":t=5;break;case"06":t=6;break;case"07":t=7;break;case"08":t=8;break;case"09":t=9;break;case"0A":t=10;break;case"0B":t=11;break;case"0C":t=12;break;case"0D":t=13;break;case"0E":t=14;break;case"0F":t=15;break;case"10":t=16;break;case"11":t=17;break;case"12":t=18;break;case"13":t=19;break;case"14":t=20;break;case"15":case"16":case"17":case"18":t=21}e.options.value=t,a.updatedActions.push(e)}if("pt"===e.actionId){let t;if(isNaN(e.options.val))t=e.options.val;else switch(e.options.val){case"0":t="left";break;case"1":t="right";break;case"2":t="up";break;case"3":t="down";break;case"4":t="up_left";break;case"5":t="up_right";break;case"6":t="down_left";break;case"7":t="down_right";break;case"8":t="stop";break;case"9":t="home"}e.options.val=t,a.updatedActions.push(e)}if("zoom"===e.actionId){let t;if(isNaN(e.options.val))t=e.options.val;else switch(e.options.val){case"0":t="in";break;case"1":t="out";break;case"2":t="stop"}e.options.val=t,a.updatedActions.push(e)}if("focus"===e.actionId){let t;if(isNaN(e.options.val))t=e.options.val;else switch(e.options.val){case"0":t="near";break;case"1":t="far";break;case"2":t="stop";break;case"3":t="trigger"}e.options.val=t,a.updatedActions.push(e)}"gainBlue"===e.actionId&&(e.actionId="blue_gain",a.updatedActions.push(e)),"gainRed"===e.actionId&&(e.actionId="red_gain",a.updatedActions.push(e)),"wb"===e.actionId&&(e.actionId="wb_mode",a.updatedActions.push(e))})),a},function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};if(null!==t.config){let e=t.config;null!=e.model&&""!=e.model||(e.model="Auto",a.updatedConfig=e)}return a},function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.actions.forEach((e=>{if("color_temp"===e.actionId&&!["up","down","value"].includes(e.options.val)){let t=e.options.val;e.options.val="value",e.options.value=t,a.updatedActions.push(e)}})),a},function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.actions.forEach((e=>{"tally"===e.actionId&&(e.actionId="tally_mode",a.updatedActions.push(e))})),a},function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.actions.forEach((e=>{"analogAudioInGain"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"analogAudioOutGain"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"noise_reduction"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"wide_dynamic_range"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"color"===e.actionId&&(e.actionId="saturation",a.updatedActions.push(e)),"ae_response"===e.actionId&&(e.options.value=e.options.level,e.options.val="value",a.updatedActions.push(e)),"bright_level"===e.actionId&&(e.options.value=e.options.level,e.options.val="value",a.updatedActions.push(e)),"shutter_speed_overwrite"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"bg"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"br"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"gb"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"level"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"offset"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"phase"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"rb"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"rg"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"speed"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"threed_nr"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e)),"twod_nr"===e.actionId&&(e.options.value=e.options.val,e.options.val="value",a.updatedActions.push(e))})),a},function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.actions.forEach((e=>{"expComp"===e.actionId&&("On"===e.options.val&&e.options.level?(e.actionId="expCompLvl",e.options.val="value",e.options.value=e.options.level,delete e.options.level,a.updatedActions.push(e)):(delete e.options.level,a.updatedActions.push(e)))})),a},function(e,t){let a={updatedConfig:null,updatedActions:[],updatedFeedbacks:[]};return t.actions.forEach((e=>{"wb_mode"===e.actionId&&"MANUAL1"===e.options.val&&(e.options.val="USER",a.updatedActions.push(e))})),t.feedbacks.forEach((e=>{"wb_mode"===e.feedbackId&&"MANUAL1"===e.options.mode&&(e.options.mode="USER",a.updatedFeedbacks.push(e))})),a}],N=require("node:http"),H=require("node:https"),E=require("node:zlib"),T=require("node:stream"),X=require("node:buffer"),Y=require("node:util");var F=a(5006),P=a(9951);class O extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class z extends O{constructor(e,t,a){super(e,t),a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}}const U=Symbol.toStringTag,J=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[U],K=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[U]),L=(0,Y.promisify)(T.pipeline),D=Symbol("Body internals");class M{constructor(e,{size:t=0}={}){let a=null;null===e?e=null:J(e)?e=X.Buffer.from(e.toString()):K(e)||X.Buffer.isBuffer(e)||(Y.types.isAnyArrayBuffer(e)?e=X.Buffer.from(e):ArrayBuffer.isView(e)?e=X.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof T||(e instanceof P.Ct?a=(e=(0,P.au)(e)).type.split("=")[1]:e=X.Buffer.from(String(e))));let o=e;X.Buffer.isBuffer(e)?o=T.Readable.from(e):K(e)&&(o=T.Readable.from(e.stream())),this[D]={body:e,stream:o,boundary:a,disturbed:!1,error:null},this.size=t,e instanceof T&&e.on("error",(e=>{const t=e instanceof O?e:new z(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[D].error=t}))}get body(){return this[D].stream}get bodyUsed(){return this[D].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:a}=await j(this);return e.slice(t,t+a)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new P.Ct,t=new URLSearchParams(await this.text());for(const[a,o]of t)e.append(a,o);return e}const{toFormData:t}=await a.e(713).then(a.bind(a,1713));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[D].body&&this[D].body.type||"",t=await this.arrayBuffer();return new F.Z([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await j(this);return(new TextDecoder).decode(e)}buffer(){return j(this)}}async function j(e){if(e[D].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[D].disturbed=!0,e[D].error)throw e[D].error;const{body:t}=e;if(null===t)return X.Buffer.alloc(0);if(!(t instanceof T))return X.Buffer.alloc(0);const a=[];let o=0;try{for await(const n of t){if(e.size>0&&o+n.length>e.size){const a=new z(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(a),a}o+=n.length,a.push(n)}}catch(t){throw t instanceof O?t:new z(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new z(`Premature close of server response while trying to fetch ${e.url}`);try{return a.every((e=>"string"==typeof e))?X.Buffer.from(a.join("")):X.Buffer.concat(a,o)}catch(t){throw new z(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}M.prototype.buffer=(0,Y.deprecate)(M.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(M.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Y.deprecate)((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const Q=(e,t)=>{let a,o,{body:n}=e[D];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof T&&"function"!=typeof n.getBoundary&&(a=new T.PassThrough({highWaterMark:t}),o=new T.PassThrough({highWaterMark:t}),n.pipe(a),n.pipe(o),e[D].stream=a,n=o),n},$=(0,Y.deprecate)((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),q=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":J(e)?"application/x-www-form-urlencoded;charset=UTF-8":K(e)?e.type||null:X.Buffer.isBuffer(e)||Y.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof P.Ct?`multipart/form-data; boundary=${t[D].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${$(e)}`:e instanceof T?null:"text/plain;charset=UTF-8",ee="function"==typeof N.validateHeaderName?N.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},te="function"==typeof N.validateHeaderValue?N.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class ae extends URLSearchParams{constructor(e){let t=[];if(e instanceof ae){const a=e.raw();for(const[e,o]of Object.entries(a))t.push(...o.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||Y.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const a=e[Symbol.iterator];if(null==a)t.push(...Object.entries(e));else{if("function"!=typeof a)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||Y.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(ee(e),te(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,a){switch(t){case"append":case"set":return(a,o)=>(ee(a),te(a,String(o)),URLSearchParams.prototype[t].call(e,String(a).toLowerCase(),String(o)));case"delete":case"has":case"getAll":return a=>(ee(a),URLSearchParams.prototype[t].call(e,String(a).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let a=t.join(", ");return/^content-encoding$/i.test(e)&&(a=a.toLowerCase()),a}forEach(e,t=void 0){for(const a of this.keys())Reflect.apply(e,t,[this.get(a),a,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const a=this.getAll(t);return e[t]="host"===t?a[0]:a.length>1?a:a[0],e}),{})}}Object.defineProperties(ae.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const oe=new Set([301,302,303,307,308]),ne=e=>oe.has(e),ie=Symbol("Response internals");class re extends M{constructor(e=null,t={}){super(e,t);const a=null!=t.status?t.status:200,o=new ae(t.headers);if(null!==e&&!o.has("Content-Type")){const t=q(e,this);t&&o.append("Content-Type",t)}this[ie]={type:"default",url:t.url,status:a,statusText:t.statusText||"",headers:o,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[ie].type}get url(){return this[ie].url||""}get status(){return this[ie].status}get ok(){return this[ie].status>=200&&this[ie].status<300}get redirected(){return this[ie].counter>0}get statusText(){return this[ie].statusText}get headers(){return this[ie].headers}get highWaterMark(){return this[ie].highWaterMark}clone(){return new re(Q(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!ne(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new re(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new re(null,{status:0,statusText:""});return e[ie].type="error",e}static json(e=void 0,t={}){const a=JSON.stringify(e);if(void 0===a)throw new TypeError("data is not JSON serializable");const o=new ae(t&&t.headers);return o.has("content-type")||o.set("content-type","application/json"),new re(a,{...t,headers:o})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(re.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const se=require("node:url"),le=require("node:net");function ce(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const de=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function ue(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),a=(0,le.isIP)(t);return!(4!==a||!/^127\./.test(t))||!(6!==a||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const ge=Symbol("Request internals"),pe=e=>"object"==typeof e&&"object"==typeof e[ge],me=(0,Y.deprecate)((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class he extends M{constructor(e,t={}){let a;if(pe(e)?a=new URL(e.url):(a=new URL(e),e={}),""!==a.username||""!==a.password)throw new TypeError(`${a} is an url with embedded credentials.`);let o=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(o)&&(o=o.toUpperCase()),!pe(t)&&"data"in t&&me(),(null!=t.body||pe(e)&&null!==e.body)&&("GET"===o||"HEAD"===o))throw new TypeError("Request with GET/HEAD method cannot have body");const n=t.body?t.body:pe(e)&&null!==e.body?Q(e):null;super(n,{size:t.size||e.size||0});const i=new ae(t.headers||e.headers||{});if(null!==n&&!i.has("Content-Type")){const e=q(n,this);e&&i.set("Content-Type",e)}let r=pe(e)?e.signal:null;if("signal"in t&&(r=t.signal),null!=r&&("object"!=typeof(s=r)||"AbortSignal"!==s[U]&&"EventTarget"!==s[U]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var s;let l=null==t.referrer?e.referrer:t.referrer;if(""===l)l="no-referrer";else if(l){const e=new URL(l);l=/^about:(\/\/)?client$/.test(e)?"client":e}else l=void 0;this[ge]={method:o,redirect:t.redirect||e.redirect||"follow",headers:i,parsedURL:a,signal:r,referrer:l},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[ge].method}get url(){return(0,se.format)(this[ge].parsedURL)}get headers(){return this[ge].headers}get redirect(){return this[ge].redirect}get signal(){return this[ge].signal}get referrer(){return"no-referrer"===this[ge].referrer?"":"client"===this[ge].referrer?"about:client":this[ge].referrer?this[ge].referrer.toString():void 0}get referrerPolicy(){return this[ge].referrerPolicy}set referrerPolicy(e){this[ge].referrerPolicy=function(e){if(!de.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new he(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(he.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});class be extends O{constructor(e,t="aborted"){super(e,t)}}a(749);const fe=new Set(["data:","http:","https:"]);async function Ie(e,t){return new Promise(((a,o)=>{const n=new he(e,t),{parsedURL:i,options:r}=(e=>{const{parsedURL:t}=e[ge],a=new ae(e[ge].headers);a.has("Accept")||a.set("Accept","*/*");let o=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(o="0"),null!==e.body){const t=(e=>{const{body:t}=e[D];return null===t?0:K(t)?t.size:X.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(o=String(t))}o&&a.set("Content-Length",o),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[ge].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:a}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const o=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const n=e.referrer;let i=ce(n),r=ce(n,!0);i.toString().length>4096&&(i=r),t&&(i=t(i)),a&&(r=a(r));const s=new URL(e.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return r;case"unsafe-url":return i;case"strict-origin":return ue(i)&&!ue(s)?"no-referrer":r.toString();case"strict-origin-when-cross-origin":return i.origin===s.origin?i:ue(i)&&!ue(s)?"no-referrer":r;case"same-origin":return i.origin===s.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===s.origin?i:r;case"no-referrer-when-downgrade":return ue(i)&&!ue(s)?"no-referrer":i;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}(e):e[ge].referrer="no-referrer",e[ge].referrer instanceof URL&&a.set("Referer",e.referrer),a.has("User-Agent")||a.set("User-Agent","node-fetch"),e.compress&&!a.has("Accept-Encoding")&&a.set("Accept-Encoding","gzip, deflate, br");let{agent:n}=e;"function"==typeof n&&(n=n(t));const i=(e=>{if(e.search)return e.search;const t=e.href.length-1,a=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-a.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+i,method:e.method,headers:a[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:n}}})(n);if(!fe.has(i.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${i.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===i.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const a=e.substring(5,t).split(";");let o="",n=!1;const i=a[0]||"text/plain";let r=i;for(let e=1;e<a.length;e++)"base64"===a[e]?n=!0:a[e]&&(r+=`;${a[e]}`,0===a[e].indexOf("charset=")&&(o=a[e].substring(8)));a[0]||o.length||(r+=";charset=US-ASCII",o="US-ASCII");const s=n?"base64":"ascii",l=unescape(e.substring(t+1)),c=Buffer.from(l,s);return c.type=i,c.typeFull=r,c.charset=o,c}(n.url),t=new re(e,{headers:{"Content-Type":e.typeFull}});return void a(t)}const s=("https:"===i.protocol?H:N).request,{signal:l}=n;let c=null;const d=()=>{const e=new be("The operation was aborted.");o(e),n.body&&n.body instanceof T.Readable&&n.body.destroy(e),c&&c.body&&c.body.emit("error",e)};if(l&&l.aborted)return void d();const u=()=>{d(),p()},g=s(i.toString(),r);l&&l.addEventListener("abort",u);const p=()=>{g.abort(),l&&l.removeEventListener("abort",u)};g.on("error",(e=>{o(new z(`request to ${n.url} failed, reason: ${e.message}`,"system",e)),p()})),function(e,t){const a=X.Buffer.from("0\r\n\r\n");let o,n=!1,i=!1;e.on("response",(e=>{const{headers:t}=e;n="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(t=>{const r=()=>{if(n&&!i){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{c&&c.body&&c.body.destroy(e)})(e)}},s=e=>{i=0===X.Buffer.compare(e.slice(-5),a),!i&&o&&(i=0===X.Buffer.compare(o.slice(-3),a.slice(0,3))&&0===X.Buffer.compare(e.slice(-2),a.slice(3))),o=e};t.prependListener("close",r),t.on("data",s),e.on("close",(()=>{t.removeListener("close",r),t.removeListener("data",s)}))}))}(g),process.version<"v14"&&g.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(a=>{if(c&&t<e._eventsCount&&!a){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",e)}}))})),g.on("response",(e=>{g.setTimeout(0);const i=function(e=[]){return new ae(e.reduce(((e,t,a,o)=>(a%2==0&&e.push(o.slice(a,a+2)),e)),[]).filter((([e,t])=>{try{return ee(e),te(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(ne(e.statusCode)){const s=i.get("Location");let l=null;try{l=null===s?null:new URL(s,n.url)}catch{if("manual"!==n.redirect)return o(new z(`uri requested responds with an invalid redirect URL: ${s}`,"invalid-redirect")),void p()}switch(n.redirect){case"error":return o(new z(`uri requested responds with a redirect, redirect mode is set to error: ${n.url}`,"no-redirect")),void p();case"manual":break;case"follow":{if(null===l)break;if(n.counter>=n.follow)return o(new z(`maximum redirect reached at: ${n.url}`,"max-redirect")),void p();const s={headers:new ae(n.headers),follow:n.follow,counter:n.counter+1,agent:n.agent,compress:n.compress,method:n.method,body:Q(n),signal:n.signal,size:n.size,referrer:n.referrer,referrerPolicy:n.referrerPolicy};if(!((e,t)=>{const a=new URL(t).hostname,o=new URL(e).hostname;return a===o||a.endsWith(`.${o}`)})(n.url,l)||(r=n.url,new URL(l).protocol!==new URL(r).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])s.headers.delete(e);if(303!==e.statusCode&&n.body&&t.body instanceof T.Readable)return o(new z("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void p();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==n.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length"));const c=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let a="";for(const e of t)e&&de.has(e)&&(a=e);return a}(i);return c&&(s.referrerPolicy=c),a(Ie(new he(l,s))),void p()}default:return o(new TypeError(`Redirect option '${n.redirect}' is not a valid value of RequestRedirect`))}}var r;l&&e.once("end",(()=>{l.removeEventListener("abort",u)}));let s=(0,T.pipeline)(e,new T.PassThrough,(e=>{e&&o(e)}));process.version<"v12.10"&&e.on("aborted",u);const d={url:n.url,status:e.statusCode,statusText:e.statusMessage,headers:i,size:n.size,counter:n.counter,highWaterMark:n.highWaterMark},m=i.get("Content-Encoding");if(!n.compress||"HEAD"===n.method||null===m||204===e.statusCode||304===e.statusCode)return c=new re(s,d),void a(c);const h={flush:E.Z_SYNC_FLUSH,finishFlush:E.Z_SYNC_FLUSH};if("gzip"===m||"x-gzip"===m)return s=(0,T.pipeline)(s,E.createGunzip(h),(e=>{e&&o(e)})),c=new re(s,d),void a(c);if("deflate"===m||"x-deflate"===m){const t=(0,T.pipeline)(e,new T.PassThrough,(e=>{e&&o(e)}));return t.once("data",(e=>{s=8==(15&e[0])?(0,T.pipeline)(s,E.createInflate(),(e=>{e&&o(e)})):(0,T.pipeline)(s,E.createInflateRaw(),(e=>{e&&o(e)})),c=new re(s,d),a(c)})),void t.once("end",(()=>{c||(c=new re(s,d),a(c))}))}if("br"===m)return s=(0,T.pipeline)(s,E.createBrotliDecompress(),(e=>{e&&o(e)})),c=new re(s,d),void a(c);c=new re(s,d),a(c)})),(async(e,{body:t})=>{null===t?e.end():await L(t,e)})(g,n).catch(o)}))}a(404),a(2957),a(7330);var _e=a(8762);a(9284);const ye=_e;class ve extends o.InstanceBase{constructor(e){super(e)}async init(e){this.updateStatus("connecting"),this.config=e,this.port=52381,this.addStringToBinary=i,this.strToPQRS=c,this.updateVariables=V,this.timers={pollCameraConfig:null,pollCameraStatus:null},this.getCameraModel()}async destroy(){void 0!==this.udp&&this.udp.destroy(),void 0!==this.ws&&(this.ws.close(1e3),delete this.ws),void 0!==this.timers.pollCameraStatus&&clearInterval(this.timers.pollCameraStatus),this.timers.pollCameraConfig&&(clearInterval(this.timers.pollCameraConfig),this.timers.pollCameraConfig=null),this.timers.ws_reconnect&&clearInterval(this.timers.ws_reconnect)}getConfigFields(){return[{type:"static-text",id:"info",width:12,label:"Information",value:"This module controls BirdDog PTZ Cameras."},{type:"textinput",id:"host",label:"Device IP",width:6,regex:this.REGEX_IP},{type:"dropdown",id:"model",label:"BirdDog Model",default:"Auto",choices:I.CAMERAS}]}async configUpdated(e){this.config=e,this.updateStatus("connecting"),void 0!==this.config.host?(this.log("debug","----Config Model Choice:- "+this.config.model),this.getCameraModel()):this.updateStatus("bad_config","Unable to connect, please enter an IP address for your camera in the module settings")}initVariables(){k.bind(this)()}initFeedbacks(){const e=R.bind(this)();this.setFeedbackDefinitions(e)}initPresets(){const e=W.bind(this)();this.setPresetDefinitions(e)}initActions(){const e=B.bind(this)();this.setActionDefinitions(e)}sendCommand(e,t,a){let o=`http://${this.config.host}:8080/${e}`,n={method:t,headers:{"Content-Type":"application/json"}};"PUT"!=t&&"POST"!=t||(n.body=null!=a?JSON.stringify(a):null),Ie(o,n).then((e=>{if(200==e.status)return this.updateStatus("ok"),e.json()})).then((e=>{let a=e;a&&"GET"==t?this.processData(decodeURI(o),a):a&&"PUT"==t||"POST"==t||this.log("debug",`Command failed ${o}`)})).catch((e=>{this.log("debug",`Command Error: ${e}`);let t=String(e);(t.match("ECONNREFUSED")||t.match("ENOTFOUND")||t.match("EHOSTDOWN")||t.match("ETIMEDOUT"))&&this.updateStatus("connection_failure")}))}processData(e,t){let a;switch(e.slice(e.lastIndexOf("/")+1)){case"about":a=this.storeState(t,"about");break;case"analogaudiosetup":a=this.storeState(t,"analogaudiosetup");break;case"devicesettings":a=this.storeState(t,"devicesettings");break;case"videooutputinterface":a=this.storeState(t,"videooutputinterface");break;case"encodesetup":a=this.storeState(t,"encodesetup");let e=t.VideoFormat.match(/\d+\D(\S*)/);if(this.camera?.shutter_table)switch(e[1]){case"23.98":case"24":"24"!==this.camera.shutter_table&&(this.camera.shutter_table="24",this.initActions());break;case"25":case"50":"50"!==this.camera.shutter_table&&(this.camera.shutter_table="50",this.initActions());break;default:"60"!==this.camera.shutter_table&&(this.camera.shutter_table="60",this.initActions())}this.camera?.framerate&&(this.camera.framerate=e[1]);break;case"encodetransport":a=this.storeState(t,"encodetransport");break;case"NDIDisServer":a=this.storeState(t,"NDIDisServer");break;case"birddogptzsetup":let o=this.camera?.speedControl;a=this.storeState(t,"birddogptzsetup"),o&&o===t.SpeedControl||(this.initActions(),this.initFeedbacks());break;case"birddogexpsetup":a=this.storeState(t,"birddogexpsetup"),a.includes("gain_limit")&&(this.log("debug","-----Gain Limit changed"),this.initActions(),this.initFeedbacks()),a.includes("shutter_max_speed")&&(this.log("debug","-----ShutterMaxSpeed changed"),this.initActions(),this.initFeedbacks()),a.includes("shutter_min_speed")&&(this.log("debug","-----ShutterMinSpeed changed"),this.initActions(),this.initFeedbacks());break;case"birddogwbsetup":a=this.storeState(t,"birddogwbsetup");break;case"birddogpicsetup":a=this.storeState(t,"birddogpicsetup");break;case"birddogcmsetup":a=this.storeState(t,"birddogcmsetup");break;case"birddogadvancesetup":a=this.storeState(t,"birddogadvancesetup");break;case"birddogexternalsetup":a=this.storeState(t,"birddogexternalsetup");break;case"birddogdetsetup":a=this.storeState(t,"birddogdetsetup");break;case"birddoggammasetup":a=this.storeState(t,"birddoggammasetup");break;case"birddogscope":a=this.storeState(t,"birddogscope")}a.length>0&&(this.updateVariables(),this.checkFeedbacks())}sendVISCACommand(e,t){let a=Buffer.alloc(32);a[0]=1,a[1]=16,this.packet_counter=(this.packet_counter+1)%4294967295,a.writeUInt16BE(e.length,2),a.writeUInt32BE(this.packet_counter,4),"string"==typeof e?a.write(e,8,"binary"):"object"==typeof e&&e instanceof Buffer&&e.copy(a,8),"string"==typeof t?a.write(t,7,"binary"):"object"==typeof t&&t instanceof Buffer&&t.copy(a,7);let o=a.subarray(0,8+e.length);this.udp.send(o)}incomingData(e){let t=null,a=null;switch(e[7].toString(16)){case"4a":144==e[8]&&80==e[9]&&2==e[10]&&255==e[11]?a="on":144==e[8]&&80==e[9]&&3==e[10]&&255==e[11]&&(a="standby"),this.camera.standby!==a&&(t=!0,this.camera.standby=a);break;case"5a":144==e[8]&&80==e[9]&&2==e[10]&&255==e[11]?a="Auto":144==e[8]&&80==e[9]&&3==e[10]&&255==e[11]&&(a="Manual"),this.camera.focusM!==a&&(t=!0,this.camera.focusM=a);break;case"5b":144==e[8]&&80==e[9]&&2==e[10]&&255==e[11]?a="On":144==e[8]&&80==e[9]&&3==e[10]&&255==e[11]&&(a="Off"),this.camera.freeze!==a&&(t=!0,this.camera.freeze=a);break;case"5c":this.validateVISCA(e,14)&&144==e[8]&&80==e[9]&&80!==e[13]&&255==e[14]&&(a=e[10].toString(16)+e[11].toString(16)+e[12].toString(16)+e[13].toString(16)),this.camera.zoom_position!==a&&(t=!0,this.camera.zoom_position=a);break;case"5d":let o=this.camera.tilt_position;this.validateVISCA(e,18)&&144==e[8]&&80==e[9]&&255==e[18]&&(a=e[10].toString(16)+e[11].toString(16)+e[12].toString(16)+e[13].toString(16),o=e[14].toString(16)+e[15].toString(16)+e[16].toString(16)+e[17].toString(16)),this.camera.pan_position!==a&&(t=!0,this.camera.pan_position=a),this.camera.tilt_position!==o&&(t=!0,this.camera.tilt_position=o)}t&&(this.updateVariables(),this.checkFeedbacks())}validateVISCA(e,t){return e.indexOf(255,0)===t}sendControlCommand(e){let t=Buffer.alloc(32);t[0]=2,t[1]=0,this.packet_counter=(this.packet_counter+1)%4294967295,t.writeUInt16BE(e.length,2),t.writeUInt32BE(this.packet_counter,4),"string"==typeof e?t.write(e,8,"binary"):"object"==typeof e&&e instanceof Buffer&&e.copy(t,8);let a=t.subarray(0,8+e.length);this.udp.send(a)}init_udp(){this.log("debug","----init udp"),void 0!==this.udp&&(this.udp.destroy(),delete this.udp),void 0!==this.timers.pollCameraStatus&&clearInterval(this.timers.pollCameraStatus),void 0!==this.config.host&&(this.udp=new o.UDPHelper(this.config.host,this.port),this.sendControlCommand(""),this.packet_counter=0,this.startPolling(),this.udp.on("status_change",((e,t)=>{})),this.udp.on("data",(e=>{this.incomingData(e)})),this.udp.on("error",(e=>{this.log("debug","----UDP Error: "+e)})),this.log("debug",this.udp.host,":",this.port))}init_ws_listener(){this.log("debug","----init websocket"),clearInterval(this.timers.ws_reconnect),void 0!==this.ws&&(this.ws.close(1e3),delete this.ws),this.ws=new ye(`ws://${this.config.host}:6790/`),this.ws.on("open",(()=>{this.log("debug",`WebSocket connection opened to ${this.camera.hostname}`)})),this.ws.on("close",(e=>{this.log("debug",`---- WebSocket Connection closed with code ${e}`),1e3!==e&&(this.timers.ws_reconnect=setInterval(this.init_ws_listener.bind(this),500))})),this.ws.on("message",(e=>{let t;try{t=JSON.parse(e.toString()),this.storeState(t,"WebSocket")}catch(e){this.log("debug","JSON Error:"+e)}})),this.ws.on("error",(e=>{this.log("debug",`WebSocket error: ${e}`)}))}startPolling(){this.stopPolling(),this.pollCameraConfig(),this.pollCameraStatus(),this.timers.pollCameraConfig=setInterval(this.pollCameraConfig.bind(this),1e4),this.timers.pollCameraStatus=setInterval(this.pollCameraStatus.bind(this),1e3)}stopPolling(){this.timers.pollCameraConfig&&(clearInterval(this.timers.pollCameraConfig),this.timers.pollCameraConfig=null),this.timers.pollCameraStatus&&(clearInterval(this.timers.pollCameraStatus),this.timers.pollCameraStatus=null)}pollCameraConfig(){let e=h(_,this.camera.model,this.camera.firmware.major);e?.about&&this.sendCommand("about","GET"),e?.encodesetup&&this.sendCommand("encodesetup","GET"),e?.analogaudiosetup&&this.sendCommand("analogaudiosetup","GET"),e?.devicesettings&&this.sendCommand("NDIDisServer","GET"),e?.videooutputinterface&&this.sendCommand("videooutputinterface","GET"),e?.encodetransport&&this.sendCommand("encodetransport","GET"),e?.NDIDisServer&&this.sendCommand("NDIDisServer","GET")}pollCameraStatus(){let e=h(_,this.camera.model,this.camera.firmware.major);e?.birddogptzsetup&&this.sendCommand("birddogptzsetup","GET"),e?.birddogexpsetup&&this.sendCommand("birddogexpsetup","GET"),e?.birddogwbsetup&&this.sendCommand("birddogwbsetup","GET"),e?.birddogpicsetup&&this.sendCommand("birddogpicsetup","GET"),this.udp&&(this.sendVISCACommand("\t\0","J"),this.sendVISCACommand(A+S+w,"Z"),this.sendVISCACommand(A+G+w,"["),"on"===this.camera?.standby&&this.sendVISCACommand("\tG","\\")),e?.birddogcmsetup&&this.sendCommand("birddogcmsetup","GET"),e?.birddogadvancesetup&&this.sendCommand("birddogadvancesetup","GET"),e?.birddogexternalsetup&&this.sendCommand("birddogexternalsetup","GET"),e?.birddogdetsetup&&this.sendCommand("birddogdetsetup","GET"),e?.birddoggammasetup&&this.sendCommand("birddoggammasetup","GET"),e?.birddogscope&&this.sendCommand("birddogscope","GET"),e?.pt_pos&&this.udp&&this.sendVISCACommand("\t","]")}getCameraModel(){"Auto"===this.config.model?Ie(`http://${this.config.host}:8080/version`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(200==e.status)return e.text()})).then((e=>{let t=e;t?(t=t.replace(/BirdDog| |_/g,""),this.getCameraFW(this.checkCameraModel(t))):t||(this.log("error","Please upgrade your BirdDog camera to the latest LTS firmware to use this module"),this.updateStatus("connection_failure"),void 0!==this.timers.pollCameraStatus&&clearInterval(this.timers.pollCameraStatus))})).catch((e=>{this.log("debug",`Get Cam Model Error ${e}`);let t=String(e);(t.match("ECONNREFUSED")||t.match("ENOTFOUND")||t.match("EHOSTDOWN")||t.match("ETIMEDOUT"))&&(this.updateStatus("connection_failure"),this.log("error",`Unable to connect to BirdDog PTZ Camera (Error: ${t?.split("reason:")[1]})`))})):this.getCameraFW(this.config.model)}getCameraFW(e){Ie(`http://${this.config.host}:8080/about`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(200==e.status)return e.json()})).then((t=>{if(t.FirmwareVersion){let a=t.FirmwareVersion.substring(t.FirmwareVersion.lastIndexOf(" ")+1).substring(0,1),o=t.FirmwareVersion.substring(t.FirmwareVersion.lastIndexOf(" ")+2).substring(1);this.intializeState(e,t.HostName,a,o),this.initializeCamera()}else"1.0"===t.Version&&(this.log("error","Please upgrade your BirdDog camera to the latest LTS firmware to use this module"),this.updateStatus("connection_failure"),void 0!==this.timers.pollCameraStatus&&clearInterval(this.timers.pollCameraStatus))})).catch((e=>{this.log("debug",`Camera Firmware Error: ${e}`);let t=String(e);(t.match("ECONNREFUSED")||t.match("ENOTFOUND")||t.match("EHOSTDOWN")||t.match("ETIMEDOUT"))&&(this.updateStatus("connection_failure"),this.log("error",`Unable to connect to BirdDog PTZ Camera (Error: ${t?.split("reason:")[1]})`))}))}initializeCamera(){this.camera.firmware.major&&this.camera.model?(this.updateStatus("ok"),this.log("info",`Connected to ${this.camera.hostname}`),this.log("debug",`---- Connected to ${this.camera.hostname}`),this.initActions(),this.initPresets(),this.initVariables(),this.initFeedbacks(),this.startPolling(),this.init_udp(),"5"===this.camera.firmware.major&&this.init_ws_listener()):(this.updateStatus("connection_failure"),this.log("error",`Unable to connect to ${this.camera.hostname}`))}checkCameraModel(e){let t=I.CAMERAS.find((t=>t.id===e?e:!!t?.other&&Object.entries(t)[2][1].includes(e)));return t?(this.log("info",`Detected camera model: ${t.id}`),this.log("debug","---- Detected camera model: "+t.id),t.id):(this.log("error",`Unrecognized camera model: ${e}. Using "Default" camera profile`),this.log("debug",`Unrecognized camera model: ${e}. Using "Default" camera profile`),"Default")}intializeState(e,t,a,o){this.camera={};let n=Object.entries(y).filter((t=>(t[1].camera.includes(e)||t[1].camera.includes("All"))&&t[1].firmware.includes(a)&&!0===t[1].store_state));Object.keys(Object.fromEntries(n)).sort().map((e=>this.camera[e]={})),this.camera.model=e,this.camera.hostname=t,this.camera.firmware={},this.camera.firmware.major=a,this.camera.firmware.minor=o,this.camera.shutter_table=60,this.camera.unknown=[]}storeState(e,t){let a=[];return Object.entries(e).forEach((e=>{let o=Object.entries(y).find((a=>(a[1].camera.includes(this.camera.model)||a[1].camera.includes("All"))&&a[1].firmware.includes(this.camera.firmware.major)&&a[1]?.api_endpoint?.includes(t)&&a[1]?.api_variable?.includes(e[0])));o?this.camera[o[0]]!==e[1]&&(a.push(o[0]),this.camera[o[0]]=e[1]):this.camera.unknown.includes(e[0])||(this.log("debug",`Unknown API variable returned from ${t}: ${e[0]}`),this.camera.unknown.push(e[0]))})),a}}(0,o.runEntrypoint)(ve,x)},4193:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var o=a(5006);const n=class extends o.Z{#D=0;#M="";constructor(e,t,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,a),null===a&&(a={});const o=void 0===a.lastModified?Date.now():Number(a.lastModified);Number.isNaN(o)||(this.#D=o),this.#M=String(t)}get name(){return this.#M}get lastModified(){return this.#D}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof o.Z&&/^(File)$/.test(e[Symbol.toStringTag])}}},749:(e,t,a)=>{"use strict";a.d(t,{$B:()=>n.Z});const o=require("node:fs");require("node:path"),a(3414);var n=a(4193);a(5006);const{stat:i}=o.promises;class r{#j;#Q;constructor(e){this.#j=e.path,this.#Q=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new r({path:this.#j,lastModified:this.lastModified,size:t-e,start:this.#Q+e})}async*stream(){const{mtimeMs:e}=await i(this.#j);if(e>this.lastModified)throw new node_domexception("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,o.createReadStream)(this.#j,{start:this.#Q,end:this.#Q+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}},5006:(e,t,a)=>{"use strict";async function*o(e,t=!0){for(const a of e)if("stream"in a)yield*a.stream();else if(ArrayBuffer.isView(a))if(t){let e=a.byteOffset;const t=a.byteOffset+a.byteLength;for(;e!==t;){const o=Math.min(t-e,65536),n=a.buffer.slice(e,e+o);e+=n.byteLength,yield new Uint8Array(n)}}else yield a;else{let e=0,t=a;for(;e!==t.size;){const a=t.slice(e,Math.min(t.size,e+65536)),o=await a.arrayBuffer();e+=o.byteLength,yield new Uint8Array(o)}}}a.d(t,{Z:()=>i}),a(7135);const n=class e{#$=[];#q="";#ee=0;#te="transparent";constructor(t=[],a={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof a&&"function"!=typeof a)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===a&&(a={});const o=new TextEncoder;for(const a of t){let t;t=ArrayBuffer.isView(a)?new Uint8Array(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)):a instanceof ArrayBuffer?new Uint8Array(a.slice(0)):a instanceof e?a:o.encode(`${a}`),this.#ee+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#$.push(t)}this.#te=`${void 0===a.endings?"transparent":a.endings}`;const n=void 0===a.type?"":String(a.type);this.#q=/^[\x20-\x7E]*$/.test(n)?n:""}get size(){return this.#ee}get type(){return this.#q}async text(){const e=new TextDecoder;let t="";for await(const a of o(this.#$,!1))t+=e.decode(a,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const a of o(this.#$,!1))e.set(a,t),t+=a.length;return e.buffer}stream(){const e=o(this.#$,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const a=await e.next();a.done?t.close():t.enqueue(a.value)},async cancel(){await e.return()}})}slice(t=0,a=this.size,o=""){const{size:n}=this;let i=t<0?Math.max(n+t,0):Math.min(t,n),r=a<0?Math.max(n+a,0):Math.min(a,n);const s=Math.max(r-i,0),l=this.#$,c=[];let d=0;for(const e of l){if(d>=s)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(i&&t<=i)i-=t,r-=t;else{let a;ArrayBuffer.isView(e)?(a=e.subarray(i,Math.min(t,r)),d+=a.byteLength):(a=e.slice(i,Math.min(t,r)),d+=a.size),r-=t,c.push(a),i=0}}const u=new e([],{type:String(o).toLowerCase()});return u.#ee=s,u.#$=c,u}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(n.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const i=n},9951:(e,t,a)=>{"use strict";a.d(t,{Ct:()=>p,au:()=>m});var o=a(5006),n=a(4193),{toStringTag:i,iterator:r,hasInstance:s}=Symbol,l=Math.random,c="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),d=(e,t,a)=>(e+="",/^(Blob|File)$/.test(t&&t[i])?[(a=void 0!==a?a+"":"File"==t[i]?t.name:"blob",e),t.name!==a||"blob"==t[i]?new n.Z([t],a,t):t]:[e,t+""]),u=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),g=(e,t,a)=>{if(t.length<a)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${a} arguments required, but only ${t.length} present.`)};const p=class{#ae=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[i](){return"FormData"}[r](){return this.entries()}static[s](e){return e&&"object"==typeof e&&"FormData"===e[i]&&!c.some((t=>"function"!=typeof e[t]))}append(...e){g("append",arguments,2),this.#ae.push(d(...e))}delete(e){g("delete",arguments,1),e+="",this.#ae=this.#ae.filter((([t])=>t!==e))}get(e){g("get",arguments,1),e+="";for(var t=this.#ae,a=t.length,o=0;o<a;o++)if(t[o][0]===e)return t[o][1];return null}getAll(e,t){return g("getAll",arguments,1),t=[],e+="",this.#ae.forEach((a=>a[0]===e&&t.push(a[1]))),t}has(e){return g("has",arguments,1),e+="",this.#ae.some((t=>t[0]===e))}forEach(e,t){for(var[a,o]of(g("forEach",arguments,1),this))e.call(t,o,a,this)}set(...e){g("set",arguments,2);var t=[],a=!0;e=d(...e),this.#ae.forEach((o=>{o[0]===e[0]?a&&(a=!t.push(e)):t.push(o)})),a&&t.push(e),this.#ae=t}*entries(){yield*this.#ae}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function m(e,t=o.Z){var a=`${l()}${l()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${a}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?n.push(i+u(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):n.push(i+u(t)+`"; filename="${u(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),n.push(`--${a}--`),new t(n,{type:"multipart/form-data; boundary="+a})}},7582:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__addDisposableResource:()=>N,__assign:()=>i,__asyncDelegator:()=>S,__asyncGenerator:()=>w,__asyncValues:()=>G,__await:()=>A,__awaiter:()=>m,__classPrivateFieldGet:()=>V,__classPrivateFieldIn:()=>x,__classPrivateFieldSet:()=>R,__createBinding:()=>b,__decorate:()=>s,__disposeResources:()=>E,__esDecorate:()=>c,__exportStar:()=>f,__extends:()=>n,__generator:()=>h,__importDefault:()=>k,__importStar:()=>W,__makeTemplateObject:()=>Z,__metadata:()=>p,__param:()=>l,__propKey:()=>u,__read:()=>_,__rest:()=>r,__runInitializers:()=>d,__setFunctionName:()=>g,__spread:()=>y,__spreadArray:()=>C,__spreadArrays:()=>v,__values:()=>I,default:()=>T});var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},o(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}var i=function(){return i=Object.assign||function(e){for(var t,a=1,o=arguments.length;a<o;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};function r(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]])}return a}function s(e,t,a,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,a,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r}function l(e,t){return function(a,o){t(a,o,e)}}function c(e,t,a,o,n,i){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,l=o.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?o.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,o.name):{}),g=!1,p=a.length-1;p>=0;p--){var m={};for(var h in o)m[h]="access"===h?{}:o[h];for(var h in o.access)m.access[h]=o.access[h];m.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");i.push(r(e||null))};var b=(0,a[p])("accessor"===l?{get:u.get,set:u.set}:u[c],m);if("accessor"===l){if(void 0===b)continue;if(null===b||"object"!=typeof b)throw new TypeError("Object expected");(s=r(b.get))&&(u.get=s),(s=r(b.set))&&(u.set=s),(s=r(b.init))&&n.unshift(s)}else(s=r(b))&&("field"===l?n.unshift(s):u[c]=s)}d&&Object.defineProperty(d,o.name,u),g=!0}function d(e,t,a){for(var o=arguments.length>2,n=0;n<t.length;n++)a=o?t[n].call(e,a):t[n].call(e);return o?a:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function g(e,t,a){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:a?"".concat(a," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,a,o){return new(a||(a=Promise))((function(n,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))}function h(e,t){var a,o,n,i,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(r=0)),r;)try{if(a=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((n=(n=r.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{a=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var b=Object.create?function(e,t,a,o){void 0===o&&(o=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,o,n)}:function(e,t,a,o){void 0===o&&(o=a),e[o]=t[a]};function f(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||b(t,e,a)}function I(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],o=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var o,n,i=a.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return r}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function v(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<a;t++)for(var i=arguments[t],r=0,s=i.length;r<s;r++,n++)o[n]=i[r];return o}function C(e,t,a){if(a||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function A(e){return this instanceof A?(this.v=e,this):new A(e)}function w(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=a.apply(e,t||[]),i=[];return o={},r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o;function r(e){n[e]&&(o[e]=function(t){return new Promise((function(a,o){i.push([e,t,a,o])>1||s(e,t)}))})}function s(e,t){try{(a=n[e](t)).value instanceof A?Promise.resolve(a.value.v).then(l,c):d(i[0][2],a)}catch(e){d(i[0][3],e)}var a}function l(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function S(e){var t,a;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,n){t[o]=e[o]?function(t){return(a=!a)?{value:A(e[o](t)),done:!1}:n?n(t):t}:n}}function G(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=e[Symbol.asyncIterator];return a?a.call(e):(e=I(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(a){t[a]=e[a]&&function(t){return new Promise((function(o,n){!function(e,t,a,o){Promise.resolve(o).then((function(t){e({value:t,done:a})}),t)}(o,n,(t=e[a](t)).done,t.value)}))}}}function Z(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var B=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function W(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&b(t,e,a);return B(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function V(e,t,a,o){if("a"===a&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?o:"a"===a?o.call(e):o?o.value:t.get(e)}function R(e,t,a,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,a):n?n.value=a:t.set(e,a),a}function x(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,a){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var o;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=t[Symbol.asyncDispose]}if(void 0===o){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=t[Symbol.dispose]}if("function"!=typeof o)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:o,async:a})}else a&&e.stack.push({async:!0});return t}var H="function"==typeof SuppressedError?SuppressedError:function(e,t,a){var o=new Error(a);return o.name="SuppressedError",o.error=e,o.suppressed=t,o};function E(e){function t(t){e.error=e.hasError?new H(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function a(){for(;e.stack.length;){var o=e.stack.pop();try{var n=o.dispose&&o.dispose.call(o.value);if(o.async)return Promise.resolve(n).then(a,(function(e){return t(e),a()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}const T={__extends:n,__assign:i,__rest:r,__decorate:s,__param:l,__metadata:p,__awaiter:m,__generator:h,__createBinding:b,__exportStar:f,__values:I,__read:_,__spread:y,__spreadArrays:v,__spreadArray:C,__await:A,__asyncGenerator:w,__asyncDelegator:S,__asyncValues:G,__makeTemplateObject:Z,__importStar:W,__importDefault:k,__classPrivateFieldGet:V,__classPrivateFieldSet:R,__classPrivateFieldIn:x,__addDisposableResource:N,__disposeResources:E}}},a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,o.c=a,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>e+".js",o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={179:1},o.f.require=(t,a)=>{e[t]||(t=>{var a=t.modules,n=t.ids,i=t.runtime;for(var r in a)o.o(a,r)&&(o.m[r]=a[r]);i&&i(o);for(var s=0;s<n.length;s++)e[n[s]]=1})(require("./"+o.u(t)))},o(o.s=1260)})();